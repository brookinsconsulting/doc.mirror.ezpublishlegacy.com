(function(){initOld=DrawioViewer.prototype.init;DrawioViewer.prototype.init=function(){initOld.apply(this,arguments);viewer=this;this.graph.click=function(e){var a=e.getCell();if(a!=null&&!e.isConsumed()&&(mxEvent.isTouchEvent(e.getEvent())||!mxEvent.isPopupTrigger(e.getEvent()))){var b=this.getLinkForCell(a);if(b!=null){var d=new RegExp("^(?:[a-z]+:)?//","i");if(!d.test(b)){if(b.lastIndexOf("/",0)!==0){b="/"+b}var f=viewer.options.contextPath;window.location.href=b.substring(0,f.length)===f?b:f+b}else{var c=document.createElement("a");c.href=b;c.href=c.href;if(c.host===location.host){window.location.href=b}else{window.open(b)}}}e.consume()}}};DrawioViewer.prototype.showLightbox=function(){var e=this;var b={};b.width=AJS.$(window).width();b.height=AJS.$(window).height();var a=new AJS.Dialog({width:b.width,height:b.height,id:e.id,closeOnOutsideClick:true});a.addHeader(e.diagramName,"drawio-reader-popup-header");var c=a.getPage(0);c.menu.css({display:"none"});e.options.width=b.width;e.options.height=b.height;e.options.center=true;e.options.zoomToFit=false;AJS.$(c.body.get(0)).css({position:"relative"});var d=new DrawioViewer(e.diagramName,e.id,e.ceoId,e.options,true,this.graphDocument);d.buttons[DrawioViewerActions.EXPAND].visible=false;d.buttons[DrawioViewerActions.CLOSE].visible=true;d.buttons[DrawioViewerActions.REMOVE].visible=false;d.buttons[DrawioViewerActions.ACTUAL_SIZE].visible=false;d.buttons[DrawioViewerActions.EDIT].visible=false;d.popupWindow=a;a.show();d.show(c.body.get(0));d.graph.maxFitScale=1;d.graph.fit(8);d.graph.center(true,true,null,0.42)}})();