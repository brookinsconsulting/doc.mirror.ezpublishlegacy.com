;try {
/* module-key = 'com.atlassian.confluence.plugins.pagetree:pagetree-js-resources', location = 'soy/pagetree.soy' */
// This file was automatically generated from pagetree.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.Pagetree == 'undefined') { Confluence.Templates.Pagetree = {}; }
if (typeof Confluence.Templates.Pagetree.Macro == 'undefined') { Confluence.Templates.Pagetree.Macro = {}; }


Confluence.Templates.Pagetree.Macro.loadingIndicator = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="plugin_pagetree_children_loading_wrapper"><div class="spinner"/><span class="plugin_pagetree_children_loading">', soy.$$escapeHtml("Loading..."), '</span></div>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.pagetree:pagetree-js-resources', location = 'com/atlassian/confluence/plugins/pagetree/resource/javascript/pagetree.js' */
(function(){var A=function(M){this.$=M;
var H=this.$;
var b=999;
var c=true;
var K=false;
var W={};
var D={};
var N=function(k,j,f,i,e){if(j==undefined||j==null){j=!B(k)
}if(f==undefined||f==null){f=0
}if(!L(k,j)){var h=H("#children"+k);
if(Z(h)){var g=H("#plusminus"+k);
if(j==c){g.removeClass("icon-section-closed").addClass("icon-section-opened")
}else{g.removeClass("icon-section-opened").addClass("icon-section-closed")
}if(j==c){if(e==false){h.slideDown(300)
}else{h.removeClass("plugin-pagetree-hide-children");
h.animate({opacity:1})
}}else{if(e==false){h.slideUp(300)
}else{h.animate({opacity:0},{complete:function(){h.addClass("plugin-pagetree-hide-children")
}})
}}if(i){R(k)
}}else{J(k,new Array(),f,"",i,e)
}}if(i){R(k)
}};
var Z=function(e){return e.children("ul[id]").length>0
};
var B=function(f){var e=H("#plusminus"+f);
return(e.length>0)?(e.hasClass("icon-minus")||e.hasClass("icon-section-opened")):K
};
var L=function(f,e){return B(f)==e
};
var I=function(h,g,f){a(h,c,g,f)
};
var X=function(h,g,f){a(h,K,g,f)
};
var a=function(k,i,h,g){G(k);
var j=H("#"+k);
var f=j.find("div.plugin_pagetree_children_container");
f.each(function(e){var l=V(this.id);
N(l,i,b,e==f.length-1,g)
});
h.preventDefault();
h.stopPropagation()
};
var V=function(e){if(!e||e==undefined){return null
}if(e.indexOf("plusminus")!=-1){return e.substring("plusminus".length)
}if(e.indexOf("children")!=-1){return e.substring("children".length)
}return null
};
var C=function(e){if(!e||e==undefined){return null
}return S(e)[1]
};
var S=function(e){if(!e||e==undefined){return null
}return e.split("-")
};
var G=function(f){var e=C(f);
H("div.plugin_pagetree").each(function(g){if(g==e){H(this).find("span.plugin_pagetree_status").removeClass("hidden");
H(this).find("div.plugin_pagetree_expandcollapse").addClass("hidden")
}})
};
var R=function(f){var e=C(f);
H("div.plugin_pagetree").each(function(g){if(g==e){H(this).find("span.plugin_pagetree_status").addClass("hidden");
H(this).find("div.plugin_pagetree_expandcollapse").removeClass("hidden")
}})
};
var F=function(l,f,i,h,k,e,g){var j=W[l];
if(f=="Orphan"){j+="&hasRoot=false&spaceKey="+k
}else{j+="&hasRoot=true&pageId="+f
}j+="&treeId="+l+"&startDepth="+h+"&mobile="+g;
H.each(i,function(){j+="&ancestors="+this
});
j+="&treePageId="+e;
if(g==false){j=(AJS.params.serverUrl||"")+j
}return j
};
var Q=function(g){var f=g;
var e=null;
H("div.plugin_pagetree").each(function(h){if(h==f){e=H(this)
}});
return e
};
var P=function(e){var f=e.children("fieldset");
var g=new Object();
if(f.length>0){f.children("input").each(function(){g[this.name]=this.value
})
}return g
};
var O=function(e){var g=e.children("fieldset");
var h=new Array();
if(g.length>0){var f=g.children("fieldset");
if(f.length>0){f.children("input").each(function(){h.push(this.value)
})
}}return h
};
var E=function(g,f){var e=H("a.plugin_pagetree_childtoggle",g);
e.each(function(){var h=H(this);
h.attr("href","#").bind("click",function(k){var i=h.parent().parent().children("div.plugin_pagetree_children_container");
var j=i.attr("id");
var l=j.substring(8);
N(l,null,null,null,f);
k.preventDefault();
k.stopPropagation()
})
})
};
var U=function(e){var f=H(document.createElement("div"));
f.html(e);
return f.find("ul[id^='child_ul']").length
};
var J=function(m,g,q,o,i,f){var p=m;
var j=i;
var e=S(m);
var h=e[0];
var l=e[1];
var k=H("#children"+m);
var n=P(Q(l));
k.append(Confluence.Templates.Pagetree.Macro.loadingIndicator());
Raphael.spinner(k.find(".plugin_pagetree_children_loading_wrapper .spinner")[0],7,"#666");
H.ajax({type:"GET",url:F(l,h,g,q,o,n.treePageId,f),dataType:"text",success:function(r){if(U(r)){k.html(r);
if(k.children().length&&k.hasClass("hidden")){k.removeClass("hidden")
}E(k,f);
H("#plusminus"+p).addClass("icon-section-opened").removeClass("icon-section-closed");
H("#childrenspan"+D[parseInt(l)]+"-"+l).addClass("plugin_pagetree_current");
if(j){R(p)
}T(k);
if(AJS.PageGadget&&AJS.PageGadget.contentsUpdated){AJS.PageGadget.contentsUpdated()
}}else{window.location=n.loginUrl
}AJS.trigger("pagetree-children-loaded")
},error:function(r){if(r.status=="403"){k.text(n["i18n-pagetree.error.permission"])
}else{k.text(n["i18n-pagetree.error.general"])
}}})
};
var T=function(e){H("div.plugin_pagetree_children_container:empty",e).addClass("hidden")
};
var Y=function(e,j){var h=P(e);
var k=h.noRoot=="true";
var g=k?"Orphan-"+j:h.rootPageId+"-"+j;
var f=h.mobile=="true";
W[j]=h.treeRequestId;
if(f==false){D[j]=AJS.params.pageId
}else{D[j]=H("div.content-container").parent().attr("data-content-id")
}e.children("fieldset").each(function(){var l=H(this);
l.children("input[treeId]").attr("value",j);
l.children("input[rootPage]").attr("value",g)
});
if(k){e.find("div.plugin_pagetree_children").attr("id","childrenOrphan-"+j);
e.find("a.plugin_pagetree_expandall").click(function(l){I("childrenOrphan-"+j,l,f);
return false
});
e.find("a.plugin_pagetree_collapseall").click(function(l){X("childrenOrphan-"+j,l,f);
return false
})
}else{e.find("div.plugin_pagetree_children").attr("id","children"+g);
e.find("a.plugin_pagetree_expandall").click(function(l){I("children"+g,l,f);
return false
});
e.find("a.plugin_pagetree_collapseall").click(function(l){X("children"+g,l,f);
return false
})
}var i=O(e);
J(g,i,h.startDepth,h.spaceKey,"",f)
};
this.initPageTrees=function(){H("div.plugin_pagetree").each(function(e){Y(H(this),e)
});
d()
};
var d=function(){var e=self.placeFocus;
if(e){self.placeFocus=function(){var f=H("form[name='pagetreesearchform']");
f.attr("name","inlinecommentform");
e();
f.attr("name","pagetreesearchform")
}
}};
H(".open-flyout-to-search").bind("click",function(e){if(H(".fly-out-open").length){setTimeout(function(){ConfluenceMobile.flyout.hide()
},400)
}else{setTimeout(function(){ConfluenceMobile.flyout.show()
},400)
}e.stopPropagation();
e.preventDefault()
})
};
Confluence=Confluence||{};
Confluence.Plugins=Confluence.Plugins||{};
Confluence.Plugins.PagetreeMacro={bind:function(B){var C=new A(B);
C.initPageTrees()
}}
})();
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.pagetree:pagetree-js-resources', location = 'com/atlassian/confluence/plugins/pagetree/resource/javascript/pagetree-desktop.js' */
AJS.toInit(function(A){Confluence.Plugins.PagetreeMacro.bind(A)
});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.extra.jira:help-dialog-extension', location = '/jira/help-dialog.js' */
if(Confluence.KeyboardShortcuts){Confluence.KeyboardShortcuts.Editor.push({context:"editor.actions",descKey:"Insert JIRA Issue/Filter"+":",keys:[["Ctrl+Shift+J"]]})};
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.auiplugin:internal-aui-browser', location = 'js/aui/internal/browser.js' */
(function(A){AJS._internal=AJS._internal||{};AJS._internal.browser=A(AJS.$)})(function(B){var A={};var C=null;A.supportsCalc=function(){if(C===null){var D=B('<div style="height: 10px; height: -webkit-calc(20px + 0); height: calc(20px);"></div>');C=(20===D.appendTo(document.documentElement).height());D.remove()}return C};A.supportsRequestAnimationFrame=function(){return !!window.requestAnimationFrame};return A});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.auiplugin:dialog2', location = 'js/dialog2.js' */
(function(A){AJS.dialog2=A(AJS.$,AJS.layer,AJS._internal.widget)})(function(D,G,C){var F={"aui-focus":"false","aui-blanketed":"true"};function B(H){D.each(F,function(I,J){var K="data-"+I;if(!H[0].hasAttribute(K)){H.attr(K,J)}})}function A(H){if(H){this.$el=D(H)}else{this.$el=D(aui.dialog.dialog2({}))}B(this.$el)}A.prototype.on=function(I,H){G(this.$el).on(I,H);return this};A.prototype.off=function(I,H){G(this.$el).off(I,H);return this};A.prototype.show=function(){G(this.$el).show();return this};A.prototype.hide=function(){G(this.$el).hide();return this};A.prototype.remove=function(){G(this.$el).remove();return this};A.prototype.isVisible=function(){return G(this.$el).isVisible()};var E=C("dialog2",A);E.on=function(H,I){G.on(H,".aui-dialog2",I);return this};E.off=function(H,I){G.off(H,".aui-dialog2",I);return this};D(document).on("click",".aui-dialog2-header-close",function(H){H.preventDefault();E(D(this).closest(".aui-dialog2")).hide()});E.on("show",function(K,J){var I=[".aui-dialog2-content",".aui-dialog2-footer",".aui-dialog2-header"];var H;I.some(function(L){H=J.find(L+" :aui-tabbable");return H.length});H&&H.first().focus()});E.on("hide",function(J,I){var H=G(I);if(I.data("aui-remove-on-hide")){H.remove()}});return E});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.auiplugin:dialog2', location = 'soy/dialog2.soy' */
// This file was automatically generated from dialog2.soy.
// Please don't edit this file by hand.

if (typeof aui == 'undefined') { var aui = {}; }
if (typeof aui.dialog == 'undefined') { aui.dialog = {}; }


aui.dialog.dialog2 = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  var param12 = new soy.StringBuilder();
  aui.dialog.dialog2Content({id: null, titleText: opt_data.titleText, titleContent: opt_data.titleContent, headerActionContent: opt_data.headerActionContent, headerSecondaryContent: opt_data.headerSecondaryContent, modal: opt_data.modal, content: opt_data.content, footerHintText: opt_data.footerHintText, footerHintContent: opt_data.footerHintContent, footerActionContent: opt_data.footerActionContent}, param12);
  aui.dialog.dialog2Chrome({id: opt_data.id, titleId: opt_data.id ? opt_data.id + '-dialog-title' : null, modal: opt_data.modal, tagName: opt_data.tagName, removeOnHide: opt_data.removeOnHide, visible: opt_data.visible, size: opt_data.size, extraClasses: opt_data.extraClasses, extraAttributes: opt_data.extraAttributes, content: param12.toString()}, output);
  return opt_sb ? '' : output.toString();
};


aui.dialog.dialog2Chrome = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<', soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'section'), (opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '', (opt_data.titleId) ? ' aria-labelledby="' + soy.$$escapeHtml(opt_data.titleId) + '"' : '', ' role="dialog" class=" aui-layer aui-dialog2 aui-dialog2-', soy.$$escapeHtml(opt_data.size ? opt_data.size : 'medium'));
  aui.renderExtraClasses(opt_data, output);
  output.append('"', (opt_data.modal) ? 'data-aui-modal="true"' : '', (opt_data.removeOnHide) ? 'data-aui-remove-on-hide="true"' : '', (opt_data.visible != true) ? 'aria-hidden="true"' : '');
  aui.renderExtraAttributes(opt_data, output);
  output.append('>', (opt_data.content) ? opt_data.content : '', '</', soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'section'), '>');
  return opt_sb ? '' : output.toString();
};


aui.dialog.dialog2Content = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  aui.dialog.dialog2Header({titleId: opt_data.id ? opt_data.id + '-dialog-title' : null, titleText: opt_data.titleText, titleContent: opt_data.titleContent, actionContent: opt_data.headerActionContent, secondaryContent: opt_data.headerSecondaryContent, modal: opt_data.modal}, output);
  aui.dialog.dialog2Panel(opt_data, output);
  aui.dialog.dialog2Footer({hintText: opt_data.footerHintText, hintContent: opt_data.footerHintContent, actionContent: opt_data.footerActionContent}, output);
  return opt_sb ? '' : output.toString();
};


aui.dialog.dialog2Header = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<header', (opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '', ' class="aui-dialog2-header');
  aui.renderExtraClasses(opt_data, output);
  output.append('"');
  aui.renderExtraAttributes(opt_data, output);
  output.append('><h2 ', (opt_data.titleId) ? ' id="' + soy.$$escapeHtml(opt_data.titleId) + '"' : '', ' class="aui-dialog2-header-main">', (opt_data.titleText) ? soy.$$escapeHtml(opt_data.titleText) : '', (opt_data.titleContent) ? opt_data.titleContent : '', '</h2>', (opt_data.actionContent) ? '<div class="aui-dialog2-header-actions">' + opt_data.actionContent + '</div>' : '', (opt_data.secondaryContent) ? '<div class="aui-dialog2-header-secondary">' + opt_data.secondaryContent + '</div>' : '', (opt_data.modal != true) ? '<a class="aui-dialog2-header-close"><span class="aui-icon aui-icon-small aui-iconfont-close-dialog">' + soy.$$escapeHtml("Close") + '</span></a>' : '', '</header>');
  return opt_sb ? '' : output.toString();
};


aui.dialog.dialog2Footer = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<footer', (opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '', ' class="aui-dialog2-footer');
  aui.renderExtraClasses(opt_data, output);
  output.append('"');
  aui.renderExtraAttributes(opt_data, output);
  output.append('>', (opt_data.actionContent) ? '<div class="aui-dialog2-footer-actions">' + opt_data.actionContent + '</div>' : '', (opt_data.hintText || opt_data.hintContent) ? '<div class="aui-dialog2-footer-hint">' + ((opt_data.hintText) ? soy.$$escapeHtml(opt_data.hintText) : '') + ((opt_data.hintContent) ? opt_data.hintContent : '') + '</div>' : '', '</footer>');
  return opt_sb ? '' : output.toString();
};


aui.dialog.dialog2Panel = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div', (opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '', ' class="aui-dialog2-content');
  aui.renderExtraClasses(opt_data, output);
  output.append('"');
  aui.renderExtraAttributes(opt_data, output);
  output.append('>', (opt_data.content) ? opt_data.content : '', '</div>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.whatsnew:whats-new-resources', location = 'js/whats-new.js' */
AJS.toInit(function(d){var g=d("#whats-new-menu-link"),c,a,j,f,i=function(n){var l=!d(this).prop("checked");var k=AJS.Meta.get("context-path")+"/plugins/whatsnew/set.action";var m={isShownForUser:l};AJS.log("whatsnew > toggleDontShow > setting isShownForUser to: "+m.isShownForUser);AJS.safe.post(k,m,function(p,o){AJS.log("whatsnew > toggleDontShow > isShownForUser set to: "+p.isShownForUser)})},e=function(){if(!c){return}f&&clearTimeout(f);a.find(".aui-dialog2-content").spinStop();AJS.setVisible(c,true)},h=function(k){var m="What\u2019s New in Confluence {0}";var l=AJS.Meta.get("version-number").match(/^\d+\.\d+/);var o=AJS.format(m,l);a=d(Confluence.Templates.Whatsnew.dialog({dialogHeading:o,loggedIn:(typeof AJS.Meta.get("remote-user")!=="undefined"),checked:!k}));a.on("click","#whats-new-dialog-close",function(){AJS.dialog2(a).hide()});a.on("change","#dont-show-whats-new",i);c=a.find("iframe");var n=AJS.Meta.get("whats-new-iframe-src-override");if(typeof(n)==="undefined"){n=g[0].href}c[0].src=n;c.load(e);j=a.find(".whats-new-timeout");return AJS.dialog2(a)},b=function(){var k=AJS.Meta.get("context-path")+"/plugins/whatsnew/get.action";d.getJSON(k,function(l){h(l.isShownForUser).show();a.find(".aui-dialog2-content").spin("large");f=setTimeout(function(){c=null;a.find(".aui-dialog2-content").spinStop();AJS.setVisible(j,true)},10000)})};g.click(function(k){k.preventDefault();b()});AJS.Meta.getBoolean("show-whats-new")&&b()});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.whatsnew:whats-new-resources', location = 'templates/whats-new.soy' */
// This file was automatically generated from whats-new.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.Whatsnew == 'undefined') { Confluence.Templates.Whatsnew = {}; }


Confluence.Templates.Whatsnew.dialog = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  var param16 = new soy.StringBuilder();
  aui.buttons.button({type: 'link', id: 'whats-new-dialog-close', text: "Close"}, param16);
  aui.dialog.dialog2({id: 'whats-new-dialog', size: 'large', modal: false, removeOnHide: true, titleText: opt_data.dialogHeading, content: '<div class="whats-new-dialog-text"><div class="whats-new-timeout hidden"><div class="aui-message warning"><p class="title"><span class="aui-icon icon-warning"></span><strong>' + soy.$$escapeHtml("Oops.") + '</strong></p><p>' + soy.$$escapeHtml(AJS.format("We\u2019re having trouble downloading the \x3ca target\x3d\x22_blank\x22 href\x3d\x22{0}\x22\x3eWhat\u2019s New content\x3c/a\x3e from the Atlassian website. This may be because you have a slow internet connection or that no internet connection is available.","https://docs.atlassian.com/confluence/docs-58/whatsnew/full")) + '</p><p><a target="_blank" href="$req.contextPath/contactadministrators.action">' + soy.$$escapeHtml("Contact an administrator") + '</a> &raquo;</p></div></div></div><iframe id="whats-new-iframe" class="hidden" frameborder="0"></iframe>', footerActionContent: param16.toString(), footerHintContent: (opt_data.loggedIn) ? '<div class="dialog-tip"><input id="dont-show-whats-new" type="checkbox" name="dontshow" ' + ((opt_data.checked) ? 'checked="checked"' : '') + '><label for="dont-show-whats-new" type="checkbox"><span class="checkbox-label">' + soy.$$escapeHtml("Don\u2019t show again") + ' </span></label><span>' + soy.$$escapeHtml("(Access from \u2018Help\u2019 menu)") + '</span></div>' : ''}, output);
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-mentions-plugin:help-dialog-extension', location = 'js/help-dialog.js' */
AJS.toInit(function(a){Confluence.KeyboardShortcuts&&Confluence.KeyboardShortcuts.Autoformat.push({action:"@",context:"autoformat.autocomplete",description:"Mention"})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.doctheme:splitter', location = 'doctheme/splitter-1.5.1/splitter.js' */
(function(c){c.fn.splitter=function(g){g=g||{};return this.each(function(){function n(f){f=e._posSplit+f[a.eventPos];a.outline?(f=Math.max(0,Math.min(f,b._DA-d._DA)),d.css(a.origin,f)):l(f)}function o(f){d.removeClass(a.activeClass);f=e._posSplit+f[a.eventPos];a.outline&&(m.remove(),m=null,l(f));j.css("-webkit-user-select","text");c(document).unbind("mousemove",n).unbind("mouseup",o)}function l(f){f=Math.max(e._min,b._DA-h._max,Math.min(f,e._max,b._DA-d._DA-h._min));d._DA=d[0][a.pxSplit];d.css(a.origin,
f).css(a.fixed,b._DF);e.css(a.origin,0).css(a.split,f).css(a.fixed,b._DF);h.css(a.origin,f+d._DA).css(a.split,b._DA-d._DA-f).css(a.fixed,b._DF);c.browser.msie||j.trigger("resize")}function k(a,b){for(var c=0,d=1;d<arguments.length;d++)c+=Math.max(parseInt(a.css(arguments[d]))||0,0);return c}var m,a=c.extend({activeClass:"active",pxPerKey:8,tabIndex:0,accessKey:""},{v:{keyLeft:39,keyRight:37,cursor:c.browser.msie?"e-resize":"ew-resize",splitbarClass:"vsplitbar",outlineClass:"voutline",type:"v",eventPos:"pageX",
origin:"left",split:"width",pxSplit:"offsetWidth",side1:"Left",side2:"Right",fixed:"height",pxFixed:"offsetHeight",side3:"Top",side4:"Bottom"},h:{keyTop:40,keyBottom:38,cursor:c.browser.msie?"n-resize":"ns-resize",splitbarClass:"hsplitbar",outlineClass:"houtline",type:"h",eventPos:"pageY",origin:"top",split:"height",pxSplit:"offsetHeight",side1:"Top",side2:"Bottom",fixed:"width",pxFixed:"offsetWidth",side3:"Left",side4:"Right"}}[(g.splitHorizontal?"h":g.splitVertical?"v":g.type)||"v"],g),b=c(this).css({position:"relative"}),
j=b.children().css({position:"absolute","-moz-outline-style":"none"}),e=c(j[0]),h=c(j[1]),i=c('<a href="javascript:void(0)"></a>').attr({accessKey:a.accessKey,tabIndex:a.tabIndex,title:a.splitbarClass}).bind(c.browser.opera?"click":"focus",function(){this.focus();d.addClass(a.activeClass)}).bind("keydown",function(b){b=b.which||b.keyCode;(b=b==a["key"+a.side1]?1:b==a["key"+a.side2]?-1:0)&&l(e[0][a.pxSplit]+b*a.pxPerKey,!1)}).bind("blur",function(){d.removeClass(a.activeClass)}),d=c(j[2]||"<div></div>").insertAfter(e).css("z-index",
4).append(i).attr({"class":a.splitbarClass,unselectable:"on"}).css({position:"absolute","user-select":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none"}).bind("mousedown",function(b){a.outline&&(m=m||d.clone(!1).insertAfter(e));j.css("-webkit-user-select","none");d.addClass(a.activeClass);e._posSplit=e[0][a.pxSplit]-b[a.eventPos];c(document).bind("mousemove",n).bind("mouseup",o)});/^(auto|default|)$/.test(d.css("cursor"))&&d.css("cursor",a.cursor);d._DA=d[0][a.pxSplit];
b._PBF=c.boxModel?k(b,"border"+a.side3+"Width","border"+a.side4+"Width"):0;b._PBA=c.boxModel?k(b,"border"+a.side1+"Width","border"+a.side2+"Width"):0;e._pane=a.side1;h._pane=a.side2;c.each([e,h],function(){this._min=a["min"+this._pane]||k(this,"min-"+a.split);this._max=a["max"+this._pane]||k(this,"max-"+a.split)||9999;this._init=!0===a["size"+this._pane]?parseInt(c.curCSS(this[0],a.split)):a["size"+this._pane]});i=e._init;isNaN(h._init)||(i=b[0][a.pxSplit]-b._PBA-h._init-d._DA);if(a.cookie){c.cookie||
alert("jQuery.splitter(): jQuery cookie plugin required");var p=parseInt(c.cookie(a.cookie));isNaN(p)||(i=p);e.bind("resize",_.debounce(function(){var b=String(d.css(a.origin));c.cookie(a.cookie,b,{expires:a.cookieExpires||365,path:a.cookiePath||document.location.pathname})},300))}isNaN(i)&&(i=Math.round((b[0][a.pxSplit]-b._PBA-d._DA)/2));var q=function(a){var d=b.offset().top,e=c("#footer").outerHeight(!0);e||(e=24);e=c(window).height()-e;b.css("height",Math.max(e-d-b._hadjust,b._hmin)+"px");(!a||
a.target==window)&&b.trigger("resize")};g.update=function(a){b._hadjust=k(b,"borderTopWidth","borderBottomWidth","marginBottom");b._hmin=Math.max(k(b,"minHeight"),20);a&&c(window).bind("resize",q);q()};a.anchorToWindow?g.update(!0):a.resizeToWidth&&!c.browser.msie&&c(window).bind("resize",function(){b.trigger("resize")});b.bind("resize",function(c,g){c.target==this&&(b._DF=b[0][a.pxFixed]-b._PBF,b._DA=b[0][a.pxSplit]-b._PBA,0>=b._DF||0>=b._DA||l(!isNaN(g)?g:!a.sizeRight&&!a.sizeBottom?e[0][a.pxSplit]:
b._DA-h[0][a.pxSplit]-d._DA))}).trigger("resize",[i])})}})(jQuery);window.placeFocus=function(){var c=document.getElementById("splitter-content");c&&0==AJS.$("#wysiwyg").length&&c.focus()};
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.doctheme:splitter', location = 'doctheme/space-specific-quicknav.js' */
AJS.toInit(function(b){if(b("#com-atlassian-confluence").hasClass("theme-documentation")){var c=b("#quick-search-query"),e=c.closest("form"),d="true"===b("fieldset input[name='spaceSearch']",e).val()?b("#confluence-space-key").attr("content"):"";e.submit(function(){var a=c.val();0<=a.search(/all:/gi)&&c.val(b.trim(a.replace(/all:/gi,"")))});var f=AJS.defaultIfUndefined("Atlassian.SearchableApps.QuickNav",{defaultValue:Confluence.QuickNav});AJS.log("Applying doc-theme quick search");f.addDropDownPostProcess(function(a){d&&
(a=b("a.search-for",a),a.attr("href",a.attr("href")+"&where="+encodeURIComponent(d)))});f.setMakeParams(function(a){a={query:a};0<=a.query.search(/all:/gi)?(b("input[name='where']",e).val(""),a.query=b.trim(a.query.replace(/all:/gi,"")),a.query||(a.query="ALL")):d&&(a.spaceKey=d);return a});c.mouseover(function(){d&&c.attr("title",b("input[name='tooltip']",e).val())})}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.web.resources:page-loading-indicator', location = '/includes/js/page-loading-indicator.js' */
Confluence.PageLoadingIndicator=function(a){function c(){return $(".confluence-page-loading-blanket",a)}function d(){return $(".confluence-loading-indicator",a)}return{show:function(){0===c().length&&$(a).append(Confluence.Templates.pageLoadingIndicator());c().show();d().spin({lines:12,length:8,width:4,radius:10,trail:60,speed:1.5,color:"#F0F0F0"})},hide:function(){d().stop();c().hide()},showUntilResolved:function(a,b){this.show();a.always(_.bind(this.hide,this));b&&a.fail(function(){AJS.messages.error(".confluence-page-loading-errors",
{body:b})})},showUntilDialogVisible:function(a,b){var e=this,b=b||"An error has occurred connecting to the server. Please try again.",c=$(".aui-dialog:visible"),d=$(".aui-dialog2:visible");!c.length&&!d.length&&e.show();a.fail(function(){e.hide();AJS.messages.error(".confluence-page-loading-errors",{body:b})});AJS.bind("show.dialog",function(){e.hide()});if(null!=AJS.dialog2&&void 0!=AJS.dialog2)AJS.dialog2.on("show",function(){e.hide()})},destroy:function(){a.remove(".confluence-page-loading-blanket")}}};
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.web.resources:page-loading-indicator', location = '/includes/soy/page-loading-indicator.soy' */
// This file was automatically generated from page-loading-indicator.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }


Confluence.Templates.pageLoadingIndicator = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="confluence-page-loading-errors"></div><div class="confluence-page-loading-blanket aui-blanket" aria-hidden="false"><div class="confluence-loading-indicator"></div></div>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.web.resources:deferred-loaders', location = '/includes/js/deferred-dialog-loader.js' */
AJS.$(function(){var c=Confluence.PageLoadingIndicator($("body"));_.each({userStatus:{resource:"confluence.userstatus:userstatus-resources",selector:"#create-user-status-link",event:"deferred.userstatus.click"},movePageDialogTools:{resource:"confluence.web.resources:page-move-resources",selector:"#action-move-page-dialog-link",event:"deferred.page-move.tools-menu"},movePageDialogEditor:{resource:"confluence.web.resources:page-move-resources",selector:"#rte-button-location",event:"deferred.page-move.editor"},
moveBlogDialogTools:{resource:"confluence.web.resources:page-move-resources",selector:"#action-move-blogpost-dialog-link",event:"deferred.blog-move.tools-menu"}},function(a){$("body").on("click",a.selector,function(d){var b=WRM.require("wr!"+a.resource,function(){AJS.trigger(a.event)});c.showUntilDialogVisible(b);b=a.resource+".requested";AJS.Analytics?AJS.Analytics.triggerPrivacyPolicySafeEvent(b):AJS.trigger("analyticsEvent",{name:b});d.preventDefault()})})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.web.resources:deferred-loaders', location = '/includes/js/page-permissions-deferred-loader.js' */
AJS.$(function(){var b=AJS.DarkFeatures.isEnabled("restrictions.new.dialog")?"com.atlassian.confluence.plugins.confluence-page-restrictions-dialog:dialog-resources":"confluence.web.resources:page-permissions-editor",c=Confluence.PageLoadingIndicator($("body")),a=function(a){var d=WRM.require("wr!"+b,function(){AJS.trigger("deferred.page.permissions")});c.showUntilDialogVisible(d,"There was an error loading the page restrictions. Please try again later.");a.preventDefault()};AJS.$("body").on("click","#rte-button-restrictions,#action-page-permissions-link",
a);AJS.bind("system-content-metadata.open-restrictions-dialog",a)});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.atlassian-nps-plugin:nps-amd-shims', location = '/js/amd-shims/ajs.js' */
define("atlassian-nps-plugin/js/amd-shims/ajs",function(){return AJS});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.atlassian-nps-plugin:nps-amd-shims', location = '/js/amd-shims/templates.js' */
define("atlassian-nps-plugin/js/amd-shims/templates",function(){return NPS.Templates});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.atlassian-nps-plugin:nps-amd-shims', location = '/js/amd-shims/wrm.js' */
define("atlassian-nps-plugin/js/amd-shims/wrm",function(){return WRM});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.atlassian-nps-plugin:nps-util', location = '/js/nps/util.js' */
define("atlassian-nps-plugin/js/nps/util",["atlassian-nps-plugin/js/amd-shims/ajs"],function(a){var b={};b.kfyShuffle=function(f){for(var e=f.length-1;e>0;e--){var c=Math.floor(Math.random()*(e+1));var d=f[e];f[e]=f[c];f[c]=d}return f};b.sendAnalyticsEvent=function(c,d){var e={name:"nps."+c,data:d||{}};a.trigger("analyticsEvent",e)};return b});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.atlassian-nps-plugin:atlassian-nps-plugin-resources', location = '/js/nps/product/confluence.js' */

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.atlassian-nps-plugin:atlassian-nps-plugin-resources', location = '/js/nps/client-storage.js' */

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.atlassian-nps-plugin:atlassian-nps-plugin-resources', location = '/js/nps/submission.js' */

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.atlassian-nps-plugin:atlassian-nps-plugin-resources', location = '/js/nps/config-manager-client.js' */

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.atlassian-nps-plugin:atlassian-nps-plugin-resources', location = '/js/nps/config-manager-server.js' */

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.atlassian-nps-plugin:atlassian-nps-plugin-resources', location = '/js/nps/session-manager.js' */

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.atlassian-nps-plugin:atlassian-nps-plugin-resources', location = '/js/atlassian-nps-plugin.js' */

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.atlassian-nps-plugin:atlassian-nps-plugin-resources', location = '/js/bootstrap.js' */

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.mxgraph.confluence.plugins.diagramly:drawio-blueprint-resources-main', location = 'js/DiagramlyBlueprintInit.js' */
AJS.toInit(function(){if(Confluence&&Confluence.Blueprint&&Confluence.Blueprint.register){Confluence.Blueprint.register("com.mxgraph.confluence.plugins.diagramly:drawio-blueprint-item",function(b,c,a){window.location=Confluence.getContextPath()+"/pages/createpage.action?spaceKey="+encodeURIComponent(c)+"&newSpaceKey="+encodeURIComponent(c)+(b.getParentPageId()?"&fromPageId="+b.getParentPageId():"")+"&diagramlyBlueprint=1"})}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.base-hipchat-integration-plugin-api:almond', location = 'lib/amd/almond-noconflict-pre.js' */
window.__require=window.require;window.__requirejs=window.requirejs;window.__define=window.define;
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.base-hipchat-integration-plugin-api:almond', location = 'lib/amd/almond.js' */
var requirejs,require,define;(function(e){var h,a,k,l,d={},c={},r={},o={},j=Object.prototype.hasOwnProperty,i=[].slice;function s(t,u){return j.call(t,u)}function m(w,u){var E,A,y,B,x,G,H,D,C,z,F=u&&u.split("/"),v=r.map,t=(v&&v["*"])||{};if(w&&w.charAt(0)==="."){if(u){F=F.slice(0,F.length-1);w=F.concat(w.split("/"));for(D=0;D<w.length;D+=1){z=w[D];if(z==="."){w.splice(D,1);D-=1}else{if(z===".."){if(D===1&&(w[2]===".."||w[0]==="..")){break}else{if(D>0){w.splice(D-1,2);D-=2}}}}}w=w.join("/")}else{if(w.indexOf("./")===0){w=w.substring(2)}}}if((F||t)&&v){E=w.split("/");for(D=E.length;D>0;D-=1){A=E.slice(0,D).join("/");if(F){for(C=F.length;C>0;C-=1){y=v[F.slice(0,C).join("/")];if(y){y=y[A];if(y){B=y;x=D;break}}}}if(B){break}if(!G&&t&&t[A]){G=t[A];H=D}}if(!B&&G){B=G;x=H}if(B){E.splice(0,x,B);w=E.join("/")}}return w}function q(t,u){return function(){return a.apply(e,i.call(arguments,0).concat([t,u]))}}function n(t){return function(u){return m(u,t)}}function f(t){return function(u){d[t]=u}}function g(u){if(s(c,u)){var t=c[u];delete c[u];o[u]=true;h.apply(e,t)}if(!s(d,u)&&!s(o,u)){throw new Error("No "+u)}return d[u]}function p(u){var v,t=u?u.indexOf("!"):-1;if(t>-1){v=u.substring(0,t);u=u.substring(t+1,u.length)}return[v,u]}k=function(u,t){var v,x=p(u),w=x[0];u=x[1];if(w){w=m(w,t);v=g(w)}if(w){if(v&&v.normalize){u=v.normalize(u,n(t))}else{u=m(u,t)}}else{u=m(u,t);x=p(u);w=x[0];u=x[1];if(w){v=g(w)}}return{f:w?w+"!"+u:u,n:u,pr:w,p:v}};function b(t){return function(){return(r&&r.config&&r.config[t])||{}}}l={require:function(t){return q(t)},exports:function(t){var u=d[t];if(typeof u!=="undefined"){return u}else{return(d[t]={})}},module:function(t){return{id:t,uri:"",exports:d[t],config:b(t)}}};h=function(u,D,C,B){var w,A,x,t,v,y=[],z;B=B||u;if(typeof C==="function"){D=!D.length&&C.length?["require","exports","module"]:D;for(v=0;v<D.length;v+=1){t=k(D[v],B);A=t.f;if(A==="require"){y[v]=l.require(u)}else{if(A==="exports"){y[v]=l.exports(u);z=true}else{if(A==="module"){w=y[v]=l.module(u)}else{if(s(d,A)||s(c,A)||s(o,A)){y[v]=g(A)}else{if(t.p){t.p.load(t.n,q(B,true),f(A),{});y[v]=d[A]}else{throw new Error(u+" missing "+A)}}}}}}x=C.apply(d[u],y);if(u){if(w&&w.exports!==e&&w.exports!==d[u]){d[u]=w.exports}else{if(x!==e||!z){d[u]=x}}}}else{if(u){d[u]=C}}};requirejs=require=a=function(w,x,t,u,v){if(typeof w==="string"){if(l[w]){return l[w](x)}return g(k(w,x).f)}else{if(!w.splice){r=w;if(x.splice){w=x;x=t;t=null}else{w=e}}}x=x||function(){};if(typeof t==="function"){t=u;u=v}if(u){h(e,w,x,t)}else{setTimeout(function(){h(e,w,x,t)},4)}return a};a.config=function(t){r=t;if(r.deps){a(r.deps,r.callback)}return a};define=function(t,u,v){if(!u.splice){v=u;u=[]}if(!s(d,t)&&!s(c,t)){c[t]=[t,u,v]}}}());
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.base-hipchat-integration-plugin-api:almond', location = 'lib/amd/almond-noconflict-post.js' */
if(window.__require){window.require=window.__require;window.requirejs=window.__requirejs;window.define=window.__define}else{delete window.define.amd}try{delete window.__require}catch(e){window.__require=undefined}try{delete window.__requirejs}catch(e){window.__requirejs=undefined}try{delete window.__define}catch(e){window.__define=undefined};
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.base-hipchat-integration-plugin-api:almond', location = 'lib/amd/ajs-amd.js' */
define("ajs",function(){return AJS});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.base-hipchat-integration-plugin-api:wrm-amd', location = 'lib/amd/wrm-amd.js' */
define("wrm",function(){if(WRM.data instanceof Function){WRM.data.claim=WRM.data}return WRM});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.base-hipchat-integration-plugin-api:backbone-amd', location = 'lib/amd/backbone-amd.js' */
define("backbone",function(){return Backbone});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.base-hipchat-integration-plugin-api:jquery-amd', location = 'lib/amd/jquery-amd.js' */
define("jquery",function(){return AJS.$});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.base-hipchat-integration-plugin-api:underscore-amd', location = 'lib/amd/underscore-amd.js' */
define("underscore",function(){return _});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-hipchat-integration-plugin:discovery-javascript-data', location = 'discovery/hipChatDiscovery.js' */
define("confluence/hipchat/integration/hipchat/discovery",["wrm"],function(a){var b="com.atlassian.confluence.plugins.confluence-hipchat-integration-plugin";var c=b+":discovery-javascript-data.link-active";var d=typeof a.data!="function"?a.data.claim(c):a.data(c);return{isLinked:function(){return d.linkActive===true},isConditionsMet:function(){return d.conditionsMet===true},isAdmin:function(){return d.admin===true},pluginKey:function(){return b}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-hipchat-integration-plugin:discovery-javascript-data', location = 'discovery/discoveryPopup.js' */
define("confluence/hipchat/integration/hipchat/discovery/popup",["jquery"],function(a){return{show:function(g){var c,b;var h=g.featureKey;if(g.shouldShow()&&Confluence.FeatureDiscovery){b=Confluence.FeatureDiscovery.forPlugin(g.pluginKey);c=b.shouldShow(g.featureKey,true)}else{c=false}if(c){AJS.trigger("analyticsEvent",{name:g.analytics+".view",data:{}});b&&b.addDiscoveryView(h);var d;var e=function(){b&&b.markDiscovered(h);d.hide();AJS.trigger("analyticsEvent",{name:g.analytics+".accept",data:{}});if(a.isFunction(g.onAccept)){g.onAccept()}};var f=function(i){return function(j){j.preventDefault();b&&b.markDiscovered(h);d.hide();i.parent().remove();AJS.trigger("analyticsEvent",{name:g.analytics+".dismiss",data:{}});if(a.isFunction(g.onDismiss)){g.onDismiss()}}};d=AJS.InlineDialog(g.target,g.name,function(k,i,l){k.html(g.template({}));l();var j=k.parent();j.addClass("hipchat-integration-discovery");if(g.fixed===true){j.addClass("hipchat-integration-discovery-fixed")}k.find("#hipchat-integration-discovery-open").click(e);k.find("#hipchat-integration-discovery-dismiss").click(f(k))},{noBind:true});d.show();if(g.fixed===true){a(window).resize(function(){d.refresh()})}}}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-hipchat-integration-plugin:discovery-resources', location = 'discovery/integrationDiscovery.soy' */
// This file was automatically generated from integrationDiscovery.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.Hipchat == 'undefined') { Confluence.Templates.Hipchat = {}; }
if (typeof Confluence.Templates.Hipchat.Discovery == 'undefined') { Confluence.Templates.Hipchat.Discovery = {}; }


Confluence.Templates.Hipchat.Discovery.integrationDialog = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<h2>', soy.$$escapeHtml("Connect your Confluence site to HipChat"), '</h2><p>', soy.$$escapeHtml("Set up and send notifications to HipChat rooms."), '</p><br/><button class="aui-button" id="hipchat-integration-discovery-open">', soy.$$escapeHtml("Integrate with HipChat"), '</button><a href="#" style="padding-left: 20px" id="hipchat-integration-discovery-dismiss">', soy.$$escapeHtml("Not now"), '</a>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-hipchat-integration-plugin:hipChatServerDiscovery', location = 'discovery/integrationDiscovery.js' */
require(["jquery","confluence/hipchat/integration/hipchat/discovery","confluence/hipchat/integration/hipchat/discovery/popup"],function(c,b,a){c(function(){var d=AJS.contextPath()+"/plugins/servlet/hipchat/configure";a.show({featureKey:"hipChatServerIntegration",pluginKey:b.pluginKey(),analytics:"notifications.hipchat.discovery",template:Confluence.Templates.Hipchat.Discovery.integrationDialog,name:"hipchat-integration-dialog",target:c("#admin-menu-link"),shouldShow:function(){return !b.isLinked()&&b.isConditionsMet()&&b.isAdmin()},onAccept:function(){window.location.assign(d)},onDismiss:function(){},fixed:false})})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-hipchat-integration-plugin:hipchat-presence-resources', location = 'presence/presence.soy' */
// This file was automatically generated from presence.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.HipChat == 'undefined') { Confluence.Templates.HipChat = {}; }
if (typeof Confluence.Templates.HipChat.Presence == 'undefined') { Confluence.Templates.HipChat.Presence = {}; }


Confluence.Templates.HipChat.Presence.badge = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<span class="hipchat-status aui-icon aui-icon-small hipchat-icon-', soy.$$escapeHtml(opt_data.statusCode), '" data-status="', soy.$$escapeHtml(opt_data.statusCode), '" title="', soy.$$escapeHtml(opt_data.statusMessage), '">', soy.$$escapeHtml(opt_data.statusMessage), '</span>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.HipChat.Presence.chatBar = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="hipchat-chatbar aui-buttons"><button class="aui-button hipchat-chat" title="', soy.$$escapeHtml("Unable to start chat as this user is not known in HipChat."), '" aria-disabled="true"><span><span class="aui-icon aui-icon-small hipchat-icon-chat">', soy.$$escapeHtml("Chat"), '</span></span></button><button class="aui-button hipchat-voice" title="', soy.$$escapeHtml("Unable to start voice calls as this user is not known in HipChat."), '" aria-disabled="true" data-call-type="voice"><span><span class="aui-icon aui-icon-small hipchat-icon-voice">', soy.$$escapeHtml("Voice"), '</span></span></button><button class="aui-button hipchat-video" title="', soy.$$escapeHtml("Unable to start video calls as this user is not known in HipChat."), '" aria-disabled="true" data-call-type="video"><span><span class="aui-icon aui-icon-small hipchat-icon-video">', soy.$$escapeHtml("Video"), '</span></span></button></div>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-hipchat-integration-plugin:hipchat-presence-resources', location = 'presence/presence.js' */
(function(d){var f=AJS.DarkFeatures.isEnabled("hipchat.chatbar");var a={hipChatCall:function(g,h){if(!g){return}return"hipchat://hipchat.com/user/"+encodeURI(g)+(h?"?call="+encodeURI(h):"")}};var c=AJS.contextPath()+"/rest/hipchat/integration/1.0/users/";var b=function(g){return function(j){var i=d(this);var h=i.attr("data-user-id");var k=i.attr("data-caller-id");if(!k){return}var l=i.attr("data-call-type");if(!g&&l){return}window.location.replace(a.hipChatCall(k,l));AJS.trigger("analyticsEvent",{name:"hipchat.chatbar."+(l||"chat"),data:{userId:h}});j.preventDefault()}};var e=function(g){return function(i){if(!i||!i.presence){return}var j=i.userId;var h=i.hipChatUserId;var k;var m;var l=d(g).find(".hipchat-chatbar .aui-button");l.attr("data-user-id",j);l.attr("data-caller-id",h);l.click(b(i.presence.is_online));if(i.presence.is_online){if(i.presence.show==="xa"||i.presence.show==="away"){k="away";m="Away"}else{if(i.presence.show==="dnd"){k="dnd";m="Do not disturb"}else{k="available";m="Available"}}l.filter(".hipchat-chat").attr("title","Start chat with this user in HipChat.").removeAttr("aria-disabled");l.filter(".hipchat-voice").attr("title","Start a voice call with this user in HipChat.").removeAttr("aria-disabled");l.filter(".hipchat-video").attr("title","Start a video call with this user in HipChat.").removeAttr("aria-disabled")}else{k="offline";m="Offline";l.filter(".hipchat-chat").attr("title","Start chat with this user in HipChat.").removeAttr("aria-disabled");l.filter(".hipchat-voice").attr("title","Unable to start voice calls as this user is not known in HipChat.");l.filter(".hipchat-video").attr("title","Unable to start video calls as this user is not known in HipChat.")}if(i.presence.status){m+=" ("+i.presence.status+")"}d("div.values",g).append(Confluence.Templates.HipChat.Presence.badge({statusCode:k,statusMessage:m}));AJS.trigger("analyticsEvent",{name:"hipchat.presence.user.found",data:{userId:i.userId}})}};d(document).bind("ajaxComplete",function(i,g,h){if(/userinfopopup\.action/.test(h.url)){d.each(d(".vcard"),function(n,p){var m=d(p);var k=m.closest(".contents");var l=k.find(".profile-macro").first();var o=k.find(".actions").first();if(l.hasClass("hipchat-status-applied")||!o.length){return}l.addClass("hipchat-status-applied");if(f){o.addClass("hipchat-chatbar-support");o.append(Confluence.Templates.HipChat.Presence.chatBar());o.find(".ajs-menu-bar").addClass("aui-buttons");o.find(".ajs-button > a").addClass("aui-button");o.find(".user-popup-more").addClass("aui-button");o.find(".user-popup-more > span > span").addClass("aui-icon aui-icon-small aui-iconfont-more").text("")}var q=d(".userLogoLink",m).attr("data-username");var j=c+encodeURIComponent(q);d.getJSON(j,e(k)).fail(function(t){if(t.status===404){try{var r=JSON.parse(t.responseText);if(r.userId){AJS.trigger("analyticsEvent",{name:"hipchat.presence.user.unknown",data:{userId:r.userId}})}}catch(s){}}})})}})})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-hipchat-integration-plugin:hipChatSpaceDiscovery', location = 'discovery/spacetoroom/spaceDiscoveryData.js' */
define("confluence/hipchat/spacetoroom/hipchat/discovery",[],function(){var a="com.atlassian.confluence.plugins.confluence-hipchat-integration-plugin";return{isSpaceAdmin:function(){return AJS.Meta.get("is-space-admin")===true},hasSpaceConfiguration:function(){return AJS.Meta.get("has-space-config")===true},pluginKey:function(){return a}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-hipchat-integration-plugin:hipChatSpaceDiscovery', location = 'discovery/spacetoroom/spaceDiscovery.js' */
require(["jquery","confluence/hipchat/integration/hipchat/discovery","confluence/hipchat/spacetoroom/hipchat/discovery","confluence/hipchat/integration/hipchat/discovery/popup"],function(c,d,b,a){c(function(){var f=AJS.contextPath()+"/spaces/hipchat2.action?key="+encodeURIComponent(AJS.Meta.get("space-key"));var e=c("#space-tools-menu-trigger");a.show({featureKey:"hipChatSpaceIntegration",pluginKey:b.pluginKey(),analytics:"notifications.hipchat.space.discovery",template:Confluence.Templates.Hipchat.Discovery.spaceIntegrationDialog,name:"hipchat-space-integration-dialog",target:e,shouldShow:function(){return d.isLinked()&&b.isSpaceAdmin()&&!b.hasSpaceConfiguration()},onAccept:function(){window.location.assign(f)},fixed:true});a.show({featureKey:"hipChatServerIntegration",pluginKey:b.pluginKey(),analytics:"notifications.hipchat.space.link",template:Confluence.Templates.Hipchat.Discovery.spaceLinkDialog,name:"hipchat-space-link-dialog",target:e,shouldShow:function(){return !d.isLinked()&&d.isConditionsMet()&&!d.isAdmin()&&b.isSpaceAdmin()},onAccept:function(){window.location.assign(f)},fixed:true})})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-hipchat-integration-plugin:hipChatSpaceDiscovery', location = 'discovery/spacetoroom/spaceDiscovery.soy' */
// This file was automatically generated from spaceDiscovery.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.Hipchat == 'undefined') { Confluence.Templates.Hipchat = {}; }
if (typeof Confluence.Templates.Hipchat.Discovery == 'undefined') { Confluence.Templates.Hipchat.Discovery = {}; }


Confluence.Templates.Hipchat.Discovery.spaceIntegrationDialog = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<h2>', soy.$$escapeHtml("Send messages to a HipChat room"), '</h2><p>', soy.$$escapeHtml("Send notifications for new pages, blog posts or space changes directly to a room in HipChat."), '</p><br/><button class="aui-button" id="hipchat-integration-discovery-open">', soy.$$escapeHtml("Add HipChat notifications"), '</button><a href="#" style="padding-left: 20px" id="hipchat-integration-discovery-dismiss">', soy.$$escapeHtml("Not now"), '</a>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Hipchat.Discovery.spaceLinkDialog = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<h2>', soy.$$escapeHtml("Connect your Confluence site to HipChat"), '</h2><p>', soy.$$escapeHtml("Set up and send notifications to HipChat rooms."), '</p><br/><button class="aui-button" id="hipchat-integration-discovery-open">', soy.$$escapeHtml("Integrate with HipChat"), '</button><a href="#" style="padding-left: 20px" id="hipchat-integration-discovery-dismiss">', soy.$$escapeHtml("Not now"), '</a>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-create-content-plugin:blueprint-first-time-tooltip-resources', location = 'com/atlassian/confluence/plugins/createcontent/js/first-time-tooptip.js' */
AJS.bind("sidebar.finished-loading",function(){var a=AJS.Meta.get("blueprint-index-popup-key");AJS.debug("Index key for "+a);if(a){Confluence.Blueprint.showIndexPagePopup(a)}});Confluence.Blueprint=AJS.$.extend(Confluence.Blueprint,{showIndexPagePopup:function(b){var d=function(i){return function(l,j,k){l.html(Confluence.Templates.Blueprints.sidebarIndexPagePopup({indexPageTitle:i.toLowerCase()}));k()}};var a=AJS.$(AJS.$("li.blueprint."+b)[0]);var h=a.text();var g=AJS.$(".icon",a);var f="blueprintIndexSidebarPopup";var c=AJS.InlineDialog(g.is(":visible")?g:AJS.$(".acs-nav-sections .quick-links-section"),f,d(h),{addActiveClass:false,hideDelay:null,noBind:true});AJS.$(document).bind("showLayer",function(i){var j=f+".inline-dialog-check";AJS.$("body").unbind("click."+j)});c.show();var e=function(i){AJS.$(document).on("click","#dismiss-index-popup",function(){i.hide();return false})}(c);AJS.bind("quickedit.success",function(){c.hide()})}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-create-content-plugin:blueprint-first-time-tooltip-resources', location = 'com/atlassian/confluence/plugins/createcontent/soy/sidebar-index-page-popup.soy' */
// This file was automatically generated from sidebar-index-page-popup.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.Blueprints == 'undefined') { Confluence.Templates.Blueprints = {}; }


Confluence.Templates.Blueprints.sidebarIndexPagePopup = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<h2>', soy.$$escapeHtml(AJS.format("Find your {0} here",opt_data.indexPageTitle)), '</h2><p>', soy.$$escapeHtml(AJS.format("You\x27\x27ve created a {0} page. A shortcut in your sidebar has been added where you can find other {0} in this space.",opt_data.indexPageTitle)), '</p><br/><form>');
  aui.buttons.button({text: "Dismiss", id: 'dismiss-index-popup'}, output);
  output.append('</form>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-create-content-plugin:create-from-template-resources', location = 'com/atlassian/confluence/plugins/createcontent/js/create-from-template-macro.js' */
AJS.toInit(function(b){var a=b(".create-from-template-button");a.each(function(){var d=b(this);if(d.attr("aria-disabled")=="true"){var c={live:true,gravity:"n",title:"data-tooltip",delayIn:250,delayOut:0};d.tooltip(c)}else{d.click(function(){d.addClass("launching-dialog");Confluence.Blueprint.loadDialogAndOpenTemplate(d.data());return false})}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-create-content-plugin:create-from-template-resources', location = 'com/atlassian/confluence/plugins/createcontent/soy/create-from-template-macro.soy' */
// This file was automatically generated from create-from-template-macro.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.Blueprints == 'undefined') { Confluence.Templates.Blueprints = {}; }
if (typeof Confluence.Templates.Blueprints.CreateFromTemplate == 'undefined') { Confluence.Templates.Blueprints.CreateFromTemplate = {}; }


Confluence.Templates.Blueprints.CreateFromTemplate.macroTemplate = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<a class=\'aui-button create-from-template-button\'', (! opt_data.hasCreatePermission) ? 'aria-disabled=\'true\' data-tooltip="' + soy.$$escapeHtml("Sorry, you don\x27t have permission to create content. Contact your space administrator to request access.") + '"' : '', 'data-space-key=\'', soy.$$escapeHtml(opt_data.spaceKey), '\' href=\'', soy.$$escapeHtml(opt_data.createContentUrl), '\'', (opt_data.title) ? 'data-title=\'' + soy.$$escapeHtml(opt_data.title) + '\'' : '', (opt_data.templateId) ? 'data-template-id=\'' + soy.$$escapeHtml(opt_data.templateId) + '\'' : '', (opt_data.contentBlueprintId) ? 'data-content-blueprint-id=\'' + soy.$$escapeHtml(opt_data.contentBlueprintId) + '\'' : '', '>', soy.$$escapeHtml(opt_data.buttonLabel), '</a>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.issue-status-plugin:issue-status-resources', location = 'templates/status.soy' */
// This file was automatically generated from status.soy.
// Please don't edit this file by hand.

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Template == 'undefined') { JIRA.Template = {}; }
if (typeof JIRA.Template.Util == 'undefined') { JIRA.Template.Util = {}; }
if (typeof JIRA.Template.Util.Issue == 'undefined') { JIRA.Template.Util.Issue = {}; }
if (typeof JIRA.Template.Util.Issue.Status == 'undefined') { JIRA.Template.Util.Issue.Status = {}; }


JIRA.Template.Util.Issue.Status.issueStatusResolver = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (! opt_data.issueStatus) {
    output.append('<span class="aui-icon aui-icon-small aui-iconfont-help jira-issue-status-render-error" title="', soy.$$escapeHtml("No issue status information was provided"), '"></span>');
  } else if (opt_data.issueStatus.statusCategory) {
    JIRA.Template.Util.Issue.Status.issueStatus(opt_data, output);
  } else {
    JIRA.Template.Util.Issue.Status.iconStatus({name: opt_data.issueStatus.name, iconUrl: opt_data.issueStatus.iconUrl, description: opt_data.issueStatus.description, isCompact: opt_data.isCompact}, output);
  }
  return opt_sb ? '' : output.toString();
};


JIRA.Template.Util.Issue.Status.iconStatus = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<img src="', soy.$$escapeHtml(opt_data.iconUrl), '" width="16" height="16" alt="', soy.$$escapeHtml(opt_data.name), '" title="', soy.$$escapeHtml(opt_data.name), (opt_data.description) ? ' - ' + soy.$$escapeHtml(opt_data.description) : '', '" class="jira-issue-status-icon">', (! opt_data.isCompact) ? ' ' + soy.$$escapeHtml(opt_data.name) : '');
  return opt_sb ? '' : output.toString();
};


JIRA.Template.Util.Issue.Status.issueStatus = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  JIRA.Template.Util.Issue.Status.statusLozenge({name: opt_data.issueStatus.name, categoryKey: opt_data.issueStatus.statusCategory.key, colorName: opt_data.issueStatus.statusCategory.colorName, description: opt_data.issueStatus.description, isSubtle: opt_data.isSubtle, isCompact: opt_data.isCompact, maxWidth: opt_data.maxWidth}, output);
  return opt_sb ? '' : output.toString();
};


JIRA.Template.Util.Issue.Status.statusLozenge = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  var maxWidth__soy46 = opt_data.maxWidth ? opt_data.maxWidth : 'medium';
  var tooltipContent__soy47 = new soy.StringBuilder('<span class="jira-issue-status-tooltip-title">', soy.$$escapeHtml(opt_data.name), '</span>', (opt_data.description) ? '<br><span class="jira-issue-status-tooltip-desc">' + soy.$$escapeHtml(opt_data.description) + '</span>' : '');
  tooltipContent__soy47 = tooltipContent__soy47.toString();
  output.append('<span class=" jira-issue-status-lozenge aui-lozenge ');
  JIRA.Template.Util.Issue.Status.statusLozengeClasses(opt_data, output);
  output.append((opt_data.isSubtle && ! opt_data.isCompact) ? ' aui-lozenge-subtle' : '', (opt_data.isCompact) ? ' jira-issue-status-lozenge-compact' : '', ' jira-issue-status-lozenge-max-width-', soy.$$escapeHtml(maxWidth__soy46), '" data-tooltip="', soy.$$escapeHtml(tooltipContent__soy47), '">', soy.$$escapeHtml(opt_data.name), '</span>');
  return opt_sb ? '' : output.toString();
};


JIRA.Template.Util.Issue.Status.statusLozengeClasses = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('jira-issue-status-lozenge-', soy.$$escapeHtml(opt_data.colorName ? opt_data.colorName : 'medium-gray'), ' ', (opt_data.categoryKey) ? 'jira-issue-status-lozenge-' + soy.$$escapeHtml(opt_data.categoryKey) : '');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.issue-status-plugin:issue-status-resources', location = '/js/issue-status-plugin.js' */
AJS.$(function(){if(AJS.$.fn.tooltip){AJS.$(".jira-issue-status-lozenge[data-tooltip]").tooltip({aria:true,gravity:AJS.$.fn.tipsy.autoWE,delayIn:100,html:true,live:true,title:"data-tooltip",className:"jira-issue-status-tooltip"})}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-jira-metadata:confluence-jira-metadata-resources', location = 'soy/jira-metadata.soy' */
// This file was automatically generated from jira-metadata.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.Metadata == 'undefined') { Confluence.Templates.Metadata = {}; }
if (typeof Confluence.Templates.Metadata.JIRA == 'undefined') { Confluence.Templates.Metadata.JIRA = {}; }


Confluence.Templates.Metadata.JIRA.metadata = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div id="jira-metadata-dialog" class="rendered-content"><h2 class="title">', soy.$$escapeHtml("JIRA links"), '</h2><div class="items-section">');
  var groupList6 = opt_data.groups;
  var groupListLen6 = groupList6.length;
  for (var groupIndex6 = 0; groupIndex6 < groupListLen6; groupIndex6++) {
    var groupData6 = groupList6[groupIndex6];
    if (groupData6.items.length) {
      switch (groupData6.type) {
        case 'ISSUES':
          Confluence.Templates.Metadata.JIRA.renderGroup({items: groupData6.items, headingText: "Issues", type: groupData6.type, links: groupData6.links}, output);
          break;
        case 'SPRINTS':
          Confluence.Templates.Metadata.JIRA.renderGroup({items: groupData6.items, headingText: "Sprints", type: groupData6.type, links: groupData6.links}, output);
          break;
        case 'VERSIONS':
          Confluence.Templates.Metadata.JIRA.renderGroup({items: groupData6.items, headingText: "Versions", type: groupData6.type, links: groupData6.links}, output);
          break;
        case 'EPICS':
          Confluence.Templates.Metadata.JIRA.renderGroup({items: groupData6.items, headingText: "Epics", type: groupData6.type, links: groupData6.links}, output);
          break;
      }
    }
  }
  output.append('</div>');
  Confluence.Templates.Metadata.JIRA.renderAuthPrompts({appLinks: opt_data.unauthorisedAppLinks}, output);
  Confluence.Templates.Metadata.JIRA.renderJiraErrors(opt_data, output);
  output.append('</div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Metadata.JIRA.featureDiscovery = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div id="jira-metadata-feature-discovery"><h2>', soy.$$escapeHtml("View related JIRA items here"), '</h2><p>', soy.$$escapeHtml("Now you can see which epics, sprints, versions and issues relate to this page."), '</p><div class="aui-toolbar2" role="toolbar"><div class="aui-toolbar2-inner">');
  aui.buttons.button({text: "Show me", extraClasses: 'showme'}, output);
  aui.buttons.button({text: "Don\x27t show again", type: 'link', extraClasses: 'close'}, output);
  output.append('</div></div></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Metadata.JIRA.nometadata = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div id="jira-metadata-dialog" class="rendered-content">');
  aui.message.warning({content: '<p>' + soy.$$escapeHtml("JIRA links cannot be displayed. Either you do not have correct JIRA permissions or the links have been removed.") + '</p>'}, output);
  output.append('</div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Metadata.JIRA.renderAuthPrompts = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (opt_data.appLinks.length) {
    var param66 = new soy.StringBuilder();
    if (opt_data.appLinks.length == 1) {
      var appLink__soy69 = opt_data.appLinks[0];
      param66.append('<p>', AJS.format("{0}Login \x26amp; Approve{1} to retrieve data from {2}",'<a class="jira-metadata-auth-link" href="#" data-href="' + appLink__soy69.authorisationUrl + '">','</a>',appLink__soy69.htmlSafeName), '</p>');
    } else {
      param66.append('<p>', soy.$$escapeHtml("Authenticate to retrieve data from the following instances:"), '</p>');
      var appLinkList78 = opt_data.appLinks;
      var appLinkListLen78 = appLinkList78.length;
      for (var appLinkIndex78 = 0; appLinkIndex78 < appLinkListLen78; appLinkIndex78++) {
        var appLinkData78 = appLinkList78[appLinkIndex78];
        param66.append('<div><a class="jira-metadata-auth-link" href="#" data-href="', soy.$$escapeHtml(appLinkData78.authorisationUrl), '">', soy.$$escapeHtml(appLinkData78.name), '</a></div>');
      }
    }
    aui.message.hint({content: param66.toString()}, output);
  }
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Metadata.JIRA.renderGroup = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="jira-metadata-section ', soy.$$escapeHtml(opt_data.type), '-section"><div class="section-label"><span class="icon"></span><span>', soy.$$escapeHtml(opt_data.headingText), '</span></div><ul class="jira-metadata-list jira-', soy.$$escapeHtml(opt_data.type), '-list">');
  var itemList94 = opt_data.items;
  var itemListLen94 = itemList94.length;
  for (var itemIndex94 = 0; itemIndex94 < itemListLen94; itemIndex94++) {
    var itemData94 = itemList94[itemIndex94];
    output.append('<li class="jira-metadata-item"><span class="item-label"><a href="', soy.$$escapeHtml(""), '/plugins/servlet/jira-metadata/redirect?u=', soy.$$escapeUri(itemData94.url), '&t=', soy.$$escapeHtml(opt_data.type), '" title="', soy.$$escapeHtml(itemData94.name), '">', soy.$$escapeHtml(itemData94.name), '</a>');
    if (itemData94.status) {
      output.append('&nbsp;');
      if (itemData94.status.statusCategory) {
        JIRA.Template.Util.Issue.Status.issueStatusResolver({issueStatus: itemData94.status, isSubtle: true}, output);
      } else {
        output.append('<span class="item-status">(', soy.$$escapeHtml(itemData94.status.name), ')</span>');
      }
    }
    output.append('</span>', (itemData94.description != '') ? '<span class="item-subtext">' + soy.$$escapeHtml(itemData94.description) + '</span>' : '', '</li>');
  }
  output.append('</ul><ul class="jira-metadata-list ', soy.$$escapeHtml(opt_data.type), '-more-link">');
  var linkList130 = opt_data.links;
  var linkListLen130 = linkList130.length;
  for (var linkIndex130 = 0; linkIndex130 < linkListLen130; linkIndex130++) {
    var linkData130 = linkList130[linkIndex130];
    output.append('<li class="jira-metadata-item"><a href="', soy.$$escapeHtml(""), '/plugins/servlet/jira-metadata/redirect?u=', soy.$$escapeUri(linkData130.url), '&t=', soy.$$escapeHtml(opt_data.type), '&more">', soy.$$escapeHtml(AJS.format("View {0} more in {1}",linkData130.numItems,linkData130.appName)), '</a></li>');
  }
  output.append('</ul></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Metadata.JIRA.loadingMetadata = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div id="jira-metadata-dialog"><h2 class="title">', soy.$$escapeHtml("JIRA links"), '</h2><div class="spinner-container"><div class="spinner"></div></div></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Metadata.JIRA.renderJiraErrors = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (opt_data.errors.length == 1) {
    var error__soy150 = opt_data.errors[0];
    aui.message.warning({content: '<p>' + soy.$$escapeHtml("Unable to retrieve JIRA metadata.") + ' ' + soy.$$escapeHtml(error__soy150.errorMessage) + '</p>'}, output);
  } else if (opt_data.errors.length > 1) {
    var param159 = new soy.StringBuilder('<p>', soy.$$escapeHtml("Unable to retrieve JIRA metadata. The following errors occurred:"), '</p><ul>');
    var errorList163 = opt_data.errors;
    var errorListLen163 = errorList163.length;
    for (var errorIndex163 = 0; errorIndex163 < errorListLen163; errorIndex163++) {
      var errorData163 = errorList163[errorIndex163];
      param159.append('<li>', soy.$$escapeHtml(errorData163.errorMessage), '</li>');
    }
    param159.append('</ul>');
    aui.message.warning({content: param159.toString()}, output);
  }
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Metadata.JIRA.unknownError = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div id="jira-metadata-dialog" class="rendered-content">');
  aui.message.warning({content: '<p>' + soy.$$escapeHtml("Unable to retrieve JIRA metadata. Could not connect to Confluence") + '</p>'}, output);
  output.append('</div>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-jira-metadata:confluence-jira-metadata-resources', location = '/js/jira-metadata.js' */
AJS.toInit(function(h){var i="com.atlassian.confluence.plugins.confluence-jira-metadata";var s=false;var o;var l;var q="jira-metadata-dialog";var g=h("#content-metadata-jira");var t;var e="jira-metadata-discovery";var r=AJS.Meta.get("jira-metadata-count");var k="linked-issues-dropdown";if(r>0){p(r,AJS.Meta.get("jira-metadata-count-incomplete"))}else{if(r==-1){h.ajax({url:AJS.contextPath()+"/rest/jira-metadata/1.0/metadata/aggregate?pageId="+AJS.Meta.get("page-id"),type:"GET",dataType:"json",contentType:"application/json",cache:false,success:function(u){if(u.count>0){p(u.count,u.incomplete)}}})}}function p(v,u){f(v,u);g.removeClass("hidden");if(b()){o=AJS.InlineDialog(g,q,function(x,w,y){AJS.trigger("analytics",{name:"confluence.jira.metadata.expanded"});if(!l||!s){l=x;y();a(x)}else{y()}return false},{hideDelay:null});g.click(function(){if(h("#"+q).is(":visible")){o.hide()}})}if(g&&j()){m();g.one("click",function(){Confluence.FeatureDiscovery.forPlugin(i).markDiscovered(k)})}}function f(v,u){if(!u){h("#content-metadata-jira > span").text(v==1?"1 JIRA link":AJS.format("{0} JIRA links",v))}}function b(){return !g.attr("href")}function m(){t=AJS.InlineDialog(g,e,function(v,u,w){v.html(Confluence.Templates.Metadata.JIRA.featureDiscovery());v.find(".showme").on("click",function(){Confluence.FeatureDiscovery.forPlugin(i).markDiscovered(k);t.hide();o.show()});v.find(".close").on("click",function(){Confluence.FeatureDiscovery.forPlugin(i).markDiscovered(k);t.hide()});w()},{noBind:true,closeOthers:false,hideDelay:null});t.show();Confluence.FeatureDiscovery.forPlugin(i).addDiscoveryView(k)}function j(){return !AJS.Meta.get("blueprint-index-popup-key")&&Confluence.FeatureDiscovery.forPlugin(i).shouldShow(k)}function a(){d();l.html(Confluence.Templates.Metadata.JIRA.loadingMetadata());l.find(".spinner").spin("medium");h.ajax({url:AJS.contextPath()+"/rest/jira-metadata/1.0/metadata?pageId="+AJS.Meta.get("page-id"),type:"GET",dataType:"json",contentType:"application/json",error:function(u){c();l.html(Confluence.Templates.Metadata.JIRA.unknownError())},success:function(u){c();s=true;f(u.count,false);var v;if(u.count===0&&!(u.unauthorisedAppLinks&&u.unauthorisedAppLinks.length>0)&&u.errors.length==0){AJS.trigger("analytics",{name:"confluence.jira.metadata.error.no-metadata"});v=Confluence.Templates.Metadata.JIRA.nometadata()}else{v=Confluence.Templates.Metadata.JIRA.metadata(u)}l.html(v);setTimeout(function(){l.find("#"+q).addClass("show")},0);n()},complete:function(){h("#"+q+" .icon-close").click(function(u){u.stopPropagation();h(this).closest(".closable").remove()})}})}function n(){h(".jira-metadata-auth-link").click(function(u){u.preventDefault();AppLinks.authenticateRemoteCredentials(h(this).data("href"),a,function(){})})}function d(){if(l&&l.height()>0){l.css("height",l.height())}}function c(){l&&l.css("height","")}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.extra.jira:proxy-js', location = '/jira/proxy.js' */
AppLinks=AJS.$.extend(window.AppLinks||{},{makeRequest:function(a){var b=contextPath||AJS.params.contextPath;if(a.processData){if(a.appId){a.data=AJS.$.extend(a.data||{},{appId:a.appId})}else{if(a.appType){a.data=AJS.$.extend(a.data||{},{appType:a.appType})}}a.data=AJS.$.extend(a.data||{},{path:a.url})}else{var c=a.url;a=AJS.$.extend(a,{beforeSend:function(d){if(a.appId){d.setRequestHeader("X-AppId",a.appId)}else{if(a.appType){d.setRequestHeader("X-AppType",a.appType)}}d.setRequestHeader("X-AppPath",c)}})}a=AJS.$.extend(a,{url:b+"/plugins/servlet/applinks/proxy"});return AJS.$.ajax(a)},createProxyGetUrl:function(b){var c="";if(b.includeContext){c=contextPath||AJS.params.contextPath}var a=c+"/plugins/servlet/applinks/proxy";if(b.appId){a+="?appId="+encodeURIComponent(b.appId)}else{if(b.appType){a+="?appType="+encodeURIComponent(b.appType)}else{AJS.log("You need to specify an appType or appId");return""}}if(b.path){a+="&path="+encodeURIComponent(b.path)}return a}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-util-js', location = 'js/fecru-compatibility.js' */
if(jQuery!=undefined&&AJS!=undefined){jQuery=AJS.$};
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-util-js', location = 'applinks/internal/common/rest-service.js' */
AppLinks=AJS.$.extend(window.AppLinks||{},{Event:{NAMESPACE:"applinks"}});AppLinks.Event=AJS.$.extend(window.AppLinks.Event,{PREREADY:AppLinks.Event.NAMESPACE+".preready",READY:AppLinks.Event.NAMESPACE+".ready"});if(AJS.AppLinksInitialisationBinder){AppLinks.initialisationBinder=AJS.AppLinksInitialisationBinder}else{AppLinks.initialisationBinder=function(a){AJS.toInit(a)}}AppLinks.initialisationBinder(function(){var b=AJS.$;AppLinks=b.extend(window.AppLinks||{},{failure:function(e){if(e.status==401){window.location.reload()}else{var c=AppLinks.parseError(e);var d=b(".page-error");if(d.length>0){d.html(c).fadeIn("slow")}else{alert("REST request failed: "+c)}}},jsonRequest:function(d,e,f,g,c){if(f){f=JSON.stringify(f)}b(".page-error").fadeOut("fast");if(!c){c=AppLinks.failure}return jQuery.ajax({url:d,type:e,data:f,dataType:"json",contentType:"application/json; charset=utf-8",cache:false,success:g,error:c})},xmlRequest:function(d,e,f,g,c){if(f){f=JSON.stringify(f)}b(".page-error").fadeOut("fast");if(!c){c=AppLinks.failure}return jQuery.ajax({url:d,type:e,data:f,dataType:"xml",contentType:"application/xml; charset=utf-8",cache:false,success:g,error:c})},parseError:function(f){var c;try{c=JSON.parse(f.responseText)}catch(d){if(f.statusText){return c=f.statusText}else{return f}}if(c.message){if(b.isArray(c.message)){return c.message.join(" ")}return c.message}else{return f.statusText}},put:function(d,e,f,c){return AppLinks.jsonRequest(d,"PUT",e,f,c)},post:function(d,e,f,c){return AppLinks.jsonRequest(d,"POST",e,f,c)},update:function(d,e,c){AppLinks.put(AppLinks.self_link(d),d,e,c)},get:function(d,e,c){return AppLinks.jsonRequest(d,"GET",null,e,c)},getXml:function(d,e,c){return AppLinks.xmlRequest(d,"GET",null,e,c)},self_link:function(e){for(var c=0,f=e.link.length;c<f;c++){var d=e.link[c];if(d.rel=="self"){return d.href}}throw"No self-link found"},del:function(f,e,d){var c;if(typeof(f)=="string"){c=f}else{c=AppLinks.self_link(f)}return AppLinks.jsonRequest(c,"DELETE",null,e,d)},SPI:b.extend({},{API_VERSION:"1.0",REST_RESOURCE_URL:AJS.contextPath()+"/rest/applinks/",BASE_URL:AJS.contextPath()+"/rest/applinks/1.0",setApiVersion:function(c){AppLinks.SPI.API_VERSION=c;AppLinks.SPI.setBaseUrl(AppLinks.SPI.REST_RESOURCE_URL+AppLinks.SPI.API_VERSION)},setBaseUrl:function(c){AppLinks.SPI.BASE_URL=c},getRemoteRestBaseUrl:function(c){return c+"/rest/applinks/"+AppLinks.SPI.API_VERSION},getRemotePluginServletBaseUrl:function(c){return c+"/plugins/servlet"},getAllLinks:function(e,d){var c=AppLinks.SPI.BASE_URL+"/applicationlink";return AppLinks.get(c,e,d)},getAllLinksWithAuthInfo:function(e,d){var c=AppLinks.SPI.BASE_URL+"/listApplicationlinks";return AppLinks.get(c,e,d)},getLinksOfType:function(e,f,d){var c=AppLinks.SPI.BASE_URL+"/applicationlink/type/"+e;return AppLinks.get(c,f,d)},tryToFetchManifest:function(e,f,d){var c=AppLinks.SPI.BASE_URL+"/applicationlinkForm/manifest.json?url="+encodeURIComponent(e);return AppLinks.get(c,f,d)},getManifestFor:function(f,e,d){var c=AppLinks.SPI.BASE_URL+"/manifest/"+f+".json";return AppLinks.get(c,e,d)},getLocalManifest:function(e,d){var c=AppLinks.SPI.BASE_URL+"/manifest.json";return AppLinks.get(c,e,d)},getRemoteManifest:function(e,f,d){var c=AppLinks.SPI.getRemoteRestBaseUrl(e)+"/manifest.json";return AppLinks.get(c,f,d)},getRemoteOAuthConsumerInfo:function(e,f,d){var c=AppLinks.SPI.getRemotePluginServletBaseUrl(e)+"/oauth/consumer-info";return AppLinks.getXml(c,f,d)},createStaticUrlAppLink:function(f,e,d){var c=AppLinks.SPI.BASE_URL+"/applicationlinkForm/createStaticUrlAppLink?typeId="+f;return AppLinks.post(c,null,e,d)},createLink:function(j,h,l,d,i,k,f,m,e){var c=AppLinks.SPI.BASE_URL+"/applicationlinkForm/createAppLink";var g={applicationLink:j,username:h,password:l,createTwoWayLink:d,customRpcURL:i,rpcUrl:k,configFormValues:f};return AppLinks.post(c,g,m,e)},createLinkWithOrphanedTrust:function(j,h,m,d,i,k,f,l,n,e){var c=AppLinks.SPI.BASE_URL+"/applicationlinkForm/createAppLink";var g={applicationLink:j,username:h,password:m,createTwoWayLink:d,customRpcURL:i,rpcUrl:k,configFormValues:f,orphanedTrust:l};return AppLinks.post(c,g,n,e)},verifyTwoWayLinkDetails:function(c,i,j,f,h,e){var d=AppLinks.SPI.BASE_URL+"/applicationlinkForm/details";var g={username:j,password:f,remoteUrl:c,rpcUrl:i};return AppLinks.post(d,g,h,e)},getApplicationLinkInfo:function(e,f,d){var c=AppLinks.SPI.BASE_URL+"/applicationlinkInfo/id/"+e;return AppLinks.get(c,f,d)},deleteLink:function(g,c,f,e){var d=AppLinks.SPI.BASE_URL+"/applicationlink/"+g.id;if(c){d+="?reciprocate=true"}return AppLinks.del(d,f,e)},makePrimary:function(e,d){var c=AppLinks.SPI.BASE_URL+"/applicationlink/primary/"+e.id;return AppLinks.post(c,null,d)},relocate:function(h,f,c,g,e){var d=AppLinks.SPI.BASE_URL+"/relocateApplicationlink/"+h.id+"?newUrl="+encodeURIComponent(f)+"&nowarning="+(c?"true":"false");return AppLinks.post(d,null,g,e)},legacyUpgrade:function(f,e,d){var c=AppLinks.SPI.BASE_URL+"/upgrade/legacy/"+f.id;return AppLinks.post(c,null,e,d)},ualUpgrade:function(g,c,f,e){var d=AppLinks.SPI.BASE_URL+"/upgrade/ual/"+g.id;return AppLinks.post(d,c,f,e)},getEntityTypesForApplicationType:function(f,e,d){var c=AppLinks.SPI.BASE_URL+"/type/entity/"+f;return AppLinks.get(c,e,d)},getLocalEntitiesWithLinksToApplication:function(c,f,e){var d=AppLinks.SPI.BASE_URL+"/entitylink/localEntitiesWithLinksTo/"+c+".json";return AppLinks.get(d,f,e)},getEntityLinksForApplication:function(c,f,e){var d=AppLinks.SPI.BASE_URL+"/entities/"+c+".json";AppLinks.get(d,f,e)},getEntityLinksForApplicationUsingAnonymousAccess:function(c,f,e){var d=AppLinks.SPI.BASE_URL+"/entities/anonymous/"+c+".json";return AppLinks.get(d,f,e)},createNonUalEntityLink:function(l,g,d,f,j,e,k,i){var c=AppLinks.SPI.BASE_URL+"/entitylink/"+l+"/"+g+"?reciprocate=false";var h={applicationId:d,typeId:f,key:j,name:e,isPrimary:false};return AppLinks.put(c,h,k,i)},createEntityLink:function(h,g,d,c,i,f){var e=AppLinks.SPI.BASE_URL+"/entitylink/"+h+"/"+g+"?reciprocate=";e+=(c?"true":"false");return AppLinks.put(e,d,i,f)},getConfiguredEntityLinks:function(f,e,g,d){var c=AppLinks.SPI.BASE_URL+"/entitylink/primaryLinks/"+f+"/"+e+".json";return AppLinks.get(c,g,d)},deleteEntityLink:function(h,g,d,c,i,f){var e=AppLinks.SPI.BASE_URL+"/entitylink/"+h+"/"+g+"?typeId="+d.typeId+"&key="+d.key+"&applicationId="+d.applicationId+"&reciprocate="+c;return AppLinks.del(e,i,f)},makePrimaryEntityLink:function(g,f,c,h,e){var d=AppLinks.SPI.BASE_URL+"/entitylink/primary/"+g+"/"+f+"?typeId="+c.typeId+"&key="+c.key+"&applicationId="+c.applicationId;return AppLinks.post(d,null,h,e)},canDeleteAppLink:function(f,e,d){var c=AppLinks.SPI.BASE_URL+"/permission/reciprocate-application-delete/"+f;return AppLinks.get(c,e,d)},canDeleteEntityLink:function(g,f,c,h,e){var d=AppLinks.SPI.BASE_URL+"/permission/reciprocate-entity-delete/"+c.applicationId+"/"+g+"/"+f+"/"+c.typeId+"/"+c.key;return AppLinks.get(d,h,e)},canCreateReciprocateEntityLink:function(f,e,d){var c=AppLinks.SPI.BASE_URL+"/permission/reciprocate-entity-create/"+f;return AppLinks.get(c,e,d)},processPermissionCode:function(d){var c={noPermission:function(){},missing:function(){},credentialsRequired:function(e){},authenticationFailed:function(e){},noAuthentication:function(e){},noAuthenticationConfigured:function(){},noConnection:function(){},allowed:function(){},unrecognisedCode:function(e){},updateView:function(g,f,e){}};if(!d){d={}}d=b.extend(c,d);return function(f){var e=f.code;if(e=="NO_PERMISSION"){d.noPermission()}else{if(e=="MISSING"){d.missing()}else{if(e=="CREDENTIALS_REQUIRED"){d.credentialsRequired(f.url)}else{if(e=="AUTHENTICATION_FAILED"){d.authenticationFailed(f.url)}else{if(e=="NO_AUTHENTICATION"){d.noAuthentication(f.url)}else{if(e=="NO_AUTHENTICATION_CONFIGURED"){d.noAuthenticationConfigured()}else{if(e=="NO_CONNECTION"){d.noConnection()}else{if(e=="ALLOWED"){d.allowed()}else{d.unrecognisedCode(f.code)}}}}}}}}}},addAuthenticationTrigger:function(e,c,d){if(!d){d={}}if(typeof d.onSuccess=="undefined"){d.onSuccess=function(){location.reload()}}if(typeof d.onFailure=="undefined"){d.onFailure=function(){return true}}b(e).unbind("click");b(e).click(function(){if(d.before){d.before()}AppLinks.authenticateRemoteCredentials(c,d.onSuccess,d.onFailure)})},deleteOrphanedTrust:function(g,e,f,d){var c=AppLinks.SPI.BASE_URL+"/orphaned-trust/"+e+"/"+g;return AppLinks.del(c,f,d)},getOrphanedTrust:function(e,d){var c=AppLinks.SPI.BASE_URL+"/orphaned-trust/";return AppLinks.get(c,e,d)},showCreateEntityLinkSuggestion:function(){return true},getApplicationLink:function(f,e,d){var c=AppLinks.SPI.BASE_URL+"/applicationlink/"+f;return AppLinks.get(c,e,d)},createApplicationLink:function(f,d,i,j,c,k,g){var e=AppLinks.SPI.BASE_URL+"/applicationlink";var h={id:f,name:d,rpcUrl:i,displayUrl:j,typeId:c};return AppLinks.put(e,h,k,g)},createConsumer:function(e,n,d,m,i,l,g,p,h,k,o,f){var c=AppLinks.SPI.BASE_URL+"/applicationlink/"+e+"/authentication/consumer";var j={key:n,name:d,description:m,sharedSecret:i,publicKey:l,outgoing:k,twoLOAllowed:g,executingTwoLOUser:p,twoLOImpersonationAllowed:h};return AppLinks.put(c,j,o,f)},createConsumerAutoConfigure:function(j,i,f,c,h,e){var d=AppLinks.SPI.BASE_URL+"/applicationlink/"+j+"/authentication/consumer?autoConfigure=true";var g={twoLOAllowed:i,executingTwoLOUser:f,twoLOImpersonationAllowed:c};return AppLinks.put(d,g,h,e)},registerProvider:function(i,h,e,g,d){var c=AppLinks.SPI.BASE_URL+"/applicationlink/"+i+"/authentication/provider";var f={config:e,provider:h};return AppLinks.put(c,f,g,d)}},(window.AppLinks&&window.AppLinks.SPI)||{})});var a="applinks";AppLinks.UI={showInfoBox:function(c){b(".aui-message.success").remove();AppLinks.UI.createMessage("success",c,"page-info")},hideInfoBox:function(){b(".aui-message.success").remove()},showErrorBox:function(c){AppLinks.UI.createMessage("error",c,"page-error")},hideErrorBox:function(){b(".aui-message.error").remove()},showWarningBox:function(d){if(b.isArray(d)&&d.length>0){var c=b("<ul></ul>");b(d).each(function(f){c.append(b("<li/>",{text:d[f]}))});var e=b('<div class="page-warning"></div>').append(c);AppLinks.UI.createMessage("warning",e.html(),"page-warning")}else{AppLinks.UI.createMessage("warning",d,"page-warning")}},hideWarningBox:function(){b(".aui-message.warning").remove()},shortenString:function(d,c){if(d.length>c){d=d.substring(0,c)+"..."}return d},createMessage:function(d,e,c){var f=b('<div class="'+c+'">');f.html(e);AJS.messages[d](".applinks-message-bar",{title:"",body:f.wrap("<div></div>").parent().html(),closeable:true})},displayValidationErrorMessages:function(c,f,e){if(b.isArray(e)){b(e).each(function(j,h){var k=b('<div class="error applinks-error">');k.text(h);b(f).find("."+c).append(k)})}else{if(typeof e!="undefined"){var g=b('<div class="error applinks-error">');g.text(e.toString());b(f).find("."+c).append(g)}}},displayValidationError:function(c,d,e){return function(j){if(j.status==401){window.location.reload();return}b(".applinks-error").remove();b(".loading").remove();var h=j.responseText;var i=b.parseJSON(h);var g=i.message;if(typeof i.fields=="undefined"){AppLinks.UI.displayValidationErrorMessages(c,d,g)}else{var f=i.fields;b(f).each(function(k){var l=b('<div class="error applinks-error" id="'+f[k]+'-error">');l.text(g[k]);if(b(d).find("."+f[k]).length>0){l.insertAfter(b(d).find("."+f[k]))}else{l.insertAfter(b(d).find("."+c).append(l))}})}b(d).find("."+c).addClass("fully-populated-errors");if(e){e()}}},addProtocolToURL:function(c){var f=b.trim(c);var e=f.toLowerCase();var d=false;if(e.length>=7){if(e.substring(0,7).indexOf("http")!=-1){d=true}}if(!d){f="http://"+f}return f},prettyJoin:function(d,g,f){if(!f){f=AppLinks.I18n.getText("applinks.and")}var c=d.length;var e="";b.each(d,function(h,i){if(h==(c-1)&&c>1){e+=" "+f+"  "+g(i)}else{e+=g(i);if(h+2<c){e+=", "}}});return e},showLoadingIcon:function(c){b('<span class="loading">&nbsp;</span>').insertAfter(c)},hideLoadingIcon:function(c){b(c).next(".loading").remove()},findUrl:function(f){var e=undefined;var g=f.toLowerCase();var d=g.indexOf("http:");if(d==-1){d=g.indexOf("https:")}if(d>-1){var c=g.indexOf(" ",d);if(c==-1){c=g.length}e=f.substring(d,c)}return e},findApplicationType:function(c){c=c.toLowerCase();if(c.indexOf("jira")!=-1){return"jira"}else{if(c.indexOf("fisheye")!=-1){return"fecru"}else{if(c.indexOf("confluence")!=-1){return"confluence"}else{if(c.indexOf("refapp")!=-1){return"refapp"}else{return undefined}}}}},escapeSelector:function(c){return c.replace(/([#;&,\.\+\*\~':"\!\^$\[\]\(\)=>\|])/g,"\\$1")},sanitiseHTML:function(c){var d={"<":"&lt;",'"':"&quot;","&":"&amp;"};return c.replace(/[<"&]/g,function(e){return d[e]})},refreshOrphanedTrust:function(){var c=function(d){b("tr.orphaned-trust-row").each(function(){var j=b(this);var k=j.attr("data-id");var g=j.attr("data-type");var f=false;for(var e=0;e<d.orphanedTrust.length;e++){var h=d.orphanedTrust[e];if(k==h.id&&g==h.type){f=true;break}}if(!f){j.remove();if(d.orphanedTrust.length==0){b(".orphaned-trust-warning").hide()}}})};AppLinks.SPI.getOrphanedTrust(c)},removeCssClass:function(c,d){b(c).removeClass(function(f,h){var g=h.split(" ");var e="";b.each(g,function(i,j){if(j.indexOf(d)!=-1){e=j}});return e})}};(function(){var c=b({});b.each(["bind","unbind","trigger"],function(d,e){AppLinks.UI[e]=function(){return c[e].apply(c,arguments)}})})();AppLinks.I18n={interpolate:function(d,c){if(c){if(!b.isArray(c)){c=[new String(c)]}c.unshift(d);d=AJS.format.apply(AJS,c)}return d},getTextWithPrefix:function(c,d){return AppLinks.I18n.interpolate(appLinksI18n.entries[a+"."+c],d)},getText:function(c,d){return AppLinks.I18n.interpolate(AppLinks.I18n.resolveValue(c),d)},getApplicationTypeName:function(c){return appLinksI18n.entries["applinks.application.type."+c]},getEntityTypeName:function(c){return appLinksI18n.entries["applinks.entity.type."+c]},getPluralizedEntityTypeName:function(c){return appLinksI18n.entries["applinks.entity.type.plural."+c]},getAuthenticationTypeName:function(c){return appLinksI18n.entries["applinks.auth.provider."+c]},resolveValue:function(c){var d=appLinksI18n.entries[c];return typeof d=="undefined"?c:d}};AppLinks.Docs={createDocLink:function(d,e,c){if(!c){c=""}else{c=" "+c}return b("<a/>",{"class":"ual-help-link"+c,href:AppLinks.Docs.getDocHref(d,e),target:"_blank",text:AppLinks.I18n.getText("applinks.help"),title:AppLinks.I18n.getText("applinks.help")})},getDocHref:function(d,e){var c=AppLinks.Docs.resolveValue("applinks.docs.root")+"/"+AppLinks.Docs.resolveValue(d);if(e){c+="#"+AppLinks.Docs.resolveValue(e)}return c},resolveValue:function(c){var d=applinksDocs.entries[c];return typeof d=="undefined"?c:d}};b(document).trigger(AppLinks.Event.PREREADY);b(document).trigger(AppLinks.Event.READY)});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-util-js', location = 'applinks/internal/common/json2.js' */
if(!this.JSON){this.JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){k=rep[i];if(typeof k==="string"){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-util-js', location = 'applinks/internal/component/autocomplete.js' */
AJS.$(document).bind(AppLinks.Event.READY,function(){AppLinks.autoComplete={cacheManager:function(c){var a={},b=[],c=c||30;return{get:function(d){return a[d]},put:function(d,e){a[d]=e;b.push(d);if(b.length>c){delete a[b.shift()]}},clear:function(){a={};b=[]}}}};(function(d){var c=function(f){AJS.log("InputDrivenDropDown: truncating text");var h=f.$.closest(".aui-dropdown").width(),g=20;d("a span:not(.icon)",f.$).each(function(){var j=d(this),i=AJS("var","&#8230;"),l=i.width(),k=false;j.wrapInner(d("<em>"));d("em",j).each(function(){var m=d(this);m.show();if(this.offsetLeft+this.offsetWidth>h){var t=this.childNodes,s=false;for(var o=t.length-1;o>=0;o--){var p=t[o],n=1,r=(p.nodeType==3)?"nodeValue":"innerHTML",q=p[r];do{if(n<=q.length){p[r]=q.substr(0,q.length-n++)}else{break}}while(this.offsetLeft+this.offsetWidth+l>h-g);if(n<=q.length){s=true;break}}if(s){k=true}else{m.hide()}}});if(k){j.append(i);this.elpss=i}})};var b=function(f,l){if(!l.length||!l[0]){return}AJS.log("InputDrivenDropDown: highlighting tokens");for(var h=0,j=l.length;h<j;h++){var g=l[h];l[h]=g?g.replace(/[\.\*\+\?\|\(\)\[\]{}\\]/g,"\\$"):""}var k=new RegExp("("+l.join("|")+")","gi");d("li a:not(.dropdown-prevent-highlight) span",f.$).each(function(){var m=d(this),i=m.html().replace(k,"<strong>$1</strong>");m.html(i)})};var e=function(j,g){var i=j.options,h=j.dd;if(h){h.hide();h.$.remove()}i.ajsDropDownOptions=i.ajsDropDownOptions||{};if(i.ajsDropDownOptions&&!i.ajsDropDownOptions.alignment){i.ajsDropDownOptions.alignment="left"}i.ajsDropDownOptions.selectionHandler=i.ajsDropDownOptions.selectionHandler||function(l,k){if(l.type!="click"){l.preventDefault();d("a",k).click();document.location=d("a",k).attr("href")}};i.ajsDropDownOptions.displayHandler=function(k){return AJS.escapeHtml(k.name)};var f=j.dd=new AJS.dropDown(g.matrix,i.ajsDropDownOptions)[0];if(i.ajsDropDownOptions&&i.ajsDropDownOptions.className){f.$.addClass(i.ajsDropDownOptions.className)}if(i.dropdownPlacement){i.dropdownPlacement(f.$)}else{AJS.log("No dropdownPlacement function specified. Appending dropdown to the body.");d("body").append(f.$)}b(f,g.queryTokens||[g.query]);c(f);if(i.dropdownPostprocess){i.dropdownPostprocess(f.$)}f.show(j._effect);if(typeof i.onShow=="function"){i.onShow.call(f,f.$)}return f};function a(g,f){this._effect="appear";this._timer=null;this.id=g;this.options=f;this.inactive=false;this.busy=false;this.cacheManager=AppLinks.autoComplete.cacheManager()}a.prototype.clearCache=function(){this.cacheManager.clear()};a.prototype.change=function(h,g){var f=this;if(h!=f._value||g){f._value=h;f.busy=false;clearTimeout(f._timer);if(g||(/\S{0,}/).test(h)){var i=f.cacheManager.get(h);if(i){e(f,i)}else{f.busy=true;f._timer=setTimeout(function(){f.options.getDataAndRunCallback.call(f,h,f.show)},200)}}else{f.dd&&f.dd.hide()}}};a.prototype.dropDownLength=function(){return this.dd.links?this.dd.links.length:0};a.prototype.dropDownItem=function(f){return this.dropDownLength()>f?this.dd.links[f]:null};a.prototype.hide=function(){this.dd&&this.dd.hide()};a.prototype.remove=function(){var f=this.dd;if(f){this.hide();f.$.remove()}this.inactive=true;this.options.onDeath&&this.options.onDeath()};a.prototype.show=function(g,i,h){if(this.inactive){AJS.log("Quick search abandoned before server response received, ignoring. "+this);return}var f={matrix:g,query:i,queryTokens:h};this.cacheManager.put(i,f);e(this,f);this.busy=false};AppLinks.inputDrivenDropdown=function(f){return new a("inputdriven-dropdown",f)}})(jQuery)});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-util-js', location = 'applinks/internal/component/wizard.js' */
AJS.$(document).bind(AppLinks.Event.PREREADY,function(){(function(d){d.fn.wizard=function(v){var u={width:500,height:350,onshow:function(w,x){return true},aftershow:function(){return true},oncancel:function(){return true},onsubmit:function(){return true},aftersubmit:function(){return true},onnext:function(){return true},onprevious:function(){return true},cancelLabel:AppLinks.I18n.getText("applinks.cancel"),submitLabel:AppLinks.I18n.getText("applinks.create"),nextLabel:AppLinks.I18n.getText("applinks.next"),previousLabel:AppLinks.I18n.getText("applinks.previous"),id:""};if(!v){v={}}v=d.extend(u,v);var t=this;this.each(function(){var D=d(this);var w=new AJS.Dialog(v.width,v.height,v.id);var L=q(w,v.onshow,v.aftershow);var K=c(w,v.oncancel);var z=h(w,v.onsubmit,v.aftersubmit);var M=a(w,v.onprevious);var I=m(w,v.onnext);var G=k(w);var B=o(w);var C=g(w);var H=l(w);var J=s(w);var E=n(w);if(v.showButtonId){d("#"+v.showButtonId).click(L)}var y=f(D);for(var A=0;A<y.length;A++){var F=y[A];j(w,F);if(F.className){w.addHeader(F.title,F.className+"-header")}else{w.addHeader(F.title)}if(A!=0&&d(F.div).attr("previous")!="false"){w.addButton(v.previousLabel,M,"applinks-previous-button")}if(A<y.length-1&&d(F.div).attr("submit")!="true"&&d(F.div).attr("next")!="false"){w.addButton(v.nextLabel,I,"applinks-next-button")}if(d(F.div).attr("submit")=="true"){w.addButton(v.submitLabel,z,"wizard-submit")}if(!w.getPage(A).buttonpanel){w.addButton("",null);d(w.getPage(A).buttonpanel).empty();var x=d('<a class="button-panel-button applinks-cancel-link">'+v.cancelLabel+"</a>");w.getPage(A).buttonpanel.append(x);x.click(K)}else{var x=d('<a class="button-panel-link button-panel-cancel-link applinks-cancel-link">'+v.cancelLabel+"</a>");d(w.getPage(A).buttonpanel).append(x);x.click(K)}if(A<y.length-1){w.addPage()}}t={dialog:w,nextPage:I,prevPage:M,submit:z,cancel:K,show:L,disableNextBtn:G,enableNextBtn:B,disableSubmitBtn:C,enableSubmitBtn:H,disablePreviousBtn:J,enablePreviousBtn:E};w.gotoPage(0);w.gotoPanel(0)});return t};function s(t){return function(){b(r(t,"applinks-previous-button"))}}function n(t){return function(){i(r(t,"applinks-previous-button"))}}function k(t){return function(){b(r(t,"applinks-next-button"))}}function o(t){return function(){i(r(t,"applinks-next-button"))}}function g(t){return function(v){var u=r(t,"wizard-submit");b(u);if(typeof(v)=="undefined"||v){d('<span class="loading">&nbsp;</span>').insertBefore(u)}else{u.parent().find(".loading").remove()}}}function l(t){return function(){var u=r(t,"wizard-submit");i(u);u.parent().find(".loading").remove()}}function r(u,t){return d(u.getPage(u.curpage).buttonpanel).find("."+t)}function p(t){d(t.popup.element).find("form").each(function(){this.reset()})}function i(t){t.attr("disabled",false)}function b(t){t.attr("disabled",true)}function q(t,u,v){return function(w){if(u(t,w)!==false){t.gotoPage(0);t.gotoPanel(0);d(document).unbind("keydown.ual.dialog");d(document).bind("keydown.ual.dialog",e(t));t.show();v()}}}function c(t,u){return function(){if(u(t)!==false){t.hide();p(t)}}}function a(t,u){return function(){if(u(t)!==false){t.prevPage()}}}function m(t,u){return function(){if(u(t)!==false){t.nextPage()}}}function e(t){return function(u){if(u.keyCode===27){p(t);d(document).unbind("keydown.ual.dialog")}}}function h(u,v,t){return function(){if(v(u)!==false){t(u);p(u)}}}function j(v,w){var u=d("> div[panel]",w.div);if(u.length>0){u.each(function(y,z){var x=v.addPanel(z.title,null,z.className,"menu-"+z.id);x.getCurrentPanel().body.append(u[y])})}else{var t=v.addPanel(w.title);t.getCurrentPanel().body.append(w.div)}}function f(v){var u=d(" > div",v);var t=[];u.each(function(x){var w=d(this);t[x]={title:w.attr("title")||null,className:w.attr("class"),div:w}});return t}})(jQuery)});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-util-js', location = 'applinks/internal/feature/applinks-wizard/applinkwizard.js' */
(function(a){AppLinks.Wizard={getWizard:function(){return a("#create-application-link-container").data("wizard")},initAuthenticationUI:function(d){var h=a(d);var f=h.find(".create-reciprocal-link");var c=h.find(".ual-arrow");var l=h.find(".two-way-link-details");var j=h.find(".reciprocal-link-description");var b=h.find(".no-reciprocal-link-description");f.click(function(){if(f.is(":checked")){c.removeClass("no-background");l.show();j.show();b.hide()}else{c.addClass("no-background");l.hide();j.hide();b.show()}});var i=h.find(".same-user-radio-btn");var k=h.find(".different-user-radio-btn");var e=h.find(".different-userbase-image");var g=h.find(".same-userbase-image");i.click(function(){e.addClass("different-userbase-image-grey");g.removeClass("same-userbase-image-grey")});k.click(function(){g.addClass("same-userbase-image-grey");e.removeClass("different-userbase-image-grey")})},initNonUALUI:function(e){var c=a(e);var b=c.find(".application-types");for(var d=0;d<nonAppLinksApplicationTypes.length;d++){a('<option value="'+nonAppLinksApplicationTypes[d].typeId+'">'+nonAppLinksApplicationTypes[d].label+"</option>").appendTo(b)}},fetchManifest:function(e,h,d,b){var i=h.find("#application-url");if(i.val()==""){var c=h.find("#application-types");if(c.val()==""){a('<div class="error applinks-error">'+AppLinks.I18n.getText("applinks.error.url.field.empty")+"</div>").insertAfter(i);return false}var g=function(j){e.enableSubmitBtn();e.enablePreviousBtn();e.cancel();AppLinks.UI.listApplicationLinks(j.applicationLink.id,"new",j)};AppLinks.SPI.createStaticUrlAppLink(c.val(),g,null);return true}var f=AppLinks.UI.addProtocolToURL(i.val());AppLinks.UI.showLoadingIcon(i);var g=function(l){var k=l;e.enableNextBtn();h.find(".loading").remove();h.find(".reciprocal-rpc-url").val(a("#baseUrl").val());if(typeof l.typeId!="undefined"){AppLinks.Wizard.handleUALManifest(k,h);e.dialog.gotoPage(2);h.find(".reciprocal-link-username").focus();if(d){d(k)}}else{if(l.code=="applinks.warning.redirected.host"&&!i.data("hasWarnedAboutRedirection")){AppLinks.UI.displayValidationErrorMessages("manifest-validation-errors",h,l.warning);i.data("hasWarnedAboutRedirection","true");var m=function(){a(i).removeData("hasWarnedAboutRedirection");a(i).unbind("change",m)};i.bind("change",m)}else{if(l.code=="applinks.warning.unknown.host"&&!i.data("forceWhenHostIsOffline")){AppLinks.UI.displayValidationErrorMessages("manifest-validation-errors",h,l.warning);i.data("forceWhenHostIsOffline","true");var j=function(){a(i).removeData("forceWhenHostIsOffline");a(i).unbind("change",j)};i.bind("change",j)}else{if(k.code=="applinks.warning.unknown.host"||k.code=="applinks.warning.redirected.host"){delete k.warning;delete k.code}AppLinks.Wizard.handleNonUALManifest(k,f,h);e.dialog.gotoPage(1);h.find(".application-name").focus();if(b){b(k)}}}}};e.disableNextBtn();AppLinks.SPI.tryToFetchManifest(f,g,AppLinks.UI.displayValidationError("manifest-validation-errors",h,function(){e.enableNextBtn()}));return f},handleUALManifest:function(f,e){var c=a(e);c.find(".remote-app-image").removeClass(function(j,l){var k=l.split(" ");var i="";a.each(k,function(m,n){if(n.indexOf("application-type-image-")!=-1){i=n}});return i});c.find(".remote-app-image").addClass("application-type-image-"+f.typeId);c.find(".link-to-app-type").html(AppLinks.I18n.getText("applinks.create.title.link.to",AppLinks.I18n.getApplicationTypeName(f.typeId)));c.find(".remote-app-name").text(AppLinks.UI.shortenString(f.name,20));c.find(".create-reciprocal-link").attr("checked",true);c.find("#reciprocal-link-back-to-server").html(AppLinks.I18n.getText("applinks.create.link.back.to.server",AJS.escapeHtml(f.name)));var d=["administrator",AJS.escapeHtml(f.name),'<a target="_blank" href="'+AppLinks.Docs.getDocHref("applinks.docs.adding.application.link")+'">',"</a>"];var h=f.applinksVersion.split(".");var b=parseInt(h[0]);var g=parseInt(h[1]);if((f.typeId=="jira"||f.typeId=="confluence")&&(b==3&&g<10)){d[0]="system administrator"}c.find(".reciprocal-link-description").html(AppLinks.I18n.getText("applinks.create.two.way.link",d));c.find(".no-reciprocal-link-description").hide();c.find(".no-reciprocal-link-description").html(AppLinks.I18n.getText("applinks.create.two.way.no.link",AJS.escapeHtml(f.name)));c.find(".reciprocal-link-username").val("");c.find(".reciprocal-link-password").val("");c.find(".ual-arrow").removeClass("no-background");c.find(".two-way-link-details").show();c.find(".reciprocal-link-description").show();c.find(".no-reciprocal-link-description").hide()},handleNonUALManifest:function(d,e,c){var b=a(c);b.find(".application-name").val("");b.find(".application-types option:first-child").attr("selected","selected");b.find(".non-ual-application-url").text(e);if(d.warning){b.find(".create-non-ual-warning").show();b.find(".create-non-ual-warning").html(d.warning)}else{b.find(".create-non-ual-warning").hide()}},checkReciprocalLinkFormThreeStepMode:function(c,d,g,j,f){var h=a(c);if(h.find(".create-reciprocal-link").is(":checked")){var k=a.trim(h.find(".reciprocal-rpc-url").val());if(k==""){a("<div class='error applinks-error'>"+AppLinks.I18n.getText("applinks.error.url.field.empty")+"</div>").insertAfter(h.find(".reciprocal-rpc-url"));if(f){f()}return}var e=h.find(".reciprocal-link-username");var b=h.find(".reciprocal-link-password");if(e.val()==""){a('<div class="error applinks-error">'+AppLinks.I18n.getText("applinks.error.username.empty")+"</div>").insertAfter(e);if(f){f()}return false}var i=function(l){h.find(".same-user-description").find("input").attr("checked",true);h.find(".trust-radio-btn").attr("checked",true);h.find(".same-user-radio-btn").click();g(l)};k=AppLinks.UI.addProtocolToURL(k);AppLinks.SPI.verifyTwoWayLinkDetails(j,k,e.val(),b.val(),i,AppLinks.UI.displayValidationError("two-way-link-errors",c,f));return false}else{d();return false}},checkReciprocalLinkFormTwoStepMode:function(f,h,b,i){var c=a(f);var g=a.trim(c.find(".reciprocal-rpc-url").val());if(g==""){a("<div class='error applinks-error'>"+AppLinks.I18n.getText("applinks.error.url.field.empty")+"</div>").insertAfter(c.find(".reciprocal-rpc-url"));if(i){i()}return}var d=c.find(".reciprocal-link-username");var e=c.find(".reciprocal-link-password");if(d.val()==""){a('<div class="error applinks-error">'+AppLinks.I18n.getText("applinks.error.username.empty")+"</div>").insertAfter(d);if(i){i()}return false}g=AppLinks.UI.addProtocolToURL(g);AppLinks.SPI.verifyTwoWayLinkDetails(h,g,d.val(),e.val(),b,AppLinks.UI.displayValidationError("two-way-link-errors",f,i));return false}}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-util-js', location = 'applinks/internal/common/urls.js' */
(function(){AppLinks.Urls={generateUrl:function(b,a){var c=b;if(typeof a=="undefined"){return c}else{AJS.$.each(a,function(d,e){if(c.indexOf("?")<0){c=c+"?"}else{c=c+"&"}c=c+d+"="+encodeURIComponent(JSON.stringify(e))});return c}},generateApplinksAdminUrl:function(d,c,a){var b=d+"/plugins/servlet/applinks/listApplicationLinks";if(c==="confluence"){b=d+"/admin/listapplicationlinks.action"}return AppLinks.Urls.generateUrl(b,a)}}})();
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-oauth-ui', location = 'js/oauth-dialog.js' */
AJS.$(document).bind(AppLinks.Event.READY,function(){(function(a){AppLinks.OAuthCallback=function(){};AppLinks.OAuthCallback.prototype.success=function(){this.aouthWindow.close();this.onSuccess()};AppLinks.OAuthCallback.prototype.failure=function(){this.aouthWindow.close();this.onFailure()};AppLinks.OAuthCallback.prototype.show=function(b,d,c){this.onSuccess=d;this.onFailure=c;this.aouthWindow=window.open(b,"com_atlassian_applinks_authentication")};oauthCallback=new AppLinks.OAuthCallback();AppLinks.authenticateRemoteCredentials=function(b,d,c){a(".applinks-error").remove();oauthCallback.show(b,d,c)}})(AJS.$)});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-highlight-actions:highlighting-experiment-resources', location = '/js/doctheme-utils.js' */
Confluence.DocThemeUtils=Confluence.DocThemeUtils||(function(f){var e;function c(){return(a().length)?true:false}function a(){if(!e){e=f("#splitter-content")}return e}function g(i){var h=f(i);f(i).appendTo(c()?a():f("body"));return h}function b(){return c()?a().scrollTop():f(document).scrollTop()}function d(){return c()?a().scrollLeft():f(document).scrollLeft()}return{isDocTheme:c,appendAbsolutePositionedElement:g,getMainContentScrollTop:b,getMainContentScrollLeft:d,getDocThemeContentElement:a}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-highlight-actions:highlighting-experiment-resources', location = '/js/scrolling-inline-dialog.js' */
Confluence.ScrollingInlineDialog=function(a,d,c,b){var g=Confluence.DocThemeUtils.getDocThemeContentElement();var e=Confluence.DocThemeUtils.isDocTheme();b=b||{};if(!b.container&&e){b.container=g}var f=function(k,s,J,z){var v;var L="auto";var G;var p=-7;var q;var w;var u=e?g.width():AJS.$(window).width();var K=s.target.position();K.top+=e?g.scrollTop():0;K.left+=e?g.scrollLeft():0;var i=s.target.outerWidth();var m=K.left+i/2;var C=e?g.scrollTop()+AJS.$(window).height()-AJS.$("#footer").outerHeight():(window.pageYOffset||document.documentElement.scrollTop)+AJS.$(window).height();var n=10;var o=20;G=K.top+s.target.outerHeight()+z.offsetY;var H=k.find(".arrow").outerWidth();var j=k.outerWidth();var D=s.target.outerWidth();if(z.centerOnHighlight){if(j>D){v=K.left-(j-D)/2;q=m-v-H/2}else{v=K.left+z.offsetX;q=(j-H)/2}}else{v=K.left+z.offsetX;if(j>D){q=m-v-H/2}else{q=(j-H)/2}}q=(q<0)?0:q;var h=(e)?(K.top-g.scrollTop()):(K.top-(window.pageYOffset||document.documentElement.scrollTop));var A=z.maxHeight||0;var t=k.height();var r=h>Math.max(t,A);var l=(G+k.height())<C;w=(!l&&r)||z.onTop;z.onTop=w;var y=u-(v+j+n);if(w){G=K.top-t-8;p=t}if(w===false&&l===false){var x=(G+t)-C;var E=e?g.scrollTop()+x+AJS.$("#footer").outerHeight():(window.pageYOffset||document.documentElement.scrollTop)+x+o;var F=e?g:AJS.$("html, body");F.stop().animate({scrollTop:E},500)}if(z.isRelativeToMouse){if(y<0){L=n;v="auto";q=J.x-(AJS.$(window).width()-z.width)}else{v=J.x-20;q=J.x-v}}else{if(y<0){L=n;v="auto";var I=u-L;var B=I-j;q=m-B-H/2}}return{displayAbove:w,popupCss:{left:v,right:L,top:G},arrowCss:{position:"absolute",left:q,right:"auto",top:p}}};if(!b.calculatePositions){b.calculatePositions=f}return AJS.InlineDialog.call(this,a,d,c,b)};
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-highlight-actions:highlighting-experiment-resources', location = '/js/highlight-panel.js' */
Confluence.HighlightAction=(function(f){var d={};var c;var b={MAINCONTENT_AND_COMMENT:function(o){return Confluence.HighlightAction.RangeHelper.isSelectionInsideContent(f(".wiki-content"),o)},MAINCONTENT_ONLY:function(o){c=c||f(".wiki-content").first();return Confluence.HighlightAction.RangeHelper.isSelectionInsideContent(c,o)},COMMENT_ONLY:function(o){return Confluence.HighlightAction.RangeHelper.isSelectionInsideContent(f(".comment-content"),o)}};function a(p,q){var o={onClick:function(){},shouldDisplay:b.MAINCONTENT_AND_COMMENT};d[p]=f.extend(o,q)}function l(o){var p=d[o];if(!p){p=function(){AJS.logError("The button with key "+o+" doesn't have a registered handler")}}return p}function e(p){var o=Confluence.getContextPath()+"/rest/highlighting/1.0/insert-storage-fragment";return f.ajax({type:"POST",contentType:"application/json",url:o,data:JSON.stringify(p)})}function g(o){var p=Confluence.getContextPath()+"/rest/highlighting/1.0/insert-storage-column-table";return f.ajax({type:"POST",contentType:"application/json",url:p,data:JSON.stringify(o)})}function k(q,p,r){var o=i(r);o.tableColumnIndex=p;o.cellModifications=q;return o}function h(o,q){var p=i(q);p.xmlModification=o[0].xmlInsertion;return p}function j(o,q){var p=i(q);p.xmlModification=o;return p}function m(){if(window.getSelection){window.getSelection().empty&&window.getSelection().empty();window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges()}else{window.document.selection&&window.document.selection.empty()}}function i(p){var o={};o.pageId=p.pageId;o.selectedText=p.selectedText;o.index=p.index;o.numMatches=p.numMatches;o.lastFetchTime=n();return o}function n(){return f("meta[name='confluence-request-time']").attr("content")}return{registerButtonHandler:a,getButtonHandler:l,insertContentAtSelectionEnd:e,insertContentsInTableColumnCells:g,createTableInsertionBean:k,createInsertionBean:h,createXMLModificationBean:j,clearTextSelection:m,WORKING_AREA:b}})(AJS.$);Confluence.HighlightAction.RangeHelper=(function(h){function j(p){return{area:c(p),text:k(p),html:n(p),containingElement:d(p),range:p}}function c(q){var r=Confluence.DocThemeUtils.getMainContentScrollTop();var s=Confluence.DocThemeUtils.getMainContentScrollLeft();var w=q.getClientRects();if(!w.length&&q.parentElement()){var x=h(q.parentElement());var p=x.offset();w=[{top:p.top-((Confluence.DocThemeUtils.isDocTheme())?0:r),left:p.left-((Confluence.DocThemeUtils.isDocTheme())?0:s),bottom:p.top+x.height(),right:p.left+x.width()}]}var z=g(q,w);var u=function(E,D){var C={};C.top=E.top;C.left=E.left+s;C.bottom=D.bottom;if(E.left>=D.right){C.right=E.right}else{C.right=D.right}C.right=C.right+s;C.top=C.top+r;C.bottom=C.bottom+r;C.width=C.right-C.left;C.height=C.bottom-C.top;return C};var t=function(D){var C={};C.width=D.right-D.left;C.height=D.bottom-D.top;C.left=D.left+s;C.right=D.right+s;C.top=D.top+r;C.bottom=D.bottom+r;return C};var B=function(C){if(Confluence.DocThemeUtils.isDocTheme()){var D=Confluence.DocThemeUtils.getDocThemeContentElement().offset();C.left=C.left-D.left;C.right=C.right-D.left;C.top=C.top-D.top;C.bottom=C.bottom-D.top}return C};var A=B(u(z.first,z.last));var v=B(t(z.first));if(Confluence.HighlightAction.debug){var y=h("<div>").attr("id","highlight-actions-debug-helper");Confluence.DocThemeUtils.appendAbsolutePositionedElement(y).css(h.extend({position:"absolute",outline:"1px solid red"},A))}return{first:v,average:A}}function k(q){var p=(q.text!=undefined)?q.text:q.toString();return i(p)}function n(p){return(p.cloneContents)?h("<div>").append(p.cloneContents()).html():p.htmlText}function d(q){if(q.commonAncestorContainer){var p=q.commonAncestorContainer;if(p.nodeType==3){return p.parentNode}return p}else{if(q.parentElement){return q.parentElement()}}}function g(r,q){var p={};p.first=q[0];p.last=q[q.length-1];if(r.endOffset!=="undefined"){if(r.endOffset==0&&q.length>1){p.last=q[q.length-2]}}return p}function e(){if(window.getSelection&&window.getSelection().isCollapsed){return false}if(document.selection&&(document.selection.type=="None"||document.selection.createRange().htmlText=="")){return false}var s;if(window.getSelection){var p=window.getSelection();s=p.getRangeAt(p.rangeCount-1)}else{if(document.selection){s=document.selection.createRange()}}if(/^\s*$/.test(k(s))){var q=n(s);if(!q){return false}var r=q.toLowerCase().indexOf("<img ")!=-1;if(!r){return false}}if(!m(h(".wiki-content"),s)){return false}return s}function m(p,s){var q=d(s);var r=function(){var t=false;h.each(p,function(u,v){if(v===q||h.contains(v,q)){t=true;return false}});return t};return r()}function b(r,q){var p=k(o(r,q));var t=h.trim(k(q));var s=a(t,r);p=p.replace(/\s*$/,"");return{pageId:AJS.Meta.get("page-id"),selectedText:t,index:h.inArray(p.length-t.length,s),numMatches:s.length}}function f(p){if(document.createRange){return p.text()}else{range=document.body.createTextRange();range.moveToElementText(p.get(0));return range.text}}function o(r,q){var p;if(document.createRange){p=document.createRange();p.setStart(r.get(0),0);p.setEnd(q.endContainer,q.originalEndOffset)}else{p=document.body.createTextRange();p.moveToElementText(r.get(0));p.setEndPoint("EndToEnd",q)}return p}function a(u,s){var q=f(s);q=l(u,s.clone(),q);q=i(q);var t=0;var r=-1;var p=[];while((r=q.indexOf(u,t))>-1){p.push(r);t=r+1}return p}function l(u,t,r){var s=t.find('.user-mention, a[href^="/"]');t.find('.conf-macro[data-hasbody="false"]').each(function(){if(h(this).text().indexOf(u)>-1){s=s.add(this)}});if(s.length>0){var p=u.replace(/\S/g," ");var q=new RegExp(u.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),"g");s.each(function(){var v=h(this).text();h(this).text(v.replace(q,p))});return f(t)}return r}function i(p){return p.replace(/\u00a0/g,"\u0020")}return{getRangeOption:j,getUserSelectionRange:e,getSelectionRects:c,getSelectionText:k,getSelectionHTML:n,getContainingElement:d,getFirstAndLastSelectionRect:g,isSelectionInsideContent:m,computeSearchTextObject:b}})(AJS.$);AJS.toInit(function(f){var i=f(".wiki-content").first();var g={ELEMENT_NODE:1,TEXT_NODE:3};var k={IMAGE:"IMG"};var a=f("<div>").attr("id","action-dialog-target");var d;var j="selection-action-panel";var b;var e;function o(){var r=Confluence.getContextPath()+"/rest/highlighting/1.0/panel-items";var q=AJS.Meta.get("page-id");if(q!=undefined){r=r+"?pageId="+q}var s=f.get(r,function(t){if(t.length){m(t)}});h(s)}function m(v){var y=c();var q=29;var z=false;var B=v.length*q;var A=Confluence.HighlightPanel.Templates.panelContent({webItems:v});var x=false;var s=function(D,C,E){if(!x){D.append(A);D.find(".aui-button").tooltip({gravity:"s"});l(D.parent());D.find("button").click(function(H){var F=f(this).attr("data-key");var I=Confluence.HighlightAction.getButtonHandler(F);z=true;d.hide();var G=Confluence.HighlightAction.RangeHelper.getRangeOption(b);if(f.trim(G.text)!==""){G.searchText=Confluence.HighlightAction.RangeHelper.computeSearchTextObject(i,b)}I.onClick(G)})}E();x=true;return false};var w=function(C){var D=false;C.find("button").each(function(E){var G=f(this);var F=G.attr("data-key");var I=Confluence.HighlightAction.getButtonHandler(F);var H=I.shouldDisplay(b);G.css("display",H?"inline-block":"none");D=D||H});if(!D){d.hide()}else{C.find(".contents").width("auto")}};var r=function(){Confluence.HighlightAction.Analytics.sendAnalyticsForOpeningHighlightOptionPanel();w(this.popup);y.bindHideEvents();a.show()};var u=function(){y.unbindHideEvents();a.hide()};var t={centerOnHighlight:true,onTop:true,fadeTime:0,width:B,persistent:true,initCallback:r,hideCallback:u};d=Confluence.ScrollingInlineDialog(a,j,s,t)}function l(q){q.children().attr("unselectable","on").on("selectstart",false)}function h(s){var q;var r=0;var t=1000;f(document).on("mouseup",function(u){s.done(function(){var v=f(u.target);if(v.closest(".aui-inline-dialog").length!==0){return}setTimeout(function(){clearTimeout(q);var w=t;if(f(d[0]).is(":visible")){w=r}q=setTimeout(function(){n()},w)},r)})});s.done(function(){AJS.bind("quickedit.success",function(){d.hide()})})}function n(){b=Confluence.HighlightAction.RangeHelper.getUserSelectionRange();var q=function(t){return f.trim(t.toString())!==""};b.originalEndOffset=b.endOffset;if(!b||!q(b)){d.hide();return}var s=Confluence.HighlightAction.RangeHelper.getSelectionRects(b);if(!s){return}var r=p(s);if(r||!f(d[0]).is(":visible")){f(d[0]).hide();d.show()}}function c(){var t=function(){v();s()};var w=function(){q();y()};var r=false;var x=j+".inline-dialog-check";var v=function(){if(!r){f("body").bind("click."+x,function(A){var z=f(A.target);if(z.closest("#inline-dialog-"+j+" .contents").length===0){if(!b){d.hide()}}});r=true}};var q=function(){if(r){f("body").unbind("click."+x)}r=false};var u=function(z){if(z.keyCode===27){d.hide()}};var s=function(){f(document).on("keydown",u)};var y=function(){f(document).off("keydown",u)};return{bindHideEvents:t,unbindHideEvents:w}}function p(r){Confluence.DocThemeUtils.appendAbsolutePositionedElement(a);var q=false;if(!e||r.first.top!=e.first.top||r.first.height!=e.first.height||r.first.left!=e.first.left||r.first.width!=e.first.width){a.css({top:r.first.top,height:r.first.height,left:r.first.left,width:r.first.width});e=r;q=true}return q}o()});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-highlight-actions:highlighting-experiment-resources', location = '/js/quote-in-comment.js' */
AJS.toInit(function(f){var a=true;var h=false;var d="com.atlassian.confluence.plugins.confluence-highlight-actions:quote-comment";function b(l){var k=l.getBody().createTextRange();k.moveToElementText(l.getBody());k.collapse(false);k.select()}function e(){var k=40;if(Confluence.DocThemeUtils.isDocTheme()){var l=Confluence.DocThemeUtils.getDocThemeContentElement();var m=l.scrollTop()-f("#header").height()+f("#rte-toolbar").offset().top;l.scrollTop(m-k)}else{var m=f("#rte-toolbar").offset().top;f(document).scrollTop(m-k)}}function j(l,m){var n="<p><br/></p>";if(f.browser.msie&&!h){b(l);n="<p></p>"}var k="<blockquote><p>"+m.html+"</p></blockquote>"+n;l.execCommand("mceInsertContent",false,k);h=false}function i(k){Confluence.HighlightAction.clearTextSelection();setTimeout(function(){var l=AJS&&AJS.Rte&&AJS.Rte.getEditor&&AJS.Rte.getEditor();if(l){Confluence.HighlightAction.Analytics.sendAnalyticsForQuoteInComment();e();j(l,k)}else{Confluence.HighlightAction.Analytics.sendAnalyticsForQuoteInComment(a);h=true;var m=function(){j(AJS.Rte.getEditor(),k);AJS.unbind("quickedit.visible",m)};AJS.bind("quickedit.visible",m);c(g(k.containingElement))}},0)}function g(k){var l=f(k).closest("div.comment");return l}function c(k){if(!k.length>0){f(".quick-comment-prompt").click()}else{k.find(".comment-actions .action-reply-comment").click()}}Confluence&&Confluence.HighlightAction&&Confluence.HighlightAction.registerButtonHandler(d,{onClick:i,shouldDisplay:Confluence.HighlightAction.WORKING_AREA.MAINCONTENT_AND_COMMENT})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-highlight-actions:highlighting-experiment-resources', location = '/js/highlight-analytics.js' */
Confluence.HighlightAction.Analytics=(function(c){var b="confluence.highlight.actions.open";var e="confluence.quote.in.comment.insert";var g="confluence.quote.in.comment.append";function d(h,i){AJS.trigger("analytics",{name:h,data:i})}function a(){d(b)}function f(h){if(h){d(e)}else{d(g)}}return{sendAnalyticsForOpeningHighlightOptionPanel:a,sendAnalyticsForQuoteInComment:f}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-highlight-actions:highlighting-experiment-resources', location = '/soy/templates.soy' */
// This file was automatically generated from templates.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.HighlightPanel == 'undefined') { Confluence.HighlightPanel = {}; }
if (typeof Confluence.HighlightPanel.Templates == 'undefined') { Confluence.HighlightPanel.Templates = {}; }


Confluence.HighlightPanel.Templates.panelContent = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  var webItemList3 = opt_data.webItems;
  var webItemListLen3 = webItemList3.length;
  for (var webItemIndex3 = 0; webItemIndex3 < webItemListLen3; webItemIndex3++) {
    var webItemData3 = webItemList3[webItemIndex3];
    output.append('<button data-key="', soy.$$escapeHtml(webItemData3.key), '" class="aui-button aui-button-compact aui-button-subtle" title="', soy.$$escapeHtml(webItemData3.label), '"><span class="aui-icon aui-icon-small ', soy.$$escapeHtml(webItemData3.styleClass), '"/></button>');
  }
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.integration.jira.jira-integration-plugin:fields', location = '/fields/fields.soy' */
// This file was automatically generated from fields.soy.
// Please don't edit this file by hand.

if (typeof jiraIntegration == 'undefined') { var jiraIntegration = {}; }
if (typeof jiraIntegration.templates == 'undefined') { jiraIntegration.templates = {}; }
if (typeof jiraIntegration.templates.fields == 'undefined') { jiraIntegration.templates.fields = {}; }


jiraIntegration.templates.fields.stringField = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  aui.form.textField({labelContent: soy.$$escapeHtml(opt_data.labelText), id: opt_data.name, name: opt_data.name, value: opt_data.value, isRequired: opt_data.isRequired, extraClasses: 'jira-field' + (opt_data.extraClasses ? ' ' + opt_data.extraClasses : ''), extraAttributes: {'data-jira-type': opt_data.jiraType}, errorTexts: opt_data.errorTexts}, output);
  return opt_sb ? '' : output.toString();
};


jiraIntegration.templates.fields.textareaField = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="field-group jira-field', (opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '', '" data-jira-type="', soy.$$escapeHtml(opt_data.jiraType), '"><label for="', soy.$$escapeHtml(opt_data.name), '">', soy.$$escapeHtml(opt_data.labelText), (opt_data.isRequired) ? '<span class="aui-icon icon-required"></span>' : '', '</label><textarea rows="10" id="', soy.$$escapeHtml(opt_data.name), '" name="', soy.$$escapeHtml(opt_data.name), '" class="textarea long-field">', soy.$$escapeHtml(opt_data.value), '</textarea>');
  if (opt_data.errorTexts) {
    var errorList37 = opt_data.errorTexts;
    var errorListLen37 = errorList37.length;
    for (var errorIndex37 = 0; errorIndex37 < errorListLen37; errorIndex37++) {
      var errorData37 = errorList37[errorIndex37];
      output.append('<div class="error">', soy.$$escapeHtml(errorData37), '</div>');
    }
  }
  output.append('</div>');
  return opt_sb ? '' : output.toString();
};


jiraIntegration.templates.fields.arrayField = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  aui.form.textField({id: opt_data.name, name: opt_data.name, labelContent: soy.$$escapeHtml(opt_data.labelText), value: opt_data.value, isRequired: opt_data.isRequired, extraClasses: 'jira-field' + (opt_data.extraClasses ? ' ' + opt_data.extraClasses : ''), extraAttributes: {'data-jira-type': opt_data.jiraType}, errorTexts: opt_data.errorTexts}, output);
  return opt_sb ? '' : output.toString();
};


jiraIntegration.templates.fields.numberField = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  aui.form.textField({id: opt_data.name, name: opt_data.name, labelContent: soy.$$escapeHtml(opt_data.labelText), value: opt_data.value, isRequired: opt_data.isRequired, extraClasses: 'jira-field' + (opt_data.extraClasses ? ' ' + opt_data.extraClasses : ''), extraAttributes: {'data-jira-type': opt_data.jiraType}, errorTexts: opt_data.errorTexts}, output);
  return opt_sb ? '' : output.toString();
};


jiraIntegration.templates.fields.allowedValuesField = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (opt_data.options.length) {
    aui.form.selectField({id: opt_data.name, name: opt_data.name, labelContent: soy.$$escapeHtml(opt_data.labelText), options: opt_data.options, isRequired: opt_data.isRequired, isMultiple: opt_data.isMultiple, extraClasses: 'jira-field' + (opt_data.extraClasses ? ' ' + opt_data.extraClasses : ''), extraAttributes: {'data-jira-type': opt_data.jiraType}, errorTexts: opt_data.errorTexts}, output);
  } else {
    aui.form.valueField({id: opt_data.name, name: opt_data.name, labelContent: soy.$$escapeHtml(opt_data.labelText), value: "None", isRequired: opt_data.isRequired, extraClasses: 'jira-field' + (opt_data.extraClasses ? ' ' + opt_data.extraClasses : ''), extraAttributes: {'data-jira-type': opt_data.jiraType}, errorTexts: opt_data.errorTexts}, output);
  }
  return opt_sb ? '' : output.toString();
};


jiraIntegration.templates.fields.timeTrackingField = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  aui.form.textField({id: opt_data.name, name: opt_data.name, labelContent: soy.$$escapeHtml(opt_data.labelText), value: opt_data.value, isRequired: opt_data.isRequired, extraClasses: 'jira-field' + (opt_data.extraClasses ? ' ' + opt_data.extraClasses : ''), extraAttributes: {'data-jira-type': opt_data.jiraType}, errorTexts: opt_data.errorTexts}, output);
  return opt_sb ? '' : output.toString();
};


jiraIntegration.templates.fields.unrenderableTypeField = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="field-group jira-field jira-field-unrenderable', (opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '', '"><label>', soy.$$escapeHtml(opt_data.labelText), (opt_data.isRequired) ? '<span class="aui-icon icon-required"></span>' : '', '</label>');
  aui.form.value({content: opt_data.reasonContent}, output);
  if (opt_data.errorTexts) {
    var errorList117 = opt_data.errorTexts;
    var errorListLen117 = errorList117.length;
    for (var errorIndex117 = 0; errorIndex117 < errorListLen117; errorIndex117++) {
      var errorData117 = errorList117[errorIndex117];
      output.append('<div class="error">', soy.$$escapeHtml(errorData117), '</div>');
    }
  }
  output.append('</div>');
  return opt_sb ? '' : output.toString();
};


jiraIntegration.templates.fields.dateField = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  aui.form.textField({labelContent: soy.$$escapeHtml(opt_data.labelText), id: opt_data.name, name: opt_data.name, value: opt_data.value, isRequired: opt_data.isRequired, extraClasses: 'jira-field' + (opt_data.extraClasses ? ' ' + opt_data.extraClasses : ''), extraAttributes: {'data-jira-type': opt_data.jiraType}, errorTexts: opt_data.errorTexts}, output);
  return opt_sb ? '' : output.toString();
};


jiraIntegration.templates.fields.select2WithIconField = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="field-group jira-field', (opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '', '" data-jira-type="', soy.$$escapeHtml(opt_data.jiraType), '"><label for="', soy.$$escapeHtml(opt_data.name), '">', soy.$$escapeHtml(opt_data.labelText), (opt_data.isRequired) ? '<span class="aui-icon icon-required"></span>' : '', '</label><select id="', soy.$$escapeHtml(opt_data.name), '" name="', soy.$$escapeHtml(opt_data.name), '">');
  var optionList154 = opt_data.options;
  var optionListLen154 = optionList154.length;
  for (var optionIndex154 = 0; optionIndex154 < optionListLen154; optionIndex154++) {
    var optionData154 = optionList154[optionIndex154];
    output.append('<option value="', soy.$$escapeHtml(optionData154.value), '" ', (optionData154.selected) ? 'selected' : '', ' data-icon-url="', soy.$$escapeHtml(optionData154.iconUrl), '">', soy.$$escapeHtml(optionData154.text), '</option>');
  }
  output.append('</select>');
  if (opt_data.errorTexts) {
    var errorList170 = opt_data.errorTexts;
    var errorListLen170 = errorList170.length;
    for (var errorIndex170 = 0; errorIndex170 < errorListLen170; errorIndex170++) {
      var errorData170 = errorList170[errorIndex170];
      output.append('<div class="error">', soy.$$escapeHtml(errorData170), '</div>');
    }
  }
  output.append('</div>');
  return opt_sb ? '' : output.toString();
};


jiraIntegration.templates.fields.select2WithIconOption = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (opt_data.iconUrl) {
    aui.avatar.avatar({avatarImageUrl: opt_data.iconUrl, size: 'xsmall', isProject: opt_data.isProject, extraClasses: 'select-option-image', tagName: 'span'}, output);
  }
  output.append('<span class="select-option" title="', soy.$$escapeHtml(opt_data.optionValue), '">', soy.$$escapeHtml(opt_data.optionValue), '</span>');
  return opt_sb ? '' : output.toString();
};


jiraIntegration.templates.fields.labelFieldResult = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.label.isNew) ? soy.$$escapeHtml(AJS.format("\x22{0}\x22 - (New label)",opt_data.label.labelName)) : soy.$$escapeHtml(opt_data.label.labelName));
  return opt_sb ? '' : output.toString();
};


jiraIntegration.templates.fields.userOptionSelect = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  var userOption__soy197 = new soy.StringBuilder(soy.$$escapeHtml(opt_data.displayName), ' - (', soy.$$escapeHtml(opt_data.name), ')');
  userOption__soy197 = userOption__soy197.toString();
  output.append('<span title="', userOption__soy197, '">', userOption__soy197, '</span>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.integration.jira.jira-integration-plugin:fields', location = '/fields/fields.js' */
var jiraIntegration=window.jiraIntegration||{};jiraIntegration.fields=(function(I,P){var k="YYYY-MM-DD";var g={template:jiraIntegration.templates.fields.stringField,getContext:u,getValue:A};var y={template:jiraIntegration.templates.fields.stringField,getContext:q,getValue:D,behavior:o};var t={template:jiraIntegration.templates.fields.arrayField,getContext:h,getValue:B,behavior:j};var r={template:jiraIntegration.templates.fields.textareaField,getContext:u,getValue:A};var F={template:jiraIntegration.templates.fields.numberField,getContext:u,getValue:C};var c={template:jiraIntegration.templates.fields.arrayField,getContext:h,getValue:B};var O={template:jiraIntegration.templates.fields.allowedValuesField,getContext:f,getValue:P.bind(b,null,"name"),behavior:R};var L={template:jiraIntegration.templates.fields.allowedValuesField,getContext:f,getValue:P.bind(b,null,"id")};var K={template:jiraIntegration.templates.fields.timeTrackingField,getContext:Q,getValue:e};var J={template:jiraIntegration.templates.fields.dateField,getContext:u,getValue:A,behavior:x};var i={template:jiraIntegration.templates.fields.select2WithIconField,getContext:H,getValue:P.bind(b,null,"name"),behavior:a};var l={"com.pyxis.greenhopper.jira:gh-epic-label":g,string:g,summary:g,"com.atlassian.jira.plugin.system.customfieldtypes:textfield":g,"com.atlassian.jira.plugin.system.customfieldtypes:url":g,environment:r,"com.atlassian.jira.plugin.system.customfieldtypes:textarea":r,description:r,"com.atlassian.jira.plugin.system.customfieldtypes:float":F,array:c,labels:t,"com.atlassian.jira.plugin.system.customfieldtypes:labels":c,resolution:O,fixVersions:O,priority:i,versions:O,components:O,security:O,"com.atlassian.jira.plugin.system.customfieldtypes:version":O,"com.atlassian.jira.plugin.system.customfieldtypes:multiversion":O,"com.atlassian.jira.plugin.system.customfieldtypes:project":O,assignee:y,reporter:y,timetracking:K,duedate:J,"com.atlassian.jira.plugin.system.customfieldtypes:datepicker":J,"com.atlassian.jira.plugin.system.customfieldtypes:multiselect":L,"com.atlassian.jira.plugin.system.customfieldtypes:select":L};var v={ignoreFieldsWithDefaultValue:false};function m(U,S,V){var T=S.schema.system||"customfield_"+S.schema.customId;return{labelText:S.name,name:T,isRequired:S.required,errorTexts:V[T],jiraType:U}}function u(W,S,T,U){var V=W.name;W.value=(I.isPlainObject(U[V])?U[V].name:U[V])||(T&&T.fields[V])||"";return W}function A(S){return S.val()}function C(S){var T=S.val();if(s(T)){return Number(T)}return T||null}function x(S){var U=S.find("input");if(!!navigator.userAgent.match(/Trident/)&&AJS.version<"5.3.5"){var T="placeholder" in document.createElement("input");U.attr("placeholder",k);if(!T){U.on("focus",function(){if(U.val()===U.attr("placeholder")){U.val("")}}).on("blur",function(){if(U.val()===""){U.val(U.attr("placeholder"))}}).blur()}}else{U.datePicker({overrideBrowserDefault:true})}}function h(W,S,T,U){var V=W.name;W.value=(U[V]&&U[V].join(","))||(T&&T.fields[V]&&T.fields[V].join(","));return W}function B(S){return P.map(S.val().split(","),I.trim)}function f(Y,S,T,V){var W=Y.name;var U=V[W];var Z=T&&T.fields[W];var X;if(U){X=I.isArray(U)?P.pluck(U,"name"):[U.name]}else{if(Z){X=I.isArray(Z)?P.pluck(Z,"name"):[Z.name]}else{X=[]}}Y.options=P.map(S.allowedValues,function(aa){return{value:aa.name||aa.id,text:aa.name||aa.value,selected:P.contains(X,aa.name||aa.id)}});Y.isMultiple=P.contains(S.operations,"add");return Y}function b(V,T){var W=T.val();var S=T.attr("multiple");var U=function(Y){var X={};X[V]=Y;return X};if(S){return I.isArray(W)?P.map(W,U):[U(W)]}return U(W)}function R(S){S.find("select[multiple]").auiSelect2()}function q(W,S,T,U){var V=W.name;W.value=(U[V]&&U[V].name)||(T&&T.fields[V]&&T.fields[V].name)||"";return W}function D(S){return{name:S.val()}}function N(T,W,V,U,X){var Z=T.find("input");var Y=T.attr("name");Z.removeClass("text");var S={minimumInputLength:1,id:Y,name:Y,query:function(ab){function aa(ac){ab.callback({results:ac})}n(W,V,ab.term,U).done(aa)}};Z.auiSelect2(I.extend(S,X));T.find("div.aui-select2-container").addClass("jira-select2-drop-box")}function o(S,V,U,T){var W={formatInputTooShort:function(){return "Find users..."},formatResult:function(X){return jiraIntegration.templates.fields.userOptionSelect({name:X.id,displayName:X.text})}};N(S,V,U,T,W)}function j(S,V,U,T){var W=S.find("input");jiraIntegration.fields._labelPicker.build(W,function(X){return n(V,U,X,T)})}function n(W,U,V,T){var S=I.extend({restType:U,issueKey:(T&&T.key)||"",term:V},W);return I.ajax({type:"POST",contentType:"application/json",dataType:"json",url:AJS.contextPath()+"/rest/jira-integration/latest/fields/autocomplete",data:JSON.stringify(S)})}function Q(W,S,T,U){var V=W.name;W.value=(U[V]&&U[V].remainingEstimate)||(T&&T.fields[V]&&T.fields[V].remainingEstimate)||"";return W}function e(S){return{remainingEstimate:S.val()}}function H(X,S,T,U){var V=X.name;var W=(U[V]&&U[V].name)||(T&&T.fields&&T.fields[V]&&T.fields[V].name)||"";X.options=P.map(S.allowedValues,function(Y){return{value:Y.name,text:Y.name,selected:W===Y.name,iconUrl:Y.iconUrl}});return X}function z(T){var S;if(T.id){S=I(T.element).attr("data-icon-url")}return jiraIntegration.templates.fields.select2WithIconOption({optionValue:T.text,iconUrl:S})}function a(W,V,T,S){if(!I.fn.auiSelect2){AJS.log("AUI version 5.2 or greater is required as this plugin needs the .auiSelect2() jQuery plugin.");return}var U=W.find("select");U.addClass("jira-select2-drop-box");U.auiSelect2({hasAvatar:true,minimumResultsForSearch:-1,formatSelection:z,formatResult:z})}function p(T,S){if(P.has(l,T)&&console&&console.warn){console.warn("Redefining handler for type "+T+".")}l[T]=S}function E(S){return S.schema?(S.schema.system||S.schema.custom||S.schema.customId):S}function M(S){return l[E(S)]}function w(S){var T=d(S);return T&&M(T)}function d(S){return S.closest(".jira-field").attr("data-jira-type")}function G(T,S){return I.ajax({type:"GET",url:AJS.contextPath()+"/rest/jira-integration/1.0/servers/"+T.serverId+"/projects/"+T.projectKey+"/issue-types/"+T.issueType+"/fields-meta"}).pipe(function(V){var U=[];P.each(V.fields,function(X){var W=E(X);if(X.required&&!P.contains(S.excludedFields,W)){U.push(X)}});return U})}function s(S){return/\d/.test(S)&&/^-?\d*\.?\d*$/.test(S)}return{addFieldHandler:p,getFieldHandler:M,canRender:function(S){var U=E(S);var T=l[U];if(!T){return false}return S.operations&&S.operations.length&&(!T.canRender||T.canRender(S))},renderField:function(W,Y,Z,X){var S=Y.schema.system||Y.schema.custom||Y.schema.customId;var U=l[S];var V=m(S,Y,X||{});var aa=!U||(U.canRender&&!U.canRender(Y));var T=!Y.operations||!Y.operations.length;if(aa||T){V.reasonContent=aa?AJS.format("{0}Edit{1} this field in JIRA",'<a href="'+(W?W.url:"#")+'">',"</a>"):T?AJS.format("{0}Edit{1} this field in JIRA",'<a href="'+(W?W.url:"#")+'">',"</a>"):null;if(!V.reasonContent){throw new Error("Invalid unrenderable reason.")}return jiraIntegration.templates.fields.unrenderableTypeField(V)}return U.template(U.getContext(V,Y,W,Z||{}))},getJSON:function(S){var T=w(S);return T&&T.getValue&&T.getValue(S)},attachFieldBehaviors:function(U,T,S){U.find(".jira-field").each(function(X,W){var V=I(W);var Z=d(V);var Y=Z&&M(Z);var aa=Y&&Y.behavior;if(aa){aa(V,T,Z,S)}})},renderCreateRequiredFields:function(W,V,U,T,S){T=P.extend({},v,T);function X(Y){if(T.ignoreFieldsWithDefaultValue){Y=P.filter(Y,function(aa){return !aa.hasDefaultValue})}var Z=P.filter(Y,function(aa){return !jiraIntegration.fields.canRender(aa)});if(Z.length){if(S){S(Z)}return}W.html(P.map(Y,function(aa){return jiraIntegration.fields.renderField(null,aa,null,null)}).join(""));jiraIntegration.fields.attachFieldBehaviors(W,{serverId:U.serverId,projectKey:U.projectKey},null)}if(T.requiredFields){X(T.requiredFields)}else{G(U,T).done(X)}}}}(AJS.$,window._));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.integration.jira.jira-integration-plugin:fields', location = '/fields/label-picker.js' */
var jiraIntegration=window.jiraIntegration||{};jiraIntegration.fields=jiraIntegration.fields||{};jiraIntegration.fields._labelPicker=function(a){var b=function(d,c){d.auiSelect2({tags:true,multiple:true,tokenSeparators:[","," "],createSearchChoice:function(e){if(!e){return null}return{id:e,text:e,isNew:true}},query:function(f){var e=function(g){f.callback({results:g})};c(f.term).done(e)},formatResult:function(e){return jiraIntegration.templates.fields.labelFieldResult({label:{labelName:e.text,isNew:e.isNew}})}})};return{build:b}}(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-jira-content:confluence-jira-content-resources', location = 'com/atlassian/confluence/plugins/createjiracontent/soy/confluence-jira-content-templates.soy' */
// This file was automatically generated from confluence-jira-content-templates.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.CreateJiraContent == 'undefined') { Confluence.CreateJiraContent = {}; }


Confluence.CreateJiraContent.createIssueDialog = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<form action="#" method="post" id="jira-content-create-issue-form" class="aui top-label"><div class="dialog-header"><div class="title left-position"><h2 id="create-issues-dialog-header">', soy.$$escapeHtml("Create Issue"), '</h2></div><div class="servers"><select class="select hidden" id="jira-servers" /></div><br class="clear" /></div><span id="create-issue-loading"><span class="aui-icon aui-icon-wait"></span> ', soy.$$escapeHtml("Loading\u2026"), '</span><div class="dialog-content hidden"><div class="main-field"><select class="select stretch-out" id="jira-projects" name="pid" title="database select" /><span id="projectSpinner" class="project-spinner"></span></div><div class="main-field last-main-field"><select class="select" id="jira-issue-types" name="issuetype"><option value=\'-1\'>', soy.$$escapeHtml("select"), '</option></select></div><div id="issue-content"><div id="create-from-text"><div class="field-group main-field"><label for="issue-summary">', soy.$$escapeHtml("Summary"), '<span class="aui-icon icon-required"> required</span></label><input id="issue-summary" class="text" value="', soy.$$escapeHtml(opt_data.summary), '" maxlength="255" /></div><div class="field-group main-field"><label for="issue-description">', soy.$$escapeHtml("Description"), '<span class="aui-icon icon-required"> required</span></label><textarea class="textarea" name="comment" id="issue-description">', (opt_data.isCutLongText) ? soy.$$escapeHtml(opt_data.comment) : '', '</textarea></div></div><div id="jira-required-fields-panel"></div><div id="create-from-table"></div></div><div id="jira-epic-content"></div><div id="create-issue-form-messages" class="hidden"></div></div><div id="prepare-issue-messages" class="issue-messages hidden"></div><div class="buttons-group hidden"><input class="aui-button submit create-issue-submit" type="submit" value="', soy.$$escapeHtml("Create"), '" /><a class="create-issue-cancel" href="#">', soy.$$escapeHtml("Cancel"), '</a><span id="form-spinner"></span><span id="form-message-spinner"></span><span id="form-message"></span></div><div id="jiraserver-issue-messages" class="issue-messages"></div><div id="create-issue-messages"></div><div id="text-suggestion" class="text-suggestion hidden"></div></form>');
  return opt_sb ? '' : output.toString();
};


Confluence.CreateJiraContent.renderUnsupportedFieldsWarningMessage = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (opt_data.unsupportedFields.length == 1) {
    var field__soy27 = new soy.StringBuilder('<strong>', soy.$$escapeHtml(opt_data.unsupportedFields), '</strong>');
    field__soy27 = field__soy27.toString();
    output.append(AJS.format("The required field {0} is not available in this dialog. You will need to",field__soy27));
  } else {
    var fieldList__soy34 = new soy.StringBuilder();
    Confluence.CreateJiraContent.buildFieldList({fields: opt_data.unsupportedFields}, fieldList__soy34);
    fieldList__soy34 = fieldList__soy34.toString();
    output.append(AJS.format("The required fields {0} are not available in this dialog. You will need to",fieldList__soy34));
  }
  output.append(' <a href="', soy.$$escapeHtml(opt_data.projectLinkUrl), '" id="create-issue-in-jira-link" target="_blank">', soy.$$escapeHtml("create your issue directly in JIRA"), '</a>.');
  return opt_sb ? '' : output.toString();
};


Confluence.CreateJiraContent.buildFieldList = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  var joinText__soy45 = new soy.StringBuilder((opt_data.fields.length == 2) ? ' ' + soy.$$escapeHtml("and") + ' ' : ', ');
  joinText__soy45 = joinText__soy45.toString();
  var fieldList53 = opt_data.fields;
  var fieldListLen53 = fieldList53.length;
  for (var fieldIndex53 = 0; fieldIndex53 < fieldListLen53; fieldIndex53++) {
    var fieldData53 = fieldList53[fieldIndex53];
    output.append((! (fieldIndex53 == 0)) ? soy.$$escapeHtml(joinText__soy45) : '', '<strong>', soy.$$escapeHtml(fieldData53), '</strong>');
  }
  return opt_sb ? '' : output.toString();
};


Confluence.CreateJiraContent.renderEpicContent = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div id="epic-link" class="main-field checkbox"><input class="checkbox" type="checkbox" id="epicCheck" checked="checked" name="epickCheck" value="', soy.$$escapeHtml(opt_data.epicKey), '"/><label for="epicCheck">', soy.$$escapeHtml("Link to epic"), ' </label>', opt_data.epicHtmlPlaceHolder, '</div>');
  return opt_sb ? '' : output.toString();
};


Confluence.CreateJiraContent.createPreviewIssuesFromTable = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="main-field issue-preview"><div class="preview-message" > ', soy.$$escapeHtml("Following issues will be created:"), ' </div>');
  var issueList74 = opt_data.issues;
  var issueListLen74 = issueList74.length;
  if (issueListLen74 > 0) {
    for (var issueIndex74 = 0; issueIndex74 < issueListLen74; issueIndex74++) {
      var issueData74 = issueList74[issueIndex74];
      Confluence.CreateJiraContent.issuePreviewTemplate({summary: issueData74.summary}, output);
    }
  } else {
    output.append(soy.$$escapeHtml("Issue not found."));
  }
  output.append((opt_data.numberOfRemainingIssues > 0) ? '<div id="issue-remaining">' + ((opt_data.numberOfRemainingIssues == 1) ? soy.$$escapeHtml("+ 1 more issue.") : '') + ((opt_data.numberOfRemainingIssues > 1) ? soy.$$escapeHtml(AJS.format("+ {0} more issues.",opt_data.numberOfRemainingIssues)) : '') + '</div>' : '', '</div>');
  return opt_sb ? '' : output.toString();
};


Confluence.CreateJiraContent.issueFromTextSuggestedLink = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.numberOfIssues) ? '<span class="aui-icon aui-icon-small aui-iconfont-info"/>' + soy.$$escapeHtml("Looks like you are creating issues from a table.") + '<br/><a id="text-suggested-link" href="#">' + soy.$$escapeHtml(AJS.format("Create {0} issues from this table.",opt_data.numberOfIssues)) + '</a>' : '');
  return opt_sb ? '' : output.toString();
};


Confluence.CreateJiraContent.issueFromTableSuggestedLink = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<span class="aui-icon aui-icon-small aui-iconfont-info"/><a id="table-suggested-link" href="#">', soy.$$escapeHtml("Create a single issue"), '</a> ', soy.$$escapeHtml("from the highlighted text."));
  return opt_sb ? '' : output.toString();
};


Confluence.CreateJiraContent.issuePreviewTemplate = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="issue-container"><img class="icon ico-left"><div class="issue-content"><span class="issue-summary">', soy.$$escapeHtml(opt_data.summary), '</span></div><div class="text-right"></div></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.CreateJiraContent.displayMessages = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<p><ul>');
  var messageList110 = opt_data.messages;
  var messageListLen110 = messageList110.length;
  for (var messageIndex110 = 0; messageIndex110 < messageListLen110; messageIndex110++) {
    var messageData110 = messageList110[messageIndex110];
    output.append('<li>', soy.$$escapeHtml(messageData110), ' </li>');
  }
  output.append('</ul></p>');
  return opt_sb ? '' : output.toString();
};


Confluence.CreateJiraContent.issueMacroXml = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<ac:macro ac:name=\'jira\'><ac:parameter ac:name=\'showSummary\'>', soy.$$escapeHtml(opt_data.showSummary), '</ac:parameter><ac:parameter ac:name=\'server\'>', soy.$$escapeHtml(opt_data.serverName), '</ac:parameter><ac:parameter ac:name=\'serverId\'>', soy.$$escapeHtml(opt_data.serverId), '</ac:parameter><ac:parameter ac:name=\'key\'>', soy.$$escapeHtml(opt_data.issueKey), '</ac:parameter>"</ac:macro>');
  return opt_sb ? '' : output.toString();
};


Confluence.CreateJiraContent.createIssueMessage = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.canInsertMacro == true) ? soy.$$escapeHtml(AJS.format("The issue {0} is created and its link is inserted in the page. To see the result, ",opt_data.issueKey)) + ' <a href="' + soy.$$escapeHtml(opt_data.currentUrl) + '">' + soy.$$escapeHtml("reload ") + '</a> ' + soy.$$escapeHtml("this page.") : soy.$$escapeHtml(AJS.format("The issue {0} is created but not be able to insert to the page. You can edit the page to insert the issue later.",opt_data.issueKey)));
  return opt_sb ? '' : output.toString();
};


Confluence.CreateJiraContent.createdIssuesMessage = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  var createdIssueMessagesContent__soy139 = new soy.StringBuilder();
  Confluence.CreateJiraContent.displayMessages({messages: opt_data.createdIssueMessages}, createdIssueMessagesContent__soy139);
  createdIssueMessagesContent__soy139 = createdIssueMessagesContent__soy139.toString();
  output.append(createdIssueMessagesContent__soy139, (opt_data.canInsertMacro == true) ? soy.$$escapeHtml("The issues are created and theirs links are inserted in the page. To see the result, ") + ' <a href="' + soy.$$escapeHtml(opt_data.currentUrl) + '">' + soy.$$escapeHtml("reload ") + '</a> ' + soy.$$escapeHtml("this page.") : soy.$$escapeHtml("The issues are created but not be able to insert to the page. You can edit the page to insert the issues later."));
  return opt_sb ? '' : output.toString();
};


Confluence.CreateJiraContent.selectOption = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<span title="', soy.$$escapeHtml(opt_data.optionValue), '">', soy.$$escapeHtml(opt_data.optionValue), '</span>');
  return opt_sb ? '' : output.toString();
};


Confluence.CreateJiraContent.updatePageFromTableError = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  var createdIssueMessagesContent__soy162 = new soy.StringBuilder();
  Confluence.CreateJiraContent.displayMessages({messages: opt_data.createdIssueMessages}, createdIssueMessagesContent__soy162);
  createdIssueMessagesContent__soy162 = createdIssueMessagesContent__soy162.toString();
  output.append(createdIssueMessagesContent__soy162, soy.$$escapeHtml("The issues are created but not be able to insert to the page. You can edit the page to insert the issues later."));
  return opt_sb ? '' : output.toString();
};


Confluence.CreateJiraContent.getOAuthMessage = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="oauth-link-text-message">', soy.$$escapeHtml("Atlassian JIRA needs your permission to connect to "), ' ', soy.$$escapeHtml(opt_data.confluenceApplicationName), '.</div><button class="oauth-init aui-button">', soy.$$escapeHtml("Allow access"), '</button>');
  return opt_sb ? '' : output.toString();
};


Confluence.CreateJiraContent.selectOptionWithImage = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.imageUrl) ? '<img src="' + soy.$$escapeHtml(opt_data.imageUrl) + '" class="select-option-image" />' : '', '<span class="select-option" title="', soy.$$escapeHtml(opt_data.optionValue), '">', soy.$$escapeHtml(opt_data.optionValue), '</span>');
  return opt_sb ? '' : output.toString();
};


Confluence.CreateJiraContent.selectOptionProject = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (opt_data.imageUrl) {
    aui.avatar.avatar({avatarImageUrl: opt_data.imageUrl, isProject: true, size: 'xsmall', tagName: 'span'}, output);
  }
  output.append('<span class="select-option" title="', soy.$$escapeHtml(opt_data.optionValue), '">', soy.$$escapeHtml(opt_data.optionValue), '</span>');
  return opt_sb ? '' : output.toString();
};


Confluence.CreateJiraContent.summaryStoredValue = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="summary-stored-value"><span class="info">');
  aui.avatar.avatar({avatarImageUrl: opt_data.storedValue.projectIcon, isProject: true, size: 'xsmall', tagName: 'span'}, output);
  output.append('<span class="ellipsis project-name" title="', soy.$$escapeHtml(opt_data.storedValue.projectText), '">', soy.$$escapeHtml(opt_data.storedValue.projectText), '</span> <img class="aui-avatar-xsmall" src="', soy.$$escapeHtml(opt_data.storedValue.issueTypeIcon), '" /><span class="ellipsis issue-type" title="', soy.$$escapeHtml(opt_data.storedValue.issueTypeText), '">', soy.$$escapeHtml(opt_data.storedValue.issueTypeText), '</span></span><a href="#" title="', soy.$$escapeHtml("Edit"), '">', soy.$$escapeHtml("Edit"), '</a></div>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-jira-content:confluence-jira-content-resources', location = 'com/atlassian/confluence/plugins/createjiracontent/js/create-issue-analytics.js' */
Confluence.CreateJiraContent.Analytics=(function(k){var y="confluence.jira.content.dialog.open";var s="confluence.jira.content.create.text";var d="confluence.jira.content.create.table";var v="confluence.jira.content.error";var a="confluence.jira.content.jim.insert.fail";var t="confluence.jira.content.switch.to.table";var q="confluence.jira.content.switch.to.text";var w="confluence.jira.content.edit.description";var m="confluence.jira.content.summary.truncated";var n="confluence.jira.content.with.epic";var l="confluence.jira.content.required.fields";var g="confluence.jira.content.create.directly.in.jira";var o="confluence.jira.content.sorted.table";var z="table";function e(B,C){AJS.EventQueue=AJS.EventQueue||[];AJS.EventQueue.push({name:B,properties:C})}function c(){e(y)}function b(B){e(((B===z)?t:q))}function i(D,C){if(D===z){var B={total:C};e(d,B)}else{e(s)}}function r(){e(w)}function A(){e(n)}function j(C){var B={total:C};e(m,B)}function p(C,D){var B={type:C,reason:D};e(a,B)}function u(){e(o)}function x(C){var B={cause:C};e(v,B)}function f(){e(l)}function h(){k("#create-issue-in-jira-link").click(function(B){e(g)})}return{sendAnalyticsForDialogOpen:c,sendAnalyticsForModeChange:b,sendAnalyticsForCreatingIssue:i,sendAnalyticsForDescriptionEdited:r,sendAnalyticsForCreatedIssueWithEpic:A,sendAnalyticsForTruncatedSummary:j,sendAnalyticsForJIMInsertFailed:p,sendAnalyticsForSortedTable:u,bindAnalyticsForCreateDirectlyInJira:h,sendAnalyticsForCreateError:x,sendAnalyticsForRequiredFields:f}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-jira-content:confluence-jira-content-resources', location = 'com/atlassian/confluence/plugins/createjiracontent/js/page-helper.js' */
AJS.toInit(function(f){var g="com.atlassian.confluence.plugins.confluence-jira-content:create-JIRA-issue-summary";var c=f("div.jira-issues-created");if(c.length>0){if(window.history&&window.history.replaceState){var e=window.location.href;var d=e.substr(0,e.indexOf("JIRAIssuesCreated")-1);window.history.replaceState({},document.title,d)}var b=c.find("#jira-content-message-panel-error-warning");var a=c.find("#jira-content-message-panel-view-more-link");a.click(function(h){h.preventDefault();a.hide();b.show()});if(c.hasClass("success")){setTimeout(function(){c.hide()},10000)}}Confluence&&Confluence.HighlightAction&&Confluence.HighlightAction.registerButtonHandler(g,{onClick:function(h){if(Confluence.CreateJiraContent.FeatureDiscovery.shouldShowFeatureDiscovery()){Confluence.CreateJiraContent.Dialogs.showFeatureDiscoveryDialog(h)}else{Confluence.CreateJiraContent.Dialogs.showCreateIssueDialog(h)}},shouldDisplay:Confluence.HighlightAction.WORKING_AREA.MAINCONTENT_ONLY})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-jira-content:confluence-jira-content-resources', location = 'com/atlassian/confluence/plugins/createjiracontent/js/jira-inline-dialog.js' */
Confluence.CreateJiraContent.Dialogs=Confluence.CreateJiraContent.Dialogs||(function(e){var j=360;var g=500;var i=370;var k;var c;var d={hideDelay:null,maxHeight:g};function b(m){k&&k.remove();var l={preHideCallback:function(){var o=e(document.activeElement);var p=o.is("#jira-content-create-issue-form [data-aui-dp-uuid]")||o.is("#jira-content-create-issue-form input.select2-input.select2-focused")||o.is("#jira-content-create-issue-form .select2-focusser.select2-offscreen");return(e("#formSpinner.aui-icon.aui-icon-wait").length===0)&&(!e("#select2-drop-mask").is(":visible"))&&!p&&!e(".aui-inline-dialog .ui-datepicker-inline").is(":visible")},width:j,hideCallback:function(){Confluence.CreateJiraContent.FormHelper.bindHideEventToDialog()}};var n=function(p,o,q){Confluence.CreateJiraContent.CreateIssue.addFormContent(p,m);q();return false};k=f(m,"create-issue-dialog",l,n);Confluence.CreateJiraContent.CreateIssue.setDialogObject(k);Confluence.CreateJiraContent.Analytics.sendAnalyticsForDialogOpen()}function a(m){c&&c.remove();var l={width:i};var n=function(p,o,q){Confluence.CreateJiraContent.FeatureDiscovery.addFeatureDiscoveryContent(p,m,b);q();return false};c=f(m,"create-issue-feature-discovery-dialog",l,n);Confluence.CreateJiraContent.FeatureDiscovery.setFeatureDialogObject(c)}function f(p,r,m,q){var l=e("<div>");h(p.area.average,l);var o=m.hideCallback;m.hideCallback=function(){l.remove();o&&o()};var n=Confluence.ScrollingInlineDialog(l,r,q,e.extend({},d,m));n.show();return n}function h(m,l){Confluence.DocThemeUtils.appendAbsolutePositionedElement(l);l.css({top:m.top,height:m.height,left:m.left,width:m.width,"z-index":-9999,position:"absolute"}).addClass("confluence-jira-content-dialog-target")}return{showCreateIssueDialog:b,showFeatureDiscoveryDialog:a}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-jira-content:confluence-jira-content-resources', location = 'com/atlassian/confluence/plugins/createjiracontent/js/create-issue-form.js' */
Confluence.CreateJiraContent.CreateIssue=(function(q){var s="table";var h="text";var G=3;var r;var n;var o;var g;var C;var z;var j;var J=function(){return j};var f=function(K){j=K};var B=function(M){var K=r.find("#jira-servers option:selected").val();var L=r.find("#jira-projects option:selected").val();var N=[];n.find("> tbody > tr").each(function(O,P){q(P).find("td:eq("+M+")").each(function(U,Q){var T=q.trim(q(Q).text());if(T.length){var S=Confluence.CreateJiraContent.FormTextHelper.removeLineBreaksAndTruncate(T);var R=Confluence.CreateJiraContent.FormTextHelper.isCutLongText(T);var V=(R==true)?T:"";N.push({summary:S,description:V})}})});return N};var p=function(){var K=r.find("#text-suggestion");if(o!=null&&o.length>1){var L=Confluence.CreateJiraContent.issueFromTextSuggestedLink({numberOfIssues:o.length});K.html(L)}else{K.hide()}};var c=function(){if(z===s){var L=r.find("#create-from-table");L.empty();if(r.find("#jira-projects option:selected").val()!=-1){o=B(g);var N=0;var M=q(o);if(M.length>G){M=M.slice(0,G);N=o.length-G}var K=Confluence.CreateJiraContent.createPreviewIssuesFromTable({issues:M,numberOfRemainingIssues:N});L.html(K)}var O=r.find("#jira-issue-types option:selected").val();if(O!=-1){Confluence.CreateJiraContent.FormHelper.changeIssuesTypeIconForPreviewPanel(r.find("#jira-issue-types option:selected").val())}C.refresh()}};var i=function(){c(g);var K=r.find("#text-suggestion");var L=Confluence.CreateJiraContent.issueFromTableSuggestedLink();K.html(L)};var w=function(K){Confluence.CreateJiraContent.FormHelper.removeDisplayMessages();F(K);if(K==h){q("#create-issues-dialog-header").text("Create Issue");p();r.find("#create-from-table").hide();r.find("#create-from-text").show()}else{if(z===s){q("#create-issues-dialog-header").text("Create Issues");i();r.find("#create-from-text").hide();r.find("#create-from-table").show()}}AJS.trigger("confluence-jira-content.form-updated")};var I=function(){r.on("click","#text-suggested-link, #table-suggested-link",function(M){var L=q(this);var N=(L.attr("id")==="text-suggested-link");var K=(N)?s:h;w(K);M.preventDefault();return false})};var t=function(){var N=[];var L=r.find("#issue-summary");var K=r.find("#issue-description");var M={summary:q.trim(L.val()),description:q.trim(K.val())};N.push(M);return N};var x=function(){if(Confluence.CreateJiraContent.FormHelper.validateCreateIssueForm()){var K=t();Confluence.CreateJiraContent.FormHelper.createIssues(K,D)}};var k=function(K){var L=[];n.find("td:nth-child("+(K+1)+")").each(function(O,M){var N=q.trim(q(M).text());if(N.length>0){L.push(O)}});return L};var b=function(){if(Confluence.CreateJiraContent.FormHelper.validateCreateIssueForm()){var K=k(g);Confluence.CreateJiraContent.FormHelper.createIssues(o,D,g,K)}};var H=function(){r.submit(function(){if(z===h){x()}else{b()}return false})};var l=function(){return h};var F=function(K){z=K};var m=function(){return n.find("> thead > tr > th.tablesorter-headerSortUp, > thead > tr > th.tablesorter-headerSortDown,> thead > tr > th.tablesorter-headerAscDesc, > thead > tr > th.tablesorter-headerAsc").length>0};var e=function(){if(m()){var K=aui.message.warning({content:"You are creating issues on the sorted table. These ones could not be appended to the page."});r.children("#prepare-issue-messages").html(K);Confluence.CreateJiraContent.Analytics.sendAnalyticsForSortedTable()}};var a=function(){n=q(j.containingElement).closest("table");if(n.length>0){return true}return false};var d=function(K){C=K};var y=function(){return C};var u=function(L){var K=L.find(".create-issue-cancel");K.on("click",function(M){C.isCancelButtonClicked=true;C.hide();M.preventDefault()})};var A=function(){g=q(j.containingElement).closest("td").index();if(g==-1&&j.range.startContainer){var K=q(j.range.startContainer);g=K.closest("td").index()}if(g==-1){g=0}o=B(g)};var v=function(){var L=Confluence.CreateJiraContent.FormTextHelper.trunc(j.text);var M=Confluence.CreateJiraContent.FormTextHelper.isCutLongText(L);var K=Confluence.CreateJiraContent.createIssueDialog({summary:L,isCutLongText:M,comment:j.text});return K};var E=function(){return z===h};var D={addFormContent:function(M,L){f(L);var K=v();M.html(K);r=M.find("#jira-content-create-issue-form");F(l());o=null;if(a()){A()}if(o==null||o.length==1){M.find("#text-suggestion").remove()}else{I()}w(z);Confluence.CreateJiraContent.FormHelper.init(r);H();u(r);e()},setDialogObject:d,getDialogObject:y,getSelectionObject:J,fillPreviewIssuesFromTable:c,isInSortedTable:m,isInTextMode:E};return D})(AJS.$);Confluence.CreateJiraContent.FormTextHelper=(function(){var a=255;var b="\u2026";return{trunc:function(c){return c.length<=a?c:c.substr(0,a-1)+b},isCutLongText:function(c){if(c.length>=a){return true}return false},removeLineBreaksAndTruncate:function(c){var d=c.replace(/\n|\r|\r\n/g," ");return this.trunc(d)}}})();
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-jira-content:confluence-jira-content-resources', location = 'com/atlassian/confluence/plugins/createjiracontent/js/jira-form-helper.js' */
Confluence.CreateJiraContent.FormHelper=(function(ax,Q){var aM="-1",aQ="loading",j="select",A="Select project",aF="Select issue type",a="Loading\u2026",s="aui-bottom-arrow-color";var ah=null;var h=null;var C=false;var v=["project","issuetype","summary","reporter"];var J;var O;var M;var aK;var aI,Z;var aG=Confluence.storageManager("jira-content");var b;var e;var ab=function(aR){O={$serverSelect:aR.find("#jira-servers"),$projectSelect:aR.find("#jira-projects"),$issueTypeSelect:aR.find("#jira-issue-types"),$projectSpinner:aR.find("#projectSpinner"),$hiddenItems:aR.children().not(".dialog-header, #jiraserver-issue-messages"),$requiredFieldsPanel:aR.find("#jira-required-fields-panel"),$summaryField:aR.find("#issue-summary"),$descriptionField:aR.find("#issue-description"),$jiraEpicContent:aR.find("#jira-epic-content")};M=aR;aK="Story,New Feature".toLowerCase();aK=aK.split(",");E(O.$issueTypeSelect);J=Confluence.CreateJiraContent.JiraIssue.FieldStatus.VISIBLE};var ap="savedFormValues";var aA=function(){if(ax.browser.msie){M.find("input, textarea").keydown(function(aR){if(aR.keyCode==27){return false}})}};var aJ=function(aS,aT){var aR=aui.form.optionOrOptgroup({value:aM,text:aT?aT:j});aS.html(aR);aS.auiSelect2("val",aM)};var S=function(){var aR=O.$projectSelect;aR.auiSelect2("enable",false);var aS=aui.form.optionOrOptgroup({value:aM,text:a});aR.html(aS);aR.auiSelect2("val",a)};var z=function(){O.$projectSelect.auiSelect2("enable",true)};var aB=function(aR){aJ(aR)};var u=function(aS,aT){var aR={escapeMarkup:function(aU){return aU},formatResult:k,formatSelection:k};aS.auiSelect2(ax.extend(aR,aT))};var ai=function(aT){var aR=O.$serverSelect;var aS=[];ax.each(aT,function(aV,aW){var aU=aui.form.optionOrOptgroup({value:aW.id,text:aW.name});aS.push(aU)});aR.append(aS.join(""));if(aT.length==1){aR.hide()}else{u(O.$serverSelect,{containerCssClass:"select-container select-server-container",dropdownCssClass:"server-dropdown",width:"180px",minimumResultsForSearch:-1})}if(b){F(X(aR,b.serverId))}else{F(false)}};var au=function(){return Confluence.CreateJiraContent.DataHelper.loadServers().done(function(aR){if(aR.length){ai(aR)}else{T("Don\'t have any JIRA server, please check the application link configuration.")}})};var G=function(aS){var aR=O.$projectSelect;aJ(aR,A);var aT=[];ax.each(aS,function(aV,aW){var aU=aui.form.optionOrOptgroup({value:aW.id,text:aW.name});aT.push(aU)});aR.append(aT.join(""))};var ag=function(aR,aS,aT){I(aR);G(aS);z();aT();AJS.trigger("confluence-jira-content.form-updated")};var p=function(){var aT=g();var aS=aj(aT);if(aS){var aR=function(){if(b&&b.serverId==aT.id){var aU=X(O.$projectSelect,b.projectId);F(aU);if(aU){x();U()}}else{F(false);E(O.$issueTypeSelect)}};if(aT&&aT.authUrl){H(401)}else{S();return Confluence.CreateJiraContent.DataHelper.loadProjects(aT.id).done(function(aU){if(aU.errors&&aU.errors.length){var aV=aU.errors[0];if(aV.authenticationUri){H(401)}else{T(aV.message)}aB(O.$projectSelect);z()}else{H(200,aU);ag(aT.id,aU,aR)}}).fail(function(aU){H(aU.status);aB(O.$projectSelect);z()})}}};var am=function(aS){for(var aR=0;aR<aK.length;aR++){if(aK[aR]==aS.toLowerCase()){return true}}return false};var E=function(aR){aR.auiSelect2("enable",false);aJ(aR,aF);aR.prev().find("a").removeAttr("tabindex")};var aE=function(aR){aR.auiSelect2("enable",true);aR.prev().find("a").attr("tabindex","0")};var x=function(){var aR=O.$projectSelect.val();var aS=O.$issueTypeSelect;if(aR&&aR!=aM){aE(aS);at(aS);if(b){F(X(aS,b.issueTypeId))}else{F(false)}}else{E(aS)}};var K=function(){return Confluence.CreateJiraContent.DataHelper.getIssueTypes(O.$serverSelect.val(),O.$projectSelect.val())};var at=function(aT){var aS=null;var aR=[];var aU=K();ax.each(aU,function(aX,aV){if(!aS&&am(aV.name)){aS=aV.id}var aW=aui.form.optionOrOptgroup({value:aV.id,text:aV.name});aR.push(aW)});aT.html(aR.join(""));aT.auiSelect2("val",aS);if(Q.isEmpty(aU)){aJ(aT,aF)}};var N=function(aR){m(false);M.find("#form-message-spinner").addClass("aui-icon aui-icon-wait");M.find("#form-message").text(aR)};var n=function(){M.find("#form-message-spinner").removeClass("aui-icon aui-icon-wait");M.find("#form-message").empty()};var q=function(){O.$summaryField.parent().show();M.find("#create-issue-form-messages").empty().addClass("hidden");M.find("#issue-content, #jira-epic-content").removeClass("hidden");aw()};var o=function(){if(J===Confluence.CreateJiraContent.JiraIssue.FieldStatus.HIDDEN){O.$descriptionField.parent().hide()}else{if(!C){if(J===Confluence.CreateJiraContent.JiraIssue.FieldStatus.REQUIRED){O.$descriptionField.siblings("label").children("span").show()}else{O.$descriptionField.siblings("label").children("span").hide()}O.$descriptionField.parent().show()}}aw()};var al=function(aS){C=true;var aR=M.find("#create-issue-form-messages");var aT=Confluence.CreateJiraContent.renderUnsupportedFieldsWarningMessage({unsupportedFields:Q.map(aS,function(aU){return aU.name}),projectLinkUrl:i()});AJS.messages.warning(aR,{body:aT,closeable:false});Confluence.CreateJiraContent.Analytics.sendAnalyticsForRequiredFields();Confluence.CreateJiraContent.Analytics.bindAnalyticsForCreateDirectlyInJira();O.$summaryField.parent().hide();O.$descriptionField.parent().hide();aR.removeClass("hidden");aw()};var af=function(aR){jiraIntegration.fields.renderCreateRequiredFields(O.$requiredFieldsPanel,null,{serverId:O.$serverSelect.val(),projectKey:ay().key,issueType:O.$issueTypeSelect.val()},{requiredFields:aR},Q.bind(al,this));h=O.$requiredFieldsPanel.find(".jira-field").children("input,select,textarea");t()};var U=function(){q();h=null;C=false;O.$requiredFieldsPanel.empty();if(O.$projectSelect.val()!==aM){var aS=function(aT){J=aT.descriptionFieldStatus;if(!Q.isEmpty(aT.requiredFields)){af(aT.requiredFields)}aC(aT.epicField);n();AJS.trigger("confluence-jira-content.form-updated")};var aR=function(aT){n()};N("Checking for required fields\u2026");Confluence.CreateJiraContent.JiraIssue.getCreateIssueMeta(ad(),aS,aR);aw()}else{aC()}};var aC=function(aR){ax.when(aI,Z).done(function(){var aS=ah&&!C&&((O.$projectSelect.val()===aM)||(aR&&ah!==O.$issueTypeSelect.val()));O.$jiraEpicContent.toggle(aS?true:false)})};var aj=function(aR){if(!aR.supportedVersion){O.$hiddenItems.addClass("hidden");T(AJS.format("The version of selected JIRA server is not supported. You may want to upgrade to the newer version or \u003ca href=\"{0}\" target=\"_blank\"\u003ecreate issue in JIRA\u003c/a\u003e.",aR.url))}else{O.$hiddenItems.removeClass("hidden")}if(M.find("#text-suggestion").length){ax("#inline-dialog-create-issue-dialog > #arrow-create-issue-dialog").addClass(s)}aw();return aR.supportedVersion};var az=function(){O.$serverSelect.change(function(aT){ax("#jiraserver-issue-messages").empty();var aS=Confluence.CreateJiraContent.DataHelper.getServerById(aT.val);var aR=aj(aS);if(aR){O.$jiraEpicContent.empty();O.$hiddenItems.removeClass("hidden");F(false);b=W();ax.when(p()).done(function(){if(!b){E(O.$issueTypeSelect);ak(M.find("#jira-issue-types option:selected").val())}O.$projectSelect.change()})}});O.$projectSelect.change(function(aS){var aR=O.$projectSelect.val();if(b&&aR!=b.projectId){b=false}x();Confluence.CreateJiraContent.CreateIssue.fillPreviewIssuesFromTable();ak(M.find("#jira-issue-types option:selected").val());AJS.trigger("confluence-jira-content.form-updated");U()});O.$issueTypeSelect.change(function(aR){ak(aR.val);AJS.trigger("confluence-jira-content.form-updated");U()});M.on("keyup",O.$summaryField,function(aR){AJS.trigger("confluence-jira-content.form-updated")});M.on("keyup",O.$descriptionField,function(aR){AJS.trigger("confluence-jira-content.form-updated")});if(!Confluence.CreateJiraContent.CreateIssue.getDialogObject()){AJS.bind("confluence-jira-content.form-updated",function(){m(R());o()});AJS.bind("confluence-jira-content.form-switched",function(){o()})}ax("#jira-content-create-issue-form .dialog-content").on("click",".summary-stored-value a",function(){F(false);b=false;return false});aA()};var t=function(){h.on("change",function(aS){AJS.trigger("confluence-jira-content.form-updated")});if(AJS.version<="5.4.5"){var aR=M.find("input[data-aui-dp-uuid]");aR.each(function(aS,aT){var aV=ax(aT),aU=aV.attr("data-aui-dp-uuid");aV.on("click",function(){var aW=ax("[data-aui-dp-popup-uuid="+aU+"]");var aX=aW.datepicker("option","onSelect");aW.datepicker("option","onSelect",function(aZ,aY){aX(aZ,aY);aV.change()});aW.parents(".aui-inline-dialog").addClass("datepicker-patch")})})}};var m=function(aR){if(aR){ax(".create-issue-submit").removeAttr("disabled")}else{ax(".create-issue-submit").attr("disabled","disabled")}};var R=function(){var aT=function(aU,aV){return(ax.trim(aU.val())!==aV)};var aS=function(){var aU="placeholder" in document.createElement("input");return Q.find(h,function(aY){var aV=ax(aY),aW=ax.trim(aV.val());if(aU){return !aW}else{var aX=aV.attr("placeholder");return(!aW||aW==aX)}})};var aR=aT(O.$projectSelect,aM)&&aT(O.$issueTypeSelect,aM)&&!C&&!aS();if(Confluence.CreateJiraContent.CreateIssue.isInTextMode()&&aR){aR=aT(O.$summaryField,"");if(J===Confluence.CreateJiraContent.JiraIssue.FieldStatus.REQUIRED){aR=aT(O.$descriptionField,"")}}return aR};var ak=function(aS){if(aS!=-1){var aT=K();var aU=Q.find(aT,function(aV){return aV.id===aS});if(aU){var aR=aU.iconUrl;M.find(".issue-container img").attr("src",aR)}}};var ao=function(){ax("#create-issue-messages",M).empty()};var av=function(){ax("#form-spinner",M).addClass("aui-icon aui-icon-wait");ax(".create-issue-cancel",M).addClass("hidden");ax("input,select,textarea,submit",M).disable()};var Y=function(){return O.$projectSelect.val()};var r=function(aT){var aR={fields:{project:{id:Y()},issuetype:{id:O.$issueTypeSelect.val()}}};if(h){h.each(function(aX,aW){var aY=ax(aW);aR.fields[aY.attr("name")]=jiraIntegration.fields.getJSON(aY)})}var aS={issues:[]};var aV=0;var aU=0;ax.each(aT,function(aY,aW){if(Confluence.CreateJiraContent.FormTextHelper.isCutLongText(aW.summary)){aV++}else{if(!aW.description){aU++}}var aX=Q.clone(aR);aX.fields=Q.extend({},aX.fields,aW);if(J===Confluence.CreateJiraContent.JiraIssue.FieldStatus.REQUIRED&&aW.description.length==0){aX.fields.description=aW.summary}if(J===Confluence.CreateJiraContent.JiraIssue.FieldStatus.HIDDEN){delete aX.fields.description}aS.issues.push(aX)});if(aV>0){Confluence.CreateJiraContent.Analytics.sendAnalyticsForTruncatedSummary(aV)}if(aU>0){Confluence.CreateJiraContent.Analytics.sendAnalyticsForDescriptionEdited()}return JSON.stringify(aS)};var aN=function(aS,aR){var aT=[];if(aS){ax.each(aS,function(aV,aW){var aU=AJS.format("Can not create issue for row {0} with error: {1}",(aR[aW.failedElementNumber]+1),D(aW));aT.push(aU)})}return aT};var an=function(){Confluence.CreateJiraContent.DataHelper.clearProjects(O.$serverSelect.val())};var aP=function(){O.$hiddenItems.addClass("hidden");var aS=g();if(aS.authUrl){var aR=function(){an();O.$hiddenItems.removeClass("hidden");ax("#jiraserver-issue-messages").empty();O.$jiraEpicContent.empty();p()};aq(aR)}else{T("JIRA server configuration could be changed. You may try to refresh the page to update latest configuration.")}};var H=function(aR,aS){if(aR==200&&aS&&aS.length===0){an();O.$hiddenItems.addClass("hidden");T(AJS.format("You do not have permission to access any projects in {0}",AJS.escapeHtml(g().name)))}else{switch(aR){case 401:aP();break;case 404:case 500:case 504:O.$hiddenItems.addClass("hidden");T("Cannot connect to this JIRA server at this time.");break;default:O.$hiddenItems.removeClass("hidden")}}aw()};var ad=function(){return{serverId:O.$serverSelect.val(),projectId:O.$projectSelect.val(),issueTypeId:O.$issueTypeSelect.val(),defaultRequiredFields:v}};var ar=function(aU,aV,aT,aS){var aR=ax("#epic-link > .checkbox");if(aR.is(":checked")&&aR.is(":visible")){Confluence.CreateJiraContent.Analytics.sendAnalyticsForCreatedIssueWithEpic();Confluence.CreateJiraContent.JiraIssue.getCreateIssueMeta(ad(),function(aX){if(aX.epicField){var aW=aR.val();ax.each(aU,function(aZ,aY){aY[aX.epicField]=aW})}w(aU,aV,aT,aS)})}else{w(aU,aV,aT,aS)}};var D=function(aU){var aV=Q.values(aU.elementErrors.errors);var aS=Q.keys(aU.elementErrors.errors);var aR=ad();for(var aT=0;aT<aS.length;aT++){var aX=Confluence.CreateJiraContent.JiraIssue.getFieldName(aS[aT],aR);if(aX&&aV[aT].indexOf(aX)==-1){aV[aT]=aX+": "+aV[aT]}}var aW=Q.union(Q.values(aU.elementErrors.errorMessages),aV);aW=aW.join(", ");aW=aW.replace(".,",",");return aW};var w=function(aT,aV,aS,aR){ao();av();var aU=Confluence.getContextPath()+"/rest/jira-integration/1.0/issues";ax.ajax({type:"POST",contentType:"application/json",url:aU+"?applicationId="+O.$serverSelect.val(),data:r(aT),timeout:3*60*1000,success:function(aW){if(aS!=undefined){aO(aW,aV,aS,aR)}else{if(!aW.errors){ac(aW.issues[0],aV)}else{Confluence.CreateJiraContent.Analytics.sendAnalyticsForCreateError("rest");V([],false,[D(aW.errors[0])])}}},error:function(aZ){var aY=[];var aX=[];if(aZ.status==500){try{aX=JSON.parse(aZ.responseText);if(aX instanceof Array){ax.each(aX[0].errors,function(a1,a0){aY.push(a0)})}else{aY.push(aX)}}catch(aW){aX=[];aY.push("Parse error:"+aW.message)}}else{aY.push("Unable to create JIRA issues, please check the application link configuration.")}Confluence.CreateJiraContent.Analytics.sendAnalyticsForCreateError("xhr");V(aX,false,aY)}})};var ac=function(aR,aT){if(aT.isInSortedTable()&&aT.getSelectionObject().searchText.numMatches!=1){V([aR],false,[]);return}var aS=Confluence.HighlightAction.createInsertionBean([{xmlInsertion:B(aR)}],aT.getSelectionObject().searchText);Confluence.CreateJiraContent.Analytics.sendAnalyticsForCreatingIssue("text");Confluence.HighlightAction.insertContentAtSelectionEnd(aS).done(function(aU){if(!aU){Confluence.CreateJiraContent.Analytics.sendAnalyticsForJIMInsertFailed("text","algorithm")}V([aR],aU,[])}).fail(function(aU){Confluence.CreateJiraContent.Analytics.sendAnalyticsForJIMInsertFailed("text","server");V([aR],false,[],aU.statusText)})};var B=function(aR){var aT=g();var aS=Confluence.CreateJiraContent.issueMacroXml({showSummary:false,serverName:aT.name,serverId:aT.id,issueKey:aR.issue.key});return aS};var aa=function(aT){if(aT.formObject.isInSortedTable()){V(aT.createdIssues,false,aT.errorMessages);return}var aS=[];ax.each(aT.createdIssues,function(aU,aV){var aW={};aW.rowIndex=aT.createdIssueRowIndexes[aU];aW.xmlInsertion=B(aV);aS.push(aW)});var aR=Confluence.HighlightAction.createTableInsertionBean(aS,aT.tableColumnIndex,aT.formObject.getSelectionObject().searchText);Confluence.CreateJiraContent.Analytics.sendAnalyticsForCreatingIssue("table",aT.createdIssues.length);Confluence.HighlightAction.insertContentsInTableColumnCells(aR).done(function(aU){if(!aU){Confluence.CreateJiraContent.Analytics.sendAnalyticsForJIMInsertFailed("table","algorithm")}V(aT.createdIssues,aU,aT.errorMessages)}).fail(function(aU){Confluence.CreateJiraContent.Analytics.sendAnalyticsForJIMInsertFailed("table","server");V(aT.createdIssues,false,aT.errorMessages,aU.statusText)})};var V=function(aV,aT,aZ,aW){var aS=g().url;if(aV.length==1){aS+="/browse/"+aV[0].issue.key}else{var aU="key in (";aU+=ax.map(aV,function(a0){return a0.issue.key}).join(",");aU+=")";aS+="/issues/?jql="+encodeURIComponent(aU)}var aY=window.location.href.split("#")[0];var aX=aY.indexOf("JIRAIssuesCreated");if(aX>0){aY=aY.substring(0,aX-1)}var aR=aY+(aY.indexOf("?")>0?"&":"?")+"JIRAIssuesCreated=true&numOfIssues="+aV.length+"&issuesURL="+encodeURIComponent(aS)+"&addedToPage="+aT;if(aV.length>0){aR+="&issueId="+encodeURIComponent(aV[0].issue.key)}if(aW!=undefined){aR+="&statusText="+aW}ax.each(aZ,function(a0,a1){aR+="&errorMessages="+a1});ax("#form-spinner").removeClass("aui-icon aui-icon-wait");Confluence.CreateJiraContent.CreateIssue.getDialogObject().hide();window.location.replace(aR)};var aO=function(aU,aW,aS,aT){var aR=[];ax.each(aU.issues,function(aY,aX){aR.push(aT[aX.elementNumber])});var aV=aN(aU.errors,aT);if(aU.issues.length){aa({createdIssues:aU.issues,createdIssueRowIndexes:aR,tableColumnIndex:aS,formObject:aW,errorMessages:aV})}else{if(aU.errors.length){V([],false,aV)}}};var k=function(aR){return Confluence.CreateJiraContent.selectOption({optionValue:aR.text})};var f=function(aR){var aS;if(aR){if(aR.id>=0){aS=Confluence.CreateJiraContent.DataHelper.getIssueTypeIconUrl(O.$serverSelect.val(),O.$projectSelect.val(),aR.id)}return Confluence.CreateJiraContent.selectOptionWithImage({optionValue:aR.text,imageUrl:aS})}};var L=function(aR){var aS;if(aR){if(aR.id>=0){aS=Confluence.CreateJiraContent.DataHelper.getProjectIconUrl(O.$serverSelect.val(),aR.id)}return Confluence.CreateJiraContent.selectOptionProject({optionValue:aR.text,imageUrl:aS})}};var g=function(){return Confluence.CreateJiraContent.DataHelper.getServerById(O.$serverSelect.val())};var ay=function(){var aS=O.$serverSelect.val();var aR=O.$projectSelect.val();var aT=Confluence.CreateJiraContent.DataHelper.getProjects(aS);return Q.find(aT,function(aU){return aU.id===aR})};var i=function(){var aT=g().url+"/secure/CreateIssueDetails!Init.jspa?pid="+ay().id+"&issuetype="+O.$issueTypeSelect.val();var aS=O.$summaryField.val();if(aS.length){aT=aT+"&summary="+encodeURIComponent(aS)}if(J!==Confluence.CreateJiraContent.JiraIssue.FieldStatus.HIDDEN){var aR=O.$descriptionField.val();if(aR.length){aT=aT+"&description="+encodeURIComponent(aR)}}return aT};var T=function(aR){AJS.messages.warning(ax("#jiraserver-issue-messages"),{body:aR,closeable:false});if(!M.find("#text-suggestion").is(":visible")){ax("#inline-dialog-create-issue-dialog > #arrow-create-issue-dialog").removeClass(s)}};var aq=function(aR){var aT=g();var aS={onSuccess:function(){aT.authUrl=null;aR()},onFailure:function(){}};T(Confluence.CreateJiraContent.getOAuthMessage({confluenceApplicationName:"Confluence"}));ax(".oauth-init",ax("#jiraserver-issue-messages")).click(function(aU){AppLinks.authenticateRemoteCredentials(aT.authUrl,aS.onSuccess,aS.onFailure);aU.preventDefault()})};var P=function(){O.$serverSelect.auiSelect2("close");O.$projectSelect.auiSelect2("close");O.$issueTypeSelect.auiSelect2("close");if(Confluence.CreateJiraContent.CreateIssue.getDialogObject().isCancelButtonClicked!==true){aH(ad())}};var aH=function(aR){if(aR.serverId&&aR.projectId&&aR.issueTypeId){aG.setItem(ap,JSON.stringify(aR))}};var W=function(aS){try{aS=aS||ap;var aR=JSON.parse(aG.getItem(aS));if(aR&&aR.serverId&&aR.projectId&&aR.issueTypeId){return aR}else{return false}}catch(aT){return false}};var F=function(aX){var aW=M.find(".dialog-content > .main-field"),aS=M.find(".dialog-content .summary-stored-value");if(aX){var aV=O.$projectSelect.val();var aR=O.$issueTypeSelect.val();if(aV!=-1&&aV!=null&&aR!=-1&&aR!=-1){var aU=y();if(aU){aS.remove();var aT=Confluence.CreateJiraContent.summaryStoredValue({storedValue:aU});ax(aT).insertBefore(M.find("#issue-content"));aW.addClass("hidden")}}}else{aW.removeClass("hidden");aS.addClass("hidden")}aw()};var y=function(){var aR=O.$projectSelect,aU=O.$issueTypeSelect;var aV=aR.auiSelect2("data").text,aT=aU.auiSelect2("data").text;var aW=aR.auiSelect2("container").find(".select2-chosen img"),aS=aU.auiSelect2("container").find(".select2-chosen img");if(aV&&aT&&aW&&aS){return{projectText:aV,issueTypeText:aT,projectIcon:aW.attr("src"),issueTypeIcon:aS.attr("src")}}else{return null}};var ae=function(aR,aS){return(aR.find('option[value="'+aS+'"]').length)};var X=function(aR,aS){if(ae(aR,aS)){aR.auiSelect2("val",aS);return true}else{b=false;return false}};var I=function(aR){var aT=function(aU){ah=aU;aD(aR)};var aS=function(){ah=(aR===g().id)?null:ah};Confluence.CreateJiraContent.JiraIssue.resolveEpicIssueType(aR,aT,aS)};var aD=function(aR){if(Z&&Z.readyState!==4&&Z.abort){Z.abort()}var aS=O.$jiraEpicContent;Z=ax.ajax({type:"GET",timeout:0,contentType:"application/json",url:AJS.Confluence.getContextPath()+"/rest/createjiracontent/1.0/find-epic-issue",data:{pageId:AJS.params.pageId,serverId:aR,epicIssueTypeId:ah},success:function(aU){if(!aU||!aU.epicKey){aS.empty();return}var aV=Confluence.CreateJiraContent.renderEpicContent({epicKey:aU.epicKey,epicHtmlPlaceHolder:aU.epicHtmlPlaceHolder});aS.html(aV);e=aS.find(".summary").text();var aT=aS.find("a:first-child").clone();aS.find(".jira-issue").html(aT);c(aS);aw()},error:function(aT){aS.empty();AJS.logError("confluence-jira-content:epicLinkJiraIssuePageHandling - Error when detect epic on page with status="+aT.status)}})};var c=function(aR){aR.find(".jira-issue").attr("title",e).tooltip({gravity:"sw"})};var d=function(){M.find("#create-issue-loading").remove()};var aL=function(){d();var aR=O.$serverSelect.val();if(aR){M.find("#jira-servers, .dialog-content, #prepare-issue-messages, .buttons-group, #text-suggestion").removeClass("hidden");O.$jiraEpicContent.empty();p()}};var l=function(){d();T("Unable to get a list of linked JIRA servers from Confluence. You may want to check your application links for more details.")};var aw=function(){if(Confluence.CreateJiraContent.CreateIssue.getDialogObject()){Confluence.CreateJiraContent.CreateIssue.getDialogObject().refresh()}};return{init:function(aR){ab(aR);u(O.$projectSelect,{containerCssClass:"select-container select-project-container",dropdownCssClass:"projects-dropdown",formatSelection:L,formatResult:L});u(O.$issueTypeSelect,{containerCssClass:"select-container select-issuetype-container",dropdownCssClass:"issue-types-dropdown",minimumResultsForSearch:-1,formatSelection:f,formatResult:f});m(false);E(O.$issueTypeSelect);b=W(ap);az();F(b!==false);au().pipe(aL,l)},createIssues:ar,validateCreateIssueForm:R,removeDisplayMessages:ao,bindHideEventToDialog:P,changeIssuesTypeIconForPreviewPanel:ak}})(AJS.$,window._);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-jira-content:confluence-jira-content-resources', location = 'com/atlassian/confluence/plugins/createjiracontent/js/jiraissue-field-helper.js' */
Confluence.CreateJiraContent.JiraIssue=(function(f,m){var c="com.pyxis.greenhopper.jira:gh-epic-link";var p="/rest/greenhopper/1.0/api/epicproperties";var j="JIRA_EPIC_ISSUE_TYPE_";var l="CREATE_JIRA_ISSUE_FIELD_";var d,b;var i=function(q,r){if(d&&d.readyState!==4&&d.abort){d.abort()}if(!q.serverId||!q.projectId||!q.issueTypeId){AJS.logError(AJS.format("confluence-jira-content:discoverIssueTypeField - Error with parameters: serverId={0}, projectId={1}, issueTypeId={2}",q.serverId,q.projectId,q.issueTypeId));r&&r("Discover fields - error with parameters.");return}d=AJS.$.ajax({type:"GET",timeout:0,url:Confluence.getContextPath()+"/rest/jira-integration/1.0/servers/"+q.serverId+"/projects/"+q.projectId+"/issue-types/"+q.issueTypeId+"/fields-meta"}).pipe(function(s){if(!s||!s.fields){AJS.logError("confluence-jira-content:discoverIssueTypeField - Data discovering error! Unexpected data return.");r&&r("Discover fields - unexpected data return.");return}return s.fields});return d};var h=function(q,t,s){if(!q){AJS.logError(AJS.format("confluence-jira-content:resolveEpicIssueType - Error with parameters: serverId={0}",q));return}var r=j+q;if(Confluence.CreateJiraContent.JiraIssue.Cache.containKey(r)){t(Confluence.CreateJiraContent.JiraIssue.Cache.get(r));return}if(b&&b.readyState!==4&&b.abort){b.abort()}b=AppLinks.makeRequest({appId:q,type:"GET",url:p,dataType:"json",success:function(v){if(!v||!v.epicTypeId){AJS.logError("confluence-jira-content:resolveEpicIssueType - Data discovering error! Unexpected data return.");return}var u=v.epicTypeId;t(u);Confluence.CreateJiraContent.JiraIssue.Cache.put(r,u)},error:function(u){s(u.status);AJS.logError("confluence-jira-content:resolveEpicIssueType - Error with status="+u.status)}})};var o=function(r,q,s){var t=e(r);if(Confluence.CreateJiraContent.JiraIssue.Cache.containKey(t)){n(t,q,s);return}i(r,s).done(function(u){if(u){var v=AJS.$.extend({},a(u),k(u,r.defaultRequiredFields));Confluence.CreateJiraContent.JiraIssue.Cache.put(t,v);q(v)}}).fail(function(u){AJS.logError("confluence-jira-content:discoverIssueTypeField - Error with status="+u.status);s&&s(AJS.format("Discover fields - response error: {0}.",u.status))})};var n=function(t,r,s){var q=Confluence.CreateJiraContent.JiraIssue.Cache.get(t);if(q){r(q)}else{s&&s("Discover fields - unexpected data return.")}};var a=function(r){var q;m.find(r,function(t,s){if(t.schema.custom===c){q=s;return true}});return{epicField:q}};var k=function(q,s){var r=Confluence.CreateJiraContent.JiraIssue.FieldStatus.HIDDEN;var t={};f.each(q,function(u,v){if(u==="description"){r=(v.required==true?Confluence.CreateJiraContent.JiraIssue.FieldStatus.REQUIRED:Confluence.CreateJiraContent.JiraIssue.FieldStatus.VISIBLE)}else{if(v.required===true&&!v.hasDefaultValue&&!m.contains(s,u)){t[u]=v}}});return{descriptionFieldStatus:r,requiredFields:t}};var g=function(r,s){var t=e(s);if(Confluence.CreateJiraContent.JiraIssue.Cache.containKey(t)){var q=Confluence.CreateJiraContent.JiraIssue.Cache.get(t).requiredFields;return q[r].name}return""};var e=function(q){return l+q.serverId+"_"+q.projectId+"_"+q.issueTypeId};return{resolveEpicIssueType:h,getCreateIssueMeta:o,getFieldName:g}})(AJS.$,window._);Confluence.CreateJiraContent.JiraIssue.Cache=(function(){return{put:function(a,b){sessionStorage.setItem(a,JSON.stringify(b))},get:function(a){var b=sessionStorage.getItem(a);if(b){try{var d=JSON.parse(b)}catch(c){return null}return d}return null},containKey:function(a){return sessionStorage.getItem(a)!=null}}})();Confluence.CreateJiraContent.JiraIssue.FieldStatus={HIDDEN:-1,VISIBLE:0,REQUIRED:1};
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-jira-content:confluence-jira-content-resources', location = 'com/atlassian/confluence/plugins/createjiracontent/js/jiraissue-data-helper.js' */
Confluence.CreateJiraContent.DataHelper=(function(e,m){var c;var l={},p=AJS.contextPath()+"/plugins/servlet/jira-integration/icons?serverId={0}&iconType={1}&{2}",i={};var h=function(r,q){return e.ajax({dataType:"json",timeout:0,url:r,success:q})};function o(){return h(AJS.Confluence.getContextPath()+"/rest/createjiracontent/1.0/get-jira-servers",function(q){if(q.length){e.each(q,function(r,s){l[s.id]=s})}})}function n(q){var r=(l[q])?l[q].projects:undefined;if(r){return e.Deferred().resolve(r)}else{if(c&&c.readyState!==4&&c.abort){c.abort()}c=h(AJS.contextPath()+"/rest/jira-integration/1.0/servers/"+q+"/projects",function(s){if(s.length){e.each(s,function(v,x){var w=m.filter(x.issuetypes,function(y){return !y.subtask});x.issueTypes=w;var u={};m.each(w,function(y){u[y.id]=y.iconUrl});var t={iconUrl:AJS.format(p,q,"project",x.avatarUrls["16x16"].split("/secure/projectavatar?")[1]),issueTypeIcons:u};i[a(q,x.id)]=t});l[q].projects=s}});return c}}function g(r,q){var s=m.find(k(r),function(t){return t.id===q});return s?s.issueTypes:[]}function f(q){return l[q]?l[q]:{}}function k(q){return(l[q]&&l[q].projects)?l[q].projects:[]}function d(q){l[q]&&delete l[q].projects}function j(r,q){var s=a(r,q);return i[s]?i[s].iconUrl:""}function b(s,r,t){var u=a(s,r);var q=i[u];return(q&&q.issueTypeIcons[t])?q.issueTypeIcons[t]:""}function a(r,q){return r+"-"+q}return{loadServers:o,loadProjects:n,getProjects:k,getIssueTypes:g,getServerById:f,getProjectIconUrl:j,getIssueTypeIconUrl:b,clearProjects:d}})(AJS.$,window._);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-jira-content:confluence-jira-content-resources', location = 'com/atlassian/confluence/plugins/createjiracontent/soy/feature-discovery-templates.soy' */
// This file was automatically generated from feature-discovery-templates.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.CreateJiraContent == 'undefined') { Confluence.CreateJiraContent = {}; }
if (typeof Confluence.CreateJiraContent.Templates == 'undefined') { Confluence.CreateJiraContent.Templates = {}; }
if (typeof Confluence.CreateJiraContent.Templates.FeatureDiscovery == 'undefined') { Confluence.CreateJiraContent.Templates.FeatureDiscovery = {}; }


Confluence.CreateJiraContent.Templates.FeatureDiscovery.createFeatureDiscoveryContent = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div id="create-issue-feature-discovery-content"><div class="feature-discovery-header"><h2>', soy.$$escapeHtml("Create JIRA issues from content"), '</h2></div><div class="feature-discovery-body"><p>', soy.$$escapeHtml("Highlight requirements, ideas or tasks discussed in pages and transition them to your team\x27s backlog in JIRA."), '</p><div class="feature-discovery-body-image"></div><div class="description"><p class="feature-discovery-body-left">', soy.$$escapeHtml("Select requirements on the page"), '</p><p class="feature-discovery-body-right">', soy.$$escapeHtml("Turn them into new stories in JIRA"), '</p></div></div><div class="feature-discovery-buttons"><button id="show-create-issue" class="aui-button">', soy.$$escapeHtml("Show me"), '</button><button id="feature-discovery-close" class="aui-button aui-button-link">', soy.$$escapeHtml("Close"), '</button></div><div>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-jira-content:confluence-jira-content-resources', location = 'com/atlassian/confluence/plugins/createjiracontent/js/feature-discovery.js' */
Confluence.CreateJiraContent.FeatureDiscovery=(function(g){var f;var d=AJS.Meta.get("create-issue-metadata-show-discovery");var h=function(i){f=i};var e=function(i,l,m){var k=i.find("#feature-discovery-close");k.on("click",function(n){a();f.hide()});var j=i.find("#show-create-issue");j.on("click",function(n){a();f.hide();m(l)})};var c=function(i,j,k){i.html(Confluence.CreateJiraContent.Templates.FeatureDiscovery.createFeatureDiscoveryContent());e(i,j,k)};var b=function(){return d};var a=function(){d=false;g.ajax({url:AJS.Confluence.getContextPath()+"/rest/createjiracontent/1.0/metadata/discovered",type:"PUT",timeout:0})};return{shouldShowFeatureDiscovery:b,disableFeatureDiscovery:a,addFeatureDiscoveryContent:c,setFeatureDialogObject:h}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-like:content-like-resources', location = '/com/atlassian/confluence/plugins/like/js/like-namespace.js' */
Confluence.Likes=Confluence.Likes||{};
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-like:content-like-resources', location = '/com/atlassian/confluence/plugins/like/js/like.js' */
(function(c){function n(c){return Confluence.getContextPath()+"/rest/likes/1.0/content/"+c+"/likes"}var f=0,p=1,e,g={},q=AJS.$.Deferred();Confluence.Likes.getLikesCache=function(){return q.promise()};!(AJS.PageGadget||window.parent.AJS&&window.parent.AJS.PageGadget)&&AJS.toInit(function(){function o(b,a,d){a=Confluence.Likes.LikeSummaryFactory.getLikeSummary(b.likes,a,h);if(!a.key&&0<h.length&&("page"==b.content_type||"blogpost"==b.content_type))a.text="Be the first to like this";var c=[];
c.push(a.text);c=c.concat(a.args);(a=AJS.format.apply(AJS,c))&&0<a.length?d.html(a):d.empty();a&&(d.find(".likes").click(Confluence.Likes.showLikeUsers),Confluence.Binder.userHover(),"comment"==b.content_type&&d.prepend("<span class='comment-action-separator'>\u2022</span><span class='aui-icon aui-icon-small aui-iconfont-like-small'></span>"))}function i(b,a,d){if(void 0===b)throw Error("type is required");if(void 0===a)throw Error("contentId is required");if(void 0===d)throw Error("contentType is required");
return function(){if("object"!==typeof this||!this.nodeType||1!==this.nodeType||"A"!=this.nodeName)throw Error("this handler should be bound to a DOM anchor element");var k=c(this),e=arguments.callee,j=k.next(".like-summary");c.ajax({type:b===f?"POST":"DELETE",url:n(a),data:{"atlassian-token":AJS.Meta.get("atlassian-token")},dataType:"json",timeout:5E3}).fail(function(){var a=j.siblings(".like-error"),c;c=b===f?"Like failed":"Unlike failed";0===a.length?
j.after('<span class="like-error" title="'+c+'"></span>'):a.attr("title",c)}).success(function(){j.attr("data-liked",b===f);j.parent().find(".like-error").remove()});k.unbind("click",e).bind("click",b===f?i(p,a,d):i(f,a,d)).find(".like-button-text").html(b===f?"Unlike":"Like");g[a]=g[a]||{content_type:d,likes:[]};b===f?g[a].likes.push({user:{name:h}}):g[a].likes=c.grep(g[a].likes,function(a){return a.user.name!=h});o(g[a],a,j);return!1}}Confluence.Likes.showLikeUsers=
function(b){b&&b.preventDefault();b=c(this).data("content-id");e&&(e.remove(),e=void 0);e=new AJS.Dialog(400,365,"likes-dialog");e.addHeader("People who like this");e.addPanel("Panel 1","<div class='spinner-container'></div>");e.addCancel("Close",function(a){a.remove();e=void 0});e.getCurrentPanel().setPadding(0);var a=e,d=e.show,k=AJS.dim;AJS.dim=function(){};try{d.apply(a,[])}finally{AJS.dim=k}c.ajax({type:"GET",url:n(b),data:{expand:"user",max:50},dataType:"json"}).done(function(a){if(e.popup.element.is(":visible")){a.remoteUser=
h;e.getCurrentPanel().html(Confluence.Templates.Likes.likesDialog(a));c("#likes-dialog").find(".likes-dialog-follow-button").click(function(){var a=c(this);c.ajax({type:"PUT",url:Confluence.getContextPath()+"/rest/likes/1.0/user/"+AJS.Meta.get("remote-user")+"/following?username="+a.data("username"),contentType:"application/json",dataType:"json"}).done(function(){a.replaceWith("Following")})})}})};var h=AJS.Meta.get("remote-user")||"",l=0===h.length,m=c(Confluence.Templates.Likes.likeSection({showLikeButton:!l}));
c("<div id='likes-and-labels-container' />").insertBefore("#labels-section").append(m).append(c("#labels-section"));AJS.Meta.get("page-id")&&c.ajax({type:"GET",url:n(AJS.Meta.get("page-id")),data:{commentLikes:!0},dataType:"json"}).done(function(b){if(AJS.Meta.get("remote-user")){var a=0<c.grep(b.likes,function(a){return a.user.name==AJS.Meta.get("remote-user")}).length,d=b.content_type;m.find(".like-button").click(a?i(p,AJS.Meta.get("page-id"),d):i(f,AJS.Meta.get("page-id"),d)).find(".like-button-text").html(a?
"Unlike":"Like")}a=m.find(".like-summary");o(b,b.content_id,a);""==a.html()&&l&&m.hide();g[b.content_id]=b;Confluence.Likes.reload(b.commentLikes)});Confluence.Likes.appendAction=function(b){var b=b.find(".comment-actions-primary"),a=b.find("li[class~='comment-date']"),d=c(Confluence.Templates.Likes.commentLikeSection({showLikeButton:!l}));0==a.length?b.find("li:last-child").after(d):a.before(d)};Confluence.Likes.reload=function(b){c.each(b,function(a,
b){var e=c("#comment-"+a).find(".like-summary");o(b,a,e);g[a]=b});l&&c("#page-comments").find(".like-summary:empty").each(function(){c(this).closest(".comment-action-like").hide()});c("#page-comments .comment").each(function(){Confluence.Likes.updateComment(c(this),b)});q.resolve(g)};Confluence.Likes.updateComment=function(b,a){var d=b.attr("id");if(!d)return!0;var e=(/^comment-(\d+)$/.exec(d)||[])[1];if(!e)throw Error('Expecting ID attribute of comment to be in format "comment-XXX", found: '+d);
d=a[e]&&AJS.Meta.get("remote-user")&&0<c.grep(a[e].likes,function(a){return a.user.name==AJS.Meta.get("remote-user")}).length;b.find(".like-button").click(d?i(p,e,"comment"):i(f,e,"comment")).find(".like-button-text").html(d?"Unlike":"Like")};Confluence.Likes.appendAction(c("#page-comments"))})})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-like:content-like-resources', location = '/com/atlassian/confluence/plugins/like/js/like-summary-factory.js' */
(function(g){var h={"likes.summary.you":"You like this","likes.summary.1.promoted":"{0} likes this","likes.summary.2.promoted":"{0} and {1} like this","likes.summary.3.promoted":"{0}, {1} and {2} like this","likes.summary.1.non-promoted":"{0} likes this","likes.summary.x.non-promoted":"\u003ca href=\"\" {1}\u003e{0} people\u003c/a\u003e like this","likes.summary.you.1.promoted":"You and {0} like this",
"likes.summary.you.2.promoted":"You, {0} and {1} like this","likes.summary.you.3.promoted":"You, {0}, {1} and {2} like this","likes.summary.you.1.non-promoted":"You and {0} like this","likes.summary.you.x.non-promoted":"You and \u003ca href=\"\" {1}\u003e{0} others\u003c/a\u003e like this","likes.summary.1.promoted.1.non-promoted":"{0} and {1} like this","likes.summary.1.promoted.x.non-promoted":"{0} and \u003ca href=\"\" {2}\u003e{1} others\u003c/a\u003e like this",
"likes.summary.2.promoted.1.non-promoted":"{0}, {1} and {2} like this","likes.summary.2.promoted.x.non-promoted":"{0}, {1} and \u003ca href=\"\" {3}\u003e{2} others\u003c/a\u003e like this","likes.summary.3.promoted.1.non-promoted":"{0}, {1}, {2} and {3} like this","likes.summary.3.promoted.x.non-promoted":"{0}, {1}, {2} and \u003ca href=\"\" {4}\u003e{3} others\u003c/a\u003e like this","likes.summary.you.1.promoted.1.non-promoted":"You, {0} and {1} like this",
"likes.summary.you.1.promoted.x.non-promoted":"You, {0} and \u003ca href=\"\" {2}\u003e{1} others\u003c/a\u003e like this","likes.summary.you.2.promoted.1.non-promoted":"You, {0}, {1} and {2} like this","likes.summary.you.2.promoted.x.non-promoted":"You, {0}, {1} and \u003ca href=\"\" {3}\u003e{2} others\u003c/a\u003e like this","likes.summary.you.3.promoted.1.non-promoted":"You, {0}, {1}, {2} and {3} like this","likes.summary.you.3.promoted.x.non-promoted":"You, {0}, {1}, {2} and \u003ca href=\"\" {4}\u003e{3} others\u003c/a\u003e like this"};
Confluence.Likes.LikeSummaryFactory={getLikeSummary:function(a,c,j){if(!a||0===a.length)return{key:"",text:""};if(!c)throw Error("contentId is required.");var i,e=[],f=[];g.each(a,function(a,b){b.user&&b.user.name==j?i=b:3>e.length&&b.user.followedByRemoteUser?e.push(b):f.push(b)});var a=["likes.summary"],d=[];null!=i&&a.push(".you");0<e.length&&(a.push("."),a.push(e.length),a.push(".promoted"),g.each(e,function(a,b){d.push(Confluence.Templates.Likes.userLink(b))}));1==f.length?(a.push(".1.non-promoted"),
d.push(Confluence.Templates.Likes.userLink(f[0]))):1<f.length&&(a.push(".x.non-promoted"),d.push(f.length),d.push('class="likes" data-content-id="'+c+'"'));c=a.join("");return{key:c,args:0===d.length?void 0:d,text:c in h?h[c]:""}}}})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-like:content-like-resources', location = '/templates/com/atlassian/confluence/plugins/like/soy/like.soy' */
// This file was automatically generated from like.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.Likes == 'undefined') { Confluence.Templates.Likes = {}; }


Confluence.Templates.Likes.likeButton = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<a href="" class="like-button">', (opt_data.useIcon) ? '<span class="aui-icon aui-icon-small aui-iconfont-like"></span>' : '', '<span class="like-button-text">', soy.$$escapeHtml("Like"), '</span></a>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Likes.likeSection = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div id="likes-section">');
  if (opt_data.showLikeButton) {
    Confluence.Templates.Likes.likeButton({useIcon: true}, output);
  }
  output.append('<span class="like-summary"></span></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Likes.commentLikeSection = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<li class="comment-action-like">');
  if (opt_data.showLikeButton) {
    Confluence.Templates.Likes.likeButton({useIcon: false}, output);
  }
  output.append('<span class="like-summary"></span></li>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Likes.likesDialog = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div id="likes-dialog-body"><ol>');
  var likeList26 = opt_data.likes;
  var likeListLen26 = likeList26.length;
  for (var likeIndex26 = 0; likeIndex26 < likeListLen26; likeIndex26++) {
    var likeData26 = likeList26[likeIndex26];
    output.append('<li><div class="avatar-container"><a href="', soy.$$escapeHtml(likeData26.user.url), '"><img class="like-user-avatar" src="', soy.$$escapeHtml(likeData26.user.avatarUrl), '"></a></div><div class="like-user"><a class="like-user-link" href="', soy.$$escapeHtml(likeData26.user.url), '">', soy.$$escapeHtml(likeData26.user.fullName), '</a></div><div class="follow-button-container aui-toolbar"><ul class="toolbar-group"><li class="toolbar-item">', (likeData26.user.followedByRemoteUser) ? soy.$$escapeHtml("Following") : (opt_data.remoteUser && opt_data.remoteUser.length > 0) ? '<button data-username="' + soy.$$escapeHtml(likeData26.user.name) + '" class="likes-dialog-follow-button toolbar-trigger">' + soy.$$escapeHtml("Follow") + '</button>' : '', '</li></ul></div></li>');
  }
  output.append('</ol></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Likes.userLink = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<a href="', soy.$$escapeHtml(opt_data.user.url), '" class="confluence-userlink" data-username="', soy.$$escapeHtml(opt_data.user.name), '">', soy.$$escapeHtml(opt_data.user.fullName), '</a>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.web.resources:shared-templates', location = '/includes/soy/user.soy' */
// This file was automatically generated from user.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.User == 'undefined') { Confluence.Templates.User = {}; }


Confluence.Templates.User.userLinkUrl = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append(soy.$$escapeHtml(""), '/display/~', soy.$$escapeUri(opt_data.username));
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.User.logo = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (opt_data.profilePictureInfo['default'] && opt_data.username == opt_data.currentUsername) {
    output.append('<a ', (opt_data.canView) ? ' ' + ((! opt_data.disableUserHover) ? 'class="userLogoLink"' : '') + ' data-username="' + soy.$$escapeHtml(opt_data.username) + '"' : '', ' href="', soy.$$escapeHtml(""), '/users/profile/editmyprofilepicture.action" title="', soy.$$escapeHtml("Add a picture of yourself"), '"><img class="userLogo logo defaultLogo" src="', soy.$$escapeHtml("/s/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/_"), '/images/icons/profilepics/add_profile_pic.png" alt="', soy.$$escapeHtml("User icon"), ': ', soy.$$escapeHtml("Add a picture of yourself"), '"></a>');
  } else {
    if (opt_data.profilePictureInfo.anonymous) {
      output.append('<img class="userLogo logo anonymous" src="', soy.$$escapeHtml("/s/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/_"), '/images/icons/profilepics/anonymous.png" alt="', soy.$$escapeHtml("User icon"), ': ', soy.$$escapeHtml("Anonymous"), '" title="', soy.$$escapeHtml("Anonymous"), '">');
    } else if (opt_data.canView) {
      output.append('<a ', (! opt_data.disableUserHover) ? 'class="userLogoLink"' : '', ' data-username="', soy.$$escapeHtml(opt_data.username), '" href="');
      Confluence.Templates.User.userLinkUrl(opt_data, output);
      output.append('"><img class="userLogo logo" src="', soy.$$escapeHtml(""), soy.$$escapeHtml(opt_data.profilePictureInfo.downloadPath), '" alt="', soy.$$escapeHtml("User icon"), ': ', soy.$$escapeHtml(opt_data.username), '" title="', soy.$$escapeHtml(opt_data.username), '"></a>');
    } else {
      output.append('<img class="userLogo logo anonymous" src="', soy.$$escapeHtml("/s/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/_"), '/images/icons/profilepics/anonymous.png" alt="', soy.$$escapeHtml("User icon"), ': ', soy.$$escapeHtml(opt_data.username), '" title="', soy.$$escapeHtml(opt_data.username), '">');
    }
  }
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.User.usernameLink = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (opt_data.username && opt_data.username != '') {
    output.append('<a href="');
    Confluence.Templates.User.userLinkUrl(opt_data, output);
    output.append('"', (opt_data.canView) ? 'class="url fn confluence-userlink" data-username="' + soy.$$escapeHtml(opt_data.username) + '"' : 'class="url fn"', '>', (opt_data.fullName && opt_data.fullName != '') ? soy.$$escapeHtml(opt_data.fullName) : soy.$$escapeHtml(opt_data.username), '</a>');
  } else {
    output.append(soy.$$escapeHtml("Anonymous"));
  }
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.User.fullNameOrAnonymous = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.user && opt_data.user.fullName) ? soy.$$escapeHtml(opt_data.user.fullName) : soy.$$escapeHtml("Anonymous"));
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.User.usernameOrAnonymous = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.user && opt_data.user.name) ? soy.$$escapeHtml(opt_data.user.name) : soy.$$escapeHtml("Anonymous"));
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.web.resources:shared-templates', location = '/includes/soy/icons.soy' */
// This file was automatically generated from icons.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.Icons == 'undefined') { Confluence.Templates.Icons = {}; }


Confluence.Templates.Icons.contentIcon = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.content.type == 'trackback') ? '<a' + ((opt_data.linkColour) ? ' ' + soy.$$escapeHtml(opt_data.linkColour) : '') + ' href="' + soy.$$escapeHtml(opt_data.linkHref) + '" class="icon icon-trackback" title="' + soy.$$escapeHtml("Track back") + '">' + soy.$$escapeHtml("Track back") + ':</a>' : '<a' + ((opt_data.linkColour) ? ' ' + soy.$$escapeHtml(opt_data.linkColour) : '') + ' href="' + soy.$$escapeHtml(opt_data.linkHref) + '" class="icon ' + soy.$$escapeHtml(opt_data.iconCss) + '" title="' + soy.$$escapeHtml(opt_data.iconTitle) + '">' + soy.$$escapeHtml(opt_data.iconTitle) + '</a>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Icons.contentIconFont = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.content.type == 'trackback') ? '<a' + ((opt_data.linkColour) ? ' ' + soy.$$escapeHtml(opt_data.linkColour) : '') + ' href="' + soy.$$escapeHtml(opt_data.linkHref) + '" class="icon icon-trackback" title="' + soy.$$escapeHtml("Track back") + '">' + soy.$$escapeHtml("Track back") + ':</a>' : '<a' + ((opt_data.linkColour) ? ' ' + soy.$$escapeHtml(opt_data.linkColour) : '') + ' href="' + soy.$$escapeHtml(opt_data.linkHref) + '" title="' + soy.$$escapeHtml(opt_data.iconTitle) + '"><span class="icon ' + soy.$$escapeHtml(opt_data.iconCss) + '">' + soy.$$escapeHtml(opt_data.iconTitle) + '</span></a>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Icons.iconSpan = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<span class="icon', (opt_data.type) ? ' icon-' + soy.$$escapeHtml(opt_data.type) : '', ' ', (opt_data.additionalClasses) ? soy.$$escapeHtml(opt_data.additionalClasses) : '', '">', (opt_data.text) ? soy.$$escapeHtml(opt_data.text) : '', '</span>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.web.resources:shared-templates', location = '/includes/soy/captcha.soy' */
// This file was automatically generated from captcha.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.Captcha == 'undefined') { Confluence.Templates.Captcha = {}; }


Confluence.Templates.Captcha.form = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="captcha field-group"><label id="captcha-response-label" for="captcha-response"><span class="assistive">', soy.$$escapeHtml("If you are unable to use this CAPTCHA please \x3ca href\x3d\x22administrators.action\x22 tabindex\x3d\x225\x22\x3econtact your administrator\x3c/a\x3e for assistance."), '</span></label>');
  Confluence.Templates.Captcha.image(opt_data, output);
  output.append('<input type="text" id="captcha-response" name="captchaResponse" value="" class="text" placeholder="', soy.$$escapeHtml("Type the word above"), '">');
  if (opt_data.captchaErrors && opt_data.captchaErrors.length) {
    var errorList13 = opt_data.captchaErrors;
    var errorListLen13 = errorList13.length;
    for (var errorIndex13 = 0; errorIndex13 < errorListLen13; errorIndex13++) {
      var errorData13 = errorList13[errorIndex13];
      aui.message.warning({content: errorData13}, output);
    }
  }
  output.append('</div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Captcha.image = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<img src="', soy.$$escapeHtml(""), '/jcaptcha?id=', soy.$$escapeHtml(opt_data.captchaId), '" class="captcha-image" alt="', soy.$$escapeHtml("CAPTCHA image"), '"><input type="hidden" name="captchaId" value="', soy.$$escapeHtml(opt_data.captchaId), '" placeholder="', soy.$$escapeHtml("Type the word above"), '">');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.web.resources:shared-templates', location = '/includes/soy/notifications.soy' */
// This file was automatically generated from notifications.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.Notifications == 'undefined') { Confluence.Templates.Notifications = {}; }


Confluence.Templates.Notifications.notLoggedIn = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((! opt_data.isUserAuthenticated) ? '<div id="anonymous-warning" class="aui-message warning closeable">' + "You are not logged in. Any changes you make will be marked as \x3cspan class\x3d\x22smalltext\x22\x3eanonymous\x3c/span\x3e." + ((! opt_data.isExternalUserManagementEnabled) ? ' ' + AJS.format("You may want to \x3ca href\x3d\x22{0}\x22\x3eLog In\x3c/a\x3e if you already have an account.",opt_data.loginURL) : '') + '</div>' : '');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Notifications.actionErrors = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (opt_data.actionErrors.length > 0) {
    output.append('<div class="aui-message aui-message-error ', (opt_data.closeable) ? 'closeable' : '', '"><p class="title">', soy.$$escapeHtml("The following error(s) occurred:"), '</p><span class="aui-icon icon-error"></span><ul>');
    var errorHtmlList24 = opt_data.actionErrors;
    var errorHtmlListLen24 = errorHtmlList24.length;
    for (var errorHtmlIndex24 = 0; errorHtmlIndex24 < errorHtmlListLen24; errorHtmlIndex24++) {
      var errorHtmlData24 = errorHtmlList24[errorHtmlIndex24];
      output.append('<li>', errorHtmlData24, '</li>');
    }
    output.append('</ul></div>');
  }
  output.append('<div id="action-messages"></div>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.browser.metrics.browser-metrics-plugin:api', location = 'browser-metrics.js' */
(function(){
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/jakearchibald/es6-promise/master/LICENSE
 * @version   2.0.0
 */
var h,t,e,n,l,s,z,A,p,m,B,x,q,j,E,F,g,v,D,f,w,k,d,r,c,J,C,a,y,b,G,H,o,I;(function(){function aE(aW){return typeof aW==="function"||typeof aW==="object"&&aW!==null}function ac(aW){return typeof aW==="function"}function aU(aW){return typeof aW==="object"&&aW!==null}var aR;if(!Array.isArray){aR=function(aW){return Object.prototype.toString.call(aW)==="[object Array]"}}else{aR=Array.isArray}var aw=aR;var ah=Date.now||function(){return new Date().getTime()};function ak(){}var P=Object.create||function(aW){if(arguments.length>1){throw new Error("Second argument not supported")}if(typeof aW!=="object"){throw new TypeError("Argument must be an object")}ak.prototype=aW;return new ak()};var aP=0;var Y=function aC(aX,aW){aO[aP]=aX;aO[aP+1]=aW;aP+=2;if(aP===2){M()}};var av=typeof window!=="undefined"?window:{};var af=av.MutationObserver||av.WebKitMutationObserver;var X=typeof Uint8ClampedArray!=="undefined"&&typeof importScripts!=="undefined"&&typeof MessageChannel!=="undefined";function az(){return function(){process.nextTick(aQ)}}function aK(){var aY=0;var aW=new af(aQ);var aX=document.createTextNode("");aW.observe(aX,{characterData:true});return function(){aX.data=aY=++aY%2}}function aA(){var aW=new MessageChannel();aW.port1.onmessage=aQ;return function(){aW.port2.postMessage(0)}}function aG(){return function(){setTimeout(aQ,1)}}var aO=new Array(1000);function aQ(){for(var aX=0;aX<aP;aX+=2){var aY=aO[aX];var aW=aO[aX+1];aY(aW);aO[aX]=undefined;aO[aX+1]=undefined}aP=0}var M;if(typeof process!=="undefined"&&{}.toString.call(process)==="[object process]"){M=az()}else{if(af){M=aK()}else{if(X){M=aA()}else{M=aG()}}}function aa(){}var al=void 0;var aH=1;var am=2;var aN=new aT();function aL(){return new TypeError("You cannot resolve a promise with itself")}function au(){return new TypeError("A promises callback cannot return that same promise.")}function aD(aX){try{return aX.then}catch(aW){aN.error=aW;return aN}}function O(a0,aY,aX,aW){try{a0.call(aY,aX,aW)}catch(aZ){return aZ}}function aF(aY,aW,aX){Y(function(a1){var a0=false;var aZ=O(aX,aW,function(a2){if(a0){return}a0=true;if(aW!==a2){V(a1,a2)}else{U(a1,a2)}},function(a2){if(a0){return}a0=true;at(a1,a2)},"Settle: "+(a1._label||" unknown promise"));if(!a0&&aZ){a0=true;at(a1,aZ)}},aY)}function Q(aX,aW){if(aW._state===aH){U(aX,aW._result)}else{if(aX._state===am){at(aX,aW._result)}else{aV(aW,undefined,function(aY){V(aX,aY)},function(aY){at(aX,aY)})}}}function R(aY,aW){if(aW.constructor===aY.constructor){Q(aY,aW)}else{var aX=aD(aW);if(aX===aN){at(aY,aN.error)}else{if(aX===undefined){U(aY,aW)}else{if(ac(aX)){aF(aY,aW,aX)}else{U(aY,aW)}}}}}function V(aX,aW){if(aX===aW){at(aX,aL())}else{if(aE(aW)){R(aX,aW)}else{U(aX,aW)}}}function ay(aW){if(aW._onerror){aW._onerror(aW._result)}T(aW)}function U(aX,aW){if(aX._state!==al){return}aX._result=aW;aX._state=aH;if(aX._subscribers.length===0){}else{Y(T,aX)}}function at(aX,aW){if(aX._state!==al){return}aX._state=am;aX._result=aW;Y(ay,aX)}function aV(aW,a1,a0,aZ){var aY=aW._subscribers;var aX=aY.length;aW._onerror=null;aY[aX]=a1;aY[aX+aH]=a0;aY[aX+am]=aZ;if(aX===0&&aW._state){Y(T,aW)}}function T(a0){var aZ=a0._subscribers;var aW=a0._state;if(aZ.length===0){return}var a2,a1,aY=a0._result;for(var aX=0;aX<aZ.length;aX+=3){a2=aZ[aX];a1=aZ[aX+aW];if(a2){aJ(aW,a2,a1,aY)}else{a1(aY)}}a0._subscribers.length=0}function aT(){this.error=null}var ab=new aT();function ar(aY,aW){try{return aY(aW)}catch(aX){ab.error=aX;return ab}}function aJ(a2,a4,a1,aY){var aW=ac(a1),a0,aZ,a3,aX;if(aW){a0=ar(a1,aY);if(a0===ab){aX=true;aZ=a0.error;a0=null}else{a3=true}if(a4===a0){at(a4,au());return}}else{a0=aY;a3=true}if(a4._state!==al){}else{if(aW&&a3){V(a4,a0)}else{if(aX){at(a4,aZ)}else{if(a2===aH){U(a4,a0)}else{if(a2===am){at(a4,a0)}}}}}}function S(a0,aZ){try{aZ(function aW(a1){V(a0,a1)},function aY(a1){at(a0,a1)})}catch(aX){at(a0,aX)}}function aS(aY,aW,aX){if(aY===aH){return{state:"fulfilled",value:aX}}else{return{state:"rejected",reason:aX}}}function aM(aY,aW,aZ,aX){this._instanceConstructor=aY;this.promise=new aY(aa,aX);this._abortOnReject=aZ;if(this._validateInput(aW)){this._input=aW;this.length=aW.length;this._remaining=aW.length;this._init();if(this.length===0){U(this.promise,this._result)}else{this.length=this.length||0;this._enumerate();if(this._remaining===0){U(this.promise,this._result)}}}else{at(this.promise,this._validationError())}}aM.prototype._validateInput=function(aW){return aw(aW)};aM.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")};aM.prototype._init=function(){this._result=new Array(this.length)};var ax=aM;aM.prototype._enumerate=function(){var aY=this.length;var aZ=this.promise;var aW=this._input;for(var aX=0;aZ._state===al&&aX<aY;aX++){this._eachEntry(aW[aX],aX)}};aM.prototype._eachEntry=function(aX,aW){var aY=this._instanceConstructor;if(aU(aX)){if(aX.constructor===aY&&aX._state!==al){aX._onerror=null;this._settledAt(aX._state,aW,aX._result)}else{this._willSettleAt(aY.resolve(aX),aW)}}else{this._remaining--;this._result[aW]=this._makeResult(aH,aW,aX)}};aM.prototype._settledAt=function(aY,aW,aX){var aZ=this.promise;if(aZ._state===al){this._remaining--;if(this._abortOnReject&&aY===am){at(aZ,aX)}else{this._result[aW]=this._makeResult(aY,aW,aX)}}if(this._remaining===0){U(aZ,this._result)}};aM.prototype._makeResult=function(aY,aW,aX){return aX};aM.prototype._willSettleAt=function(aX,aW){var aY=this;aV(aX,undefined,function(aZ){aY._settledAt(aH,aW,aZ)},function(aZ){aY._settledAt(am,aW,aZ)})};var ai=function ag(aW,aX){return new ax(this,aW,true,aX).promise};var an=function W(aW,aX){var a3=this;var a2=new a3(aa,aX);if(!aw(aW)){at(a2,new TypeError("You must pass an array to race."));return a2}var aZ=aW.length;function a1(a4){V(a2,a4)}function a0(a4){at(a2,a4)}for(var aY=0;a2._state===al&&aY<aZ;aY++){aV(a3.resolve(aW[aY]),undefined,a1,a0)}return a2};var ae=function aj(aX,aW){var aZ=this;if(aX&&typeof aX==="object"&&aX.constructor===aZ){return aX}var aY=new aZ(aa,aW);V(aY,aX);return aY};var L=function ap(aX,aW){var aZ=this;var aY=new aZ(aa,aW);at(aY,aX);return aY};var aq=0;function aI(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function Z(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var aB=N;function N(aW){this._id=aq++;this._state=undefined;this._result=undefined;this._subscribers=[];if(aa!==aW){if(!ac(aW)){aI()}if(!(this instanceof N)){Z()}S(this,aW)}}N.all=ai;N.race=an;N.resolve=ae;N.reject=L;N.prototype={constructor:N,then:function(a0,aZ){var aX=this;var aY=aX._state;if(aY===aH&&!a0||aY===am&&!aZ){return this}var a2=new this.constructor(aa);var aW=aX._result;if(aY){var a1=arguments[aY-1];Y(function(){aJ(aY,a2,a1,aW)})}else{aV(aX,a2,a0,aZ)}return a2},"catch":function(aW){return this.then(null,aW)}};var ad=function K(){var aX;if(typeof global!=="undefined"){aX=global}else{if(typeof window!=="undefined"&&window.document){aX=window}else{aX=self}}var aW="Promise" in aX&&"resolve" in aX.Promise&&"reject" in aX.Promise&&"all" in aX.Promise&&"race" in aX.Promise&&function(){var aY;new aX.Promise(function(aZ){aY=aZ});return ac(aY)}();if(!aW){aX.Promise=aB}};var ao={Promise:aB,polyfill:ad};if(true){h=function(){return ao}()}else{if(typeof module!=="undefined"&&module.exports){module.exports=ao}else{if(typeof this!=="undefined"){this["ES6Promise"]=ao}}}}.call(this));t=function(L){var K=L.Promise;return K}(h);e=function(){return window}();n=function(M){var L=M.HTMLElement.prototype;var K=L.matches||L.msMatchesSelector||L.webkitMatchesSelector||L.mozMatchesSelector||L.oMatchesSelector;return K}(e);l=function i(K){var L=false;return function(){if(!L){L=true;setTimeout(function(){L=false;K()},1)}}};s=function(K,N){function M(Q){this.callback=Q;this.elements=[]}M.prototype={observe:function(X,af){function R(ag){ae.push(ag);Q()}function ad(ai){var ah=ai.target;if(!ah){return}var ag=ah.parentNode;if(!Y(ag)){return}if(ac&&P(ac,ah)){return}if(!aa||aa.target!==ag){Z.push(aa=O(ag))}if(ag){if(!aa.addedNodes){aa.addedNodes=[]}aa.addedNodes.push(ah)}else{if(!aa.removedNodes){aa.removedNodes=[]}aa.removedNodes.push(ah)}ac=ah}function W(ag){return af.attributes&&(af.subtree||ag===X)}function Y(ag){return af.childList&&(af.subtree||ag===X)}var U=this;var ac;var aa;var ae=[];var Z=[];var Q=K(function(){var ag=ae.length;for(var ah=0;ah<ag;ah++){ad(ae[ah])}U.callback(Z);ae=[];Z=[];ac=undefined;aa=undefined});var ab={};var T=[];var V=K(function(){var ag=T.length;U.callback(T);T.splice(0,ag)});var S={target:X,options:af,insertHandler:R,removeHandler:R,attributeHandler:function(al){var aj=al.target;if(!W(aj)){return}var ah=al.attrName;var ai=al.prevValue;var ak=al.newValue;var ag=O(aj,"attributes");ag.attributeName=ah;if(af.attributeOldValue){ag.oldValue=ab[ah]||ai||null}T.push(ag);if(af.attributeOldValue){ab[ah]=ak}V()}};this.elements.push(S);if(af.childList){X.addEventListener("DOMNodeInserted",S.insertHandler);X.addEventListener("DOMNodeRemoved",S.removeHandler)}if(af.attributes){X.addEventListener("DOMAttrModified",S.attributeHandler)}return this},disconnect:function(){this.elements.forEach(function(Q){Q.target.removeEventListener("DOMNodeInserted",Q.insertHandler);Q.target.removeEventListener("DOMNodeRemoved",Q.removeHandler);Q.target.removeEventListener("DOMAttrModified",Q.attributeHandler)});this.elements=[];return this}};function O(R,Q){return{addedNodes:null,attributeName:null,attributeNamespace:null,nextSibling:null,oldValue:null,previousSibling:null,removedNodes:null,target:R,type:Q||"childList"}}var L=N.HTMLElement.prototype.contains;function P(Q,R){if(Q.nodeType!==1){return false}return Q.contains?Q.contains(R):L.call(Q,R)}return M}(l,e);z=function(L,K){return K.MutationObserver||K.WebkitMutationObserver||K.MozMutationObserver||L}(s,e);A=function(){function K(){this._items={};this.length=0}K.prototype.add=function(M,L){if(!this._items.hasOwnProperty(M)){this.length++;this._items[M]=[]}this._items[M].push(L)};K.prototype.remove=function(O,M){var L,N=false;if(this._items.hasOwnProperty(O)){if(arguments.length===1){delete this._items[O];N=true}else{L=this._items[O].indexOf(M);if(L>-1){this._items[O].splice(L,1);if(this._items[O].length===0){delete this._items[O]}N=true}}}return N};K.prototype.get=function(L){if(this._items.hasOwnProperty(L)){return this._items[L]}return[]};K.prototype.forEach=function(M){var L=this._items;Object.keys(L).forEach(function(N){M(L[N],N)})};return K}();p=function(T,U,M,O,Q){var S,N=false,P;P=new O();function L(V,W){if(!N){S.observe(Q.document,{attributes:true,childList:true,subtree:true});N=true}P.add(V,W)}function R(V,W){P.remove.apply(P,arguments);if(P.length===0){S.disconnect();N=false}}S=new M(function(V){V.forEach(function(X){var W=X.type==="childList"&&X.addedNodes&&X.addedNodes.length>0;var Y=X.type==="attributes";if(!W&&!Y){return}P.forEach(function(aa,Z){if(X.target.querySelector(Z)||U.call(X.target,Z)){aa.forEach(function(ab){ab()});R(Z)}})})});function K(W){var X;if(!W.forEach){W=[W]}var V=new T(function(ab,aa){var ac=[];var Y=[];W.forEach(function(ad){var af;var ae;if(!Q.document.querySelector(ad)){af=new T(function(ag){L(ad,ag);ae=function(){R(ad,ag)}});ac.push(af);Y.push(ae)}});function Z(){Y.forEach(function(ad){ad()})}T.all(ac).then(Z).then(ab,aa);X=function(){Z();aa()}});V.dismiss=X;return V}return K}(t,n,z,A,e);m=function(T,U,L,N,Q){var S,M=false,P;P=new N();function K(V,W){if(!M){S.observe(Q.document,{childList:true,subtree:true});M=true}P.add(V,W)}function R(V,W){P.remove.apply(P,arguments);if(P.length===0){S.disconnect();M=false}}S=new L(function(V){V.forEach(function(W){var X=W.type==="childList"&&W.removedNodes&&W.removedNodes.length>0;if(X){P.forEach(function(ab,Y){var ac;for(var aa=0;aa<W.removedNodes.length;aa++){ac=W.removedNodes[aa];if(ac.querySelector&&(ac.querySelector(Y)||U.call(ac,Y))){for(var Z=0;Z<ab.length;Z++){ab[Z]()}R(Y)}}})}})});function O(W){var X;if(!W.forEach){W=[W]}var V=new T(function(ab,aa){var ac=[];var Y=[];W.forEach(function(ad){var af;var ae;if(Q.document.querySelector(ad)){af=new T(function(ag){K(ad,ag);ae=function(){R(ad,ag)}});ac.push(af);Y.push(ae)}});function Z(){Y.forEach(function(ad){ad()})}T.all(ac).then(Z).then(ab,aa);X=function(){Z();aa()}});V.dismiss=X;return V}return O}(t,n,z,A,e);B=function(){var L={};var M={};var K=function(N,P,O){if(!M.hasOwnProperty(N)){M[N]=[]}if(P){M[N].push({callback:P,once:O})}};L.on=function(N,O){K(N,O,false)};L.one=function(N,O){K(N,O,true)};L.trigger=function(N,O){var P=[];(M[N]||[]).forEach(function(Q){Q.callback.apply(undefined,[O]);if(!Q.once){P.push(Q)}});if(P.length===0){delete M[N]}else{M[N]=P}};return L}();x=function u(K){return{isInitial:K.isInitial}};q=function(M,N){var O="browser-metrics-journey";function L(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(R){var Q=M.Math.random()*16|0;var P=R==="x"?Q:Q&3|8;return P.toString(16)})}function K(){if(typeof M.sessionStorage==="undefined"){return N.reject("sessionStorage is required to produce a report for this navigation.")}if(M.sessionStorage.getItem(O)===null){M.sessionStorage.setItem(O,L())}return N.resolve({journeyId:M.sessionStorage.getItem(O)})}return K}(e,t);j=function(){function K(L){return{key:L.key}}return K}();E=function(K){return function L(){return K.performance&&K.performance.navigation&&K.performance.timing&&typeof K.performance.timing.navigationStart!=="undefined"}}(e);F=function(L,M){function K(O){var N={};if(O.isInitial&&M()){N.navigationType=L.performance.navigation.type}return N}return K}(e,E);g=function(L,N,M){function K(O){if(O.isInitial&&!N()){return M.reject("The navigation timing API is required to produce a report for this navigation.")}var P=O.isInitial?L.performance.timing.navigationStart:O.start;return M.resolve({readyForUser:Math.round(O.end-P)})}return K}(e,E,t);v=function(L,N,M){function K(P){var O={};if(P.isInitial){if(!N()){return M.reject("The navigation timing API is required to produce a report for this navigation.")}if(L.performance.navigation.redirectCount>0){O.redirectCount=L.performance.navigation.redirectCount}}return M.resolve(O)}return K}(e,E,t);D=function(L){function K(N,M){return new L(function(P){var Q;function O(){var R=N();if(R!==undefined){clearInterval(Q);P(R)}}Q=setInterval(O,M);O()})}return K}(t);f=function(L,O,Q,P){var M=["unloadEventStart","unloadEventEnd","redirectStart","redirectEnd","fetchStart","domainLookupStart","domainLookupEnd","connectStart","connectEnd","secureConnectionStart","requestStart","responseStart","responseEnd","domLoading","domInteractive","domContentLoadedEventStart","domContentLoadedEventEnd","domComplete","loadEventStart","loadEventEnd"];function K(){var R=O.performance.timing.loadEventEnd;if(R>0){return R}}function N(T){if(!T.isInitial){return{}}else{if(!Q()){return P.reject("The navigation timing API is required to produce a report for this navigation.")}}var R=L(K,250);return R.then(function S(){var U={};M.forEach(function(V){var W=O.performance.timing[V];if(W>0){U[V]=W-O.performance.timing.navigationStart}});return U})}return N}(D,e,E,t);w=function(K){function L(){return{userAgent:K.navigator.userAgent}}return L}(e);k=function(Q,O,M,R,S,L,N,P){var K=[Q,O,M,R,S,L,N,P];return{get:function(){return K.concat()},add:function(T){K.push(T)}}}(x,q,j,F,g,v,f,w);d=function(){var K=Object.prototype.hasOwnProperty;function L(){var P={};var O,Q;for(var M=0,N=arguments.length;M<N;M++){O=arguments[M];for(Q in O){if(K.call(O,Q)){P[Q]=O[Q]}}}return P}return L}();r=function(L){var K=L.document.readyState!=="loading";if(!K){L.document.addEventListener("DOMContentLoaded",function(){L.setTimeout(function(){K=true},0)})}function M(){return K}return M}(e);c=function(L,P,U,S,K,T,N){var R={};function Q(W,V){if(!Array.isArray(W)){W=[W]}return W.map(function(X){if(typeof X==="string"){X={selector:X}}return T(V,X)})}function O(W){var V;V=W.map(function(Y){var X;if(Y.requireUpdate){X=new P(Y.selector);U.one("start",function(){X.dismiss()})}else{X=S.resolve()}return X.then(function(){var Z=new L(Y.selector);U.one("start",function(){Z.dismiss()});return Z})});return S.all(V)}R.start=function(V){var X,W="isInitial" in V?V.isInitial:N()===false;U.trigger("start",{key:V.key,isInitial:W});if(V.ready){X=Q(V.ready,{requireUpdate:!W});O(X).then(function(){R.end({key:V.key})})}};R.end=function(V){U.trigger("end",{key:V.key})};R.addReporter=function M(V){K.add(V)};return R}(p,m,B,t,k,d,r);J=function(K){return K.AJS||(K.AJS={})}(e);C=function(K){K.EventQueue=K.EventQueue||[];function L(M,N){K.EventQueue.push({name:M,properties:N})}return L}(J);a=function(L){function K(M){(L.console.error||L.console.log).call(L.console,M.stack||M)}return K}(e);y=function(N,P,Q,O,M,L){function K(T){var U=L.get().map(function S(W){var V;try{V=W(T)}catch(X){M(X);V={}}return V});return P.all(U).then(function R(V){return Q.apply(undefined,V)})}return K}(D,t,d,e,a,k);b=function(L){var K;if(L.performance&&L.performance.now){K=function(){return L.performance.timing.navigationStart+L.performance.now()}}else{K=L.Date.now.bind(L.Date)}return K}(e);G=function(O,L,M){function K(P){if(!(this instanceof K)){return new K(P)}this.isInitial="isInitial" in P?P.isInitial:false;this.start=M();this.end=null;this.key=P.key}function N(P){var Q;P.on("start",function(R){Q=new K(R)});P.on("end",function(R){if(Q&&Q.key===R.key){Q.end=M();L(Q).then(function(S){O("browser.metrics.navigation",S)});Q=null}})}return N}(C,y,b);H=function(K){return K.WRM||(K.WRM={})}(e);o=function(K){var P="com.atlassian.plugins.browser.metrics.browser-metrics-plugin:api.feature-data-provider",L;function O(Q){return !!(Q&&Q.constructor&&Q.call&&Q.apply)}function N(Q,R){if(K&&K.data&&K.data.claim&&O(K.data.claim)){return K.data.claim(Q)}else{if(K&&K.data&&O(K.data)){return K.data(Q)}else{return R}}}function M(){if(L===undefined){L=N(P,true)}return L}return M}(H);I=function(N,M,K,L){if(!L()){return{start:function(){},end:function(){}}}M(K);return N}(c,G,B,o);window["browser-metrics"]=I;if(window.define){window.define("internal/browser-metrics",[],function(){return I})}}());
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.browser.metrics.browser-metrics-plugin:api', location = 'main.js' */
define("internal/browser-metrics-plugin/lib/window",["require","exports"],function(b,a){return window});define("internal/browser-metrics-plugin/reporters/experiments",["require","exports","jquery","../lib/window"],function(a,d,f,i){var h=i.AJS.contextPath()+"/experimental/main.js";function c(){return Array.prototype.slice.call(i.document.getElementsByTagName("script"))}function j(){return(i.GROW&&i.GROW.experimentId)||[]}function e(){var m=f.Deferred();f(function n(){var o=c().some(function p(q){return q.getAttribute("src")===h});m.resolve(o)});return m.promise()}var g=e().pipe(function l(n){var m={};if(n){m.experiments=JSON.stringify(j())}return m});var b=function k(){return g};return b});define("internal/browser-metrics-plugin/main",["require","exports","./reporters/experiments","internal/browser-metrics"],function(c,a,b,d){d.addReporter(b)});require(["internal/browser-metrics-plugin/main"]);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-browser-metrics:viewcontent', location = '/js/viewcontent.js' */
require(["internal/browser-metrics","jquery"],function(c,d){function a(e){if(!d(e.target).hasClass("full-load")){c.start({key:"confluence."+e.data.type+".edit.quick-view",ready:".active-richtext"})}}function b(){var e=AJS.Meta.get("content-type");if(e){c.start({key:"confluence."+e+".view",ready:".wiki-content",isInitial:true});d("#editPageLink").on("click",{type:e},a)}}d(b)});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-page-banner:page-banner-common-resources', location = 'js/page-banner.js' */
AJS.toInit(function(e){d();AJS.bind("system-content-metadata.toggled-restrictions",function(g,h){AJS.setVisible("#content-metadata-page-restrictions",h.hasRestrictions);d()});AJS.bind("breadcrumbs.expanded",f);e("#page-metadata-banner").css("visibility","visible");b();e("#content-metadata-page-restrictions").click(function(g){g.preventDefault();AJS.trigger("system-content-metadata.open-restrictions-dialog")});function d(){if(e("#system-content-items").children(":not(.hidden)").length==0){e("#system-content-items").addClass("hidden")}else{e("#system-content-items").removeClass("hidden")}}function f(){e("#page-metadata-banner").hide()}function b(){var g=e("#system-content-items a:not(.tipsy-disabled), .page-metadata-item a:not(.tipsy-disabled), .page-metadata-modification-info a.last-modified:not(tipsy-disabled)");a(g);g.click(function(h){c(e(h.target).closest("a"))});e(window).on("click scroll resize",c)}function a(g){e(g).tooltip({live:true,gravity:e("#com-atlassian-confluence").hasClass("theme-documentation view-blog-post")?"nw":"n",title:"title",delayIn:500})}function c(g){e(".tipsy").remove();if(g){var h=e(g).data("tipsy");if(h){h.hoverState="out"}}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-page-banner:page-banner-common-resources', location = 'js/page-banner-analytics.js' */
AJS.toInit(function(c){function b(){if(!AJS.Confluence.Analytics||!AJS.Confluence.Analytics.setAnalyticsSource){AJS.log("WARNING: Could not initialise analytics for the page banner: AJS.Confluence.Analytics.setAnalyticsSource is not defined.");return}var e=AJS.Confluence.Analytics.setAnalyticsSource;var f=c("#breadcrumbs > li");e(f.filter(":not(#ellipsis)").find("a"),"breadcrumbs");e(f.filter(".hidden-crumb").find("a"),"breadcrumbs-expanded");e(f.filter(":last").find("a"),"breadcrumbs-parent");var d=c("#com-atlassian-confluence").hasClass("theme-documentation")?"breadcrumbs-homepage":"breadcrumbs-collector";e(f.filter(".first").find("a"),d)}function a(e,d,g){var f=null;e.mouseover(function(){f=setTimeout(g,d)});e.mouseout(function(){clearTimeout(f)})}AJS.bind("breadcrumbs.expanded",function(){AJS.trigger("analyticsEvent",{name:"breadcrumbs-expanded"})});b()});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-page-banner:soy-resources', location = 'soy/page-banner.soy' */
// This file was automatically generated from page-banner.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.PageBanner == 'undefined') { Confluence.Templates.PageBanner = {}; }


Confluence.Templates.PageBanner.banner = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div id="page-metadata-banner"><ul class="banner">');
  Confluence.Templates.PageBanner.renderSystemContentItems(opt_data, output);
  var itemList6 = opt_data.pageBannerItems;
  var itemListLen6 = itemList6.length;
  for (var itemIndex6 = 0; itemIndex6 < itemListLen6; itemIndex6++) {
    var itemData6 = itemList6[itemIndex6];
    Confluence.Templates.PageBanner.renderPageBannerItem(itemData6, output);
  }
  output.append('</ul></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.PageBanner.renderSystemContentItems = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<li id="system-content-items" class="noprint">');
  var itemList12 = opt_data.systemContentItems;
  var itemListLen12 = itemList12.length;
  for (var itemIndex12 = 0; itemIndex12 < itemListLen12; itemIndex12++) {
    var itemData12 = itemList12[itemIndex12];
    Confluence.Templates.PageBanner.itemAnchor(soy.$$augmentData(itemData12, {isSystemContentItem: true}), output);
  }
  output.append('</li>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.PageBanner.renderPageBannerItem = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<li class="page-metadata-item noprint ', (opt_data.isAuiButton) ? 'has-button' : '', '" ', (opt_data.linkId) ? ' id="' + soy.$$escapeHtml(opt_data.linkId) + '-wrapper"' : '', '>');
  Confluence.Templates.PageBanner.itemAnchor(opt_data, output);
  output.append('</li>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.PageBanner.itemAnchor = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<a href="', soy.$$escapeHtml(opt_data.href), '" title="', soy.$$escapeHtml(opt_data.tooltip), '" ', (opt_data.linkId) ? 'id="' + soy.$$escapeHtml(opt_data.linkId) + '"' : '', ' ', (opt_data.styleClasses) ? 'class="' + soy.$$escapeHtml(opt_data.styleClasses) + '"' : '', '>');
  Confluence.Templates.PageBanner.itemIcon(opt_data, output);
  output.append((! opt_data.isSystemContentItem) ? '<span>' + soy.$$escapeHtml(opt_data.label) + '</span>' : '', '</a>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.PageBanner.itemIcon = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.icon) ? '<img class="page-banner-item-icon" src="' + soy.$$escapeHtml(opt_data.icon.url) + '" style="height: ' + soy.$$escapeHtml(opt_data.icon.height) + 'px; width: ' + soy.$$escapeHtml(opt_data.icon.width) + 'px;"/>' : '');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.web.resources:view-comment', location = '/includes/js/comments.js' */
AJS.toInit(function(a){var e=Confluence.storageManager("comments"),f=function(){return confirm("Are you sure you want to delete the comment?")?(this.href+="&confirm=yes",!0):!1};Confluence.Comments={bindRemoveConfirmation:function(b){a("#comment-"+b+" .comment-action-remove a").click(f)}};if(a("#comments-section").length){AJS.isIE6&&(a(".logo.anonymous").each(function(){var b=document.createElement("div");b.className="replacement";AJS.applyPngFilter(b,this.src);a(this).replaceWith(b)}),a(".comment-actions .comment-permalink a").each(function(){a(this).addClass("filtered");
var b=a(this).css("background-image").replace(/^url\(\"?|\"?\)$/g,""),c=b.replace("light","dark");AJS.applyPngFilter(this,b);this.style.cursor="pointer";this.style.background="none";a(this).hover(function(){AJS.applyPngFilter(this,c)},function(){AJS.applyPngFilter(this,b)})}));a("#comments-section .comment:odd").addClass("odd");a(".comment-action-remove a").click(f);var d=a("#addcomment.comment-text"),c=a("#comments-text-editor textarea");c.focus(function(){d.addClass("active")}).blur(function(){a.trim(c.val()).length||
d.removeClass("active")}).bind("reset.default-text",function(){d.removeClass("active")});a("form[name='textcommentform']").submit(function(){var b=c.val();if(!a.trim(b)){alert("Comment text is empty. Cannot create empty comments.");return false}return true});a("#add-comment-rte").click(function(){c.hasClass("placeholded")||e.setItem("text-comment",a.trim(c.val()))});a("#addcomment #rte").length&&AJS.bind("init.rte",function(a,c){var d=e.getItem("text-comment");if(d){c.editor.setContent(d);e.setItem("text-comment","")}})}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.quickedit:quick-comment-page', location = 'soy/comments.soy' */
// This file was automatically generated from comments.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.Comments == 'undefined') { Confluence.Templates.Comments = {}; }


Confluence.Templates.Comments.displayReplyEditorLoadingContainer = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<ol class="comment-threads"><li class="comment-thread">');
  Confluence.Templates.Comments.displayCommentEditorCommon({comment: {'ownerId': opt_data.contentId, 'parentId': opt_data.parentCommentId}, commenter: opt_data.commenter, state: 'loading', mode: 'reply'}, output);
  output.append('</li></ol>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Comments.displayTopLevelCommentEditorPlaceholder = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  Confluence.Templates.Comments.displayCommentEditorCommon({comment: {'ownerId': opt_data.contentId}, commenter: opt_data.commenter, state: 'placeholder', mode: 'add'}, output);
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Comments.displayEditEditorContainer = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  Confluence.Templates.Comments.displayCommentEditorCommon({comment: {'ownerId': opt_data.contentId, 'id': opt_data.commentId}, commenter: opt_data.commenter, state: 'placeholder', mode: 'edit'}, output);
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Comments.editorLoadErrorMessage = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<p>', soy.$$escapeHtml(opt_data.message), '</p><p><a href="', soy.$$escapeHtml(opt_data.fallbackUrl), '">', soy.$$escapeHtml("Try again"), '</a></p>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Comments.displayCommentEditorCommon = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="quick-comment-container comment ', soy.$$escapeHtml(opt_data.mode), '">');
  Confluence.Templates.Comments.userLogo({userInfo: opt_data.commenter}, output);
  output.append('<div class="quick-comment-body"><div class="quick-comment-loading-container" style="display:', (opt_data.state == 'loading') ? 'block' : 'none', ';"></div><div id="editor-messages"></div><div id="all-messages"></div><form style="display:', (opt_data.state == 'loading') ? 'none' : 'block', ';" class="quick-comment-form aui" method="post" ');
  switch (opt_data.mode) {
    case 'add':
      output.append('name="inlinecommentform" action="', soy.$$escapeHtml(""), '/pages/doaddcomment.action?pageId=', soy.$$escapeHtml(opt_data.comment.ownerId), '"');
      break;
    case 'edit':
      output.append('name="editcommentform" action="', soy.$$escapeHtml(""), '/pages/doeditcomment.action?pageId=', soy.$$escapeHtml(opt_data.comment.ownerId), '&commentId=', soy.$$escapeHtml(opt_data.comment.id), '"');
      break;
    case 'reply':
      output.append('name="threadedcommentform"  action="', soy.$$escapeHtml(""), '/pages/doaddcomment.action?pageId=', soy.$$escapeHtml(opt_data.comment.ownerId), '&parentId=', soy.$$escapeHtml(opt_data.comment.parentId), '"');
      break;
  }
  output.append(' >', (opt_data.mode == 'add') ? '<div title="' + soy.$$escapeHtml("Add a Comment") + '" class="quick-comment-prompt"><span>' + soy.$$escapeHtml("Write a comment\u2026") + '</span></div>' : '', '</form></div></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Comments.userLogo = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<p class="comment-user-logo">');
  if (opt_data.userInfo.userName == null) {
    output.append('<img class="userLogo logo anonymous" src="', soy.$$escapeHtml("/s/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/_"), '/images/icons/profilepics/anonymous.png" alt="', soy.$$escapeHtml("User icon"), ': ', soy.$$escapeHtml("Anonymous"), '" title="', soy.$$escapeHtml("Anonymous"), '">');
  } else if (opt_data.userInfo.profilePicture.isDefault) {
    output.append('<a class="userLogoLink" data-username="', soy.$$escapeHtml(opt_data.userInfo.userName), '" href="', soy.$$escapeHtml(""), '/users/profile/editmyprofilepicture.action" title="', soy.$$escapeHtml("Add a picture of yourself"), '"><img class="userLogo logo defaultLogo" src="', soy.$$escapeHtml("/s/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/_"), '/images/icons/profilepics/add_profile_pic.png" alt="', soy.$$escapeHtml("User icon"), ': ', soy.$$escapeHtml("Add a picture of yourself"), '"></a>');
  } else {
    output.append('<a class="userLogoLink" data-username="', soy.$$escapeHtml(opt_data.userInfo.userName), '" href="');
    Confluence.Templates.User.userLinkUrl({username: opt_data.userInfo.userName}, output);
    output.append('"><img class="userLogo logo" src="', soy.$$escapeHtml(opt_data.userInfo.profilePicture.path), '" alt="', soy.$$escapeHtml("User icon"), ': ', soy.$$escapeHtml(opt_data.userInfo.userName), '" title="', soy.$$escapeHtml(opt_data.userInfo.userName), '"></a>');
  }
  output.append('</p>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Comments.displayComment = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (opt_data.comment.parentId == 0 && opt_data.firstReply) {
    output.append('<div id="comments-section" class="pageSection group"><div class="section-header"><h2 id="comments-section-title" class="section-title">', soy.$$escapeHtml("1 Comment"), '</h2>');
    Confluence.Templates.Comments.commentThread({comment: opt_data.comment, commenter: opt_data.commenter, highlight: opt_data.highlight, topLevel: true}, output);
    output.append('</div></div>');
  } else if (opt_data.firstReply) {
    Confluence.Templates.Comments.commentThread({comment: opt_data.comment, commenter: opt_data.commenter, highlight: opt_data.highlight, topLevel: false}, output);
  } else {
    Confluence.Templates.Comments.commentThreadItem({comment: opt_data.comment, commenter: opt_data.commenter, highlight: true}, output);
  }
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Comments.commentThread = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<ol class="comment-threads', (opt_data.topLevel) ? ' top-level" id="page-comments' : '', '">');
  Confluence.Templates.Comments.commentThreadItem(opt_data, output);
  output.append('</ol>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Comments.commentThreadItem = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<li id="comment-thread-', soy.$$escapeHtml(opt_data.comment.id), '" class="comment-thread">');
  Confluence.Templates.Comments.commentView(opt_data, output);
  output.append('</li>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Comments.commentView = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="comment', (opt_data.highlight == true) ? ' focused' : '', '" id="comment-', soy.$$escapeHtml(opt_data.comment.id), '">');
  Confluence.Templates.Comments.userLogo({userInfo: opt_data.commenter}, output);
  output.append('<div class="comment-header"><h4 class="author">', (opt_data.commenter.userName == null) ? soy.$$escapeHtml("Anonymous") : '<a href="' + soy.$$escapeHtml("") + '/display/~' + soy.$$escapeUri(opt_data.commenter.userName) + '" class="url fn confluence-userlink" data-username="' + soy.$$escapeHtml(opt_data.commenter.userName) + '">' + soy.$$escapeHtml(opt_data.commenter.displayName) + '</a>', '</h4></div><div class="comment-body"><div class="comment-content wiki-content">', opt_data.comment.html, '</div><div class="comment-actions">');
  Confluence.Templates.Comments.displayCommentActions({section: 'secondary', actions: opt_data.comment.secondaryActions, commentId: opt_data.comment.id}, output);
  Confluence.Templates.Comments.displayCommentActions({section: 'primary', actions: opt_data.comment.primaryActions, commentId: opt_data.comment.id}, output);
  output.append('</div></div></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Comments.displayCommentActions = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<ul class="comment-actions-', soy.$$escapeHtml(opt_data.section), '">');
  if (opt_data.actions != null) {
    var itemList211 = opt_data.actions;
    var itemListLen211 = itemList211.length;
    for (var itemIndex211 = 0; itemIndex211 < itemListLen211; itemIndex211++) {
      var itemData211 = itemList211[itemIndex211];
      output.append('<li ', (itemData211.style != null) ? ' class="' + soy.$$escapeHtml(itemData211.style) + '"' : '', '><a ', (itemData211.tooltip != null) ? ' title="' + soy.$$escapeHtml(itemData211.tooltip) + '"' : '', ' href="', soy.$$escapeHtml(itemData211.url), '" ', (itemData211.id) ? ' id="' + soy.$$escapeHtml(itemData211.id) + '-' + soy.$$escapeHtml(opt_data.commentId) + '"' : '', '><span>', soy.$$escapeHtml(itemData211.label), '</span></a></li>\n');
    }
  }
  output.append('</ul>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.quickedit:quick-comment-page', location = 'jscripts/comment-display-manager.js' */
Confluence.CommentDisplayManager=function(f){return{_updateCommentSectionTitle:function(){var a=f("#comments-section-title");if(0!=a.length){var b=this.commentCount();1==b?a.text("1 Comment"):a.text(AJS.format("{0} Comments",b))}},addComment:function(a,b,e,c){a={comment:b,commenter:a,highlight:e,context:{contextPath:AJS.Meta.get("context-path"),staticResourceUrlPrefix:AJS.Meta.get("static-resource-url-prefix")}};if(this.hasComments()){if(0==b.parentId)a.firstReply=
!1,e=AJS.$("#comments-section .comment-threads.top-level");else{var e=AJS.$("#comment-thread-"+b.parentId),d=e.children(".commentThreads");d.length?(a.firstReply=!1,e=d):a.firstReply=!0}c||this.clearFocus();c=f(Confluence.Templates.Comments.displayComment(a));c.addClass("fadeInComment");e.append(c);this._updateCommentSectionTitle()}else a.firstReply=!0,c=f(Confluence.Templates.Comments.displayComment(a)),c.addClass("fadeInComment"),f("#comments-section").prepend(c);Confluence.Comments.bindRemoveConfirmation(b.id);
b=this.getCommentNode(b.id);b.scrollToElement();return b},addOrUpdateComment:function(a,b,e,c){var d=this.getCommentNode(b.id);return d?(d.find(".comment-content").html(b.html),c||this.clearFocus(),e&&d.addClass("focused"),d.addClass("fadeInComment"),d.scrollToElement(),d):this.addComment.apply(this,arguments)},isVisible:function(){return!f("#page-comments").hasClass("hidden")},hasComments:function(){return 0<this.commentCount()},commentCount:function(){return AJS.$("#comments-section .comment").not(".quick-comment-container").length},
clearFocus:function(){f(".comment").removeClass("focused")},getCommentNode:function(a){a=f("#comment-"+a);return a.length?a:null},getParentId:function(a){a=getCommentNode(a);return null!=a&&(a=a.closest("div.comment"),a.length)?(a=a.attr("id"),a=/\d+/.exec(a),parseInt(a)):0}}}(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.quickedit:quick-comment-page', location = 'jscripts/scroll-util.js' */
AJS.$(function(e){e.fn.extend({scrollToElement:function(){this.scrollWindowToElement()||this.scrollOverflowContainerToElement();return this},scrollWindowToElement:function(){function b(){return"pageYOffset"in window?window.pageYOffset:document.documentElement.scrollTop}var a=b(),c;if("number"==typeof window.innerWidth)c=window.innerHeight;else if(document.documentElement&&document.documentElement.clientWidth)c=document.documentElement.clientHeight;else return this[0].scrollIntoView(!1),!0;var d=this.offset().top,
f=this.height();return d+f+40>a+c?(this[0].scrollIntoView(!1),window.scrollBy(0,40),a!=b()):!0},scrollOverflowContainerToElement:function(){var b=null;this.parents().each(function(){var a=AJS.$(this).css("overflow");if("auto"==a||"scroll"==a)return b=AJS.$(this),!1});if(!b)return!1;var a=b.height(),c=this.offset().top,d=this.height(),a=a-(c+d+40);0>a&&(b[0].scrollTop-=a);return!0}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.quickreload:quick-reload', location = 'templates/quick-reload.soy' */
// This file was automatically generated from quick-reload.soy.
// Please don't edit this file by hand.

if (typeof QuickReload == 'undefined') { var QuickReload = {}; }
if (typeof QuickReload.Templates == 'undefined') { QuickReload.Templates = {}; }


QuickReload.Templates.notice = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="qr-notice qr-aui-message aui-message aui-message-hint"></div>');
  return opt_sb ? '' : output.toString();
};


QuickReload.Templates.noticeItem = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="qr-notice-item"><div class="qr-notice-content"><p><span class="qr-notice-text"></span></p>');
  aui.buttons.button({text: opt_data.show, type: 'link', extraClasses: 'qr-notice-show'}, output);
  output.append('<a href="#" class="qr-notice-ignore">');
  aui.icons.icon({useIconFont: true, size: 'small', icon: 'close-dialog'}, output);
  output.append('</a></div></div>');
  return opt_sb ? '' : output.toString();
};


QuickReload.Templates.inlineCommentNoticeItem = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="qr-notice-item qr-notice-inline-comment-item"><strong class="qr-inline-comment-title">', soy.$$escapeHtml("New inline comment"), '</strong><a href="#" class="qr-notice-inline-comment-ignore">');
  aui.icons.icon({useIconFont: true, size: 'small', icon: 'close-dialog'}, output);
  output.append('</a>');
  QuickReload.Templates.inlineCommentNoticeHeader(opt_data, output);
  output.append('<div class="qr-notice-inline-comment-content qr-notice-edit-message"><span class="qr-notice-inline-commentter">');
  QuickReload.Templates.noticeInlineComment(opt_data, output);
  output.append('</span>');
  aui.buttons.button({text: (opt_data.reloadRequired) ? soy.$$escapeHtml("Reload page") : soy.$$escapeHtml("Show"), type: 'link', extraClasses: 'qr-notice-inline-show', extraAttributes: 'reload-required=' + opt_data.reloadRequired}, output);
  output.append('</div></div>');
  return opt_sb ? '' : output.toString();
};


QuickReload.Templates.commentNoticeItem = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="qr-notice-item qr-notice-page-', soy.$$escapeHtml(opt_data.type), '-item"><strong class="page-comment-message">', soy.$$escapeHtml(opt_data.message), '</strong><a href="#" class="qr-notice-ignore">');
  aui.icons.icon({useIconFont: true, size: 'small', icon: 'close-dialog'}, output);
  output.append('</a><div class="qr-notice-authors">');
  QuickReload.Templates.noticeHeader(opt_data, output);
  output.append('</div><div class="qr-notice-page-comment-content qr-notice-edit-message"><span class="qr-notice-page-comment-author"></span>');
  aui.buttons.button({text: (opt_data.type == 'page') ? soy.$$escapeHtml("Reload page") : soy.$$escapeHtml("Show"), type: 'link', extraClasses: 'qr-notice-show'}, output);
  output.append('</div></div>');
  return opt_sb ? '' : output.toString();
};


QuickReload.Templates.inlineCommentNoticeHeader = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="qr-notice-author">');
  aui.avatar.avatar({size: 'small', avatarImageUrl: opt_data.authorAvatarUrl, extraClasses: 'qr-author-avatar'}, output);
  output.append('<span class="inline-comment-content">', soy.$$escapeHtml(opt_data.noticeText), '<span></div>');
  return opt_sb ? '' : output.toString();
};


QuickReload.Templates.noticeHeader = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="qr-notice-author">');
  var commentUserList81 = opt_data.commentUsers;
  var commentUserListLen81 = commentUserList81.length;
  for (var commentUserIndex81 = 0; commentUserIndex81 < commentUserListLen81; commentUserIndex81++) {
    var commentUserData81 = commentUserList81[commentUserIndex81];
    output.append('<span>');
    if (opt_data.type == 'comments') {
      aui.avatar.avatar({size: 'small', avatarImageUrl: commentUserData81.commenter.profilePicture.path, title: commentUserData81.commenter.displayName != '' ? commentUserData81.commenter.displayName : "Anonymous", extraClasses: 'qr-author-avatar'}, output);
    } else {
      aui.avatar.avatar({size: 'small', avatarImageUrl: commentUserData81.profilePicture.path, title: commentUserData81.displayName != '' ? commentUserData81.displayName : "Anonymous", extraClasses: 'qr-author-avatar'}, output);
    }
    output.append('</span>');
  }
  output.append('<span class="qr-notice-page-comment-text">', soy.$$escapeHtml(opt_data.noticeText), '</span></div>');
  return opt_sb ? '' : output.toString();
};


QuickReload.Templates.noticePageEdit = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<span classs="page-edit-content">', soy.$$escapeHtml("by"), '  </span><span class="editor">');
  Confluence.Templates.User.usernameLink({canView: false, username: opt_data.commenter.userName, fullName: opt_data.commenter.displayName != '' ? opt_data.commenter.displayName : "Anonymous"}, output);
  output.append('</span> <span class="page-edit-content-by"></span>');
  return opt_sb ? '' : output.toString();
};


QuickReload.Templates.noticeInlineComment = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<span classs="page-edit-content">', soy.$$escapeHtml("by"), '  </span><span class="editor">');
  Confluence.Templates.User.usernameLink({canView: false, username: opt_data.authorUserName, fullName: opt_data.authorDisplayName != '' ? opt_data.authorDisplayName : "Anonymous"}, output);
  output.append('</span> <span class="page-edit-content-by"></span>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.quickreload:quick-reload', location = 'js/quick-reload-comments.js' */
Confluence.QuickReload=Confluence.QuickReload||{};
AJS.toInit(function(a){function f(a){return a.comment.id}var d=Confluence.CommentDisplayManager;Confluence.QuickReload.Comments=function(){var c=[];return{property:"comments",singleText:function(){return "New comment"},manyText:function(a){return AJS.format("{0} New comments",a.length)},showText:function(a){return 1<a.length?"Show all":"Show"},ignoreOnce:function(a){c.push(a)},filterNewResults:function(d,
b){if(0===b.length)return b;var g=a.map(d,f);return a(b).filter(function(b,d){if(d.comment.isInlineComment)return!1;var e=f(d);if(0<=a.inArray(e,g))return!1;e=a.inArray(e,c);return 0<=e?(c.splice(e,1),!1):!0}).splice(0)},update:function(c){d.clearFocus();a.map(c,function(b){var c=b.comment;if(!c.isInlineComment){var h=null!=d.getCommentNode(f(b)),b=d.addOrUpdateComment(b.commenter,c,!0,!0);Confluence.Likes&&!h&&(Confluence.Likes.appendAction(a(b)),Confluence.Likes.updateComment(a(b),{}))}})}}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.quickreload:quick-reload', location = 'js/quick-reload-inline-comments.js' */
Confluence.QuickReload=Confluence.QuickReload||{};AJS.toInit(function(c){Confluence.QuickReload.InlineComments=function(){return{property:"comments",singleText:function(b){return b&&b.comment&&c("<div>").html(b.comment.html).text()},filterNewResults:function(b,a){return 0===a.length?a:c(a).filter(function(b,a){return!a.comment.isInlineComment||a.commenter.userName===AJS.Meta.get("remote-user")?!1:!0}).splice(0)}}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.quickreload:quick-reload', location = 'js/quick-reload-page.js' */
Confluence.QuickReload=Confluence.QuickReload||{};AJS.toInit(function(){Confluence.QuickReload.Page=function(){return{property:"page",singleText:function(){return "New page edits"},manyText:function(){return "New page edits"},showText:function(){},filterNewResults:function(b,a){return a},update:function(){window.location.reload()}}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.quickreload:quick-reload', location = 'js/quick-reload-alert.js' */
Confluence.QuickReload=Confluence.QuickReload||{};
AJS.toInit(function(d){var g=QuickReload.Templates;Confluence.QuickReload.Notice=function(){var h=0,m=0,k=d("<div>").addClass("qr-notice-container").appendTo("body"),c,i=0;return{removeAllNotices:function(){0<k.length&&k.empty()},addPageNotice:function(a,b,n,j,o,p){c=k.find(".qr-notice:first");if(0===c.length||0===h)c=d(g.notice()),c.appendTo(k);var f=[],l=[],m="qr-notice-page-"+b+"-item",e=c.find("."+m),q=a.slice(0);"comments"===b?d.each(q,function(a,b){_.contains(l,b.commenter.userName)?f=_.filter(f,
function(a){return a.commenter.userName!==b.commenter.userName}):l.push(b.commenter.userName);f.unshift(b)}):d.each(q,function(a,b){_.contains(l,b.editor.userName)?f=_.filter(f,function(a){return a.userName!==b.editor.userName}):l.push(b.editor.userName);f.unshift(b.editor)});i=c.find(".qr-notice-item:first").width();var a=f.length,r="";if(0===e.length){h++;e.addClass(m);"comments"===b?(8<a?e=d(g.commentNoticeItem({commentUsers:f.slice(0,8),noticeText:"",message:n,type:b})).appendTo(c):(1==a&&(r=
d("<div>").html(q.pop().comment.html).text()),e=d(g.commentNoticeItem({commentUsers:f,noticeText:this._trimToLengthContentDoubleQuote(r,30),message:n,type:b})).appendTo(c)),d(g.noticePageEdit({commenter:f[0].commenter})).appendTo(e.find(".qr-notice-page-comment-author"))):(e=d(g.commentNoticeItem({commentUsers:f,noticeText:"",message:n,type:b})).appendTo(c),e.height(74),d(g.noticePageEdit({commenter:f[0]})).appendTo(e.find(".qr-notice-page-comment-author")));0<i&&e.width(i);var t=this,b=function(a){h--;
if(h===0)t._hideNotice(c,function(){c.remove();c=void 0;i=0});else{h===1&&d(".qr-notice-shadow").remove();e.remove()}p();a.preventDefault()};2==a?e.find(".page-edit-content-by").text("and 1 other"):2<a&&e.find(".page-edit-content-by").text(AJS.format("and {0} others",a-1));e.find(".qr-notice-show").text(j);e.find(".qr-notice-ignore").click(b);e.find(".qr-notice-show").click(b).click(o)}else e.find(".qr-notice-page-comment-author").empty(),e.find(".qr-notice-author").remove(),
"comments"===b?(d(g.noticePageEdit({commenter:f[0].commenter})).appendTo(e.find(".qr-notice-page-comment-author")),1==a?(r=d("<div>").html(q.pop().comment.html).text(),d(g.noticeHeader({commentUsers:f,type:b,noticeText:this._trimToLengthContentDoubleQuote(r,30)})).appendTo(e.find(".qr-notice-authors"))):8<a?d(g.noticeHeader({commentUsers:f.slice(0,8),type:b,noticeText:""})).appendTo(e.find(".qr-notice-authors")):d(g.noticeHeader({commentUsers:f,type:b,noticeText:""})).appendTo(e.find(".qr-notice-authors")),
e.find(".qr-notice-show").text(j)):(d(g.noticePageEdit({commenter:f[0]})).appendTo(e.find(".qr-notice-page-comment-author")),1==a?d(g.noticeHeader({commentUsers:f,type:b,noticeText:""})).appendTo(e.find(".qr-notice-authors")):8<a?d(g.noticeHeader({commentUsers:f.slice(0,8),type:b,noticeText:""})).appendTo(e.find(".qr-notice-authors")):d(g.noticeHeader({commentUsers:f,type:b,noticeText:""})).appendTo(e.find(".qr-notice-authors"))),2==a?e.find(".page-edit-content-by").text("and 1 other"):
2<a&&e.find(".page-edit-content-by").text(AJS.format("and {0} others",a-1));k.find(".qr-notice-item").css("z-index","");e.css("z-index",1E4);e.find(".page-comment-message").text(n);this._animatePageNotice()},updateInlineCommentNotice:function(a,b,c,d,g,h){var f=this._getInlineCommentNotice(a);return f&&0<f.length&&(d=(f="true"===f.find(".qr-notice-show").attr("reload-required"))?d:g,this._removeInlineCommentNotice(a))?(this._addInlineCommentItem(a,b,f,c,d,h),this._renderInlineCommentCount(),
!0):!1},addInlineCommentNotice:function(a,b,i,j,o,p){0===m&&(!c||0===c.length)?(this._getNextNoticeTop(),c=d(g.notice()),c.appendTo(k)):c=d(".qr-notice:first");this._addInlineCommentItem(a,b,i,j,o,p);m++;h++;this._renderInlineCommentCount();this._animateInlineCommentNotice()},scroll:function(a){var b=d("body").hasClass("theme-documentation"),c=d("#header").offset().top+d("#header").height(),j=0,g=0;b?g=c:(j=d("#main-header").offset().top+20,b=k.offset().top,a<=j?g=j-a:a>j&&0<b?g=0:b<j&&(g=j));this._setNoticeContainerTop(g)},
_setNoticeContainerTop:function(a){k.css("top",a+"px")},_getInlineCommentNotice:function(a){if(c)return c.find("#"+a)},_removeInlineCommentNotice:function(a){return c&&(a=c.find("#"+a),0!==a.length)?(a.remove(),!0):!1},_animatePageNotice:function(){if(!c)return!1;c.appendTo(k);var a=c.find(".qr-notice-ignore");c.mouseenter(function(){a.css("opacity",".3")}).mouseleave(function(){a.css("opacity","0")});a.mouseenter(function(){a.css("opacity","1")}).mouseleave(function(){a.css("opacity",".3")});var b=
this;1===h&&!c.hasClass("qr-aui-message-collapsed")&&c.animate({display:"block",opacity:"show",top:20},500).queue(function(){setTimeout(function(){if(0<h)var a=setInterval(function(){if(!b._isAnimatingNotices()){clearInterval(a);var c=d(".qr-notice,.qr-notice-shadow");c.addClass("qr-aui-message-collapsed");c.children().animate({width:"+=35"},500);i+=35}},500)},5E3);d(this).dequeue()});if(1<h&&0===k.find(".qr-notice-shadow").length)var g=setInterval(function(){b._isAnimatingNotices()||(clearInterval(g),
b._addCommentNoticeShadow(c))},500)},_trimToLength:function(a,b){return jQuery.trim(a.length)>b?jQuery.trim(a).substring(0,b).split(" ").slice(0,-1).join(" ")+"...":a},_trimToLengthContentDoubleQuote:function(a,b){return 0==jQuery.trim(a.length)?a:jQuery.trim(a.length)>b?'"'+jQuery.trim(a).substring(0,b).split(" ").slice(0,-1).join(" ")+'..."':'"'+a+'"'},_addInlineCommentItem:function(a,b,n,j,o,p){var f=this._trimToLength(j.displayName,25),l=d(g.inlineCommentNoticeItem({authorDisplayName:f,authorUserName:j.userName,
authorAvatarUrl:j.profilePicture.path,noticeText:this._trimToLengthContentDoubleQuote(b,30),reloadRequired:n}));l.attr("id",a);l.appendTo(c);0===i&&(i=c.find(".qr-notice-item:first").width());35===i&&(i=303===c.find(".qr-notice-item:first").width()?c.find(".qr-notice-item:first").width():i+c.find(".qr-notice-item:first").width());l.width(i);k.find(".qr-notice-item").css("z-index","");l.css("z-index",1E4);var s=this,a=function(a){m--;h--;0===h?s._hideNotice(c,function(){c.remove();c=void 0;i=0}):(1===
h&&d(".qr-notice-shadow").remove(),l.remove());p();a.preventDefault()},e=l.find(".qr-notice-inline-comment-ignore");e.click(a);c.mouseenter(function(){e.css("opacity",".3")}).mouseleave(function(){e.css("opacity","0")});e.mouseenter(function(){e.css("opacity","1")}).mouseleave(function(){e.css("opacity",".3")});l.find(".qr-notice-inline-show").click(a).click(o)},_getNextNoticeTop:function(){var a=d(".qr-notice:last"),b=20;0<a.length&&(b=a.position().top+a.height()+20);return b},_hideNotice:function(a,
b){a.animate({opacity:"hide",right:0},500,b)},_animateInlineCommentNotice:function(){if(!c)return!1;var a=this;1===h&&!c.hasClass("qr-aui-message-collapsed")&&c.animate({display:"block",opacity:"show",top:20},500).queue(function(){setTimeout(function(){if(0<h)var b=setInterval(function(){if(!a._isAnimatingNotices()){clearInterval(b);var c=d(".qr-notice,.qr-notice-shadow");c.addClass("qr-aui-message-collapsed");c.children().animate({width:"+=35"},500);i+=35}},500)},5E3);d(this).dequeue()});if(1<h&&
0===k.find(".qr-notice-shadow").length)var b=setInterval(function(){a._isAnimatingNotices()||(clearInterval(b),a._addCommentNoticeShadow(c))},500)},_renderInlineCommentCount:function(){1<m?c.find(".qr-inline-comment-title").text("New inline comments"):c.find(".qr-inline-comment-title").text("New inline comment")},_addCommentNoticeShadow:function(a){var b=a.clone().removeClass("qr-notice").removeAttr("height").addClass("qr-notice-shadow").empty();
d("<div>").addClass("qr-notice-inline-comment-item").css("bottom","0px").css("right","0px").width(a.find(".qr-notice-item:first").width()).appendTo(b);b.css("top",a.position().top+30+"px").width(a.width()-20).css("opacity",".6").css("right","30px");b.insertAfter(a)},_isAnimatingNotices:function(){var a=d(".qr-notice");return a.find(".qr-notice-page-page-item").is(":animated")||a.find(".qr-notice-page-comments-item").is(":animated")||a.find(".qr-notice-inline-comment-item").is(":animated")}}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.quickreload:quick-reload', location = 'js/quick-reload-timer.js' */
Confluence.QuickReload=Confluence.QuickReload||{};
AJS.toInit(function(a){Confluence.QuickReload.SmartTimer=function(h,i){function f(){c&&clearTimeout(c);var a=setTimeout,d=e.min,b;b=(document.hidden?j:1)*Math.ceil(((new Date).getTime()-g)/e.inactivity);b=Math.max(Math.min(e.max/e.min,b),1);b=isNaN(b)?1:b;c=a(function(){h();f()},d*b)}var e=a.extend({min:3E4,max:36E5,inactivity:12E4},i),j=3,g=(new Date).getTime(),c=null,d=function(){if(c){var a=(new Date).getTime()-g>e.inactivity;g=(new Date).getTime();a&&(h(),f())}};document.addEventListener("visibilitychange",
function(){document.hidden||d()},!1);a(window).focus(d);a("body").click(d);a(window).scroll(d);return{start:function(){f()},stop:function(){clearTimeout(c);c=null}}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.quickreload:quick-reload', location = 'js/quick-reload.js' */
Confluence.QuickReload=Confluence.QuickReload||{};
AJS.toInit(function(b){function m(f){g-=f;0===g&&(b("body").hasClass("theme-documentation")?b("#splitter-content").unbind("scroll",n):b(window).unbind("scroll",j))}function q(){b("body").hasClass("theme-documentation")?b("#splitter-content").unbind("scroll",n).scroll(n):b(window).unbind("scroll",j).scroll(j)}var u={404:"not found - the plugin has been probably been removed or disabled from Confluence",500:"generic server error",503:"service unavailable",504:"gateway timeout"};if(!AJS.DarkFeatures.isEnabled("quickreload.disabled")&&
Confluence.CommentDisplayManager){var r=AJS.Meta.get("page-id");if(void 0!=r){var v=document.title,s=new Confluence.QuickReload.Comments,d=new Confluence.QuickReload.InlineComments,c=new Confluence.QuickReload.Page,w=[s,c],i=new Confluence.QuickReload.Notice;b("#editPageLink").click(function(){i.removeAllNotices()});var t=b("meta[name='confluence-request-time']").attr("content")||(new Date).getTime(),g=0,o=function(){document.title=(0<g?"("+g+") ":"")+v};Confluence.QuickReload.update=function(){b("body").hasClass("contenteditor")?
Confluence.QuickReload.disable():b.ajax({type:"GET",url:Confluence.getContextPath()+"/rest/quickreload/latest/"+r+"?since="+encodeURIComponent(t),dataType:"json"}).done(function(f,h,c){if(204!==c.status){var k=!1;t=f.time;b.map(w,function(a){var b=f[a.property];a.results=a.results||[];if(b){var e=a.results.concat(a.filterNewResults(a.results,b)),b=e.length-a.results.length,d=0<b;a.results=e;if(d){q();var c=!1,h=function(){m(a.results.length);c||o()},e=function(){a.update(a.results);a.results=[];h();
Confluence.CommentDisplayManager._updateCommentSectionTitle()};if(AJS.DarkFeatures.isEnabled("confluence.quick-reload-automated"))return c=!0,e();i.addPageNotice(a.results,a.property,1===a.results.length?a.singleText(a.results[0],function(a){return a.displayName}):a.manyText(a.results),a.showText(a.results),e,h)}k|=d;g+=b}});k&&j();d.inlineCommentResults=d.inlineCommentResults||[];h=d.filterNewResults(d.inlineCommentResults,f[d.property]);g+=h.length;d.inlineCommentResults=d.inlineCommentResults.concat(h);
var c=0<h.length,l=function(){m(1);o()};c&&(q(),j(),b.each(h,function(a,f){var e,c=f.comment;e=0===c.parentId?c.id:c.parentId;var h=function(){AJS.trigger("qr:show-new-thread",e)},g=function(){var a=AJS.Meta.Links.canonical(),b=-1===a.indexOf("?")?"?":"&";window.location=a+b+"focusedCommentId="+e+"#comment-"+e};i.updateInlineCommentNotice(e,d.singleText(f),f.commenter,g,h,l)?m(1):0===f.comment.parentId?(c=new b.Deferred,c.fail(function(a){i.addInlineCommentNotice(e,d.singleText(a),!0,a.commenter,
g,l)}),c.done(function(a){i.addInlineCommentNotice(e,d.singleText(a),!1,a.commenter,h,l)}),AJS.trigger("qr:add-new-highlight",[f,c])):i.addInlineCommentNotice(e,d.singleText(f),!1,f.commenter,h,l)}));(k=k||c)&&o()}}).fail(function(b){b=b||{};if(b=u[b.status])Confluence.QuickReload.disable(),AJS.log('Quick comment reload plugin has been disabled in this page due to a server error: "'+b+'". Please refresh the page to get it back.')})};c={};AJS.DarkFeatures.isEnabled("confluence.quick-reload-automated")&&
(c.min=5E3);var p=new Confluence.QuickReload.SmartTimer(Confluence.QuickReload.update,c);Confluence.QuickReload.disable=function(){i.removeAllNotices();p.stop()};Confluence.QuickReload.enable=function(){p.start()};p.start();AJS.bind("page.commentAddedOrUpdated",function(b,c){s.ignoreOnce(c.commentId)});var j=function(){i.scroll(b(window).scrollTop())},n=function(){i.scroll(b("#splitter-content").scrollTop())}}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.auiplugin:aui-flag', location = '/js/aui/flag.js' */
(function(A){define("aui/flag",[],function(){return A(AJS,AJS.$,AJS.template)})})(function(L,F,N){var O=5000;var A="aui-flag-container";var E={body:"",persistent:false,close:"",title:"",type:"info"};function J(R){if(R.hasOwnProperty("persistent")){var P;if(R.persistent){P=L.deprecate.getMessageLogger("persistent: true","5.8.0",{alternativeName:"close: never",extraInfo:"See https://ecosystem.atlassian.net/browse/AUI-2893."})}else{if(!R.persistent){P=L.deprecate.getMessageLogger("persistent: false","5.8.0",{alternativeName:"close: manual",extraInfo:"See https://ecosystem.atlassian.net/browse/AUI-2893."})}}P()}R=F.extend({},E,R);var Q=R.close!=="never"&&(R.close||(R.persistent!==true));var S=D(R,Q);G(S);if(R.close==="auto"){M(S);C(S)}else{if(R.close==="manual"){M(S)}else{if(R.close==="never"){}else{if(!R.persistent){M(S)}}}}H();return K(S)}function G(Q){var P=Q[0];P.close=function(){B(Q)}}function D(Q,P){var R='<div class="aui-flag"><div class="aui-message aui-message-{type} {type} {closeable} shadowed"><p class="title"><strong>{title}</strong></p>{body}<!-- .aui-message --></div></div>';var S=N(R).fill({"body:html":Q.body||"",closeable:P?"closeable":"",title:Q.title||"",type:Q.type}).toString();return F(S)}function M(Q){var P=F('<span class="aui-icon icon-close" role="button" tabindex="0"></span>');P.click(function(){B(Q)});P.keypress(function(R){if((R.which===L.keyCode.ENTER)||(R.which===L.keyCode.SPACE)){B(Q);R.preventDefault()}});return Q.find(".aui-message").append(P)[0]}function C(P){P.find(".aui-message").addClass("aui-will-close");setTimeout(function(){P[0].close()},O)}function B(Q){var P=Q.get(0);P.setAttribute("aria-hidden","true");P.dispatchEvent(new CustomEvent("aui-flag-close",{bubbles:true}));return P}function H(){var Q=I();var P=Q.find(".aui-flag");P.get().forEach(function(R){var S=R.getAttribute("aria-hidden")==="true";if(S){F(R).remove()}})}function I(){return F("#"+A)}function K(Q){var P=I();if(!P.length){P=F('<div id="'+A+'"></div>');F("body").prepend(P)}Q.appendTo(P);L._internal.animation.recomputeStyle(Q);return Q.attr("aria-hidden","false")[0]}return J});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.aui.staging:confluence-flags', location = 'flag/confluence-flag.js' */
(function(f){define("confluence/flag",function(){return f(AJS,AJS.$,AJS.template)})})(function(f,d,j){function h(a){var b=d('<span class="aui-icon icon-close" role="button" tabindex="0"></span>');b.click(function(){g(a)});b.keypress(function(b){if(b.which===f.keyCode.ENTER||b.which===f.keyCode.SPACE)g(a),b.preventDefault()});return a.find(".aui-message").append(b)[0]}function g(a){var b=a.get(0);b.setAttribute("aria-hidden","true");a=a.parent();i(a);b.dispatchEvent(new CustomEvent("aui-flag-close",
{bubbles:!0}));return b}function i(a){a.hasClass("aui-flag-stack")&&a.children('.aui-flag:not([aria-hidden="true"])').length&&(a.children(".aui-flag-stack-top-item").removeClass("aui-flag-stack-top-item"),a.children('.aui-flag:not([aria-hidden="true"])').last().addClass("aui-flag-stack-top-item"))}var k={body:"",close:"manual",title:"",type:"info",fifo:!1};return function(a){var a=d.extend({},k,a),b,c=a,c=j('<div class="aui-flag {extraClasses}"><div class="aui-message aui-message-{type} {type} {closeable} shadowed"><p class="title"><strong>{title}</strong></p>{body}<\!-- .aui-message --\></div></div>').fill({"body:html":c.body||
"",closeable:"never"===c.close?"":"closeable",title:c.title||"",type:c.type,extraClasses:c.extraClasses||""}).toString();b=d(c);b[0].close=function(){g(b)};"auto"===a.close?(h(b),b.find(".aui-message").addClass("aui-will-close"),setTimeout(function(){b[0].close()},5E3)):"manual"===a.close&&h(b);d("#aui-flag-container").find(".aui-flag").get().forEach(function(a){a.getAttribute("aria-hidden")==="true"&&d(a).remove()});c=d("#aui-flag-container");c.length||(c=d('<div id="aui-flag-container"></div>'),
d("body").prepend(c));if(a.stack){var e=d('[data-aui-flag-stack="'+a.stack+'"]');e.length||(e=d('<div data-aui-flag-stack="'+a.stack+'" class="aui-flag-stack"></div>'),e.appendTo(c));e.find('[aria-hidden="false"]').length||e.detach().appendTo(c);a.fifo?b.appendTo(e):b.prependTo(e);i(e)}else b.appendTo(c);f._internal.animation.recomputeStyle(b);a=b.attr("aria-hidden","false")[0];a.dispatchEvent(new CustomEvent("aui-flag-show",{bubbles:!0}));return a}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.aui.staging:confluence-flags', location = 'flag/confluence-flag-scroll.js' */
require(["jquery","ajs"],function(f,c){function g(){var a=f("#"+h);if(a.find('.aui-flag[aria-hidden="false"]').length){var b;b=0;i?b=f("#header").height()+d:(b=e.scrollTop(),b=b<=j-d?j-Math.max(b,0):d);a.css("top",b)}}var d=20,j=71,h="aui-flag-container",i=!1,e;c.toInit(function(a){e=(i=a("body").hasClass("theme-documentation"))?a("#splitter-content"):a(window);e.on("scroll",g);document.addEventListener("aui-flag-show",g);c.bind("rte-ready",function(){"page"===c.Meta.get("content-type")&&a("#"+h).find('.aui-flag[aria-hidden="false"]').each(function(){this.close()})})})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.quickreload:quick-reload-resources', location = 'main/quick-reload.soy' */

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.quickreload:quick-reload-resources', location = 'utils/quick-reload-timer.js' */

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.quickreload:quick-reload-resources', location = 'utils/quick-reload-count.js' */

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.quickreload:quick-reload-resources', location = 'handlers/quick-reload-comments.js' */

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.quickreload:quick-reload-resources', location = 'handlers/quick-reload-inline-comments.js' */

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.quickreload:quick-reload-resources', location = 'handlers/quick-reload-page.js' */

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.quickreload:quick-reload-resources', location = 'main/quick-reload-manager.js' */

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.quickreload:quick-reload-bootstrap', location = 'main/quick-reload-main.js' */

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-content-report-plugin:resources', location = 'com/atlassian/confluence/plugins/content_report/js/tablesorter-date-parser.js' */
(function(A){A(function(){A.tablesorter.addParser({id:"dateAttributeParser",is:function(B,D,C){return A(C).is(".content-report-table-macro .modified")
},format:function(B,D,C,E){return A(C).attr("data-sortable-date")
},type:"numeric"})
})
})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-content-report-plugin:resources', location = 'com/atlassian/confluence/plugins/content_report/soy/content-report-table.soy' */
// This file was automatically generated from content-report-table.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.Plugins == 'undefined') { Confluence.Templates.Plugins = {}; }
if (typeof Confluence.Templates.Plugins.ContentReport == 'undefined') { Confluence.Templates.Plugins.ContentReport = {}; }


Confluence.Templates.Plugins.ContentReport.contentReportTable = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  var hasSocialColumn__soy3 = opt_data.showCommentsCount || opt_data.showLikesCount;
  if (opt_data.results.length == 0 && opt_data.blueprintKey) {
    output.append('<div class="blueprint-blank-experience ', soy.$$escapeHtml(opt_data.blueprintKey), '"><div class="content"><h2>', soy.$$escapeHtml(opt_data.blankTitle), '</h2><p>', soy.$$escapeHtml(opt_data.blankDescription), '</p></div>', (opt_data.createButtonLabel) ? '<p><button class="create-from-template-button aui-button aui-button-primary" data-space-key="' + soy.$$escapeHtml(opt_data.dataSpaceKey) + '" data-content-blueprint-id="' + soy.$$escapeHtml(opt_data.contentBlueprintId) + '" href="' + soy.$$escapeHtml(opt_data.createContentUrl) + '" >' + soy.$$escapeHtml(opt_data.createButtonLabel) + '</button></p>' : '', '</div>');
  } else {
    output.append('<table class="aui content-report-table-macro', (hasSocialColumn__soy3) ? ' with-extra-columns' : '', '"', (opt_data.analyticsKey) ? ' data-analytics-key="' + soy.$$escapeHtml(opt_data.analyticsKey) + '"' : '', '><thead><tr><th>', soy.$$escapeHtml("Title"), '</th><th>', soy.$$escapeHtml("Creator"), '</th><th>', soy.$$escapeHtml("Modified"), '</th></tr></thead><tbody>');
    var resultList43 = opt_data.results;
    var resultListLen43 = resultList43.length;
    if (resultListLen43 > 0) {
      for (var resultIndex43 = 0; resultIndex43 < resultListLen43; resultIndex43++) {
        var resultData43 = resultList43[resultIndex43];
        output.append('<tr><td class="title"><a href="', soy.$$escapeHtml(resultData43.urlPath), '">', soy.$$escapeHtml(resultData43.title), '</a></td><td class="creator">');
        Confluence.Templates.User.usernameLink({canView: opt_data.canViewProfiles, username: resultData43.creatorName, fullName: resultData43.creatorFullName, contextPath: opt_data.contextPath}, output);
        output.append('</td><td class="modified" data-sortable-date="', soy.$$escapeHtml(resultData43.sortableDate), '">', soy.$$escapeHtml(resultData43.friendlyModificationDate), '</td>', (hasSocialColumn__soy3) ? '<td class="social">' + ((opt_data.showCommentsCount && resultData43.commentCount != 0) ? '<span class="icon icon-comment"></span> <span class="count">' + soy.$$escapeHtml(resultData43.commentCount) + '</span>' : '') + ((opt_data.showLikesCount && resultData43.likeCount != 0) ? '<span class="icon icon-like"></span> <span class="count">' + soy.$$escapeHtml(resultData43.likeCount) + '</span>' : '') + '</td>' : '', '</tr>');
      }
    } else {
      output.append('<tr><td colspan="3">', soy.$$escapeHtml("No content found."), '</td></tr>');
    }
    output.append('</tbody></table>', (opt_data.searchMoreResultsLinkUrl) ? '<div class="more-results"><a href="' + soy.$$escapeHtml("") + soy.$$escapeHtml(opt_data.searchMoreResultsLinkUrl) + '">' + soy.$$escapeHtml("Find more results") + '</a></div>' : '');
  }
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-content-report-plugin:resources', location = 'com/atlassian/confluence/plugins/content_report/js/content-report-analytics.js' */
AJS.$(function(A){A(".content-report-table-macro").on("click",".title a",function(D){var B=A(D.delegateTarget).data("analytics-key");
if(B){var C="content-report-table-macro.content-click."+B;
AJS.trigger("analytics",{name:C})
}})
});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.auiplugin:aui-experimental-table-sortable', location = 'js-vendor/jquery/jquery.tablesorter.js' */
/*
 * TableSorter 2.10.8 - Client-side table sorting with ease!
 * @requires jQuery v1.2.6+
 *
 * Copyright (c) 2007 Christian Bach
 * Examples and docs at: http://tablesorter.com
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 *
 * @type jQuery
 * @name tablesorter
 * @cat Plugins/Tablesorter
 * @author Christian Bach/christian.bach@polyester.se
 * @contributor Rob Garrison/https://github.com/Mottie/tablesorter
 */
!(function(B){B.extend({tablesorter:new function(){var C=this;C.version="2.10.8";C.parsers=[];C.widgets=[];C.defaults={theme:"default",widthFixed:false,showProcessing:false,headerTemplate:"{content}",onRenderTemplate:null,onRenderHeader:null,cancelSelection:true,dateFormat:"mmddyyyy",sortMultiSortKey:"shiftKey",sortResetKey:"ctrlKey",usNumberFormat:true,delayInit:false,serverSideSorting:false,headers:{},ignoreCase:true,sortForce:null,sortList:[],sortAppend:null,sortInitialOrder:"asc",sortLocaleCompare:false,sortReset:false,sortRestart:false,emptyTo:"bottom",stringTo:"max",textExtraction:"simple",textSorter:null,widgets:[],widgetOptions:{zebra:["even","odd"]},initWidgets:true,initialized:null,tableClass:"tablesorter",cssAsc:"tablesorter-headerAsc",cssChildRow:"tablesorter-childRow",cssDesc:"tablesorter-headerDesc",cssHeader:"tablesorter-header",cssHeaderRow:"tablesorter-headerRow",cssIcon:"tablesorter-icon",cssInfoBlock:"tablesorter-infoOnly",cssProcessing:"tablesorter-processing",selectorHeaders:"> thead th, > thead td",selectorSort:"th, td",selectorRemove:".remove-me",debug:false,headerList:[],empties:{},strings:{},parsers:[]};function O(Y){if(typeof console!=="undefined"&&typeof console.log!=="undefined"){console.log(Y)}else{alert(Y)}}function I(Y,Z){O(Y+" ("+(new Date().getTime()-Z.getTime())+"ms)")}C.log=O;C.benchmark=I;function F(b,a,Y){if(!a){return""}var e=b.config,Z=e.textExtraction,d="";if(Z==="simple"){if(e.supportsTextContent){d=a.textContent}else{d=B(a).text()}}else{if(typeof Z==="function"){d=Z(a,b,Y)}else{if(typeof Z==="object"&&Z.hasOwnProperty(Y)){d=Z[Y](a,b,Y)}else{d=e.supportsTextContent?a.textContent:B(a).text()}}}return B.trim(d)}function J(e,g,c,b){var d,Z=C.parsers.length,Y=false,a="",f=true;while(a===""&&f){c++;if(g[c]){Y=g[c].cells[b];a=F(e,Y,b);if(e.config.debug){O("Checking if value was empty on row "+c+", column: "+b+': "'+a+'"')}}else{f=false}}while(--Z>=0){d=C.parsers[Z];if(d&&d.id!=="text"&&d.is&&d.is(a,e,Y)){return d}}return C.getParserById("text")}function K(k){var j=k.config,d=j.$tbodies=j.$table.children("tbody:not(."+j.cssInfoBlock+")"),m,g,b,e,f,Y,a,Z="";if(d.length===0){return j.debug?O("*Empty table!* Not building a parser cache"):""}m=d[0].rows;if(m[0]){g=[];b=m[0].cells.length;for(e=0;e<b;e++){f=j.$headers.filter(":not([colspan])");f=f.add(j.$headers.filter('[colspan="1"]')).filter('[data-column="'+e+'"]:last');Y=j.headers[e];a=C.getParserById(C.getData(f,Y,"sorter"));j.empties[e]=C.getData(f,Y,"empty")||j.emptyTo||(j.emptyToBottom?"bottom":"top");j.strings[e]=C.getData(f,Y,"string")||j.stringTo||"max";if(!a){a=J(k,m,-1,e)}if(j.debug){Z+="column:"+e+"; parser:"+a.id+"; string:"+j.strings[e]+"; empty: "+j.empties[e]+"\n"}g.push(a)}}if(j.debug){O(Z)}j.parsers=g}function X(q){var l=q.tBodies,d=q.config,n,Y,o=d.parsers,r,p,f,e,a,g,h,m,Z=[];d.cache={};if(!o){return d.debug?O("*Empty table!* Not building a cache"):""}if(d.debug){m=new Date()}if(d.showProcessing){C.isProcessing(q,true)}for(a=0;a<l.length;a++){d.cache[a]={row:[],normalized:[]};if(!B(l[a]).hasClass(d.cssInfoBlock)){n=(l[a]&&l[a].rows.length)||0;Y=(l[a].rows[0]&&l[a].rows[0].cells.length)||0;for(f=0;f<n;++f){g=B(l[a].rows[f]);h=[];if(g.hasClass(d.cssChildRow)){d.cache[a].row[d.cache[a].row.length-1]=d.cache[a].row[d.cache[a].row.length-1].add(g);continue}d.cache[a].row.push(g);for(e=0;e<Y;++e){r=F(q,g[0].cells[e],e);p=o[e].format(r,q,g[0].cells[e],e);h.push(p);if((o[e].type||"").toLowerCase()==="numeric"){Z[e]=Math.max(Math.abs(p)||0,Z[e]||0)}}h.push(d.cache[a].normalized.length);d.cache[a].normalized.push(h)}d.cache[a].colMax=Z}}if(d.showProcessing){C.isProcessing(q)}if(d.debug){I("Building cache for "+n+" rows",m)}}function V(u,s){var v=u.config,w=u.tBodies,d=[],g=v.cache,f,h,a,e,x,Z,t,q,p,o,Y,m;if(!g[0]){return }if(v.debug){m=new Date()}for(p=0;p<w.length;p++){x=B(w[p]);if(x.length&&!x.hasClass(v.cssInfoBlock)){Z=C.processTbody(u,x,true);f=g[p].row;h=g[p].normalized;a=h.length;e=a?(h[0].length-1):0;for(t=0;t<a;t++){Y=h[t][e];d.push(f[Y]);if(!v.appender||!v.removeRows){o=f[Y].length;for(q=0;q<o;q++){Z.append(f[Y][q])}}}C.processTbody(u,Z,false)}}if(v.appender){v.appender(u,d)}if(v.debug){I("Rebuilt table",m)}if(!s){C.applyWidget(u)}B(u).trigger("sortEnd",u)}function Q(u){var r=[],a={},q=0,h=B(u).find("thead:eq(0), tfoot").children("tr"),f,e,d,b,o,s,p,Y,n,g,m,Z;for(f=0;f<h.length;f++){s=h[f].cells;for(e=0;e<s.length;e++){o=s[e];p=o.parentNode.rowIndex;Y=p+"-"+o.cellIndex;n=o.rowSpan||1;g=o.colSpan||1;if(typeof (r[p])==="undefined"){r[p]=[]}for(d=0;d<r[p].length+1;d++){if(typeof (r[p][d])==="undefined"){m=d;break}}a[Y]=m;q=Math.max(m,q);B(o).attr({"data-column":m});for(d=p;d<p+n;d++){if(typeof (r[d])==="undefined"){r[d]=[]}Z=r[d];for(b=m;b<m+g;b++){Z[b]="x"}}}}u.config.columns=q;return a}function H(Y){return(/^d/i.test(Y)||Y===1)}function S(j){var a=Q(j),Y,b,e,d,k,g,Z,f=j.config;f.headerList=[];f.headerContent=[];if(f.debug){Z=new Date()}d=f.cssIcon?'<i class="'+f.cssIcon+'"></i>':"";f.$headers=B(j).find(f.selectorHeaders).each(function(c){b=B(this);Y=f.headers[c];f.headerContent[c]=this.innerHTML;k=f.headerTemplate.replace(/\{content\}/g,this.innerHTML).replace(/\{icon\}/g,d);if(f.onRenderTemplate){e=f.onRenderTemplate.apply(b,[c,k]);if(e&&typeof e==="string"){k=e}}this.innerHTML='<div class="tablesorter-header-inner">'+k+"</div>";if(f.onRenderHeader){f.onRenderHeader.apply(b,[c])}this.column=a[this.parentNode.rowIndex+"-"+this.cellIndex];this.order=H(C.getData(b,Y,"sortInitialOrder")||f.sortInitialOrder)?[1,0,2]:[0,1,2];this.count=-1;this.lockedOrder=false;g=C.getData(b,Y,"lockedOrder")||false;if(typeof g!=="undefined"&&g!==false){this.order=this.lockedOrder=H(g)?[1,1,1]:[0,0,0]}b.addClass(f.cssHeader);f.headerList[c]=this;b.parent().addClass(f.cssHeaderRow);b.attr("tabindex",0)});L(j);if(f.debug){I("Built headers:",Z);O(f.$headers)}}function P(Z,Y,b){var a=Z.config;a.$table.find(a.selectorRemove).remove();K(Z);X(Z);W(a.$table,Y,b)}function L(Z){var Y,a=Z.config;a.$headers.each(function(b,c){Y=C.getData(c,a.headers[b],"sorter")==="false";c.sortDisabled=Y;B(c)[Y?"addClass":"removeClass"]("sorter-false")})}function D(k){var e,b,Z,Y,h=k.config,g=h.sortList,d=[h.cssAsc,h.cssDesc],a=B(k).find("tfoot tr").children().removeClass(d.join(" "));h.$headers.removeClass(d.join(" "));Y=g.length;for(b=0;b<Y;b++){if(g[b][1]!==2){e=h.$headers.not(".sorter-false").filter('[data-column="'+g[b][0]+'"]'+(Y===1?":last":""));if(e.length){for(Z=0;Z<e.length;Z++){if(!e[Z].sortDisabled){e.eq(Z).addClass(d[g[b][1]]);if(a.length){a.filter('[data-column="'+g[b][0]+'"]').eq(Z).addClass(d[g[b][1]])}}}}}}}function N(a){if(a.config.widthFixed&&B(a).find("colgroup").length===0){var Y=B("<colgroup>"),Z=B(a).width();B(a.tBodies[0]).find("tr:first").children("td").each(function(){Y.append(B("<col>").css("width",parseInt((B(this).width()/Z)*1000,10)/10+"%"))});B(a).prepend(Y)}}function T(b,d){var a,Z,e,f=b.config,Y=d||f.sortList;f.sortList=[];B.each(Y,function(g,c){a=[parseInt(c[0],10),parseInt(c[1],10)];e=f.headerList[a[0]];if(e){f.sortList.push(a);Z=B.inArray(a[1],e.order);e.count=Z>=0?Z:a[1]%(f.sortReset?3:2)}})}function M(Z,Y){return(Z&&Z[Y])?Z[Y].type||"":""}function U(n,m,f){var l,d,b,Y,p,h=n.config,Z=!f[h.sortMultiSortKey],g=B(n);g.trigger("sortStart",n);m.count=f[h.sortResetKey]?2:(m.count+1)%(h.sortReset?3:2);if(h.sortRestart){d=m;h.$headers.each(function(){if(this!==d&&(Z||!B(this).is("."+h.cssDesc+",."+h.cssAsc))){this.count=-1}})}d=m.column;if(Z){h.sortList=[];if(h.sortForce!==null){l=h.sortForce;for(b=0;b<l.length;b++){if(l[b][0]!==d){h.sortList.push(l[b])}}}Y=m.order[m.count];if(Y<2){h.sortList.push([d,Y]);if(m.colSpan>1){for(b=1;b<m.colSpan;b++){h.sortList.push([d+b,Y])}}}}else{if(h.sortAppend&&h.sortList.length>1){if(C.isValueInArray(h.sortAppend[0][0],h.sortList)){h.sortList.pop()}}if(C.isValueInArray(d,h.sortList)){for(b=0;b<h.sortList.length;b++){p=h.sortList[b];Y=h.headerList[p[0]];if(p[0]===d){p[1]=Y.order[Y.count];if(p[1]===2){h.sortList.splice(b,1);Y.count=-1}}}}else{Y=m.order[m.count];if(Y<2){h.sortList.push([d,Y]);if(m.colSpan>1){for(b=1;b<m.colSpan;b++){h.sortList.push([d+b,Y])}}}}}if(h.sortAppend!==null){l=h.sortAppend;for(b=0;b<l.length;b++){if(l[b][0]!==d){h.sortList.push(l[b])}}}g.trigger("sortBegin",n);setTimeout(function(){D(n);R(n);V(n)},1)}function R(p){var d=0,h=p.config,j=h.sortList,e=j.length,a=p.tBodies.length,r,n,g,o,f,Y,Z,q,b,m;if(h.serverSideSorting||!h.cache[0]){return }if(h.debug){r=new Date()}for(g=0;g<a;g++){f=h.cache[g].colMax;Y=h.cache[g].normalized;Z=Y.length;m=(Y&&Y[0])?Y[0].length-1:0;Y.sort(function(i,c){for(n=0;n<e;n++){o=j[n][0];b=j[n][1];q=/n/i.test(M(h.parsers,o))?"Numeric":"Text";q+=b===0?"":"Desc";if(/Numeric/.test(q)&&h.strings[o]){if(typeof (h.string[h.strings[o]])==="boolean"){d=(b===0?1:-1)*(h.string[h.strings[o]]?-1:1)}else{d=(h.strings[o])?h.string[h.strings[o]]||0:0}}var k=B.tablesorter["sort"+q](p,i[o],c[o],o,f[o],d);if(k){return k}}return i[m]-c[m]})}if(h.debug){I("Sorting on "+j.toString()+" and dir "+b+" time",r)}}function G(Y,Z){Y.trigger("updateComplete");if(typeof Z==="function"){Z(Y[0])}}function W(Z,Y,a){if(Y!==false&&!Z[0].isProcessing){Z.trigger("sorton",[Z[0].config.sortList,function(){G(Z,a)}])}else{G(Z,a)}}function E(Z){var d=Z.config,a=d.$table,Y,b;d.$headers.find(d.selectorSort).add(d.$headers.filter(d.selectorSort)).unbind("mousedown.tablesorter mouseup.tablesorter sort.tablesorter keypress.tablesorter").bind("mousedown.tablesorter mouseup.tablesorter sort.tablesorter keypress.tablesorter",function(g,h){if(((g.which||g.button)!==1&&!/sort|keypress/.test(g.type))||(g.type==="keypress"&&g.which!==13)){return false}if(g.type==="mouseup"&&h!==true&&(new Date().getTime()-b>250)){return false}if(g.type==="mousedown"){b=new Date().getTime();return g.target.tagName==="INPUT"?"":!d.cancelSelection}if(d.delayInit&&!d.cache){X(Z)}var f=/TH|TD/.test(this.tagName)?B(this):B(this).parents("th, td").filter(":first"),c=f[0];if(!c.sortDisabled){U(Z,c,g)}});if(d.cancelSelection){d.$headers.attr("unselectable","on").bind("selectstart",false).css({"user-select":"none",MozUserSelect:"none"})}a.unbind("sortReset update updateRows updateCell updateAll addRows sorton appendCache applyWidgetId applyWidgets refreshWidgets destroy mouseup mouseleave ".split(" ").join(".tablesorter ")).bind("sortReset.tablesorter",function(c){c.stopPropagation();d.sortList=[];D(Z);R(Z);V(Z)}).bind("updateAll.tablesorter",function(f,c,g){f.stopPropagation();C.refreshWidgets(Z,true,true);C.restoreHeaders(Z);S(Z);E(Z);P(Z,c,g)}).bind("update.tablesorter updateRows.tablesorter",function(f,c,g){f.stopPropagation();L(Z);P(Z,c,g)}).bind("updateCell.tablesorter",function(h,k,i,m){h.stopPropagation();a.find(d.selectorRemove).remove();var f,o,j,c=a.find("tbody"),n=c.index(B(k).parents("tbody").filter(":first")),g=B(k).parents("tr").filter(":first");k=B(k)[0];if(c.length&&n>=0){o=c.eq(n).find("tr").index(g);j=k.cellIndex;f=d.cache[n].normalized[o].length-1;d.cache[n].row[Z.config.cache[n].normalized[o][f]]=g;d.cache[n].normalized[o][j]=d.parsers[j].format(F(Z,k,j),Z,k,j);W(a,i,m)}}).bind("addRows.tablesorter",function(g,j,h,k){g.stopPropagation();var f,o=j.filter("tr").length,m=[],c=j[0].cells.length,n=a.find("tbody").index(j.parents("tbody").filter(":first"));if(!d.parsers){K(Z)}for(f=0;f<o;f++){for(Y=0;Y<c;Y++){m[Y]=d.parsers[Y].format(F(Z,j[f].cells[Y],Y),Z,j[f].cells[Y],Y)}m.push(d.cache[n].row.length);d.cache[n].row.push([j[f]]);d.cache[n].normalized.push(m);m=[]}W(a,h,k)}).bind("sorton.tablesorter",function(f,c,h,g){f.stopPropagation();a.trigger("sortStart",this);T(Z,c);D(Z);a.trigger("sortBegin",this);R(Z);V(Z,g);if(typeof h==="function"){h(Z)}}).bind("appendCache.tablesorter",function(c,g,f){c.stopPropagation();V(Z,f);if(typeof g==="function"){g(Z)}}).bind("applyWidgetId.tablesorter",function(c,f){c.stopPropagation();C.getWidgetById(f).format(Z,d,d.widgetOptions)}).bind("applyWidgets.tablesorter",function(c,f){c.stopPropagation();C.applyWidget(Z,f)}).bind("refreshWidgets.tablesorter",function(g,f,c){g.stopPropagation();C.refreshWidgets(Z,f,c)}).bind("destroy.tablesorter",function(g,h,f){g.stopPropagation();C.destroy(Z,h,f)})}C.construct=function(Y){return this.each(function(){if(!this.tHead||this.tBodies.length===0||this.hasInitialized===true){return(this.config&&this.config.debug)?O("stopping initialization! No thead, tbody or tablesorter has already been initialized"):""}var d=B(this),b=this,e,a="",Z=B.metadata;b.hasInitialized=false;b.isProcessing=true;b.config={};e=B.extend(true,b.config,C.defaults,Y);B.data(b,"tablesorter",e);if(e.debug){B.data(b,"startoveralltimer",new Date())}e.supportsTextContent=B("<span>x</span>")[0].textContent==="x";e.supportsDataObject=parseFloat(B.fn.jquery)>=1.4;e.string={max:1,min:-1,"max+":1,"max-":-1,zero:0,none:0,"null":0,top:true,bottom:false};if(!/tablesorter\-/.test(d.attr("class"))){a=(e.theme!==""?" tablesorter-"+e.theme:"")}e.$table=d.addClass(e.tableClass+a);e.$tbodies=d.children("tbody:not(."+e.cssInfoBlock+")");S(b);N(b);K(b);if(!e.delayInit){X(b)}E(b);if(e.supportsDataObject&&typeof d.data().sortlist!=="undefined"){e.sortList=d.data().sortlist}else{if(Z&&(d.metadata()&&d.metadata().sortlist)){e.sortList=d.metadata().sortlist}}C.applyWidget(b,true);if(e.sortList.length>0){d.trigger("sorton",[e.sortList,{},!e.initWidgets])}else{if(e.initWidgets){C.applyWidget(b)}}if(e.showProcessing){d.unbind("sortBegin.tablesorter sortEnd.tablesorter").bind("sortBegin.tablesorter sortEnd.tablesorter",function(c){C.isProcessing(b,c.type==="sortBegin")})}b.hasInitialized=true;b.isProcessing=false;if(e.debug){C.benchmark("Overall initialization time",B.data(b,"startoveralltimer"))}d.trigger("tablesorter-initialized",b);if(typeof e.initialized==="function"){e.initialized(b)}})};C.isProcessing=function(b,Z,a){b=B(b);var d=b[0].config,Y=a||b.find("."+d.cssHeader);if(Z){if(d.sortList.length>0){Y=Y.filter(function(){return this.sortDisabled?false:C.isValueInArray(parseFloat(B(this).attr("data-column")),d.sortList)})}Y.addClass(d.cssProcessing)}else{Y.removeClass(d.cssProcessing)}};C.processTbody=function(a,Y,Z){var b;if(Z){a.isProcessing=true;Y.before('<span class="tablesorter-savemyplace"/>');b=(B.fn.detach)?Y.detach():Y.remove();return b}b=B(a).find("span.tablesorter-savemyplace");Y.insertAfter(b);b.remove();a.isProcessing=false};C.clearTableBody=function(Y){B(Y)[0].config.$tbodies.empty()};C.restoreHeaders=function(Y){var Z=Y.config;Z.$table.find(Z.selectorHeaders).each(function(a){if(B(this).find(".tablesorter-header-inner").length){B(this).html(Z.headerContent[a])}})};C.destroy=function(d,Z,g){d=B(d)[0];if(!d.hasInitialized){return }C.refreshWidgets(d,true,true);var f=B(d),e=d.config,Y=f.find("thead:first"),a=Y.find("tr."+e.cssHeaderRow).removeClass(e.cssHeaderRow),b=f.find("tfoot:first > tr").children("th, td");Y.find("tr").not(a).remove();f.removeData("tablesorter").unbind("sortReset update updateAll updateRows updateCell addRows sorton appendCache applyWidgetId applyWidgets refreshWidgets destroy mouseup mouseleave keypress sortBegin sortEnd ".split(" ").join(".tablesorter "));e.$headers.add(b).removeClass(e.cssHeader+" "+e.cssAsc+" "+e.cssDesc).removeAttr("data-column");a.find(e.selectorSort).unbind("mousedown.tablesorter mouseup.tablesorter keypress.tablesorter");C.restoreHeaders(d);if(Z!==false){f.removeClass(e.tableClass+" tablesorter-"+e.theme)}d.hasInitialized=false;if(typeof g==="function"){g(d)}};C.regex=[/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,/^0x[0-9a-f]+$/i];C.sortText=function(s,m,l,d){if(m===l){return 0}var k=s.config,j=k.string[(k.empties[d]||k.emptyTo)],Y=C.regex,p,f,h,q,Z,o,g,n;if(m===""&&j!==0){return typeof j==="boolean"?(j?-1:1):-j||-1}if(l===""&&j!==0){return typeof j==="boolean"?(j?1:-1):j||1}if(typeof k.textSorter==="function"){return k.textSorter(m,l,s,d)}p=m.replace(Y[0],"\\0$1\\0").replace(/\\0$/,"").replace(/^\\0/,"").split("\\0");h=l.replace(Y[0],"\\0$1\\0").replace(/\\0$/,"").replace(/^\\0/,"").split("\\0");f=parseInt(m.match(Y[2]),16)||(p.length!==1&&m.match(Y[1])&&Date.parse(m));q=parseInt(l.match(Y[2]),16)||(f&&l.match(Y[1])&&Date.parse(l))||null;if(q){if(f<q){return -1}if(f>q){return 1}}n=Math.max(p.length,h.length);for(g=0;g<n;g++){Z=isNaN(p[g])?p[g]||0:parseFloat(p[g])||0;o=isNaN(h[g])?h[g]||0:parseFloat(h[g])||0;if(isNaN(Z)!==isNaN(o)){return(isNaN(Z))?1:-1}if(typeof Z!==typeof o){Z+="";o+=""}if(Z<o){return -1}if(Z>o){return 1}}return 0};C.sortTextDesc=function(f,Z,Y,d){if(Z===Y){return 0}var h=f.config,g=h.string[(h.empties[d]||h.emptyTo)];if(Z===""&&g!==0){return typeof g==="boolean"?(g?-1:1):g||1}if(Y===""&&g!==0){return typeof g==="boolean"?(g?1:-1):-g||-1}if(typeof h.textSorter==="function"){return h.textSorter(Y,Z,f,d)}return C.sortText(f,Y,Z)};C.getTextValue=function(Z,e,c){if(e){var b,Y=Z?Z.length:0,f=e+c;for(b=0;b<Y;b++){f+=Z.charCodeAt(b)}return c*f}return 0};C.sortNumeric=function(g,Z,Y,f,j,i){if(Z===Y){return 0}var k=g.config,h=k.string[(k.empties[f]||k.emptyTo)];if(Z===""&&h!==0){return typeof h==="boolean"?(h?-1:1):-h||-1}if(Y===""&&h!==0){return typeof h==="boolean"?(h?1:-1):h||1}if(isNaN(Z)){Z=C.getTextValue(Z,j,i)}if(isNaN(Y)){Y=C.getTextValue(Y,j,i)}return Z-Y};C.sortNumericDesc=function(g,Z,Y,f,j,i){if(Z===Y){return 0}var k=g.config,h=k.string[(k.empties[f]||k.emptyTo)];if(Z===""&&h!==0){return typeof h==="boolean"?(h?-1:1):h||1}if(Y===""&&h!==0){return typeof h==="boolean"?(h?1:-1):-h||-1}if(isNaN(Z)){Z=C.getTextValue(Z,j,i)}if(isNaN(Y)){Y=C.getTextValue(Y,j,i)}return Y-Z};C.characterEquivalents={a:"\u00e1\u00e0\u00e2\u00e3\u00e4\u0105\u00e5",A:"\u00c1\u00c0\u00c2\u00c3\u00c4\u0104\u00c5",c:"\u00e7\u0107\u010d",C:"\u00c7\u0106\u010c",e:"\u00e9\u00e8\u00ea\u00eb\u011b\u0119",E:"\u00c9\u00c8\u00ca\u00cb\u011a\u0118",i:"\u00ed\u00ec\u0130\u00ee\u00ef\u0131",I:"\u00cd\u00cc\u0130\u00ce\u00cf",o:"\u00f3\u00f2\u00f4\u00f5\u00f6",O:"\u00d3\u00d2\u00d4\u00d5\u00d6",ss:"\u00df",SS:"\u1e9e",u:"\u00fa\u00f9\u00fb\u00fc\u016f",U:"\u00da\u00d9\u00db\u00dc\u016e"};C.replaceAccents=function(b){var Z,c="[",Y=C.characterEquivalents;if(!C.characterRegex){C.characterRegexArray={};for(Z in Y){if(typeof Z==="string"){c+=Y[Z];C.characterRegexArray[Z]=new RegExp("["+Y[Z]+"]","g")}}C.characterRegex=new RegExp(c+"]")}if(C.characterRegex.test(b)){for(Z in Y){if(typeof Z==="string"){b=b.replace(C.characterRegexArray[Z],Z)}}}return b};C.isValueInArray=function(b,Z){var c,Y=Z.length;for(c=0;c<Y;c++){if(Z[c][0]===b){return true}}return false};C.addParser=function(c){var b,Z=C.parsers.length,Y=true;for(b=0;b<Z;b++){if(C.parsers[b].id.toLowerCase()===c.id.toLowerCase()){Y=false}}if(Y){C.parsers.push(c)}};C.getParserById=function(Z){var a,Y=C.parsers.length;for(a=0;a<Y;a++){if(C.parsers[a].id.toLowerCase()===(Z.toString()).toLowerCase()){return C.parsers[a]}}return false};C.addWidget=function(Y){C.widgets.push(Y)};C.getWidgetById=function(a){var b,Z,Y=C.widgets.length;for(b=0;b<Y;b++){Z=C.widgets[b];if(Z&&Z.hasOwnProperty("id")&&Z.id.toLowerCase()===a.toLowerCase()){return Z}}};C.applyWidget=function(h,g){h=B(h)[0];var b=h.config,d=b.widgetOptions,e=[],Z,a,f,Y;if(b.debug){Z=new Date()}if(b.widgets.length){b.widgets=B.grep(b.widgets,function(i,c){return B.inArray(i,b.widgets)===c});B.each(b.widgets||[],function(c,j){Y=C.getWidgetById(j);if(Y&&Y.id){if(!Y.priority){Y.priority=10}e[c]=Y}});e.sort(function(i,c){return i.priority<c.priority?-1:i.priority===c.priority?0:1});B.each(e,function(j,c){if(c){if(g){if(c.hasOwnProperty("options")){d=h.config.widgetOptions=B.extend(true,{},c.options,d)}if(c.hasOwnProperty("init")){c.init(h,c,b,d)}}else{if(!g&&c.hasOwnProperty("format")){c.format(h,b,d,false)}}}})}if(b.debug){f=b.widgets.length;I("Completed "+(g===true?"initializing ":"applying ")+f+" widget"+(f!==1?"s":""),Z)}};C.refreshWidgets=function(f,e,Y){f=B(f)[0];var d,g=f.config,b=g.widgets,a=C.widgets,Z=a.length;for(d=0;d<Z;d++){if(a[d]&&a[d].id&&(e||B.inArray(a[d].id,b)<0)){if(g.debug){O("Refeshing widgets: Removing "+a[d].id)}if(a[d].hasOwnProperty("remove")){a[d].remove(f,g,g.widgetOptions)}}}if(Y!==true){C.applyWidget(f,e)}};C.getData=function(d,c,b){var e="",Z=B(d),Y,a;if(!Z.length){return""}Y=B.metadata?Z.metadata():false;a=" "+(Z.attr("class")||"");if(typeof Z.data(b)!=="undefined"||typeof Z.data(b.toLowerCase())!=="undefined"){e+=Z.data(b)||Z.data(b.toLowerCase())}else{if(Y&&typeof Y[b]!=="undefined"){e+=Y[b]}else{if(c&&typeof c[b]!=="undefined"){e+=c[b]}else{if(a!==" "&&a.match(" "+b+"-")){e=a.match(new RegExp("\\s"+b+"-([\\w-]+)"))[1]||""}}}}return B.trim(e)};C.formatFloat=function(a,b){if(typeof a!=="string"||a===""){return a}var Z,Y=b&&b.config?b.config.usNumberFormat!==false:typeof b!=="undefined"?b:true;if(Y){a=a.replace(/,/g,"")}else{a=a.replace(/[\s|\.]/g,"").replace(/,/g,".")}if(/^\s*\([.\d]+\)/.test(a)){a=a.replace(/^\s*\(/,"-").replace(/\)/,"")}Z=parseFloat(a);return isNaN(Z)?B.trim(a):Z};C.isDigit=function(Y){return isNaN(Y)?(/^[\-+(]?\d+[)]?$/).test(Y.toString().replace(/[,.'"\s]/g,"")):true}}()});var A=B.tablesorter;B.fn.extend({tablesorter:A.construct});A.addParser({id:"text",is:function(){return true},format:function(C,D){var E=D.config;if(C){C=B.trim(E.ignoreCase?C.toLocaleLowerCase():C);C=E.sortLocaleCompare?A.replaceAccents(C):C}return C},type:"text"});A.addParser({id:"digit",is:function(C){return A.isDigit(C)},format:function(C,D){var E=A.formatFloat((C||"").replace(/[^\w,. \-()]/g,""),D);return C&&typeof E==="number"?E:C?B.trim(C&&D.config.ignoreCase?C.toLocaleLowerCase():C):C},type:"numeric"});A.addParser({id:"currency",is:function(C){return(/^\(?\d+[\u00a3$\u20ac\u00a4\u00a5\u00a2?.]|[\u00a3$\u20ac\u00a4\u00a5\u00a2?.]\d+\)?$/).test((C||"").replace(/[,. ]/g,""))},format:function(C,D){var E=A.formatFloat((C||"").replace(/[^\w,. \-()]/g,""),D);return C&&typeof E==="number"?E:C?B.trim(C&&D.config.ignoreCase?C.toLocaleLowerCase():C):C},type:"numeric"});A.addParser({id:"ipAddress",is:function(C){return(/^\d{1,3}[\.]\d{1,3}[\.]\d{1,3}[\.]\d{1,3}$/).test(C)},format:function(F,H){var E,D=F?F.split("."):"",G="",C=D.length;for(E=0;E<C;E++){G+=("00"+D[E]).slice(-3)}return F?A.formatFloat(G,H):F},type:"numeric"});A.addParser({id:"url",is:function(C){return(/^(https?|ftp|file):\/\//).test(C)},format:function(C){return C?B.trim(C.replace(/(https?|ftp|file):\/\//,"")):C},type:"text"});A.addParser({id:"isoDate",is:function(C){return(/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}/).test(C)},format:function(C,D){return C?A.formatFloat((C!=="")?(new Date(C.replace(/-/g,"/")).getTime()||""):"",D):C},type:"numeric"});A.addParser({id:"percent",is:function(C){return(/(\d\s*?%|%\s*?\d)/).test(C)&&C.length<15},format:function(C,D){return C?A.formatFloat(C.replace(/%/g,""),D):C},type:"numeric"});A.addParser({id:"usLongDate",is:function(C){return(/^[A-Z]{3,10}\.?\s+\d{1,2},?\s+(\d{4})(\s+\d{1,2}:\d{2}(:\d{2})?(\s+[AP]M)?)?$/i).test(C)||(/^\d{1,2}\s+[A-Z]{3,10}\s+\d{4}/i).test(C)},format:function(C,D){return C?A.formatFloat((new Date(C.replace(/(\S)([AP]M)$/i,"$1 $2")).getTime()||""),D):C},type:"numeric"});A.addParser({id:"shortDate",is:function(C){return(/(^\d{1,2}[\/\s]\d{1,2}[\/\s]\d{4})|(^\d{4}[\/\s]\d{1,2}[\/\s]\d{1,2})/).test((C||"").replace(/\s+/g," ").replace(/[\-.,]/g,"/"))},format:function(F,G,C,D){if(F){var I=G.config,E=I.headerList[D],H=E.dateFormat||A.getData(E,I.headers[D],"dateFormat")||I.dateFormat;F=F.replace(/\s+/g," ").replace(/[\-.,]/g,"/");if(H==="mmddyyyy"){F=F.replace(/(\d{1,2})[\/\s](\d{1,2})[\/\s](\d{4})/,"$3/$1/$2")}else{if(H==="ddmmyyyy"){F=F.replace(/(\d{1,2})[\/\s](\d{1,2})[\/\s](\d{4})/,"$3/$2/$1")}else{if(H==="yyyymmdd"){F=F.replace(/(\d{4})[\/\s](\d{1,2})[\/\s](\d{1,2})/,"$1/$2/$3")}}}}return F?A.formatFloat((new Date(F).getTime()||""),G):F},type:"numeric"});A.addParser({id:"time",is:function(C){return(/^(([0-2]?\d:[0-5]\d)|([0-1]?\d:[0-5]\d\s?([AP]M)))$/i).test(C)},format:function(C,D){return C?A.formatFloat((new Date("2000/01/01 "+C.replace(/(\S)([AP]M)$/i,"$1 $2")).getTime()||""),D):C},type:"numeric"});A.addParser({id:"metadata",is:function(){return false},format:function(D,E,C){var G=E.config,F=(!G.parserMetadataName)?"sortValue":G.parserMetadataName;return B(C).metadata()[F]},type:"numeric"});A.addWidget({id:"zebra",priority:90,format:function(N,K,M){var D,H,J,O,I,E,G,F,C=new RegExp(K.cssChildRow,"i"),L=K.$tbodies;if(K.debug){E=new Date()}for(G=0;G<L.length;G++){D=L.eq(G);F=D.children("tr").length;if(F>1){O=0;H=D.children("tr:visible");H.each(function(){J=B(this);if(!C.test(this.className)){O++}I=(O%2===0);J.removeClass(M.zebra[I?1:0]).addClass(M.zebra[I?0:1])})}}if(K.debug){A.benchmark("Applying Zebra widget",E)}},remove:function(H,I,F){var E,D,C=I.$tbodies,G=(F.zebra||["even","odd"]).join(" ");for(E=0;E<C.length;E++){D=B.tablesorter.processTbody(H,C.eq(E),true);D.children().removeClass(G);B.tablesorter.processTbody(H,D,false)}}})})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.auiplugin:aui-experimental-table-sortable', location = 'js/aui-experimental-tables-sortable.js' */
(function(){var B={sortMultiSortKey:"",headers:{},debug:false};function A(D){var C=B;D.find("th").each(function(F,G){var E=AJS.$(G);C.headers[F]={};if(E.hasClass("aui-table-column-unsortable")){C.headers[F].sorter=false}else{E.attr("tabindex","0");E.wrapInner("<span class='aui-table-header-content'/>");if(E.hasClass("aui-table-column-issue-key")){C.headers[F].sorter="issue-key"}}});D.tablesorter(C)}AJS.tablessortable={setup:function(){AJS.$.tablesorter.addParser({id:"issue-key",is:function(){return false},format:function(G){var C=G.split("-");var D=C[0];var F=C[1];var I="..........";var H="000000";var E=(D+I).slice(0,I.length);E+=(H+F).slice(-H.length);return E},type:"text"});AJS.$.tablesorter.addParser({id:"textSortAttributeParser",is:function(C,E,D){return D.hasAttribute("data-sort-value")&&(!D.hasAttribute("data-sort-type")||D.getAttribute("data-sort-type")==="text")},format:function(C,E,D,F){return D.getAttribute("data-sort-value")},type:"text"});AJS.$.tablesorter.addParser({id:"numericSortAttributeParser",is:function(C,E,D){return D.getAttribute("data-sort-type")==="numeric"&&D.hasAttribute("data-sort-value")},format:function(C,E,D,F){return D.getAttribute("data-sort-value")},type:"numeric"});AJS.$(".aui-table-sortable").each(function(){A(AJS.$(this))})},setTableSortable:function(C){A(C)}};AJS.$(AJS.tablessortable.setup)})();
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-sortable-tables:sortable-table-resources', location = 'js/SortableTables.js' */
(function(d){function f(){var a=AJS.Meta.get("date.format"),b;a&&0!==a.length&&(a=a.toLowerCase()[0],"m"===a?b="mmddyyyy":"d"===a?b="ddmmyyyy":"y"===a&&(b="yyyymmdd"));return b}d(function(){var a;Confluence.SortableTables={init:function(){a=d("table").filter(function(){var b=d(this),a=b.find("td, th"),e=this.rows.length&&d(this.rows[0].cells),c;if("false"===b.attr("data-sortable")||-1<this.className.indexOf("tablesorter"))return!1;c=d.Event("makeSortable.SortableTables");b.trigger(c);if(c.isDefaultPrevented()||
!e||0===e.length)return!1;c=0;for(var f=a.length;c<f;c++)if(b=a[c],1!=b.rowSpan||1!=b.colSpan)return!1;return d(this.rows[0]).find("table").length||e.filter("th").length!=e.length||e.hasClass("nohighlight")?!1:this.rows[1]})},enable:function(){a.each(function(){if(-1<this.className.indexOf("tablesorter")||d(this).find("> :first-child").is("thead"))return!0;var b=this.removeChild(this.children[0]),a=d(b.children),a=Array.prototype.shift.call(a),e=document.createDocumentFragment(),c=document.createElement("thead");
e.appendChild(c);c.appendChild(a);e.appendChild(b);this.appendChild(e)});a.tablesorter({cssHeader:"sortableHeader",delayInit:!0,textExtraction:function(a){return AJS.trim(d(a).text())},dateFormat:f()})},refresh:function(){this.init();this.enable()}};Confluence.SortableTables.init();setTimeout(Confluence.SortableTables.enable,100)})})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-business-blueprints:sharelinks-urlmacro-resources', location = 'com/atlassian/confluence/plugins/sharelinksurlmacro/soy/sharelinks-urlmacro-templates.soy' */
// This file was automatically generated from sharelinks-urlmacro-templates.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Blueprints == 'undefined') { Confluence.Blueprints = {}; }
if (typeof Confluence.Blueprints.SharelinksUrlMacro == 'undefined') { Confluence.Blueprints.SharelinksUrlMacro = {}; }


Confluence.Blueprints.SharelinksUrlMacro.bookmarkletLink = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<a class="aui-button sharelinks-urlmacro-button" href="');
  Confluence.Blueprints.SharelinksUrlMacro.bookmarkletScript(opt_data, output);
  output.append('"><span>', soy.$$escapeHtml("Share on Confluence"), '</span></a>');
  return opt_sb ? '' : output.toString();
};


Confluence.Blueprints.SharelinksUrlMacro.bookmarkletScript = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('javascript:(function(){var screenWidth=screen.width,screenHeight=screen.height,popupWidth=640,popupHeight=580,popupLeft=0,popupTop=0; if(screenWidth>popupWidth){popupLeft=Math.round((screenWidth/2)-(popupWidth/2));}if(screenHeight>popupHeight){popupTop=Math.round((screenHeight/2)-(popupHeight/2));}window.open(\'', opt_data.bookmarkletActionURL, '?bookmarkedURL=\'+encodeURIComponent(window.location.href), \'\',\'left=\'+popupLeft+\',top=\'+popupTop+\',width=\'+popupWidth+\',height=\'+popupHeight+\',personalbar=0,toolbar=0,scrollbars=1,resizable=1\');}());');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-business-blueprints:sharelinks-urlmacro-resources', location = 'com/atlassian/confluence/plugins/sharelinksurlmacro/js/sharelinks-urlmacro.js' */
AJS.toInit(function(a){a(".sharelinks-urlmacro-button").click(function(){alert("Drag this link to your toolbar");return false})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.web.resources:jsUri', location = '/includes/js/jsUri.js' */
(function(){function g(a){a=decodeURIComponent(a);return a=a.replace("+"," ")}function h(a){var c,b,f,e,d=[];if("undefined"===typeof a||null===a||""===a)return d;0===a.indexOf("?")&&(a=a.substring(1));c=a.toString().split(/[&;]/);for(a=0;a<c.length;a++)b=c[a],f=b.split("="),e=f[0],b=-1===b.indexOf("=")?null:null===f[1]?"":f[1],d.push([e,b]);return d}function d(a){var c=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*)(?::([^:@\/]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(a||
""),b={};"source protocol authority userInfo user password host port relative path directory file query anchor".split(" ").forEach(function(a,e){b[a]=c[e]||""});this.uriParts=b;this.queryPairs=h(this.uriParts.query);this.hasAuthorityPrefixUserPref=null}Array.prototype.forEach||(Array.prototype.forEach=function(a,c){for(var b=0,f=this.length;b<f;++b)a.call(c||this,this[b],b,this)});"protocol userInfo host port path anchor".split(" ").forEach(function(a){d.prototype[a]=function(c){typeof c!=="undefined"&&
(this.uriParts[a]=c);return this.uriParts[a]}});d.prototype.hasAuthorityPrefix=function(a){if(typeof a!=="undefined")this.hasAuthorityPrefixUserPref=a;return this.hasAuthorityPrefixUserPref===null?this.uriParts.source.indexOf("//")!==-1:this.hasAuthorityPrefixUserPref};d.prototype.query=function(a){var c="",b;if(typeof a!=="undefined")this.queryPairs=h(a);for(a=0;a<this.queryPairs.length;a++){b=this.queryPairs[a];c.length>0&&(c=c+"&");c=b[1]===null?c+b[0]:c+b.join("=")}return c.length>0?"?"+c:c};
d.prototype.getQueryParamValue=function(a){var c,b;for(b=0;b<this.queryPairs.length;b++){c=this.queryPairs[b];if(g(a)===g(c[0]))return c[1]}};d.prototype.getQueryParamValues=function(a){var c=[],b,f;for(b=0;b<this.queryPairs.length;b++){f=this.queryPairs[b];g(a)===g(f[0])&&c.push(f[1])}return c};d.prototype.deleteQueryParam=function(a,c){var b=[],f,e,d,h;for(f=0;f<this.queryPairs.length;f++){e=this.queryPairs[f];d=g(e[0])===g(a);h=g(e[1])===g(c);(arguments.length===1&&!d||arguments.length===2&&!d&&
!h)&&b.push(e)}this.queryPairs=b;return this};d.prototype.addQueryParam=function(a,c,b){if(arguments.length===3&&b!==-1){b=Math.min(b,this.queryPairs.length);this.queryPairs.splice(b,0,[a,c])}else arguments.length>0&&this.queryPairs.push([a,c]);return this};d.prototype.replaceQueryParam=function(a,c,b){var d=-1,e,h;if(arguments.length===3){for(e=0;e<this.queryPairs.length;e++){h=this.queryPairs[e];if(g(h[0])===g(a)&&decodeURIComponent(h[1])===g(b)){d=e;break}}this.deleteQueryParam(a,b).addQueryParam(a,
c,d)}else{for(e=0;e<this.queryPairs.length;e++){h=this.queryPairs[e];if(g(h[0])===g(a)){d=e;break}}this.deleteQueryParam(a);this.addQueryParam(a,c,d)}return this};"protocol hasAuthorityPrefix userInfo host port path query anchor".split(" ").forEach(function(a){var c="set"+a.charAt(0).toUpperCase()+a.slice(1);d.prototype[c]=function(b){this[a](b);return this}});d.prototype.scheme=function(){var a="";if(this.protocol()){a=a+this.protocol();this.protocol().indexOf(":")!==this.protocol().length-1&&(a=
a+":");a=a+"//"}else this.hasAuthorityPrefix()&&this.host()&&(a=a+"//");return a};d.prototype.origin=function(){var a=this.scheme();if(this.userInfo()&&this.host()){a=a+this.userInfo();this.userInfo().indexOf("@")!==this.userInfo().length-1&&(a=a+"@")}if(this.host()){a=a+this.host();this.port()&&(a=a+(":"+this.port()))}return a};d.prototype.toString=function(){var a=this.origin();if(this.path())a=a+this.path();else if(this.host()&&(this.query().toString()||this.anchor()))a=a+"/";if(this.query().toString()){this.query().toString().indexOf("?")!==
0&&(a=a+"?");a=a+this.query().toString()}if(this.anchor()){this.anchor().indexOf("#")!==0&&(a=a+"#");a=a+this.anchor()}return a};d.prototype.clone=function(){return new d(this.toString())};define("confluence/jsUri",function(){return d})})(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-tasks:inline-tasks-resources', location = 'js/inline-tasks.js' */
(function(f){function e(m){var h,n;if(m.offsetX===undefined){var l=0,k=0,j=m.target,i;do{if(j.scrollTop!=0||j.scrollLeft!=0){i=j}l+=j.offsetLeft;k+=j.offsetTop;j=j.offsetParent}while(j&&j!=j.offsetParent);h=m.pageX+(i?i.scrollLeft:0)-l;n=m.pageY+(i?i.scrollTop:0)-k}else{h=m.offsetX;n=m.offsetY}return h>=3&&h<=14&&n>=3&&n<=14}function d(h){return h.currentTarget===h.target}function c(i){var h="page";if(i.closest("table.tasks-report").length){h="report"}else{if(i.closest("#task-container").length){h="mytasks"}else{if(i.closest("ul.inline-task-list").length){h="task"}}}return h}function g(k,i){var h=k.attr("data-inline-task-id");var j=k.find(i).first();if(j.closest("li").attr("data-inline-task-id")===h){return j}else{return f()}}var a=false;f(window).bind("beforeunload",function(){a=true});var b=[];f(document).delegate("ul.inline-task-list > li[data-inline-task-id]",{click:function(m){if(d(m)&&e(m)){var k=f(m.target).toggleClass("checked"),h=k.hasClass("checked")?"CHECKED":"UNCHECKED",j=k.data("inline-task-id"),n=k.closest("ul").attr("data-inline-tasks-content-id")||AJS.params.pageId,i=AJS.contextPath()+"/rest/inlinetasks/1/task/"+n+"/"+j+"/";k.prop("disabled",true);var l=k.closest("tr");l.attr("aria-disabled",true);b.push(j);AJS.trigger("inline-tasks.status-update.start",{status:h,taskId:j,taskListQueue:b});f.ajax({type:"POST",url:i,data:{status:h,trigger:"VIEW_PAGE",atl_token:AJS.Meta.get("atl-token")},dataType:"text",timeout:30000,error:function(p,r,o){if(a||r==="timeout"){return}AJS.logError("Inline Task #"+j+" was not persisted to "+h+" because of "+o+" (status: "+r+")");k.toggleClass("checked");var q;if(p.status===403){q=new Confluence.InlineTasks.Notice({textMessage:"Oops! You can\'t update this task because you are not allowed to edit the page it appears on.",className:"forbidden-notice"})}else{q=new Confluence.InlineTasks.Notice()}q.show()},success:function(){var o={dueDate:g(k,"time").attr("datetime"),completionDate:moment().format("YYYY-MM-DD"),mode:"view",assigneeUsername:g(k,".user-mention").attr("data-username"),context:c(k)};if(h==="CHECKED"){AJS.trigger("analyticsEvent",{name:"confluence-spaces.tasks.completed",data:o})}}}).always(function(){k.prop("disabled",false);var o=k.closest("tr");o.attr("aria-disabled",false);b.splice(AJS.indexOf(b,j),1);AJS.trigger("inline-tasks.status-update.complete",{status:h,taskId:j,taskListQueue:b})})}},mousemove:function(h){if(d(h)){if(e(h)){f(h.target).addClass("hover")}else{f(h.target).removeClass("hover")}}},mouseout:function(h){if(d(h)){f(h.target).removeClass("hover")}},mousedown:function(h){if(d(h)&&e(h)){f(h.target).addClass("task-active")}},mouseup:function(h){if(d(h)&&e(h)){f(h.target).removeClass("task-active")}}});f("ul.inline-task-list li:not(.checked) time.date-upcoming").tooltip({title:function(){return "This task is due in less than a week"},live:true});f("ul.inline-task-list li:not(.checked) time.date-past").tooltip({title:function(){return "This task is overdue"},live:true});f("span.emptycompletedate").tooltip({title:function(){return "A completion date wasn\'t recorded for this task"},live:true});f(document).on("click","time",function(){var i=f(this);var h={date:i.attr("datetime"),mode:"view",context:c(i)};AJS.trigger("analyticsEvent",{name:"confluence-spaces.date.clicked",data:h})})})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-tasks:inline-tasks-resources', location = 'js/inline-tasks-alert.js' */
Confluence.InlineTasks=Confluence.InlineTasks||{};(function(b){var a=function(c){this.settings=b.extend({},a.DEFAULTS,c);this.template=Confluence.InlineTasks.Templates;b("#inline-tasks-notice").remove();var d=b(this.template.notice(this.settings));d.hide().appendTo("body");d.find(".notice-close").click(function(){d.hide()});this.$notice=d};a.DEFAULTS={textMessage:"Oops! Your task change couldn\'t be saved. \u003cbr/\u003eThere could be a few reasons for this.",className:"general-notice"};a.prototype.show=function(){this.$notice.show();return this};a.prototype.hide=function(){this.$notice.hide();return this};Confluence.InlineTasks.Notice=a}(AJS.$));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-tasks:inline-tasks-resources', location = 'templates/inline-tasks.soy' */
// This file was automatically generated from inline-tasks.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.InlineTasks == 'undefined') { Confluence.InlineTasks = {}; }
if (typeof Confluence.InlineTasks.Templates == 'undefined') { Confluence.InlineTasks.Templates = {}; }


Confluence.InlineTasks.Templates.notice = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="aui-message error', (opt_data.className) ? ' ' + soy.$$escapeHtml(opt_data.className) : '', '" id="inline-tasks-notice">', opt_data.textMessage, '&nbsp;&nbsp;<a href="#" class="notice-close">', soy.$$escapeHtml("Dismiss"), '</a></div>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-tasks:inline-tasks-resources', location = 'js/inline-tasks-focus.js' */
AJS.$(document).ready(function(f){var d="focusedTaskId";var a=require("confluence/jsUri");var c=new a(window.location.href);var g=c.getQueryParamValue(d);if(g){var b=$("li[data-inline-task-id="+g+"]");if(b.length){b.addClass("focused");window.scrollTo(b.offset().left,(b.offset().top-($(window).height()/2)))}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-tasks:sortable-table-server-side', location = 'js/jquery.tablesorter.serveronly.js' */
(function(a){a.extend({tablesorterServerOnly:new function(){this.defaults={classNameDisableSorting:"aui-table-column-unsortable",classNameHeaderDesc:"tablesorter-headerDesc",classNameHeaderAsc:"tablesorter-headerAsc",reverseSort:false,sortColumn:"",onInit:function(){},onSort:function(){},events:{clickHeader:"click.sortServerOnly",refreshHeader:"refreshHeader.sortServerOnly",simulateClickHeader:"simulateClickHeader.sortServerOnly"}};var b=this;var d={updateCurrentHeaderSort:function(e,f){d.resetHeadersSort(e,f);f.$headers.each(function(){var h=a(this),g=h.attr("data-column-name");var i=f.reverseSort;if(g===f.sortColumn){i?h.addClass(f.classNameHeaderDesc):h.addClass(f.classNameHeaderAsc)}})},resetHeadersSort:function(e,f){f.$headers.removeClass(f.classNameHeaderDesc).removeClass(f.classNameHeaderAsc)},prepareHTMLHeader:function(e,f){f.$headers.not("."+f.classNameDisableSorting).attr("unselectable","on").bind("selectstart",false).addClass("tablesorter-header").wrapInner("<span class='aui-table-header-content'/>")},bindEvents:function(f,g){var e=a(f);e.on(g.events.refreshHeader,function(){d.updateCurrentHeaderSort(f,g)});e.on(g.events.simulateClickHeader,function(i,j,h){g.reverseSort=h;g.sortColumn=j})}};var c=function(f,g){var e=a(f);g.$table=e;g.$headers=e.find("thead th");g.$tbodies=e.find("tbody");d.prepareHTMLHeader(f,g);d.updateCurrentHeaderSort(f,g);if(typeof g.onInit==="function"){g.onInit.apply(f,[g])}g.$headers.on(g.events.clickHeader,function(){var h=a(this);if(h.hasClass(g.classNameDisableSorting)){return false}var i=h.attr("data-column-name");if(i===g.sortColumn){g.reverseSort=!g.reverseSort}else{g.reverseSort=false}g.sortColumn=i;if(typeof g.onSort==="function"){g.onSort.apply(f,[g])}return false});d.bindEvents(f,g)};b.construct=function(e){return this.each(function(){var f=this,g=a.extend(true,{},a.tablesorterServerOnly.defaults,e);if(this.config&&f.hasInitialized&&a.tablesorter){a.tablesorter.destroy(f,false,function(){c(f,g)})}else{c(f,g)}})}}()});a.fn.extend({tablesorterServerOnly:a.tablesorterServerOnly.construct})})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-tasks:sortable-table-server-side', location = 'js/tasks-table-sortable.js' */
(function(a){var b=function(d){this.ajaxUrl=d.ajaxUrl;this.restUrlPagination=d.restUrlPagination;this.$wrapper=d.$wrapper;this.table=d.table;this.$table=a(this.table);this.analyticEventKey=d.analyticEventKey;this.sortColumnDefault=d.sortColumnDefault||"duedate";this.sortReverseSortDefault=d.sortReverseSortDefault||false;this.reportParametersDefault=d.reportParametersDefault;this.pageIndex=d.pageIndex||0;this.pageSize=d.pageSize||10;this.pageTotal=d.pageTotal||0;this.pageLimit=d.pageLimit||7;this.adaptive=d.adaptive;this.columns=d.columns;this.templates=d.templates;this.onRenderEmptyTable=d.onRenderEmptyTable;this.onBusySorting=d.onBusySorting};b.getColumnNameFromSortBy=function(e){var d={"due date":"duedate","page title":"location",assignee:"assignee"};return d[e]?d[e]:"duedate"};b.getSortByFromColumnName=function(d){var e={duedate:"due date",location:"page title"};return e[d]?e[d]:d};b.prototype.updateOptions=function(d){a.extend(this,d);this.$table=a(this.table)};b.prototype.getCurrentPageIndex=function(){var e=this.$wrapper.find(".macro-auto-pagination").last();var d=parseInt(e.attr("data-initial-page-index"),10);return isNaN(d)?0:d};b.prototype.renderPagination=function(e,g){var d=this;if(!e){e=d.$table}if(!g){g=d.reportParametersDefault}this.$wrapper.find(".macro-auto-pagination").remove();if(!(d.pageTotal>1)){return}c.UI.Components.Pagination.build({scope:e,pageSize:d.pageSize,totalPages:d.pageTotal,pageLimit:d.pageLimit,path:d.restUrlPagination,adaptive:d.adaptive,currentPage:d.pageIndex,data:{reportParameters:JSON.stringify(g)},success:function f(h,j){var k={task:h,columns:d.columns};var i=d.templates.tasksReportLine(k);j.append(i)}})};b.prototype.toggleBusyState=function(d){this.$wrapper.attr("data-loading",d);if(d){this.$wrapper.find(".task-blanket").show()}else{this.$wrapper.find(".task-blanket").hide()}if(typeof this.onBusySorting==="function"){this.onBusySorting.apply(this,[d])}};b.prototype.renderTable=function(e){var d=this;var f=_.map(e,function(g){return d.templates.tasksReportLine({task:g,columns:d.columns})}).join("");d.$table.find("tbody").html(f)};b.prototype._triggerAnalyticsSorting=function(){var d=this.analyticEventKey;var e={column:this.sortColumn,direction:this.reverseSort?"desc":"asc"};AJS.trigger("analyticsEvent",{name:d,data:e})};b.prototype._buildAjaxData=function(e){var d={url:this.ajaxUrl,cache:false,dataType:"json",data:{pageIndex:this.pageIndex,pageSize:this.pageSize,reportParameters:JSON.stringify(e)}};return d};b.prototype.init=function(){var d=this;d.sortColumn=d.sortColumnDefault;d.reverseSort=d.sortReverseSortDefault;this.$table.tablesorterServerOnly({sortColumn:d.sortColumn,reverseSort:d.reverseSort,onInit:function(){var e=a(this);e.addClass("aui-table-sortable")},onSort:function(i){var h=this,f=a(h);d.pageIndex=d.getCurrentPageIndex();d.sortColumn=i.sortColumn;d.reverseSort=i.reverseSort;d.toggleBusyState(true);var g=a.extend({},d.reportParametersDefault,{sortColumn:b.getSortByFromColumnName(d.sortColumn),reverseSort:d.reverseSort});var e=d._buildAjaxData(g);a.ajax(e).done(function(j){d.pageIndex=d.getCurrentPageIndex();d.pageTotal=j.totalPages;if(d.pageIndex===0&&d.pageTotal===0){if(typeof d.onRenderEmptyTable==="function"){d.$wrapper.find(".macro-auto-pagination").remove();f.remove();d.onRenderEmptyTable.apply(d)}return}d.renderTable(j.detailLines);d.renderPagination(null,g);f.trigger("refreshHeader.sortServerOnly");d._triggerAnalyticsSorting()}).fail(function(){var j=new c.InlineTasks.Notice({textMessage:"We can\'t sort your tasks right now. Refresh the page to try again.",className:"forbidden-notice"});j.show()}).always(function(){d.toggleBusyState(false)})}})};var c=window.Confluence||{};c.InlineTasks=c.InlineTasks||{};c.InlineTasks.TasksTableSortable=b})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:common', location = '/js/namespace.js' */
window.Confluence||(window.Confluence={});window.Confluence.UI||(window.Confluence.UI={});window.Confluence.UI.Components||(window.Confluence.UI.Components={});window.Confluence.UI.Components.Pagination||(window.Confluence.UI.Components.Pagination={});window.Confluence.UI.Components.SpacePagePicker||(window.Confluence.UI.Components.SpacePagePicker={});window.Confluence.UI.Components.PagePicker||(window.Confluence.UI.Components.PagePicker={});define("confluence-ui-components/js/page-picker",function(){return window.Confluence.UI.Components.PagePicker});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:common', location = '/js/internal/confluence.js' */
define("confluence-ui-components/confluence",[],function(){return window.Confluence});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:pagination', location = '/js/pagination.js' */
(function(e,c){var d=function(j,k,i){var h=j.find("a").attr("aria-disabled",i);if(i){h.attr("disabled","disabled")}else{h.removeAttr("disabled");var g=e(".aui-nav-selected",j).data("index")+1;j.find(".aui-nav-next > a").attr("aria-disabled",g==k);j.find(".aui-nav-previous > a").attr("aria-disabled",g==1)}};var b={scope:null,success:null,data:null,path:"",url:"#",pageLimit:7,currentPage:0,adaptive:false,totalPages:0,pageSize:0};var f=function(i,j,k){var g=Math.floor(k/2);var h=j-1;if(!k||j<=k||i-g<0){return 0}if(i+g>h){return j-k}return i-g};var a=function(l){var k=l.totalPages,j=l.currentPage,m=l.pageLimit,h=l.adaptive,g;if(m){if(h){k=j+m}g=m}else{g=k}var i=f(j,k,m);return Confluence.UI.Components.Pagination.Templates.paginationFooter({currentPage:j||0,startPage:i,itemsToRender:g,totalPages:k,pageSize:l.pageSize,url:l.url||"#"})};c.build=function(j){var h=_.extend({},b,j);if(typeof h.success!=="function"){h.success=function(){}}var k=a(h);h.scope.after(k);var i=h.scope.next();var g=i.data("initial-page-index");i.on("click","a",function(p){var o=e(this),r=o.parents("ol").prev(),n=r.is("table")?r:r.find("table");var l=n.data("pageIndex")||g,q=o.parent("li");if(q.hasClass("aui-nav-selected")||q.find("> a[aria-disabled=true]").length){return}if(q.hasClass("aui-nav-next")){l++}else{if(q.hasClass("aui-nav-previous")){l--}else{l=q.data("index")}}d(i,h.totalPages,true);var m=e.extend({},{pageSize:h.pageSize,pageIndex:l},h.data);e.getJSON(Confluence.getContextPath()+h.path,m).done(function(t){l=t.currentPage;var s=n.find("tbody");s.find("tr").remove();n.data("pageIndex",l);_.each(t.detailLines,function(v){h.success(v,s)});AJS.trigger("ui.components.pagination.updated",[t,h]);var u=e.extend({},h,{totalPages:t.totalPages,adaptive:t.adaptive,currentPage:l});i.html(a(u));d(i,u.totalPages,false)}).fail(function(){d(i,h.totalPages,false)});p.preventDefault()})}})(AJS.$,window.Confluence.UI.Components.Pagination);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:pagination', location = '/soy/pagination.soy' */
// This file was automatically generated from pagination.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.UI == 'undefined') { Confluence.UI = {}; }
if (typeof Confluence.UI.Components == 'undefined') { Confluence.UI.Components = {}; }
if (typeof Confluence.UI.Components.Pagination == 'undefined') { Confluence.UI.Components.Pagination = {}; }
if (typeof Confluence.UI.Components.Pagination.Templates == 'undefined') { Confluence.UI.Components.Pagination.Templates = {}; }


Confluence.UI.Components.Pagination.Templates.paginationFooter = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<ol class="aui-nav aui-nav-pagination macro-auto-pagination" data-page-size="', soy.$$escapeHtml(opt_data.pageSize), '" data-initial-page-index="', soy.$$escapeHtml(opt_data.currentPage), '"><li class="aui-nav-previous"><a ', (opt_data.currentPage == 0) ? 'aria-disabled="true"' : 'href="#"', '>', soy.$$escapeHtml("Prev"), '</a></li>');
  var startIdx__soy16 = opt_data.startPage + 1;
  var currentIdx__soy17 = opt_data.currentPage + 1;
  var endIdx__soy18 = startIdx__soy16 + opt_data.itemsToRender;
  var totalRange__soy19 = opt_data.totalPages + 1;
  var indexInit20 = startIdx__soy16;
  var indexLimit20 = endIdx__soy18 < totalRange__soy19 ? endIdx__soy18 : totalRange__soy19;
  for (var index20 = indexInit20; index20 < indexLimit20; index20++) {
    output.append((index20 == currentIdx__soy17) ? '<li class="aui-nav-selected" data-index="' + soy.$$escapeHtml(index20 - 1) + '">' + soy.$$escapeHtml(index20) + '</li>' : '<li data-index="' + soy.$$escapeHtml(index20 - 1) + '"><a href="#">' + soy.$$escapeHtml(index20) + '</a></li>');
  }
  output.append('<li class="aui-nav-next"><a ', (currentIdx__soy17 == opt_data.totalPages) ? 'aria-disabled="true"' : 'href="' + soy.$$escapeHtml(opt_data.url) + '"', '>', soy.$$escapeHtml("Next"), '</a></li></ol>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:blank-placeholder-box', location = 'soy/blank-placeholder-box.soy' */
// This file was automatically generated from blank-placeholder-box.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.UI == 'undefined') { Confluence.UI = {}; }
if (typeof Confluence.UI.Components == 'undefined') { Confluence.UI.Components = {}; }
if (typeof Confluence.UI.Components.BlankPlaceholderBox == 'undefined') { Confluence.UI.Components.BlankPlaceholderBox = {}; }
if (typeof Confluence.UI.Components.BlankPlaceholderBox.Templates == 'undefined') { Confluence.UI.Components.BlankPlaceholderBox.Templates = {}; }


Confluence.UI.Components.BlankPlaceholderBox.Templates.blankBox = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="blank-placeholder-box ', (opt_data.customClass) ? soy.$$escapeHtml(opt_data.customClass) : '', '"><div class="content"><h2>', soy.$$escapeHtml(opt_data.blankTitle), '</h2><p>', soy.$$escapeHtml(opt_data.blankDescription), '</p></div>', (opt_data.customHtml) ? opt_data.customHtml : '', '</div>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-tasks:tasks-report-resources', location = 'templates/tasks-report.soy' */
// This file was automatically generated from tasks-report.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.InlineTasks == 'undefined') { Confluence.InlineTasks = {}; }
if (typeof Confluence.InlineTasks.Report == 'undefined') { Confluence.InlineTasks.Report = {}; }
if (typeof Confluence.InlineTasks.Report.Templates == 'undefined') { Confluence.InlineTasks.Report.Templates = {}; }


Confluence.InlineTasks.Report.Templates.tasksReport = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="table-wrapper" data-loading="false"><div class="task-blanket"></div><input type="hidden" name="reportParameters" value="', soy.$$escapeHtml(opt_data.reportParameters), '" /><table class="aui aui-table-interactive tasks-report" data-sortable="false" data-total-pages="', soy.$$escapeHtml(opt_data.totalPages), '" data-page-size="', soy.$$escapeHtml(opt_data.pageSize), '" data-adaptive="', soy.$$escapeHtml(opt_data.adaptive), '" data-page-limit="', soy.$$escapeHtml(opt_data.pageLimit), '"><thead><tr class="tablesorter-headerRow">');
  var headingList14 = opt_data.headings;
  var headingListLen14 = headingList14.length;
  for (var headingIndex14 = 0; headingIndex14 < headingListLen14; headingIndex14++) {
    var headingData14 = headingList14[headingIndex14];
    output.append('<th class="header-', soy.$$escapeHtml(headingData14), (headingData14 == 'description') ? ' aui-table-column-unsortable' : '', '" data-column-name="', soy.$$escapeHtml(headingData14), '">', soy.$$escapeHtml(opt_data.headingTexts[headingData14]), '</th>');
  }
  output.append('</tr></thead><tbody>');
  if (opt_data.tasks.length) {
    var taskList29 = opt_data.tasks;
    var taskListLen29 = taskList29.length;
    for (var taskIndex29 = 0; taskIndex29 < taskListLen29; taskIndex29++) {
      var taskData29 = taskList29[taskIndex29];
      Confluence.InlineTasks.Report.Templates.tasksReportLine({task: taskData29, columns: opt_data.headings}, output);
    }
  } else {
    output.append('<tr><td colspan="', soy.$$escapeHtml(opt_data.headings.length), '">', soy.$$escapeHtml("Create a task list in a Confluence page to keep track of things you need to do."), '</td></tr>');
  }
  output.append('</tbody></table></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.InlineTasks.Report.Templates.tasksFeatureDiscoveryNotification = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<h2>', soy.$$escapeHtml("Hey! Did you know..."), '</h2><p>', soy.$$escapeHtml("You can view the tasks you created, or assigned to you, in the tasks tabs of your profile."), '</p>');
  return opt_sb ? '' : output.toString();
};


Confluence.InlineTasks.Report.Templates.tasksReportLine = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<tr data-task-id="', soy.$$escapeHtml(opt_data.task.taskId), '" aria-disabled="false">');
  var columnList51 = opt_data.columns;
  var columnListLen51 = columnList51.length;
  for (var columnIndex51 = 0; columnIndex51 < columnListLen51; columnIndex51++) {
    var columnData51 = columnList51[columnIndex51];
    if (columnData51 == 'duedate') {
      output.append('<td class=\'tasks-report-date\'>', (opt_data.task.dueDate) ? soy.$$escapeHtml(opt_data.task.dueDate) : '', '</td>');
    } else if (columnData51 == 'description') {
      output.append('<td>', opt_data.task.taskHtml, '</td>');
    } else if (columnData51 == 'assignee') {
      output.append('<td class=\'tasks-report-assignee\'>');
      if (opt_data.task.assigneeUserName) {
        Confluence.Templates.User.usernameLink({username: opt_data.task.assigneeUserName, fullName: opt_data.task.assigneeFullName, canView: false}, output);
      }
      output.append('</td>');
    } else if (columnData51 == 'location') {
      output.append('<td><a class=\'task-location\' href="', soy.$$escapeHtml(opt_data.task.pageUrl), '">', soy.$$escapeHtml(opt_data.task.pageTitle), '</a></td>');
    } else if (columnData51 == 'completedate') {
      output.append('<td class=\'tasks-report-date\'>', (opt_data.task.completeDate) ? soy.$$escapeHtml(opt_data.task.completeDate) : (opt_data.task.taskCompleted) ? '<span class="emptycompletedate">--</span>' : '', '</td>');
    } else if (columnData51 == 'labels') {
      output.append('<td>');
      var labelList89 = opt_data.task.labels;
      var labelListLen89 = labelList89.length;
      for (var labelIndex89 = 0; labelIndex89 < labelListLen89; labelIndex89++) {
        var labelData89 = labelList89[labelIndex89];
        aui.labels.label({text: labelData89}, output);
      }
      output.append('</td>');
    }
  }
  output.append('</tr>');
  return opt_sb ? '' : output.toString();
};


Confluence.InlineTasks.Report.Templates.taskReportBrowserWarning = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  var param97 = new soy.StringBuilder('<p>', soy.$$escapeHtml("Unable to show this task report."), '</p>');
  var messageList101 = opt_data.messages;
  var messageListLen101 = messageList101.length;
  for (var messageIndex101 = 0; messageIndex101 < messageListLen101; messageIndex101++) {
    var messageData101 = messageList101[messageIndex101];
    param97.append('<p>', soy.$$escapeHtml(messageData101), '</p>');
  }
  aui.message.warning({content: param97.toString()}, output);
  return opt_sb ? '' : output.toString();
};


Confluence.InlineTasks.Report.Templates.taskReportWarning = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  aui.message.warning({content: '<p>' + soy.$$escapeHtml("Unable to show the task report. Edit this page to resolve the issues.") + '</p>'}, output);
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-tasks:tasks-report-resources', location = 'js/tasks-report-blank-exp.js' */
(function(b){Confluence.InlineTasks=Confluence.InlineTasks||{};Confluence.InlineTasks.TasksReport=Confluence.InlineTasks.TasksReport||{};var a={"blank.complete.title":"Task report","blank.complete.desc":"Get going, no tasks completed yet.","blank.incomplete.title":"Task report","blank.incomplete.desc":"Looking good, no incomplete tasks."};Confluence.InlineTasks.TasksReport.renderBlankExperiences=function(g,c){if(!c){c="incomplete"}var f=a["blank."+c+".title"],e=a["blank."+c+".desc"];var d=Confluence.UI.Components.BlankPlaceholderBox.Templates.blankBox({blankTitle:f,blankDescription:e,customClass:c+" tasks-report-blank"});g.html(d)}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-tasks:tasks-report-resources', location = 'js/tasks-report.js' */
AJS.$(function(c){var b="/rest/inlinetasks/1/task-report/",a=Confluence.InlineTasks.Report.Templates,e=Confluence.InlineTasks.TasksTableSortable;var d=c(".tasks-report").parent();_.each(d,function(i){var l=c(i),n=l.find("table.tasks-report"),m=n.data("page-size"),k=n.data("total-pages"),f=n.data("page-limit"),q=n.data("adaptive"),p=l.find("input[name=reportParameters]").val(),g=JSON.parse(p);var o=function(r,s){c(r).attr("aria-disabled",s)};AJS.bind("inline-tasks.status-update.start",function(t,s){if(s.taskListQueue.length>0){var r=c("li[data-inline-task-id="+s.taskId+"]").closest(".tasks-report").siblings(".macro-auto-pagination");o(r,true);r=r.find("li a");r.on("click.taskreport.pagination",function(u){u.preventDefault();u.stopPropagation()})}});AJS.bind("inline-tasks.status-update.complete",function(s,r){if(r.taskListQueue.length===0){o(".macro-auto-pagination",false);c(".macro-auto-pagination li a").off("click.taskreport.pagination")}});var j=n.closest(".table-wrapper");var h=new e({$wrapper:j,table:n[0],sortReverseSortDefault:g.reverseSort,sortColumnDefault:e.getColumnNameFromSortBy(g.sortColumn),reportParametersDefault:g,pageIndex:0,pageSize:m,pageTotal:k,adaptive:q,pageLimit:f,templates:a,columns:g.columns,onRenderEmptyTable:function(){Confluence.InlineTasks.TasksReport.renderBlankExperiences(j,g.status)},analyticEventKey:"confluence-spaces.tasks.report.sorted",restUrlPagination:b,ajaxUrl:Confluence.getContextPath()+b});h.init();if(q||k>1){h.renderPagination()}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.atlassian-help-tips:common', location = 'js/help-tip.js' */
(function(f){function b(){return false}function d(){return true}var l=0,g=new Date().getTime();var k=AJS.contextPath()+"/rest/helptips/1.0/tips";function h(n){n=""+(n||"");return n.replace(/\./g,"-")}function j(o,n){if(AJS.EventQueue&&n&&n.attributes.id){var q={};var p=h(n.attributes.id);q.name="helptips."+p+"."+o;q.properties={};AJS.EventQueue.push(q)}}function c(){return"c"+g+(l++)}var a={dismissedTipIds:[],loaded:f.Deferred(),url:function(){return k},sync:function(o,n){o||(o="get");n||(n=null);return f.ajax(this.url(),{type:o,context:this,dataType:"json",contentType:"application/json",data:n&&JSON.stringify(n),processData:false}).promise()},fetch:function(){var n=this.sync();n.done(function(o){f.merge(this.dismissedTipIds,o);this.loaded.resolve()});return n.promise()},show:function(n){this.loaded.done(n)},dismiss:function(n){var o=n.attributes.id;if(!o){n._dismissed=true}else{this.dismissedTipIds.push(o);this.sync("post",{id:o})}},undismiss:function(n){var o=n.attributes.id;if(!o){n._dismissed=false}else{this.dismissedTipIds.splice(f.inArray(o,this.dismissedTipIds),1);this.sync("delete",{id:o})}},isDismissed:function(n){var o=n.attributes.id;return(o)?f.inArray(o,this.dismissedTipIds)>=0:n._dismissed}};var e=AJS.HelpTip=function(n){var o;this.attributes=f.extend({},n);this.attributes.id||(this.attributes.id=false);if(this.attributes.body){this.attributes.bodyHtml=this.attributes.body;delete this.attributes.body}this.cid=c();o=this.attributes.anchor;delete this.attributes.anchor;this.view=o?new i(this,o):new m(this);this.view.$el.addClass("aui-help-tip")};AJS.HelpTip.Manager=a;f.extend(e.prototype,{show:function(){var n=this;AJS.HelpTip.Manager.show(function(){if(!n.isDismissed()){if(AJS.Popups&&AJS.Popups.DisplayController){AJS.Popups.DisplayController.request({name:n.id,weight:1000,show:function(){n.view.show()}})}else{n.view.show()}j("shown",n)}})},dismiss:function(){var n=h(arguments[0]||"programmatically");this.view.dismiss();if(!this.isDismissed()){AJS.HelpTip.Manager.dismiss(this);j("dismissed."+n,this)}},isVisible:function(){return this.view.$el.is(":visible")},isDismissed:function(){return AJS.HelpTip.Manager.isDismissed(this)}});var i=function(o,n){this.initialize(o,n)};f.extend(i.prototype,{initialize:function(r,q){var o=this;var s=q.prop("ownerDocument");var p=s!=window.document;if(p){var n=f("iframe").filter(function(){return this.contentDocument==s});n.contents().scroll(function(){var v=f(this).contents().find("body").scrollTop();var w=n.offset().top;var u=o.popup.data("offset-top");var t=o.popup.find(".arrow").height();o.popup.css("top",u-v);o.popup.toggle(v<=u-w-t&&v+n.height()-t+w-o.popup.height()>=u)})}this.model=r;this.beforeHide=b;this.dismissButton=f(AJS.Templates.HelpTip.tipDismiss());this.dismissButton.click(function(t){r.dismiss("close-button");t.preventDefault()});this.popup=AJS.InlineDialog(q,r.cid,function(v,u,t){v.html(AJS.Templates.HelpTip.tipContent(r.attributes));v.find(".helptip-body").after(o.dismissButton);v.unbind("mouseover mouseout");v.find(".helptip-link").click(function(){j("learn-more.clicked",r)});t()},{container:"body",noBind:true,preHideCallback:function(){return o.beforeHide()},calculatePositions:function(t,y,z,x){var w=AJS.InlineDialog.opts.calculatePositions(t,y,z,x);if(p){var v=t.find(".arrow").height();var u=n.contents().find("body").scrollTop();w.popupCss.top=n.offset().top+(q.offset().top-u)+q.height()+v;w.popupCss.left=q.offset().left;n.contents().scroll()}t.data("offset-top",w.popupCss.top);return w}});this.popup.refresh();this._popupHide=this.popup.hide;this.popup.hide=b;this.$el=f(this.popup[0]);AJS.$(document).bind("showLayer",function(v,u,t){if(u==="inlineDialog"&&t.id===r.cid){AJS.InlineDialog.current=null;AJS.$(document.body).unbind("click."+r.cid+".inline-dialog-check");t._validateClickToClose=b;t.hide=b}})},show:function(){var n=this.popup,o=function(p){if(!n.has(p.target).length){n.shadow.remove();n.remove()}};n.show()},dismiss:function(){this.beforeHide=d;this._popupHide()}});var m=function(n){this.initialize(n)};f.extend(m.prototype,{initialize:function(){this.$el=f("<div />")},show:f.noop,dismiss:f.noop});if(AJS.Meta.get("remote-user")){a.fetch()}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.atlassian-help-tips:common', location = 'templates/help-tip.soy' */
// This file was automatically generated from help-tip.soy.
// Please don't edit this file by hand.

if (typeof AJS == 'undefined') { var AJS = {}; }
if (typeof AJS.Templates == 'undefined') { AJS.Templates = {}; }
if (typeof AJS.Templates.HelpTip == 'undefined') { AJS.Templates.HelpTip = {}; }


AJS.Templates.HelpTip.tipContent = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.title) ? '<h4 class="helptip-title">' + soy.$$escapeHtml(opt_data.title) + '</h4>' : '', '<div class="helptip-body">', opt_data.bodyHtml, '</div>', (opt_data.url) ? '<a class="helptip-link" href="' + soy.$$escapeHtml(opt_data.url) + '" target="_blank">' + soy.$$escapeHtml("Learn more") + '</a>' : '');
  return opt_sb ? '' : output.toString();
};


AJS.Templates.HelpTip.tipDismiss = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<button class="helptip-dismiss aui-button" type="button">', soy.$$escapeHtml("Dismiss"), '</button>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-tasks:tasks-feature-discovery-resources', location = 'js/tasks-discovery.js' */
(function(b){function a(){if(!!AJS.HelpTip){var c={id:null,body:Confluence.InlineTasks.Report.Templates.tasksFeatureDiscoveryNotification(),anchor:b("#user-menu-link")};var d=new AJS.HelpTip(c);AJS.trigger("analyticsEvent",{name:"confluence-spaces.tasks.feature.discovery.shown"});d.show()}}b(document).ready(function(){if(b("meta[name=show-task-feature-discovery-flag]").length>0){a()}})})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.drag-and-drop:plupload', location = 'js/plupload.js' */
(function(){function x(){this.returnValue=!1}function y(){this.cancelBubble=!0}var z=0,p=[],u={},v={},t={},w={"<":"lt",">":"gt","&":"amp",'"':"quot","'":"#39"},A=/[<>&\"\']/g,q=window.setTimeout,m={},h,j="application/msword,doc dot,application/pdf,pdf,application/pgp-signature,pgp,application/postscript,ps ai eps,application/rtf,rtf,application/vnd.ms-excel,xls xlb,application/vnd.ms-powerpoint,ppt pps pot,application/zip,zip,application/java-archive,jar,application/java-archive,war,application/java-archive,ear,application/x-shockwave-flash,swf swfl,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,xlsx,application/vnd.openxmlformats-officedocument.spreadsheetml.template,xltx,application/vnd.openxmlformats-officedocument.presentationml.presentation,pptx,application/vnd.openxmlformats-officedocument.presentationml.slideshow,ppsx,application/vnd.openxmlformats-officedocument.presentationml.template,potx,application/vnd.openxmlformats-officedocument.wordprocessingml.document,docx,application/vnd.openxmlformats-officedocument.wordprocessingml.template,dotx,audio/mpeg,mpga mpega mp2 mp3,audio/mp3,mp3,audio/x-wav,wav,audio/mp4,m4a,image/bmp,bmp,image/gif,gif,image/jpeg,jpeg jpg jpe,image/photoshop,psd,image/png,png,image/svg+xml,svg svgz,image/tiff,tiff tif,text/html,htm html xhtml,text/xml,xml,text/javascript,js,text/css,css,text/rtf,rtf,text/x-java-source,java,video/mpeg,mpeg mpg mpe,video/quicktime,qt mov,video/mp4,mp4,video/x-m4v,m4v,video/x-flv,flv,video/x-ms-wmv,wmv,video/avi,avi,video/webm,webm,video/vnd.rn-realvideo,rv,text/csv,csv,text/plain,asc txt text diff log,application/octet-stream,exe".split(/,/),
k,n,o;for(k=0;k<j.length;k+=2){o=j[k+1].split(/ /);for(n=0;n<o.length;n++){v[o[n]]=j[k];var r=t[j[k]]||[];r.push(o[n]);t[j[k]]=r}}j=navigator;k=j.userAgent;o=j.vendor;r=(n=/WebKit/.test(k))&&-1!==o.indexOf("Apple");o=window.opera&&window.opera.buildNumber;var j={windows:-1!==navigator.platform.indexOf("Win"),ie:!n&&!o&&/MSIE/gi.test(k)&&/Explorer/gi.test(j.appName),webkit:n,gecko:!n&&/Gecko/.test(k),safari:r,opera:!!o},c={VERSION:"@@version@@",STOPPED:1,STARTED:2,QUEUED:1,UPLOADING:2,FAILED:4,DONE:5,
GENERIC_ERROR:-100,HTTP_ERROR:-200,IO_ERROR:-300,SECURITY_ERROR:-400,INIT_ERROR:-500,FILE_SIZE_ERROR:-600,FILE_EXTENSION_ERROR:-601,IMAGE_FORMAT_ERROR:-700,IMAGE_MEMORY_ERROR:-701,IMAGE_DIMENSIONS_ERROR:-702,mimeTypes:v,mineTypeToExtensionsMap:t,ua:j,extend:function(a){c.each(arguments,function(b,g){0<g&&c.each(b,function(b,c){a[c]=b})});return a},getElement:function(a){return a&&1==a.nodeType?a:document.getElementById(a)},cleanName:function(a){var b,c;c=[/[\300-\306]/g,"A",/[\340-\346]/g,"a",/\307/g,
"C",/\347/g,"c",/[\310-\313]/g,"E",/[\350-\353]/g,"e",/[\314-\317]/g,"I",/[\354-\357]/g,"i",/\321/g,"N",/\361/g,"n",/[\322-\330]/g,"O",/[\362-\370]/g,"o",/[\331-\334]/g,"U",/[\371-\374]/g,"u"];for(b=0;b<c.length;b+=2)a=a.replace(c[b],c[b+1]);a=a.replace(/\s+/g,"_");return a=a.replace(/[^a-z0-9_\-\.]+/gi,"")},addRuntime:function(a,b){b.name=a;p[a]=b;p.push(b);return b},guid:function(){var a=(new Date).getTime().toString(32),b;for(b=0;5>b;b++)a+=Math.floor(65535*Math.random()).toString(32);return(c.guidPrefix||
"p")+a+(z++).toString(32)},buildUrl:function(a,b){var g="";c.each(b,function(a,b){g+=(g?"&":"")+encodeURIComponent(b)+"="+encodeURIComponent(a)});g&&(a+=(0<a.indexOf("?")?"&":"?")+g);return a},each:function(a,b){var c,f;if(a)if(c=a.length,void 0===c)for(f in a){if(a.hasOwnProperty(f)&&!1===b(a[f],f))break}else for(f=0;f<c&&!1!==b(a[f],f);f++);},formatSize:function(a){return void 0===a||/\D/.test(a)?c.translate("N/A"):1073741824<a?Math.round(a/1073741824,1)+" GB":1048576<a?Math.round(a/1048576,1)+
" MB":1024<a?Math.round(a/1024,1)+" KB":a+" b"},getPos:function(a,b){function c(a){var b,e=0;b=0;a&&(b=a.getBoundingClientRect(),a="CSS1Compat"===h.compatMode?h.documentElement:h.body,e=b.left+a.scrollLeft,b=b.top+a.scrollTop);return{x:e,y:b}}var f=0,d=0,e,h=document,b=b||h.body;if(a&&a.getBoundingClientRect&&0<navigator.userAgent.indexOf("MSIE")&&8!==h.documentMode)return f=c(a),d=c(b),{x:f.x-d.x,y:f.y-d.y};for(e=a;e&&e!=b&&e.nodeType;)f+=e.offsetLeft||0,d+=e.offsetTop||0,e=e.offsetParent;for(e=
a.parentNode;e&&e!=b&&e.nodeType;)f-=e.scrollLeft||0,d-=e.scrollTop||0,e=e.parentNode;return{x:f,y:d}},getSize:function(a){return{w:a.offsetWidth||a.clientWidth,h:a.offsetHeight||a.clientHeight}},parseSize:function(a){var b;"string"==typeof a&&(a=/^([0-9]+)([mgk]?)$/.exec(a.toLowerCase().replace(/[^0-9mkg]/g,"")),b=a[2],a=+a[1],"g"==b&&(a*=1073741824),"m"==b&&(a*=1048576),"k"==b&&(a*=1024));return a},xmlEncode:function(a){return a?(""+a).replace(A,function(a){return w[a]?"&"+w[a]+";":a}):a},toArray:function(a){var b,
c=[];for(b=0;b<a.length;b++)c[b]=a[b];return c},addI18n:function(a){return c.extend(u,a)},translate:function(a){return u[a]||a},isEmptyObj:function(a){if(void 0===a)return!0;for(var b in a)return!1;return!0},hasClass:function(a,b){return""==a.className?!1:RegExp("(^|\\s+)"+b+"(\\s+|$)").test(a.className)},addClass:function(a,b){c.hasClass(a,b)||(a.className=""==a.className?b:a.className.replace(/\s+$/,"")+" "+b)},removeClass:function(a,b){a.className=a.className.replace(RegExp("(^|\\s+)"+b+"(\\s+|$)"),
function(a,b,c){return" "===b&&" "===c?" ":""})},getStyle:function(a,b){if(a.currentStyle)return a.currentStyle[b];if(window.getComputedStyle)return window.getComputedStyle(a,null)[b]},addEvent:function(a,b,g,f){var d,b=b.toLowerCase();void 0===h&&(h="Plupload_"+c.guid());a.addEventListener?(d=g,a.addEventListener(b,d,!1)):a.attachEvent&&(d=function(){var a=window.event;a.target||(a.target=a.srcElement);a.preventDefault=x;a.stopPropagation=y;g(a)},a.attachEvent("on"+b,d));void 0===a[h]&&(a[h]=c.guid());
m.hasOwnProperty(a[h])||(m[a[h]]={});a=m[a[h]];a.hasOwnProperty(b)||(a[b]=[]);a[b].push({func:d,orig:g,key:f})},removeEvent:function(a,b,g){var f,d;"function"==typeof g?f=g:d=g;b=b.toLowerCase();if(a[h]&&m[a[h]]&&m[a[h]][b]){for(var g=m[a[h]][b],e=g.length-1;0<=e;e--)if(g[e].key===d||g[e].orig===f)if(a.detachEvent?a.detachEvent("on"+b,g[e].func):a.removeEventListener&&a.removeEventListener(b,g[e].func,!1),g[e].orig=null,g[e].func=null,g.splice(e,1),void 0!==f)break;g.length||delete m[a[h]][b];if(c.isEmptyObj(m[a[h]])){delete m[a[h]];
try{delete a[h]}catch(k){a[h]=void 0}}}},removeAllEvents:function(a,b){void 0!==a[h]&&a[h]&&c.each(m[a[h]],function(g,f){c.removeEvent(a,f,b)})},Uploader:function(a){function b(){var a,b=0,d;if(this.state==c.STARTED){for(d=0;d<e.length;d++)!a&&e[d].status==c.QUEUED?(a=e[d],a.status=c.UPLOADING,this.trigger("BeforeUpload",a)&&this.trigger("UploadFile",a)):b++;b==e.length&&(this.stop(),this.trigger("UploadComplete",e))}}function g(){var a,b;d.reset();for(a=0;a<e.length;a++)b=e[a],void 0!==b.size?(d.size+=
b.size,d.loaded+=b.loaded):d.size=void 0,b.status==c.DONE?d.uploaded++:b.status==c.FAILED?d.failed++:d.queued++;void 0===d.size?d.percent=0<e.length?Math.ceil(100*(d.uploaded/e.length)):0:(d.bytesPerSec=Math.ceil(d.loaded/((+new Date-h||1)/1E3)),d.percent=0<d.size?Math.ceil(100*(d.loaded/d.size)):0)}var f={},d,e=[],h;d=new c.QueueProgress;a=c.extend({chunk_size:0,multipart:!0,multi_selection:!0,file_data_name:"file",filters:[]},a);c.extend(this,{state:c.STOPPED,runtime:"",features:{},files:e,settings:a,
total:d,id:c.guid(),init:function(){function f(){var a=s[k++],b,e,d;if(a){b=a.getFeatures();if(e=i.settings.required_features){e=e.split(",");for(d=0;d<e.length;d++)if(!b[e[d]]){f();return}}a.init(i,function(c){c&&c.success?(i.features=b,i.runtime=a.name,i.trigger("Init",{runtime:a.name}),i.trigger("PostInit"),i.refresh()):f()})}else i.trigger("Error",{code:c.INIT_ERROR,message:c.translate("Init error.")})}var i=this,l,s,k=0,j;"function"==typeof a.preinit?a.preinit(i):c.each(a.preinit,function(a,
b){i.bind(b,a)});a.page_url=a.page_url||document.location.pathname.replace(/\/[^\/]+$/g,"/");/^(\w+:\/\/|\/)/.test(a.url)||(a.url=a.page_url+a.url);a.chunk_size=c.parseSize(a.chunk_size);a.max_file_size=c.parseSize(a.max_file_size);i.bind("FilesAdded",function(b,d){b.trigger("Started",d);var f,g,l=0,h;if((f=a.filters)&&f.length){h=[];c.each(f,function(a){c.each(a.extensions.split(/,/),function(a){/^\s*\*\s*$/.test(a)?h.push("\\.*"):h.push("\\."+a.replace(RegExp("["+"/^$.*+?|()[]{}\\".replace(/./g,
"\\$&")+"]","g"),"\\$&"))})});h=RegExp(h.join("|")+"$","i")}for(f=0;f<d.length;f++){g=d[f];g.loaded=0;g.percent=0;g.status=c.QUEUED;if(h&&!h.test(g.name))b.trigger("Error",{code:c.FILE_EXTENSION_ERROR,message:c.translate("File extension error."),file:g});else if(g.size!==void 0&&g.size>a.max_file_size)b.trigger("Error",{code:c.FILE_SIZE_ERROR,message:c.translate("File size error."),file:g});else{e.push(g);l++}}if(l)q(function(){i.trigger("QueueChanged");i.refresh()},1);else return false});a.unique_names&&
i.bind("UploadFile",function(a,b){var c=b.name.match(/\.([^.]+)$/),d="tmp";c&&(d=c[1]);b.target_name=b.id+"."+d});i.bind("UploadProgress",function(a,b){b.percent=b.size>0?Math.ceil(b.loaded/b.size*100):100;g()});i.bind("StateChanged",function(a){if(a.state==c.STARTED)h=+new Date;else if(a.state==c.STOPPED)for(l=a.files.length-1;l>=0;l--)if(a.files[l].status==c.UPLOADING){a.files[l].status=c.QUEUED;g()}});i.bind("QueueChanged",g);i.bind("Error",function(a,e){if(e.file){e.file.status=c.FAILED;g();a.state==
c.STARTED&&(d.queued||q(function(){b.call(i)},1))}});i.bind("FileUploaded",function(a,d){d.status=c.DONE;d.loaded=d.size;a.trigger("UploadProgress",d);q(function(){b.call(i)},1)});if(a.runtimes){s=[];j=a.runtimes.split(/\s?,\s?/);for(l=0;l<j.length;l++)p[j[l]]&&s.push(p[j[l]])}else s=p;f();"function"==typeof a.init?a.init(i):c.each(a.init,function(a,b){i.bind(b,a)})},refresh:function(){this.trigger("Refresh")},start:function(){this.state!=c.STARTED&&(this.state=c.STARTED,this.trigger("StateChanged"),
b.call(this))},stop:function(){this.state!=c.STOPPED&&(this.state=c.STOPPED,this.trigger("CancelUpload"),this.trigger("StateChanged"))},getFile:function(a){var b;for(b=e.length-1;0<=b;b--)if(e[b].id===a)return e[b]},removeFile:function(a){var b;for(b=e.length-1;0<=b;b--)if(e[b].id===a.id)return this.splice(b,1)[0]},splice:function(a,b){var f;f=e.splice(void 0===a?0:a,void 0===b?e.length:b);this.trigger("FilesRemoved",f);this.trigger("QueueChanged");f[0].status==c.UPLOADING&&this.state==c.STARTED&&
this.trigger("CancelUpload");if(!d.queued){var g=this;q(function(){g.trigger("UploadComplete")})}return f},trigger:function(a){var b=f[a.toLowerCase()],c,d;if(b){d=Array.prototype.slice.call(arguments);d[0]=this;for(c=0;c<b.length;c++)if(!1===b[c].func.apply(b[c].scope,d))return!1}return!0},hasEventListener:function(a){return!!f[a.toLowerCase()]},bind:function(a,b,c){var d,a=a.toLowerCase();d=f[a]||[];d.push({func:b,scope:c||this});f[a]=d},unbind:function(a,b){var a=a.toLowerCase(),c=f[a],d;if(c){if(void 0!==
b)for(d=c.length-1;0<=d;d--){if(c[d].func===b){c.splice(d,1);break}}else c=[];c.length||delete f[a]}},unbindAll:function(){var a=this;c.each(f,function(b,c){a.unbind(c)})},destroy:function(){this.trigger("Destroy");this.unbindAll()}})},File:function(a,b,c){this.id=a;this.name=b;this.size=c;this.status=this.percent=this.loaded=0},Runtime:function(){this.getFeatures=function(){};this.init=function(){}},QueueProgress:function(){var a=this;a.size=0;a.loaded=0;a.uploaded=0;a.failed=0;a.queued=0;a.percent=
0;a.bytesPerSec=0;a.reset=function(){a.size=a.loaded=a.uploaded=a.failed=a.queued=a.percent=a.bytesPerSec=0}},runtimes:{}};window.plupload=c})();
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.drag-and-drop:plupload', location = 'js/plupload.html5.js' */
(function(s,j,e,p){function G(e,f,k,g){var b,a,c,q,m=this;var d=y[e.id],r=function(d){b=j.createElement("canvas");b.style.display="none";j.body.appendChild(b);a=b.getContext("2d");c=new Image;c.onerror=c.onabort=function(){g({success:!1})};c.onload=function(){var r,t,j,o;f.width||(f.width=c.width);f.height||(f.height=c.height);q=Math.min(f.width/c.width,f.height/c.height);if(1>q||1===q&&"image/jpeg"===k){r=Math.round(c.width*q);t=Math.round(c.height*q);b.width=r;b.height=t;a.drawImage(c,0,0,r,t);
if("image/jpeg"===k){if(j=new w(atob(d.substring(d.indexOf("base64,")+7))),j.headers&&j.headers.length&&(o=new H,o.init(j.get("exif")[0])&&(o.setExif("PixelXDimension",r),o.setExif("PixelYDimension",t),j.set("exif",o.getBinary()),m.hasEventListener("ExifData")&&m.trigger("ExifData",e,o.EXIF()),m.hasEventListener("GpsData")&&m.trigger("GpsData",e,o.GPS()))),f.quality)try{d=b.toDataURL(k,f.quality/100)}catch(s){d=b.toDataURL(k)}}else d=b.toDataURL(k);d=d.substring(d.indexOf("base64,")+7);d=atob(d);
j&&(j.headers&&j.headers.length)&&(d=j.restore(d),j.purge());b.parentNode.removeChild(b);g({success:!0,data:d})}else g({success:!1})};c.src=d},t;"FileReader"in s?(t=new FileReader,t.readAsDataURL(d),t.onload=function(){r(t.result)}):r(d.getAsDataURL())}function C(){function e(b,a){var c=k?0:-8*(a-1),q=0,m;for(m=0;m<a;m++)q|=g.charCodeAt(b+m)<<Math.abs(c+8*m);return q}function f(b,a,c){c=3===arguments.length?c:g.length-a-1;g=g.substr(0,a)+b+g.substr(c+a)}var k=!1,g;return{II:function(b){if(b===p)return k;
k=b},init:function(b){k=!1;g=b},SEGMENT:function(b,a,c){switch(arguments.length){case 1:return g.substr(b,g.length-b-1);case 2:return g.substr(b,a);case 3:f(c,b,a);break;default:return g}},BYTE:function(b){return e(b,1)},SHORT:function(b){return e(b,2)},LONG:function(b,a){if(a===p)return e(b,4);var c="",q=k?0:-24,m;for(m=0;4>m;m++)c+=String.fromCharCode(a>>Math.abs(q+8*m)&255);f(c,b,4)},SLONG:function(b){b=e(b,4);return 2147483647<b?b-4294967296:b},STRING:function(b,a){for(var c="",a=a+b;b<a;b++)c+=
String.fromCharCode(e(b,1));return c}}}function w(e){var f={65505:{app:"EXIF",name:"APP1",signature:"Exif\x00"},65506:{app:"ICC",name:"APP2",signature:"ICC_PROFILE\x00"},65517:{app:"IPTC",name:"APP13",signature:"Photoshop 3.0\x00"}},k=[],g,b,a=p,c=0;g=new C;g.init(e);if(65496===g.SHORT(0)){b=2;for(e=Math.min(1048576,e.length);b<=e;)if(a=g.SHORT(b),65488<=a&&65495>=a)b+=2;else{if(65498===a||65497===a)break;c=g.SHORT(b+2)+2;f[a]&&g.STRING(b+4,f[a].signature.length)===f[a].signature&&k.push({hex:a,app:f[a].app.toUpperCase(),
name:f[a].name.toUpperCase(),start:b,length:c,segment:g.SEGMENT(b,c)});b+=c}g.init(null);return{headers:k,restore:function(a){g.init(a);var c=new w(a);if(!c.headers)return!1;for(a=c.headers.length;0<a;a--){var d=c.headers[a-1];g.SEGMENT(d.start,d.length,"")}c.purge();b=65504==g.SHORT(2)?4+g.SHORT(4):2;a=0;for(c=k.length;a<c;a++)g.SEGMENT(b,0,k[a].segment),b+=k[a].length;return g.SEGMENT()},get:function(a){for(var c=[],d=0,b=k.length;d<b;d++)k[d].app===a.toUpperCase()&&c.push(k[d].segment);return c},
set:function(a,c){var d=[];"string"===typeof c?d.push(c):d=c;for(var b=ii=0,e=k.length;b<e&&!(k[b].app===a.toUpperCase()&&(k[b].segment=d[ii],k[b].length=d[ii].length,ii++),ii>=d.length);b++);},purge:function(){k=[];g.init(null)}}}}function H(){function e(a,c){var q=f.SHORT(a),m,d,k,h,l,j=[],n={};for(m=0;m<q;m++)if(l=a+12*m+2,k=c[f.SHORT(l)],k!==p){d=f.SHORT(l+=2);h=f.LONG(l+=2);l+=4;j=[];switch(d){case 1:case 7:4<h&&(l=f.LONG(l)+g.tiffHeader);for(d=0;d<h;d++)j[d]=f.BYTE(l+d);break;case 2:4<h&&(l=
f.LONG(l)+g.tiffHeader);n[k]=f.STRING(l,h-1);continue;case 3:2<h&&(l=f.LONG(l)+g.tiffHeader);for(d=0;d<h;d++)j[d]=f.SHORT(l+2*d);break;case 4:1<h&&(l=f.LONG(l)+g.tiffHeader);for(d=0;d<h;d++)j[d]=f.LONG(l+4*d);break;case 5:l=f.LONG(l)+g.tiffHeader;for(d=0;d<h;d++)j[d]=f.LONG(l+4*d)/f.LONG(l+4*d+4);break;case 9:l=f.LONG(l)+g.tiffHeader;for(d=0;d<h;d++)j[d]=f.SLONG(l+4*d);break;case 10:l=f.LONG(l)+g.tiffHeader;for(d=0;d<h;d++)j[d]=f.SLONG(l+4*d)/f.SLONG(l+4*d+4);break;default:continue}h=1==h?j[0]:j;
n[k]=b.hasOwnProperty(k)&&"object"!=typeof h?b[k][h]:h}return n}var f,k,g={},b;f=new C;k={tiff:{274:"Orientation",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer"},exif:{36864:"ExifVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",36867:"DateTimeOriginal",33434:"ExposureTime",33437:"FNumber",34855:"ISOSpeedRatings",37377:"ShutterSpeedValue",37378:"ApertureValue",37383:"MeteringMode",37384:"LightSource",37385:"Flash",41986:"ExposureMode",41987:"WhiteBalance",41990:"SceneCaptureType",
41988:"DigitalZoomRatio",41992:"Contrast",41993:"Saturation",41994:"Sharpness"},gps:{"0":"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude"}};b={ColorSpace:{1:"sRGB","0":"Uncalibrated"},MeteringMode:{"0":"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{1:"Daylight",2:"Fliorescent",3:"Tungsten",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",
13:"Day white fluorescent (N 4600 -5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{"0":"Flash did not fire.",1:"Flash fired.",5:"Strobe return light not detected.",7:"Strobe return light detected.",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",
16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",
79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},ExposureMode:{"0":"Auto exposure",1:"Manual exposure",2:"Auto bracket"},WhiteBalance:{"0":"Auto white balance",1:"Manual white balance"},SceneCaptureType:{"0":"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},
Contrast:{"0":"Normal",1:"Soft",2:"Hard"},Saturation:{"0":"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{"0":"Normal",1:"Soft",2:"Hard"},GPSLatitudeRef:{N:"North latitude",S:"South latitude"},GPSLongitudeRef:{E:"East longitude",W:"West longitude"}};return{init:function(a){g={tiffHeader:10};if(a===p||!a.length)return!1;f.init(a);return 65505===f.SHORT(0)&&"EXIF\x00"===f.STRING(4,5).toUpperCase()?(a=p,a=g.tiffHeader,f.II(18761==f.SHORT(a)),42!==f.SHORT(a+=2)?a=!1:(g.IFD0=g.tiffHeader+f.LONG(a+
2),a=e(g.IFD0,k.tiff),g.exifIFD="ExifIFDPointer"in a?g.tiffHeader+a.ExifIFDPointer:p,g.gpsIFD="GPSInfoIFDPointer"in a?g.tiffHeader+a.GPSInfoIFDPointer:p,a=!0),a):!1},EXIF:function(){var a;a=e(g.exifIFD,k.exif);a.ExifVersion&&(a.ExifVersion=String.fromCharCode(a.ExifVersion[0],a.ExifVersion[1],a.ExifVersion[2],a.ExifVersion[3]));return a},GPS:function(){var a;a=e(g.gpsIFD,k.gps);a.GPSVersionID&&(a.GPSVersionID=a.GPSVersionID.join("."));return a},setExif:function(a,c){if("PixelXDimension"!==a&&"PixelYDimension"!==
a)return!1;var b;b=a;var e,d,h,j=0;if("string"===typeof b)for(hex in e=k.exif,e)if(e[hex]===b){b=hex;break}e=g.exifIFD;d=f.SHORT(e);for(i=0;i<d;i++)if(h=e+12*i+2,f.SHORT(h)==b){j=h+8;break}j?(f.LONG(j,c),b=!0):b=!1;return b},getBinary:function(){return f.SEGMENT()}}}var y={},F;e.runtimes.Html5=e.addRuntime("html5",{getFeatures:function(){var h,f,k,g,b,a;f=k=b=a=!1;s.XMLHttpRequest&&(h=new XMLHttpRequest,k=!!h.upload,f=!(!h.sendAsBinary&&!h.upload));f&&(g=!!(h.sendAsBinary||s.Uint8Array&&s.ArrayBuffer),
b=!(!File||!File.prototype.getAsDataURL&&!s.FileReader||!g),a=!(!File||!File.prototype.mozSlice&&!File.prototype.webkitSlice&&!File.prototype.slice));F=e.ua.safari&&e.ua.windows&&navigator.userAgent&&0<navigator.userAgent.indexOf("Version/4");h=f;f=j.createElement("div");return{html5:h,dragdrop:"draggable"in f||"ondragstart"in f&&"ondrop"in f,jpgresize:b,pngresize:b,multipart:b||!!s.FileReader||!!s.FormData,canSendBinary:g,cantSendBlobInFormData:!(!e.ua.gecko||!s.FormData||!s.FileReader||FileReader.prototype.readAsArrayBuffer),
progress:k,chunks:a,multi_selection:!(e.ua.safari&&e.ua.windows),triggerDialog:e.ua.gecko&&s.FormData||e.ua.webkit||e.ua.windows}},init:function(h,f){function k(a){var c,b,g=[],d,f={};for(b=0;b<a.length;b++)c=a[b],f[c.name]||(f[c.name]=!0,d=e.guid(),y[d]=c,d=new e.File(d,c.fileName||c.name,c.fileSize||c.size),d.nativeFile=c,g.push(d));g.length&&h.trigger("FilesAdded",g)}var g,b;g=this.getFeatures();g.html5?(h.upload=function(a){k(a)},h.bind("Init",function(a){var c,b,g=[],d,f,t=a.settings.filters,
l,s;d=j.body;var n;c=j.createElement("div");c.id=a.id+"_html5_container";e.extend(c.style,{position:"absolute",background:h.settings.shim_bgcolor||"transparent",width:"100px",height:"100px",overflow:"hidden",zIndex:99999,opacity:h.settings.shim_bgcolor?"":0});c.className="plupload html5";h.settings.container&&(d=j.getElementById(h.settings.container),"static"===e.getStyle(d,"position")&&(d.style.position="relative"));d.appendChild(c);d=0;a:for(;d<t.length;d++){l=t[d].extensions.split(/,/);for(f=0;f<
l.length;f++){if("*"===l[f]){g=[];break a}(s=e.mimeTypes[l[f]])&&g.push(s)}}c.innerHTML='<input id="'+h.id+'_html5"  style="font-size:999px" type="file" accept="'+g.join(",")+'" '+(h.settings.multi_selection&&h.features.multi_selection?'multiple="multiple"':"")+" />";c.scrollTop=100;n=j.getElementById(h.id+"_html5");h.settings.inputFileClazz&&(n.className+=" "+h.settings.inputFileClazz);a.features.triggerDialog?e.extend(n.style,{position:"absolute",width:"100%",height:"100%"}):e.extend(n.style,{cssFloat:"right",
styleFloat:"right"});var p=function(){k(this.files);if(navigator.appVersion.indexOf("MSIE10")===-1){n=this.cloneNode(true);n.onchange=p;this.parentNode.replaceChild(n,this)}else this.value=""};n.onchange=p;if(b="string"===typeof a.settings.browse_button?j.getElementById(a.settings.browse_button):a.settings.browse_button){var o=a.settings.browse_button_hover,B=a.settings.browse_button_active;c=a.features.triggerDialog?b:c;o&&(e.addEvent(c,"mouseover",function(){e.addClass(b,o)},a.id),e.addEvent(c,
"mouseout",function(){e.removeClass(b,o)},a.id));B&&(e.addEvent(c,"mousedown",function(){e.addClass(b,B)},a.id),e.addEvent(j.body,"mouseup",function(){e.removeClass(b,B)},a.id));a.features.triggerDialog&&e.addEvent(b,"click",function(c){j.getElementById(a.id+"_html5").click();c.preventDefault()},a.id)}}),h.bind("PostInit",function(){var a=e.getElement(h.settings.drop_element),c,b=!1;a&&(F?(e.addEvent(a,"dragenter",function(){var c,d;c=j.getElementById(h.id+"_drop");c||(c=j.createElement("input"),
c.setAttribute("type","file"),c.setAttribute("id",h.id+"_drop"),c.setAttribute("multiple","multiple"),e.addEvent(c,"change",function(){k(this.files);e.removeEvent(c,"change",h.id);c.parentNode.removeChild(c)},h.id),a.appendChild(c),b=!0);e.getPos(a,j.getElementById(h.settings.container));d=e.getSize(a);"static"===e.getStyle(a,"position")&&e.extend(a.style,{position:"relative"});e.extend(c.style,{position:"absolute",display:"block",top:0,left:0,width:d.w+"px",height:d.h+"px",opacity:0})},h.id),e.addEvent(a,
"dragleave",function(){b||(c&&c.parentElement.removeChild(c),c=null);b=!1})):(e.addEvent(a,"dragover",function(a){a.preventDefault()},h.id),e.addEvent(a,"drop",function(a){if(!$(".disable-attachment-uploader").length){var b=a.dataTransfer;b&&b.files&&k(b.files)}c&&c.parentElement.removeChild(c);c=null;a.preventDefault();h.settings.stop_propagation&&(a.cancelBubble?a.cancelBubble=!0:a.stopPropagation())},h.id)))}),h.bind("Refresh",function(a){var c,b,f;if(c=j.getElementById(h.settings.browse_button))b=
e.getPos(c,j.getElementById(a.settings.container)),f=e.getSize(c),a=j.getElementById(h.id+"_html5_container"),e.extend(a.style,{top:b.y+"px",left:b.x+"px",width:f.w+"px",height:f.h+"px"}),h.features.triggerDialog&&("static"===e.getStyle(c,"position")&&e.extend(c.style,{position:"relative"}),b=parseInt(e.getStyle(c,"z-index"),10),isNaN(b)&&(b=0),e.extend(c.style,{zIndex:b}),e.extend(a.style,{zIndex:b-1}))}),h.bind("CancelUpload",function(){b&&b.abort&&b.abort()}),h.bind("UploadFile",function(a,c){function f(d){function k(){function f(d){var h=
0,m="----pluploadboundary"+e.guid(),n,r="";b=new XMLHttpRequest;b.upload&&(b.upload.onprogress=function(b){c.loaded=Math.min(c.size,q+b.loaded-h);a.trigger("UploadProgress",c)});b.onreadystatechange=function(){var f,g;if(b.readyState==4){try{f=b.status}catch(h){f=0}if(f>=400)a.trigger("Error",{code:e.HTTP_ERROR,message:e.translate("HTTP Error."),file:c,status:f,response:b.responseText||""});else{if(p){g={chunk:j,chunks:p,response:b.responseText,status:f};a.trigger("ChunkUploaded",c,g);q=q+z;if(g.cancelled){c.status=
e.FAILED;return}c.loaded=Math.min(c.size,(j+1)*u)}else c.loaded=c.size;a.trigger("UploadProgress",c);d=o=n=r=null;if(!p||++j>=p){c.status=e.DONE;a.trigger("FileUploaded",c,{response:b.responseText,status:f})}else k()}}};if(a.settings.multipart&&g.multipart){x.name=c.target_name||c.name;b.open("post",D,!0);e.each(a.settings.headers,function(a,c){b.setRequestHeader(c,a)});if("string"!==typeof d&&s.FormData){n=new FormData;e.each(e.extend(x,a.settings.multipart_params),function(a,b){n.append(b,a)});
n.append(a.settings.file_data_name,d);b.send(n);return}if("string"===typeof d){b.setRequestHeader("Content-Type","multipart/form-data; boundary="+m);e.each(e.extend(x,a.settings.multipart_params),function(a,b){r=r+("--"+m+'\r\nContent-Disposition: form-data; name="'+b+'"\r\n\r\n');r=r+(unescape(encodeURIComponent(a))+"\r\n")});y=e.mimeTypes[c.name.replace(/^.+\.([^.]+)/,"$1").toLowerCase()]||"application/octet-stream";r+="--"+m+'\r\nContent-Disposition: form-data; name="'+a.settings.file_data_name+
'"; filename="'+unescape(encodeURIComponent(c.name))+'"\r\nContent-Type: '+y+"\r\n\r\n"+d+"\r\n--"+m+"--\r\n";h=r.length-d.length;d=r;if(b.sendAsBinary)b.sendAsBinary(d);else if(g.canSendBinary){for(var w=new Uint8Array(d.length),v=0;v<d.length;v++)w[v]=d.charCodeAt(v)&255;b.send(w.buffer)}return}}D=e.buildUrl(a.settings.url,e.extend(x,a.settings.multipart_params));b.open("post",D,!0);b.setRequestHeader("Content-Type","application/octet-stream");d.encoding&&b.setRequestHeader("Content-Encoding",d.encoding);
e.each(a.settings.headers,function(a,c){b.setRequestHeader(c,a)});b.send(d.getData?d.getData():d)}var o,p,x,u,z,y,D=a.settings.url;if(!(c.status==e.DONE||c.status==e.FAILED||a.state==e.STOPPED)){x={name:c.target_name||c.name};if(h.chunk_size&&c.size>h.chunk_size&&(g.chunks||"string"==typeof d)){u=h.chunk_size;p=Math.ceil(c.size/u);z=Math.min(u,c.size-j*u);if("string"==typeof d)o=d.substring(j*u,j*u+z);else{var v=d,A=j*u,E=j*u+z,w;if(File.prototype.slice)try{v.slice(),o=v.slice(A,E)}catch(C){o=v.slice(A,
E-A)}else o=(w=File.prototype.webkitSlice||File.prototype.mozSlice)?w.call(v,A,E):null}x.chunk=j;x.chunks=p}else z=c.size,o=d;"string"!==typeof o&&n&&g.cantSendBlobInFormData&&g.chunks&&a.settings.chunk_size?(n.onload=function(){f(n.result)},n.readAsBinaryString(o)):f(o)}}var j=0,q=0,n="FileReader"in s?new FileReader:null;k()}var h=a.settings,d;d=y[c.id];g.jpgresize&&a.settings.resize&&/\.(png|jpg|jpeg)$/i.test(c.name)?G.call(a,c,a.settings.resize,/\.png$/i.test(c.name)?"image/png":"image/jpeg",function(a){a.success?
(c.size=a.data.length,f(a.data)):f(d)}):f(d)}),h.bind("Destroy",function(a){var b,f,g=j.body,d={inputContainer:a.id+"_html5_container",inputFile:a.id+"_html5",browseButton:a.settings.browse_button,dropElm:a.settings.drop_element};for(b in d)(f=j.getElementById(d[b]))&&e.removeAllEvents(f,a.id);e.removeAllEvents(j.body,a.id);a.settings.container&&(g=j.getElementById(a.settings.container));g.removeChild(j.getElementById(d.inputContainer))}),f({success:!0})):f({success:!1})}})})(window,document,plupload);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.drag-and-drop:plupload', location = 'js/plupload.html4.js' */
(function(s,k,b){function h(b){return k.getElementById(b)}b.runtimes.Html4=b.addRuntime("html4",{getFeatures:function(){return{multipart:!0,triggerDialog:b.ua.gecko&&s.FormData||b.ua.webkit||b.ua.windows}},init:function(m,t){m.bind("Init",function(c){function v(){var e,a,d,n;j=b.guid();w.push(j);e=k.createElement("form");e.setAttribute("id","form_"+j);e.setAttribute("method","post");e.setAttribute("enctype","multipart/form-data");e.setAttribute("encoding","multipart/form-data");e.setAttribute("target",
c.id+"_iframe");e.style.position="absolute";a=k.createElement("input");a.setAttribute("id","input_"+j);a.setAttribute("type","file");a.setAttribute("accept",l);a.setAttribute("size",1);c.settings.browse_button&&(n="string"===typeof c.settings.browse_button?h(c.settings.browse_button):c.settings.browse_button);c.features.triggerDialog&&n&&b.addEvent(n,"click",function(b){a.disabled||a.click();b.preventDefault()},c.id);b.extend(a.style,{width:"100%",height:"100%",opacity:0,fontSize:"99px",cursor:"pointer"});
b.extend(e.style,{overflow:"hidden"});if(d=c.settings.shim_bgcolor)e.style.background=d;t&&b.extend(a.style,{filter:"alpha(opacity=0)"});b.addEvent(a,"change",function(d){var f=d.target,d=[];f.value&&(h("form_"+j).style.top="-1048575px",f=f.value.replace(/\\/g,"/"),f=f.substring(f.length,f.lastIndexOf("/")+1),d.push(new b.File(j,f)),c.features.triggerDialog?n&&b.removeEvent(n,"click",c.id):b.removeAllEvents(e,c.id),b.removeEvent(a,"change",c.id),v(),d.length&&m.trigger("FilesAdded",d))},c.id);e.appendChild(a);
o.appendChild(e);c.refresh()}var o=k.body,i,g,j,w=[],t=/MSIE/.test(navigator.userAgent),l=[],x=c.settings.filters,q,r,u,p;q=0;a:for(;q<x.length;q++){r=x[q].extensions.split(/,/);for(p=0;p<r.length;p++){if("*"===r[p]){l=[];break a}u=b.mimeTypes[r[p]];-1===l.indexOf(u)&&l.push(u)}}l=l.join(",");c.settings.container&&(o="string"===typeof c.settings.container?h(c.settings.container):c.settings.container,"static"===b.getStyle(o,"position")&&(o.style.position="relative"));c.bind("UploadFile",function(e,
a){var d,c;if(!(a.status==b.DONE||a.status==b.FAILED||e.state==b.STOPPED)){d=h("form_"+a.id);c=h("input_"+a.id);c.setAttribute("name",e.settings.file_data_name);d.setAttribute("action",e.settings.url);b.each(b.extend({name:a.target_name||a.name},e.settings.multipart_params),function(a,e){var c=k.createElement("input");b.extend(c,{type:"hidden",name:e,value:a});d.insertBefore(c,d.firstChild)});g=a;h("form_"+j).style.top="-1048575px";d.submit()}});c.bind("FileUploaded",function(b){b.refresh()});c.bind("StateChanged",
function(e){if(e.state==b.STARTED){var a=k.createElement("div");a.innerHTML='<iframe id="'+c.id+'_iframe" name="'+c.id+'_iframe" src="javascript:&quot;&quot;" style="display:none"></iframe>';i=a.firstChild;o.appendChild(i);b.addEvent(i,"load",function(d){var d=d.target,a;if(g){try{a=d.contentWindow.document||d.contentDocument||s.frames[d.id].document}catch(e){c.trigger("Error",{code:b.SECURITY_ERROR,message:b.translate("Security error."),file:g});return}if(a=a.documentElement.innerText||a.documentElement.textContent){g.status=
b.DONE;g.loaded=1025;g.percent=100;c.trigger("UploadProgress",g);c.trigger("FileUploaded",g,{response:a})}}},c.id)}else e.state==b.STOPPED&&s.setTimeout(function(){b.removeEvent(i,"load",e.id);i.parentNode&&i.parentNode.removeChild(i)},0);b.each(e.files,function(a){if(a.status===b.DONE||a.status===b.FAILED)(a=h("form_"+a.id))&&a.parentNode.removeChild(a)})});c.bind("Refresh",function(e){var a,d,c,g,f,i;if(a=h(e.settings.browse_button)){f=b.getPos(a,h(e.settings.container));i=b.getSize(a);d=h("form_"+
j);h("input_"+j);b.extend(d.style,{top:f.y+"px",left:f.x+"px",width:i.w+"px",height:i.h+"px"});if(e.features.triggerDialog){b.getStyle(a,"position")==="static"&&b.extend(a.style,{position:"relative"});f=parseInt(a.style.zIndex,10);isNaN(f)&&(f=0);b.extend(a.style,{zIndex:f});b.extend(d.style,{zIndex:f-1})}c=e.settings.browse_button_hover;g=e.settings.browse_button_active;d=e.features.triggerDialog?a:d;if(c){b.addEvent(d,"mouseover",function(){b.addClass(a,c)},e.id);b.addEvent(d,"mouseout",function(){b.removeClass(a,
c)},e.id)}if(g){b.addEvent(d,"mousedown",function(){b.addClass(a,g)},e.id);b.addEvent(k.body,"mouseup",function(){b.removeClass(a,g)},e.id)}}});c.bind("Error",function(b,a){if(a.file){var d=h("form_"+a.file.id);d&&d.parentNode.removeChild(d)}});m.bind("FilesRemoved",function(b,a){var d,c;for(d=0;d<a.length;d++)(c=h("form_"+a[d].id))&&c.parentNode.removeChild(c)});m.bind("DisableBrowse",function(b,a){var c=k.getElementById("input_"+j);if(c)c.disabled=a});m.bind("Destroy",function(c){var a,d,g,i={inputContainer:"form_"+
j,inputFile:"input_"+j,browseButton:c.settings.browse_button};for(a in i)(d=h(i[a]))&&b.removeAllEvents(d,c.id);b.removeAllEvents(k.body,c.id);b.each(w,function(a){(g=h("form_"+a))&&g.parentNode.removeChild(g)})});v()});t({success:!0})}})})(window,document,plupload);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-other', location = 'js-vendor/jquery/jquery-ui/jquery.ui.position.js' */
/*
 * jQuery UI Position 1.8.24
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Position
 */
(function(G,H){G.ui=G.ui||{};var D=/left|center|right/,E=/top|center|bottom/,A="center",F={},B=G.fn.position,C=G.fn.offset;G.fn.position=function(J){if(!J||!J.of){return B.apply(this,arguments)}J=G.extend({},J);var N=G(J.of),M=N[0],P=(J.collision||"flip").split(" "),O=J.offset?J.offset.split(" "):[0,0],L,I,K;if(M.nodeType===9){L=N.width();I=N.height();K={top:0,left:0}}else{if(M.setTimeout){L=N.width();I=N.height();K={top:N.scrollTop(),left:N.scrollLeft()}}else{if(M.preventDefault){J.at="left top";L=I=0;K={top:J.of.pageY,left:J.of.pageX}}else{L=N.outerWidth();I=N.outerHeight();K=N.offset()}}}G.each(["my","at"],function(){var Q=(J[this]||"").split(" ");if(Q.length===1){Q=D.test(Q[0])?Q.concat([A]):E.test(Q[0])?[A].concat(Q):[A,A]}Q[0]=D.test(Q[0])?Q[0]:A;Q[1]=E.test(Q[1])?Q[1]:A;J[this]=Q});if(P.length===1){P[1]=P[0]}O[0]=parseInt(O[0],10)||0;if(O.length===1){O[1]=O[0]}O[1]=parseInt(O[1],10)||0;if(J.at[0]==="right"){K.left+=L}else{if(J.at[0]===A){K.left+=L/2}}if(J.at[1]==="bottom"){K.top+=I}else{if(J.at[1]===A){K.top+=I/2}}K.left+=O[0];K.top+=O[1];return this.each(function(){var T=G(this),V=T.outerWidth(),S=T.outerHeight(),U=parseInt(G.curCSS(this,"marginLeft",true))||0,R=parseInt(G.curCSS(this,"marginTop",true))||0,X=V+U+(parseInt(G.curCSS(this,"marginRight",true))||0),Y=S+R+(parseInt(G.curCSS(this,"marginBottom",true))||0),W=G.extend({},K),Q;if(J.my[0]==="right"){W.left-=V}else{if(J.my[0]===A){W.left-=V/2}}if(J.my[1]==="bottom"){W.top-=S}else{if(J.my[1]===A){W.top-=S/2}}if(!F.fractions){W.left=Math.round(W.left);W.top=Math.round(W.top)}Q={left:W.left-U,top:W.top-R};G.each(["left","top"],function(a,Z){if(G.ui.position[P[a]]){G.ui.position[P[a]][Z](W,{targetWidth:L,targetHeight:I,elemWidth:V,elemHeight:S,collisionPosition:Q,collisionWidth:X,collisionHeight:Y,offset:O,my:J.my,at:J.at})}});if(G.fn.bgiframe){T.bgiframe()}T.offset(G.extend(W,{using:J.using}))})};G.ui.position={fit:{left:function(I,J){var L=G(window),K=J.collisionPosition.left+J.collisionWidth-L.width()-L.scrollLeft();I.left=K>0?I.left-K:Math.max(I.left-J.collisionPosition.left,I.left)},top:function(I,J){var L=G(window),K=J.collisionPosition.top+J.collisionHeight-L.height()-L.scrollTop();I.top=K>0?I.top-K:Math.max(I.top-J.collisionPosition.top,I.top)}},flip:{left:function(J,L){if(L.at[0]===A){return }var N=G(window),M=L.collisionPosition.left+L.collisionWidth-N.width()-N.scrollLeft(),I=L.my[0]==="left"?-L.elemWidth:L.my[0]==="right"?L.elemWidth:0,K=L.at[0]==="left"?L.targetWidth:-L.targetWidth,O=-2*L.offset[0];J.left+=L.collisionPosition.left<0?I+K+O:M>0?I+K+O:0},top:function(J,L){if(L.at[1]===A){return }var N=G(window),M=L.collisionPosition.top+L.collisionHeight-N.height()-N.scrollTop(),I=L.my[1]==="top"?-L.elemHeight:L.my[1]==="bottom"?L.elemHeight:0,K=L.at[1]==="top"?L.targetHeight:-L.targetHeight,O=-2*L.offset[1];J.top+=L.collisionPosition.top<0?I+K+O:M>0?I+K+O:0}}};if(!G.offset.setOffset){G.offset.setOffset=function(M,J){if(/static/.test(G.curCSS(M,"position"))){M.style.position="relative"}var L=G(M),O=L.offset(),I=parseInt(G.curCSS(M,"top",true),10)||0,N=parseInt(G.curCSS(M,"left",true),10)||0,K={top:(J.top-O.top)+I,left:(J.left-O.left)+N};if("using" in J){J.using.call(M,K)}else{L.css(K)}};G.fn.offset=function(I){var J=this[0];if(!J||!J.ownerDocument){return null}if(I){if(G.isFunction(I)){return this.each(function(K){G(this).offset(I.call(this,K,G(this).offset()))})}return this.each(function(){G.offset.setOffset(this,I)})}return C.call(this)}}if(!G.curCSS){G.curCSS=G.css}(function(){var I=document.getElementsByTagName("body")[0],P=document.createElement("div"),M,O,J,N,L;M=document.createElement(I?"div":"body");J={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};if(I){G.extend(J,{position:"absolute",left:"-1000px",top:"-1000px"})}for(var K in J){M.style[K]=J[K]}M.appendChild(P);O=I||document.documentElement;O.insertBefore(M,O.firstChild);P.style.cssText="position: absolute; left: 10.7432222px; top: 10.432325px; height: 30px; width: 201px;";N=G(P).offset(function(Q,R){return R}).offset();M.innerHTML="";O.removeChild(M);L=N.top+N.left+(I?2000:0);F.fractions=L>21&&L<22})()}(jQuery));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-other', location = 'js-vendor/jquery/jquery-ui/jquery.ui.droppable.js' */
/*
 * jQuery UI Droppable 1.8.24
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Droppables
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 *	jquery.ui.mouse.js
 *	jquery.ui.draggable.js
 */
(function(A,B){A.widget("ui.droppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:false,addClasses:true,greedy:false,hoverClass:false,scope:"default",tolerance:"intersect"},_create:function(){var D=this.options,C=D.accept;this.isover=0;this.isout=1;this.accept=A.isFunction(C)?C:function(E){return E.is(C)};this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight};A.ui.ddmanager.droppables[D.scope]=A.ui.ddmanager.droppables[D.scope]||[];A.ui.ddmanager.droppables[D.scope].push(this);(D.addClasses&&this.element.addClass("ui-droppable"))},destroy:function(){var C=A.ui.ddmanager.droppables[this.options.scope];for(var D=0;D<C.length;D++){if(C[D]==this){C.splice(D,1)}}this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable");return this},_setOption:function(C,D){if(C=="accept"){this.accept=A.isFunction(D)?D:function(E){return E.is(D)}}A.Widget.prototype._setOption.apply(this,arguments)},_activate:function(D){var C=A.ui.ddmanager.current;if(this.options.activeClass){this.element.addClass(this.options.activeClass)}(C&&this._trigger("activate",D,this.ui(C)))},_deactivate:function(D){var C=A.ui.ddmanager.current;if(this.options.activeClass){this.element.removeClass(this.options.activeClass)}(C&&this._trigger("deactivate",D,this.ui(C)))},_over:function(D){var C=A.ui.ddmanager.current;if(!C||(C.currentItem||C.element)[0]==this.element[0]){return }if(this.accept.call(this.element[0],(C.currentItem||C.element))){if(this.options.hoverClass){this.element.addClass(this.options.hoverClass)}this._trigger("over",D,this.ui(C))}},_out:function(D){var C=A.ui.ddmanager.current;if(!C||(C.currentItem||C.element)[0]==this.element[0]){return }if(this.accept.call(this.element[0],(C.currentItem||C.element))){if(this.options.hoverClass){this.element.removeClass(this.options.hoverClass)}this._trigger("out",D,this.ui(C))}},_drop:function(D,E){var C=E||A.ui.ddmanager.current;if(!C||(C.currentItem||C.element)[0]==this.element[0]){return false}var F=false;this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var G=A.data(this,"droppable");if(G.options.greedy&&!G.options.disabled&&G.options.scope==C.options.scope&&G.accept.call(G.element[0],(C.currentItem||C.element))&&A.ui.intersect(C,A.extend(G,{offset:G.element.offset()}),G.options.tolerance)){F=true;return false}});if(F){return false}if(this.accept.call(this.element[0],(C.currentItem||C.element))){if(this.options.activeClass){this.element.removeClass(this.options.activeClass)}if(this.options.hoverClass){this.element.removeClass(this.options.hoverClass)}this._trigger("drop",D,this.ui(C));return this.element}return false},ui:function(C){return{draggable:(C.currentItem||C.element),helper:C.helper,position:C.position,offset:C.positionAbs}}});A.extend(A.ui.droppable,{version:"1.8.24"});A.ui.intersect=function(P,J,N){if(!J.offset){return false}var E=(P.positionAbs||P.position.absolute).left,D=E+P.helperProportions.width,M=(P.positionAbs||P.position.absolute).top,L=M+P.helperProportions.height;var G=J.offset.left,C=G+J.proportions.width,O=J.offset.top,K=O+J.proportions.height;switch(N){case"fit":return(G<=E&&D<=C&&O<=M&&L<=K);break;case"intersect":return(G<E+(P.helperProportions.width/2)&&D-(P.helperProportions.width/2)<C&&O<M+(P.helperProportions.height/2)&&L-(P.helperProportions.height/2)<K);break;case"pointer":var H=((P.positionAbs||P.position.absolute).left+(P.clickOffset||P.offset.click).left),I=((P.positionAbs||P.position.absolute).top+(P.clickOffset||P.offset.click).top),F=A.ui.isOver(I,H,O,G,J.proportions.height,J.proportions.width);return F;break;case"touch":return((M>=O&&M<=K)||(L>=O&&L<=K)||(M<O&&L>K))&&((E>=G&&E<=C)||(D>=G&&D<=C)||(E<G&&D>C));break;default:return false;break}};A.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(F,H){var C=A.ui.ddmanager.droppables[F.options.scope]||[];var G=H?H.type:null;var I=(F.currentItem||F.element).find(":data(droppable)").andSelf();droppablesLoop:for(var E=0;E<C.length;E++){if(C[E].options.disabled||(F&&!C[E].accept.call(C[E].element[0],(F.currentItem||F.element)))){continue}for(var D=0;D<I.length;D++){if(I[D]==C[E].element[0]){C[E].proportions.height=0;continue droppablesLoop}}C[E].visible=C[E].element.css("display")!="none";if(!C[E].visible){continue}if(G=="mousedown"){C[E]._activate.call(C[E],H)}C[E].offset=C[E].element.offset();C[E].proportions={width:C[E].element[0].offsetWidth,height:C[E].element[0].offsetHeight}}},drop:function(C,D){var E=false;A.each(A.ui.ddmanager.droppables[C.options.scope]||[],function(){if(!this.options){return }if(!this.options.disabled&&this.visible&&A.ui.intersect(C,this,this.options.tolerance)){E=this._drop.call(this,D)||E}if(!this.options.disabled&&this.visible&&this.accept.call(this.element[0],(C.currentItem||C.element))){this.isout=1;this.isover=0;this._deactivate.call(this,D)}});return E},dragStart:function(C,D){C.element.parents(":not(body,html)").bind("scroll.droppable",function(){if(!C.options.refreshPositions){A.ui.ddmanager.prepareOffsets(C,D)}})},drag:function(C,D){if(C.options.refreshPositions){A.ui.ddmanager.prepareOffsets(C,D)}A.each(A.ui.ddmanager.droppables[C.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible){return }var G=A.ui.intersect(C,this,this.options.tolerance);var I=!G&&this.isover==1?"isout":(G&&this.isover==0?"isover":null);if(!I){return }var H;if(this.options.greedy){var F=this.options.scope;var E=this.element.parents(":data(droppable)").filter(function(){return A.data(this,"droppable").options.scope===F});if(E.length){H=A.data(E[0],"droppable");H.greedyChild=(I=="isover"?1:0)}}if(H&&I=="isover"){H.isover=0;H.isout=1;H._out.call(H,D)}this[I]=1;this[I=="isout"?"isover":"isout"]=0;this[I=="isover"?"_over":"_out"].call(this,D);if(H&&I=="isout"){H.isout=0;H.isover=1;H._over.call(H,D)}})},dragStop:function(C,D){C.element.parents(":not(body,html)").unbind("scroll.droppable");if(!C.options.refreshPositions){A.ui.ddmanager.prepareOffsets(C,D)}}}})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-other', location = 'js-vendor/jquery/jquery-ui/jquery.ui.resizable.js' */
/*
 * jQuery UI Resizable 1.8.24
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Resizables
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.widget.js
 */
(function(C,D){C.widget("ui.resizable",C.ui.mouse,{widgetEventPrefix:"resize",options:{alsoResize:false,animate:false,animateDuration:"slow",animateEasing:"swing",aspectRatio:false,autoHide:false,containment:false,ghost:false,grid:false,handles:"e,s,se",helper:false,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1000},_create:function(){var F=this,J=this.options;this.element.addClass("ui-resizable");C.extend(this,{_aspectRatio:!!(J.aspectRatio),aspectRatio:J.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:J.helper||J.ghost||J.animate?J.helper||"ui-resizable-helper":null});if(this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)){this.element.wrap(C('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")}));this.element=this.element.parent().data("resizable",this.element.data("resizable"));this.elementIsWrapper=true;this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")});this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0});this.originalResizeStyle=this.originalElement.css("resize");this.originalElement.css("resize","none");this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"}));this.originalElement.css({margin:this.originalElement.css("margin")});this._proportionallyResize()}this.handles=J.handles||(!C(".ui-resizable-handle",this.element).length?"e,s,se":{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"});if(this.handles.constructor==String){if(this.handles=="all"){this.handles="n,e,s,w,se,sw,ne,nw"}var K=this.handles.split(",");this.handles={};for(var G=0;G<K.length;G++){var I=C.trim(K[G]),E="ui-resizable-"+I;var H=C('<div class="ui-resizable-handle '+E+'"></div>');H.css({zIndex:J.zIndex});if("se"==I){H.addClass("ui-icon ui-icon-gripsmall-diagonal-se")}this.handles[I]=".ui-resizable-"+I;this.element.append(H)}}this._renderAxis=function(P){P=P||this.element;for(var M in this.handles){if(this.handles[M].constructor==String){this.handles[M]=C(this.handles[M],this.element).show()}if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var N=C(this.handles[M],this.element),O=0;O=/sw|ne|nw|se|n|s/.test(M)?N.outerHeight():N.outerWidth();var L=["padding",/ne|nw|n/.test(M)?"Top":/se|sw|s/.test(M)?"Bottom":/^e$/.test(M)?"Right":"Left"].join("");P.css(L,O);this._proportionallyResize()}if(!C(this.handles[M]).length){continue}}};this._renderAxis(this.element);this._handles=C(".ui-resizable-handle",this.element).disableSelection();this._handles.mouseover(function(){if(!F.resizing){if(this.className){var L=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)}F.axis=L&&L[1]?L[1]:"se"}});if(J.autoHide){this._handles.hide();C(this.element).addClass("ui-resizable-autohide").hover(function(){if(J.disabled){return }C(this).removeClass("ui-resizable-autohide");F._handles.show()},function(){if(J.disabled){return }if(!F.resizing){C(this).addClass("ui-resizable-autohide");F._handles.hide()}})}this._mouseInit()},destroy:function(){this._mouseDestroy();var E=function(G){C(G).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){E(this.element);var F=this.element;F.after(this.originalElement.css({position:F.css("position"),width:F.outerWidth(),height:F.outerHeight(),top:F.css("top"),left:F.css("left")})).remove()}this.originalElement.css("resize",this.originalResizeStyle);E(this.originalElement);return this},_mouseCapture:function(F){var G=false;for(var E in this.handles){if(C(this.handles[E])[0]==F.target){G=true}}return !this.options.disabled&&G},_mouseStart:function(G){var J=this.options,F=this.element.position(),E=this.element;this.resizing=true;this.documentScroll={top:C(document).scrollTop(),left:C(document).scrollLeft()};if(E.is(".ui-draggable")||(/absolute/).test(E.css("position"))){E.css({position:"absolute",top:F.top,left:F.left})}this._renderProxy();var K=B(this.helper.css("left")),H=B(this.helper.css("top"));if(J.containment){K+=C(J.containment).scrollLeft()||0;H+=C(J.containment).scrollTop()||0}this.offset=this.helper.offset();this.position={left:K,top:H};this.size=this._helper?{width:E.outerWidth(),height:E.outerHeight()}:{width:E.width(),height:E.height()};this.originalSize=this._helper?{width:E.outerWidth(),height:E.outerHeight()}:{width:E.width(),height:E.height()};this.originalPosition={left:K,top:H};this.sizeDiff={width:E.outerWidth()-E.width(),height:E.outerHeight()-E.height()};this.originalMousePosition={left:G.pageX,top:G.pageY};this.aspectRatio=(typeof J.aspectRatio=="number")?J.aspectRatio:((this.originalSize.width/this.originalSize.height)||1);var I=C(".ui-resizable-"+this.axis).css("cursor");C("body").css("cursor",I=="auto"?this.axis+"-resize":I);E.addClass("ui-resizable-resizing");this._propagate("start",G);return true},_mouseDrag:function(E){var H=this.helper,G=this.options,M={},P=this,J=this.originalMousePosition,N=this.axis;var Q=(E.pageX-J.left)||0,O=(E.pageY-J.top)||0;var I=this._change[N];if(!I){return false}var L=I.apply(this,[E,Q,O]),K=C.browser.msie&&C.browser.version<7,F=this.sizeDiff;this._updateVirtualBoundaries(E.shiftKey);if(this._aspectRatio||E.shiftKey){L=this._updateRatio(L,E)}L=this._respectSize(L,E);this._propagate("resize",E);H.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"});if(!this._helper&&this._proportionallyResizeElements.length){this._proportionallyResize()}this._updateCache(L);this._trigger("resize",E,this.ui());return false},_mouseStop:function(H){this.resizing=false;var I=this.options,M=this;if(this._helper){var G=this._proportionallyResizeElements,E=G.length&&(/textarea/i).test(G[0].nodeName),F=E&&C.ui.hasScroll(G[0],"left")?0:M.sizeDiff.height,K=E?0:M.sizeDiff.width;var N={width:(M.helper.width()-K),height:(M.helper.height()-F)},J=(parseInt(M.element.css("left"),10)+(M.position.left-M.originalPosition.left))||null,L=(parseInt(M.element.css("top"),10)+(M.position.top-M.originalPosition.top))||null;if(!I.animate){this.element.css(C.extend(N,{top:L,left:J}))}M.helper.height(M.size.height);M.helper.width(M.size.width);if(this._helper&&!I.animate){this._proportionallyResize()}}C("body").css("cursor","auto");this.element.removeClass("ui-resizable-resizing");this._propagate("stop",H);if(this._helper){this.helper.remove()}return false},_updateVirtualBoundaries:function(G){var J=this.options,I,H,F,K,E;E={minWidth:A(J.minWidth)?J.minWidth:0,maxWidth:A(J.maxWidth)?J.maxWidth:Infinity,minHeight:A(J.minHeight)?J.minHeight:0,maxHeight:A(J.maxHeight)?J.maxHeight:Infinity};if(this._aspectRatio||G){I=E.minHeight*this.aspectRatio;F=E.minWidth/this.aspectRatio;H=E.maxHeight*this.aspectRatio;K=E.maxWidth/this.aspectRatio;if(I>E.minWidth){E.minWidth=I}if(F>E.minHeight){E.minHeight=F}if(H<E.maxWidth){E.maxWidth=H}if(K<E.maxHeight){E.maxHeight=K}}this._vBoundaries=E},_updateCache:function(E){var F=this.options;this.offset=this.helper.offset();if(A(E.left)){this.position.left=E.left}if(A(E.top)){this.position.top=E.top}if(A(E.height)){this.size.height=E.height}if(A(E.width)){this.size.width=E.width}},_updateRatio:function(H,G){var I=this.options,J=this.position,F=this.size,E=this.axis;if(A(H.height)){H.width=(H.height*this.aspectRatio)}else{if(A(H.width)){H.height=(H.width/this.aspectRatio)}}if(E=="sw"){H.left=J.left+(F.width-H.width);H.top=null}if(E=="nw"){H.top=J.top+(F.height-H.height);H.left=J.left+(F.width-H.width)}return H},_respectSize:function(L,G){var J=this.helper,I=this._vBoundaries,Q=this._aspectRatio||G.shiftKey,P=this.axis,S=A(L.width)&&I.maxWidth&&(I.maxWidth<L.width),M=A(L.height)&&I.maxHeight&&(I.maxHeight<L.height),H=A(L.width)&&I.minWidth&&(I.minWidth>L.width),R=A(L.height)&&I.minHeight&&(I.minHeight>L.height);if(H){L.width=I.minWidth}if(R){L.height=I.minHeight}if(S){L.width=I.maxWidth}if(M){L.height=I.maxHeight}var F=this.originalPosition.left+this.originalSize.width,O=this.position.top+this.size.height;var K=/sw|nw|w/.test(P),E=/nw|ne|n/.test(P);if(H&&K){L.left=F-I.minWidth}if(S&&K){L.left=F-I.maxWidth}if(R&&E){L.top=O-I.minHeight}if(M&&E){L.top=O-I.maxHeight}var N=!L.width&&!L.height;if(N&&!L.left&&L.top){L.top=null}else{if(N&&!L.top&&L.left){L.left=null}}return L},_proportionallyResize:function(){var J=this.options;if(!this._proportionallyResizeElements.length){return }var G=this.helper||this.element;for(var F=0;F<this._proportionallyResizeElements.length;F++){var H=this._proportionallyResizeElements[F];if(!this.borderDif){var E=[H.css("borderTopWidth"),H.css("borderRightWidth"),H.css("borderBottomWidth"),H.css("borderLeftWidth")],I=[H.css("paddingTop"),H.css("paddingRight"),H.css("paddingBottom"),H.css("paddingLeft")];this.borderDif=C.map(E,function(K,M){var L=parseInt(K,10)||0,N=parseInt(I[M],10)||0;return L+N})}if(C.browser.msie&&!(!(C(G).is(":hidden")||C(G).parents(":hidden").length))){continue}H.css({height:(G.height()-this.borderDif[0]-this.borderDif[2])||0,width:(G.width()-this.borderDif[1]-this.borderDif[3])||0})}},_renderProxy:function(){var F=this.element,I=this.options;this.elementOffset=F.offset();if(this._helper){this.helper=this.helper||C('<div style="overflow:hidden;"></div>');var E=C.browser.msie&&C.browser.version<7,G=(E?1:0),H=(E?2:-1);this.helper.addClass(this._helper).css({width:this.element.outerWidth()+H,height:this.element.outerHeight()+H,position:"absolute",left:this.elementOffset.left-G+"px",top:this.elementOffset.top-G+"px",zIndex:++I.zIndex});this.helper.appendTo("body").disableSelection()}else{this.helper=this.element}},_change:{e:function(G,F,E){return{width:this.originalSize.width+F}},w:function(H,F,E){var J=this.options,G=this.originalSize,I=this.originalPosition;return{left:I.left+F,width:G.width-F}},n:function(H,F,E){var J=this.options,G=this.originalSize,I=this.originalPosition;return{top:I.top+E,height:G.height-E}},s:function(G,F,E){return{height:this.originalSize.height+E}},se:function(G,F,E){return C.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[G,F,E]))},sw:function(G,F,E){return C.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[G,F,E]))},ne:function(G,F,E){return C.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[G,F,E]))},nw:function(G,F,E){return C.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[G,F,E]))}},_propagate:function(F,E){C.ui.plugin.call(this,F,[E,this.ui()]);(F!="resize"&&this._trigger(F,E,this.ui()))},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});C.extend(C.ui.resizable,{version:"1.8.24"});C.ui.plugin.add("resizable","alsoResize",{start:function(F,G){var E=C(this).data("resizable"),I=E.options;var H=function(J){C(J).each(function(){var K=C(this);K.data("resizable-alsoresize",{width:parseInt(K.width(),10),height:parseInt(K.height(),10),left:parseInt(K.css("left"),10),top:parseInt(K.css("top"),10)})})};if(typeof (I.alsoResize)=="object"&&!I.alsoResize.parentNode){if(I.alsoResize.length){I.alsoResize=I.alsoResize[0];H(I.alsoResize)}else{C.each(I.alsoResize,function(J){H(J)})}}else{H(I.alsoResize)}},resize:function(G,I){var F=C(this).data("resizable"),J=F.options,H=F.originalSize,L=F.originalPosition;var K={height:(F.size.height-H.height)||0,width:(F.size.width-H.width)||0,top:(F.position.top-L.top)||0,left:(F.position.left-L.left)||0},E=function(M,N){C(M).each(function(){var Q=C(this),R=C(this).data("resizable-alsoresize"),P={},O=N&&N.length?N:Q.parents(I.originalElement[0]).length?["width","height"]:["width","height","top","left"];C.each(O,function(S,U){var T=(R[U]||0)+(K[U]||0);if(T&&T>=0){P[U]=T||null}});Q.css(P)})};if(typeof (J.alsoResize)=="object"&&!J.alsoResize.nodeType){C.each(J.alsoResize,function(M,N){E(M,N)})}else{E(J.alsoResize)}},stop:function(E,F){C(this).removeData("resizable-alsoresize")}});C.ui.plugin.add("resizable","animate",{stop:function(I,N){var O=C(this).data("resizable"),J=O.options;var H=O._proportionallyResizeElements,E=H.length&&(/textarea/i).test(H[0].nodeName),F=E&&C.ui.hasScroll(H[0],"left")?0:O.sizeDiff.height,L=E?0:O.sizeDiff.width;var G={width:(O.size.width-L),height:(O.size.height-F)},K=(parseInt(O.element.css("left"),10)+(O.position.left-O.originalPosition.left))||null,M=(parseInt(O.element.css("top"),10)+(O.position.top-O.originalPosition.top))||null;O.element.animate(C.extend(G,M&&K?{top:M,left:K}:{}),{duration:J.animateDuration,easing:J.animateEasing,step:function(){var P={width:parseInt(O.element.css("width"),10),height:parseInt(O.element.css("height"),10),top:parseInt(O.element.css("top"),10),left:parseInt(O.element.css("left"),10)};if(H&&H.length){C(H[0]).css({width:P.width,height:P.height})}O._updateCache(P);O._propagate("resize",I)}})}});C.ui.plugin.add("resizable","containment",{start:function(F,P){var R=C(this).data("resizable"),J=R.options,L=R.element;var G=J.containment,K=(G instanceof C)?G.get(0):(/parent/.test(G))?L.parent().get(0):G;if(!K){return }R.containerElement=C(K);if(/document/.test(G)||G==document){R.containerOffset={left:0,top:0};R.containerPosition={left:0,top:0};R.parentData={element:C(document),left:0,top:0,width:C(document).width(),height:C(document).height()||document.body.parentNode.scrollHeight}}else{var N=C(K),I=[];C(["Top","Right","Left","Bottom"]).each(function(T,S){I[T]=B(N.css("padding"+S))});R.containerOffset=N.offset();R.containerPosition=N.position();R.containerSize={height:(N.innerHeight()-I[3]),width:(N.innerWidth()-I[1])};var O=R.containerOffset,E=R.containerSize.height,M=R.containerSize.width,H=(C.ui.hasScroll(K,"left")?K.scrollWidth:M),Q=(C.ui.hasScroll(K)?K.scrollHeight:E);R.parentData={element:K,left:O.left,top:O.top,width:H,height:Q}}},resize:function(G,P){var S=C(this).data("resizable"),I=S.options,F=S.containerSize,O=S.containerOffset,M=S.size,N=S.position,Q=S._aspectRatio||G.shiftKey,E={top:0,left:0},H=S.containerElement;if(H[0]!=document&&(/static/).test(H.css("position"))){E=O}if(N.left<(S._helper?O.left:0)){S.size.width=S.size.width+(S._helper?(S.position.left-O.left):(S.position.left-E.left));if(Q){S.size.height=S.size.width/S.aspectRatio}S.position.left=I.helper?O.left:0}if(N.top<(S._helper?O.top:0)){S.size.height=S.size.height+(S._helper?(S.position.top-O.top):S.position.top);if(Q){S.size.width=S.size.height*S.aspectRatio}S.position.top=S._helper?O.top:0}S.offset.left=S.parentData.left+S.position.left;S.offset.top=S.parentData.top+S.position.top;var L=Math.abs((S._helper?S.offset.left-E.left:(S.offset.left-E.left))+S.sizeDiff.width),R=Math.abs((S._helper?S.offset.top-E.top:(S.offset.top-O.top))+S.sizeDiff.height);var K=S.containerElement.get(0)==S.element.parent().get(0),J=/relative|absolute/.test(S.containerElement.css("position"));if(K&&J){L-=S.parentData.left}if(L+S.size.width>=S.parentData.width){S.size.width=S.parentData.width-L;if(Q){S.size.height=S.size.width/S.aspectRatio}}if(R+S.size.height>=S.parentData.height){S.size.height=S.parentData.height-R;if(Q){S.size.width=S.size.height*S.aspectRatio}}},stop:function(F,M){var O=C(this).data("resizable"),G=O.options,K=O.position,L=O.containerOffset,E=O.containerPosition,H=O.containerElement;var I=C(O.helper),P=I.offset(),N=I.outerWidth()-O.sizeDiff.width,J=I.outerHeight()-O.sizeDiff.height;if(O._helper&&!G.animate&&(/relative/).test(H.css("position"))){C(this).css({left:P.left-E.left-L.left,width:N,height:J})}if(O._helper&&!G.animate&&(/static/).test(H.css("position"))){C(this).css({left:P.left-E.left-L.left,width:N,height:J})}}});C.ui.plugin.add("resizable","ghost",{start:function(G,H){var E=C(this).data("resizable"),I=E.options,F=E.size;E.ghost=E.originalElement.clone();E.ghost.css({opacity:0.25,display:"block",position:"relative",height:F.height,width:F.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof I.ghost=="string"?I.ghost:"");E.ghost.appendTo(E.helper)},resize:function(F,G){var E=C(this).data("resizable"),H=E.options;if(E.ghost){E.ghost.css({position:"relative",height:E.size.height,width:E.size.width})}},stop:function(F,G){var E=C(this).data("resizable"),H=E.options;if(E.ghost&&E.helper){E.helper.get(0).removeChild(E.ghost.get(0))}}});C.ui.plugin.add("resizable","grid",{resize:function(E,M){var O=C(this).data("resizable"),H=O.options,K=O.size,I=O.originalSize,J=O.originalPosition,N=O.axis,L=H._aspectRatio||E.shiftKey;H.grid=typeof H.grid=="number"?[H.grid,H.grid]:H.grid;var G=Math.round((K.width-I.width)/(H.grid[0]||1))*(H.grid[0]||1),F=Math.round((K.height-I.height)/(H.grid[1]||1))*(H.grid[1]||1);if(/^(se|s|e)$/.test(N)){O.size.width=I.width+G;O.size.height=I.height+F}else{if(/^(ne)$/.test(N)){O.size.width=I.width+G;O.size.height=I.height+F;O.position.top=J.top-F}else{if(/^(sw)$/.test(N)){O.size.width=I.width+G;O.size.height=I.height+F;O.position.left=J.left-G}else{O.size.width=I.width+G;O.size.height=I.height+F;O.position.top=J.top-F;O.position.left=J.left-G}}}}});var B=function(E){return parseInt(E,10)||0};var A=function(E){return !isNaN(parseInt(E,10))}})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-other', location = 'js-vendor/jquery/jquery-ui/jquery.ui.selectable.js' */
/*
 * jQuery UI Selectable 1.8.24
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Selectables
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.widget.js
 */
(function(A,B){A.widget("ui.selectable",A.ui.mouse,{options:{appendTo:"body",autoRefresh:true,distance:0,filter:"*",tolerance:"touch"},_create:function(){var C=this;this.element.addClass("ui-selectable");this.dragged=false;var D;this.refresh=function(){D=A(C.options.filter,C.element[0]);D.addClass("ui-selectee");D.each(function(){var E=A(this);var F=E.offset();A.data(this,"selectable-item",{element:this,$element:E,left:F.left,top:F.top,right:F.left+E.outerWidth(),bottom:F.top+E.outerHeight(),startselected:false,selected:E.hasClass("ui-selected"),selecting:E.hasClass("ui-selecting"),unselecting:E.hasClass("ui-unselecting")})})};this.refresh();this.selectees=D.addClass("ui-selectee");this._mouseInit();this.helper=A("<div class='ui-selectable-helper'></div>")},destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item");this.element.removeClass("ui-selectable ui-selectable-disabled").removeData("selectable").unbind(".selectable");this._mouseDestroy();return this},_mouseStart:function(E){var C=this;this.opos=[E.pageX,E.pageY];if(this.options.disabled){return }var D=this.options;this.selectees=A(D.filter,this.element[0]);this._trigger("start",E);A(D.appendTo).append(this.helper);this.helper.css({left:E.clientX,top:E.clientY,width:0,height:0});if(D.autoRefresh){this.refresh()}this.selectees.filter(".ui-selected").each(function(){var F=A.data(this,"selectable-item");F.startselected=true;if(!E.metaKey&&!E.ctrlKey){F.$element.removeClass("ui-selected");F.selected=false;F.$element.addClass("ui-unselecting");F.unselecting=true;C._trigger("unselecting",E,{unselecting:F.element})}});A(E.target).parents().andSelf().each(function(){var G=A.data(this,"selectable-item");if(G){var F=(!E.metaKey&&!E.ctrlKey)||!G.$element.hasClass("ui-selected");G.$element.removeClass(F?"ui-unselecting":"ui-selected").addClass(F?"ui-selecting":"ui-unselecting");G.unselecting=!F;G.selecting=F;G.selected=F;if(F){C._trigger("selecting",E,{selecting:G.element})}else{C._trigger("unselecting",E,{unselecting:G.element})}return false}})},_mouseDrag:function(J){var D=this;this.dragged=true;if(this.options.disabled){return }var F=this.options;var E=this.opos[0],I=this.opos[1],C=J.pageX,H=J.pageY;if(E>C){var G=C;C=E;E=G}if(I>H){var G=H;H=I;I=G}this.helper.css({left:E,top:I,width:C-E,height:H-I});this.selectees.each(function(){var K=A.data(this,"selectable-item");if(!K||K.element==D.element[0]){return }var L=false;if(F.tolerance=="touch"){L=(!(K.left>C||K.right<E||K.top>H||K.bottom<I))}else{if(F.tolerance=="fit"){L=(K.left>E&&K.right<C&&K.top>I&&K.bottom<H)}}if(L){if(K.selected){K.$element.removeClass("ui-selected");K.selected=false}if(K.unselecting){K.$element.removeClass("ui-unselecting");K.unselecting=false}if(!K.selecting){K.$element.addClass("ui-selecting");K.selecting=true;D._trigger("selecting",J,{selecting:K.element})}}else{if(K.selecting){if((J.metaKey||J.ctrlKey)&&K.startselected){K.$element.removeClass("ui-selecting");K.selecting=false;K.$element.addClass("ui-selected");K.selected=true}else{K.$element.removeClass("ui-selecting");K.selecting=false;if(K.startselected){K.$element.addClass("ui-unselecting");K.unselecting=true}D._trigger("unselecting",J,{unselecting:K.element})}}if(K.selected){if(!J.metaKey&&!J.ctrlKey&&!K.startselected){K.$element.removeClass("ui-selected");K.selected=false;K.$element.addClass("ui-unselecting");K.unselecting=true;D._trigger("unselecting",J,{unselecting:K.element})}}}});return false},_mouseStop:function(E){var C=this;this.dragged=false;var D=this.options;A(".ui-unselecting",this.element[0]).each(function(){var F=A.data(this,"selectable-item");F.$element.removeClass("ui-unselecting");F.unselecting=false;F.startselected=false;C._trigger("unselected",E,{unselected:F.element})});A(".ui-selecting",this.element[0]).each(function(){var F=A.data(this,"selectable-item");F.$element.removeClass("ui-selecting").addClass("ui-selected");F.selecting=false;F.selected=true;F.startselected=true;C._trigger("selected",E,{selected:F.element})});this._trigger("stop",E);this.helper.remove();return false}});A.extend(A.ui.selectable,{version:"1.8.24"})})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-other', location = 'js-vendor/jquery/jquery-ui/jquery.ui.accordion.js' */
/*
 * jQuery UI Accordion 1.8.24
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Accordion
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 */
(function(A,B){A.widget("ui.accordion",{options:{active:0,animated:"slide",autoHeight:true,clearStyle:false,collapsible:false,event:"click",fillSpace:false,header:"> li > :first-child,> :not(li):even",icons:{header:"ui-icon-triangle-1-e",headerSelected:"ui-icon-triangle-1-s"},navigation:false,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}},_create:function(){var C=this,D=C.options;C.running=0;C.element.addClass("ui-accordion ui-widget ui-helper-reset").children("li").addClass("ui-accordion-li-fix");C.headers=C.element.find(D.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all").bind("mouseenter.accordion",function(){if(D.disabled){return }A(this).addClass("ui-state-hover")}).bind("mouseleave.accordion",function(){if(D.disabled){return }A(this).removeClass("ui-state-hover")}).bind("focus.accordion",function(){if(D.disabled){return }A(this).addClass("ui-state-focus")}).bind("blur.accordion",function(){if(D.disabled){return }A(this).removeClass("ui-state-focus")});C.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom");if(D.navigation){var E=C.element.find("a").filter(D.navigationFilter).eq(0);if(E.length){var F=E.closest(".ui-accordion-header");if(F.length){C.active=F}else{C.active=E.closest(".ui-accordion-content").prev()}}}C.active=C._findActive(C.active||D.active).addClass("ui-state-default ui-state-active").toggleClass("ui-corner-all").toggleClass("ui-corner-top");C.active.next().addClass("ui-accordion-content-active");C._createIcons();C.resize();C.element.attr("role","tablist");C.headers.attr("role","tab").bind("keydown.accordion",function(G){return C._keydown(G)}).next().attr("role","tabpanel");C.headers.not(C.active||"").attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).next().hide();if(!C.active.length){C.headers.eq(0).attr("tabIndex",0)}else{C.active.attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0})}if(!A.browser.safari){C.headers.find("a").attr("tabIndex",-1)}if(D.event){C.headers.bind(D.event.split(" ").join(".accordion ")+".accordion",function(G){C._clickHandler.call(C,G,this);G.preventDefault()})}},_createIcons:function(){var C=this.options;if(C.icons){A("<span></span>").addClass("ui-icon "+C.icons.header).prependTo(this.headers);this.active.children(".ui-icon").toggleClass(C.icons.header).toggleClass(C.icons.headerSelected);this.element.addClass("ui-accordion-icons")}},_destroyIcons:function(){this.headers.children(".ui-icon").remove();this.element.removeClass("ui-accordion-icons")},destroy:function(){var C=this.options;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role");this.headers.unbind(".accordion").removeClass("ui-accordion-header ui-accordion-disabled ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("tabIndex");this.headers.find("a").removeAttr("tabIndex");this._destroyIcons();var D=this.headers.next().css("display","").removeAttr("role").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-accordion-disabled ui-state-disabled");if(C.autoHeight||C.fillHeight){D.css("height","")}return A.Widget.prototype.destroy.call(this)},_setOption:function(C,D){A.Widget.prototype._setOption.apply(this,arguments);if(C=="active"){this.activate(D)}if(C=="icons"){this._destroyIcons();if(D){this._createIcons()}}if(C=="disabled"){this.headers.add(this.headers.next())[D?"addClass":"removeClass"]("ui-accordion-disabled ui-state-disabled")}},_keydown:function(F){if(this.options.disabled||F.altKey||F.ctrlKey){return }var G=A.ui.keyCode,E=this.headers.length,C=this.headers.index(F.target),D=false;switch(F.keyCode){case G.RIGHT:case G.DOWN:D=this.headers[(C+1)%E];break;case G.LEFT:case G.UP:D=this.headers[(C-1+E)%E];break;case G.SPACE:case G.ENTER:this._clickHandler({target:F.target},F.target);F.preventDefault()}if(D){A(F.target).attr("tabIndex",-1);A(D).attr("tabIndex",0);D.focus();return false}return true},resize:function(){var C=this.options,E;if(C.fillSpace){if(A.browser.msie){var D=this.element.parent().css("overflow");this.element.parent().css("overflow","hidden")}E=this.element.parent().height();if(A.browser.msie){this.element.parent().css("overflow",D)}this.headers.each(function(){E-=A(this).outerHeight(true)});this.headers.next().each(function(){A(this).height(Math.max(0,E-A(this).innerHeight()+A(this).height()))}).css("overflow","auto")}else{if(C.autoHeight){E=0;this.headers.next().each(function(){E=Math.max(E,A(this).height("").height())}).height(E)}}return this},activate:function(C){this.options.active=C;var D=this._findActive(C)[0];this._clickHandler({target:D},D);return this},_findActive:function(C){return C?typeof C==="number"?this.headers.filter(":eq("+C+")"):this.headers.not(this.headers.not(C)):C===false?A([]):this.headers.filter(":eq(0)")},_clickHandler:function(C,G){var L=this.options;if(L.disabled){return }if(!C.target){if(!L.collapsible){return }this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(L.icons.headerSelected).addClass(L.icons.header);this.active.next().addClass("ui-accordion-content-active");var I=this.active.next(),F={options:L,newHeader:A([]),oldHeader:L.active,newContent:A([]),oldContent:I},D=(this.active=A([]));this._toggle(D,I,F);return }var H=A(C.currentTarget||G),J=H[0]===this.active[0];L.active=L.collapsible&&J?false:this.headers.index(H);if(this.running||(!L.collapsible&&J)){return }var E=this.active,D=H.next(),I=this.active.next(),F={options:L,newHeader:J&&L.collapsible?A([]):H,oldHeader:this.active,newContent:J&&L.collapsible?A([]):D,oldContent:I},K=this.headers.index(this.active[0])>this.headers.index(H[0]);this.active=J?A([]):H;this._toggle(D,I,F,J,K);E.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(L.icons.headerSelected).addClass(L.icons.header);if(!J){H.removeClass("ui-state-default ui-corner-all").addClass("ui-state-active ui-corner-top").children(".ui-icon").removeClass(L.icons.header).addClass(L.icons.headerSelected);H.next().addClass("ui-accordion-content-active")}return },_toggle:function(C,I,G,J,K){var M=this,N=M.options;M.toShow=C;M.toHide=I;M.data=G;var D=function(){if(!M){return }return M._completed.apply(M,arguments)};M._trigger("changestart",null,M.data);M.running=I.size()===0?C.size():I.size();if(N.animated){var F={};if(N.collapsible&&J){F={toShow:A([]),toHide:I,complete:D,down:K,autoHeight:N.autoHeight||N.fillSpace}}else{F={toShow:C,toHide:I,complete:D,down:K,autoHeight:N.autoHeight||N.fillSpace}}if(!N.proxied){N.proxied=N.animated}if(!N.proxiedDuration){N.proxiedDuration=N.duration}N.animated=A.isFunction(N.proxied)?N.proxied(F):N.proxied;N.duration=A.isFunction(N.proxiedDuration)?N.proxiedDuration(F):N.proxiedDuration;var L=A.ui.accordion.animations,E=N.duration,H=N.animated;if(H&&!L[H]&&!A.easing[H]){H="slide"}if(!L[H]){L[H]=function(O){this.slide(O,{easing:H,duration:E||700})}}L[H](F)}else{if(N.collapsible&&J){C.toggle()}else{I.hide();C.show()}D(true)}I.prev().attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).blur();C.prev().attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}).focus()},_completed:function(C){this.running=C?0:--this.running;if(this.running){return }if(this.options.clearStyle){this.toShow.add(this.toHide).css({height:"",overflow:""})}this.toHide.removeClass("ui-accordion-content-active");if(this.toHide.length){this.toHide.parent()[0].className=this.toHide.parent()[0].className}this._trigger("change",null,this.data)}});A.extend(A.ui.accordion,{version:"1.8.24",animations:{slide:function(K,I){K=A.extend({easing:"swing",duration:300},K,I);if(!K.toHide.size()){K.toShow.animate({height:"show",paddingTop:"show",paddingBottom:"show"},K);return }if(!K.toShow.size()){K.toHide.animate({height:"hide",paddingTop:"hide",paddingBottom:"hide"},K);return }var D=K.toShow.css("overflow"),H=0,E={},G={},F=["height","paddingTop","paddingBottom"],C;var J=K.toShow;C=J[0].style.width;J.width(J.parent().width()-parseFloat(J.css("paddingLeft"))-parseFloat(J.css("paddingRight"))-(parseFloat(J.css("borderLeftWidth"))||0)-(parseFloat(J.css("borderRightWidth"))||0));A.each(F,function(L,N){G[N]="hide";var M=(""+A.css(K.toShow[0],N)).match(/^([\d+-.]+)(.*)$/);E[N]={value:M[1],unit:M[2]||"px"}});K.toShow.css({height:0,overflow:"hidden"}).show();K.toHide.filter(":hidden").each(K.complete).end().filter(":visible").animate(G,{step:function(L,M){if(M.prop=="height"){H=(M.end-M.start===0)?0:(M.now-M.start)/(M.end-M.start)}K.toShow[0].style[M.prop]=(H*E[M.prop].value)+E[M.prop].unit},duration:K.duration,easing:K.easing,complete:function(){if(!K.autoHeight){K.toShow.css("height","")}K.toShow.css({width:C,overflow:D});K.complete()}})},bounceslide:function(C){this.slide(C,{easing:C.down?"easeOutBounce":"swing",duration:C.down?1000:200})}}})})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-other', location = 'js-vendor/jquery/jquery-ui/jquery.ui.autocomplete.js' */
/*
 * jQuery UI Autocomplete 1.8.24
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Autocomplete
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 *	jquery.ui.position.js
 */
(function(A,B){var C=0;A.widget("ui.autocomplete",{options:{appendTo:"body",autoFocus:false,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},pending:0,_create:function(){var D=this,F=this.element[0].ownerDocument,E;this.isMultiLine=this.element.is("textarea");this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(G){if(D.options.disabled||D.element.propAttr("readOnly")){return }E=false;var H=A.ui.keyCode;switch(G.keyCode){case H.PAGE_UP:D._move("previousPage",G);break;case H.PAGE_DOWN:D._move("nextPage",G);break;case H.UP:D._keyEvent("previous",G);break;case H.DOWN:D._keyEvent("next",G);break;case H.ENTER:case H.NUMPAD_ENTER:if(D.menu.active){E=true;G.preventDefault()}case H.TAB:if(!D.menu.active){return }D.menu.select(G);break;case H.ESCAPE:D.element.val(D.term);D.close(G);break;default:clearTimeout(D.searching);D.searching=setTimeout(function(){if(D.term!=D.element.val()){D.selectedItem=null;D.search(null,G)}},D.options.delay);break}}).bind("keypress.autocomplete",function(G){if(E){E=false;G.preventDefault()}}).bind("focus.autocomplete",function(){if(D.options.disabled){return }D.selectedItem=null;D.previous=D.element.val()}).bind("blur.autocomplete",function(G){if(D.options.disabled){return }clearTimeout(D.searching);D.closing=setTimeout(function(){D.close(G);D._change(G)},150)});this._initSource();this.menu=A("<ul></ul>").addClass("ui-autocomplete").appendTo(A(this.options.appendTo||"body",F)[0]).mousedown(function(G){var H=D.menu.element[0];if(!A(G.target).closest(".ui-menu-item").length){setTimeout(function(){A(document).one("mousedown",function(I){if(I.target!==D.element[0]&&I.target!==H&&!A.ui.contains(H,I.target)){D.close()}})},1)}setTimeout(function(){clearTimeout(D.closing)},13)}).menu({focus:function(H,I){var G=I.item.data("item.autocomplete");if(false!==D._trigger("focus",H,{item:G})){if(/^key/.test(H.originalEvent.type)){D.element.val(G.value)}}},selected:function(I,J){var H=J.item.data("item.autocomplete"),G=D.previous;if(D.element[0]!==F.activeElement){D.element.focus();D.previous=G;setTimeout(function(){D.previous=G;D.selectedItem=H},1)}if(false!==D._trigger("select",I,{item:H})){D.element.val(H.value)}D.term=D.element.val();D.close(I);D.selectedItem=H},blur:function(G,H){if(D.menu.element.is(":visible")&&(D.element.val()!==D.term)){D.element.val(D.term)}}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu");if(A.fn.bgiframe){this.menu.element.bgiframe()}D.beforeunloadHandler=function(){D.element.removeAttr("autocomplete")};A(window).bind("beforeunload",D.beforeunloadHandler)},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup");this.menu.element.remove();A(window).unbind("beforeunload",this.beforeunloadHandler);A.Widget.prototype.destroy.call(this)},_setOption:function(D,E){A.Widget.prototype._setOption.apply(this,arguments);if(D==="source"){this._initSource()}if(D==="appendTo"){this.menu.element.appendTo(A(E||"body",this.element[0].ownerDocument)[0])}if(D==="disabled"&&E&&this.xhr){this.xhr.abort()}},_initSource:function(){var D=this,F,E;if(A.isArray(this.options.source)){F=this.options.source;this.source=function(H,G){G(A.ui.autocomplete.filter(F,H.term))}}else{if(typeof this.options.source==="string"){E=this.options.source;this.source=function(H,G){if(D.xhr){D.xhr.abort()}D.xhr=A.ajax({url:E,data:H,dataType:"json",success:function(J,I){G(J)},error:function(){G([])}})}}else{this.source=this.options.source}}},search:function(E,D){E=E!=null?E:this.element.val();this.term=this.element.val();if(E.length<this.options.minLength){return this.close(D)}clearTimeout(this.closing);if(this._trigger("search",D)===false){return }return this._search(E)},_search:function(D){this.pending++;this.element.addClass("ui-autocomplete-loading");this.source({term:D},this._response())},_response:function(){var E=this,D=++C;return function(F){if(D===C){E.__response(F)}E.pending--;if(!E.pending){E.element.removeClass("ui-autocomplete-loading")}}},__response:function(D){if(!this.options.disabled&&D&&D.length){D=this._normalize(D);this._suggest(D);this._trigger("open")}else{this.close()}},close:function(D){clearTimeout(this.closing);if(this.menu.element.is(":visible")){this.menu.element.hide();this.menu.deactivate();this._trigger("close",D)}},_change:function(D){if(this.previous!==this.element.val()){this._trigger("change",D,{item:this.selectedItem})}},_normalize:function(D){if(D.length&&D[0].label&&D[0].value){return D}return A.map(D,function(E){if(typeof E==="string"){return{label:E,value:E}}return A.extend({label:E.label||E.value,value:E.value||E.label},E)})},_suggest:function(D){var E=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(E,D);this.menu.deactivate();this.menu.refresh();E.show();this._resizeMenu();E.position(A.extend({of:this.element},this.options.position));if(this.options.autoFocus){this.menu.next(new A.Event("mouseover"))}},_resizeMenu:function(){var D=this.menu.element;D.outerWidth(Math.max(D.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(F,E){var D=this;A.each(E,function(G,H){D._renderItem(F,H)})},_renderItem:function(D,E){return A("<li></li>").data("item.autocomplete",E).append(A("<a></a>").text(E.label)).appendTo(D)},_move:function(E,D){if(!this.menu.element.is(":visible")){this.search(null,D);return }if(this.menu.first()&&/^previous/.test(E)||this.menu.last()&&/^next/.test(E)){this.element.val(this.term);this.menu.deactivate();return }this.menu[E](D)},widget:function(){return this.menu.element},_keyEvent:function(E,D){if(!this.isMultiLine||this.menu.element.is(":visible")){this._move(E,D);D.preventDefault()}}});A.extend(A.ui.autocomplete,{escapeRegex:function(D){return D.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},filter:function(F,D){var E=new RegExp(A.ui.autocomplete.escapeRegex(D),"i");return A.grep(F,function(G){return E.test(G.label||G.value||G)})}})}(jQuery));(function(A){A.widget("ui.menu",{_create:function(){var B=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(C){if(!A(C.target).closest(".ui-menu-item a").length){return }C.preventDefault();B.select(C)});this.refresh()},refresh:function(){var C=this;var B=this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem");B.children("a").addClass("ui-corner-all").attr("tabindex",-1).mouseenter(function(D){C.activate(D,A(this).parent())}).mouseleave(function(){C.deactivate()})},activate:function(E,D){this.deactivate();if(this.hasScroll()){var F=D.offset().top-this.element.offset().top,B=this.element.scrollTop(),C=this.element.height();if(F<0){this.element.scrollTop(B+F)}else{if(F>=C){this.element.scrollTop(B+F-C+D.height())}}}this.active=D.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end();this._trigger("focus",E,{item:D})},deactivate:function(){if(!this.active){return }this.active.children("a").removeClass("ui-state-hover").removeAttr("id");this._trigger("blur");this.active=null},next:function(B){this.move("next",".ui-menu-item:first",B)},previous:function(B){this.move("prev",".ui-menu-item:last",B)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},move:function(E,D,C){if(!this.active){this.activate(C,this.element.children(D));return }var B=this.active[E+"All"](".ui-menu-item").eq(0);if(B.length){this.activate(C,B)}else{this.activate(C,this.element.children(D))}},nextPage:function(D){if(this.hasScroll()){if(!this.active||this.last()){this.activate(D,this.element.children(".ui-menu-item:first"));return }var E=this.active.offset().top,C=this.element.height(),B=this.element.children(".ui-menu-item").filter(function(){var F=A(this).offset().top-E-C+A(this).height();return F<10&&F>-10});if(!B.length){B=this.element.children(".ui-menu-item:last")}this.activate(D,B)}else{this.activate(D,this.element.children(".ui-menu-item").filter(!this.active||this.last()?":first":":last"))}},previousPage:function(D){if(this.hasScroll()){if(!this.active||this.first()){this.activate(D,this.element.children(".ui-menu-item:last"));return }var E=this.active.offset().top,C=this.element.height(),B=this.element.children(".ui-menu-item").filter(function(){var F=A(this).offset().top-E+C-A(this).height();return F<10&&F>-10});if(!B.length){B=this.element.children(".ui-menu-item:first")}this.activate(D,B)}else{this.activate(D,this.element.children(".ui-menu-item").filter(!this.active||this.first()?":last":":first"))}},hasScroll:function(){return this.element.height()<this.element[A.fn.prop?"prop":"attr"]("scrollHeight")},select:function(B){this._trigger("selected",B,{item:this.active})}})}(jQuery));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-other', location = 'js-vendor/jquery/jquery-ui/jquery.ui.button.js' */
/*
 * jQuery UI Button 1.8.24
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Button
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 */
(function(F,B){var K,E,A,H,I="ui-button ui-widget ui-state-default ui-corner-all",C="ui-state-hover ui-state-active ",G="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",J=function(){var L=F(this).find(":ui-button");setTimeout(function(){L.button("refresh")},1)},D=function(M){var L=M.name,N=M.form,O=F([]);if(L){if(N){O=F(N).find("[name='"+L+"']")}else{O=F("[name='"+L+"']",M.ownerDocument).filter(function(){return !this.form})}}return O};F.widget("ui.button",{options:{disabled:null,text:true,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset.button").bind("reset.button",J);if(typeof this.options.disabled!=="boolean"){this.options.disabled=!!this.element.propAttr("disabled")}else{this.element.propAttr("disabled",this.options.disabled)}this._determineButtonType();this.hasTitle=!!this.buttonElement.attr("title");var L=this,N=this.options,O=this.type==="checkbox"||this.type==="radio",P="ui-state-hover"+(!O?" ui-state-active":""),M="ui-state-focus";if(N.label===null){N.label=this.buttonElement.html()}this.buttonElement.addClass(I).attr("role","button").bind("mouseenter.button",function(){if(N.disabled){return }F(this).addClass("ui-state-hover");if(this===K){F(this).addClass("ui-state-active")}}).bind("mouseleave.button",function(){if(N.disabled){return }F(this).removeClass(P)}).bind("click.button",function(Q){if(N.disabled){Q.preventDefault();Q.stopImmediatePropagation()}});this.element.bind("focus.button",function(){L.buttonElement.addClass(M)}).bind("blur.button",function(){L.buttonElement.removeClass(M)});if(O){this.element.bind("change.button",function(){if(H){return }L.refresh()});this.buttonElement.bind("mousedown.button",function(Q){if(N.disabled){return }H=false;E=Q.pageX;A=Q.pageY}).bind("mouseup.button",function(Q){if(N.disabled){return }if(E!==Q.pageX||A!==Q.pageY){H=true}})}if(this.type==="checkbox"){this.buttonElement.bind("click.button",function(){if(N.disabled||H){return false}F(this).toggleClass("ui-state-active");L.buttonElement.attr("aria-pressed",L.element[0].checked)})}else{if(this.type==="radio"){this.buttonElement.bind("click.button",function(){if(N.disabled||H){return false}F(this).addClass("ui-state-active");L.buttonElement.attr("aria-pressed","true");var Q=L.element[0];D(Q).not(Q).map(function(){return F(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")})}else{this.buttonElement.bind("mousedown.button",function(){if(N.disabled){return false}F(this).addClass("ui-state-active");K=this;F(document).one("mouseup",function(){K=null})}).bind("mouseup.button",function(){if(N.disabled){return false}F(this).removeClass("ui-state-active")}).bind("keydown.button",function(Q){if(N.disabled){return false}if(Q.keyCode==F.ui.keyCode.SPACE||Q.keyCode==F.ui.keyCode.ENTER){F(this).addClass("ui-state-active")}}).bind("keyup.button",function(){F(this).removeClass("ui-state-active")});if(this.buttonElement.is("a")){this.buttonElement.keyup(function(Q){if(Q.keyCode===F.ui.keyCode.SPACE){F(this).click()}})}}}this._setOption("disabled",N.disabled);this._resetButton()},_determineButtonType:function(){if(this.element.is(":checkbox")){this.type="checkbox"}else{if(this.element.is(":radio")){this.type="radio"}else{if(this.element.is("input")){this.type="input"}else{this.type="button"}}}if(this.type==="checkbox"||this.type==="radio"){var L=this.element.parents().filter(":last"),N="label[for='"+this.element.attr("id")+"']";this.buttonElement=L.find(N);if(!this.buttonElement.length){L=L.length?L.siblings():this.element.siblings();this.buttonElement=L.filter(N);if(!this.buttonElement.length){this.buttonElement=L.find(N)}}this.element.addClass("ui-helper-hidden-accessible");var M=this.element.is(":checked");if(M){this.buttonElement.addClass("ui-state-active")}this.buttonElement.attr("aria-pressed",M)}else{this.buttonElement=this.element}},widget:function(){return this.buttonElement},destroy:function(){this.element.removeClass("ui-helper-hidden-accessible");this.buttonElement.removeClass(I+" "+C+" "+G).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html());if(!this.hasTitle){this.buttonElement.removeAttr("title")}F.Widget.prototype.destroy.call(this)},_setOption:function(L,M){F.Widget.prototype._setOption.apply(this,arguments);if(L==="disabled"){if(M){this.element.propAttr("disabled",true)}else{this.element.propAttr("disabled",false)}return }this._resetButton()},refresh:function(){var L=this.element.is(":disabled");if(L!==this.options.disabled){this._setOption("disabled",L)}if(this.type==="radio"){D(this.element[0]).each(function(){if(F(this).is(":checked")){F(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true")}else{F(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}})}else{if(this.type==="checkbox"){if(this.element.is(":checked")){this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true")}else{this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false")}}}},_resetButton:function(){if(this.type==="input"){if(this.options.label){this.element.val(this.options.label)}return }var P=this.buttonElement.removeClass(G),N=F("<span></span>",this.element[0].ownerDocument).addClass("ui-button-text").html(this.options.label).appendTo(P.empty()).text(),M=this.options.icons,L=M.primary&&M.secondary,O=[];if(M.primary||M.secondary){if(this.options.text){O.push("ui-button-text-icon"+(L?"s":(M.primary?"-primary":"-secondary")))}if(M.primary){P.prepend("<span class='ui-button-icon-primary ui-icon "+M.primary+"'></span>")}if(M.secondary){P.append("<span class='ui-button-icon-secondary ui-icon "+M.secondary+"'></span>")}if(!this.options.text){O.push(L?"ui-button-icons-only":"ui-button-icon-only");if(!this.hasTitle){P.attr("title",N)}}}else{O.push("ui-button-text-only")}P.addClass(O.join(" "))}});F.widget("ui.buttonset",{options:{items:":button, :submit, :reset, :checkbox, :radio, a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(L,M){if(L==="disabled"){this.buttons.button("option",L,M)}F.Widget.prototype._setOption.apply(this,arguments)},refresh:function(){var L=this.element.css("direction")==="rtl";this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return F(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(L?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(L?"ui-corner-left":"ui-corner-right").end().end()},destroy:function(){this.element.removeClass("ui-buttonset");this.buttons.map(function(){return F(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy");F.Widget.prototype.destroy.call(this)}})}(jQuery));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-other', location = 'js-vendor/jquery/jquery-ui/jquery.ui.dialog.js' */
/*
 * jQuery UI Dialog 1.8.24
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Dialog
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 *  jquery.ui.button.js
 *	jquery.ui.draggable.js
 *	jquery.ui.mouse.js
 *	jquery.ui.position.js
 *	jquery.ui.resizable.js
 */
(function(D,E){var B="ui-dialog ui-widget ui-widget-content ui-corner-all ",A={buttons:true,height:true,maxHeight:true,maxWidth:true,minHeight:true,minWidth:true,width:true},C={maxHeight:true,maxWidth:true,minHeight:true,minWidth:true};D.widget("ui.dialog",{options:{autoOpen:true,buttons:{},closeOnEscape:true,closeText:"close",dialogClass:"",draggable:true,hide:null,height:"auto",maxHeight:false,maxWidth:false,minHeight:150,minWidth:150,modal:false,position:{my:"center",at:"center",collision:"fit",using:function(G){var F=D(this).css(G).offset().top;if(F<0){D(this).css("top",G.top-F)}}},resizable:true,show:null,stack:true,title:"",width:300,zIndex:1000},_create:function(){this.originalTitle=this.element.attr("title");if(typeof this.originalTitle!=="string"){this.originalTitle=""}this.options.title=this.options.title||this.originalTitle;var N=this,O=N.options,L=O.title||"&#160;",G=D.ui.dialog.getTitleId(N.element),M=(N.uiDialog=D("<div></div>")).appendTo(document.body).hide().addClass(B+O.dialogClass).css({zIndex:O.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(P){if(O.closeOnEscape&&!P.isDefaultPrevented()&&P.keyCode&&P.keyCode===D.ui.keyCode.ESCAPE){N.close(P);P.preventDefault()}}).attr({role:"dialog","aria-labelledby":G}).mousedown(function(P){N.moveToTop(false,P)}),I=N.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(M),H=(N.uiDialogTitlebar=D("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(M),K=D('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role","button").hover(function(){K.addClass("ui-state-hover")},function(){K.removeClass("ui-state-hover")}).focus(function(){K.addClass("ui-state-focus")}).blur(function(){K.removeClass("ui-state-focus")}).click(function(P){N.close(P);return false}).appendTo(H),J=(N.uiDialogTitlebarCloseText=D("<span></span>")).addClass("ui-icon ui-icon-closethick").text(O.closeText).appendTo(K),F=D("<span></span>").addClass("ui-dialog-title").attr("id",G).html(L).prependTo(H);if(D.isFunction(O.beforeclose)&&!D.isFunction(O.beforeClose)){O.beforeClose=O.beforeclose}H.find("*").add(H).disableSelection();if(O.draggable&&D.fn.draggable){N._makeDraggable()}if(O.resizable&&D.fn.resizable){N._makeResizable()}N._createButtons(O.buttons);N._isOpen=false;if(D.fn.bgiframe){M.bgiframe()}},_init:function(){if(this.options.autoOpen){this.open()}},destroy:function(){var F=this;if(F.overlay){F.overlay.destroy()}F.uiDialog.hide();F.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body");F.uiDialog.remove();if(F.originalTitle){F.element.attr("title",F.originalTitle)}return F},widget:function(){return this.uiDialog},close:function(I){var F=this,H,G;if(false===F._trigger("beforeClose",I)){return }if(F.overlay){F.overlay.destroy()}F.uiDialog.unbind("keypress.ui-dialog");F._isOpen=false;if(F.options.hide){F.uiDialog.hide(F.options.hide,function(){F._trigger("close",I)})}else{F.uiDialog.hide();F._trigger("close",I)}D.ui.dialog.overlay.resize();if(F.options.modal){H=0;D(".ui-dialog").each(function(){if(this!==F.uiDialog[0]){G=D(this).css("z-index");if(!isNaN(G)){H=Math.max(H,G)}}});D.ui.dialog.maxZ=H}return F},isOpen:function(){return this._isOpen},moveToTop:function(J,I){var F=this,H=F.options,G;if((H.modal&&!J)||(!H.stack&&!H.modal)){return F._trigger("focus",I)}if(H.zIndex>D.ui.dialog.maxZ){D.ui.dialog.maxZ=H.zIndex}if(F.overlay){D.ui.dialog.maxZ+=1;F.overlay.$el.css("z-index",D.ui.dialog.overlay.maxZ=D.ui.dialog.maxZ)}G={scrollTop:F.element.scrollTop(),scrollLeft:F.element.scrollLeft()};D.ui.dialog.maxZ+=1;F.uiDialog.css("z-index",D.ui.dialog.maxZ);F.element.attr(G);F._trigger("focus",I);return F},open:function(){if(this._isOpen){return }var G=this,H=G.options,F=G.uiDialog;G.overlay=H.modal?new D.ui.dialog.overlay(G):null;G._size();G._position(H.position);F.show(H.show);G.moveToTop(true);if(H.modal){F.bind("keydown.ui-dialog",function(K){if(K.keyCode!==D.ui.keyCode.TAB){return }var J=D(":tabbable",this),L=J.filter(":first"),I=J.filter(":last");if(K.target===I[0]&&!K.shiftKey){L.focus(1);return false}else{if(K.target===L[0]&&K.shiftKey){I.focus(1);return false}}})}D(G.element.find(":tabbable").get().concat(F.find(".ui-dialog-buttonpane :tabbable").get().concat(F.get()))).eq(0).focus();G._isOpen=true;G._trigger("open");return G},_createButtons:function(I){var H=this,F=false,G=D("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),J=D("<div></div>").addClass("ui-dialog-buttonset").appendTo(G);H.uiDialog.find(".ui-dialog-buttonpane").remove();if(typeof I==="object"&&I!==null){D.each(I,function(){return !(F=true)})}if(F){D.each(I,function(K,M){M=D.isFunction(M)?{click:M,text:K}:M;var L=D('<button type="button"></button>').click(function(){M.click.apply(H.element[0],arguments)}).appendTo(J);D.each(M,function(N,O){if(N==="click"){return }if(N in L){L[N](O)}else{L.attr(N,O)}});if(D.fn.button){L.button()}});G.appendTo(H.uiDialog)}},_makeDraggable:function(){var F=this,I=F.options,J=D(document),H;function G(K){return{position:K.position,offset:K.offset}}F.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(K,L){H=I.height==="auto"?"auto":D(this).height();D(this).height(D(this).height()).addClass("ui-dialog-dragging");F._trigger("dragStart",K,G(L))},drag:function(K,L){F._trigger("drag",K,G(L))},stop:function(K,L){I.position=[L.position.left-J.scrollLeft(),L.position.top-J.scrollTop()];D(this).removeClass("ui-dialog-dragging").height(H);F._trigger("dragStop",K,G(L));D.ui.dialog.overlay.resize()}})},_makeResizable:function(K){K=(K===E?this.options.resizable:K);var G=this,J=G.options,F=G.uiDialog.css("position"),I=(typeof K==="string"?K:"n,e,s,w,se,sw,ne,nw");function H(L){return{originalPosition:L.originalPosition,originalSize:L.originalSize,position:L.position,size:L.size}}G.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:G.element,maxWidth:J.maxWidth,maxHeight:J.maxHeight,minWidth:J.minWidth,minHeight:G._minHeight(),handles:I,start:function(L,M){D(this).addClass("ui-dialog-resizing");G._trigger("resizeStart",L,H(M))},resize:function(L,M){G._trigger("resize",L,H(M))},stop:function(L,M){D(this).removeClass("ui-dialog-resizing");J.height=D(this).height();J.width=D(this).width();G._trigger("resizeStop",L,H(M));D.ui.dialog.overlay.resize()}}).css("position",F).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var F=this.options;if(F.height==="auto"){return F.minHeight}else{return Math.min(F.minHeight,F.height)}},_position:function(G){var H=[],I=[0,0],F;if(G){if(typeof G==="string"||(typeof G==="object"&&"0" in G)){H=G.split?G.split(" "):[G[0],G[1]];if(H.length===1){H[1]=H[0]}D.each(["left","top"],function(K,J){if(+H[K]===H[K]){I[K]=H[K];H[K]=J}});G={my:H.join(" "),at:H.join(" "),offset:I.join(" ")}}G=D.extend({},D.ui.dialog.prototype.options.position,G)}else{G=D.ui.dialog.prototype.options.position}F=this.uiDialog.is(":visible");if(!F){this.uiDialog.show()}this.uiDialog.css({top:0,left:0}).position(D.extend({of:window},G));if(!F){this.uiDialog.hide()}},_setOptions:function(I){var G=this,F={},H=false;D.each(I,function(J,K){G._setOption(J,K);if(J in A){H=true}if(J in C){F[J]=K}});if(H){this._size()}if(this.uiDialog.is(":data(resizable)")){this.uiDialog.resizable("option",F)}},_setOption:function(I,J){var G=this,F=G.uiDialog;switch(I){case"beforeclose":I="beforeClose";break;case"buttons":G._createButtons(J);break;case"closeText":G.uiDialogTitlebarCloseText.text(""+J);break;case"dialogClass":F.removeClass(G.options.dialogClass).addClass(B+J);break;case"disabled":if(J){F.addClass("ui-dialog-disabled")}else{F.removeClass("ui-dialog-disabled")}break;case"draggable":var H=F.is(":data(draggable)");if(H&&!J){F.draggable("destroy")}if(!H&&J){G._makeDraggable()}break;case"position":G._position(J);break;case"resizable":var K=F.is(":data(resizable)");if(K&&!J){F.resizable("destroy")}if(K&&typeof J==="string"){F.resizable("option","handles",J)}if(!K&&J!==false){G._makeResizable(J)}break;case"title":D(".ui-dialog-title",G.uiDialogTitlebar).html(""+(J||"&#160;"));break}D.Widget.prototype._setOption.apply(G,arguments)},_size:function(){var J=this.options,G,I,F=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0});if(J.minWidth>J.width){J.width=J.minWidth}G=this.uiDialog.css({height:"auto",width:J.width}).height();I=Math.max(0,J.minHeight-G);if(J.height==="auto"){if(D.support.minHeight){this.element.css({minHeight:I,height:"auto"})}else{this.uiDialog.show();var H=this.element.css("height","auto").height();if(!F){this.uiDialog.hide()}this.element.height(Math.max(H,I))}}else{this.element.height(Math.max(J.height-G,0))}if(this.uiDialog.is(":data(resizable)")){this.uiDialog.resizable("option","minHeight",this._minHeight())}}});D.extend(D.ui.dialog,{version:"1.8.24",uuid:0,maxZ:0,getTitleId:function(F){var G=F.attr("id");if(!G){this.uuid+=1;G=this.uuid}return"ui-dialog-title-"+G},overlay:function(F){this.$el=D.ui.dialog.overlay.create(F)}});D.extend(D.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:D.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(F){return F+".dialog-overlay"}).join(" "),create:function(G){if(this.instances.length===0){setTimeout(function(){if(D.ui.dialog.overlay.instances.length){D(document).bind(D.ui.dialog.overlay.events,function(H){if(D(H.target).zIndex()<D.ui.dialog.overlay.maxZ){return false}})}},1);D(document).bind("keydown.dialog-overlay",function(H){if(G.options.closeOnEscape&&!H.isDefaultPrevented()&&H.keyCode&&H.keyCode===D.ui.keyCode.ESCAPE){G.close(H);H.preventDefault()}});D(window).bind("resize.dialog-overlay",D.ui.dialog.overlay.resize)}var F=(this.oldInstances.pop()||D("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({width:this.width(),height:this.height()});if(D.fn.bgiframe){F.bgiframe()}this.instances.push(F);return F},destroy:function(F){var G=D.inArray(F,this.instances);if(G!=-1){this.oldInstances.push(this.instances.splice(G,1)[0])}if(this.instances.length===0){D([document,window]).unbind(".dialog-overlay")}F.remove();var H=0;D.each(this.instances,function(){H=Math.max(H,this.css("z-index"))});this.maxZ=H},height:function(){var G,F;if(D.browser.msie&&D.browser.version<7){G=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight);F=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight);if(G<F){return D(window).height()+"px"}else{return G+"px"}}else{return D(document).height()+"px"}},width:function(){var F,G;if(D.browser.msie){F=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth);G=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth);if(F<G){return D(window).width()+"px"}else{return F+"px"}}else{return D(document).width()+"px"}},resize:function(){var F=D([]);D.each(D.ui.dialog.overlay.instances,function(){F=F.add(this)});F.css({width:0,height:0}).css({width:D.ui.dialog.overlay.width(),height:D.ui.dialog.overlay.height()})}});D.extend(D.ui.dialog.overlay.prototype,{destroy:function(){D.ui.dialog.overlay.destroy(this.$el)}})}(jQuery));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-other', location = 'js-vendor/jquery/jquery-ui/jquery.ui.progressbar.js' */
/*
 * jQuery UI Progressbar 1.8.24
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Progressbar
 *
 * Depends:
 *   jquery.ui.core.js
 *   jquery.ui.widget.js
 */
(function(A,B){A.widget("ui.progressbar",{options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()});this.valueDiv=A("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element);this.oldValue=this._value();this._refreshValue()},destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");this.valueDiv.remove();A.Widget.prototype.destroy.apply(this,arguments)},value:function(C){if(C===B){return this._value()}this._setOption("value",C);return this},_setOption:function(C,D){if(C==="value"){this.options.value=D;this._refreshValue();if(this._value()===this.options.max){this._trigger("complete")}}A.Widget.prototype._setOption.apply(this,arguments)},_value:function(){var C=this.options.value;if(typeof C!=="number"){C=0}return Math.min(this.options.max,Math.max(this.min,C))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var D=this.value();var C=this._percentage();if(this.oldValue!==D){this.oldValue=D;this._trigger("change")}this.valueDiv.toggle(D>this.min).toggleClass("ui-corner-right",D===this.options.max).width(C.toFixed(0)+"%");this.element.attr("aria-valuenow",D)}});A.extend(A.ui.progressbar,{version:"1.8.24"})})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-other', location = 'js-vendor/jquery/jquery-ui/jquery.ui.slider.js' */
/*
 * jQuery UI Slider 1.8.24
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Slider
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.widget.js
 */
(function(B,C){var A=5;B.widget("ui.slider",B.ui.mouse,{widgetEventPrefix:"slide",options:{animate:false,distance:0,max:100,min:0,orientation:"horizontal",range:false,step:1,value:0,values:null},_create:function(){var E=this,J=this.options,I=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),H="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",D=(J.values&&J.values.length)||1,G=[];this._keySliding=false;this._mouseSliding=false;this._animateOff=true;this._handleIndex=null;this._detectOrientation();this._mouseInit();this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"+(J.disabled?" ui-slider-disabled ui-disabled":""));this.range=B([]);if(J.range){if(J.range===true){if(!J.values){J.values=[this._valueMin(),this._valueMin()]}if(J.values.length&&J.values.length!==2){J.values=[J.values[0],J.values[0]]}}this.range=B("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+((J.range==="min"||J.range==="max")?" ui-slider-range-"+J.range:""))}for(var F=I.length;F<D;F+=1){G.push(H)}this.handles=I.add(B(G.join("")).appendTo(E.element));this.handle=this.handles.eq(0);this.handles.add(this.range).filter("a").click(function(K){K.preventDefault()}).hover(function(){if(!J.disabled){B(this).addClass("ui-state-hover")}},function(){B(this).removeClass("ui-state-hover")}).focus(function(){if(!J.disabled){B(".ui-slider .ui-state-focus").removeClass("ui-state-focus");B(this).addClass("ui-state-focus")}else{B(this).blur()}}).blur(function(){B(this).removeClass("ui-state-focus")});this.handles.each(function(K){B(this).data("index.ui-slider-handle",K)});this.handles.keydown(function(O){var L=B(this).data("index.ui-slider-handle"),P,M,K,N;if(E.options.disabled){return }switch(O.keyCode){case B.ui.keyCode.HOME:case B.ui.keyCode.END:case B.ui.keyCode.PAGE_UP:case B.ui.keyCode.PAGE_DOWN:case B.ui.keyCode.UP:case B.ui.keyCode.RIGHT:case B.ui.keyCode.DOWN:case B.ui.keyCode.LEFT:O.preventDefault();if(!E._keySliding){E._keySliding=true;B(this).addClass("ui-state-active");P=E._start(O,L);if(P===false){return }}break}N=E.options.step;if(E.options.values&&E.options.values.length){M=K=E.values(L)}else{M=K=E.value()}switch(O.keyCode){case B.ui.keyCode.HOME:K=E._valueMin();break;case B.ui.keyCode.END:K=E._valueMax();break;case B.ui.keyCode.PAGE_UP:K=E._trimAlignValue(M+((E._valueMax()-E._valueMin())/A));break;case B.ui.keyCode.PAGE_DOWN:K=E._trimAlignValue(M-((E._valueMax()-E._valueMin())/A));break;case B.ui.keyCode.UP:case B.ui.keyCode.RIGHT:if(M===E._valueMax()){return }K=E._trimAlignValue(M+N);break;case B.ui.keyCode.DOWN:case B.ui.keyCode.LEFT:if(M===E._valueMin()){return }K=E._trimAlignValue(M-N);break}E._slide(O,L,K)}).keyup(function(L){var K=B(this).data("index.ui-slider-handle");if(E._keySliding){E._keySliding=false;E._stop(L,K);E._change(L,K);B(this).removeClass("ui-state-active")}});this._refreshValue();this._animateOff=false},destroy:function(){this.handles.remove();this.range.remove();this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider");this._mouseDestroy();return this},_mouseCapture:function(F){var G=this.options,J,L,E,H,N,K,M,I,D;if(G.disabled){return false}this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();J={x:F.pageX,y:F.pageY};L=this._normValueFromMouse(J);E=this._valueMax()-this._valueMin()+1;N=this;this.handles.each(function(O){var P=Math.abs(L-N.values(O));if(E>P){E=P;H=B(this);K=O}});if(G.range===true&&this.values(1)===G.min){K+=1;H=B(this.handles[K])}M=this._start(F,K);if(M===false){return false}this._mouseSliding=true;N._handleIndex=K;H.addClass("ui-state-active").focus();I=H.offset();D=!B(F.target).parents().andSelf().is(".ui-slider-handle");this._clickOffset=D?{left:0,top:0}:{left:F.pageX-I.left-(H.width()/2),top:F.pageY-I.top-(H.height()/2)-(parseInt(H.css("borderTopWidth"),10)||0)-(parseInt(H.css("borderBottomWidth"),10)||0)+(parseInt(H.css("marginTop"),10)||0)};if(!this.handles.hasClass("ui-state-hover")){this._slide(F,K,L)}this._animateOff=true;return true},_mouseStart:function(D){return true},_mouseDrag:function(F){var D={x:F.pageX,y:F.pageY},E=this._normValueFromMouse(D);this._slide(F,this._handleIndex,E);return false},_mouseStop:function(D){this.handles.removeClass("ui-state-active");this._mouseSliding=false;this._stop(D,this._handleIndex);this._change(D,this._handleIndex);this._handleIndex=null;this._clickOffset=null;this._animateOff=false;return false},_detectOrientation:function(){this.orientation=(this.options.orientation==="vertical")?"vertical":"horizontal"},_normValueFromMouse:function(E){var D,H,G,F,I;if(this.orientation==="horizontal"){D=this.elementSize.width;H=E.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)}else{D=this.elementSize.height;H=E.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)}G=(H/D);if(G>1){G=1}if(G<0){G=0}if(this.orientation==="vertical"){G=1-G}F=this._valueMax()-this._valueMin();I=this._valueMin()+G*F;return this._trimAlignValue(I)},_start:function(F,E){var D={handle:this.handles[E],value:this.value()};if(this.options.values&&this.options.values.length){D.value=this.values(E);D.values=this.values()}return this._trigger("start",F,D)},_slide:function(H,G,F){var D,E,I;if(this.options.values&&this.options.values.length){D=this.values(G?0:1);if((this.options.values.length===2&&this.options.range===true)&&((G===0&&F>D)||(G===1&&F<D))){F=D}if(F!==this.values(G)){E=this.values();E[G]=F;I=this._trigger("slide",H,{handle:this.handles[G],value:F,values:E});D=this.values(G?0:1);if(I!==false){this.values(G,F,true)}}}else{if(F!==this.value()){I=this._trigger("slide",H,{handle:this.handles[G],value:F});if(I!==false){this.value(F)}}}},_stop:function(F,E){var D={handle:this.handles[E],value:this.value()};if(this.options.values&&this.options.values.length){D.value=this.values(E);D.values=this.values()}this._trigger("stop",F,D)},_change:function(F,E){if(!this._keySliding&&!this._mouseSliding){var D={handle:this.handles[E],value:this.value()};if(this.options.values&&this.options.values.length){D.value=this.values(E);D.values=this.values()}this._trigger("change",F,D)}},value:function(D){if(arguments.length){this.options.value=this._trimAlignValue(D);this._refreshValue();this._change(null,0);return }return this._value()},values:function(E,H){var G,D,F;if(arguments.length>1){this.options.values[E]=this._trimAlignValue(H);this._refreshValue();this._change(null,E);return }if(arguments.length){if(B.isArray(arguments[0])){G=this.options.values;D=arguments[0];for(F=0;F<G.length;F+=1){G[F]=this._trimAlignValue(D[F]);this._change(null,F)}this._refreshValue()}else{if(this.options.values&&this.options.values.length){return this._values(E)}else{return this.value()}}}else{return this._values()}},_setOption:function(E,F){var D,G=0;if(B.isArray(this.options.values)){G=this.options.values.length}B.Widget.prototype._setOption.apply(this,arguments);switch(E){case"disabled":if(F){this.handles.filter(".ui-state-focus").blur();this.handles.removeClass("ui-state-hover");this.handles.propAttr("disabled",true);this.element.addClass("ui-disabled")}else{this.handles.propAttr("disabled",false);this.element.removeClass("ui-disabled")}break;case"orientation":this._detectOrientation();this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation);this._refreshValue();break;case"value":this._animateOff=true;this._refreshValue();this._change(null,0);this._animateOff=false;break;case"values":this._animateOff=true;this._refreshValue();for(D=0;D<G;D+=1){this._change(null,D)}this._animateOff=false;break}},_value:function(){var D=this.options.value;D=this._trimAlignValue(D);return D},_values:function(D){var G,F,E;if(arguments.length){G=this.options.values[D];G=this._trimAlignValue(G);return G}else{F=this.options.values.slice();for(E=0;E<F.length;E+=1){F[E]=this._trimAlignValue(F[E])}return F}},_trimAlignValue:function(G){if(G<=this._valueMin()){return this._valueMin()}if(G>=this._valueMax()){return this._valueMax()}var D=(this.options.step>0)?this.options.step:1,F=(G-this._valueMin())%D,E=G-F;if(Math.abs(F)*2>=D){E+=(F>0)?D:(-D)}return parseFloat(E.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var G=this.options.range,F=this.options,M=this,E=(!this._animateOff)?F.animate:false,H,D={},I,K,J,L;if(this.options.values&&this.options.values.length){this.handles.each(function(O,N){H=(M.values(O)-M._valueMin())/(M._valueMax()-M._valueMin())*100;D[M.orientation==="horizontal"?"left":"bottom"]=H+"%";B(this).stop(1,1)[E?"animate":"css"](D,F.animate);if(M.options.range===true){if(M.orientation==="horizontal"){if(O===0){M.range.stop(1,1)[E?"animate":"css"]({left:H+"%"},F.animate)}if(O===1){M.range[E?"animate":"css"]({width:(H-I)+"%"},{queue:false,duration:F.animate})}}else{if(O===0){M.range.stop(1,1)[E?"animate":"css"]({bottom:(H)+"%"},F.animate)}if(O===1){M.range[E?"animate":"css"]({height:(H-I)+"%"},{queue:false,duration:F.animate})}}}I=H})}else{K=this.value();J=this._valueMin();L=this._valueMax();H=(L!==J)?(K-J)/(L-J)*100:0;D[M.orientation==="horizontal"?"left":"bottom"]=H+"%";this.handle.stop(1,1)[E?"animate":"css"](D,F.animate);if(G==="min"&&this.orientation==="horizontal"){this.range.stop(1,1)[E?"animate":"css"]({width:H+"%"},F.animate)}if(G==="max"&&this.orientation==="horizontal"){this.range[E?"animate":"css"]({width:(100-H)+"%"},{queue:false,duration:F.animate})}if(G==="min"&&this.orientation==="vertical"){this.range.stop(1,1)[E?"animate":"css"]({height:H+"%"},F.animate)}if(G==="max"&&this.orientation==="vertical"){this.range[E?"animate":"css"]({height:(100-H)+"%"},{queue:false,duration:F.animate})}}}});B.extend(B.ui.slider,{version:"1.8.24"})}(jQuery));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-other', location = 'js-vendor/jquery/jquery-ui/jquery.ui.tabs.js' */
/*
 * jQuery UI Tabs 1.8.24
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Tabs
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 */
(function(D,F){var C=0,B=0;function E(){return ++C}function A(){return ++B}D.widget("ui.tabs",{options:{add:null,ajaxOptions:null,cache:false,cookie:null,collapsible:false,disable:null,disabled:[],enable:null,event:"click",fx:null,idPrefix:"ui-tabs-",load:null,panelTemplate:"<div></div>",remove:null,select:null,show:null,spinner:"<em>Loading&#8230;</em>",tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},_create:function(){this._tabify(true)},_setOption:function(G,H){if(G=="selected"){if(this.options.collapsible&&H==this.options.selected){return }this.select(H)}else{this.options[G]=H;this._tabify()}},_tabId:function(G){return G.title&&G.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF-]/g,"")||this.options.idPrefix+E()},_sanitizeSelector:function(G){return G.replace(/:/g,"\\:")},_cookie:function(){var G=this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+A());return D.cookie.apply(null,[G].concat(D.makeArray(arguments)))},_ui:function(H,G){return{tab:H,panel:G,index:this.anchors.index(H)}},_cleanup:function(){this.lis.filter(".ui-state-processing").removeClass("ui-state-processing").find("span:data(label.tabs)").each(function(){var G=D(this);G.html(G.data("label.tabs")).removeData("label.tabs")})},_tabify:function(R){var S=this,I=this.options,H=/^#.+/;this.list=this.element.find("ol,ul").eq(0);this.lis=D(" > li:has(a[href])",this.list);this.anchors=this.lis.map(function(){return D("a",this)[0]});this.panels=D([]);this.anchors.each(function(V,T){var U=D(T).attr("href");var W=U.split("#")[0],X;if(W&&(W===location.toString().split("#")[0]||(X=D("base")[0])&&W===X.href)){U=T.hash;T.href=U}if(H.test(U)){S.panels=S.panels.add(S.element.find(S._sanitizeSelector(U)))}else{if(U&&U!=="#"){D.data(T,"href.tabs",U);D.data(T,"load.tabs",U.replace(/#.*$/,""));var Z=S._tabId(T);T.href="#"+Z;var Y=S.element.find("#"+Z);if(!Y.length){Y=D(I.panelTemplate).attr("id",Z).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").insertAfter(S.panels[V-1]||S.list);Y.data("destroy.tabs",true)}S.panels=S.panels.add(Y)}else{I.disabled.push(V)}}});if(R){this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all");this.list.addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all");this.lis.addClass("ui-state-default ui-corner-top");this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom");if(I.selected===F){if(location.hash){this.anchors.each(function(U,T){if(T.hash==location.hash){I.selected=U;return false}})}if(typeof I.selected!=="number"&&I.cookie){I.selected=parseInt(S._cookie(),10)}if(typeof I.selected!=="number"&&this.lis.filter(".ui-tabs-selected").length){I.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"))}I.selected=I.selected||(this.lis.length?0:-1)}else{if(I.selected===null){I.selected=-1}}I.selected=((I.selected>=0&&this.anchors[I.selected])||I.selected<0)?I.selected:0;I.disabled=D.unique(I.disabled.concat(D.map(this.lis.filter(".ui-state-disabled"),function(U,T){return S.lis.index(U)}))).sort();if(D.inArray(I.selected,I.disabled)!=-1){I.disabled.splice(D.inArray(I.selected,I.disabled),1)}this.panels.addClass("ui-tabs-hide");this.lis.removeClass("ui-tabs-selected ui-state-active");if(I.selected>=0&&this.anchors.length){S.element.find(S._sanitizeSelector(S.anchors[I.selected].hash)).removeClass("ui-tabs-hide");this.lis.eq(I.selected).addClass("ui-tabs-selected ui-state-active");S.element.queue("tabs",function(){S._trigger("show",null,S._ui(S.anchors[I.selected],S.element.find(S._sanitizeSelector(S.anchors[I.selected].hash))[0]))});this.load(I.selected)}D(window).bind("unload",function(){S.lis.add(S.anchors).unbind(".tabs");S.lis=S.anchors=S.panels=null})}else{I.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"))}this.element[I.collapsible?"addClass":"removeClass"]("ui-tabs-collapsible");if(I.cookie){this._cookie(I.selected,I.cookie)}for(var L=0,Q;(Q=this.lis[L]);L++){D(Q)[D.inArray(L,I.disabled)!=-1&&!D(Q).hasClass("ui-tabs-selected")?"addClass":"removeClass"]("ui-state-disabled")}if(I.cache===false){this.anchors.removeData("cache.tabs")}this.lis.add(this.anchors).unbind(".tabs");if(I.event!=="mouseover"){var K=function(U,T){if(T.is(":not(.ui-state-disabled)")){T.addClass("ui-state-"+U)}};var N=function(U,T){T.removeClass("ui-state-"+U)};this.lis.bind("mouseover.tabs",function(){K("hover",D(this))});this.lis.bind("mouseout.tabs",function(){N("hover",D(this))});this.anchors.bind("focus.tabs",function(){K("focus",D(this).closest("li"))});this.anchors.bind("blur.tabs",function(){N("focus",D(this).closest("li"))})}var G,M;if(I.fx){if(D.isArray(I.fx)){G=I.fx[0];M=I.fx[1]}else{G=M=I.fx}}function J(T,U){T.css("display","");if(!D.support.opacity&&U.opacity){T[0].style.removeAttribute("filter")}}var O=M?function(T,U){D(T).closest("li").addClass("ui-tabs-selected ui-state-active");U.hide().removeClass("ui-tabs-hide").animate(M,M.duration||"normal",function(){J(U,M);S._trigger("show",null,S._ui(T,U[0]))})}:function(T,U){D(T).closest("li").addClass("ui-tabs-selected ui-state-active");U.removeClass("ui-tabs-hide");S._trigger("show",null,S._ui(T,U[0]))};var P=G?function(U,T){T.animate(G,G.duration||"normal",function(){S.lis.removeClass("ui-tabs-selected ui-state-active");T.addClass("ui-tabs-hide");J(T,G);S.element.dequeue("tabs")})}:function(U,T,V){S.lis.removeClass("ui-tabs-selected ui-state-active");T.addClass("ui-tabs-hide");S.element.dequeue("tabs")};this.anchors.bind(I.event+".tabs",function(){var U=this,W=D(U).closest("li"),T=S.panels.filter(":not(.ui-tabs-hide)"),V=S.element.find(S._sanitizeSelector(U.hash));if((W.hasClass("ui-tabs-selected")&&!I.collapsible)||W.hasClass("ui-state-disabled")||W.hasClass("ui-state-processing")||S.panels.filter(":animated").length||S._trigger("select",null,S._ui(this,V[0]))===false){this.blur();return false}I.selected=S.anchors.index(this);S.abort();if(I.collapsible){if(W.hasClass("ui-tabs-selected")){I.selected=-1;if(I.cookie){S._cookie(I.selected,I.cookie)}S.element.queue("tabs",function(){P(U,T)}).dequeue("tabs");this.blur();return false}else{if(!T.length){if(I.cookie){S._cookie(I.selected,I.cookie)}S.element.queue("tabs",function(){O(U,V)});S.load(S.anchors.index(this));this.blur();return false}}}if(I.cookie){S._cookie(I.selected,I.cookie)}if(V.length){if(T.length){S.element.queue("tabs",function(){P(U,T)})}S.element.queue("tabs",function(){O(U,V)});S.load(S.anchors.index(this))}else{throw"jQuery UI Tabs: Mismatching fragment identifier."}if(D.browser.msie){this.blur()}});this.anchors.bind("click.tabs",function(){return false})},_getIndex:function(G){if(typeof G=="string"){G=this.anchors.index(this.anchors.filter("[href$='"+G+"']"))}return G},destroy:function(){var G=this.options;this.abort();this.element.unbind(".tabs").removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible").removeData("tabs");this.list.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all");this.anchors.each(function(){var H=D.data(this,"href.tabs");if(H){this.href=H}var I=D(this).unbind(".tabs");D.each(["href","load","cache"],function(J,K){I.removeData(K+".tabs")})});this.lis.unbind(".tabs").add(this.panels).each(function(){if(D.data(this,"destroy.tabs")){D(this).remove()}else{D(this).removeClass(["ui-state-default","ui-corner-top","ui-tabs-selected","ui-state-active","ui-state-hover","ui-state-focus","ui-state-disabled","ui-tabs-panel","ui-widget-content","ui-corner-bottom","ui-tabs-hide"].join(" "))}});if(G.cookie){this._cookie(null,G.cookie)}return this},add:function(J,I,H){if(H===F){H=this.anchors.length}var G=this,L=this.options,N=D(L.tabTemplate.replace(/#\{href\}/g,J).replace(/#\{label\}/g,I)),M=!J.indexOf("#")?J.replace("#",""):this._tabId(D("a",N)[0]);N.addClass("ui-state-default ui-corner-top").data("destroy.tabs",true);var K=G.element.find("#"+M);if(!K.length){K=D(L.panelTemplate).attr("id",M).data("destroy.tabs",true)}K.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide");if(H>=this.lis.length){N.appendTo(this.list);K.appendTo(this.list[0].parentNode)}else{N.insertBefore(this.lis[H]);K.insertBefore(this.panels[H])}L.disabled=D.map(L.disabled,function(P,O){return P>=H?++P:P});this._tabify();if(this.anchors.length==1){L.selected=0;N.addClass("ui-tabs-selected ui-state-active");K.removeClass("ui-tabs-hide");this.element.queue("tabs",function(){G._trigger("show",null,G._ui(G.anchors[0],G.panels[0]))});this.load(0)}this._trigger("add",null,this._ui(this.anchors[H],this.panels[H]));return this},remove:function(G){G=this._getIndex(G);var I=this.options,J=this.lis.eq(G).remove(),H=this.panels.eq(G).remove();if(J.hasClass("ui-tabs-selected")&&this.anchors.length>1){this.select(G+(G+1<this.anchors.length?1:-1))}I.disabled=D.map(D.grep(I.disabled,function(L,K){return L!=G}),function(L,K){return L>=G?--L:L});this._tabify();this._trigger("remove",null,this._ui(J.find("a")[0],H[0]));return this},enable:function(G){G=this._getIndex(G);var H=this.options;if(D.inArray(G,H.disabled)==-1){return }this.lis.eq(G).removeClass("ui-state-disabled");H.disabled=D.grep(H.disabled,function(J,I){return J!=G});this._trigger("enable",null,this._ui(this.anchors[G],this.panels[G]));return this},disable:function(H){H=this._getIndex(H);var G=this,I=this.options;if(H!=I.selected){this.lis.eq(H).addClass("ui-state-disabled");I.disabled.push(H);I.disabled.sort();this._trigger("disable",null,this._ui(this.anchors[H],this.panels[H]))}return this},select:function(G){G=this._getIndex(G);if(G==-1){if(this.options.collapsible&&this.options.selected!=-1){G=this.options.selected}else{return this}}this.anchors.eq(G).trigger(this.options.event+".tabs");return this},load:function(J){J=this._getIndex(J);var H=this,L=this.options,G=this.anchors.eq(J)[0],I=D.data(G,"load.tabs");this.abort();if(!I||this.element.queue("tabs").length!==0&&D.data(G,"cache.tabs")){this.element.dequeue("tabs");return }this.lis.eq(J).addClass("ui-state-processing");if(L.spinner){var K=D("span",G);K.data("label.tabs",K.html()).html(L.spinner)}this.xhr=D.ajax(D.extend({},L.ajaxOptions,{url:I,success:function(N,M){H.element.find(H._sanitizeSelector(G.hash)).html(N);H._cleanup();if(L.cache){D.data(G,"cache.tabs",true)}H._trigger("load",null,H._ui(H.anchors[J],H.panels[J]));try{L.ajaxOptions.success(N,M)}catch(O){}},error:function(O,M,N){H._cleanup();H._trigger("load",null,H._ui(H.anchors[J],H.panels[J]));try{L.ajaxOptions.error(O,M,J,G)}catch(N){}}}));H.element.dequeue("tabs");return this},abort:function(){this.element.queue([]);this.panels.stop(false,true);this.element.queue("tabs",this.element.queue("tabs").splice(-2,2));if(this.xhr){this.xhr.abort();delete this.xhr}this._cleanup();return this},url:function(H,G){this.anchors.eq(H).removeData("cache.tabs").data("load.tabs",G);return this},length:function(){return this.anchors.length}});D.extend(D.ui.tabs,{version:"1.8.24"});D.extend(D.ui.tabs.prototype,{rotation:null,rotate:function(I,K){var G=this,L=this.options;var H=G._rotate||(G._rotate=function(M){clearTimeout(G.rotation);G.rotation=setTimeout(function(){var N=L.selected;G.select(++N<G.anchors.length?N:0)},I);if(M){M.stopPropagation()}});var J=G._unrotate||(G._unrotate=!K?function(M){if(M.clientX){G.rotate(null)}}:function(M){H()});if(I){this.element.bind("tabsshow",H);this.anchors.bind(L.event+".tabs",J);H()}else{clearTimeout(G.rotation);this.element.unbind("tabsshow",H);this.anchors.unbind(L.event+".tabs",J);delete this._rotate;delete this._unrotate}return this}})})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-other', location = 'js-vendor/jquery/jquery-ui/jquery.effects.core.js' */
/*
 * jQuery UI Effects 1.8.24
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/
 */
jQuery.effects||(function(H,E){H.effects={};H.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","borderColor","color","outlineColor"],function(O,N){H.fx.step[N]=function(P){if(!P.colorInit){P.start=M(P.elem,N);P.end=K(P.end);P.colorInit=true}P.elem.style[N]="rgb("+Math.max(Math.min(parseInt((P.pos*(P.end[0]-P.start[0]))+P.start[0],10),255),0)+","+Math.max(Math.min(parseInt((P.pos*(P.end[1]-P.start[1]))+P.start[1],10),255),0)+","+Math.max(Math.min(parseInt((P.pos*(P.end[2]-P.start[2]))+P.start[2],10),255),0)+")"}});function K(O){var N;if(O&&O.constructor==Array&&O.length==3){return O}if(N=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(O)){return[parseInt(N[1],10),parseInt(N[2],10),parseInt(N[3],10)]}if(N=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(O)){return[parseFloat(N[1])*2.55,parseFloat(N[2])*2.55,parseFloat(N[3])*2.55]}if(N=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(O)){return[parseInt(N[1],16),parseInt(N[2],16),parseInt(N[3],16)]}if(N=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(O)){return[parseInt(N[1]+N[1],16),parseInt(N[2]+N[2],16),parseInt(N[3]+N[3],16)]}if(N=/rgba\(0, 0, 0, 0\)/.exec(O)){return A.transparent}return A[H.trim(O).toLowerCase()]}function M(P,N){var O;do{O=(H.curCSS||H.css)(P,N);if(O!=""&&O!="transparent"||H.nodeName(P,"body")){break}N="backgroundColor"}while(P=P.parentNode);return K(O)}var A={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]};var F=["add","remove","toggle"],C={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};function G(){var Q=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,R={},O,P;if(Q&&Q.length&&Q[0]&&Q[Q[0]]){var N=Q.length;while(N--){O=Q[N];if(typeof Q[O]=="string"){P=O.replace(/\-(\w)/g,function(S,T){return T.toUpperCase()});R[P]=Q[O]}}}else{for(O in Q){if(typeof Q[O]==="string"){R[O]=Q[O]}}}return R}function B(O){var N,P;for(N in O){P=O[N];if(P==null||H.isFunction(P)||N in C||(/scrollbar/).test(N)||(!(/color/i).test(N)&&isNaN(parseFloat(P)))){delete O[N]}}return O}function I(N,P){var Q={_:0},O;for(O in P){if(N[O]!=P[O]){Q[O]=P[O]}}return Q}H.effects.animateClass=function(N,O,Q,P){if(H.isFunction(Q)){P=Q;Q=null}return this.queue(function(){var U=H(this),R=U.attr("style")||" ",V=B(G.call(this)),T,S=U.attr("class")||"";H.each(F,function(W,X){if(N[X]){U[X+"Class"](N[X])}});T=B(G.call(this));U.attr("class",S);U.animate(I(V,T),{queue:false,duration:O,easing:Q,complete:function(){H.each(F,function(W,X){if(N[X]){U[X+"Class"](N[X])}});if(typeof U.attr("style")=="object"){U.attr("style").cssText="";U.attr("style").cssText=R}else{U.attr("style",R)}if(P){P.apply(this,arguments)}H.dequeue(this)}})})};H.fn.extend({_addClass:H.fn.addClass,addClass:function(O,N,Q,P){return N?H.effects.animateClass.apply(this,[{add:O},N,Q,P]):this._addClass(O)},_removeClass:H.fn.removeClass,removeClass:function(O,N,Q,P){return N?H.effects.animateClass.apply(this,[{remove:O},N,Q,P]):this._removeClass(O)},_toggleClass:H.fn.toggleClass,toggleClass:function(P,O,N,R,Q){if(typeof O=="boolean"||O===E){if(!N){return this._toggleClass(P,O)}else{return H.effects.animateClass.apply(this,[(O?{add:P}:{remove:P}),N,R,Q])}}else{return H.effects.animateClass.apply(this,[{toggle:P},O,N,R])}},switchClass:function(N,P,O,R,Q){return H.effects.animateClass.apply(this,[{add:P,remove:N},O,R,Q])}});H.extend(H.effects,{version:"1.8.24",save:function(O,P){for(var N=0;N<P.length;N++){if(P[N]!==null){O.data("ec.storage."+P[N],O[0].style[P[N]])}}},restore:function(O,P){for(var N=0;N<P.length;N++){if(P[N]!==null){O.css(P[N],O.data("ec.storage."+P[N]))}}},setMode:function(N,O){if(O=="toggle"){O=N.is(":hidden")?"show":"hide"}return O},getBaseline:function(O,P){var Q,N;switch(O[0]){case"top":Q=0;break;case"middle":Q=0.5;break;case"bottom":Q=1;break;default:Q=O[0]/P.height}switch(O[1]){case"left":N=0;break;case"center":N=0.5;break;case"right":N=1;break;default:N=O[1]/P.width}return{x:N,y:Q}},createWrapper:function(N){if(N.parent().is(".ui-effects-wrapper")){return N.parent()}var O={width:N.outerWidth(true),height:N.outerHeight(true),"float":N.css("float")},R=H("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),Q=document.activeElement;try{Q.id}catch(P){Q=document.body}N.wrap(R);if(N[0]===Q||H.contains(N[0],Q)){H(Q).focus()}R=N.parent();if(N.css("position")=="static"){R.css({position:"relative"});N.css({position:"relative"})}else{H.extend(O,{position:N.css("position"),zIndex:N.css("z-index")});H.each(["top","left","bottom","right"],function(S,T){O[T]=N.css(T);if(isNaN(parseInt(O[T],10))){O[T]="auto"}});N.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})}return R.css(O).show()},removeWrapper:function(N){var O,P=document.activeElement;if(N.parent().is(".ui-effects-wrapper")){O=N.parent().replaceWith(N);if(N[0]===P||H.contains(N[0],P)){H(P).focus()}return O}return N},setTransition:function(O,Q,N,P){P=P||{};H.each(Q,function(S,R){var T=O.cssUnit(R);if(T[0]>0){P[R]=T[0]*N+T[1]}});return P}});function D(O,N,P,Q){if(typeof O=="object"){Q=N;P=null;N=O;O=N.effect}if(H.isFunction(N)){Q=N;P=null;N={}}if(typeof N=="number"||H.fx.speeds[N]){Q=P;P=N;N={}}if(H.isFunction(P)){Q=P;P=null}N=N||{};P=P||N.duration;P=H.fx.off?0:typeof P=="number"?P:P in H.fx.speeds?H.fx.speeds[P]:H.fx.speeds._default;Q=Q||N.complete;return[O,N,P,Q]}function L(N){if(!N||typeof N==="number"||H.fx.speeds[N]){return true}if(typeof N==="string"&&!H.effects[N]){return true}return false}H.fn.extend({effect:function(Q,P,S,U){var O=D.apply(this,arguments),R={options:O[1],duration:O[2],callback:O[3]},T=R.options.mode,N=H.effects[Q];if(H.fx.off||!N){if(T){return this[T](R.duration,R.callback)}else{return this.each(function(){if(R.callback){R.callback.call(this)}})}}return N.call(this,R)},_show:H.fn.show,show:function(O){if(L(O)){return this._show.apply(this,arguments)}else{var N=D.apply(this,arguments);N[1].mode="show";return this.effect.apply(this,N)}},_hide:H.fn.hide,hide:function(O){if(L(O)){return this._hide.apply(this,arguments)}else{var N=D.apply(this,arguments);N[1].mode="hide";return this.effect.apply(this,N)}},__toggle:H.fn.toggle,toggle:function(O){if(L(O)||typeof O==="boolean"||H.isFunction(O)){return this.__toggle.apply(this,arguments)}else{var N=D.apply(this,arguments);N[1].mode="toggle";return this.effect.apply(this,N)}},cssUnit:function(N){var O=this.css(N),P=[];H.each(["em","px","%","pt"],function(Q,R){if(O.indexOf(R)>0){P=[parseFloat(O),R]}});return P}});var J={};H.each(["Quad","Cubic","Quart","Quint","Expo"],function(O,N){J[N]=function(P){return Math.pow(P,O+2)}});H.extend(J,{Sine:function(N){return 1-Math.cos(N*Math.PI/2)},Circ:function(N){return 1-Math.sqrt(1-N*N)},Elastic:function(N){return N===0||N===1?N:-Math.pow(2,8*(N-1))*Math.sin(((N-1)*80-7.5)*Math.PI/15)},Back:function(N){return N*N*(3*N-2)},Bounce:function(P){var N,O=4;while(P<((N=Math.pow(2,--O))-1)/11){}return 1/Math.pow(4,3-O)-7.5625*Math.pow((N*3-2)/22-P,2)}});H.each(J,function(O,N){H.easing["easeIn"+O]=N;H.easing["easeOut"+O]=function(P){return 1-N(1-P)};H.easing["easeInOut"+O]=function(P){return P<0.5?N(P*2)/2:N(P*-2+2)/-2+1}})})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-other', location = 'js-vendor/jquery/jquery-ui/jquery.effects.blind.js' */
/*
 * jQuery UI Effects Blind 1.8.24
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/Blind
 *
 * Depends:
 *	jquery.effects.core.js
 */
(function(A,B){A.effects.blind=function(C){return this.queue(function(){var E=A(this),D=["position","top","bottom","left","right"];var I=A.effects.setMode(E,C.options.mode||"hide");var H=C.options.direction||"vertical";A.effects.save(E,D);E.show();var K=A.effects.createWrapper(E).css({overflow:"hidden"});var F=(H=="vertical")?"height":"width";var J=(H=="vertical")?K.height():K.width();if(I=="show"){K.css(F,0)}var G={};G[F]=I=="show"?J:0;K.animate(G,C.duration,C.options.easing,function(){if(I=="hide"){E.hide()}A.effects.restore(E,D);A.effects.removeWrapper(E);if(C.callback){C.callback.apply(E[0],arguments)}E.dequeue()})})}})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-other', location = 'js-vendor/jquery/jquery-ui/jquery.effects.bounce.js' */
/*
 * jQuery UI Effects Bounce 1.8.24
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/Bounce
 *
 * Depends:
 *	jquery.effects.core.js
 */
(function(A,B){A.effects.bounce=function(C){return this.queue(function(){var F=A(this),L=["position","top","bottom","left","right"];var K=A.effects.setMode(F,C.options.mode||"effect");var N=C.options.direction||"up";var D=C.options.distance||20;var E=C.options.times||5;var H=C.duration||250;if(/show|hide/.test(K)){L.push("opacity")}A.effects.save(F,L);F.show();A.effects.createWrapper(F);var G=(N=="up"||N=="down")?"top":"left";var P=(N=="up"||N=="left")?"pos":"neg";var D=C.options.distance||(G=="top"?F.outerHeight(true)/3:F.outerWidth(true)/3);if(K=="show"){F.css("opacity",0).css(G,P=="pos"?-D:D)}if(K=="hide"){D=D/(E*2)}if(K!="hide"){E--}if(K=="show"){var I={opacity:1};I[G]=(P=="pos"?"+=":"-=")+D;F.animate(I,H/2,C.options.easing);D=D/2;E--}for(var J=0;J<E;J++){var O={},M={};O[G]=(P=="pos"?"-=":"+=")+D;M[G]=(P=="pos"?"+=":"-=")+D;F.animate(O,H/2,C.options.easing).animate(M,H/2,C.options.easing);D=(K=="hide")?D*2:D/2}if(K=="hide"){var I={opacity:0};I[G]=(P=="pos"?"-=":"+=")+D;F.animate(I,H/2,C.options.easing,function(){F.hide();A.effects.restore(F,L);A.effects.removeWrapper(F);if(C.callback){C.callback.apply(this,arguments)}})}else{var O={},M={};O[G]=(P=="pos"?"-=":"+=")+D;M[G]=(P=="pos"?"+=":"-=")+D;F.animate(O,H/2,C.options.easing).animate(M,H/2,C.options.easing,function(){A.effects.restore(F,L);A.effects.removeWrapper(F);if(C.callback){C.callback.apply(this,arguments)}})}F.queue("fx",function(){F.dequeue()});F.dequeue()})}})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-other', location = 'js-vendor/jquery/jquery-ui/jquery.effects.clip.js' */
/*
 * jQuery UI Effects Clip 1.8.24
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/Clip
 *
 * Depends:
 *	jquery.effects.core.js
 */
(function(A,B){A.effects.clip=function(C){return this.queue(function(){var G=A(this),K=["position","top","bottom","left","right","height","width"];var J=A.effects.setMode(G,C.options.mode||"hide");var L=C.options.direction||"vertical";A.effects.save(G,K);G.show();var D=A.effects.createWrapper(G).css({overflow:"hidden"});var F=G[0].tagName=="IMG"?D:G;var H={size:(L=="vertical")?"height":"width",position:(L=="vertical")?"top":"left"};var E=(L=="vertical")?F.height():F.width();if(J=="show"){F.css(H.size,0);F.css(H.position,E/2)}var I={};I[H.size]=J=="show"?E:0;I[H.position]=J=="show"?0:E/2;F.animate(I,{queue:false,duration:C.duration,easing:C.options.easing,complete:function(){if(J=="hide"){G.hide()}A.effects.restore(G,K);A.effects.removeWrapper(G);if(C.callback){C.callback.apply(G[0],arguments)}G.dequeue()}})})}})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-other', location = 'js-vendor/jquery/jquery-ui/jquery.effects.drop.js' */
/*
 * jQuery UI Effects Drop 1.8.24
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/Drop
 *
 * Depends:
 *	jquery.effects.core.js
 */
(function(A,B){A.effects.drop=function(C){return this.queue(function(){var F=A(this),E=["position","top","bottom","left","right","opacity"];var J=A.effects.setMode(F,C.options.mode||"hide");var I=C.options.direction||"left";A.effects.save(F,E);F.show();A.effects.createWrapper(F);var G=(I=="up"||I=="down")?"top":"left";var D=(I=="up"||I=="left")?"pos":"neg";var K=C.options.distance||(G=="top"?F.outerHeight(true)/2:F.outerWidth(true)/2);if(J=="show"){F.css("opacity",0).css(G,D=="pos"?-K:K)}var H={opacity:J=="show"?1:0};H[G]=(J=="show"?(D=="pos"?"+=":"-="):(D=="pos"?"-=":"+="))+K;F.animate(H,{queue:false,duration:C.duration,easing:C.options.easing,complete:function(){if(J=="hide"){F.hide()}A.effects.restore(F,E);A.effects.removeWrapper(F);if(C.callback){C.callback.apply(this,arguments)}F.dequeue()}})})}})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-other', location = 'js-vendor/jquery/jquery-ui/jquery.effects.explode.js' */
/*
 * jQuery UI Effects Explode 1.8.24
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/Explode
 *
 * Depends:
 *	jquery.effects.core.js
 */
(function(A,B){A.effects.explode=function(C){return this.queue(function(){var J=C.options.pieces?Math.round(Math.sqrt(C.options.pieces)):3;var F=C.options.pieces?Math.round(Math.sqrt(C.options.pieces)):3;C.options.mode=C.options.mode=="toggle"?(A(this).is(":visible")?"hide":"show"):C.options.mode;var I=A(this).show().css("visibility","hidden");var K=I.offset();K.top-=parseInt(I.css("marginTop"),10)||0;K.left-=parseInt(I.css("marginLeft"),10)||0;var H=I.outerWidth(true);var D=I.outerHeight(true);for(var G=0;G<J;G++){for(var E=0;E<F;E++){I.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-E*(H/F),top:-G*(D/J)}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:H/F,height:D/J,left:K.left+E*(H/F)+(C.options.mode=="show"?(E-Math.floor(F/2))*(H/F):0),top:K.top+G*(D/J)+(C.options.mode=="show"?(G-Math.floor(J/2))*(D/J):0),opacity:C.options.mode=="show"?0:1}).animate({left:K.left+E*(H/F)+(C.options.mode=="show"?0:(E-Math.floor(F/2))*(H/F)),top:K.top+G*(D/J)+(C.options.mode=="show"?0:(G-Math.floor(J/2))*(D/J)),opacity:C.options.mode=="show"?1:0},C.duration||500)}}setTimeout(function(){C.options.mode=="show"?I.css({visibility:"visible"}):I.css({visibility:"visible"}).hide();if(C.callback){C.callback.apply(I[0])}I.dequeue();A("div.ui-effects-explode").remove()},C.duration||500)})}})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-other', location = 'js-vendor/jquery/jquery-ui/jquery.effects.fade.js' */
/*
 * jQuery UI Effects Fade 1.8.24
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/Fade
 *
 * Depends:
 *	jquery.effects.core.js
 */
(function(A,B){A.effects.fade=function(C){return this.queue(function(){var D=A(this),E=A.effects.setMode(D,C.options.mode||"hide");D.animate({opacity:E},{queue:false,duration:C.duration,easing:C.options.easing,complete:function(){(C.callback&&C.callback.apply(this,arguments));D.dequeue()}})})}})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-other', location = 'js-vendor/jquery/jquery-ui/jquery.effects.fold.js' */
/*
 * jQuery UI Effects Fold 1.8.24
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/Fold
 *
 * Depends:
 *	jquery.effects.core.js
 */
(function(A,B){A.effects.fold=function(C){return this.queue(function(){var F=A(this),L=["position","top","bottom","left","right"];var I=A.effects.setMode(F,C.options.mode||"hide");var P=C.options.size||15;var O=!(!C.options.horizFirst);var H=C.duration?C.duration/2:A.fx.speeds._default/2;A.effects.save(F,L);F.show();var E=A.effects.createWrapper(F).css({overflow:"hidden"});var J=((I=="show")!=O);var G=J?["width","height"]:["height","width"];var D=J?[E.width(),E.height()]:[E.height(),E.width()];var K=/([0-9]+)%/.exec(P);if(K){P=parseInt(K[1],10)/100*D[I=="hide"?0:1]}if(I=="show"){E.css(O?{height:0,width:P}:{height:P,width:0})}var N={},M={};N[G[0]]=I=="show"?D[0]:P;M[G[1]]=I=="show"?D[1]:0;E.animate(N,H,C.options.easing).animate(M,H,C.options.easing,function(){if(I=="hide"){F.hide()}A.effects.restore(F,L);A.effects.removeWrapper(F);if(C.callback){C.callback.apply(F[0],arguments)}F.dequeue()})})}})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-other', location = 'js-vendor/jquery/jquery-ui/jquery.effects.highlight.js' */
/*
 * jQuery UI Effects Highlight 1.8.24
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/Highlight
 *
 * Depends:
 *	jquery.effects.core.js
 */
(function(A,B){A.effects.highlight=function(C){return this.queue(function(){var E=A(this),D=["backgroundImage","backgroundColor","opacity"],G=A.effects.setMode(E,C.options.mode||"show"),F={backgroundColor:E.css("backgroundColor")};if(G=="hide"){F.opacity=0}A.effects.save(E,D);E.show().css({backgroundImage:"none",backgroundColor:C.options.color||"#ffff99"}).animate(F,{queue:false,duration:C.duration,easing:C.options.easing,complete:function(){(G=="hide"&&E.hide());A.effects.restore(E,D);(G=="show"&&!A.support.opacity&&this.style.removeAttribute("filter"));(C.callback&&C.callback.apply(this,arguments));E.dequeue()}})})}})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-other', location = 'js-vendor/jquery/jquery-ui/jquery.effects.pulsate.js' */
/*
 * jQuery UI Effects Pulsate 1.8.24
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/Pulsate
 *
 * Depends:
 *	jquery.effects.core.js
 */
(function(A,B){A.effects.pulsate=function(C){return this.queue(function(){var G=A(this),J=A.effects.setMode(G,C.options.mode||"show"),I=((C.options.times||5)*2)-1,H=C.duration?C.duration/2:A.fx.speeds._default/2,D=G.is(":visible"),E=0;if(!D){G.css("opacity",0).show();E=1}if((J=="hide"&&D)||(J=="show"&&!D)){I--}for(var F=0;F<I;F++){G.animate({opacity:E},H,C.options.easing);E=(E+1)%2}G.animate({opacity:E},H,C.options.easing,function(){if(E==0){G.hide()}(C.callback&&C.callback.apply(this,arguments))});G.queue("fx",function(){G.dequeue()}).dequeue()})}})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-other', location = 'js-vendor/jquery/jquery-ui/jquery.effects.scale.js' */
/*
 * jQuery UI Effects Scale 1.8.24
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/Scale
 *
 * Depends:
 *	jquery.effects.core.js
 */
(function(A,B){A.effects.puff=function(C){return this.queue(function(){var G=A(this),H=A.effects.setMode(G,C.options.mode||"hide"),F=parseInt(C.options.percent,10)||150,E=F/100,D={height:G.height(),width:G.width()};A.extend(C.options,{fade:true,mode:H,percent:H=="hide"?F:100,from:H=="hide"?D:{height:D.height*E,width:D.width*E}});G.effect("scale",C.options,C.duration,C.callback);G.dequeue()})};A.effects.scale=function(C){return this.queue(function(){var H=A(this);var E=A.extend(true,{},C.options);var K=A.effects.setMode(H,C.options.mode||"effect");var I=parseInt(C.options.percent,10)||(parseInt(C.options.percent,10)==0?0:(K=="hide"?0:100));var J=C.options.direction||"both";var D=C.options.origin;if(K!="effect"){E.origin=D||["middle","center"];E.restore=true}var G={height:H.height(),width:H.width()};H.from=C.options.from||(K=="show"?{height:0,width:0}:G);var F={y:J!="horizontal"?(I/100):1,x:J!="vertical"?(I/100):1};H.to={height:G.height*F.y,width:G.width*F.x};if(C.options.fade){if(K=="show"){H.from.opacity=0;H.to.opacity=1}if(K=="hide"){H.from.opacity=1;H.to.opacity=0}}E.from=H.from;E.to=H.to;E.mode=K;H.effect("size",E,C.duration,C.callback);H.dequeue()})};A.effects.size=function(C){return this.queue(function(){var D=A(this),O=["position","top","bottom","left","right","width","height","overflow","opacity"];var N=["position","top","bottom","left","right","overflow","opacity"];var K=["width","height","overflow"];var Q=["fontSize"];var L=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"];var G=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"];var H=A.effects.setMode(D,C.options.mode||"effect");var J=C.options.restore||false;var F=C.options.scale||"both";var P=C.options.origin;var E={height:D.height(),width:D.width()};D.from=C.options.from||E;D.to=C.options.to||E;if(P){var I=A.effects.getBaseline(P,E);D.from.top=(E.height-D.from.height)*I.y;D.from.left=(E.width-D.from.width)*I.x;D.to.top=(E.height-D.to.height)*I.y;D.to.left=(E.width-D.to.width)*I.x}var M={from:{y:D.from.height/E.height,x:D.from.width/E.width},to:{y:D.to.height/E.height,x:D.to.width/E.width}};if(F=="box"||F=="both"){if(M.from.y!=M.to.y){O=O.concat(L);D.from=A.effects.setTransition(D,L,M.from.y,D.from);D.to=A.effects.setTransition(D,L,M.to.y,D.to)}if(M.from.x!=M.to.x){O=O.concat(G);D.from=A.effects.setTransition(D,G,M.from.x,D.from);D.to=A.effects.setTransition(D,G,M.to.x,D.to)}}if(F=="content"||F=="both"){if(M.from.y!=M.to.y){O=O.concat(Q);D.from=A.effects.setTransition(D,Q,M.from.y,D.from);D.to=A.effects.setTransition(D,Q,M.to.y,D.to)}}A.effects.save(D,J?O:N);D.show();A.effects.createWrapper(D);D.css("overflow","hidden").css(D.from);if(F=="content"||F=="both"){L=L.concat(["marginTop","marginBottom"]).concat(Q);G=G.concat(["marginLeft","marginRight"]);K=O.concat(L).concat(G);D.find("*[width]").each(function(){var S=A(this);if(J){A.effects.save(S,K)}var R={height:S.height(),width:S.width()};S.from={height:R.height*M.from.y,width:R.width*M.from.x};S.to={height:R.height*M.to.y,width:R.width*M.to.x};if(M.from.y!=M.to.y){S.from=A.effects.setTransition(S,L,M.from.y,S.from);S.to=A.effects.setTransition(S,L,M.to.y,S.to)}if(M.from.x!=M.to.x){S.from=A.effects.setTransition(S,G,M.from.x,S.from);S.to=A.effects.setTransition(S,G,M.to.x,S.to)}S.css(S.from);S.animate(S.to,C.duration,C.options.easing,function(){if(J){A.effects.restore(S,K)}})})}D.animate(D.to,{queue:false,duration:C.duration,easing:C.options.easing,complete:function(){if(D.to.opacity===0){D.css("opacity",D.from.opacity)}if(H=="hide"){D.hide()}A.effects.restore(D,J?O:N);A.effects.removeWrapper(D);if(C.callback){C.callback.apply(this,arguments)}D.dequeue()}})})}})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-other', location = 'js-vendor/jquery/jquery-ui/jquery.effects.shake.js' */
/*
 * jQuery UI Effects Shake 1.8.24
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/Shake
 *
 * Depends:
 *	jquery.effects.core.js
 */
(function(A,B){A.effects.shake=function(C){return this.queue(function(){var F=A(this),L=["position","top","bottom","left","right"];var K=A.effects.setMode(F,C.options.mode||"effect");var N=C.options.direction||"left";var D=C.options.distance||20;var E=C.options.times||3;var H=C.duration||C.options.duration||140;A.effects.save(F,L);F.show();A.effects.createWrapper(F);var G=(N=="up"||N=="down")?"top":"left";var P=(N=="up"||N=="left")?"pos":"neg";var I={},O={},M={};I[G]=(P=="pos"?"-=":"+=")+D;O[G]=(P=="pos"?"+=":"-=")+D*2;M[G]=(P=="pos"?"-=":"+=")+D*2;F.animate(I,H,C.options.easing);for(var J=1;J<E;J++){F.animate(O,H,C.options.easing).animate(M,H,C.options.easing)}F.animate(O,H,C.options.easing).animate(I,H/2,C.options.easing,function(){A.effects.restore(F,L);A.effects.removeWrapper(F);if(C.callback){C.callback.apply(this,arguments)}});F.queue("fx",function(){F.dequeue()});F.dequeue()})}})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-other', location = 'js-vendor/jquery/jquery-ui/jquery.effects.slide.js' */
/*
 * jQuery UI Effects Slide 1.8.24
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/Slide
 *
 * Depends:
 *	jquery.effects.core.js
 */
(function(A,B){A.effects.slide=function(C){return this.queue(function(){var F=A(this),E=["position","top","bottom","left","right"];var J=A.effects.setMode(F,C.options.mode||"show");var I=C.options.direction||"left";A.effects.save(F,E);F.show();A.effects.createWrapper(F).css({overflow:"hidden"});var G=(I=="up"||I=="down")?"top":"left";var D=(I=="up"||I=="left")?"pos":"neg";var K=C.options.distance||(G=="top"?F.outerHeight(true):F.outerWidth(true));if(J=="show"){F.css(G,D=="pos"?(isNaN(K)?"-"+K:-K):K)}var H={};H[G]=(J=="show"?(D=="pos"?"+=":"-="):(D=="pos"?"-=":"+="))+K;F.animate(H,{queue:false,duration:C.duration,easing:C.options.easing,complete:function(){if(J=="hide"){F.hide()}A.effects.restore(F,E);A.effects.removeWrapper(F);if(C.callback){C.callback.apply(this,arguments)}F.dequeue()}})})}})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-other', location = 'js-vendor/jquery/jquery-ui/jquery.effects.transfer.js' */
/*
 * jQuery UI Effects Transfer 1.8.24
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/Transfer
 *
 * Depends:
 *	jquery.effects.core.js
 */
(function(A,B){A.effects.transfer=function(C){return this.queue(function(){var G=A(this),I=A(C.options.to),F=I.offset(),H={top:F.top,left:F.left,height:I.innerHeight(),width:I.innerWidth()},E=G.offset(),D=A('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(C.options.className).css({top:E.top,left:E.left,height:G.innerHeight(),width:G.innerWidth(),position:"absolute"}).animate(H,C.duration,C.options.easing,function(){D.remove();(C.callback&&C.callback.apply(G[0],arguments));G.dequeue()})})}})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-other', location = 'js-vendor/jquery/jquery.ui.menu.js' */
(function(A){A.widget("ui.menu",{_create:function(){var B=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(C){if(!A(C.target).closest(".ui-menu-item a").length){return }C.preventDefault();B.select(C)});this.refresh()},refresh:function(){var C=this;var B=this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem");B.children("a").addClass("ui-corner-all").attr("tabindex",-1).mouseenter(function(D){C.activate(D,A(this).parent())}).mouseleave(function(){C.deactivate()})},activate:function(E,D){this.deactivate();if(this.hasScroll()){var F=D.offset().top-this.element.offset().top,B=this.element.attr("scrollTop"),C=this.element.height();if(F<0){this.element.attr("scrollTop",B+F)}else{if(F>C){this.element.attr("scrollTop",B+F-C+D.height())}}}this.active=D.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end();this._trigger("focus",E,{item:D})},deactivate:function(){if(!this.active){return }this.active.children("a").removeClass("ui-state-hover").removeAttr("id");this._trigger("blur");this.active=null},next:function(B){this.move("next",".ui-menu-item:first",B)},previous:function(B){this.move("prev",".ui-menu-item:last",B)},first:function(){return this.active&&!this.active.prev().length},last:function(){return this.active&&!this.active.next().length},move:function(E,D,C){if(!this.active){this.activate(C,this.element.children(D));return }var B=this.active[E+"All"](".ui-menu-item").eq(0);if(B.length){this.activate(C,B)}else{this.activate(C,this.element.children(D))}},nextPage:function(D){if(this.hasScroll()){if(!this.active||this.last()){this.activate(D,this.element.children(":first"));return }var E=this.active.offset().top,C=this.element.height(),B=this.element.children("li").filter(function(){var F=A(this).offset().top-E-C+A(this).height();return F<10&&F>-10});if(!B.length){B=this.element.children(":last")}this.activate(D,B)}else{this.activate(D,this.element.children(!this.active||this.last()?":first":":last"))}},previousPage:function(C){if(this.hasScroll()){if(!this.active||this.first()){this.activate(C,this.element.children(":last"));return }var D=this.active.offset().top,B=this.element.height();result=this.element.children("li").filter(function(){var E=A(this).offset().top-D+B-A(this).height();return E<10&&E>-10});if(!result.length){result=this.element.children(":first")}this.activate(C,result)}else{this.activate(C,this.element.children(!this.active||this.first()?":last":":first"))}},hasScroll:function(){return this.element.height()<this.element.attr("scrollHeight")},select:function(B){this._trigger("selected",B,{item:this.active})}})}(jQuery));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.drag-and-drop:support', location = 'js/drag-and-drop-support.js' */
var DragnDropSupport=function(){var a,b;try{a=new XMLHttpRequest,b=!(!a.sendAsBinary&&!a.upload)&&!(jQuery.browser.mozilla&&-1<jQuery.browser.version.indexOf("1.9.1"))}catch(c){b=!1}return{hasXhrSupport:b}}();
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.drag-and-drop:support', location = 'js/drag-and-drop-utils.js' */
AJS.DragAndDrop={};
(function(c){var f,g=/^\w+:\/\/[^\/?#]+/.exec(location.href);AJS.DragAndDropUtils={defaultMimeType:"application/octet-stream",hasXhrOrGearsSupport:function(){return AJS.DragAndDropUtils.hasXhrSupport||AJS.DragAndDropUtils.isGearsInstalledNoPrompt()},hasXhrSupport:DragnDropSupport.hasXhrSupport,base:g,init:function(a){a&&a(DragnDropSupport.hasXhrSupport)},bindDragEnter:function(a,b){if(a.addEventListener)(b=this.isFireFox35OrLater()?this.firefox35DragEnterAndOverCallbackWrapper(b):b)&&a.addEventListener("dragenter",
b,!1);else if(a.attachEvent){var d=this.ieDragEnterAndDragOverCallbackWrapper(b);a.attachEvent("ondragenter",d);c(window).unload(function(){a.detachEvent("ondragenter",d)})}},bindDragOver:function(a,b){if(a.addEventListener)this.isFireFox35OrLater()?b=this.firefox35DragEnterAndOverCallbackWrapper(b):c.browser.safari&&(b=this.safariDragOverCallbackWrapper(b)),b&&a.addEventListener("dragover",b,!1);else if(a.attachEvent){var d=this.ieDragEnterAndDragOverCallbackWrapper(b);a.attachEvent("ondragover",
d);c(window).unload(function(){a.detachEvent("ondragover",d)})}},bindDragLeave:function(a,b){b&&(c.browser.safari||this.isFireFox35OrLater()||tinymce.isIE11?a.addEventListener("dragleave",b,!1):c.browser.msie?(a.attachEvent("ondragleave",b),c(window).unload(function(){a.detachEvent("ondragleave",b)})):c.browser.mozilla&&a.addEventListener("dragexit",b,!1))},bindDrop:function(a,b){if(c.browser.mozilla){var d=this.isFireFox35OrLater()?"drop":"dragdrop";a.addEventListener(d,this.mozillaDropCallbackWrapper(b),
!1)}else if(c.browser.msie){if(b){var e=function(a){b(a);AJS.DragAndDropUtils.stopPropagation(a)};a.attachEvent("ondrop",e);c(window).unload(function(){a.detachEvent("ondrop",e)})}}else c.browser.safari&&b&&a.addEventListener("drop",function(a){b(a);AJS.DragAndDropUtils.stopPropagation(a)},!1)},niceSize:function(a){for(var b=" B; kB; MB; GB; TB; PB; EB; ZB; YB".split(";"),c=0,e=b.length;c<e;c++)if(a<Math.pow(2,10*(c+1)))return(!c?a:(a/Math.pow(2,10*c)).toFixed(2))+b[c];return(a/Math.pow(2,10*(c+1))).toFixed(2)+
b[b.length-1]},ieDragEnterAndDragOverCallbackWrapper:function(a){return function(b){if(b=b||window.event)a&&a(b),c.browser.msie&&(b.returnValue=!1)}},safariDragOverCallbackWrapper:function(a){return function(b){if((b=b||window.event)&&"file"!=b.target.type)a&&a(b),-1!=c.inArray("public.file-url",b.dataTransfer.types)&&b.preventDefault()}},mozillaDropCallbackWrapper:function(a){return function(b){b&&(a&&a(b),b.preventDefault(),AJS.DragAndDropUtils.isFireFox35OrLater()?AJS.DragAndDropUtils.firefox35FileDataInEvent(b)&&
b.stopPropagation():b.stopPropagation())}},firefox35DragEnterAndOverCallbackWrapper:function(a){return function(b){b&&(a&&a(b),AJS.DragAndDropUtils.firefox35FileDataInEvent(b)&&b.preventDefault())}},firefox35FileDataInEvent:function(a){return-1!=c.inArray("application/x-moz-file",a.dataTransfer.types)},stopPropagation:function(a){if(a=a||window.event)a.stopPropagation?a.stopPropagation():a.cancelBubble=!0},preventDefault:function(a){if(a=a||window.event)a.preventDefault?a.preventDefault():a.returnValue=
!1},isGearsInstalledNoPrompt:function(){try{return!!window.google&&!!google.gears&&!!google.gears.factory.create("beta.desktop")}catch(a){return!1}},isGearsInstalledWithPermissions:function(a){c.extend({},{returnUrl:location.href},a);if(AJS.DragAndDropUtils.isGearsInstalledNoPrompt())return google.gears.factory.getPermission("Confluence",Confluence.getContextPath()+"/images/logo/confluence_64.png","Allow Confluence to use Google Gears to perform drag-and-drop file uploads?");AJS.log("Gears installation prompt is disabled, since it has been discontinued");
return!1},isFireFox35OrLater:function(){return!this.isFireFox30()&&-1!=c.browser.version.indexOf("1.9.")},isFireFox30:function(){return-1!=c.browser.version.indexOf("1.9.0")},isIE9:function(){if(AJS.$.browser.msie){var a=parseFloat(AJS.$.browser.version);if(9<=a&&10>a)return!0}return!1},enableDropZoneOn:function(a,b){if(!a)throw Error("Cannot enable drop zone on invalid container. Received: "+a);b=b||AJS.DragAndDrop.defaultDropHandler;this.bindDragEnter(a);this.bindDragOver(a);this.bindDragLeave(a);
this.bindDrop(a,b)},getFilesFromDropEvent:function(a){if(AJS.DragAndDropUtils.isFolderDropEvent(a))return AJS.DragAndDropUtils.displayMessageDialog("No files were found in the items dragged onto this window. It is possible that you may have dragged a folder - this is not supported. \u003cp\u003e\u003cstrong\u003eNote to Mac OSX users:\u003c/strong\u003e Some items may appear as files but are actually folders and are therefore not supported. Examples include iWork and Keynote files.\u003c/p\u003e"),[];var a=this.getDesktopInstance().getDragData(a,"application/x-gears-files"),b;try{b=a&&a.files}catch(c){AJS.log("Error retrieving file data from drop event")}return b||[]},isFolderDropEvent:function(a){try{return 0==(this.getDesktopInstance().getDragData(a,"application/x-gears-files")||{}).count}catch(b){AJS.log("Error retrieving file data from drop event")}},
displayMessageDialog:function(a){var b=new AJS.Dialog(600,200,"drag-and-drop-message-dialog");b.addHeader("Drag & Drop").addPanel("Panel 1","<div>"+a+"</div>").addButton("Done",function(){b.remove()});b.show()},getDesktopInstance:function(){f||(f=google.gears.factory.create("beta.desktop"));return f}}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.drag-and-drop:support', location = 'js/default-drop-handler.js' */
AJS.toInit(function(h){var b;if(AJS.DragAndDropUtils.hasXhrSupport){var i=function(){var b=h(".aui-blanket:visible");return b.length&&"hidden"!==b.css("visibility")&&!h("#drag-and-drop-progress-dialog:visible").length},j=function(){for(;d.files.length;)d.removeFile(d.files[0])},f=document.getElementById("fileuploadShim");f||(f=document.createElement("div"),f.setAttribute("id","fileuploadShim"),document.body.appendChild(f));var d=new plupload.Uploader({runtimes:"html5",dragdrop:!0,drop_element:h("body")[0],
browse_button:f.getAttribute("id"),multipart:!1,stop_propagation:!0,max_file_size:+AJS.Meta.get("global-settings-attachment-max-size")}),k=function(){b=AJS.Editor&&AJS.Editor.isVisible()&&AJS.Confluence.EditorUploadProgressDialog?AJS.Confluence.EditorUploadProgressDialog:new AJS.DragAndDropProgressDialog};b=null;d.init();AJS.DragAndDrop.defaultDropHandler=null;d.bind("FilesAdded",function(g,a){function e(a,c){!b&&k();for(var g=0;g<c.length;g++){var e=c[g];e.status!==plupload.FAILED&&b.render({workId:e.id,
status:e.status,file:e})}d.start()}if(i())j();else if(AJS.Editor&&AJS.Editor.isVisible()){var c=_.reject(a,function(a){return a.status===plupload.FAILED});Confluence.Uploader&&Confluence.Uploader.trigger("FilesAdded",c)}else AJS.UploadUtils.filterFiles(g,a,e)});d.bind("BeforeUpload",function(d,a){if(!AJS.Editor||!AJS.Editor.isVisible()){var e=AJS.DragAndDropUtils.base+Confluence.getContextPath()+"/plugins/drag-and-drop/upload.action",c=AJS.Meta.get("page-id"),c=c!=0?{pageId:c}:{draftId:AJS.Meta.get("draft-id")},
f=a.name.substr(a.name.lastIndexOf(".")+1);c.filename=a.name;c.size=a.size;c.mimeType=plupload.mimeTypes[f.toLowerCase()]||AJS.DragAndDropUtils.defaultMimeType;c.spaceKey=AJS.Meta.get("space-key");c.atl_token=AJS.Meta.get("atl-token");d.settings.url=plupload.buildUrl(e,c);b.cancelListeners.push(function(a,c){var e=d.getFile(c.workId);e&&d.removeFile(e);b.renderInfo(c.workId,"File was manually removed from the queue.")});b.show()}});d.bind("UploadProgress",function(d,a){b.renderUpdateToBytesUploaded(a.id,
a.loaded,a.size);b.hideCloseButton()});d.bind("FileUploaded",function(d,a,e){e.status===0?b.renderError(a.id,"The server is not responding. Please check that it is running."):b.renderComplete(a.id)});d.bind("Error",function(d,a){if(i())j();else if(AJS.Editor&&AJS.Editor.isVisible())Confluence.Uploader&&Confluence.Uploader.trigger("Error",a);else{var e,c;if(a.response){try{e=AJS.$.parseJSON(a.response);c=e.actionErrors[0]}catch(f){c=f.name==="SyntaxError"?"Invalid response received from the server.":
a.message}b.renderError(a.file.id,c);AJS.trigger("analyticsEvent",{name:"confluence.default-drop.upload.error.server-unknown"})}else{c=a.message;if(a.code===plupload.FILE_SIZE_ERROR){c=AJS.format("is too big to upload. Files must be less than {0}.",AJS.DragAndDropUtils.niceSize(AJS.Meta.get("global-settings-attachment-max-size")));AJS.trigger("analyticsEvent",{name:"confluence.default-drop.upload.error.file-size"})}else if(a.code===AJS.UploadUtils.ErrorCode.FILE_IS_A_FOLDER_ERROR){c="might be a folder or an unsupported file type.";
AJS.trigger("analyticsEvent",{name:"confluence.default-drop.upload.error.file-type"})}!b&&k();b.render({workId:a.file.id,status:a.file.status,file:a.file,errorMessage:c});if(!b.isVisible()){b.show();b.showCloseButton()}}}});d.bind("UploadComplete",function(){if(!d.total.queued&&b){b.showCloseButton();b.hasErrors()||setTimeout(function(){b.hide();b.clearRenderOutput();window.location.reload()},1E3)}})}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.drag-and-drop:support', location = 'js/observable-array-list.js' */
AJS.ObservableArrayList=function(){this._data=[];this._pushObservers=[]};
AJS.ObservableArrayList.prototype={push:function(a){this._data.push(a);this._notifyPushObservers(a)},length:function(){return this._data.length},remove:function(a,b){return this._remove.call(this._data,a,b)},_remove:function(a,b){var c=this.slice((b||a)+1||this.length);this.length=0>a?this.length+a:a;return this.push.apply(this,c)},shift:function(){return this._data.shift()},removeByPredicate:function(a){for(var b=[],c=this._data.length,d=0;d<c;d++)a(this._data[d])||b.push(this._data[d]);this._data=
b;return c-this._data.length},addPushObserver:function(a){if(AJS.$.isFunction(a))this._pushObservers.push(a);else throw Error("Attempting to add an observer that is not a function: "+a);},_notifyPushObservers:function(a){for(var b=0,c=this._pushObservers.length;b<c;b++)this._pushObservers[b](a)}};
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.drag-and-drop:support', location = 'js/upload-progress-dialog.js' */
(function(c){AJS.DragAndDropProgressDialog=function(a){var b=this,d={header:"Attach files",width:600,height:400};this._options=c.extend({},d,a);this.id="drag-and-drop-progress-dialog";this._dialog=new AJS.Dialog(this._options.width,this._options.height,this.id);this._dialog.addHeader(this._options.header).addPanel("Panel 1",AJS.DragAndDrop.Templates.uploadFileStatusContainer()).addButton("Done",function(){b.hide();b.clearRenderOutput()},"all-file-uploads-complete");
this._dialog.getCurrentPanel().setPadding(0);this._$closeButton=this.find(".all-file-uploads-complete");c(document).keydown(function(a){if(27==a.which)return b._$closeButton.prop("disabled")||(b.hide(),b.clearRenderOutput()),AJS.stopEvent(a)});this._$container=this.find("#upload-statuses");this._workIdsOfFilesInProgress=[];this.cancelListeners=[];this.onShowListeners=[];this._hidden=!0;this.hasErrorMessage=!1};AJS.DragAndDropProgressDialog.prototype={show:function(){this._hidden&&(this._dialog.show(),
this._hidden=!1,c.each(this.onShowListeners,function(a,b){b()}));this.hideCloseButton()},hide:function(){this._hidden||(this._dialog.hide(),this._hidden=!0)},isVisible:function(){return!this._hidden},_getProgressElementId:function(a){return"file-"+a+"-progress"},render:function(a){this._workIdsOfFilesInProgress.push(a.workId);this._$container.append(AJS.DragAndDrop.Templates.fileStatus({filename:a.file.name,progressElementId:this._getProgressElementId(a.workId),workId:a.workId,showCancel:a.status==
plupload.QUEUED}));c("#"+this._getProgressElementId(a.workId)).progressbar({value:0});a.status==plupload.QUEUED?c("#file-upload-cancel-"+a.workId).click(function(b){return function(d){c.each(b,function(b,c){c(d,a)})}}(this.cancelListeners)):this.renderError(a.workId,a.errorMessage)},renderError:function(a,b){if(-1==c.inArray(a,this._workIdsOfFilesInProgress))throw Error("No file status found with id: "+a);var d=c("#file-status-block-"+a),e=AJS.escapeEntities(d.attr("data-filename"));d.html(aui.message.warning({content:b,
titleContent:e}));this.hasErrorMessage=!0},renderInfo:function(a,b){if(-1==c.inArray(a,this._workIdsOfFilesInProgress))throw Error("No file status found with id: "+a);var d=c("#file-status-block-"+a),e=AJS.escapeEntities(d.attr("data-filename"));d.html(aui.message.info({content:b,titleContent:e}));this.hasErrorMessage=!0},hasErrors:function(){return this.hasErrorMessage},renderUpdateToBytesUploaded:function(a,b,d){if(-1==c.inArray(a,this._workIdsOfFilesInProgress))throw Error("No file status found with id: "+
a);var e=AJS.DragAndDropUtils.niceSize(b),f=c("#file-"+a+"-uploaded");f.length?f.text(e):c("#file-upload-progress-text-"+a).html(AJS.DragAndDrop.Templates.uploadFileStatusProgressMessage({fileId:a,uploadedSizeNice:e,totalSizeNice:AJS.DragAndDropUtils.niceSize(d)}));b=Math.round(100*b/d);c("#"+this._getProgressElementId(a)).progressbar("option","value",b)},renderComplete:function(a){if(-1==c.inArray(a,this._workIdsOfFilesInProgress))throw Error("No file status found with id: "+a);c("#cancel-or-success-placeholder-"+
a).html(AJS.DragAndDrop.Templates.uploadFileStatusSuccessIcon())},renderCancelled:function(a){if(-1==c.inArray(a,this._workIdsOfFilesInProgress))throw Error("No file status found with id: "+a);var b=c("#"+this._getProgressElementId(a));0==b.progressbar("option","value")&&b.progressbar("option","value",100);b.progressbar("disable");c("#file-upload-progress-text-"+a).html("Cancelled.");c("#cancel-or-success-placeholder-"+a).hide()},clearRenderOutput:function(){this.showCloseButton();
this._$container.empty();this._workIdsOfFilesInProgress=[];this.hasErrorMessage=!1},hideCloseButton:function(){this._$closeButton.hide()},showCloseButton:function(){this._$closeButton.show()},find:function(a){return this._dialog.getCurPanel().page.body.parent().find(a)}}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.drag-and-drop:support', location = 'templates/drag-and-drop.soy' */
// This file was automatically generated from drag-and-drop.soy.
// Please don't edit this file by hand.

if (typeof AJS == 'undefined') { var AJS = {}; }
if (typeof AJS.DragAndDrop == 'undefined') { AJS.DragAndDrop = {}; }
if (typeof AJS.DragAndDrop.Templates == 'undefined') { AJS.DragAndDrop.Templates = {}; }


AJS.DragAndDrop.Templates.fileStatus = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<li id="file-status-block-', soy.$$escapeHtml(opt_data.workId), '" data-filename="', soy.$$escapeHtml(opt_data.filename), '"><label>', soy.$$escapeHtml(opt_data.filename), '</label><div class="file-upload-progress-block"><div class="aui-progressbar" id="', soy.$$escapeHtml(opt_data.progressElementId), '"><div id="file-upload-progress-text-', soy.$$escapeHtml(opt_data.workId), '" class="file-upload-progress-text">', soy.$$escapeHtml("Waiting..."), '</div></div>', (opt_data.showCancel) ? '<div id="cancel-or-success-placeholder-' + soy.$$escapeHtml(opt_data.workId) + '" class="cancel-or-success-placeholder ui-state-default"><span id="file-upload-cancel-' + soy.$$escapeHtml(opt_data.workId) + '" class="aui-icon aui-icon-small aui-iconfont-remove" title="' + soy.$$escapeHtml("Cancel Upload") + '">' + soy.$$escapeHtml("Cancel") + '</span></div>' : '', '</div></li>');
  return opt_sb ? '' : output.toString();
};


AJS.DragAndDrop.Templates.uploadFileStatusContainer = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<ul id="upload-statuses"></ul>');
  return opt_sb ? '' : output.toString();
};


AJS.DragAndDrop.Templates.uploadFileStatusSuccessIcon = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<span class=\'aui-icon aui-icon-small aui-iconfont-success\'></span>');
  return opt_sb ? '' : output.toString();
};


AJS.DragAndDrop.Templates.uploadFileStatusProgressMessage = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<span id="file-', soy.$$escapeHtml(opt_data.fileId), '-uploaded">', soy.$$escapeHtml(opt_data.uploadedSizeNice), '</span> ', soy.$$escapeHtml("of"), ' ', soy.$$escapeHtml(opt_data.totalSizeNice));
  return opt_sb ? '' : output.toString();
};


AJS.DragAndDrop.Templates.dropZone = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="attachments-drop-zone"><div class="drop-zone-image"></div><div class="drop-zone-text">', soy.$$escapeHtml("Drop files here to attach them"), '</div></div>');
  return opt_sb ? '' : output.toString();
};


AJS.DragAndDrop.Templates.dragOverlay = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div id="dragOverlay"><div class="overlay-blanket"></div><div class="overlay-center"><p>', soy.$$escapeHtml("Drop files to insert them into the page"), '</p></div><span class="overlay-baseline"></span><div class="overlay-drop-zone"></div></div>');
  return opt_sb ? '' : output.toString();
};


AJS.DragAndDrop.Templates.dragAndDropTip = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="attach-tip-discovery"><span class="img"></span><div class="text"><strong>', soy.$$escapeHtml("Tip:"), ' </strong><p>', soy.$$escapeHtml("Drop files straight into your page to insert them directly."), '</p><div><a class="close-tip" href="#">', soy.$$escapeHtml("Ok, got it!"), '</a></div></div></div>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.drag-and-drop:support', location = 'js/upload-utils.js' */
(function(){AJS.UploadUtils={ErrorCode:{FILE_IS_A_FOLDER_ERROR:-602},filterFiles:function(d,a,g){for(var e=[],b=0,c=0;c<a.length;c++)if(4096>=a[c].nativeFile.size){var f=new FileReader;f.onload=function(){b++;e.push(this.currentFile);b===a.length&&g(d,e)};f.onerror=function(){d.removeFile(this.currentFile);d.trigger("Error",{code:AJS.UploadUtils.ErrorCode.FILE_IS_A_FOLDER_ERROR,message:"File is a folder",file:this.currentFile});b++;b===a.length&&g(d,e)};f.currentFile=a[c];f.readAsText(a[c].nativeFile)}else b++,
e.push(a[c]),b===a.length&&g(d,e)}}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.drag-and-drop:drag-and-drop-for-view-content', location = 'js/view-content-client.js' */
AJS.toInit(function(a){AJS.DragAndDropUtils.init(function(b){var c=a("body")[0];!b&&!AJS.DragAndDropUtils.isIE9()&&AJS.DragAndDropUtils.enableDropZoneOn(c)})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-comments:models', location = '/model/like.js' */
define("confluence/ic/model/like",["backbone"],function(b){var a=b.Model.extend({initialize:function(c,d){if(!c){throw new Error("Attributes is required")}if(!c.username){throw new Error("username is a required attribute")}}});return a});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-comments:models', location = '/model/likes.js' */
define("confluence/ic/model/likes",["ajs","underscore","backbone","confluence/ic/model/like","confluence/ic/likes/likes-manager"],function(b,d,f,c,a){var e=f.Collection.extend({model:c,url:function(){return b.contextPath()+"/rest/likes/1.0/content/"+this.contentId+"/likes"},initialize:function(h,g){d.bindAll(this,"_handleSaveSuccess","_handleDestroySuccess");g=g||{};if(g.contentId===undefined){throw new Error("content ID is required.")}this.contentId=g.contentId;if(a.getLikes(g.contentId)){this.reset(a.getLikes(g.contentId))}this.listenTo(f,"ic:likes-received",this.updateLikes);this.bind("add",function(i){i.save(null,{success:this._handleSaveSuccess,error:this._handleError})});this.bind("remove",function(i){i.id="";i.destroy({success:this._handleDestroySuccess,error:this._handleError})});this.currentUserName=b.Meta.get("remote-user")},updateLikes:function(){this.reset(a.getLikes(this.contentId))},addUser:function(g){return this.add({username:g})},removeUser:function(g){return this.remove(this.getUserByName(g))},isLikedByUser:function(g){return !!this.getUserByName(g)},getUserByName:function(g){return this.findWhere({username:g})},toggleLike:function(){if(this.isLikedByUser(this.currentUserName)){this.removeUser(this.currentUserName)}else{this.addUser(this.currentUserName)}},_handleSaveSuccess:function(g){a.add(this.contentId,this.currentUserName)},_handleDestroySuccess:function(g){a.remove(this.contentId,this.currentUserName)},_handleError:function(g){f.trigger("ic:error","Likes cannot be updated.")}});return e});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-comments:models', location = '/model/comment.js' */
define("confluence/ic/model/comment",["jquery","underscore","backbone","ajs","confluence/ic/util/utils","confluence/ic/model/reply-collection"],function(d,b,g,a,c,f){var e=g.Model.extend({defaults:{authorDisplayName:c.getAuthorDisplayName(),authorUserName:a.Meta.get("remote-user"),authorAvatarUrl:a.contextPath()+a.Meta.get("current-user-avatar-url"),body:"",originalSelection:"",containerId:a.Meta.get("latest-page-id"),parentCommentId:"0",lastFetchTime:d("meta[name=confluence-request-time]").attr("content"),hasDeletePermission:true,hasEditPermission:true,hasResolvePermission:true,resolveProperties:{resolved:false,resolvedTime:0},serializedHighlights:"",deleted:false},urlRoot:a.contextPath()+"/rest/inlinecomments/1.0/comments",initialize:function(h){h=h||{};this._setHighlights(h.markerRef);var i=this;this.replies=new f();this.replies.url=function(){return i.url()+"/replies"};if(c.getDarkFeatures().DANGLING_COMMENT&&a.Meta.get("page-id")===a.Meta.get("latest-page-id")){if(this.isDangling()&&!this.isResolved()){this.resolve(true,{wait:true,dangling:true,success:b.bind(function(){g.trigger("ic:open:dangled",this)},this),error:b.bind(function(){g.trigger("ic:resolve:dangled:failed",this)},this)})}}},validate:function(){if(!this.get("body")){return true}},resolve:function(h,i){i=i||{};this.save({},b.extend(i,{url:this.urlRoot+"/"+this.get("id")+"/resolve/"+h+"/dangling/"+(i.dangling===true)}))},isResolved:function(){return this.get("resolveProperties").resolved},isDangling:function(){return this.highlight===undefined},isDeleted:function(){return this.get("deleted")},_setHighlights:function(i){var h;if(i!==undefined){h=d("#content .wiki-content:first").find('.inline-comment-marker[data-ref="'+i+'"]')}else{h=d(".ic-current-selection")}if(h.length!==0){this.highlights=h;this.highlight=h.first()}else{this.highlights=undefined;this.highlight=undefined}},destroy:function(i){i=i?b.clone(i):{};var h=this;var k=i.success;var j=function(n,m){var l=m.error;m.error=function(o){if(l){l(n,o,m)}n.trigger("error",n,o,m)}};i.success=function(l){if(k){k(h,l,i)}};j(this,i);return this.sync("delete",this,i)}});return e});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-comments:models', location = '/model/comment-collection.js' */
define("confluence/ic/model/comment-collection",["jquery","backbone","ajs","underscore","confluence/ic/model/comment"],function(d,f,a,b,e){var c=f.Collection.extend({model:e,initialize:function(){this.listenTo(this,"sort",this._removeCachedMarkers)},url:function(){var h=a.contextPath();var g=a.Meta.get("page-id");return h+"/rest/inlinecomments/1.0/comments?containerId="+g},getResolvedCount:function(){return this.getResolvedComments().length},getUnresolveCount:function(){return this.reject(function(g){return g.isResolved()===true&&g.isDeleted()===false}).length},getResolvedComments:function(){return this.filter(function(g){return g.isResolved()===true&&g.isDeleted()===false})},getResolvedCommentsDesc:function(){return b.sortBy(this.getResolvedComments(),function(g){return 0-g.get("resolveProperties").resolvedTime})},getNextCommentOnPage:function(){return this._getCommentAtRelativeOffset(1)},getPrevCommentOnPage:function(){return this._getCommentAtRelativeOffset(-1)},_getCommentAtRelativeOffset:function(j){var k=this.getCommentsOnPage();var g=this.findWhere({active:true});if(g===undefined||k.length<=1){return null}var i=b.pluck(k,"id");var h=b.indexOf(i,g.get("id"));return k[(h+j+k.length)%k.length]},getCommentsOnPage:function(){return this.filter(function(g){return((g.isResolved()===false)&&!g.isDangling()&&(g.isDeleted()===false))||g.get("active")===true})},getCommentsOnPageCount:function(){return this.getCommentsOnPage().length},getActiveIndexWithinPageComments:function(){var h=b.pluck(this.getCommentsOnPage(),"id");var g=this.findWhere({active:true});if(g===undefined){return null}var i=g.get("id");return b.indexOf(h,i)},comparator:function(h,g){if(this.markers===undefined){this.markers=d("#content .wiki-content:first").find(".inline-comment-marker")}if(h.highlight===undefined){return 1}if(g.highlight===undefined){return -1}return this.markers.index(h.highlight)-this.markers.index(g.highlight)},_removeCachedMarkers:function(){this.markers=undefined}});return c});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-comments:models', location = '/model/reply.js' */
define("confluence/ic/model/reply",["jquery","backbone","ajs","confluence/ic/util/utils",],function(d,e,b,c){var a=e.Model.extend({defaults:{authorDisplayName:c.getAuthorDisplayName(),authorUserName:b.Meta.get("remote-user"),authorAvatarUrl:b.contextPath()+b.Meta.get("current-user-avatar-url"),body:"",commentId:"0",hasDeletePermission:true,hasEditPermission:!!b.Meta.get("remote-user")},urlRoot:function(){return b.contextPath()+"/rest/inlinecomments/1.0/comments/"+this.get("commentId")+"/replies"},sync:function(h,g,f){f=f||{};if(h==="create"){f.url=this.urlRoot()+"?containerId="+b.Meta.get("latest-page-id")}return e.sync.call(this,h,g,f)},validate:function(){if(!this.get("body")){return true}}});return a});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-comments:models', location = '/model/reply-collection.js' */
define("confluence/ic/model/reply-collection",["backbone","confluence/ic/model/reply"],function(c,a){var b=c.Collection.extend({model:a});return b});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-comments:highlight-view', location = 'view/highlight-text/highlight-text.js' */
define("confluence/ic/view/highlight-text",["backbone","ajs","confluence/ic/util/text-highlighter","confluence/ic/util/utils"],function(e,b,c,d){var a=e.View.extend({el:"#content .wiki-content:first",events:{"click .inline-comment-marker.valid":"commentClick"},initialize:function(){if(this.collection){this.listenTo(this.collection,"sync remove change:deleted",this.render);this.listenTo(this.collection,"change:active",this.setActive)}this.listenTo(e,"ic:view ic:overlap ic:sidebar-hidden",this.clearSelection);this.listenTo(e,"ic:persist",this.persistComment);this.listenTo(e,"ic:delete",this.render);b.bind("qr:add-new-highlight",this._addQuickReloadMarker)},render:function(){this.inlineLinks=[];this.$(".inline-comment-marker").removeClass("valid");this.collection.each(function(f){if(!f.isResolved()&&!f.get("deleted")&&f.highlights){f.highlights.addClass("valid");this._pushToInlineLinks(f.highlights)}},this);this._setupLinkDialog()},_pushToInlineLinks:function(g){var f=this;g.each(function(){var h=d.getInlineLinks(this);h.each(function(){if($(this).attr("href")){f.inlineLinks.push($(this))}})})},_setupLinkDialog:function(){var f={width:200,onHover:true,noBind:true,calculatePositions:this._calculatePositions,hideDelay:1000};$(this.inlineLinks).each(function(){var g=this;b.InlineDialog(g,"inline-comment-link",function(i,h,j){i.addClass("inline-comment-link");i.html(Confluence.Templates.IC.highlightTextLink({link:g.attr("href")}));j();return false},f)})},_calculatePositions:function(f,g,h){return{displayAbove:true,popupCss:{top:g.target.offset().top-f.height()-10,left:h.x-(f.width()/2)},arrowCss:{top:f.height(),left:f.width()/2-4}}},setActive:function(g){this.$(".inline-comment-marker").removeClass("active");var f=this.$('.inline-comment-marker[data-ref="'+g.get("markerRef")+'"]');if(g.get("active")&&f.length){f.addClass("active")}},commentClick:function(f){f.preventDefault();var g=this.$(f.currentTarget);if(!g.hasClass("active")){this.displayComment(g)}else{e.trigger("ic:hide-sidebar",f,true)}},displayComment:function(i,h){var g=i.data("ref");var f=this.collection.findWhere({markerRef:g});e.trigger("ic:view",f,h)},clearSelection:function(){(new c()).removeHighlight()},persistComment:function(f){this.$(".ic-current-selection").removeClass("ic-current-selection").addClass("inline-comment-marker").attr("data-ref",f.get("markerRef"));this.collection.add(f)},_addQuickReloadMarker:function(j,h,f){var k=h.comment;var g=this.$('.inline-comment-marker[data-ref="'+k.dataRef+'"]');if(g.length){f.resolve(h);return}var i=(new c()).deserializeHighlights(k.serializedHighlights,k.dataRef);if(i){f.resolve(h)}else{f.reject(h)}}});return a});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-comments:highlight-view', location = 'view/highlight-text/highlight-text.soy' */
// This file was automatically generated from highlight-text.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.IC == 'undefined') { Confluence.Templates.IC = {}; }


Confluence.Templates.IC.highlightTextLink = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  aui.icons.icon({useIconFont: true, size: 'small', icon: 'link'}, output);
  output.append('<a href=\'', soy.$$escapeHtml(opt_data.link), '\'>', soy.$$escapeHtml(opt_data.link), '</a>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-comments:confirm-dialog-view', location = 'view/confirm-dialog/confirm-dialog.soy' */
// This file was automatically generated from confirm-dialog.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.IC == 'undefined') { Confluence.Templates.IC = {}; }


Confluence.Templates.IC.confirmDialog = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<strong class="ic-confirm-label">', soy.$$escapeHtml(opt_data.label), '</strong><div class="ic-confirm-message">', soy.$$escapeHtml(opt_data.message), '</div><div class="ic-confirm-buttons">');
  aui.buttons.button({text: "Delete", tagName: 'button', extraClasses: ['ic-action-delete-confirm', 'aui-button-compact']}, output);
  aui.buttons.button({text: "Cancel", tagName: 'button', type: 'link', extraClasses: ['ic-action-cancel-confirm', 'aui-button-compact']}, output);
  output.append('</div>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-comments:confirm-dialog-view', location = 'view/confirm-dialog/confirm-dialog.js' */
define("confluence/ic/view/confirm-dialog",["backbone","underscore","jquery"],function(d,b,c){var a=d.View.extend({tagName:"div",className:"ic-confirm-container",initialize:function(e){this.$menuEl=e.$menuEl;this.$bodyEl=e.$bodyEl;this.$menuEl.addClass("ic-action-menu-active");this.render();b.bindAll(this,"clickOutside");this.$bodyEl.on("click",this.clickOutside)},events:{"click .ic-action-cancel-confirm":"cancel","click .ic-action-delete-confirm":"confirm"},template:Confluence.Templates.IC.confirmDialog,render:function(){this.$el.html(this.template(this.model.toJSON()));return this},clickOutside:function(f){if(c.contains(this.el,f.target)||this.el===f.target){return}this.cancel()},cancel:function(){this.destroy()},confirm:function(){this.trigger("ic:confirm");this.destroy()},destroy:function(){this.$bodyEl.off("click",this.clickOutside);this.$menuEl.removeClass("ic-action-menu-active");this.remove()}});return a});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-comments:common-resource', location = 'common/common.soy' */
// This file was automatically generated from common.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.IC == 'undefined') { Confluence.Templates.IC = {}; }


Confluence.Templates.IC.authorAvatar = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (opt_data.authorUserName == '') {
    aui.avatar.avatar({size: opt_data.size, avatarImageUrl: opt_data.authorAvatarUrl, extraClasses: 'ic-author-avatar'}, output);
  } else {
    output.append('<a data-username="', soy.$$escapeHtml(opt_data.authorUserName), '" href="', soy.$$escapeHtml(""), '/display/~', soy.$$escapeHtml(opt_data.authorUserName), '" title="" data-user-hover-bound="true">');
    aui.avatar.avatar({size: opt_data.size, avatarImageUrl: opt_data.authorAvatarUrl, extraClasses: 'ic-author-avatar'}, output);
    output.append('</a>');
  }
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.IC.sidebarHeading = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="ic-sidebar-heading"><div id="ic-nav-container">');
  if (opt_data.createComment == true) {
    Confluence.Templates.IC.navigation({disabled: true, showIndex: false}, output);
  }
  output.append('</div><div class="ic-right-toolbar">');
  if (opt_data.showMenu) {
    Confluence.Templates.IC.commentMenu(opt_data, output);
  }
  aui.buttons.button({type: 'text', extraClasses: 'aui-button-text ic-action-hide', iconType: 'aui', iconClass: 'aui-icon-small aui-iconfont-close-dialog', text: '', extraAttributes: {'title': "Close sidebar (])"}}, output);
  output.append('</div></div><div class="ic-error"></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.IC.commentHeader = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="ic-author">');
  Confluence.Templates.IC.authorAvatar({authorUserName: opt_data.authorUserName, authorAvatarUrl: opt_data.authorAvatarUrl, size: 'small'}, output);
  Confluence.Templates.User.usernameLink({canView: opt_data.authorUserName != '', username: opt_data.authorUserName, fullName: opt_data.authorDisplayName}, output);
  output.append('</div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.IC.timeLink = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<a class="ic-date-link" title="', soy.$$escapeHtml(opt_data.time), '" href="', soy.$$escapeHtml("" + opt_data.commentUrl), '"><span>', soy.$$escapeHtml(opt_data.time), '</span></a>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-comments:library', location = 'lib/jquery.textHighlighter.js' */
(function(f,e,b,g){var a={ELEMENT_NODE:1,TEXT_NODE:3};var d={name:"textHighlighter"};function c(i,h){this.context=i;this.$context=f(i);this.options=f.extend({},f[d.name].defaults,h);this.init()}c.prototype={init:function(){this.$context.addClass(this.options.contextClass);this.bindEvents()},destroy:function(){this.unbindEvents();this.$context.removeClass(this.options.contextClass);this.$context.removeData(d.name)},bindEvents:function(){},unbindEvents:function(){},highlightHandler:function(i){var h=i.data.self;h.doHighlight()},doHighlight:function(k){var i=k||this.getCurrentRange();if(!i||i.collapsed){return}var j=i.toString();var l="";if(this.options.onBeforeHighlight(i)==true){var m=f.textHighlighter.createWrapper(this.options);var h=this.highlightRange(i,m);l=this.normalizeHighlights(h);this.options.onAfterHighlight(l,j)}this.removeAllRanges();return l},getCurrentRange:function(){var i=this.getCurrentSelection();var h;if(i.rangeCount>0){h=i.getRangeAt(0)}return h},removeAllRanges:function(){var h=this.getCurrentSelection();h.removeAllRanges()},getCurrentSelection:function(){var i=this.getCurrentWindow();var h;if(i.getSelection){h=i.getSelection()}else{if(f("iframe").length){f("iframe",top.document).each(function(){if(this.contentWindow===i){h=rangy.getIframeSelection(this);return false}})}else{h=rangy.getSelection()}}return h},getCurrentWindow:function(){var h=this.getCurrentDocument();if(h.defaultView){return h.defaultView}else{return h.parentWindow}},getCurrentDocument:function(){return this.context.ownerDocument?this.context.ownerDocument:this.context},highlightRange:function(o,q){if(o.collapsed){return}var s=["SCRIPT","STYLE","SELECT","BUTTON","OBJECT","APPLET"];var l=o.startContainer;var t=o.endContainer;var n=o.commonAncestorContainer;var r=true;if(o.endOffset==0){while(!t.previousSibling&&t.parentNode!=n){t=t.parentNode}t=t.previousSibling}else{if(t.nodeType==a.TEXT_NODE){if(o.endOffset<t.nodeValue.length){t.splitText(o.endOffset)}}else{if(o.endOffset>0){t=t.childNodes.item(o.endOffset-1)}}}if(l.nodeType==a.TEXT_NODE){if(o.startOffset==l.nodeValue.length){r=false}else{if(o.startOffset>0){l=l.splitText(o.startOffset);if(t==l.previousSibling){t=l}}}}else{if(o.startOffset<l.childNodes.length){l=l.childNodes.item(o.startOffset)}else{l=l.nextSibling}}var m=false;var k=l;var p=[];do{if(r&&k.nodeType==a.TEXT_NODE){if(/\S/.test(k.nodeValue)){var i=q.clone(true).get(0);var h=k.parentNode;if(f.contains(this.context,h)||h===this.context){var j=f(k).wrap(i).parent().get(0);p.push(j)}}r=false}if(k==t&&(!t.hasChildNodes()||!r)){m=true}if(f.inArray(k.tagName,s)!=-1){r=false}if(r&&k.hasChildNodes()){k=k.firstChild}else{if(k.nextSibling!=null){k=k.nextSibling;r=true}else{k=k.parentNode;r=false}}}while(!m);return p},normalizeHighlights:function(i){this.flattenNestedHighlights(i);this.mergeSiblingHighlights(i);var h=f.map(i,function(j){if(typeof j.parentElement!="undefined"){return j.parentElement!=null?j:null}else{return j.parentNode!=null?j:null}});return h},flattenNestedHighlights:function(i){var h=this;f.each(i,function(k){var o=f(this);var l=o.parent();var n=l.prev();var m=l.next();if(h.isHighlight(l)){if(l.css("background-color")!=o.css("background-color")){if(h.isHighlight(n)&&!o.get(0).previousSibling&&n.css("background-color")!=l.css("background-color")&&n.css("background-color")==o.css("background-color")){o.insertAfter(n)}if(h.isHighlight(m)&&!o.get(0).nextSibling&&m.css("background-color")!=l.css("background-color")&&m.css("background-color")==o.css("background-color")){o.insertBefore(m)}if(l.is(":empty")){l.remove()}}else{var j=b.createTextNode(l.text());l.empty();l.append(j);f(i[k]).remove()}}})},mergeSiblingHighlights:function(i){var h=this;function j(l,k){return k&&k.nodeType==a.ELEMENT_NODE&&f(l).css("background-color")==f(k).css("background-color")&&f(k).hasClass(h.options.highlightedClass)?true:false}f.each(i,function(){var k=this;var n=k.previousSibling;var m=k.nextSibling;if(j(k,n)){var l=f(n).text()+f(k).text();f(k).text(l);f(n).remove()}if(j(k,m)){var l=f(k).text()+f(m).text();f(k).text(l);f(m).remove()}})},setColor:function(h){this.options.color=h},getColor:function(){return this.options.color},removeHighlights:function(j){var h=(j!==g?j:this.context);var l=function(n){return f(n).contents().unwrap().get(0)};var k=function(p){var o=p.previousSibling;var n=p.nextSibling;if(o&&o.nodeType==a.TEXT_NODE){p.nodeValue=o.nodeValue+p.nodeValue;o.parentNode.removeChild(o)}if(n&&n.nodeType==a.TEXT_NODE){p.nodeValue=p.nodeValue+n.nodeValue;n.parentNode.removeChild(n)}};var i=this;var m=this.getAllHighlights(h,true);m.each(function(){if(i.options.onRemoveHighlight(this)==true){var n=l(this)}})},getAllHighlights:function(i,j){var h="."+this.options.highlightedClass;var k=f(i).find(h);if(j==true&&f(i).hasClass(this.options.highlightedClass)){k=k.add(i)}return k},isHighlight:function(h){return h.hasClass(this.options.highlightedClass)},serializeHighlights:function(l){var k=l||this.getAllHighlights(this.context);var i=this.context;var m=[];var h=this;var j=function(o,q){var p=[];do{var n=f.inArray(o,o.parentNode.childNodes);p.unshift(n);o=o.parentNode}while(o!==q);return p};k.each(function(p,o){var r=0;var q=o.firstChild.length;var n=j(o,i);var s=f(o).clone().empty().get(0).outerHTML;if(o.previousSibling&&o.previousSibling.nodeType===a.TEXT_NODE){r=o.previousSibling.length}m.push([f(o).text(),n.join(":"),r,q])});return JSON.stringify(m)},deserializeHighlights:function(i,o){try{var n=JSON.parse(i)}catch(m){throw"Can't parse serialized highlights: "+m}var l=[];var h=this;var j=function(w){var v=w[0];var y=w[1].split(":");var z=w[2];var t=w[3];var u=y.pop();var x=null;var r=h.context;while((x=y.shift())!==g){r=r.childNodes[x]}if(r.childNodes[u-1]&&r.childNodes[u-1].nodeType===a.TEXT_NODE){u-=1}var s=r.childNodes[u];var p=s.splitText(z);p.splitText(t);if(p.nextSibling&&p.nextSibling.nodeValue==""){p.parentNode.removeChild(p.nextSibling)}if(p.previousSibling&&p.previousSibling.nodeValue==""){p.parentNode.removeChild(p.previousSibling)}if(v!==p.nodeValue){throw"Different text"}var q=f(p).wrap(o).parent().get(0);l.push(q)};var k=true;f.each(n,function(q,p){try{j(p)}catch(r){console&&console.warn&&console.warn("Can't deserialize "+q+"-th descriptor. Cause: "+r);k=false;return true}});return k&&l}};f.fn.getHighlighter=function(){return this.data(d.name)};f.fn[d.name]=function(h){return this.each(function(){if(!f.data(this,d.name)){f.data(this,d.name,new c(this,h))}})};f.textHighlighter={createWrapper:function(h){return f("<span></span>").css("backgroundColor",h.color).addClass(h.highlightedClass)},defaults:{color:"#ffff7b",highlightedClass:"highlighted",contextClass:"highlighter-context",onRemoveHighlight:function(){return true},onBeforeHighlight:function(){return true},onAfterHighlight:function(){}}}})(jQuery,window,document);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-comments:library', location = 'lib/WeakMap.js' */
if(typeof WeakMap==="undefined"){(function(){var b=Object.defineProperty;var a=Date.now()%1000000000;var c=function(){this.name="__st"+(Math.random()*1000000000>>>0)+(a+++"__")};c.prototype={set:function(d,f){var e=d[this.name];if(e&&e[0]===d){e[1]=f}else{b(d,this.name,{value:[d,f],writable:true})}},get:function(d){var e;return(e=d[this.name])&&e[0]===d?e[1]:undefined},"delete":function(e){var f=e[this.name];if(!f){return false}var d=f[0]===e;f[0]=f[1]=undefined;return d},has:function(d){var e=d[this.name];if(!e){return false}return e[0]===d}};window.WeakMap=c})()};
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-comments:library', location = 'lib/MutationObserver.js' */
(function(r){var w=new WeakMap();var t=window.msSetImmediate;if(!t){var j=[];var o=String(Math.random());window.addEventListener("message",function(z){if(z.data===o){var y=j;j=[];y.forEach(function(A){A()})}});t=function(y){j.push(y);window.postMessage(o,"*")}}var g=false;var i=[];function d(y){i.push(y);if(!g){g=true;t(k)}}function x(y){return window.ShadowDOMPolyfill&&window.ShadowDOMPolyfill.wrapIfNeeded(y)||y}function k(){g=false;var z=i;i=[];z.sort(function(B,A){return B.uid_-A.uid_});var y=false;z.forEach(function(B){var A=B.takeRecords();q(B);if(A.length){B.callback_(A,B);y=true}});if(y){k()}}function q(y){y.nodes_.forEach(function(z){var A=w.get(z);if(!A){return}A.forEach(function(B){if(B.observer===y){B.removeTransientObservers()}})})}function f(E,F){for(var C=E;C;C=C.parentNode){var D=w.get(C);if(D){for(var B=0;B<D.length;B++){var A=D[B];var z=A.options;if(C!==E&&!z.subtree){continue}var y=F(z);if(y){A.enqueue(y)}}}}}var s=0;function n(y){this.callback_=y;this.nodes_=[];this.records_=[];this.uid_=++s}n.prototype={observe:function(C,z){C=x(C);if(!z.childList&&!z.attributes&&!z.characterData||z.attributeOldValue&&!z.attributes||z.attributeFilter&&z.attributeFilter.length&&!z.attributes||z.characterDataOldValue&&!z.characterData){throw new SyntaxError()}var B=w.get(C);if(!B){w.set(C,B=[])}var y;for(var A=0;A<B.length;A++){if(B[A].observer===this){y=B[A];y.removeListeners();y.options=z;break}}if(!y){y=new u(this,C,z);B.push(y);this.nodes_.push(C)}y.addListeners()},disconnect:function(){this.nodes_.forEach(function(A){var B=w.get(A);for(var z=0;z<B.length;z++){var y=B[z];if(y.observer===this){y.removeListeners();B.splice(z,1);break}}},this);this.records_=[]},takeRecords:function(){var y=this.records_;this.records_=[];return y}};function h(y,z){this.type=y;this.target=z;this.addedNodes=[];this.removedNodes=[];this.previousSibling=null;this.nextSibling=null;this.attributeName=null;this.attributeNamespace=null;this.oldValue=null}function p(z){var y=new h(z.type,z.target);y.addedNodes=z.addedNodes.slice();y.removedNodes=z.removedNodes.slice();y.previousSibling=z.previousSibling;y.nextSibling=z.nextSibling;y.attributeName=z.attributeName;y.attributeNamespace=z.attributeNamespace;y.oldValue=z.oldValue;return y}var c,e;function a(y,z){return c=new h(y,z)}function b(y){if(e){return e}e=p(c);e.oldValue=y;return e}function m(){c=e=undefined}function v(y){return y===e||y===c}function l(z,y){if(z===y){return z}if(e&&v(z)){return e}return null}function u(y,A,z){this.observer=y;this.target=A;this.options=z;this.transientObservedNodes=[]}u.prototype={enqueue:function(y){var z=this.observer.records_;var A=z.length;if(z.length>0){var B=z[A-1];var C=l(B,y);if(C){z[A-1]=C;return}}else{d(this.observer)}z[A]=y},addListeners:function(){this.addListeners_(this.target)},addListeners_:function(z){var y=this.options;if(y.attributes){z.addEventListener("DOMAttrModified",this,true)}if(y.characterData){z.addEventListener("DOMCharacterDataModified",this,true)}if(y.childList){z.addEventListener("DOMNodeInserted",this,true)}if(y.childList||y.subtree){z.addEventListener("DOMNodeRemoved",this,true)}},removeListeners:function(){this.removeListeners_(this.target)},removeListeners_:function(z){var y=this.options;if(y.attributes){z.removeEventListener("DOMAttrModified",this,true)}if(y.characterData){z.removeEventListener("DOMCharacterDataModified",this,true)}if(y.childList){z.removeEventListener("DOMNodeInserted",this,true)}if(y.childList||y.subtree){z.removeEventListener("DOMNodeRemoved",this,true)}},addTransientObserver:function(y){if(y===this.target){return}this.addListeners_(y);this.transientObservedNodes.push(y);var z=w.get(y);if(!z){w.set(y,z=[])}z.push(this)},removeTransientObservers:function(){var y=this.transientObservedNodes;this.transientObservedNodes=[];y.forEach(function(A){this.removeListeners_(A);var B=w.get(A);for(var z=0;z<B.length;z++){if(B[z]===this){B.splice(z,1);break}}},this)},handleEvent:function(G){G.stopImmediatePropagation();switch(G.type){case"DOMAttrModified":var A=G.attrName;var B=G.relatedNode.namespaceURI;var H=G.target;var E=new a("attributes",H);E.attributeName=A;E.attributeNamespace=B;var z=G.attrChange===MutationEvent.ADDITION?null:G.prevValue;f(H,function(J){if(!J.attributes){return}if(J.attributeFilter&&J.attributeFilter.length&&J.attributeFilter.indexOf(A)===-1&&J.attributeFilter.indexOf(B)===-1){return}if(J.attributeOldValue){return b(z)}return E});break;case"DOMCharacterDataModified":var H=G.target;var E=a("characterData",H);var z=G.prevValue;f(H,function(J){if(!J.characterData){return}if(J.characterDataOldValue){return b(z)}return E});break;case"DOMNodeRemoved":this.addTransientObserver(G.target);case"DOMNodeInserted":var H=G.relatedNode;var I=G.target;var F,C;if(G.type==="DOMNodeInserted"){F=[I];C=[]}else{F=[];C=[I]}var y=I.previousSibling;var D=I.nextSibling;var E=a("childList",H);E.addedNodes=F;E.removedNodes=C;E.previousSibling=y;E.nextSibling=D;f(H,function(J){if(!J.childList){return}return E})}m()}};r.JsMutationObserver=n;if(!r.MutationObserver){r.MutationObserver=n}})(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-comments:util-resource', location = 'util/utils.js' */
define("confluence/ic/util/utils",["jquery","underscore","ajs","backbone","exports"],function(w,R,u,x,F){var m={INLINE_COMMENTS:u.DarkFeatures.isEnabled("confluence-inline-comments"),RESOLVED_INLINE_COMMENTS:u.DarkFeatures.isEnabled("confluence-inline-comments-resolved"),RICH_TEXT_EDITOR:u.DarkFeatures.isEnabled("confluence-inline-comments-rich-editor"),DANGLING_COMMENT:u.DarkFeatures.isEnabled("confluence-inline-comments-dangling-comment")},t=["dateautocomplete","confluencemacrobrowser","propertypanel","jiraconnector","dfe"],n=["autoresize","confluenceleavecomment"],r=["code"];var a,C,q;function O(){return R.clone(m)}function N(){return R.clone(t)}function j(){return R.clone(n)}function d(U,T){var W;if(!U||!T){return}var S=w(U.containingElement);if(!S.is(".inline-comment-marker.valid")){S=w("<div/>").append(U.html).find(".inline-comment-marker.valid")}if(S.length>0&&f(S)){var V=S.first().data("ref");W=T.findWhere({markerRef:V});return W}}function f(S){return S.filter(function(){return w(this).text().length>0}).length>0}function h(S){return u.contextPath()+"/pages/viewpage.action?pageId="+u.Meta.get("latest-page-id")+"&focusedCommentId="+S+"#comment-"+S}function s(Y,X,S){var V=X.match(/(focusedCommentId|replyToComment)=(\d+)/);if(V==null){return}var U=V[1]==="replyToComment";var W=parseInt(V[2],10);var T=Y.findWhere({id:W});if(T!=null){o(Y,T,S,U)}else{w.ajax({url:u.contextPath()+"/rest/inlinecomments/1.0/comments/replies/"+W+"/commentId"}).done(function(Z){T=Y.findWhere({id:Z});o(Y,T,S,U)})}}function o(V,U,S,T){if(U!=null){if(U.isResolved()){new S({collection:V,focusCommentId:U.get("id")}).render()}else{if(!U.isDangling()){x.trigger("ic:view",U,"permalink",{isReplyComment:T})}}}}function K(){if(u.Meta.get("current-user-avatar-url")){return u.contextPath()+u.Meta.get("current-user-avatar-url")}return u.Meta.get("static-resource-url-prefix")+"/images/icons/profilepics/anonymous.png"}function P(){return u.Meta.get("user-display-name")||u.Meta.get("current-user-fullname")}function b(U){if(typeof U.selectionStart==="number"){var S=U.value.length;U.selectionStart=S;U.selectionEnd=S}else{if(typeof U.createTextRange!=null){U.focus();var T=U.createTextRange();T.collapse(false);T.select()}}}function L(S){b(S);window.setTimeout(function(){b(S)},1)}function E(W,V){var U="webkitAnimationEnd oanimationend msAnimationEnd animationend";var T=W.$wikiContent;var S=w.Deferred();if(V){var X=w(".inline-comment-marker.active");T.addClass("ic-fade-in-animation");T.one(U,function(){w(this).removeClass("ic-fade-in-animation")});W.$el.addClass("ic-slide-in");W.$el.one(U,function(){w(this).removeClass("ic-slide-in");X.addClass("ic-highlight-pulse");X.one(U,function(){X.removeClass("ic-highlight-pulse")})});S.resolve()}else{T.bind(U,function(Y){if(Y.originalEvent.animationName=="ic-fade-out-animation"){W.$wikiContent.removeClass("ic-fade-out-animation");W.$wikiContent.css("opacity","0.5")}else{if(Y.originalEvent.animationName=="ic-fade-in-animation"){W.$wikiContent.css("opacity","1");W.$wikiContent.removeClass("ic-fade-in-animation");W.$wikiContent.unbind(U)}}});T.addClass("ic-fade-out-animation");W.$el.addClass("ic-slide-out");W.$el.one(U,function(){W.$el.removeClass("ic-slide-out");W._emptySidebar();y().css("padding-right","0");T.addClass("ic-fade-in-animation");T.css("position","static");S.resolve()})}return S.promise()}function k(S){var T=w(S).closest("a");if(!T.length){T=w(S).find("a")}return T}function A(S){S.each(function(){var T=k(this);T.length&&T.off("mousemove")})}function Q(){return document.body.style.animation!==undefined||document.body.style.webkitAnimation!==undefined}function c(T){var S=T.parents(".expand-content.expand-hidden");S.each(function(U){w(this).siblings(".expand-control").click()})}function v(T){var S=u.Rte&&u.Rte.getEditor();if(T===true){if(M()&&S&&S.isDirty()){return confirm("Your comment will be lost.")}}else{if(S&&S.isDirty()){return confirm("Your comment will be lost.")}}return true}function M(){return !!w(".ic-sidebar #wysiwygTextarea_ifr").length}function G(){return u.Meta.get("use-keyboard-shortcuts")&&Confluence.KeyboardShortcuts&&Confluence.KeyboardShortcuts.enabled}function p(S){S.$("button.ic-action-hide").tooltip({gravity:"se"});S.$("#ic-nav-next").tooltip({gravity:"s"});S.$("#ic-nav-previous").tooltip({gravity:"s"})}function B(W){if(J()){W.css("padding-bottom","20px");return}var U=W.height();var V=W.offset().top;var T=V+U;var X=this.getPageContainer().offset().top;var S=T-X;this.getPageContainer().css({"min-height":S+"px"})}function z(W){W=W.closest(".ic-display-comment-view");var V=this;var T=w(".confluence-embedded-image, .confluence-embedded-file img",W);var U=T.length;var S=0;if(U>0){T.off("load").one("load",function(){if(++S===U){V.recalculateContentHeight(W)}}).each(function(){if(this.complete){w(this).load()}})}}function J(){if(q===undefined){q=!!D().length}return q}function y(){if(a===undefined){a=w("#content")}return a}function D(){if(C===undefined){C=w("#splitter-content")}return C}function g(S,T){if(T&&!T.is(":visible")){return}if(S){if(this.isDocTheme()){this.getSplitterContent().scrollTop(T.offset().top-S)}else{window.scrollTo(0,T.offset().top-S)}}}function e(T){var S=w.Deferred();w.ajax({url:u.contextPath()+"/rest/api/content/"+T+"?expand=body.editor",type:"GET",dataType:"json",contentType:"application/json; charset=utf-8"}).then(function(U){var V=U.body.editor.value;S.resolve(V)}).fail(function(U,W,V){S.reject(U,W,V)});return S.promise()}function I(S){var T=S.closest(".conf-macro");return(T.data("hasbody")===false||S.find('.conf-macro[data-hasbody="false"]').length>0)||r.indexOf(T.data("macro-name"))!=-1}function i(S){return S.closest(".user-mention").length>0||S.find(".user-mention").length>0}function l(S){return S.closest("a[href^='/']:not('.user-mention')").length>0||S.find("a[href^='/']:not('.user-mention')").length>0}function H(){var S={isDefault:true,path:u.Meta.get("static-resource-url-prefix")+"/images/icons/profilepics/default.png"};if(u.Meta.get("current-user-avatar-url")!=="/images/icons/profilepics/default.png"){S={isDefault:false,path:u.contextPath()+u.Meta.get("current-user-avatar-url")}}var T=u.Meta.get("remote-user");return{userName:T==""?null:T,displayName:u.Meta.get("current-user-fullname"),profilePicture:S}}F.overlappedSelection=d;F.focusedCommentUrl=h;F.showFocusedComment=s;F.getAuthorAvatarUrl=K;F.moveCaretToEnd=L;F.animateSidebar=E;F.getDarkFeatures=O;F.getInlineLinks=k;F.removeInlineLinksDialog=A;F.isAnimationSupported=Q;F.showHighlightContent=c;F.getUnsupportedRtePlugins=N;F.getSupportedRtePlugins=j;F.confirmProcess=v;F.getAuthorDisplayName=P;F.isKeyboardShortcutsEnable=G;F.addSidebarHeadingTooltip=p;F.hasEditorInSidebar=M;F.recalculateContentHeight=B;F.resizeContentAfterLoadingImages=z;F.isDocTheme=J;F.getPageContainer=y;F.getSplitterContent=D;F.scrollToCommentAfterToggleSideBar=g;F.getEditorFormat=e;F.containUnsupportedMacro=I;F.containInternalLink=i;F.containUserMetion=l;F.getCurrentUserInfo=H});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-comments:util-resource', location = 'util/text-highlighter.js' */
define("confluence/ic/util/text-highlighter",["jquery"],function(c){var a="ic-current-selection";function b(){c.textHighlighter.createWrapper=function(d){return c("<span></span>").addClass(d.highlightedClass)};this.$el=c("#content .wiki-content").first();if(this.$el.length>0){this.$el.textHighlighter({highlightedClass:a})}}b.prototype.highlight=function(e){if(this.$el.length===0){return}var d=c(this.$el.getHighlighter().doHighlight(e));return this.$el.getHighlighter().serializeHighlights(d)};b.prototype.removeHighlight=function(){if(this.$el.length===0){return}this.$el.getHighlighter().removeHighlights();return this};b.prototype.deserializeHighlights=function(d,e){if(this.$el.length===0){return}var f='<span class="inline-comment-marker" data-ref="'+e+'"></span>';return this.$el.getHighlighter().deserializeHighlights(d,f)};return b});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.editor-loader:background-loading-editor', location = 'jscripts/editor-loader.js' */
AJS.Confluence.EditorLoader=function(d){var b,c={_listening:!1,_queuedHandlers:[],_watchHandler:function(){Confluence.Editor.UI.toggleWatchPage(!1)},_unwatchHandler:function(){Confluence.Editor.UI.toggleWatchPage(!0)},_createQueueAdder:function(a){return function(){c._listening&&c._queuedHandlers.push(a)}},bind:function(){AJS.bind("watchpage.pageoperation",this._createQueueAdder(this._watchHandler));AJS.bind("unwatchpage.pageoperation",this._createQueueAdder(this._unwatchHandler))},setListening:function(a){this._listening=
a},applyHandlers:function(){for(var a=this._queuedHandlers.pop();a;)a(),a=this._queuedHandlers.pop()}};c.setListening(!0);c.bind();var h=function(){var a=d("#editor-preload-container");a.length||(a=d('<div id="editor-preload-container" style="display: none;"></div>'));return a},e;return{getPreloadContainer:h,getEditorPreloadMarkup:function(){if(e)return e;var a=Confluence.getContextPath()+"/plugins/editor-loader/editor.action";return e=d.get(a,{parentPageId:AJS.Meta.get("parent-page-id"),pageId:AJS.Meta.get("page-id"),
spaceKey:AJS.Meta.get("space-key"),atl_after_login_redirect:window.location.pathname,timeout:AJS.Confluence.EditorLoader.loadingTimeout})},resourcesLoaded:function(){return b&&b.isResolved()},loadingTimeout:12E3,isEditorActive:function(){var a=d("#editor-preload-container");return a.length&&a.is(":visible")},load:function(a,c){var f;b?(b.fail(function(){c?c.call(this,arguments):AJS.log("EditorLoader: loadGuard - previous load failed.")}),b.done(function(){a?b.done(function(){setTimeout(a,0)}):AJS.log("EditorLoader: loadGuard - editor is already loaded.")}),
f=!0):f=void 0;if(!f){b=new d.Deferred;a&&b.done(a);c&&b.fail(c);var e=h();d("body").append(e);var g=new d.Deferred;AJS.Meta.get("page-id")?this.getEditorPreloadMarkup().done(function(a,b,c){if(b==="success"||b==="notmodified"){e.append(a);a=AJS.renderTemplate("dynamic-editor-metadata");d("head").append(a);AJS.populateParameters();AJS.debug("EditorLoader: Finished loading the editor template.");g.resolve()}else g.reject("Error loading the Editor template: "+c.status+" - "+c.statusText)}):g.resolve();
f=WRM.require(["wrc!editor","wrc!macro-browser","wrc!fullpage-editor"]).fail(function(a){AJS.logError("Failed to load editor resources",a)});d.when(g,f).done(function(){AJS.debug("EditorLoader: Finished loading the editor.");b.resolve()}).fail(function(){b.reject(arguments)})}},getEditorForm:function(){return this.isEditorActive()?d(tinymce.activeEditor.getContainer()).closest("form"):null}}}(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.editor-loader:background-loading-editor', location = 'jscripts/block-and-buffer-keys.js' */
AJS.Confluence.BlockAndBuffer={_cancelKeyboardFunction:function(a){a.preventDefault();a.stopPropagation()},_surrogatePairFixedFromCharCode:function(a){return 65535<a?(a-=65536,String.fromCharCode(55296+(a>>10),56320+(a&1023))):String.fromCharCode(a)},_bufferTextFunction:function(a,c){AJS.Confluence.BlockAndBuffer._cancelKeyboardFunction(a);var b=a.which;b||(b=a.charCode?a.charCode:a.keyCode);13!==b&&48>b||c.push(b)},_unblock:function(a,c,b){a.unbind("keypress",b);a="";for(b=0;b<c.length;b++)a+=AJS.Confluence.BlockAndBuffer._surrogatePairFixedFromCharCode(c[b]);
return a},block:function(a){var c=[],b=function(a){AJS.Confluence.BlockAndBuffer._bufferTextFunction(a,c);a.preventDefault()};a.keypress(b);return function(){return AJS.Confluence.BlockAndBuffer._unblock(a,c,b)}}};
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-core-resources', location = 'loader/profiles.js' */
AJS.Confluence=AJS.Confluence||{};AJS.Confluence.Editor=AJS.Confluence.Editor||{};
AJS.Confluence.Editor._Profiles=function(){return{createProfileForCommentEditor:function(){return{plugins:"searchreplace confluenceimagedialog autocompletemacro confluencemacrobrowser confluenceleavecomment confluencewatch autoresize".split(" ")}},createProfileForPageEditor:function(a){var b="searchreplace confluencedrafts confluenceimagedialog autocompletemacro confluencemacrobrowser flextofullsize referrer".split(" ");AJS.Meta.getBoolean("shared-drafts")&&b.push("unpublishedchanges");a&&a.versionComment&&
b.push("confluenceversioncomment");a&&a.notifyWatchers&&b.push("confluencenotifywatchers");return{plugins:b}},createProfileForTemplateEditor:function(){return{plugins:"searchreplace confluenceimagedialog autocompletemacro confluencemacrobrowser confluenceleavetemplate flextofullsize confluencetemplateeditor".split(" ")}}}}();
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.quickedit:quick-edit-general', location = 'jscripts/quick-edit.js' */
(function(b){function k(){var a=new b.Deferred;AJS.Confluence.EditorLoader.load(function(){setTimeout(function(){a.resolve()},0)},function(){a.reject()});return a}var i={enableShortcut:function(){b("#editPageLink").addClass("full-load")},disableShortcut:function(){b("#editPageLink").removeClass("full-load")}},e=[];AJS.Confluence.QuickEdit={loadingContentTimeout:4E3,register:function(a){e.push(a)},disableHandlers:function(){b.each(e,function(a,b){return b.disable()})},enableHandlers:function(){b.each(e,
function(a,b){return b.enable()})},SaveBarBinder:{bind:function(a,b){a&&(Confluence.Editor.removeAllSaveHandlers(),Confluence.Editor.addSaveHandler(a));b&&(Confluence.Editor.removeAllCancelHandlers(),Confluence.Editor.addCancelHandler(b))}},activateEditor:function(a){function f(){function f(a){var c=new b.Deferred;WRM.require(a).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)});return c}var c,h=new b.Deferred;if(AJS.Rte&&AJS.Rte.getEditor())return AJS.debug("there is already an editor open"),
h.reject("there is already an editor open");if(!a.$container||!a.$form)return AJS.logError("activateEditor could not be initialsed: bad arguments",a),h.reject("bad parameters");c=AJS.Confluence.BlockAndBuffer.block(b(document));a.preActivate&&a.preActivate();i.disableShortcut();var e=a.timeoutResources||AJS.Confluence.EditorLoader.loadingTimeout,l=AJS.Confluence.QuickEdit.loadingContentTimeout,g=AJS.Confluence.QuickEdit.Util.timeoutDeferred;b.when(g("resources",k(),e),g("fetch content",a.fetchContent||
b.Deferred().resolve(),l),g("additional resources",a.additionalResources?f(a.additionalResources):b.Deferred().resolve(),e)).done(function(e,f){var d={$container:a.$container,content:f,$form:a.$form,replayBufferedKeys:c};a.preInitialise&&a.preInitialise(d);b(".quick-comment-prompt",d.$container).hide();b(".quick-comment-body",d.$container).addClass("comment-body");var g=AJS.Confluence.EditorLoader.getPreloadContainer();if(d.content&&d.content.title){var i=d.content.title;g.find("#content-title").val(i)}d.$form.append(g.children());
g.show();b("#editor-precursor").hide();b("#rte-savebar").find(".toolbar-split-left").hide();var j=function(){d.editor=AJS.Rte.getEditor();d.$container.find(".quick-comment-loading-container").hide();d.$form.show();d.$form.addClass("fadeIn");var c=d.editor,f=d.content?d.content.editorContent:"",e=d.replayBufferedKeys;f&&(c.setContent(f),c.startContent=c.getContent({format:"raw",no_events:1}),c.undoManager.clear());e();c.undoManager.add();AJS.trigger("quickedit.success");AJS.trigger("quickedit.visible");
AJS.trigger("add-bindings.keyboardshortcuts");AJS.trigger("active.dynamic.rte");b("div.aui-message.closeable").each(function(){var a=b(this),c;if(!a.find(".icon-close").length){c=b('<span class="aui-icon icon-close" role="button" tabindex="0"></span>').click(function(){a.closeMessage()}).keypress(function(b){if(b.which===AJS.keyCode.ENTER||b.which===AJS.keyCode.SPACE){a.closeMessage();b.preventDefault()}});a.append(c)}});a.postInitialise&&a.postInitialise(d);AJS.Confluence.QuickEdit.SaveBarBinder.bind(a.saveHandler,
a.cancelHandler);AJS.trigger("rte-quick-edit-ready");AJS.unbind("rte-ready",j);h.resolve()};AJS.bind("rte-ready",j);AJS.bind("rte-destroyed",a.postDeactivate||function(){});AJS.Rte.BootstrapManager.initialise({plugins:a.plugins,toolbar:a.toolbar,excludePlugins:a.excludePlugins,isQuickEdit:!0})}).fail(function(b){h.reject(b);AJS.logError("Error loading page quick edit. Falling back to normal edit URL...");AJS.trigger("analytics",{name:"rte.quick-edit.activate-editor.failed"});a.fallbackUrl&&(AJS.log("This parameter is deprecated. To be removed in the next major version (5.8 or 6.0). Please use the promise returned to bind custom action if the editor fails to load instead."),
window.location=a.fallbackUrl)});return h.promise()}if(a.closeAnyExistingEditor&&AJS.Rte&&AJS.Rte.getEditor()){var c=new b.Deferred;this.deactivateEditor().done(function(){f().done(function(){c.resolve()}).fail(function(a){c.reject(a)})}).fail(function(){AJS.debug("Could not deactivate current editor.");c.reject("Could not deactivate current editor.")});return c}return f()},deactivateEditor:function(){tinymce.execCommand("mceRemoveControl",!0,"wysiwygTextarea");Confluence.Editor.UI.toggleSavebarBusy(!1);
var a=AJS.Confluence.EditorLoader.getPreloadContainer().empty();b(".editor-container").remove();b("#editor-precursor").remove();b("#anonymous-warning").remove();b(".quick-comment-prompt").show();b(".bottom-comment-panels").show();b("#editor-notification-container").empty();b(".action-reply-comment").removeAttr("reply-disabled");i.enableShortcut();return AJS.Confluence.EditorLoader.getEditorPreloadMarkup().done(function(b){a.append(b);a.hide();(new AJS.Confluence.QuickEditCaptchaManager(a)).refreshCaptcha();
AJS.trigger("rte-destroyed");AJS.unbind("rte-destroyed")})}}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.quickedit:quick-edit-general', location = 'jscripts/util.js' */
(function(){AJS.Confluence.QuickEdit.Util={generateUUID:function(){var a=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()},getBaseUrl:function(){var a=window.location.protocol.replace(/:$/,"")+"://"+window.location.host+"/"+window.location.pathname.replace(/^\//,""),b=window.location.search.replace(/^\?/,""),b=b.replace(/\&?focusedCommentId=\d+/,""),b=b.replace(/^\&/,"");return{url:a,search:b,addQueryParam:function(a,
b){this.search=this.search?this.search+"&"+a+"="+b:a+"="+b},toString:function(){return this.url+"?"+this.search}}},timeoutDeferred:function(a,b,c){setTimeout(function(){"pending"===b.state()&&(AJS.logError("Timeout: "+a),b.reject("timeout"))},c);return b}}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.quickedit:quick-edit-general', location = 'jscripts/captcha-manager.js' */
(function(d){AJS.Confluence.QuickEditCaptchaManager=function(e){function a(a){return d(e||"body").find(a)}return{refreshCaptcha:function(){var b=a("img.captcha-image");if(0<b.length){var c=Math.random();b.attr("src",AJS.contextPath()+"/jcaptcha?id="+c);a('input[name="captchaId"]').val(c);a('input[name="captchaResponse"]').val("")}},getCaptchaData:function(){return{id:a('input[name="captchaId"]').val(),response:a('input[name="captchaResponse"]').val()}}}}})($);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.quickedit:quick-edit-general', location = 'jscripts/handlers/shortcut.js' */
(function(){var c=!1;AJS.bind("initialize.keyboardshortcuts add-bindings.keyboardshortcuts",function(){c=!0});AJS.bind("remove-bindings.keyboardshortcuts",function(){c=!1});AJS.Confluence.QuickEdit=AJS.Confluence.QuickEdit||{};AJS.Confluence.QuickEdit.KeyboardShortcuts={createShortcut:function(e,f){function a(){b=b||AJS.whenIType(e).moveToAndClick(f)}function d(){b&&b.unbind();b=null}var b;return{bind:function(){c&&a();AJS.bind("initialize.keyboardshortcuts",a);AJS.bind("add-bindings.keyboardshortcuts",
a);AJS.bind("remove-bindings.keyboardshortcuts",d)},unbind:function(){d();AJS.unbind("initialize.keyboardshortcuts",a);AJS.unbind("add-bindings.keyboardshortcuts",a);AJS.unbind("remove-bindings.keyboardshortcuts",d)}}}}})();
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.quickedit:quick-edit-general', location = 'jscripts/handlers/page.js' */
(function(b){function g(a){AJS.Confluence.QuickEdit.QuickEditPage.disable();AJS.populateParameters();var c=a.$form,e="page"===AJS.Data.get("content-type")?"doeditpage":"doeditblogpost",e=Confluence.getContextPath()+"/pages/"+e+".action?pageId="+Confluence.getContentId();b(".ia-splitter-left").remove();try{b("#main").unwrap()}catch(d){}b("#rte").removeClass("editor-default").addClass("editor-fullheight");a.$container.children().remove();b(".editor-container").children().eq(0).unwrap();c.attr({"class":"editor aui",
action:e,name:"editpageform",id:"editpageform",style:""});a.$container.append(c);a.$container.removeClass("view").addClass("edit");b("body").addClass("contenteditor edit")}function h(a){b("#editor-precursor").show();b("#rte-savebar").find(".toolbar-split-left").show();if(window.history.pushState){var c=b("#editPageLink").attr("href");c!=window.location.pathname+window.location.search&&(history.pushState({quickEdit:!0},"",c),AJS.trigger("rte-quick-edit-push-state",c))}else window.location.hash="editor",
AJS.trigger("rte-quick-edit-push-hash");c=a.content;if(c.permissions)for(var d in c.permissions)b("#"+d).attr("value",c.permissions[d]);b("#originalVersion").val(a.content.pageVersion);a=a.content.atlToken;AJS.Meta.set("atl-token",a);b('input[name="atl_token"]').val(a);AJS.trigger("analyticsEvent",{name:"quick-edit-success"});b("#navigation").remove()}function i(){var a=new b.Deferred,c=b.ajax({url:Confluence.getContextPath()+"/rest/tinymce/1/content/"+Confluence.getContentId()+".json",cache:!1});
c.success(function(b){a.resolve(b)});c.error(function(){a.reject("error fetching content")});return a}var f,d={editShortcut:AJS.Confluence.QuickEdit.KeyboardShortcuts.createShortcut("e","#editPageLink"),activateEventHandler:function(a){if(!a.metaKey&&!a.shiftKey&&!a.ctrlKey&&!a.altKey&&!(2==a.which||3==a.which))a.preventDefault(),f&&"pending"===f.state()?AJS.debug("Editor is being activated. Ignoring handler..."):(f=d.activateEditor(),a=b("#editPageLink"),a.find(".aui-icon").css("visibility","hidden"),
a.parent().spin({left:"10px"}))},enable:function(){if(b("body").is(".theme-default")){var a=b("#editPageLink");a.bind("click",d.activateEventHandler);a.removeClass("full-load");d.editShortcut.bind();AJS.debug("QuickPageEdit enabled")}else AJS.debug("QuickPageEdit not enabled")},activateEditor:function(){var a=b("#content").find(".quick-comment-form");return AJS.Confluence.QuickEdit.activateEditor({fetchContent:i(),$container:b("#content"),$form:a.length?a:b('<form method="post"></form>'),preInitialise:g,
postInitialise:h,saveHandler:function(){1<Confluence.Editor.getNumConcurrentEditors()&&AJS.Confluence.Analytics.publish("rte.notification.concurrent-editing.save",{numEditors:Confluence.Editor.getNumConcurrentEditors(),pageId:AJS.params.pageId,draftType:AJS.params.draftType})},cancelHandler:function(){1<Confluence.Editor.getNumConcurrentEditors()&&AJS.Confluence.Analytics.publish("rte.notification.concurrent-editing.cancel",{numEditors:Confluence.Editor.getNumConcurrentEditors(),pageId:AJS.params.pageId,
draftType:AJS.params.draftType})},plugins:AJS.Confluence.Editor._Profiles.createProfileForPageEditor({versionComment:!0,notifyWatchers:!0}).plugins}).fail(function(){window.location=b("#editPageLink").attr("href")})},disable:function(){AJS.debug("QuickPageEdit disabled.");d.editShortcut.unbind();b("#editPageLink").unbind("click",d.activateEventHandler)}};AJS.Confluence.QuickEdit.QuickEditPage={disable:d.disable};b.browser.msie&&9>+b.browser.version||AJS.Confluence.QuickEdit.register(d)})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.quickedit:quick-edit-general', location = 'jscripts/init.js' */
(function(a){var b=function(){AJS.DarkFeatures.isEnabled("shipit25.quick.edit.defer")?AJS.debug("QuickComment: editor preload is disabled"):a(window).load(function(){AJS.debug("QuickComment: instigated background loading of the comment editor.");AJS.Confluence.EditorLoader.load()});AJS.Confluence.QuickEdit.enableHandlers();AJS.trigger("rte-quick-edit-enable-handlers")};AJS.DarkFeatures.isEnabled("disable-quick-edit")?AJS.log("disable-quick-edit is turned on; run AJS.Confluence.EditorLoader.load() manually."):
AJS.toInit(b)})($);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.quickedit:quick-comment-initial', location = 'jscripts/handlers/comment.js' */
(function(c){function i(a,b){var d=a.match(RegExp("[?&]"+b+"=(\\d+)"));return d&&1<d.length?parseInt(d[1]):0}var k=require("aui/flag");"use strict";c(function(){AJS.AppLinksInitialisationBinder=function(a){AJS.bind("init.rte",a)}});AJS.Confluence.QuickEdit.QuickComment={timeout:8E3,showLoadingEditorErrorMessage:function(){AJS.trigger("rte-quick-comment-loading-failed");k({type:"error",title:"Error",persistent:!1,body:"Error loading the comment editor. Please refresh the page to try again."})},
preInitialise:function(){AJS.Confluence.QuickEdit.QuickEditPage.disable();AJS.Meta.set("content-type","comment");AJS.Meta.set("draft-type","");AJS.params.contentType="comment";AJS.params.draftType="";AJS.Meta.set("use-inline-tasks","false");c("#editor-precursor").children().eq(0).hide();c("#pagelayout-menu").parent().hide();c("#page-layout-2-group").hide();c("#rte-button-tasklist").remove();c("#rte-insert-tasklist").parent().remove()},postInitialise:function(a){AJS.Rte.editorFocus(a.editor)},delegatingSaveCommentHandler:function(a){return a.asyncRenderSafe?
AJS.Confluence.QuickEdit.QuickComment.ajaxSaveCommentHandler(a):AJS.Confluence.QuickEdit.QuickComment.reloadPageSaveCommentHandler(a)},reloadPageSaveCommentHandler:function(a){var b=AJS.Confluence.QuickEdit.Util.getBaseUrl();b.addQueryParam("focusedCommentId",a.id);b.addQueryParam("refresh",+new Date);window.location.href=b.toString()+"#comment-"+a.id},ajaxSaveCommentHandler:function(a){var b={isDefault:!0,path:AJS.Meta.get("static-resource-url-prefix")+"/images/icons/profilepics/default.png"};"/images/icons/profilepics/default.png"!==
AJS.Meta.get("current-user-avatar-url")&&(b={isDefault:!1,path:AJS.contextPath()+AJS.Meta.get("current-user-avatar-url")});var d=AJS.Meta.get("remote-user"),c={userName:""==d?null:d,displayName:AJS.Meta.get("current-user-fullname"),profilePicture:b};AJS.Confluence.QuickEdit.QuickComment.cancelComment().done(function(){Confluence.CommentDisplayManager.addOrUpdateComment(c,a,!0,!1);AJS.trigger("page.commentAddedOrUpdated",{commentId:a.id})})},cancelHandler:function(){if(Confluence.Editor.UI.isFormEnabled()&&
(Confluence.Editor.hasContentChanged()&&!Confluence.Editor.isEmpty())&&!confirm("Your comment will be lost."))return!1;AJS.Rte.Content.editorResetContentChanged();AJS.Confluence.QuickEdit.deactivateEditor()},createCommenterParam:function(a,b,c){return{userName:b||AJS.Meta.get("remote-user")||null,displayName:c||AJS.Meta.get("user-display-name"),profilePicture:{isDefault:a.hasClass("defaultLogo"),path:a.attr("src")}}},createSaveHandler:function(a,b){var d=Confluence.QuickEdit.Util.generateUUID();
return function(g){g.preventDefault();if(AJS.Rte.Content.isEmpty())AJS.Confluence.EditorNotification.notify("warning","Comment text is empty. Cannot create empty comments.");else if(Confluence.Editor.UI.toggleSavebarBusy(!0)){var e=g=0,f=AJS.Confluence.EditorLoader.getEditorForm();f.is("form")&&(e=f.attr("action"),g=i(e,"parentId"),e=i(e,"commentId"));var h=new AJS.Confluence.QuickEditCaptchaManager(f),f=function(a){b(a);h.refreshCaptcha()},j=c("#watchPage").is(":checked");0<e?Confluence.Editor.CommentManager.updateComment(Confluence.getContentId(),
e,AJS.Rte.Content.getHtml(),j,h.getCaptchaData(),a,f):Confluence.Editor.CommentManager.saveComment(Confluence.getContentId(),g,AJS.Rte.Content.getHtml(),j,d,h.getCaptchaData(),a,f)}else AJS.log("QuickComment: subsequent save operation attempted but ignored.")}},saveCommentErrorHandler:function(a){Confluence.Editor.UI.toggleSavebarBusy(!1);var b;b=a&&-1!=a.search(/captcha/i)?"The typed word did not match the text in the picture.":"Failed to save the comment. Please try again later.";AJS.logError("Error saving comment",
a);AJS.Confluence.EditorNotification.notify("error",b)},cancelComment:function(){AJS.Rte.Content.editorResetContentChanged();return AJS.Confluence.QuickEdit.deactivateEditor()},proceedWithActivation:function(){var a=new c.Deferred,b=AJS.Rte&&AJS.Rte.getEditor();if(b)if(b.isDirty()&&!Confluence.Editor.isEmpty())if(confirm("Your comment will be lost."))a=AJS.Confluence.QuickEdit.QuickComment.cancelComment();else return a.reject();else a=AJS.Confluence.QuickEdit.QuickComment.cancelComment();
else a.resolve();return a}}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.quickedit:quick-comment-initial', location = 'jscripts/handlers/comment/top-level.js' */
(function(a){function d(a){AJS.Confluence.QuickEdit.QuickComment.preInitialise(a)}function e(b){a("#rte-savebar").scrollWindowToElement();AJS.Confluence.QuickEdit.QuickComment.postInitialise(b)}function f(){AJS.Confluence.EditorLoader.resourcesLoaded()||(AJS.trigger("analytics",{name:"rte.quick-edit.top-comment.spinner"}),a(".quick-comment-prompt").hide(),a(".quick-comment-loading-container").fadeIn().spin("medium"))}function g(b){b.preventDefault();window.location=a("#add-comment-rte").attr("href")}
var h=AJS.DarkFeatures.isEnabled("editor.slow.comment.disable"),c={commentShortcut:AJS.Confluence.QuickEdit.KeyboardShortcuts.createShortcut("m",".quick-comment-prompt"),activateEventHandler:function(b){b.preventDefault();AJS.Confluence.QuickEdit.QuickComment.proceedWithActivation().done(function(){var b=AJS.Confluence.QuickEdit.QuickComment.createSaveHandler(AJS.Confluence.QuickEdit.QuickComment.delegatingSaveCommentHandler,AJS.Confluence.QuickEdit.QuickComment.saveCommentErrorHandler);return AJS.Confluence.QuickEdit.activateEditor({preActivate:f,
$container:a("form[name=inlinecommentform]").closest(".quick-comment-container"),$form:a("form[name=inlinecommentform]"),preInitialise:d,saveHandler:b,cancelHandler:AJS.Confluence.QuickEdit.QuickComment.cancelHandler,postInitialise:e,plugins:AJS.Confluence.Editor._Profiles.createProfileForCommentEditor().plugins,additionalResources:["wrc!comment-editor"],timeoutResources:AJS.Confluence.QuickEdit.QuickComment.timeout}).fail(function(){h?AJS.Confluence.QuickEdit.QuickComment.showLoadingEditorErrorMessage():
window.location=a("#add-comment-rte").attr("href")})})},enable:function(){a("#comments-section").delegate(".quick-comment-prompt","click",c.activateEventHandler);a("#add-comment-rte").removeClass("full-load");this.commentShortcut.bind()},disable:function(){a("#comments-section").undelegate(".quick-comment-prompt","click");this.commentShortcut.unbind()}};AJS.Confluence.QuickEdit.QuickComment.TopLevel={bindCommentAreaFallbackHandler:function(){a("#comments-section").delegate(".quick-comment-prompt",
"click",g)},cancelComment:function(){AJS.log("'AJS.Confluence.QuickEdit.QuickComment.TopLevel.cancelComment' is deprecated in 5.7, consider using 'AJS.Confluence.QuickEdit.QuickComment.cancelComment' instead.");return AJS.Confluence.QuickEdit.QuickComment.cancelComment()}};AJS.Confluence.QuickEdit.register(c)})($);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.quickedit:quick-comment-initial', location = 'jscripts/handlers/comment/reply.js' */
(function(a){function g(a){AJS.Confluence.QuickEdit.QuickComment.preInitialise(a);a.$container.scrollWindowToElement()}function h(a){AJS.Confluence.QuickEdit.QuickComment.postInitialise(a)}function f(a){var d=a.attr("id").match(/comment-(\d+)/),e=0;d?e=parseInt(d[1]):(AJS.trigger("analytics",{name:"rte.quick-edit.get-reply-parent.failed"}),AJS.logError("replyHandler: activateEventHandler - could not extract a parent comment Id from the comment id "+a.attr("id")));return e}function i(){a(".comment.reply").closest(".comment-threads").remove()}
var j=AJS.DarkFeatures.isEnabled("editor.slow.comment.disable"),c={activateEventHandler:function(c){c.preventDefault();c.stopPropagation();var d=this;if(a(d).attr("reply-disabled"))return!1;AJS.Confluence.QuickEdit.QuickComment.proceedWithActivation().done(function(){var e=a(d).closest("div.comment"),b=a(".quick-comment-container img.userLogo"),b=AJS.Confluence.QuickEdit.QuickComment.createCommenterParam(b),b={contentId:Confluence.getContentId(),parentCommentId:f(e),commenter:b,context:{contextPath:AJS.Meta.get("context-path"),
staticResourceUrlPrefix:AJS.Meta.get("static-resource-url-prefix")}},b=a(Confluence.Templates.Comments.displayReplyEditorLoadingContainer(b)),c=a(".quick-comment-loading-container",b);c.hide();e.after(b);AJS.Confluence.EditorLoader.resourcesLoaded()?AJS.trigger("analytics",{name:"rte.quick-edit.reply-comment.no-spinner"}):(AJS.trigger("analytics",{name:"rte.quick-edit.reply-comment.spinner"}),e.after(b),c.fadeIn(),c.spin("medium"),c[0].scrollIntoView());b=a(d).closest(".comment-thread").find(".quick-comment-container");
AJS.Meta.set("form-name",a("form",b).attr("name"));AJS.Confluence.QuickEdit.activateEditor({$container:b,$form:a("form.quick-comment-form[name=threadedcommentform]"),preInitialise:g,postInitialise:h,saveHandler:AJS.Confluence.QuickEdit.QuickComment.createSaveHandler(AJS.Confluence.QuickEdit.QuickComment.delegatingSaveCommentHandler,AJS.Confluence.QuickEdit.QuickComment.saveCommentErrorHandler),cancelHandler:AJS.Confluence.QuickEdit.QuickComment.cancelHandler,plugins:AJS.Confluence.Editor._Profiles.createProfileForCommentEditor().plugins,
postDeactivate:i,additionalResources:["wrc!comment-editor"],timeoutResources:AJS.Confluence.QuickEdit.QuickComment.timeout}).fail(function(){j?AJS.Confluence.QuickEdit.QuickComment.showLoadingEditorErrorMessage():window.location=a("#reply-comment-"+f(e)).attr("href")});a(d).attr("reply-disabled",!0)})},enable:function(){a("#comments-section").delegate(".action-reply-comment","click",c.activateEventHandler)},disable:function(){a("#comments-section").undelegate(".action-reply-comment","click")}};AJS.Confluence.QuickEdit.QuickComment.Reply=
{cancelComment:function(){AJS.log("'AJS.Confluence.QuickEdit.QuickComment.Reply.cancelComment' is deprecated in 5.7, consider using 'AJS.Confluence.QuickEdit.QuickComment.cancelComment' instead.");return AJS.Confluence.QuickEdit.QuickComment.cancelComment()}};AJS.Confluence.QuickEdit.register(c)})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.quickedit:quick-comment-initial', location = 'jscripts/handlers/comment/edit.js' */
(function(c){function h(a){AJS.Confluence.QuickEdit.QuickComment.preInitialise(a);a.$container.scrollWindowToElement()}function i(a){AJS.Confluence.QuickEdit.QuickComment.postInitialise(a)}function f(a){return(a=a.attr("id").match(/comment-(\d+)/))?parseInt(a[1]):0}function j(a){var d=new c.Deferred;c.ajax({url:Confluence.getContextPath()+"/rest/api/content/"+a+"?expand=body.editor",cache:!1}).done(function(a){!a||!a.body||!a.body.editor?d.reject("invalid response from loading comment rest endpoint"):
d.resolve({editorContent:a.body.editor.value})}).fail(function(){d.reject("error fetching content")});return d}function k(){var a=c(".comment.edit");a.prev(".comment").show();a.remove()}var l=AJS.DarkFeatures.isEnabled("editor.slow.comment.disable"),g={activateEventHandler:function(a){var d=this;a.preventDefault();a.stopPropagation();AJS.Confluence.QuickEdit.QuickComment.proceedWithActivation().done(function(){var a=c(d).closest("div.comment"),b;b=a.find(".author .confluence-userlink");var e=a.find(".comment-user-logo img.userLogo");
b=AJS.Confluence.QuickEdit.QuickComment.createCommenterParam(e,b.attr("data-username"),b.text());b={contentId:Confluence.getContentId(),commentId:f(a),commenter:b,context:{contextPath:AJS.Meta.get("context-path"),staticResourceUrlPrefix:AJS.Meta.get("static-resource-url-prefix")},mode:"edit"};b=c(Confluence.Templates.Comments.displayEditEditorContainer(b));e=c(".quick-comment-loading-container",b);a.hide();a.after(b);e.fadeIn().spin("medium");e[0].scrollIntoView();b=a.next(".quick-comment-container");
AJS.Meta.set("form-name",c("form",b).attr("name"));AJS.Confluence.QuickEdit.activateEditor({$container:b,$form:c("form.quick-comment-form[name=editcommentform]"),fetchContent:j(f(a)),preInitialise:h,postInitialise:i,saveHandler:AJS.Confluence.QuickEdit.QuickComment.createSaveHandler(AJS.Confluence.QuickEdit.QuickComment.delegatingSaveCommentHandler,AJS.Confluence.QuickEdit.QuickComment.saveCommentErrorHandler),cancelHandler:AJS.Confluence.QuickEdit.QuickComment.cancelHandler,plugins:AJS.Confluence.Editor._Profiles.createProfileForCommentEditor().plugins,
postDeactivate:k,additionalResources:["wrc!comment-editor"],timeoutResources:AJS.Confluence.QuickEdit.QuickComment.timeout}).fail(function(){l?AJS.Confluence.QuickEdit.QuickComment.showLoadingEditorErrorMessage():window.location=c("#edit-comment-"+f(a)).attr("href")})})},enable:function(){c("#comments-section").delegate(".comment-action-edit","click",g.activateEventHandler)},disable:function(){c("#comments-section").undelegate(".comment-action-edit","click")}};AJS.Confluence.QuickEdit.QuickComment.Edit=
{cancelComment:function(){AJS.log("'AJS.Confluence.QuickEdit.QuickComment.Edit.cancelComment' is deprecated in 5.7, consider using 'AJS.Confluence.QuickEdit.QuickComment.cancelComment' instead.");return AJS.Confluence.QuickEdit.QuickComment.cancelComment()}};AJS.Confluence.QuickEdit.register(g)})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.quickedit:quick-comment-initial', location = 'jscripts/editor-comment-manager.js' */
AJS.bind("init.rte",function(){var k=AJS.$,j=function(a,d,e,h,b,f,g){a={type:"POST",url:a,contentType:"application/x-www-form-urlencoded; charset=UTF-8",data:{html:d,watch:e,uuid:h},dataType:"json",cache:!1,headers:{"X-Atlassian-Token":"nocheck"},success:function(a){f(a)},error:function(a,c,b){c=c+": "+b;a.responseText&&(c=c+" - "+a.responseText);g(c)},timeout:12E4};b&&b.id&&(a.headers["X-Atlassian-Captcha-Id"]=b.id,a.headers["X-Atlassian-Captcha-Response"]=b.response);k.ajax(a)};Confluence.Editor.CommentManager=
{addComment:function(a,d,e,h,b,f,g,i,c){Confluence.Editor.CommentManager.saveComment(a,d,e,function(a){Confluence.CommentDisplayManager.addComment(g,a,f);i(a)},c)},saveComment:function(a,d,e,h,b,f,g,i){var c=null,c=d?Confluence.getContextPath()+"/rest/tinymce/1/content/"+a+"/comments/"+d+"/comment?actions=true":Confluence.getContextPath()+"/rest/tinymce/1/content/"+a+"/comment?actions=true";j(c,e,h,b,f,g,i)},updateComment:function(a,d,e,h,b,f,g){a=Confluence.getContextPath()+"/rest/tinymce/1/content/"+
a+"/comments/"+d+"?actions=true";j(a,e,h,null,b,f,g)}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-comments:editor', location = 'editor/editor.js' */
define("confluence/ic/editor/editor",["jquery","ajs","confluence/ic/util/utils","exports"],function(e,h,f,c){function b(){if(!h.Confluence.EditorLoader.resourcesLoaded()){this.$form.find(".loading-container").spin("small")}}function i(){h.Meta.set("content-type","comment");h.Meta.set("use-inline-tasks","false");h.Meta.set("min-editor-height",80)}function k(l){l.$form.find(".loading-container").hide();l.$form.find("#rte-button-publish").text("Save").removeAttr("title");l.$form.find("#toolbar-hints-draft-status").hide();if(this.hideCancelButton){l.$form.find("#rte-button-cancel").hide()}var m=tinymce.DOM;m.setStyle(m.get(l.editor.id+"_ifr"),"height","80px");h.Confluence.QuickEdit.QuickEditPage.disable()}function j(l){return h.Confluence.QuickEdit.activateEditor({preActivate:b,preInitialise:i,postInitialise:e.proxy(k,l),toolbar:false,$container:l.container,$form:l.form,saveHandler:l.saveHandler,cancelHandler:l.cancelHandler,fetchContent:l.fetchContent(),closeAnyExistingEditor:true,postDeactivate:l.postDeactivate,plugins:f.getSupportedRtePlugins(),excludePlugins:f.getUnsupportedRtePlugins()})}function d(){if(h.Rte&&h.Rte.getEditor()){return h.Confluence.QuickEdit.deactivateEditor()}else{return e.Deferred().resolve()}}function a(){return h.Rte.Content.getHtml()}function g(l){if(l){e(".ic-sidebar #rte-spinner").spin()}else{e(".ic-sidebar #rte-spinner").spinStop()}e("#rte-button-publish").prop("disabled",l)}c.init=j;c.remove=d;c.getContent=a;c.setEditorBusy=g});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-comments:create-comment-view', location = 'view/create-comment/create-comment.soy' */
// This file was automatically generated from create-comment.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.IC == 'undefined') { Confluence.Templates.IC = {}; }


Confluence.Templates.IC.createComment = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="ic-comment-container">');
  if (opt_data.type == 'topLevel' || opt_data.type == 'pageComment') {
    Confluence.Templates.IC.sidebarHeading({showMenu: false, createComment: true, darkFeatures: opt_data.darkFeatures}, output);
  }
  Confluence.Templates.IC.commentForm(opt_data, output);
  output.append('</div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.IC.commentForm = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="ic-container ic-create-comment">');
  Confluence.Templates.IC.commentHeader(opt_data, output);
  output.append('<div class="ic-body"><form class="aui" action="">');
  if (! opt_data.darkFeatures.RICH_TEXT_EDITOR) {
    var placeholder__soy27 = new soy.StringBuilder((opt_data.type == 'reply') ? soy.$$escapeHtml("Reply") : soy.$$escapeHtml("write a comment\u2026"));
    placeholder__soy27 = placeholder__soy27.toString();
    output.append('<textarea class="textarea ic-textarea" name="body" placeholder="', soy.$$escapeHtml(placeholder__soy27), '">', soy.$$escapeHtml(opt_data.text), '</textarea><div class="ic-actions"><ul><li>');
    aui.buttons.button({tagName: 'button', text: "Save", type: 'link', extraClasses: 'ic-action-save', isDisabled: true}, output);
    output.append('</li>');
    if (opt_data.type != 'topLevel') {
      output.append('<li>');
      aui.buttons.button({text: "Cancel", type: 'link', extraClasses: 'ic-action-discard'}, output);
      output.append('</li>');
    }
    output.append('</ul></div>');
  } else {
    output.append('<div class="loading-container" />');
  }
  output.append('</form></div></div>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-comments:create-comment-view', location = 'view/create-comment/create-comment.js' */
define("confluence/ic/view/create-comment",["underscore","jquery","backbone","ajs","confluence/ic/model/comment","confluence/ic/model/reply","confluence/ic/util/utils","confluence/ic/editor/editor"],function(h,c,g,f,b,a,e,d){var i=g.View.extend({tagName:"div",className:"ic-create-comment-view",events:{"click .ic-action-save":"saveComment","click .ic-action-discard":"discardComment","keyup .ic-textarea":"onInput","focus .ic-textarea":"onFocus","click #show-page-comment":"showPageComment"},template:Confluence.Templates.IC.createComment,initialize:function(j){this.selection=j.selection;this.type=j.type;this.onFinished=j.onFinished||function(){};this.commentText=j.commentText||"";this.stopFocus=j.stopFocus;this.serializedHighlights=j.serializedHighlights;if(j.type==="edit"||j.type==="reply"){this.template=Confluence.Templates.IC.commentForm;g.trigger("ic:discard-edit");this.listenTo(g,"ic:discard-edit",this.discardComment)}},render:function(){var k=this._getAuthorObject();var j={type:this.type,text:this.commentText,showMenu:false};var l=h.extend({},k,j,{darkFeatures:e.getDarkFeatures()});this.$el.html(this.template(l));if(e.getDarkFeatures().RICH_TEXT_EDITOR){this.renderEditor()}else{if(!this.stopFocus){setTimeout(h.bind(this.focusEditor,this),1)}}e.addSidebarHeadingTooltip(this);return this},onInput:function(k){var j=this.$(k.target).val().trim()!=="";this._saveDisable(!j)},onFocus:function(){if(this.type==="edit"){var j=this.$(".textarea");e.moveCaretToEnd(j[0]);this._saveDisable(j.text()==="")}},saveComment:function(j){j.preventDefault();if(!this._isValid()){return}this._disableForm();if(this.type==="reply"){this._addReply()}else{if(this.type==="edit"){this._saveEdit()}else{this._addComment()}}},_getAuthorObject:function(){var j;var k;var l;if(this.type==="edit"){j=this.model.get("authorUserName");k=this.model.get("authorAvatarUrl");l=this.model.get("authorDisplayName")}else{j=f.Meta.get("remote-user");k=e.getAuthorAvatarUrl();l=e.getAuthorDisplayName()}return{authorUserName:j,authorAvatarUrl:k,authorDisplayName:l}},_saveEdit:function(){var k=this._getContent();var j={wait:true,success:h.bind(this._onSaveSuccess,this),error:h.bind(this._showEditError,this)};this.model.save({body:k},j)},_showEditError:function(k,j){var l;if(j.status===401){l="You don\'t have permission to edit this comment."}else{l="We can\'t save your edit. The comment might have been deleted."}this._triggerError(l);this._disableForm(false)},_triggerError:function(k,j){g.trigger("ic:error",k,j);this._disableForm(false)},_addReply:function(){var j=new a({body:this._getContent(),commentId:this.model.get("id"),hasDeletePermission:!!f.Meta.get("remote-user")||this.model.get("hasDeletePermission")});j.save(null,{success:h.bind(this._onSaveSuccess,this),error:h.bind(this._triggerError,this,"Could not save the reply")})},_addComment:function(){var k=new b({originalSelection:this.selection.searchText.selectedText.replace(/\n/g,""),body:this._getContent(),matchIndex:this.selection.searchText.index,numMatches:this.selection.searchText.numMatches,serializedHighlights:this.serializedHighlights});var j={callback:this.bindPageReloadLink};k.save(null,{success:h.bind(this._onSaveSuccess,this),error:h.bind(function(m,l){if(l.status===409){this._triggerError(f.format("Page content is out of date, please {0}refresh{1} and try again.",'<a href="#" class="ic-reload-page">',"</a>"),j)}else{if(l.status===412){f.trigger("analytics",{name:"confluence.comment.inline.cannot.create"});this._triggerError("We can\'t add your inline comment; the section you highlighted may contain a macro or user mention. Try highlighting plain text.")}else{this._triggerError("Could not save the comment")}}},this)})},_isValid:function(){if(!c.trim(this._getContent()).length){g.trigger("ic:error","You cannot save an empty comment.");return false}return true},_onSaveSuccess:function(j){switch(this.type){case"topLevel":j.set("hasDeletePermission",true);g.trigger("ic:persist",j);g.trigger("ic:view",j,undefined,{ignoreConfirmDialog:true});break;case"reply":this.model.replies.push(j);g.trigger("ic:reply:persist",j);this.onFinished();break;case"edit":g.trigger("ic:edit");this.onFinished();break}},_setEditorIsNotDirty:function(){if(f.Rte.getEditor()){f.Rte.getEditor().isNotDirty=1}},_disableForm:function(j){if(j===undefined){j=true}this._saveDisable(j);if(!e.getDarkFeatures().RICH_TEXT_EDITOR){this.$(".ic-action-discard,.ic-textarea").prop("disabled",j).attr("aria-disabled",j)}},_saveDisable:function(j){if(e.getDarkFeatures().RICH_TEXT_EDITOR){d.setEditorBusy(j);c("#rte-button-cancel")[0].disabled=j}else{this.$(".ic-action-save").prop("disabled",j).attr("aria-disabled",j)}},renderEditor:function(){var l=this.$(".ic-body");var k=this.commentText;var j=f.Confluence.QuickEdit.QuickComment;return d.init({container:l,form:l.find("form.aui"),saveHandler:this.type==="pageComment"?j.createSaveHandler(h.bind(this._successCreatePageComment,this),j.saveCommentErrorHandler):h.bind(this.saveComment,this),cancelHandler:h.bind(this.discardComment,this),fetchContent:function(){var m=new c.Deferred();m.resolve({editorContent:k});return m},postDeactivate:h.bind(function(){g.trigger("ic:clearError");this.onFinished()},this),hideCancelButton:this.type==="topLevel"}).done(h.bind(this.renderEditorCompleted,this)).fail(h.bind(this.renderEditorFail,this))},showPageComment:function(l){var j=c(l.target).data("comment-id");var k=c("#comment-"+j);k.addClass("focused");k.scrollToElement()},_successCreatePageComment:function(j){Confluence.CommentDisplayManager.addComment(e.getCurrentUserInfo(),j,false,false,true);f.trigger("page.commentAddedOrUpdated",{commentId:j.id});this._setEditorIsNotDirty();if(e.getDarkFeatures().RICH_TEXT_EDITOR){this.keepSidebar=true;d.remove()}this.$el.html(Confluence.Templates.IC.pageComment({commentId:j.id}));e.addSidebarHeadingTooltip(this)},renderEditorCompleted:function(){g.trigger("ic:clearError");if(this.type==="topLevel"||this.type==="pageComment"){this.$("#rte-button-cancel").hide();if(this.type==="pageComment"){g.trigger("ic:error","We can\'t add an inline comment to this content. We\'ll add it as a page comment instead.");this.focusEditor()}}},renderEditorFail:function(){var j={closeable:true,callback:this.bindPageReloadLink};switch(this.type){case"pageComment":this._setEditorIsNotDirty();break;case"topLevel":this.$(".loading-container").hide();this.$(".ic-create-comment").hide();j.closeable=false;break;case"edit":case"reply":this.onFinished();break}g.trigger("ic:error",f.format("The editor didn\'\'t load properly. Please {0}reload the page{1} to try again.",'<a href="#" class="ic-reload-page">',"</a>"),j);g.trigger("ic:editor:load:fail")},bindPageReloadLink:function(){c(".ic-error").off("click",".ic-reload-page").on("click",".ic-reload-page",function(){window.location.reload();return false})},discardComment:function(j){j&&j.preventDefault();g.trigger("ic:clearError");this.onFinished()},_getContent:function(){if(e.getDarkFeatures().RICH_TEXT_EDITOR){return d.getContent()}else{return this.$("textarea").val()}},focusEditor:function(){if(e.getDarkFeatures().RICH_TEXT_EDITOR){if(this.type==="pageComment"){var j=c(f.Rte.getEditor()&&f.Rte.getEditor().getBody());var k=j.find("div")[0];f.Rte.getEditor().selection.select(k,1);f.Rte.getEditor().selection.collapse(1);k.focus()}else{f.Rte.getEditor()&&f.Rte.getEditor().focus()}}else{this.$(".ic-textarea:visible").focus()}},destroy:function(){if(e.getDarkFeatures().RICH_TEXT_EDITOR){d.remove()}this.remove()}});return i});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-comments:display-reply-view', location = 'view/display-reply/display-reply.soy' */
// This file was automatically generated from display-reply.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.IC == 'undefined') { Confluence.Templates.IC = {}; }


Confluence.Templates.IC.renderReply = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  Confluence.Templates.IC.commentHeader(opt_data, output);
  output.append('<div class="ic-body wiki-content"><div class="ic-content ic-reply-content">', opt_data.body, '</div></div>');
  if (opt_data.darkFeatures.INLINE_COMMENTS && ! opt_data.resolved) {
    Confluence.Templates.IC.renderReplyActions(opt_data, output);
  } else {
    output.append('<div>');
    Confluence.Templates.IC.timeLink({time: opt_data.lastModificationDate, commentUrl: opt_data.commentDateUrl}, output);
    output.append('</div>');
  }
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.IC.renderReplyActions = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="ic-actions"><ul>');
  if (opt_data.hasDeletePermission) {
    output.append('<li>');
    aui.buttons.button({text: "Delete", type: 'link', extraClasses: 'ic-action-delete-reply'}, output);
    output.append('</li>');
  }
  if (opt_data.hasEditPermission) {
    output.append('<li>');
    aui.buttons.button({text: "Edit", type: 'link', extraClasses: 'ic-action-edit-reply'}, output);
    output.append('</li>');
  }
  output.append('<li class="ic-action-like-reply"></li><li class="ic-date">');
  Confluence.Templates.IC.timeLink({time: opt_data.lastModificationDate, commentUrl: opt_data.commentDateUrl}, output);
  output.append('</li></ul></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.IC.showmoreReply = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div id="ic-showmore-container"><div class="ic-decor-line"/><div class="ic-decor-line"/><div class="ic-collapse-decor-center"><span>', soy.$$escapeHtml(AJS.format("{0} more replies",opt_data.totalReplies)), '</span></div></div>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-comments:display-reply-view', location = 'view/display-reply/display-reply.js' */
define("confluence/ic/view/display-reply",["jquery","ajs","underscore","backbone","confluence/ic/util/utils","confluence/ic/view/create-comment","confluence/ic/view/likes"],function(g,b,c,h,f,a,e){var d=h.View.extend({tagName:"div",className:"ic-display-reply",template:Confluence.Templates.IC.renderReply,events:{"click .ic-action-edit-reply":"editReply","click .ic-action-delete-reply":"confirmDelete"},initialize:function(){c.bindAll(this,"onEditCallback");this.$el.attr("data-comment-id",this.model.get("id"))},render:function(){var j=c.extend(this.model.toJSON(),{resolved:this.options.resolved,darkFeatures:f.getDarkFeatures()});var i=this.template(j);this.$el.html(i);if(this.likesView){this.likesView.remove()}this.likesView=new e({contentId:this.model.id}).render();if(this.likesView.$el.is(":empty")){this.$(".ic-action-like-reply").remove()}else{this.$(".ic-action-like-reply").html(this.likesView.el)}return this},editReply:function(j){var i=this;if(f.confirmProcess()){var k=f.getEditorFormat(this.model.get("id"));k.done(function(l){i.editView=new a({model:i.model,type:"edit",selection:{},onFinished:i.onEditCallback,commentText:l});i.$el.html(i.editView.$el);i.editView.render()}).fail(function(){h.trigger("ic:error","We can\'t edit this reply. The reply might have been deleted.")})}else{j&&j.currentTarget.blur()}},onEditCallback:function(){this.editView&&this.editView.destroy();this.editView=null;this.render()},deleteFail:function(k,i,j){if(i.status===401){h.trigger("ic:error","You don\'t have permission to delete this comment.")}else{h.trigger("ic:error","Could not complete your request.")}},confirmDelete:function(j){var i=window.confirm("Are you sure you want to delete this reply?");if(i===true){this.deleteReply(j)}},deleteReply:function(i){g(i.target).attr("aria-disabled",true).prop("disabled",true);this.model.destroy({wait:true,error:this.deleteFail,success:function(){h.trigger("ic:reply:delete")}})},destroy:function(){this.likesView.remove();this.editView&&this.editView.destroy();this.remove()}});return d});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-comments:reply-list-view', location = 'view/reply-list/reply-list.js' */
define("confluence/ic/view/reply-list",["jquery","ajs","underscore","backbone","confluence/ic/view/display-reply","confluence/ic/util/utils"],function(f,a,b,g,c,e){var d=g.View.extend({tagName:"div",className:"ic-replies",events:{"click #ic-showmore-container":"forceShowAllReplies"},initialize:function(h){if(!h.commentModel){throw new Error("Inline Comment Model should be passed as a parameter when init ReplyListView","ReplyListView")}this.replyViews=[];this.collection=h.commentModel.replies;this.source=h.source;this.listenTo(this.collection,"add remove",this.render);if(this.collection.isFetched!==true){this.listenToOnce(this.collection,"sync",this.fetchComplete);this.collection.fetch({reset:true})}this.expandReplies=false;this.COMMENT_NUMBER_TO_COLLAPSE=4},fetchComplete:function(){this.collection.isFetched=true;this.render();e.resizeContentAfterLoadingImages(this.$el)},render:function(h){if(this.collection.isFetched!==true){return this}if(h&&this.collection.last()===h){this.appendReply(h);return}this.cleanUpReplyViews();this.$el.empty();if(this.collection.length>this.COMMENT_NUMBER_TO_COLLAPSE&&this.expandReplies===false&&this.source!=="permalink"&&this.options.commentModel&&!this.options.commentModel.isResolved()){this.renderCollapsibleReplies()}else{this.renderFullReplies()}this.trigger("ic:reply-rendered",this.options.commentModel);this._hightlightReply();return this},renderFullReplies:function(){this.collection.each(function(h){this.appendReply(h)},this)},forceShowAllReplies:function(){this.expandReplies=true;this.render()},renderCollapsibleReplies:function(){this.renderExpendButton();var h=this.collection.last();this.appendReply(h)},appendReply:function(i){var h=this.createReplyView(i);this.replyViews.push(h);this.$el.append(h.render().el)},renderExpendButton:function(){this.$el.append(Confluence.Templates.IC.showmoreReply({totalReplies:this.collection.length-1}))},createReplyView:function(h){return new c({model:h,resolved:this.options.commentModel.isResolved()})},_hightlightReply:function(){if(this.source!=="permalink"){return}var j=window.location.search;var i=j.match(/(focusedCommentId|replyToComment)=(\d+)/);if(i==null){return}var h=parseInt(i[2],10);if(h&&h!==0){this.$("[data-comment-id="+h+"]").addClass("ic-comment-reply-highlight")}},cleanUpReplyViews:function(){var h;for(h=0;h<this.replyViews.length;h++){this.replyViews[h].destroy();this.replyViews[h]=null}this.replyViews=[]},destroy:function(){this.cleanUpReplyViews();this.remove()}});return d});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-comments:navigation-view', location = 'view/navigation/navigation.soy' */
// This file was automatically generated from navigation.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.IC == 'undefined') { Confluence.Templates.IC = {}; }


Confluence.Templates.IC.navigation = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  aui.buttons.button({type: 'text', id: 'ic-nav-next', extraClasses: 'aui-button-text', iconType: 'aui', iconClass: 'aui-icon-small aui-iconfont-arrow-down', text: '', isDisabled: opt_data.disabled, extraAttributes: {'tabIndex': opt_data.disabled ? '' : 0, 'title': "Next comment (N)"}}, output);
  aui.buttons.button({type: 'text', id: 'ic-nav-previous', extraClasses: 'aui-button-text', iconType: 'aui', iconClass: 'aui-icon-small aui-iconfont-arrow-up', text: '', isDisabled: opt_data.disabled, extraAttributes: {'tabIndex': opt_data.disabled ? '' : 0, 'title': "Previous comment (P)"}}, output);
  output.append((opt_data.showIndex) ? '<span class="ic-nav-x-out-of-y">' + soy.$$escapeHtml(AJS.format("{0} of {1}",opt_data.index,opt_data.size)) + '</span>' : '');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-comments:navigation-view', location = 'view/navigation/navigation.js' */
define("confluence/ic/view/navigation",["backbone"],function(b){var a=b.View.extend({tagName:"div",events:{"click #ic-nav-previous":"showPrevious","click #ic-nav-next":"showNext"},template:Confluence.Templates.IC.navigation,initialize:function(){this.collection=this.model.collection;this.listenTo(this.collection,"change:resolveProperties",this.onResolveToggle);this.disabled=this.collection.getCommentsOnPageCount()<=1;this.listenTo(b,"ic:show-previous",this.showPrevious);this.listenTo(b,"ic:show-next",this.showNext)},render:function(){this.$el.html(this.template({disabled:this.disabled,showIndex:!(this.model.isResolved()||this.model.get("deleted")),index:this.collection.getActiveIndexWithinPageComments()+1,size:this.collection.getCommentsOnPageCount()}));return this},onResolveToggle:function(){this.disabled=this.collection.getCommentsOnPageCount()<=1;this.render()},showPrevious:function(){if(this.disabled){return}var c=this.collection.getPrevCommentOnPage();if(c!=null){b.trigger("ic:view",c,"nav")}},showNext:function(){if(this.disabled){return}var c=this.collection.getNextCommentOnPage();if(c!=null){b.trigger("ic:view",c,"nav")}}});return a});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-comments:likes-view', location = 'view/likes/likes.soy' */
// This file was automatically generated from likes.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.IC == 'undefined') { Confluence.Templates.IC = {}; }


Confluence.Templates.IC.likes = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (opt_data.showLikeButton) {
    aui.buttons.button({text: (opt_data.isLikedByUser) ? soy.$$escapeHtml("Unlike") : soy.$$escapeHtml("Like"), type: 'link', extraClasses: 'ic-like-button'}, output);
  }
  output.append((opt_data.likesCount > 0) ? '<span class="ic-like-summary"><span class="ic-small-like-icon"></span><a class="ic-likes-count" data-content-id="' + soy.$$escapeHtml(opt_data.contentId) + '"><span class="ic-like-summary">' + soy.$$escapeHtml(opt_data.likesCount) + '</span></a></span>' : '');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-comments:likes-view', location = 'view/likes/likes.js' */
define("confluence/ic/view/likes",["backbone","ajs","confluence/ic/model/likes","confluence/ic/likes/likes-manager"],function(e,b,d,a){var c=e.View.extend({className:"ic-likes",events:{"click .ic-like-button":"toggleLike","click .ic-likes-count":function(f){Confluence.Likes.showLikeUsers&&Confluence.Likes.showLikeUsers.apply(f.currentTarget,[f])}},initialize:function(f){this.collection=new d(null,{contentId:f.contentId});this.listenTo(this.collection,"add remove reset",this.render);this.currentUserName=b.Meta.get("remote-user")||"";if(f.showLikeButton===undefined){this.showLikeButton=true}else{this.showLikeButton=f.showLikeButton}},render:function(){this.$el.empty();if(a.isLikable()){var h=this.currentUserName==="";var g=this.collection.length;var i=this.collection.isLikedByUser(this.currentUserName);var f=Confluence.Templates.IC.likes({showLikeButton:this.showLikeButton&&!h,isLikedByUser:i,likesCount:g,contentId:this.collection.contentId});this.$el.html(f)}return this},toggleLike:function(){this.collection.toggleLike()}});return c});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-comments:likes-view', location = 'view/likes/likes-manager.js' */
define("confluence/ic/likes/likes-manager",["underscore"],function(b){var a={init:function(c){this.likesCache=b.clone(c)||{}},getLikes:function(d){if(this.likesCache&&this.likesCache[d]){var c=b.map(this.likesCache[d].likes,function(e){return{username:e.user.name}});return c}return null},add:function(d,c){if(!this.likesCache[d]){this.likesCache[d]={likes:[]}}this.likesCache[d].likes.push({user:{name:c}})},remove:function(e,d){if(this.likesCache[e]&&this.likesCache[e].likes){var c=b.reject(this.likesCache[e].likes,function(f){return f.user.name===d});this.likesCache[e].likes=c}},isLikable:function(){return this.likesCache!==undefined}};return a});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-comments:display-comment-view', location = 'view/display-comment/display-comment.soy' */
// This file was automatically generated from display-comment.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.IC == 'undefined') { Confluence.Templates.IC = {}; }


Confluence.Templates.IC.displayComment = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="ic-comment-container">');
  Confluence.Templates.IC.sidebarHeading({authorUserName: opt_data.authorUserName, hasDeletePermission: opt_data.hasDeletePermission, hasResolvePermission: opt_data.hasResolvePermission, hasEditPermission: opt_data.hasEditPermission, hasReplyPermission: opt_data.hasReplyPermission, showMenu: opt_data.showMenu && ! opt_data.resolveProperties.resolved, darkFeatures: opt_data.darkFeatures}, output);
  if (opt_data.resolveProperties.resolved) {
    Confluence.Templates.IC.resolvedMask(null, output);
  } else {
    Confluence.Templates.IC.comment(opt_data, output);
  }
  output.append('</div>');
  if (! opt_data.resolveProperties.resolved) {
    output.append('<div class="ic-list"></div><div class="ic-reply-container">');
    if (opt_data.darkFeatures.INLINE_COMMENTS && opt_data.hasReplyPermission) {
      output.append('<div class="ic-reply-placeholder">');
      Confluence.Templates.IC.commentHeader({authorUserName: opt_data.currentAuthorUserName, authorAvatarUrl: opt_data.currentAuthorAvatarUrl, authorDisplayName: opt_data.currentAuthorDisplayName}, output);
      output.append('<div class="ic-body"><form class="aui"><textarea class="textarea ic-textarea" name="body" placeholder="', soy.$$escapeHtml("Reply"), '"></textarea></form></div></div>');
    }
    output.append('</div>');
  }
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.IC.deleteComment = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="ic-comment-container ic-deleted">');
  Confluence.Templates.IC.sidebarHeading({createComment: false, showMenu: false}, output);
  output.append('<div class="ic-delete-comment-view"><h2><span class="aui-icon ic-delete-image line">::before</span>', soy.$$escapeHtml("Deleted"), '</h2></div></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.IC.comment = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div data-comment-id="', soy.$$escapeHtml(opt_data.id), '" class="ic-container ic-display-comment">');
  Confluence.Templates.IC.commentHeader(opt_data, output);
  output.append('<div class="ic-body wiki-content"><div class="ic-content">', (opt_data.resolveProperties.resolved) ? '<blockquote><span class="ic-resolved-marker">' + soy.$$escapeHtml(opt_data.originalSelection) + '</span></blockquote>' : '', opt_data.body, '</div></div>');
  if (opt_data.resolveProperties.resolved) {
    Confluence.Templates.IC.renderResolvedActions(opt_data, output);
  } else {
    Confluence.Templates.IC.renderActions(opt_data, output);
  }
  output.append('</div>', (! opt_data.resolveProperties.resolved && opt_data.resolveProperties.resolvedTime > 0 && opt_data.resolveProperties.resolvedUser) ? '<div class="ic-unresolved-message">' + soy.$$escapeHtml(AJS.format("Reopened by {0} {1}",opt_data.resolveProperties.resolvedUser,opt_data.resolveProperties.resolvedFriendlyDate)) + '</div>' : '');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.IC.commentMenu = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (opt_data.darkFeatures.INLINE_COMMENTS && (opt_data.hasDeletePermission || opt_data.hasReplyPermission || opt_data.hasResolvePermission && opt_data.darkFeatures.RESOLVED_INLINE_COMMENTS)) {
    aui.buttons.button({type: 'subtle', extraClasses: 'aui-button-compact aui-dropdown2-trigger-arrowless aui-style-default ic-action-menu', iconType: 'aui', iconClass: 'aui-icon-small aui-iconfont-more', text: '', dropdown2Target: 'ic-menu-items'}, output);
    aui.dropdown2.contents({id: 'ic-menu-items', extraClasses: 'aui-style-default', content: '<ul class="aui-list-truncate">' + ((opt_data.hasResolvePermission && opt_data.darkFeatures.RESOLVED_INLINE_COMMENTS) ? '<li class="ic-action-resolve"><a href="#">' + soy.$$escapeHtml("Resolve") + '</a></li>' : '') + ((opt_data.hasReplyPermission) ? '<li class="ic-action-reply"><a href="#">' + soy.$$escapeHtml("Reply") + '</a></li>' : '') + ((opt_data.hasEditPermission) ? '<li class="ic-action-edit"><a href="#">' + soy.$$escapeHtml("Edit") + '</a></li>' : '') + ((opt_data.hasDeletePermission) ? '<li class="ic-action-delete"><a href="#">' + soy.$$escapeHtml("Delete") + '</a></li>' : '') + '</ul>'}, output);
  }
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.IC.renderResolvedActions = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (opt_data.darkFeatures.INLINE_COMMENTS) {
    output.append('<div class="ic-actions"><ul class="aui-list-truncate">');
    if (opt_data.hasResolvePermission && ! opt_data.isDangling) {
      output.append('<li>');
      aui.buttons.button({text: "Reopen", type: 'link', extraClasses: 'ic-action-unresolve'}, output);
      output.append('</li>');
    }
    output.append('<li class="hidden">');
    aui.buttons.button({type: 'link', extraClasses: 'ic-action-show-reply'}, output);
    output.append('</li>', (opt_data.hasReply) ? '' : '');
    if (opt_data.resolveProperties.resolvedTime > 0) {
      output.append('<li class="ic-resolved-message">');
      aui.icons.icon({useIconFont: true, size: 'small', icon: 'success'}, output);
      output.append('  <span>');
      Confluence.Templates.IC.timeLink({time: (opt_data.isDangling && opt_data.resolveProperties.resolvedByDangling) ? AJS.format("Resolved because the text was deleted by {0} {1}",opt_data.resolveProperties.resolvedUser,opt_data.resolveProperties.resolvedFriendlyDate) : AJS.format("Resolved by {0} {1}",opt_data.resolveProperties.resolvedUser,opt_data.resolveProperties.resolvedFriendlyDate), commentUrl: opt_data.commentDateUrl}, output);
      output.append('</span></li>');
    }
    output.append('</ul></div>');
  }
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.IC.renderActions = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (opt_data.darkFeatures.INLINE_COMMENTS) {
    output.append('<div class="ic-actions"><ul class="aui-list-truncate">');
    if (opt_data.hasResolvePermission && opt_data.darkFeatures.RESOLVED_INLINE_COMMENTS) {
      output.append('<li>');
      aui.buttons.button({text: "Resolve", type: 'link', extraClasses: 'ic-action-resolve'}, output);
      output.append('</li>');
    }
    output.append('<li class="ic-action-like"></li><li class="ic-date">');
    Confluence.Templates.IC.timeLink({time: opt_data.lastModificationDate, commentUrl: opt_data.commentDateUrl}, output);
    output.append('</li></ul></div>');
  }
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.IC.resolvedMask = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="ic-resolved-mask"><div class="ic-resolved-mask-content"><h2 class="ic-resolved-icon">');
  aui.icons.icon({useIconFont: true, size: 'large', icon: 'success', extraClasses: 'line'}, output);
  output.append(soy.$$escapeHtml("Resolved"), '</h2></div><div class="resolved-message-container"><div class="resolved-message-sideline"><p>', soy.$$escapeHtml("This comment isn\x27t gone forever! You can see resolved comments at any time."), '</p>');
  aui.buttons.button({text: "Show me", type: 'link', id: 'show-resolved-comments'}, output);
  output.append('</div></div></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.IC.pageComment = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="ic-comment-container">');
  Confluence.Templates.IC.sidebarHeading({createComment: false, showMenu: false}, output);
  output.append('<div class="ic-page-comment-view"><div class="ic-page-comment"><div class="ic-page-comment-content"><h2 class="ic-resolved-icon">');
  aui.icons.icon({useIconFont: true, size: 'large', icon: 'success', extraClasses: 'line'}, output);
  output.append(soy.$$escapeHtml("Saved"), '</h2></div><div class="ic-page-comment-message-container"><div class="ic-page-comment-message-sideline"><p>', soy.$$escapeHtml("Your comment has been saved as a page comment."), '</p><button id="show-page-comment" class="aui-button aui-button-link" data-comment-id="', soy.$$escapeHtml(opt_data.commentId), '">', soy.$$escapeHtml("Show me"), '</button></div></div></div></div></div>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-comments:display-comment-view', location = 'view/display-comment/display-comment.js' */
define("confluence/ic/view/display-comment",["jquery","ajs","underscore","backbone","confluence/ic/util/utils","confluence/ic/view/create-comment","confluence/ic/view/confirm-dialog","confluence/ic/view/reply-list","confluence/ic/view/resolved-dialog-discovery","confluence/ic/view/navigation","confluence/ic/view/likes"],function(d,g,j,i,e,l,k,h,c,b,a){var f=i.View.extend({tagName:"div",className:"ic-display-comment-view",template:Confluence.Templates.IC.displayComment,events:{"click .ic-action-reply":"replyComment","click .ic-action-resolve":"resolveComment","click .ic-action-edit":"editComment","click #show-resolved-comments":"showResolvedDialogDiscovery","click .ic-reply-placeholder .textarea":"replyComment","focus .ic-reply-container .textarea":"onReplyPlaceholderFocus"},initialize:function(m){j.bindAll(this,"confirm","destroy","deleteFail","replyComment","resolveComment","editComment","renderCommentOnly");this.model.set("active",true);this.listenTo(this.model,"change:resolveProperties",this.render);d("body").on("click",".ic-action-delete a",this.confirm);d("body").on("click",".ic-action-reply a",this.replyComment);d("body").on("click",".ic-action-resolve a",this.resolveComment);d("body").on("click",".ic-action-edit a",this.editComment);this.replyListView=new h({commentModel:this.model,source:m.source})},render:function(){this.$el.html(this.template(j.extend(this.model.toJSON(),{showMenu:true,currentAuthorUserName:g.Meta.get("remote-user"),currentAuthorAvatarUrl:e.getAuthorAvatarUrl(),currentAuthorDisplayName:e.getAuthorDisplayName(),darkFeatures:e.getDarkFeatures()})));if(this.model.isResolved()){this.$(".ic-comment-container").addClass("ic-resolved")}else{this.$(".ic-list").append(this.replyListView.render().el)}this._renderNavigation();this._renderLikes();e.addSidebarHeadingTooltip(this);return this},_renderNavigation:function(){if(this.navigationView){this.navigationView.remove()}this.navigationView=new b({model:this.model});this.navigationView.render();this.$("#ic-nav-container").html(this.navigationView.el)},_renderLikes:function(){if(this.likesView){this.likesView.remove()}this.likesView=new a({contentId:this.model.id}).render();this.$(".ic-action-like").html(this.likesView.el)},editComment:function(n){n.preventDefault();var m=this;if(this.editView){this.editView.focusEditor()}else{if(e.confirmProcess()){var o=e.getEditorFormat(this.model.get("id"));o.done(function(p){m.editView=new l({model:m.model,type:"edit",selection:{},onFinished:m.renderCommentOnly,commentText:p});m.$(".ic-display-comment").html(m.editView.$el);m.editView.render()}).fail(function(){i.trigger("ic:error","We can\'t edit this comment. The comment might have been deleted.")})}}},renderCommentOnly:function(){this.editView&&this.editView.destroy();this.editView=null;var m=j.extend(this.model.toJSON(),{darkFeatures:e.getDarkFeatures()});this.$(".ic-display-comment").html(d(Confluence.Templates.IC.comment(m)).children());this._renderLikes()},replyComment:function(m){m&&m.preventDefault();if(this.createReplyView){this.createReplyView.focusEditor()}else{if(e.confirmProcess()){this.createReplyView=new l({model:this.model,type:"reply",onFinished:j.bind(function(){this.createReplyView&&this.createReplyView.destroy();this.createReplyView=null},this)});this.$(".ic-reply-container").prepend(this.createReplyView.$el);this.createReplyView.render()}else{m&&m.currentTarget.blur()}}},confirm:function(n){n.preventDefault();if(this.model.replies.length>0){i.trigger("ic:error","You can\'t delete inline comment threads with replies.");return false}var m=new k({model:new i.Model({label:"Delete",message:"Are you sure you want to delete the comment?"}),$menuEl:d(".ic-action-menu"),$bodyEl:d("body")});this.$(".ic-sidebar-heading").append(m.$el);this.listenTo(m,"ic:confirm",this.deleteComment)},deleteComment:function(){var m=j.bind(function(){this.$el.html(Confluence.Templates.IC.deleteComment());this.model.set("deleted",true);this._renderNavigation();e.removeInlineLinksDialog(this.model.highlights);e.addSidebarHeadingTooltip(this);i.trigger("ic:delete")},this);this.model.destroy({wait:true,success:m,error:this.deleteFail})},deleteFail:function(o,m,n){if(m.status===401){i.trigger("ic:error","You don\'t have permission to delete this comment.")}else{if(m.status===409){i.trigger("ic:error",m.responseText)}else{i.trigger("ic:error","Could not complete your request.")}}},destroy:function(m){d("body").off("click",".ic-action-delete a",this.confirm);d("body").off("click",".ic-action-reply a",this.replyComment);d("body").off("click",".ic-action-resolve a",this.resolveComment);d("body").off("click",".ic-action-edit a",this.editComment);this.createReplyView&&this.createReplyView.destroy();this.editView&&this.editView.destroy();this.replyListView.destroy();this.navigationView&&this.navigationView.remove();this.likesView&&this.likesView.remove();m!==true&&this.remove()},resolveComment:function(m){m&&m.preventDefault();if(e.confirmProcess(true)){this.model.resolve(true,{wait:true,success:j.bind(this.onResolveComplete,this),error:this.onResolveFail})}},onResolveComplete:function(){this.createReplyView&&this.createReplyView.destroy();this.createReplyView=null;i.trigger("ic:resolved");e.removeInlineLinksDialog(this.model.highlights)},onResolveFail:function(n,m){if(m.status===401){i.trigger("ic:error","You don\'t have permission to resolve this comment.")}else{i.trigger("ic:error","Could not complete your request.")}},showResolvedDialogDiscovery:function(){(new c()).show();i.trigger("ic:resolved:show:recovery")},onReplyPlaceholderFocus:function(n){if(e.getDarkFeatures().RICH_TEXT_EDITOR){var m=(navigator.userAgent.indexOf("Safari")!==-1&&navigator.userAgent.indexOf("Chrome")==-1);m&&n.currentTarget.blur()}}});return f});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-comments:sidebar-view', location = 'view/sidebar/sidebar.js' */
define("confluence/ic/view/sidebar",["underscore","backbone","jquery","confluence/ic/view/display-comment","confluence/ic/view/create-comment","confluence/ic/util/utils","ajs"],function(d,h,f,c,a,e,b){var g=h.View.extend({tagName:"div",className:"ic-sidebar",events:{"click button.ic-action-hide":function(i){this.hide(i,true);h.trigger("ic:sidebar:close")}},initialize:function(i){var j=this;this.listenTo(h,"ic:view ic:overlap",this.displayComment);this.listenTo(h,"ic:create",this.displayCreateComment);this.listenTo(h,"ic:error",this.displayError);this.listenTo(h,"ic:hide-sidebar",this.hide);this.listenTo(h,"ic:clearError",this.clearError);if(e.getDarkFeatures().RICH_TEXT_EDITOR){b.bind("rte-quick-edit-ready",function(){var l=j.$el.find("#wysiwygTextarea_ifr");if(l.length!==0){var m=new MutationObserver(function(){l.resize()});m.observe(l[0],{attributes:true,attributeFilter:["style"]});if(!b.Rte.getEditor().getContent()){j._scrollToEditorView(l)}}else{var k=j.$el.is(":visible");if(!k){e.getPageContainer().css("padding-right","0");j.$wikiContent.css("position","static");e.getPageContainer().css({"min-height":0})}}})}else{b.bind("init.rte",d.bind(this.hideInEditMode,this))}this.defaultNavOffset=130;this.defaultPermalinkedCommentOffset=100;this.$wikiContent=i.$wikiContent||f("#content .wiki-content").first();this.sidebarObserver=new MutationObserver(d.bind(this.setSidebarYPos,this));this.sidebarObserver.observe(this.el,{childList:true,subtree:true});f(window).resize(d.debounce(d.bind(this.setSidebarYPos,this),100));b.bind("sidebar.expanded sidebar.collapsed",d.debounce(d.bind(this.setSidebarYPos,this),50))},displayComment:function(m,l,i){var k=function(){if(m.highlight.is(":hidden")){e.showHighlightContent(m.highlight);if(m.highlight.is(":hidden")){return}}this.distanceToTop=this.previousHighlightOffset||this.defaultNavOffset;this._emptySidebar(true);this.commentView=new c({model:m,source:l});this.show(true);this.previousHighlightOffset=m.highlight.position().top;var n=this.commentView.render().$el;n.css("visibility","hidden");if(l==="nav"){this._scrollToComment(m)}else{if(l==="permalink"){this._scrollToPermalinkedComment(m,this.defaultPermalinkedCommentOffset,i)}else{if(l==="quickreload"){this._scrollToQuickReloadComment(m)}}}this.$el.html(n);Confluence.Binder&&Confluence.Binder.userHover()};var j=(i===undefined)||(i.ignoreConfirmDialog===false);if(j){if(e.confirmProcess(true)){k.call(this)}}else{k.call(this)}},_scrollToQuickReloadComment:function(k){var j=f(".qr-feedback:first");var i=this.defaultPermalinkedCommentOffset;if(j.length>0){i=j.height()+67}this._scrollToPermalinkedComment(k,i)},_scrollToEditorView:function(j){var k=e.isDocTheme()?e.getSplitterContent():f("body, html");var l=this.$(".ic-display-comment-view").position().top;var i=j.closest(".ic-create-comment-view").position().top+l;if(k.height()<i||k.scrollTop()>i){k.animate({scrollTop:i},100)}},_scrollToPermalinkedComment:function(m,j,l){var k;if(e.isDocTheme()){var i=40;k=m.highlight.offset().top+e.getSplitterContent().scrollTop()-i;e.getSplitterContent().animate({scrollTop:k-j},100).promise().done(d.bind(this._scrollToPermalinkedCommentCompleted,this,l))}else{k=m.highlight.offset().top;f("html, body").animate({scrollTop:k-j},100).promise().done(d.bind(this._scrollToPermalinkedCommentCompleted,this,l))}},_scrollToPermalinkedCommentCompleted:function(i){if(i&&i.isReplyComment){this.commentView.replyComment()}},_scrollToComment:function(j){var i=j.highlight.position().top;if(e.isDocTheme()){e.getSplitterContent().animate({scrollTop:e.getSplitterContent().scrollTop()+i-this.distanceToTop},100)}else{f("html, body").animate({scrollTop:window.pageYOffset+i-this.distanceToTop},100)}},displayCreateComment:function(j,k,l){var i=this.isOnUnsupportedMacro();this._emptySidebar(true);this.createCommentView=new a({collection:j,selection:k,type:i?"pageComment":"topLevel",isFocus:false,stopFocus:true,commentText:i?"<blockquote>"+k.text+"</blockquote> <div/>":"",onFinished:d.bind(function(){if(!this.createCommentView.keepSidebar){if(this.isShowing){this.hide()}}},this),serializedHighlights:l});this.show();this.createCommentView.$el.css("visibility","hidden");this.$el.html(this.createCommentView.$el);this.createCommentView.render()},isOnUnsupportedMacro:function(){var i=f(".ic-current-selection");return e.containUnsupportedMacro(i)||e.containInternalLink(i)||e.containUserMetion(i)},displayError:function(j,i){i=d.extend({closeable:true},i);this.clearError();b.messages.warning(".ic-error",{body:j,closeable:i.closeable});i.callback&&i.callback()},clearError:function(){f(".ic-error").empty()},show:function(i){if(this.isShowing){return}this._toggleSidebar(i);this.isShowing=true},hideInEditMode:function(i){if(b.Meta.get("content-type")!=="comment"){this.sidebarObserver.disconnect();this.hide(i)}},hide:function(j,i){j&&j.preventDefault();if(e.confirmProcess(true)){if(!this.isShowing){return}e.getPageContainer().css({"min-height":"initial"});this._toggleSidebar(i);h.trigger("ic:sidebar-hidden");this.isShowing=false}},_toggleSidebar:function(i){var m=this;var n=f(".inline-comment-marker.active:first, .ic-current-selection:first");var l;var k=(e.isDocTheme()?e.getSplitterContent().scrollTop():window.pageYOffset);if(n.length>0){l=n.offset().top-k}var j=f.Deferred();var o=j.promise();if(this.isShowing){if(i&&e.isAnimationSupported()){o=e.animateSidebar(this,false)}else{e.getPageContainer().css("padding-right","0");this.$wikiContent.css("position","static");this._emptySidebar();j.resolve()}}else{e.getPageContainer().css("padding-right","280px");if(i&&e.isAnimationSupported()){o=e.animateSidebar(this,true)}else{j.resolve()}this.$wikiContent.css("position","relative")}o.done(function(){e.scrollToCommentAfterToggleSideBar(l,n)})},_emptySidebar:function(i){if(this.commentView){this.commentView.model.unset&&this.commentView.model.unset("active");this.commentView.destroy();this.commentView=null}if(this.createCommentView){this.createCommentView.keepSidebar=i;this.createCommentView.destroy();this.createCommentView=null}},setSidebarYPos:function(){if(!this.isShowing){return}var i=this.$el.offset().top;var l,j;if(this.commentView!=null){l=this.commentView.$el;j=this.commentView.model.highlight}else{if(this.createCommentView!=null){l=this.createCommentView.$el;j=f(".ic-current-selection")}else{return}}if(!j){return}var k=this.$(".ic-sidebar-heading").height();l.css({visibility:"visible",position:"absolute",top:(j.offset().top-i-k)+"px"});e.recalculateContentHeight(l)}});return g});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-comments:resolved-comment-view', location = 'view/resolved-comment/resolved-comment-list.soy' */
// This file was automatically generated from resolved-comment-list.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.IC == 'undefined') { Confluence.Templates.IC = {}; }


Confluence.Templates.IC.resolvedCommentDialog = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  var param8 = new soy.StringBuilder();
  aui.buttons.button({id: 'resolved-dialog-close-button', text: "Close", type: 'link'}, param8);
  aui.dialog.dialog2({id: 'ic-resolved-comment-dialog', removeOnHide: true, extraClasses: 'ic-resolved-comment-dialog-content', modal: true, titleText: "Resolved comments", footerActionContent: param8.toString(), content: '<!-- Placeholder for error message --><div id="ic-resolved-comment-dialog-error" />'}, output);
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.IC.resolvedDiscovery = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<p>', soy.$$escapeHtml("Got more to say? You can reopen resolved comments to continue the discussion."), '</p>');
  aui.buttons.button({id: 'ic-resolved-discovery-dismiss', text: "OK, got it", type: 'link'}, output);
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-comments:resolved-comment-view', location = 'view/resolved-comment/resolved-comment.js' */
define("confluence/ic/view/resolved-comment-item",["jquery","underscore","ajs","backbone","confluence/ic/util/utils","confluence/ic/view/reply-list","confluence/ic/view/likes"],function(g,b,a,h,f,e,d){var c=h.View.extend({tagName:"div",className:"ic-display-comment-view",template:Confluence.Templates.IC.comment,events:{"click .ic-action-unresolve":"unresolveComment","click .ic-action-show-reply":"showReply"},initialize:function(){b.bindAll(this,"onUnresolveComplete","destroy");this.replyListView=new e({commentModel:this.model});this.listenTo(this.replyListView,"ic:reply-rendered",function(){this.renderNumberOfReplies()})},render:function(){var i=this.template(b.extend(this.model.toJSON(),{showMenu:false,isDangling:this.model.isDangling(),darkFeatures:f.getDarkFeatures(),hasReply:this.model.replies.length>0}));this.$el.html(i);if(this.likesView){this.likesView.remove()}this.likesView=new d({contentId:this.model.id,showLikeButton:false}).render();this.$(".ic-action-like").html(this.likesView.el);this.$el.append(this.replyListView.$el.hide());this.replyListView.render();return this},unresolveComment:function(){h.trigger("ic:resolvedClearError");this.model.resolve(false,{wait:true,success:this.onUnresolveComplete,error:this.onUnresolveFail})},onUnresolveComplete:function(){h.trigger("ic:unresolved");this.$el.slideUp(this.destroy)},onUnresolveFail:function(j,i){if(i.status===401){h.trigger("ic:resolvedError","You don\'t have permission to resolve this comment.")}else{h.trigger("ic:resolvedError","Could not complete your request.")}},showReply:function(){this.$(".ic-action-show-reply").parent().remove();this.$(".ic-replies").slideDown()},renderNumberOfReplies:function(){var k=this.model.replies.length;var j=this.$(".ic-action-show-reply");if(k>0){var i;if(k===1){i=a.format("{0} reply",1)}else{i=a.format("{0} replies",k)}j.text(i);j.parent().removeClass("hidden")}else{j.parent().remove()}},destroy:function(){this.replyListView.destroy();this.remove()}});return c});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-comments:resolved-comment-view', location = 'view/resolved-comment/resolved-comment-list.js' */
define("confluence/ic/view/resolved-comment-list",["jquery","underscore","backbone","ajs","confluence/ic/view/resolved-comment-item"],function(e,c,f,b,d){var a=f.View.extend({events:{"click #resolved-dialog-close-button":"destroy"},template:Confluence.Templates.IC.resolvedCommentDialog,initialize:function(){c.bindAll(this,"render","destroy","_onKeyDown");this._resolvedCommentViews=[];this.listenTo(this.collection,"change:resolveProperties",this.onResolvedChanged);this.listenTo(f,"ic:resolvedError",this.displayError);this.listenTo(f,"ic:resolvedClearError",this.clearErrors);var g=e(this.template());this.setElement(g);this.dialog=b.dialog2(this.$el);e(document).bind("keydown",this._onKeyDown);b.trigger("remove-bindings.keyboardshortcuts")},render:function(){var g=e("<div>");var h=this.collection.getResolvedCount();if(h!==0){c.each(this.collection.getResolvedCommentsDesc(),function(j){var i=new d({model:j});this._resolvedCommentViews.push(i);g.append(i.render().$el)},this)}else{this.displayNoCommentMessage()}this.$(".aui-dialog2-content").append(g);this.dialog.show();if(this.options.focusCommentId){this.scrollToComment(this.options.focusCommentId)}f.trigger("ic:resolved:view",h);return this},onResolvedChanged:function(){if(this.collection.getResolvedCount()===0){this.displayNoCommentMessage()}},displayNoCommentMessage:function(){b.messages.generic(this.$(".aui-dialog2-content"),{body:"There are no resolved comments on this page.",closeable:false})},displayError:function(g){this.clearErrors();b.messages.warning(this.$("#ic-resolved-comment-dialog-error"),{body:g})},clearErrors:function(){this.$("#ic-resolved-comment-dialog-error").empty()},scrollToComment:function(h){var i=this.$(b.format("[data-comment-id={0}]",h));if(i.length){i.addClass("focused");return this.$(".aui-dialog2-content").animate({scrollTop:i.parent().position().top},100)}var g=new e.Deferred();return g.reject()},_onKeyDown:function(g){if(this.$el&&this.$el.is(":visible")&&g.keyCode===b.keyCode.ESCAPE){this.destroy()}},destroy:function(){b.trigger("add-bindings.keyboardshortcuts");e(document).unbind("keydown",this._onKeyDown);this.dialog.hide();this.dialog.remove();c.each(this._resolvedCommentViews,function(g){g.destroy()});this._resolvedCommentViews=null;this.remove()}});return a});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-comments:resolved-comment-view', location = 'view/resolved-comment/resolved-dialog-discovery.js' */
define("confluence/ic/view/resolved-dialog-discovery",["jquery","underscore","backbone","ajs"],function(d,c,e,b){var a=e.View.extend({DIALOG_BACKGROUND_COLOR:"#ffffff",DIALOG_BORDER_COLOR:"#f79232",initialize:function(){c.bindAll(this,"getDiscoveryDialogContent","destroy","onEndScroll")},template:Confluence.Templates.IC.resolvedDiscovery,show:function(){d.when(this.scrollTop()).done(this.onEndScroll)},onEndScroll:function(){this.showToolsMenu();this._discoveryDialog=this.createDiscoveryDialog();this._discoveryDialog.show()},showToolsMenu:function(){var f=d("#action-menu");f.on("aui-dropdown2-hide",this.destroy);d("#action-menu-link").trigger("aui-button-invoke");f.find("a.active").removeClass("active");f.find("#view-resolved-comments").addClass("active").focus()},createDiscoveryDialog:function(){var g={gravity:"w",hideCallback:this.destroy,width:280,noBind:true};var f=b.InlineDialog(d("#view-resolved-comments"),"ic-resolved-dialog-discovery",this.getDiscoveryDialogContent,g);f.on("click focusin mousedown",function(h){h.stopPropagation()});return f},getDiscoveryDialogContent:function(g,f,j){var h=this.template();g.html(h);var i=this;g.find("#ic-resolved-discovery-dismiss").on("click",function(){e.trigger("ic:resolved:dismiss:recovery");i._discoveryDialog.hide()});j();return false},scrollTop:function(){var f=d("#splitter-content");var h=!!f.length;var i=(h)?f:d("html, body");var g=(i.scrollTop()===0)?1:300;return i.animate({scrollTop:0},g)},destroy:function(){var f=d("#action-menu");f.off("aui-dropdown2-hide");if(f.is(":visible")){d("#action-menu-link").trigger("aui-button-invoke")}this._discoveryDialog.remove();this.remove()}});return a});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.auiplugin:aui-alignment', location = 'js/aui/internal/alignment.js' */
(function(A){AJS.Alignment=A(window.Tether);if(typeof window.define==="function"){define("aui/internal/alignment",["aui/internal/tether"],function(){return AJS.Alignment})}})(function(E){var C="data-aui-alignment";var J="data-aui-alignment-static";var H="aui-alignment";var A="aui-alignment-side-";var K="aui-alignment-snap-";var D="right middle";var I={"top left":{el:"bottom left",target:"top left"},"top center":{el:"bottom center",target:"top center"},"top right":{el:"bottom right",target:"top right"},"right top":{el:"top left",target:"top right"},"right middle":{el:"middle left",target:"middle right"},"right bottom":{el:"bottom left",target:"bottom right"},"bottom left":{el:"top left",target:"bottom left"},"bottom center":{el:"top center",target:"bottom center"},"bottom right":{el:"top right",target:"bottom right"},"left top":{el:"top right",target:"top left"},"left middle":{el:"middle right",target:"middle left"},"left bottom":{el:"bottom right",target:"bottom left"}};function G(Q,P,M){var N=A+P;var O=K+M;Q.className+=" "+N+" "+O}function B(M){var N=(M.getAttribute(C)||D).split(" ");return{side:N[0],snap:N[1]}}function F(N,M){return I[N+" "+M]||I[D]}function L(O,P){var R=B(O);var Q=F(R.side,R.snap);var N=O.hasAttribute(J);var M=new E({enabled:false,element:O,target:P,attachment:Q.el,targetAttachment:Q.target,classPrefix:H,constraints:[{to:"window",attachment:N===true?"none":"together"}]});G(O,R.side,R.snap);this._auiTether=M}L.prototype={destroy:function(){this._auiTether.destroy();return this},disable:function(){this._auiTether.disable();return this},enable:function(){this._auiTether.enable();return this}};return L});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.auiplugin:aui-trigger', location = '/js/aui/trigger.js' */
(function(A){define("aui/trigger",[],function(){return A(AJS.$,window.skate)})})(function(D,B){function C(E){return document.getElementById(E.getAttribute("aria-controls"))}function A(F,G){if(F.isEnabled()){var E=C(F);if(E&&E.message){E.message(G)}}}B("data-aui-trigger",{type:B.types.ATTR,insert:function(E){D(E).on({click:function(F){A(E,F);F.preventDefault()},"mouseenter mouseleave focus blur":function(F){A(E,F)}})},prototype:{disable:function(){this.setAttribute("aria-disabled","true")},enable:function(){this.setAttribute("aria-disabled","false")},isEnabled:function(){return this.getAttribute("aria-disabled")!=="true"}}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.auiplugin:aui-trigger', location = '/soy/trigger.soy' */
// This file was automatically generated from trigger.soy.
// Please don't edit this file by hand.

if (typeof aui == 'undefined') { var aui = {}; }
if (typeof aui.trigger == 'undefined') { aui.trigger = {}; }


aui.trigger.trigger = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<', soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'a'), (opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '', ' class="');
  aui.renderExtraClasses(opt_data, output);
  output.append('" aria-owns="', soy.$$escapeHtml(opt_data.menu.id), '" aria-controls="', soy.$$escapeHtml(opt_data.menu.id), '" aria-haspopup="true"', (opt_data.title) ? ' title="' + soy.$$escapeHtml(opt_data.title) + '"' : '', (opt_data.container) ? ' data-container="' + soy.$$escapeHtml(opt_data.container) + '"' : '', ((! opt_data.tagName || opt_data.tagName == 'a') && (! opt_data.extraAttributes || Object.prototype.toString.call(opt_data.extraAttributes) === '[object Object]' && ! opt_data.extraAttributes.href && ! opt_data.extraAttributes.tabindex)) ? ' tabindex="0"' : '', ' data-aui-trigger');
  aui.renderExtraAttributes(opt_data, output);
  output.append('>', (opt_data.content) ? opt_data.content : '', (opt_data.text) ? soy.$$escapeHtml(opt_data.text) : '', (! (opt_data.showIcon == false)) ? '<span class="icon ' + soy.$$escapeHtml(opt_data.iconClasses ? opt_data.iconClasses : 'aui-icon-dropdown') + '">' + ((opt_data.iconText) ? soy.$$escapeHtml(opt_data.iconText) : '') + '</span>' : '', '</', soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'a'), '>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.auiplugin:aui-inline-dialog2', location = '/js/aui/inline-dialog2.js' */
(function(A){define("aui/inline-dialog2",["./internal/alignment","./trigger"],function(B){return A(B,AJS.layer,window.skate)})})(function(J,C,E){var I=1000;function K(M){return document.querySelector('[aria-controls="'+M.id+'"]')}function F(N,O){var M=K(N);if(M){O(M)}}function G(M,O){var N=M.getAttribute("data-aui-responds-to")==="hover";if(N){O(M)}}function L(N,M){if(!N._auiAlignment){N._auiAlignment=new J(N,M)}}function B(N,M){L(N,M);N._auiAlignment.enable()}function A(N,M){L(N,M);N._auiAlignment.disable()}E("aui-inline-dialog2",{type:E.types.TAG,ready:function(M){F(M,function(N){N.setAttribute("aria-expanded",M.isVisible());N.setAttribute("aria-haspopup","true")});G(M,function(){M.mouseInside=false;M.addEventListener("mouseenter",function(){M.mouseInside=true;M.message({type:"mouseenter"})});M.addEventListener("mouseleave",function(){M.mouseInside=false;M.message({type:"mouseleave"})})})},remove:function(M){if(M._auiAlignment){M._auiAlignment.destroy()}},prototype:{remove:function(){C(this).remove()},show:function(){var M=this;C(this).show();F(this,function(N){B(M,N);N.setAttribute("aria-expanded","true")});return this},hide:function(){var M=this;C(this).hide();F(this,function(N){A(M,N);N.setAttribute("aria-expanded","false")});return this},isVisible:function(){return C(this).isVisible()},message:function(M){D(this,M);return this}}});function D(O,Q){var N={toggle:["click"],hover:["mouseenter","mouseleave","focus","blur"]};var M=O.getAttribute("data-aui-responds-to");var P=N[M];if(P&&P.indexOf(Q.type)>-1){H[Q.type](O,Q)}}var H={click:function(M){if(M.isVisible()){if(!C(M).isPersistent()){M.hide()}}else{M.show()}},mouseenter:function(M){if(!M.isVisible()){M.show()}if(M._clearMouseleaveTimeout){M._clearMouseleaveTimeout()}},mouseleave:function(M){if(C(M).isPersistent()||!M.isVisible()){return }if(M._clearMouseleaveTimeout){M._clearMouseleaveTimeout()}var N=setTimeout(function(){if(!M.mouseInside){M.hide()}},I);M._clearMouseleaveTimeout=function(){clearTimeout(N);M._clearMouseleaveTimeout=null}},focus:function(M){if(!M.isVisible()){M.show()}},blur:function(M){if(!C(M).isPersistent()&&M.isVisible()){M.hide()}}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.auiplugin:aui-inline-dialog2', location = 'soy/inline-dialog2.soy' */
// This file was automatically generated from inline-dialog2.soy.
// Please don't edit this file by hand.

if (typeof aui == 'undefined') { var aui = {}; }
if (typeof aui.inlineDialog2 == 'undefined') { aui.inlineDialog2 = {}; }


aui.inlineDialog2.inlineDialog2 = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<aui-inline-dialog2 ', (opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '', '  class="aui-layer aui-inline-dialog');
  aui.renderExtraClasses(opt_data, output);
  output.append('" data-aui-alignment="', soy.$$escapeHtml(opt_data.alignment ? opt_data.alignment : ''), '" data-aui-responds-to="', soy.$$escapeHtml(opt_data.respondsTo ? opt_data.respondsTo : ''), '" aria-hidden="true"');
  aui.renderExtraAttributes(opt_data, output);
  output.append('>');
  aui.inlineDialog2.inlineDialog2Content(opt_data, output);
  output.append('</aui-inline-dialog2>');
  return opt_sb ? '' : output.toString();
};


aui.inlineDialog2.inlineDialog2Content = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="aui-inline-dialog-contents">', (opt_data.content) ? opt_data.content : '', '</div>');
  return opt_sb ? '' : output.toString();
};


aui.inlineDialog2.trigger = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  aui.trigger.trigger(soy.$$augmentData(opt_data, {showIcon: opt_data.showIcon ? opt_data.showIcon : false}), output);
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-comments:grow-1507', location = 'grows/grow-1507/main.js' */
define("confluence/ic/grows/GROW_1507",["jquery","ajs","underscore","aui/inline-dialog2"],function(b,f,i){var j={};var c;j.start=function(){c=d();f.bind("rte-ready",function(){b.getJSON(f.contextPath()+"/rest/inlinecomments/1.0/storage/GROW-1507",function(k){if(!k.isExist&&b("#content").hasClass("view")&&b("#toolbar").closest(".quick-comment-container").hasClass("add")){if(b("#ic-grow-1507-dialog-trigger").length===0){a()}}})})};var a=function(){var k=b(Confluence.Templates.IC.GROW.GROW_1507.tipDialog());k.find("#showInstruction").on("click",i.bind(g,k[0]));k.find("#closeTipDialog").on("click",i.bind(e,k[0]));k[0].addEventListener("aui-layer-hide",function(){k.remove()});b("#rte-toolbar").append(Confluence.Templates.IC.GROW.GROW_1507.dialogTrigger());b("body").append(k);skate.init(k);k[0].show();Backbone.trigger("ic:grow1507:tip:show")};var g=function(){c.show();this.hide();Backbone.trigger("ic:grow1507:video:show");h()};var e=function(){this.hide();Backbone.trigger("ic:grow1507:tip:close");h()};var d=function(){b("body").append(Confluence.Templates.IC.GROW.GROW_1507.instructionDialog());var k=f.dialog2("#ic-grow-1507-instruction-dialog");k.on("hide",function(){Backbone.trigger("ic:grow1507:video:close")});k.$el.find("#dialog-close-button").on("click",function(){k.hide()});return k};var h=function(){b.ajax({url:f.contextPath()+"/rest/inlinecomments/1.0/storage/GROW-1507",type:"PUT"})};return j});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-comments:grow-1507', location = 'grows/grow-1507/template.soy' */
// This file was automatically generated from template.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.IC == 'undefined') { Confluence.Templates.IC = {}; }
if (typeof Confluence.Templates.IC.GROW == 'undefined') { Confluence.Templates.IC.GROW = {}; }
if (typeof Confluence.Templates.IC.GROW.GROW_1507 == 'undefined') { Confluence.Templates.IC.GROW.GROW_1507 = {}; }


Confluence.Templates.IC.GROW.GROW_1507.tipDialog = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<aui-inline-dialog2 id="ic-grow-1507-tip-dialog" class="aui-layer aui-inline-dialog" data-aui-alignment="top left" data-aui-responds-to="toggle" aria-hidden="true"><div class="aui-inline-dialog-contents"><p class="ic-tip-title">', soy.$$escapeHtml("COMMENT TIP"), '</p><p>', "Do you know about inline comments?\x3cbr\x3eYou can use them for reviewing, adding them on a specific part of the document.", '</p><p class="ic-noti-btn-group"><button class="aui-button" id="showInstruction">', soy.$$escapeHtml("Show me"), '</button><button class="aui-button aui-button-link grow-dismiss" id="closeTipDialog">', soy.$$escapeHtml("OK, got it"), '</button></p></div></aui-inline-dialog2>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.IC.GROW.GROW_1507.instructionDialog = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<section role="dialog" id="ic-grow-1507-instruction-dialog" class="aui-layer aui-dialog2 aui-dialog2-large" aria-hidden="true"><!-- Dialog header --><header class="aui-dialog2-header"><!-- The dialog\'s title --><h2 class="aui-dialog2-header-main">', soy.$$escapeHtml("Inline comments"), '</h2><!-- Close icon --><a class="aui-dialog2-header-close"><span class="aui-icon aui-icon-small aui-iconfont-close-dialog">', soy.$$escapeHtml("Close"), '</span></a></header><!-- Main dialog content --><div class="aui-dialog2-content"><img class="ic-instruction-video" src="', soy.$$escapeHtml(""), '/download/resources/com.atlassian.confluence.plugins.confluence-inline-comments:grow-1507/inline_comment_tutorial.gif"></div><!-- Dialog footer --><footer class="aui-dialog2-footer"><!-- Actions to render on the right of the footer --><div class="aui-dialog2-footer-actions"><button id="dialog-close-button" class="aui-button aui-button-link">', soy.$$escapeHtml("OK, got it"), '</button></div></footer></section>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.IC.GROW.GROW_1507.dialogTrigger = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div id="ic-grow-1507-dialog-trigger" data-aui-trigger="" aria-controls="ic-grow-1507-tip-dialog"></div>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-comments:app', location = 'analytics/ic-analytics.js' */
define("confluence/ic/analytics",["ajs","underscore","backbone"],function(b,c,d){var a={};c.extend(a,d.Events);a.start=function(){if(this.running===true){return}this.running=true;this.send=function(e,f){b.trigger("analytics",{name:e,data:f})};this.listenTo(d,"ic:highlight-panel-click",function(){this.send("confluence.highlight.actions.comment.inline")});this.listenTo(d,"ic:view",function(f,e){this.send("confluence.comment.inline.view");if(e==="nav"){this.send("confluence.comment.inline.view.nav")}if(e==="permalink"){this.send("confluence.comment.inline.view.permalink")}});this.listenTo(d,"ic:overlap",function(){this.send("confluence.comment.inline.overlap")});this.listenTo(d,"ic:edit",function(){this.send("confluence.comment.inline.edit")});this.listenTo(d,"ic:persist",function(){this.send("confluence.comment.inline.create")});this.listenTo(d,"ic:sidebar:close",function(){this.send("confluence.comment.inline.sidebar.close")});this.listenTo(d,"ic:reply:persist",function(){this.send("confluence.comment.inline.reply")});this.listenTo(d,"ic:delete ic:reply:delete",function(){this.send("confluence.comment.inline.delete")});this.listenTo(d,"ic:resolved",function(){this.send("confluence.comment.inline.resolved")});this.listenTo(d,"ic:unresolved",function(){this.send("confluence.comment.inline.unresolved")});this.listenTo(d,"ic:resolved:view",function(f){var e={total:f};this.send("confluence.comment.inline.resolved.view",e)});this.listenTo(d,"ic:resolved:dismiss:recovery",function(){this.send("confluence.comment.inline.resolved.dismiss")});this.listenTo(d,"ic:resolved:show:recovery",function(){this.send("confluence.comment.inline.resolved.discovery")});this.listenTo(d,"ic:open:dangled",function(f){var e={commentId:f.get("id"),pageId:b.Meta.get("page-id")};this.send("confluence.comment.inline.open.dangled",e)});this.listenTo(d,"ic:editor:load:fail",function(){var e={pageId:b.Meta.get("page-id")};this.send("confluence.comment.inline.editor.load.fail",e)});this.listenTo(d,"ic:resolve:dangled:failed",function(f){var e={commentId:f.get("id"),pageId:b.Meta.get("page-id")};this.send("confluence.comment.inline.resolved.dangled.failed",e)});this.listenTo(d,"ic:grow1507:tip:show",function(){var e={pageId:b.Meta.get("page-id")};this.send("confluence.comment.inline.grow1507.tipdialog.show",e)});this.listenTo(d,"ic:grow1507:tip:close",function(){var e={pageId:b.Meta.get("page-id")};this.send("confluence.comment.inline.grow1507.tipdialog.close",e)});this.listenTo(d,"ic:grow1507:video:show",function(){var e={pageId:b.Meta.get("page-id")};this.send("confluence.comment.inline.grow1507.video.show",e)});this.listenTo(d,"ic:grow1507:video:close",function(){var e={pageId:b.Meta.get("page-id")};this.send("confluence.comment.inline.grow1507.video.close",e)})};a.stop=function(){this.running=false;this.stopListening()};return a});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-comments:app', location = '/app/app.js' */
define("confluence/ic/app/app",["jquery","backbone","ajs","confluence/ic/model/comment","confluence/ic/model/comment-collection","confluence/ic/view/highlight-text","confluence/ic/view/sidebar","confluence/ic/view/resolved-comment-list","confluence/ic/util/text-highlighter","confluence/ic/util/utils","confluence/ic/analytics","confluence/ic/likes/likes-manager","exports","confluence/ic/grows/GROW_1507"],function(f,n,k,b,c,a,i,d,h,g,l,j,e,m){function o(){l.start();if(k.DarkFeatures.isEnabled("confluence-inline-comments-grow1507")){m.start()}var r=new i({$wikiContent:f("#content .wiki-content").first()});g.getPageContainer().append(r.$el);var q=new c();new a({collection:q});f("body").on("click","#view-resolved-comments",function(v){v.preventDefault();new d({collection:q}).render()});var u=f("#view-resolved-comments>span");var t=function(){u.text("Resolved comments"+k.format(" ({0})",q.getResolvedCount()))};q.fetch({cache:false});q.once("sync",function(v){var w=window.location.search;g.showFocusedComment(v,w,d);t()});q.on("change:resolveProperties",function(){t()});var p=function(x,w){var y=q.get(w);var v=false;if(y===undefined){y=new b({id:w});v=true}y.fetch({success:function(z){z._setHighlights(z.get("markerRef"));if(v){q.add(z)}else{y.replies.isFetched=false}n.trigger("ic:view",y,"quickreload")}})};k.bind("qr:show-new-thread",p);if(Confluence&&Confluence.Likes&&Confluence.Likes.getLikesCache){Confluence.Likes.getLikesCache().done(function(v){j.init(v);n.trigger("ic:likes-received")})}if(!g.getDarkFeatures().INLINE_COMMENTS){return}var s="com.atlassian.confluence.plugins.confluence-inline-comments:create-inline-comment";if(Confluence&&Confluence.HighlightAction){Confluence.HighlightAction.registerButtonHandler(s,{onClick:function(x){if(g.confirmProcess()){n.trigger("ic:highlight-panel-click");f(".inline-comment-marker").removeClass("active");var v=g.overlappedSelection(x,q);if(v){var w=f('.inline-comment-marker[data-ref="'+v.get("markerRef")+'"]');Confluence.HighlightAction.clearTextSelection();v.highlight=w;n.trigger("ic:overlap",v)}else{var y=(new h()).removeHighlight().highlight(x.range);n.trigger("ic:create",q,x,y)}}},shouldDisplay:Confluence.HighlightAction.WORKING_AREA.MAINCONTENT_ONLY})}}e.init=o});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-comments:bootstrap', location = '/app/bootstrap.js' */
require(["jquery","ajs","confluence/ic/app/app"],function(c,a,b){if(a.Meta.get("page-id")&&(a.Meta.get("page-id")===a.Meta.get("latest-page-id"))){c(b.init)}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.quickedit:editor-view-resources', location = 'jscripts/view-content/pushed-navigation-util.js' */
(function(){function b(){return AJS.Rte&&AJS.Rte.getEditor()&&!!$("#editpageform").length}var a=window.location.hash,c=window.location.search;Confluence.Editor.PushedNavUtil={isInEditPage:b,filterPreviewHashChange:function(){var d=b()||window.history.pushState||!(window.location.hash&&0===window.location.hash.indexOf("#!"))&&!(a&&0===a.indexOf("#!"));a=window.location.hash;return d},filterPreviewNavigationEvent:function(){var a=b()||!/[?&]preview=([^&]*)/.test(window.location.search)&&!/[?&]preview=([^&]*)/.test(c);
c=window.location.search;return a}}})();
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.quickedit:editor-view-resources', location = 'jscripts/view-content/pushed-navigation.js' */
(function(a,j){function b(){d?c.split("#")[0]!=window.location.href.split("#")[0]&&(a(window).unbind("popstate",g),window.location.reload()):c.split("#")[0]==window.location.href.split("#")[0]&&"editor"!==c.split("#")[1]||window.location.reload()}function e(){c=window.location.href}function h(){var a=Confluence.Editor.Drafts.unloadMessage();a?(Confluence.Editor.Drafts.unBindUnloadMessage(),confirm(a+"\n\n"+"Press OK to continue, or Cancel to stay on the current page.")?(AJS.trigger("analytics",{name:"rte.quick-edit.confirmation.leaving"}),
b()):(AJS.trigger("analytics",{name:"rte.quick-edit.confirmation.staying"}),d?(f=!0,window.history.forward()):window.location.hash="editor",Confluence.Editor.Drafts.bindUnloadMessage())):b()}function k(){Confluence.Editor.PushedNavUtil.isInEditPage()?"#editor"!==window.location.hash&&h():b()}function g(){f?f=!1:Confluence.Editor.PushedNavUtil.isInEditPage()?h():b()}function i(a,b){return function(){j.every(b,function(a){return a()})&&a()}}var d=!!window.history.pushState,f=!1,c=window.location.href,
l=[Confluence.Editor.PushedNavUtil.filterPreviewHashChange],m=[Confluence.Editor.PushedNavUtil.filterPreviewNavigationEvent],n=function(){e();d?(a(window).bind("popstate",i(g,m)),a(window).bind("rte-quick-edit-push-state",e)):(a(window).bind("hashchange",i(k,l)),a(window).bind("rte-quick-edit-push-hash",e))};AJS.toInit(function(){setTimeout(n,0)});AJS.bind("rte-quick-edit-enable-handlers",function(){"#editor"===window.location.hash&&a("#editPageLink").click()})})($,_);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-view-file-macro:view-file-macro-amd-resources', location = '/js/amd/confluence-amd.js' */
define("confluence",function(){return Confluence});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-view-file-macro:view-file-macro-amd-resources', location = '/js/amd/tinymce-amd.js' */
define("tinymce",function(){return tinymce});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-view-file-macro:common', location = '/js/view-file-macro-utils.js' */
define("vfm/view-file-macro-utils",[],function(){var a={DEFAULT_HEIGHT:"250",DEFAULT_HEIGHT_IN_COMMENT:"150",THUMBNAIL_STATUS_IN_PROGRESS:202,THUMBNAIL_STATUS_CONVERTED:200,THUMBNAIL_STATUS_ERROR:415,THUMBNAIL_STATUS_BUSY:429,THUMBNAIL_POLLING_PERIOD:1000,THUMBNAIL_POLLING_BACKOFF_RATIO:1.25,MAP_NICE_TYPE_TO_TEXT:{"pdf document":"PDF","word document":"Document","excel spreadsheet":"Spreadsheet","powerpoint presentation":"Presentation","generic file":"File"},getFileNameFromUrl:function(b){if(!b){return""}var c=b.indexOf("#");c=(c>=0)?c:b.length;b=b.substring(0,c);c=b.indexOf("?");c=(c>=0)?c:b.length;b=b.substring(0,c);c=b.lastIndexOf("/");b=b.substring(c+1,b.length);return decodeURIComponent(b)},isSupportPointerEvents:function(){var b=document.createElement("x");b.style.cssText="pointer-events:auto";return b.style.pointerEvents==="auto"},getParameterByName:function(d,c){var e=d.indexOf("#");if(e>=0){d=d.substring(0,e)}var b=new RegExp(c+"=([^&]*)","i").exec(d);return b?decodeURIComponent(b[1]):null},addParamsToUrl:function(b,h){var f="";if(b.indexOf("?")===-1){f="?"}else{f="&"}var e=Object.keys(h);for(var d=0;d<e.length;d++){var c=e[d];var g=h[c];if(d>0){f+="&"}f+=c+"="+g}return b+f},getFileTypeTextFromNiceType:function(b){b=b?b.toLowerCase():"";return this.MAP_NICE_TYPE_TO_TEXT[b]?this.MAP_NICE_TYPE_TO_TEXT[b]:b}};return a});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-view-file-macro:common', location = '/js/services/conversion-service.js' */
define("vfm/services/conversion-service",["ajs","jquery"],function(a,b){return{postThumbnailConversionResults:function(c){var d=a.contextPath()+"/rest/documentConversion/latest/conversion/thumbnail/results";var e=Object.keys(c);var f=_.map(e,function(g){return{id:g,v:c[g].version}});return b.ajax({type:"POST",url:d,contentType:"application/json",data:JSON.stringify(f)})},getThumbnailUrl:function(d,c){return a.contextPath()+"/rest/documentConversion/latest/conversion/thumbnail/"+d+"/"+c}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:file-types-utils-resources', location = 'utils/file-types-utils.js' */
(function(){var e={"aui-iconfont-file-image":"image/gif image/jpeg image/pjpeg image/png image/tiff image/bmp".split(" "),"aui-iconfont-file-pdf":["application/pdf"],"aui-iconfont-file-video":"audio/mpeg audio/x-wav audio/mp3 audio/mp4 video/mpeg video/quicktime video/mp4 video/x-m4v video/x-flv video/x-ms-wmv video/avi video/webm video/vnd.rn-realvideo".split(" "),"aui-iconfont-file-code":"text/html text/xml text/javascript application/javascript application/x-javascript text/css text/x-java-source".split(" "),
"aui-iconfont-file-doc":["application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],"aui-iconfont-file-xls":["application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],"aui-iconfont-file-ppt":["application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation"],"aui-iconfont-file-txt":["text/plain"],"aui-iconfont-file-zip":["application/zip","application/java-archive"]},b={},c;for(c in e)for(var f=
e[c],d=0,g=f.length;d<g;d++)b[f[d]]=c;AJS.Confluence.FileTypesUtils={getAUIIconFromMime:function(a){return b[a]||"aui-iconfont-file-generic"},isImage:function(a){return b[a]&&0===a.indexOf("image/")}}})();
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-view-file-macro:view-file-macro-embedded-file-view-soy-resources', location = '/templates/embedded-file-view.soy' */
// This file was automatically generated from embedded-file-view.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.ViewFileMacro == 'undefined') { Confluence.ViewFileMacro = {}; }
if (typeof Confluence.ViewFileMacro.Templates == 'undefined') { Confluence.ViewFileMacro.Templates = {}; }


Confluence.ViewFileMacro.Templates.embeddedFile = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<span class="confluence-embedded-file-wrapper"><a class="confluence-embedded-file" href="', soy.$$escapeHtml(opt_data.fileSrc), '" data-nice-type="', soy.$$escapeHtml(opt_data.niceType), '" data-file-src="', soy.$$escapeHtml(opt_data.fileSrc), '" data-linked-resource-id="', soy.$$escapeHtml(opt_data.attachmentId), '" data-linked-resource-type="attachment" data-linked-resource-container-id="', soy.$$escapeHtml(opt_data.containerId), '" data-linked-resource-default-alias="', soy.$$escapeHtml(opt_data.fileName), '" data-mime-type="', soy.$$escapeHtml(opt_data.mimeType), '" data-has-thumbnail="', (opt_data.hasThumbnail) ? 'true' : 'false', '" data-linked-resource-version="', soy.$$escapeHtml(opt_data.attachmentVersion), '"', (opt_data.unresolvedCommentCount && opt_data.unresolvedCommentCount >= 0) ? 'data-unresolved-comment-count=' + soy.$$escapeHtml(opt_data.unresolvedCommentCount) : '', '><img src="', soy.$$escapeHtml(opt_data.placeholderSrc), '" height="', soy.$$escapeHtml(opt_data.height), '" />', (! opt_data.hasThumbnail) ? '<span class="title">' + soy.$$escapeHtml(opt_data.fileName) + '</span>' : '', '</a></span>');
  return opt_sb ? '' : output.toString();
};


Confluence.ViewFileMacro.Templates.embeddedUnknownFile = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-file unknown-attachment" src="', soy.$$escapeHtml(opt_data.placeholderSrc), '" /></span>');
  return opt_sb ? '' : output.toString();
};


Confluence.ViewFileMacro.Templates.overlayEmbeddedFile = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<span class="overlay"></span>');
  return opt_sb ? '' : output.toString();
};


Confluence.ViewFileMacro.Templates.overlayEmbeddedFileCommentCount = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<span class="comment-count-overlay"><span class="content">', soy.$$escapeHtml(opt_data.commentCountRep), '</span></span>');
  return opt_sb ? '' : output.toString();
};


Confluence.ViewFileMacro.Templates.overlayEmbeddedFileFileTypeDesc = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<span class="file-type-desc-overlay"><i class="aui-icon aui-icon-small ', soy.$$escapeHtml(opt_data.iconClass), '"></i><span class="content"> ', soy.$$escapeHtml(opt_data.fileType), '</span></span>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-view-file-macro:view-file-macro-embedded-file-view-resources', location = '/js/services/file-service.js' */
define("vfm/services/file-service",["ajs","jquery"],function(a,b){return{getCommentCount:function(c,e){var d="/rest/files/1.0/files/content/{0}/commentCount?attachmentId={1}";d=a.contextPath()+a.format(d,c,e);return b.get(d)}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-view-file-macro:view-file-macro-embedded-file-view-resources', location = '/js/components/embedded-file-view.js' */
define("vfm/components/embedded-file-view",["jquery","backbone","ajs","confluence","vfm/view-file-macro-utils"],function(c,g,f,h,i){function b(s){var r=c(s.el);var q=r.find(".confluence-embedded-image, .confluence-embedded-file");if(q.hasClass("unknown-attachment")||(q.attr("src")&&q.attr("src").indexOf("/confluence/plugins/servlet/confluence/placeholder/unknown-attachment")>=0)){return this}var j={mimeType:"",niceType:""};var k=q.hasClass("confluence-embedded-image");var o=r.parent().is("a");var m=q.attr("data-has-thumbnail")==="true";if(k){j.mimeType="image/png"}else{j.mimeType=q.attr("data-mime-type");j.niceType=q.attr("data-nice-type")!=="null"?q.attr("data-nice-type"):"generic file"}var p=!o?e(q):"";var l=(!k&&m)?a(j):"";if(p||l){var n=h.ViewFileMacro.Templates.overlayEmbeddedFile();r.append(c(n).append(p).append(l));if(l){r.addClass("has-comment-overlay")}}}var d=function(j){j=parseInt(j,10);j=c.isNumeric(j)?j:0;return j>9?"9+":j+""};var e=function(o){var j="",k=o.attr("data-linked-resource-container-id"),m=o.attr("data-linked-resource-id");if(k&&m){var n=o.attr("data-unresolved-comment-count");var l=d(n);if(l!=="0"){j=h.ViewFileMacro.Templates.overlayEmbeddedFileCommentCount({commentCountRep:l})}}return j};var a=function(j){return h.ViewFileMacro.Templates.overlayEmbeddedFileFileTypeDesc({fileType:i.getFileTypeTextFromNiceType(j.niceType),iconClass:f.Confluence.FileTypesUtils.getAUIIconFromMime(j.mimeType)})};return{render:b}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-view-file-macro:view-file-macro-resources', location = '/js/vfm.js' */
require(["jquery","ajs","vfm/components/embedded-file-view"],function(c,a,b){c(document).on("click",".confluence-embedded-file.unknown-attachment",function(d){d.preventDefault()});a.toInit(function(){c(".confluence-embedded-file-wrapper").each(function(){b.render({el:this})})})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-previews:confluence-previews-jquery', location = '/js/confluence/preview-support.js' */
define("cp/confluence/preview-support",["ajs"],function(a){var d=function(){var e=b.SELECTOR_STRINGS.IMAGE+", "+b.SELECTOR_STRINGS.LINK_IMAGE+", "+b.SELECTOR_STRINGS.EXTERNAL_IMAGE;if(b.isPDFSupported()){e+=", "+b.SELECTOR_STRINGS.PDF+", "+b.SELECTOR_STRINGS.LINK_PDF}return e};var c=function(){return b.SELECTOR_STRINGS.IMAGE+", "+b.SELECTOR_STRINGS.EXTERNAL_IMAGE+", "+b.SELECTOR_STRINGS.FILE+", "+b.SELECTOR_STRINGS.LINK_FILE+", "+b.SELECTOR_STRINGS.ATTACHMENT_MACRO};var b={SELECTOR_STRINGS:{IMAGE:"img.confluence-embedded-image[data-linked-resource-id]",EXTERNAL_IMAGE:"img.confluence-embedded-image.confluence-external-resource",PDF:"a.confluence-embedded-file[data-nice-type='PDF Document']",LINK_IMAGE:"a[data-linked-resource-type='attachment'][data-nice-type='Image']",LINK_PDF:"a[data-linked-resource-type='attachment'][data-nice-type='PDF Document']",FILE:"a.confluence-embedded-file",LINK_FILE:"a[data-linked-resource-type='attachment']",FILE_OVERLAY:"span.confluence-embedded-file-wrapper .overlay",ATTACHMENT_MACRO:".plugin_attachments_container a.previewAttachmentLink"},VIEW_MODE:{FULL:"full",COMMENT:"comment",SIMPLE:"simple"},isPDFSupported:function(){return a.DarkFeatures.isEnabled("pdf-preview")},getFileSelectorString:function(){if(a.DarkFeatures.isEnabled("previews.trigger-all-file-types")){return c()}else{return d()}}};return b});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-previews:confluence-previews-jquery', location = '/js/confluence/preview.js' */
define("cp/confluence/preview",["underscore","jquery","cp/confluence/preview-support","ajs","confluence/jsUri"],function(k,e,f,i,b){var j,l;e(document).ready(g);function g(){var o=e(f.getFileSelectorString());o.off("click.fb");e(document.body).off("click.filePreviews");e(document.body).on("click.filePreviews",f.getFileSelectorString(),n);e(document.body).on("click.filePreviews",f.SELECTOR_STRINGS.FILE_OVERLAY,h);e(window).on("popstate",function(){if(!l&&i.DarkFeatures.isEnabled("previews.sharing.pushstate")){a()}});a()}function n(o){if(!o.altKey&&!o.ctrlKey&&!o.metaKey&&!e(this).parent().closest("a, #draft-changes-dialog, #cp-annotations").length){o.preventDefault();m(this)}}function h(p){p.preventDefault();var o=e(p.target);var q=o.closest("span.confluence-embedded-file-wrapper");m(q.find(f.SELECTOR_STRINGS.IMAGE+","+f.SELECTOR_STRINGS.FILE),{autoShowAnnotationPanel:o.closest(".comment-count-overlay").length>0})}function m(p,o){if(!l){l=WRM.require(["wr!com.atlassian.confluence.plugins.confluence-previews:confluence-previews-resources","wrc!file-viewer"],function(){j=require("cp/confluence/file-preview-loader");d(p,o)});Confluence.PageLoadingIndicator(e("body")).showUntilResolved(l,"We were unable to load the file previewer")}else{l.done(k.partial(d,p,o))}return l}var d=function(q,p){p=p||{};var o=e("#content");var r=e(q).closest(".comment,.cq-content,.ic-content");if(!p.viewMode){if(!(o.hasClass("page")||o.hasClass("blogpost"))){p.viewMode=f.VIEW_MODE.SIMPLE}else{if(r.length){p.viewMode=f.VIEW_MODE.COMMENT}}}if(p.viewMode===f.VIEW_MODE.COMMENT){j.showPreviewerForComment(q,r,p)}else{if(p.viewMode===f.VIEW_MODE.SIMPLE){j.showPreviewerForSingleFile(q,p)}else{p.viewMode=f.VIEW_MODE.FULL;j.showPreviewer(q,p)}}};function a(){if(c()){var q=new b(window.location.href);var p=window.history.pushState&&i.DarkFeatures.isEnabled("previews.sharing.pushstate");if(q.getQueryParamValue("preview")&&!p){var r="#!/preview"+q.getQueryParamValue("preview");var o=decodeURIComponent(q.deleteQueryParam("preview").setAnchor(r).toString());if(window.history.replaceState){window.history.replaceState({},"",o)}else{window.location=o}}else{if(q.anchor().indexOf("!/preview")===0&&p){var o;if(q.getQueryParamValue("preview")){o=q.setAnchor("")}else{o=q.addQueryParam("preview",q.anchor().substr("!/preview".length,q.anchor().length)).setAnchor("")}window.history.replaceState({},"",o)}}m()}}function c(){var o=new b(window.location.href);return i.DarkFeatures.isEnabled("previews.sharing")&&(o.getQueryParamValue("preview")||(o.anchor()&&o.anchor().indexOf("!/preview")===0))}return{loadConfluencePreviews:m}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-previews:confluence-previews-jquery', location = '/js/confluence/jquery-previewer.js' */
require(["cp/confluence/preview","jquery"],function(b,a){a.fn.previewer=function(c){if(!a(this).length){return this}var d=a.extend({},c);return this.each(function(){var f=a(this);var e=f.closest("li");var g=d.src||f.attr("data-image-src")||f.attr("src");if(g){f.click(function(j){var i={src:g,type:d.type,thumbnail:g,title:d.title||e.attr("data-file-name")||g,rank:0,id:e.attr("data-attachment-id"),ownerId:e.attr("data-owner-id")};var h=b.loadConfluencePreviews([i],{source:d.from||"custom",viewMode:d.viewMode||"simple"});d.zindex&&h.done(function(){a("#cp-container").css({"z-index":d.zindex})})})}})}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-mobile:mobile-switch-resources', location = 'js/mobile-switch.js' */

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-mobile:mobile-switch-resources', location = 'com/atlassian/confluence/plugins/mobile/soy/mobile-switch.soy' */

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.extra.jira:macro-browser-resources', location = 'templates/extra/jira/view-in-jira.js' */
AJS.bind("add-handler.property-panel",function(b,a){AJS.log("add-handler.property-panel: panel name = "+a.name);if(a.name!="macro"){return}a.registerButtonHandler("view-in-jira",function(d,j){if(AJS.Editor.JiraConnector.servers){var s=AJS.Editor.JiraConnector.servers;var l=AJS.$(j);var g=l.attr("data-macro-default-parameter");var k=l.attr("data-macro-parameters")||"";var t=Confluence.MacroParameterSerializer.deserialize(k);var n=/=|!=|~|>|<|!~| is | in /i;var h=function(u){var i=u.indexOf("|");if(i>=0){return u.substring(0,i)}return u};var f=g||t.jqlQuery||t.key||h(k);var c=t.server;var q=t.serverId;var p=f.match(n);var m=null;for(var o=0;o<s.length;o++){if((q&&s[o].id==q)){m=s[o];break}if((c&&s[o].name==c)||(!c&&s[o].selected)){m=s[o];break}}if(m!=null){var e=(typeof m.displayUrl!=="undefined")?m.displayUrl:m.url;if(e.charAt(e.length-1)=="/"){e=e.substr(0,e.length-1)}var r=tinymce.isIE?"_blank":"confluence-goto-jiralink-"+AJS.params.pageId;if(!p){window.open(e+"/browse/"+encodeURIComponent(f),r)}else{window.open(e+"/secure/IssueNavigator.jspa?reset=true&jqlQuery="+encodeURIComponent(f),r)}}}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.extra.jira:macro-browser-resources', location = 'templates/extra/jira/show-summary.js' */
AJS.bind("init.rte",function(){if(!AJS.Confluence&&!AJS.Confluence.PropertyPanel&&!AJS.Confluence.PropertyPanel.Macro){AJS.logError("JIRA Issues Macro : can't register property panel init handler since AJS.Confluence.PropertyPanel.Macro is undefined");return}var a="showSummary";var f="jira";var e="jiraissues";var d="show-summary";AJS.Confluence.PropertyPanel.Macro.registerInitHandler(c,f);AJS.Confluence.PropertyPanel.Macro.registerInitHandler(c,e);function c(g,m,j){var l=AJS.$.grep(m,function(i){return i.parameterName==d})[0];if(!l){AJS.logError("JIRA Issues Macro - Show-summary : The system cannot find SummaryButton, all buttons are: ");for(var k in m){AJS.logError(m[k].text)}return}if(b(g)){var h=AJS.SummaryHelper.getParam(g,a);if(h=="false"){l.text="Show summary"}else{l.text="Hide summary"}}else{l.className+=" hidden"}}function b(g){var i=AJS.$(g);var j=i.attr("src");if(!j){return true}var h=AJS.SummaryHelper.getParam(g,"count");if(j.indexOf("confluence.extra.jira/jira-table")==-1&&h!="true"){return true}return false}});AJS.bind("add-handler.property-panel",function(b,a){if(a.name!="macro"){return}a.registerButtonHandler("show-summary",function(e,c){var d=AJS.SummaryHelper.getParam(c,"showSummary");AJS.SummaryHelper.updateMacro("jira",c,"showSummary",d=="false"?"true":"false")})});AJS.SummaryHelper=(function(){return{getCurrentParams:function(a){return Confluence.MacroParameterSerializer.deserialize(a.attr("data-macro-parameters"))},getParam:function(a,d){var c=AJS.$(a);var b=AJS.SummaryHelper.getCurrentParams(c);return b[d]},updateMacro:function(b,a,c,g){var e=AJS.$(a);AJS.Rte.getEditor().selection.select(e[0]);AJS.Rte.BookmarkManager.storeBookmark();var d=AJS.SummaryHelper.getCurrentParams(e);d[c]=g;var f={contentId:Confluence.Editor.getContentId(),macro:{name:b,params:d,defaultParameterValue:e.attr("data-macro-default-parameter")}};tinymce.confluence.MacroUtils.insertMacro(f)}}})();
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.drag-and-drop:files-upload-analytics', location = 'js/analytics/files-upload-analytics.js' */
define("conf/confluence-drag-and-drop/analytics/files-upload-analytics",["ajs","underscore"],function(d,e){return{triggerEvent:function(b,a,c){a&&a.length&&(a={multiple:1<a.length,number:a.length,isAllImage:void 0===c?this._isAllImages(a):c},d.trigger("analyticsEvent",{name:b,data:a}))},_isAllImages:function(b){return e.every(b,function(a){return a.nativeFile&&a.nativeFile.type&&0===a.nativeFile.type.indexOf("image/")})}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:panel-components', location = 'files/file-item/file-item.soy' */
// This file was automatically generated from file-item.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.File == 'undefined') { Confluence.Templates.File = {}; }


Confluence.Templates.File.fileDialogListItem = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<li class="attached-file loading" data-attachment-id="', soy.$$escapeHtml(opt_data.file.id), '" data-owner-id="', soy.$$escapeHtml(opt_data.file.ownerId), '" data-file-name="', soy.$$escapeHtml(opt_data.file.fileName), '"><div class="file-container" title="', soy.$$escapeHtml(opt_data.tooltip), '">', (opt_data.file.isImage) ? '<img class="thumbnail hidden" src="' + soy.$$escapeHtml(opt_data.file.nonceUrl) + '" ><a href="' + soy.$$escapeHtml(opt_data.file.downloadUrl) + '" class="abs-icon zoom">Zoom</a><p class="hidden image-preview-throbber">&nbsp;</p>' : (opt_data.file.isPreviewable) ? '<span class="thumbnail ' + soy.$$escapeHtml(opt_data.file.iconClass) + '" ><i class="aui-icon size-48 svg-icon ' + soy.$$escapeHtml(opt_data.file.iconAUIClass) + '">File</i></span><a href="' + soy.$$escapeHtml(opt_data.file.downloadUrl) + '" class="abs-icon zoom">Zoom</a><p class="hidden image-preview-throbber">&nbsp;</p>' : '<span class="thumbnail ' + soy.$$escapeHtml(opt_data.file.iconClass) + '" ><i class="aui-icon size-48 svg-icon ' + soy.$$escapeHtml(opt_data.file.iconAUIClass) + '">File</i></span>', '<i class="abs-icon select">Select</i></div><span class="caption filename" title="', soy.$$escapeHtml(opt_data.file.fileName), '">', opt_data.highlightedImageNameContent, '</span>', (opt_data.highlightedParentTitleContent) ? '<span class="caption owner-title" title="' + soy.$$escapeHtml(opt_data.file.parentTitle) + '">' + opt_data.highlightedParentTitleContent + '</span>' : '', '</li>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.File.fileDialogListItemPlaceHolder = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<li class="attached-file loading" data-attachment-id="', soy.$$escapeHtml(opt_data.file.id), '" data-file-name="', soy.$$escapeHtml(opt_data.file.fileName), '"><div class="file-container" title="', soy.$$escapeHtml(opt_data.file.fileName), '">', (opt_data.file.isImage && opt_data.file.url) ? '<img class="thumbnail" src="' + soy.$$escapeHtml(opt_data.file.url) + '">' : '<span class="thumbnail"><i class="aui-icon size-48 svg-icon ' + soy.$$escapeHtml(opt_data.file.iconAUIClass) + '">File</i></span>', '<div id="docs-progress-bar-', soy.$$escapeHtml(opt_data.file.fileId), '" class="aui-progress-indicator"><span class="aui-progress-indicator-value"></span></div><div class="overlay"></div><i class="aui-icon aui-icon-small aui-iconfont-close-dialog abs-icon cancel">Cancel</i></div><span class="caption filename" title="', soy.$$escapeHtml(opt_data.file.fileName), '">', soy.$$escapeHtml(opt_data.file.fileName), '</span><span class="caption owner-title hidden" title=""></span></li>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:panel-components', location = 'files/file-item/file-item-model.js' */
(function(d,b){var c=Backbone.Model.extend({defaults:{id:-1,ownerId:-1,fileName:"",nonceUrl:"",isImage:!1,isFilePlaceHolder:!1,isSelect:!1,thumbnailUrl:"",downloadUrl:""},initialize:function(){var a=this;this._findDownloadUrl();this._findThumbnailUrl();this.set("fileName",this.getFileName());this.set("nonceUrl",this.getNonceUrl());this.set("isImage",this.isImage());this.set("isPreviewable",this.isPreviewable());this.get("attachmentId")&&this.set("id",this.get("attachmentId"));this.get("isFilePlaceHolder")&&
this.set("id",this.get("fileId"));this.listenTo(this,"change:link",function(){a.set("nonceUrl",a.getNonceUrl());a._findDownloadUrl()});this.set("iconAUIClass",this._parseFileNameToAuiIconClass(this.get("fileName")))},isImage:function(){return this.get("isImage")?!0:!!this.get("thumbnailUrl")},isPreviewable:function(){return"pdf document"===(this.get("niceType")||"").toLocaleLowerCase()||this.isImage()},getFileName:function(){return this.get("fileName")||this.get("name")||""},getDestinationUrl:function(){return AJS.REST.wikiLink(this.attributes).destination},
getNonceUrl:function(){var a=this.get("thumbnailUrl");if(0<=a.indexOf("modificationDate"))return a;var b=this.get("lastModifiedDate"),b=b?b.date:+new Date,b=encodeURIComponent(b);a&&(b=(a.indexOf("?")+1?"&":"?")+"nonce="+b,a+=b);return a},getRelativeUrl:function(a){if(!a)return a;0===a.indexOf(b.getBaseUrl())&&(a=a.replace(b.getBaseUrl(),""),a=b.getContextPath()+a);return a},_findThumbnailUrl:function(){!this.get("thumbnailUrl")&&this.get("thumbnailLink")&&this.set("thumbnailUrl",this.getRelativeUrl(this.get("thumbnailLink").href))},
_findDownloadUrl:function(){var a=this.get("link");!this.get("downloadUrl")&&a&&(a=_.findWhere(a,{rel:"download"}).href,this.set("downloadUrl",this.getRelativeUrl(a)))},_getFileExtension:function(a){return a.substr(a.lastIndexOf(".")+1)},_parseFileNameToAuiIconClass:function(a){a="undefined"!==typeof plupload?plupload.mimeTypes[this._getFileExtension(a)]:"";return AJS.Confluence.FileTypesUtils.getAUIIconFromMime(a)}});b.Editor=b.Editor||{};b.Editor.FileDialog=b.Editor.FileDialog||{};b.Editor.FileDialog.FileItemModel=
c})(AJS.$,Confluence||{});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:panel-components', location = 'files/file-item/file-item-view.js' */
(function(e,d){var f=Backbone.View.extend({template:d.Templates.File.fileDialogListItem,model:null,initialize:function(a){var b=this;this.eventListener=a.eventListener;this.model=a.model;this.showContainerInfo=a.showContainerInfo;this.highlighter=a.highlighter;this.listenTo(this.model,"change:isSelect",function(){b.$el.toggleClass("selected",b.model.get("isSelect"))})},render:function(){var a=this.highlighter||new d.Highlighter,b=this.model.get("space"),c=this.model.getFileName(),a={file:this.model.attributes,
tooltip:this.showContainerInfo&&b?c+" ("+b.name+")":c,highlightedImageNameContent:a.highlight(c),highlightedParentTitleContent:this.showContainerInfo?a.highlight(this.model.attributes.parentTitle):null};this.$el=e(this.template(a));this.el=this.$el[0];this.delegateEvents();this.$el.find(".file-container").tooltip({aria:!0});this.$el.attr("data-destination",this.model.getDestinationUrl());this.model.get("isImage")?this._renderLoadingSpinner():this.$el.removeClass("loading");this.model.get("isPreviewable")&&
this._renderPreviewButton();return this},_renderPreviewButton:function(){this.$(".zoom").on("click",_.bind(function(a){a.preventDefault();a={src:this.model.get("downloadUrl"),thumbnail:this.model.get("nonceUrl")||this.model.get("downloadUrl"),type:this.model.get("contentType"),rank:0,title:this.model.getFileName(),id:this.model.get("id"),ownerId:this.model.get("ownerId"),version:this.model.get("version")};this._setupAndShowPreviewer(a)},this))},_setupAndShowPreviewer:function(a){var b={viewMode:"simple",
openPreviewCallback:function(){e("#insert-image-dialog").hide();e(".aui-blanket").hide()},closePreviewCallback:function(){e("#insert-image-dialog").show();e(".aui-blanket").show()}},c=_.bind(function(a,b){this.loader=require("cp/confluence/file-preview-loader");var c=this.loader.setupPreviewForSingleFile([a],b);c.on("fv.open",b.openPreviewCallback);c.on("fv.close",b.closePreviewCallback);c.open();c.showFileWhere()},this);this.dfd?this.dfd.done(_.partial(c,a,b)):this.dfd=WRM.require("wr!com.atlassian.confluence.plugins.confluence-previews:confluence-previews-resources",
_.partial(c,a,b))},_renderLoadingSpinner:function(){var a=this,b=this.$el.find(".image-preview-throbber").removeClass("hidden"),c=Raphael.spinner(b[0],8,"#666"),d=this.$el.find("img").load(function(){c();b.remove();d.removeClass("hidden");a.$el.removeClass("loading")})}});d.Editor=d.Editor||{};d.Editor.FileDialog=d.Editor.FileDialog||{};d.Editor.FileDialog.FileItemView=f})(AJS.$,Confluence||{});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:panel-components', location = 'files/file-item/file-placeholder-view.js' */
(function(b,a){var d=Backbone.View.extend({model:null,template:a.Templates.File.fileDialogListItemPlaceHolder,initialize:function(a){this.model=a.model;this.eventListener=a.eventListener;this.eventListener.on("file.placeholder.process",_.bind(this._setUploadInProgress,this))},events:{"click .cancel":"_cancelUpload"},render:function(){this.$el=b(this.template({file:this.model.attributes}));this.el=this.$el[0];this.delegateEvents();return this},_setUploadInProgress:function(a,b){var c=this.$el.find("#docs-progress-bar-"+
b||"");c.length&&(1===a&&this.$(".cancel").hide(),c.show(),AJS.progressBars.update(c,a))},_cancelUpload:function(){this.eventListener.trigger("uploadingfile.cancelled",this.model.get("fileId"))}});a.Editor=a.Editor||{};a.Editor.FileDialog=a.Editor.FileDialog||{};a.Editor.FileDialog.FilePlaceHolderView=d})(AJS.$,Confluence||{});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:panel-components', location = 'files/file-list/file-list-collection.js' */
(function(d,b){var c=Backbone.Collection.extend({model:b.Editor.FileDialog.FileItemModel,clearSelection:function(){this.each(function(a){a.get("isSelect")&&a.set("isSelect",!1)});this.trigger("clear.selection")},getAllSelectItems:function(){return this.filter(function(a){return a.get("isSelect")})},setSelection:function(a){_.each(a,function(a){return a.set("isSelect",!0)})},resetFiles:function(a){this.reset();for(var b=0;b<a.length;b++)this.addFile(a[b])},addFile:function(a){a=this.add(a);this.trigger("add-file",
a.at(a.length-1))},removeFile:function(a){this.remove(a);this.trigger("remove-file",a)},replaceFile:function(a,b){this.remove(a);this.add(b);this.trigger("replace-file",a,b)}});b.Editor=b.Editor||{};b.Editor.FileDialog=b.Editor.FileDialog||{};b.Editor.FileDialog.FileListCollection=c})(AJS.$,Confluence||{});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:panel-components', location = 'files/file-list/file-list-view.js' */
(function(d,c){var f=c.Editor.FileDialog.FileItemView,g=c.Editor.FileDialog.FileItemModel,h=c.Editor.FileDialog.FilePlaceHolderView,i=Backbone.View.extend({eventListener:null,events:{click:"_clearSelection","click li.attached-file":"_clickItem","dblclick li.attached-file":"_doubleClickItem"},initialize:function(a){var b=this;this.collection=a.collection;a.eventListener&&(this.eventListener=a.eventListener,this.listenTo(this.eventListener,"uploadingfile.completed",this._addUploadedFile),this.listenTo(this.eventListener,
"uploadingfile.cancelled",this._cancelUploadingFile));this.listenTo(this.collection,"reset",this._clearFileList);this.listenTo(this.collection,"add-file",this._renderNewItem);this.listenTo(this.collection,"remove-file",this._removeItem);this.listenTo(this.collection,"replace-file",this._replaceItem);this.listenTo(this.collection,"change:isSelect",function(){this.context.setSelectItems(this.collection.getAllSelectItems())});this.listenTo(this.collection,"change:link",function(a){b.collection.removeFile(a);
b.collection.addFile(a)});this.updateDialogContext(a.context);this.updatePanelContext(a.panelContext)},_addUploadedFile:function(a,b){var e=this,c=AJS.contextPath()+"/rest/prototype/1/attachment/"+b+".json";d.get(c).done(function(b){var b=new g(b),c=e.collection.get(a);c||(c=e.collection.findWhere({fileName:b.get("fileName")}));c?e.collection.replaceFile(c,b):e.collection.addFile(b)})},_cancelUploadingFile:function(a){(a=this.collection.get(a))&&(a.get("previousUploadedFile")?this.collection.replaceFile(a,
a.get("previousUploadedFile")):this.collection.removeFile(a))},render:function(){return this},resetFileList:function(a,b){b=b||{};this.$el.find(".loading-message").addClass("hidden");this.$el.find(".no-files").remove();this.collection.resetFiles(a);0===this.collection.length&&this.$fileList.before(d("<p></p>").addClass("no-files").text(this.noFileMessage));b.shouldClearSelection&&this.collection.clearSelection();this._checkError(b.errors);this.$el.sizeToFit()},_getViewFromModel:function(a){return a.get("isFilePlaceHolder")?
(new h({model:a,eventListener:this.eventListener})).render():(new f({model:a,showContainerInfo:this.showContainerInfo,highlighter:this.highlighter,eventListener:this.eventListener})).render()},_renderNewItem:function(a){if(this.$fileList&&this.$fileList.length){var b=this._getViewFromModel(a);this.$fileList.prepend(b.el);a.get("isFilePlaceHolder")||a.set("isSelect",!0)}},_removeItem:function(a){this.$fileList&&this.$fileList.length&&(a=this._getDomElementByFileName(a.get("fileName")))&&a.remove()},
_replaceItem:function(a,b){if(this.$fileList&&this.$fileList.length){var c=this._getViewFromModel(b),d=this._getDomElementByFileName(a.get("fileName"));d&&d.length?d.replaceWith(c.el):this.$fileList.prepend(c.el);b.set("isSelect",!0)}},_getDomElementByFileName:function(a){var b=null;this.$fileList.find("li").each(function(){var c=d(this);c.attr("data-file-name")===a&&(b=c)});return b},updatePanelContext:function(a){a&&(this.panelContext=a,this.errors=this.panelContext.errors||[],this.$el=this.fileContainer=
this.panelContext.fileContainer,this.el=this.$el[0],this.$fileList=this.$el.find(".file-list"),this.delegateEvents(),this.noFileMessage=this.panelContext.noFileMessage,this.showContainerInfo=this.panelContext.showContainerInfo,this.highlighter=this.panelContext.highlighter,this.displayErrors=this.panelContext.displayErrors)},updateDialogContext:function(a){a&&(this.context=a,this.contextOptions=this.context.options)},_checkError:function(a){(a=a||[])&&a.length&&this.displayErrors(a)},_clearSelection:function(a){a=
a&&d(a.target);if(!a||!a.hasClass("close-tip"))this.collection.clearSelection(),this.$el.find(".current").removeClass("current")},_clearFileList:function(){this.$fileList&&this.$fileList.empty()},_clickItem:function(a){a.stopPropagation();a.preventDefault();var b=d(a.target);b.closest(".zoom").length||(a.isTrigger||this.$fileList.find(".current").removeClass("current"),a=b.closest("li").attr("data-attachment-id"),(a=this.collection.get(a))&&!a.get("isFilePlaceHolder")&&a.set("isSelect",!a.get("isSelect")))},
_doubleClickItem:function(a){var a=d(a.target).closest("li"),b=a.attr("data-attachment-id");if((b=this.collection.get(b))&&!b.get("isFilePlaceHolder"))a.click(),this.context.insert()}});c.Editor=c.Editor||{};c.Editor.FileDialog=c.Editor.FileDialog||{};c.Editor.FileDialog.FileListView=i})(AJS.$,Confluence||{});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:panel-components', location = 'files/base-panel/base-panel-view.js' */
(function(b,a){var d=Backbone.View.extend({context:null,cssContainer:"",cssPanel:"",textErrorSearch:"Error searching for attachments from Confluence. The server may be unavailable.",textErrorRetrieving:"Error retrieving attachments from Confluence. The server may be unavailable.",textDefaultErrorMessage:"Could not upload the file to Confluence. The server may be unavailable.",textUploading:"Image uploading...",initialize:function(){},createPanel:function(c){this.context=c;this.render();var a=this;if(c=this.context.getPanel(this.panelId))c.onselect=
function(){a.context.clearSelection();a.focus&&a.focus()}},render:function(){return this},getPanelElement:function(){return b(this.cssPanel,this.context.baseElement)},getContainer:function(){return b(this.cssContainer)},getForm:function(){return b("form",this.getPanelElement())},clearContainer:function(){var a=this.getContainer();a.find(".loading-message").removeClass("hidden");a.find(".warning").addClass("hidden")},clearErrors:function(){this.messenger.clearMessages()},displayErrors:function(a){this.uploader.displayErrors(a);
this.getContainer().sizeToFit()},getNoFileContainer:function(){return this.getPanelElement().find(".no-files")},getFileListContainer:function(){return this.getPanelElement().find("ul.file-list")}});a.Editor=a.Editor||{};a.Editor.FileDialog=a.Editor.FileDialog||{};a.Editor.FileDialog.BasePanel=d;a.Editor.FileDialog.eventListener=_.extend({},Backbone.Events)})(AJS.$,Confluence||{});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:panel-components', location = 'files/attachments-panel/attachments-panel.soy' */
// This file was automatically generated from attachments-panel.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.File == 'undefined') { Confluence.Templates.File = {}; }


Confluence.Templates.File.uploadFileForm = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.hasAttachPermission) ? '<div id="upload-attachment">' + ((opt_data.isNonSupportDragDrop) ? '<form action="' + soy.$$escapeHtml("") + '/pages/attachfile.action" method="post" enctype="multipart/form-data">' : '<form>') + '<label id="upload-files-button" class="aui-button upload-files"><span class="file-upload-icon">' + soy.$$escapeHtml("Upload files") + '</span>&nbsp;&nbsp;' + soy.$$escapeHtml("Upload files") + ((opt_data.isNonSupportDragDrop) ? '<input name="file_0" type="file" class="upfile invisible">' : '') + '</label>' + ((opt_data.isNonSupportDragDrop) ? '<input type="hidden" name="minorEdit_0" value="true" /><input type="hidden" name="atl_token" value="' + soy.$$escapeHtml(opt_data.atlToken) + '" />' : '') + '</form>' + ((opt_data.isNonSupportDragDrop) ? '<div class="upload-in-progress hidden">' + soy.$$escapeHtml("Image uploading...") + '</div>' : '') + '</div>' : '', (opt_data.hasAttachPermission) ? '<div class="divider"></div>' : '');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.File.attachedFilesPanel = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div id="attached-files" class="scroll-wrapper">');
  aui.message.warning({title: '', closeable: 'true', content: ''}, output);
  output.append('<div class="loading-message hidden">', soy.$$escapeHtml("Loading\u2026"), '</div><ul class="file-list"></ul></div>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:panel-components', location = 'files/attachments-panel/attachments-panel-view.js' */
(function(f,b){var i=b.Editor.FileDialog.FileListView,g=b.Editor.FileDialog.FileItemModel,j=b.Editor.FileDialog.FileListCollection,h=b.Editor.FileDialog.BasePanel,k=h.extend({id:"attachments",panelId:"",cssPanel:".attachments-panel",cssContainer:"#attached-files",textNoFileMessage:"There are no files attached to this page.",textPanelTitle:"Attached to this page",initialize:function(a){h.prototype.initialize.call(this);this.eventListener=a.eventListener;this.context=null;
this.collection=new j;this.fileListView=new i({collection:this.collection,eventListener:this.eventListener});this.xhrCount=0},render:function(){var a=this;this.eventListener.trigger("AttachmentsPanelView.render",this);this.fileListView.updateDialogContext(this.context);this.panelId=this.context.addPanel(this.textPanelTitle,this.getPanel(),"attachments-panel");this.el=this.getPanelElement();this.$el=f(this.el);this.delegateEvents();this.fileListView.updatePanelContext({fileContainer:this.getContainer(),
noFileMessage:this.textNoFileMessage,showContainerInfo:!1,errors:[],displayErrors:function(c){a.uploader.clearErrors();a.uploader.displayErrors(c)}});this.uploader=this.getUploaderController(this.context);this.messenger=this.uploader.getMessageHandler();this.collection.reset();this._canAttachFiles()?this.refresh({shouldClearSelection:!0}):this.refresh({errors:["You\'ll need to ask permission to insert files here."],shouldClearSelection:!0});return this},getPanel:function(){return b.Templates.File.uploadFileForm({isNonSupportDragDrop:!this._hasXhrSupport(),
atlToken:AJS.Meta.get("atl-token"),hasAttachPermission:this._canAttachFiles()})+b.Templates.File.attachedFilesPanel()},_overideUploaderClientForNonDragDropSupport:function(){var a=this;return{onUploadSuccess:function(c){for(var e=0;e<c.length;e++){var d=c[e].id,b=a.collection.get(d);b&&a.collection.removeFile(b);d=AJS.contextPath()+"/rest/prototype/1/attachment/"+d+".json";f.get(d).done(function(c){c=new g(c);a.collection.addFile(c)})}},pack:function(){a.getContainer().sizeToFit()},getDefaultErrorMessage:function(){return a.textDefaultErrorMessage},
getDefaultUploadingMessage:function(){return a.textUploading},displayErrors:function(c){this.getMessageHandler().displayMessages(c);a._showErrorIconInMessageBox();this.pack()}}},getUploaderController:function(){return b.AttachmentUploader({baseElement:this.getPanelElement()},_.bind(this._overideUploaderClientForNonDragDropSupport,this))},refresh:function(a){var c=this,b=a.shouldClearSelection?this.getPanelElement().find(".loading-message"):!1,d=this.xhrCount+=1;AJS.getJSONWrap({url:this._getUrlREST(),
messageHandler:this.messenger,loadingElement:b,errorMessage:this.textErrorRetrieving,successCallback:function(b){d===c.xhrCount&&(a.data=b,c._onSuccessLoadFiles(a))},errorCallback:_.bind(this._onErrorLoadFiles,this)})},_onSuccessLoadFiles:function(a){this.fileListView.resetFileList(a.data.attachment?a.data.attachment:a.data.images,a)},_onErrorLoadFiles:function(){this._showErrorIconInMessageBox()},_showErrorIconInMessageBox:function(){var a=this.messenger.getMessageContainer().find("ul");a.toggleClass("one-message",
1===a.find("li").length);a.closest(".aui-message").append("<span class='aui-icon icon-warning'></span>")},setUploadInProgress:function(a,c){this.eventListener.trigger("file.placeholder.process",a,c)},attachmentUploaded:function(a,c){this.eventListener.trigger("uploadingfile.completed",a,c)},attachmentUploadingCancelled:function(a){this.eventListener.trigger("uploadingfile.cancelled",a)},_hasXhrSupport:function(){var a,c;try{a=new XMLHttpRequest,c=!(!a.sendAsBinary&&!a.upload)&&!(jQuery.browser.mozilla&&
-1<jQuery.browser.version.indexOf("1.9.1"))}catch(b){c=!1}return c},addPreviewImage:function(a){if(window.File&&window.FileReader&&window.FileList&&window.Blob){var c=this,b=tinymce.isIE?1048576:5242880;a.isImage=a.nativeFile&&a.nativeFile.type&&this._isImageType(a.nativeFile.type);if(a.isImage&&a.nativeFile.size<b){var d=new FileReader;d.onload=function(){c._addFilePlaceHolderToCollection(a,d.result)};d.readAsDataURL(a.nativeFile)}else this._addFilePlaceHolderToCollection(a,null)}},_addFilePlaceHolderToCollection:function(a,
c){var b=null,d=this.collection.findWhere({fileName:a.name});d&&(this.collection.removeFile(d),d.get("isFilePlaceHolder")?d.get("previousUploadedFile")&&(b=d.get("previousUploadedFile")):b=d);b=new g({isFilePlaceHolder:!0,fileName:a.name,fileId:a.id,fileNative:a.nativeFile,url:c?c:"",isImage:a.isImage,niceType:a.isImage?"Image":"",fileType:a.nativeFile.type,thumbnailUrl:c?c:"",previousUploadedFile:b});this.collection.addFile(b)},_isImageType:function(a){return AJS.Confluence.FileTypesUtils.isImage(a)},
_canAttachFiles:function(){return AJS.Meta.getBoolean("can-attach-files")},_getUrlREST:function(){var a=parseInt(AJS.Meta.get("attachment-source-content-id"),10);return AJS.REST.makeUrl("content/"+a+"/attachments.json")},focus:function(){this.collection.clearSelection()}});b.Editor=b.Editor||{};b.Editor.FileDialog=b.Editor.FileDialog||{};b.Editor.FileDialog.AttachmentsPanelView=k})(AJS.$,Confluence||{});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:panel-components', location = 'files/external-panel/external-panel.soy' */
// This file was automatically generated from external-panel.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.File == 'undefined') { Confluence.Templates.File = {}; }


Confluence.Templates.File.webPanel = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="insert-web-image"><form id="insert-web-image-form" action="#" class="aui"><fieldset class="inline"><div class="web-image-input"><label for="insert-web-image-image-url" id="insert-web-image-image-url-label">', soy.$$escapeHtml("Image URL:"), '</label><input type="text" class="text image-url" id="insert-web-image-image-url" name="insert-web-image-image-url"></div><input type="submit" class="image-preview aui-button" value="', soy.$$escapeHtml("Preview"), '"></fieldset></form><p class="faraway image-preview-area"></p><p class="hidden image-preview-error">', soy.$$escapeHtml("This image couldn\x27t be loaded for preview. Please check the URL."), '</p><p class="hidden image-preview-throbber">&nbsp;</p></div>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:panel-components', location = 'files/external-panel/external-panel-view.js' */
(function(c,a){var e=a.Editor.FileDialog.BasePanel,f=a.Editor.FileDialog.BasePanel.extend({id:"external",panelId:"",cssPanel:".web-image-panel",cssContainer:".insert-web-image",textPanelTitle:"Images from the web",template:a.Templates.File.searchPanel,events:{"submit form":"_submit","keyup input.image-url":"_checkAllowInsert","click input.image-url":"_checkAllowInsert","blur input.image-url":"_checkAllowInsert"},initialize:function(){e.prototype.initialize.call(this);this.context=
null;this.token=0},render:function(){this.panelId=this.context.addPanel(this.textPanelTitle,this.getPanel(),"web-image-panel");this.container=this.getContainer();this.preview=this.container.find(".image-preview-area");this.throbber=this.container.find(".image-preview-throbber");this.killSpinner=null;this.error=this.container.find(".image-preview-error")},focus:function(){this._getImageInput().focus();this._checkAllowInsert()},getPanel:function(){this.$el=c(a.Templates.File.webPanel());this.el=this.$el[0];
this.delegateEvents();return this.el},_getImageInput:function(){return c("input.image-url",this.context.baseElement)},_submit:function(a){a.preventDefault();a.stopPropagation();var b=this,a=this._getImageInput().val();if("http://"===a)return!1;this.token++;var d=this.token;this.preview.addClass("faraway").html("");this.throbber.removeClass("hidden");this.killSpinner||(this.killSpinner=Raphael.spinner(this.throbber[0],60,"#666"));this.error.addClass("hidden");c("<img>").load(function(){if(d===b.token){b.killSpinner();
b.killSpinner=null;b.throbber.addClass("hidden");b.preview.removeClass("faraway");b._checkAllowInsert()}}).error(function(){if(d===b.token){b.killSpinner();b.killSpinner=null;b.throbber.addClass("hidden");b.error.removeClass("hidden");b._checkAllowInsert()}}).appendTo(this.preview).attr("src",a)},_checkAllowInsert:function(){var a=this.$el.find("input.image-url").val();this.context.setSelectItems(""!==a&&"http://"!==a?a:[])}});a.Editor=a.Editor||{};a.Editor.FileDialog=a.Editor.FileDialog||{};a.Editor.FileDialog.ExternalPanelView=
f})(AJS.$,Confluence||{});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:panel-components', location = 'files/search-panel/search-panel.soy' */
// This file was automatically generated from search-panel.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.File == 'undefined') { Confluence.Templates.File = {}; }


Confluence.Templates.File.searchPanel = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="search-panel-wrapper"><div id="search-image"><form class="aui search-form" id="search-image-form" action="#"><fieldset class="inline"><div class="search-input"><label for="search-image" class="assistive">', soy.$$escapeHtml("Search"), '</label><input autofocus type="text" class="text search-image-text" size="50" autocomplete="off"></div><select class="search-space select" id="search-image-space-select"><option value="">', soy.$$escapeHtml("All Spaces"), '</option><option value="', soy.$$escapeHtml(opt_data.spaceKey), '">', soy.$$escapeHtml(opt_data.spaceName), '</option></select><button type="submit" class="aui-button search-button">', soy.$$escapeHtml("Search"), '</button></fieldset></form></div><div id="searched-images" class="scroll-wrapper"><div class="loading-message hidden">', soy.$$escapeHtml("Searching\u2026"), '</div><ul class="file-list"></ul></div></div>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:panel-components', location = 'files/search-panel/search-panel-view.js' */
(function(b,a){var d=a.Editor.FileDialog.FileListView,e=a.Editor.FileDialog.FileListCollection,f=a.Editor.FileDialog.BasePanel,g=a.Editor.FileDialog.BasePanel.extend({id:"search",panelId:"",cssPanel:".search-panel",cssContainer:"#searched-images",template:a.Templates.File.searchPanel,events:{"submit form":"_submit"},initialize:function(){f.prototype.initialize.call(this);this.context=null;this.collection=new e;this.fileListView=new d({collection:this.collection})},getPanel:function(){this.$el=b(this.template({spaceKey:AJS.Meta.get("space-key"),
spaceName:AJS.Meta.get("space-name")}));this.el=this.$el[0];this.delegateEvents();return this.el},render:function(){this.fileListView.updateDialogContext(this.context);this.panelId=this.context.addPanel("Search on other pages",this.getPanel(),"search-panel");this.fileListView.updatePanelContext({fileContainer:this.getContainer(),noFileMessage:"No search results found.",showContainerInfo:!0})},_submit:function(a){a.preventDefault();a.stopPropagation();
this._getQuery()&&(this.clearContainer(),this.collection.reset(),this._loadImages().then(_.bind(this._onSuccessLoadFiles,this),_.bind(this._onErrorLoadFiles,this)))},_loadImages:function(){return b.ajax({type:"GET",dataType:"json",url:a.getContextPath()+AJS.REST.getBaseUrl()+"search.json",data:{spaceKey:this.getForm().find(".search-space").val(),query:this._getQuery(),search:"name",type:"attachment",attachmentType:[],groupResults:!0,maxResultsPerGroup:50,searchParentName:!0,pageSize:a.Defaults.maxResults}})},
_onSuccessLoadFiles:function(c){var b={result:[]};c.result&&0<c.result.length?b=c:c.group&&c.group[0]&&(b=c.group[0]);this.fileListView.highlighter=new a.Highlighter(this._getQuery().split(" "));this.fileListView.resetFileList(b.result,{shouldClearSelection:!0})},_onErrorLoadFiles:function(){var a=this.getContainer();a.find(".loading-message").addClass("hidden");a.append(b("<p class='warning'>"+b(this.textErrorSearch).text()+"</p>"))},_getSearchText:function(){return b("input.search-image-text",this.getForm())},
_getQuery:function(){return this._getSearchText().val()||""},focus:function(){this.collection.clearSelection();this._getSearchText().focus()}});a.Editor=a.Editor||{};a.Editor.FileDialog=a.Editor.FileDialog||{};a.Editor.FileDialog.SearchPanelView=g})(AJS.$,Confluence||{});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:panel-components', location = 'files/file-dialog/file-dialog.soy' */
// This file was automatically generated from file-dialog.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.File == 'undefined') { Confluence.Templates.File = {}; }


Confluence.Templates.File.helpLink = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="dialog-help-link"><a href="', soy.$$escapeHtml("https://docs.atlassian.com/confluence/docs-58/Displaying+Files+and+Images"), '" target="_blank">', soy.$$escapeHtml("Help"), '</a></div>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:panel-components', location = 'files/file-dialog/file-dialog-view.js' */
(function(d,e){var h=Backbone.View.extend({dialogId:"insert-image-dialog",ESC_KEY_CODE:27,width:840,height:530,initialize:function(a){this.urlExternalImg="";this.selectItems=[];this.submitCallback=a.submitCallback;this.cancelCallback=a.cancelCallback;this.beforeShowListeners=a.beforeShowListeners;this.panelComponents=a.panelComponents},render:function(){this._createDialog();this.clearSelection();d(document).on("keydown.insert-image",_.bind(this._onNavigationByKey,this));return this},_createDialog:function(){var a=
new AJS.Dialog(this.width,this.height,this.dialogId),j="Insert files and images",b="Insert";this.dialog=a;a.addHeader(j);a.addButton(b,_.bind(this._submitDialog,this),"insert");a.addCancel("Close",_.bind(this._killDialog,this));this.el=a.popup.element;this.$el=d(this.el);this.baseElement=this.el;this.$el.attr("data-tab-default","0");this.$insertButton=this.$el.find(".dialog-button-panel .insert");d("#"+this.dialogId+
" .dialog-components .dialog-title").prepend(e.Templates.File.helpLink());this.$el.find(".dialog-button-panel").append(d("<div></div>").addClass("dialog-tip").html("Hint: type \"\u003cstrong\u003e!\u003c/strong\u003e\" in the Editor to insert attached images on the page."));this._createPanels();d(document).on("hideLayer",_.bind(function(c,b,d){"popup"===b&&d===a.popup&&(d.remove(),this.teardown(),"function"===typeof this.cancelCallback&&this.cancelCallback())},this));AJS.bind("remove.dialog",_.bind(function(a,b){b.dialog.id===this.dialog.id&&this.teardown()},
this));a.show();return a},_createPanels:function(){var a=this;d.each(this.panelComponents,function(){this&&"function"===typeof this.createPanel&&this.createPanel(a)});AJS.debug(this.beforeShowListeners.length+" beforeShow listeners registered.");d.each(this.beforeShowListeners,function(){"function"===typeof this&&this()})},teardown:function(){d(document).unbind(".insert-image");d(".tipsy").remove();this.undelegateEvents()},_killDialog:function(){this.dialog.remove();this.clearSelection();"function"===
typeof this.cancelCallback&&this.cancelCallback()},_submitDialog:function(){var a={url:this.urlExternalImg,contentId:AJS.Meta.get("attachment-source-content-id"),selectItems:this.selectItems};this.dialog.remove();"function"===typeof this.submitCallback&&this.submitCallback(a)},setSelectItems:function(a){"string"===typeof a?(this.urlExternalImg=a,this.selectItems=[]):(this.urlExternalImg="",this.selectItems=a);a=0<this.selectItems.length||this.urlExternalImg;this.$insertButton&&(this.$insertButton.prop("disabled",
!a),this.$insertButton.attr("aria-disabled",!a))},clearSelection:function(){this.setSelectItems([])},insert:function(){this.$insertButton&&(!this.$insertButton.is(":disabled")||!this.$insertButton.attr("aria-disabled"))&&this.$insertButton.click()},addPanel:function(a,d,b,c){var e=this.dialog.getPage(0).panel.length;this.dialog.addPanel(a,d,b,c);return e},getPanel:function(a){return this.dialog.getPanel(a)},_onNavigationByKey:function(a){if(!d("#"+this.dialog.id).is(":hidden")){var e=this.dialog.getCurrentPanel().body,
b=e.find(".attached-file");if(!(0===b.length||d(document.activeElement).is("input[type=text], select, button"))){var c=window.tinymce.VK;switch(a.which){case c.LEFT:case c.UP:case c.RIGHT:case c.DOWN:var i=a.which,f;f=b.filter(".current");f.length||(f=b.filter(".selected"));if(f.length){f=b.index(f);var h=b.length,g={};g[c.LEFT]=-1;g[c.RIGHT]=1;g[c.UP]=-4;g[c.DOWN]=4;c=f+(g[i]?g[i]:0);b=b.eq(0>c||c>=h?f:c)}else b=b.first();b.parent().find("li.attached-file.current").removeClass("current");b.addClass("current");
b.length&&e.find(".scroll-wrapper").simpleScrollTo(b);return AJS.stopEvent(a);case c.SPACEBAR:return e.find("li.attached-file.current").click(),AJS.stopEvent(a);case c.ENTER:return this.insert(),AJS.stopEvent(a)}}}}});e.Editor=e.Editor||{};e.Editor.FileDialog=e.Editor.FileDialog||{};e.Editor.FileDialog.FileDialogView=h})(AJS.$,Confluence||{});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:space-picker', location = '/js/internal/space-resolver.js' */
define("confluence-ui-components/js/internal/space-resolver",["underscore","jquery","ajs"],function(i,b,h){var g={conf_all:"All spaces",conf_current:"Current space",conf_favorites:"Favourite spaces",conf_global:"Site spaces",conf_personal:"Personal spaces"};function e(j){var k=i.map(j,function(l){return"spaceKey="+encodeURI(l)});return k.join("&")}function f(k,l){var j=typeof l==="undefined";var m=i.escape(j?k:l);return{id:k,text:m,idOnly:j}}function a(m,p){var n={};var o=[];i.each(m,function(r){var q=d(r);if(q){n[r]=f(r,q)}else{o.push(r)}});var k;if(o.length){var l=h.contextPath()+"/rest/api/space?"+e(o);k=b.getJSON(l)}else{k=new b.Deferred();k.resolve({results:[]})}function j(r){var q=r.results;i.each(q,function(t){n[t.key]=f(t.key,t.name)});var s=i.map(m,function(t){return n[t]||f(t)});p(s)}k.done(j)}function d(j){return g[j]}var c=["conf_favorites","conf_global","conf_personal"];return{getSpaceDisplayItems:a,getSpaceCategoryDisplayName:d,getSpaceTypeKeys:function(){return c}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:space-picker', location = '/js/space-picker.js' */
define("confluence-ui-components/js/space-picker",["underscore","ajs","jquery","confluence-ui-components/js/internal/space-resolver"],function(r,f,b,d){var a={data:null,suggestCategories:null};var p=function(s){return function(t){var u={id:t.spaceKey,text:t.spaceName};if(typeof s==="function"){return s(u)}return u}};var k;var c=function(s){return function(t,x){var w=b(t).val();if(w===""){return}var u=w.split(",");function v(y){if(!s.multiple){y=y[0]}x(y)}d.getSpaceDisplayItems(u,v)}};var e=function(t){var s;if(t.suggestCategories){var u={text:"Select a suggestion or type to search",children:r.map(t.suggestCategories,function(v){return{id:v,text:d.getSpaceCategoryDisplayName(v)}})}}return function(w){if(s){w.callback(s);return}function v(x){var y={results:[]};if(u){y.results.push(u)}if(x.length>0){y.results.push({text:"Suggested spaces",children:r.map(x,function(z){return{id:z.key,text:r.escape(z.name)}})})}s=y;w.callback(s)}b.getJSON(f.contextPath()+"/rest/recentlyviewed/1.0/recent/spaces").done(v).fail(function(){f.log("Couldn't fetch recent spaces");var x={results:[]};if(u){x.results.push(u)}w.callback(x)})}};var n=function(){return window.Select2.query.ajax({url:f.contextPath()+"/rest/quicknav/1/search?type=spacedesc&type=personalspacedesc",data:function(s){return{query:s,maxPerCategory:25}},quietMillis:250,results:function(u){var t=u.contentNameMatches;if(t.length<=1){return{results:[]}}else{var s=r.map(t[0],k);return{results:[{text:"Search results",children:s}]}}}})};function g(t){var s=n();var u=e(t);return function(v,x,w){if(v.term.length<2){return u(v)}else{if(typeof x==="function"){v.term=x(v.term)}k=p(w);return s(v)}}}function h(){var s=b(".select2-container-active").next("input");var t=s.val().trim();return(t!=="")?t.split(","):[]}function i(s){var t=r.intersection(s,d.getSpaceTypeKeys());return t.length>0}function j(s){return(typeof s.id!=="undefined")&&r.contains(d.getSpaceTypeKeys(),s.id)}function q(t,u,v){var s=[];t.forEach(function(w){if(w.children){var x=q(w.children,u,v);if(x.length){s.push(b.extend({},w,{children:x}))}}else{var y=j(w);if((u&&y)||(!u&&!y)){if(!r.contains(v,w.id)){s.push(w)}}}});return s}function m(t,v){if(!t.length||!v.length){return t}var u=i(v);var s=q(t,u,v);if(!s.length){s.push({text:"Can\'t filter by space types AND spaces",disabled:true})}return s}function o(s){var t=h();return m(s,t)}function l(t){t=r.extend({},a,t);var s={placeholder:"Select a space",formatResult:function(u,v,w){v.attr("title",b("<div/>").html(u.text).text());return b.fn.select2.defaults.formatResult.apply(this,arguments)},escapeMarkup:function(u){return u},multiple:t.multiple===true};if(t.disableMixedSpaceTypes){s.sortResults=o}if(t.data){return r.extend(s,{data:t.data})}else{return r.extend(s,{initSelection:c(t),query:g(t)})}}return{build:l,filterMixedTypesForValues:m}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:space-picker', location = '/js/internal/space-picker-legacy.js' */
window.Confluence.UI.Components.SpacePicker=require("confluence-ui-components/js/space-picker");AJS.deprecate.prop(window.Confluence.UI.Components.SpacePicker,"build",{sinceVersion:"1.4.22",extraInfo:"Use require('confluence-ui-components/js/space-picker')"});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:space-page-picker', location = '/js/space-page-picker.js' */
(function(i,c){var t={conf_all:"All spaces",conf_favorites:"Favourite spaces",conf_global:"Site spaces",conf_personal:"Personal spaces",conf_current:"Current space"};var b={data:null,suggestCategories:null};var v="SPACE-PAGE-TRIGGER-VALUE";var f={placeholder:"Select a space or page",multiple:true,formatInputTooShort:function(){return "Start typing to search"},formatResult:function(G,I,L){if(G.children){I.addClass("space-page-picker-result-category");return i.fn.select2.defaults.formatResult.apply(this,arguments)}else{if(G.id){I.attr("title",G.text);I.addClass("space-page-picker-result-label-with-icon");var F=i("<span/>").addClass(G.className+" item-text").html(i.fn.select2.defaults.formatResult.apply(this,arguments));var K=(G.subText)?i("<span/>").addClass("space-name").html(G.subText):i("");var H=i("<span/>").attr(s(G.id),G.id).append(F).append(K);var J=i("<span/>").append(H);return J}else{I.addClass(G.className);return i.fn.select2.defaults.formatResult.apply(this,arguments)}}},formatSelection:function(G,H){H.addClass("space-page-picker-selected-item");H.attr("title",G.text);var F=i("<span/>").attr(s(G.id),G.id).addClass(G.className+" item-text").html(i.fn.select2.defaults.formatSelection.apply(this,arguments));H.append(F)},escapeMarkup:function(F){return F},formatResultCssClass:function(F){return(F.children||F.id)?"":"select2-result-space-page-separator"},containerCssClass:"space-page-picker-container",dropdownCssClass:"space-page-picker-drop"};var B=function(F,H){var G=F.data("select2").opts.manualInit;if(G===true){return}d(F.val(),F,H)};function r(H,G,F){var I=_.map(H,function(J){return G[J]});return(F)?I:((I.length>0)?I[0]:null)}var l=function(F){var G;if(F.suggestCategories){var H={text:"Suggested categories",children:_.map(F.suggestCategories,function(I){return o(I)})}}return function(J){if(G){J.callback(G);return}var I=[];G={results:[]};if(x(F)){var L=i.getJSON(AJS.contextPath()+"/rest/recentlyviewed/1.0/recent/spaces").done(function(M){var N=(H)?[H]:[];(M.length>0)&&N.push({text:"Suggested spaces",children:_.map(M,function(O){return m(O.key,_.escape(O.name),null,true)})});(N.length>0)&&(G.results=G.results.concat(N))}).fail(function(){AJS.debug("Couldn't fetch recent spaces");var M=(H)?[H]:[];(M.length>0)&&(G.results=G.results.concat(M))});I.push(L)}if(j(F)){var K=i.getJSON(AJS.contextPath()+"/rest/recentlyviewed/1.0/recent/pages",{noTrashedContent:true}).done(function(M){if(M.length>0){G.results.push({text:"Suggested pages",children:_.map(M,function(N){return h(N.id,_.escape(N.title),_.escape(N.space),"content-type-page",true)})})}}).fail(function(){AJS.debug("Couldn't fetch recent pages")});I.push(K)}i.when.apply(i,_.map(I,function(N){var M=i.Deferred();N.always(function(){M.resolve()});return M})).done(function(){if(G.results.length===0){G.results=[{text:"",children:[]}]}J.callback(G)})}};var w=function(F){var G="";if(!F||F.length===2&&F.indexOf("space")>=0&&F.indexOf("page")>=0){G="type=spacedesc&type=personalspacedesc&type=page"}else{if(F.length===1&&F[0]==="space"){G="type=spacedesc&type=personalspacedesc"}else{if(F.length===1&&F[0]==="page"){G="type=page"}else{return}}}return window.Select2.query.ajax({url:AJS.contextPath()+"/rest/quicknav/1/search?"+G,data:function(H,I){return{query:H,maxPerCategory:25}},quietMillis:250,results:function(K,O){var N=K.contentNameMatches;if(N.length<=1){return{results:[]}}else{var P=[];var I=function(Q){return E(Q.spaceKey,Q.spaceName,Q.id,Q.name,Q.className)};for(var L=0;L<N.length-1;L++){var M=[];for(var J=0;J<N[L].length;J++){var H=I(N[L][J]);if(H){M.push(H)}}if(M.length>0){P=P.concat(M);P.push({id:"",text:"",subText:"",className:"",disabled:true})}}return{results:[{text:"Search results",children:P}]}}}})};var p=function(G){var F=w(G.contentType);var H=l(G);return function(I){if(I.term.length<2){H(I)}else{F(I)}}};function s(F){return(F.indexOf("page:")===0)?"data-item-id":"data-item-key"}function m(F,I,G,H){G=(G)?G:((F.indexOf("~")===0)?"content-type-personalspacedesc":"content-type-spacedesc");return e("space",F,I,"",G,H)}function o(F){var G=t[F];return e("space-cat",F,G,"","content-type-space-category",G)}function h(J,I,F,G,H){return e("page",J,I,F,G,H)}function e(L,I,K,H,G,J){var F=y(L,I);K=(!K)?I:K;G=(J)?G:(G+" content-not-found");return{id:F,text:K,subText:H,className:G,disabled:(J?false:true)}}function C(F){return"space-cat:"+F}function a(F){return"space:"+F}function D(F){return"page:"+F}function E(J,G,K,H,I){var F;if(I==="content-type-spacedesc"||I==="content-type-personalspacedesc"){F=m(J,G,I,true)}else{if(I==="content-type-page"){F=h(K,H,G,I,true)}}return F}function y(){var F=Array.prototype.slice.apply(arguments);return F.join(":")}function x(F){return((!F.contentType||F.contentType.length===0||F.contentType.indexOf("space")>=0)&&F.showRecentlyViewedSpaces!==false)}function j(F){return((!F.contentType||F.contentType.length===0||F.contentType.indexOf("page")>=0)&&F.showRecentlyViewedPages!==false)}function n(G,F){var H=q("SpaceCat",G,F.inputSpaceCatId,(F.inputSpaceCatName)?F.inputSpaceCatName:F.inputSpaceCatId);return u(G,H.id,H.name)}function g(G,F){var H=q("Space",G,F.inputSpaceId,(F.inputSpaceName)?F.inputSpaceName:F.inputSpaceId);return u(G,H.id,H.name)}function z(G,F){var H=q("Page",G,F.inputPageId,(F.inputPageName)?F.inputPageName:F.inputPageId);return u(G,H.id,H.name)}function q(J,H,K,G){var F;if(!K){F=H.attr("id");if(!F){return null}K=F+J}if(!G){var I=H.attr("name")||F;G=I+J}return{id:K,name:G}}function u(G,I,F){var H=i("#"+I);if(H.length===0){H=i(Confluence.UI.Components.templates.hiddenField({id:I,name:F}));G.after(H)}return H}function k(G,I,H){if(!G){return}var F=_.filter(I,function(J){return J.indexOf(H)===0});F=_.map(F,function(J){return J.substring(H.length,J.length)});G.val(F.join(","))}function A(M,H,I,F){I=(I)?(_.isArray(I)?I:I.split(",")):[];F=(F)?F.split(","):[];var L=_.union(I,F);var G=_.map(L,function(O){return H+O});var J=M.val();var N=J?J.split(","):[];var K=_.union(N,G);if(K.length>0){M.val(K.join(","))}}c.build=function(G){var F=_.extend({},b,f,G);if(!G.data){F=_.extend({},{initSelection:B,query:p(F)},F)}var H=i(F.orgElement);if(!H||H.length!==1){return F}if(!H.val()&&!F.manualInit){H.val(v)}H.addClass("select2-input");return F};c.setValue=function(G,F){d(G,F,function(H){F.auiSelect2("data",H)})};function d(P,G,S){var U=G.data("select2").opts;var Q=U.placeholder||G.data("placeholder");var K=n(G,U);var M=g(G,U);var I=z(G,U);G.on("change",function(V){k(K,V.val,"space-cat:");k(M,V.val,"space:");k(I,V.val,"page:")});G.val("");var T=(G["0"].tagName==="SELECT")?(G.context.multiple):(U.multiple);var N=[];var R=[];var L=[];var F={};var H=(P)?P.split(","):[];H=_.filter(H,function(V){var W=V.split(":");if(W.length===2){return true}else{if(W.length<0||W.length>=3||(W.length===1&&(W[0]!==v&&W[0]!==Q))){AJS.debug("Error value: "+W)}}});P=H.join(",");G.val(P);A(G,"space-cat:",U.spaceCatKeys,(K)?K.val():"");A(G,"space:",U.spaceKeys,(M)?M.val():"");A(G,"page:",U.pageIds,(I)?I.val():"");P=G.val();H=(P)?P.split(","):[];k(K,H,"space-cat:");k(M,H,"space:");k(I,H,"page:");if(H.length===0){return}_.each(H,function(V,W){var Z=V.split(":");if(Z.length===2){var Y=Z[0];var X=Z[1];if(Y==="space-cat"){N.push(X)}else{if(Y==="space"){R.push(X)}else{if(Y==="page"){L.push(X)}}}}});_.each(N,function(V){F[C(V)]=o(V)});var O=[];if(R.length>0){var J=i.getJSON(AJS.contextPath()+"/rest/prototype/1/space",{spaceKey:R}).done(function(X){var V=[];_.each(X.space,function(Y){F[a(Y.key)]=m(Y.key,_.escape(Y.name),null,true);V.push(Y.key)});var W=_.difference(R,V);_.each(W,function(Y){F[a(Y)]=m(Y,Y,null,false)})}).fail(function(){AJS.debug("Couldn't resolve spaceKeys:",R);_.each(R,function(V){F[a(V)]=m(V,V,null,false)})});O.push(J)}_.each(L,function(V){var W=i.getJSON(AJS.contextPath()+"/rest/api/content/"+V,{expand:"space"}).done(function(X){F[D(X.id)]=h(X.id,_.escape(X.title),_.escape(X.space.name),"content-type-page",true)}).fail(function(){AJS.debug("Couldn't resolve pageId:",V);F[D(V)]=h(V,V,"","content-type-page",false)});O.push(W)});i.when.apply(i,_.map(O,function(W){var V=new i.Deferred();W.always(function(){V.resolve()});return V.promise()})).done(function(){S(r(H,F,T))})}}(AJS.$,window.Confluence.UI.Components.SpacePagePicker));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:space-page-picker', location = '/soy/space-page-picker.soy' */
// This file was automatically generated from space-page-picker.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.UI == 'undefined') { Confluence.UI = {}; }
if (typeof Confluence.UI.Components == 'undefined') { Confluence.UI.Components = {}; }
if (typeof Confluence.UI.Components.templates == 'undefined') { Confluence.UI.Components.templates = {}; }


Confluence.UI.Components.templates.hiddenField = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<input type="hidden" id="', soy.$$escapeHtml(opt_data.id), '" name="', soy.$$escapeHtml(opt_data.name), '" />');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:page-picker', location = '/js/page-picker.js' */
(function(b,a){a.build=function(c){c.placeholder="Select a page";c.contentType=["page"];c.showRecentlyViewedSpaces=false;c.spaceCatKeys=[];c.spaceKeys=[];return window.Confluence.UI.Components.SpacePagePicker.build(c)}}(AJS.$,window.Confluence.UI.Components.PagePicker));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:label-picker', location = '/js/label-picker.js' */
define("confluence-ui-components/js/label-picker",["ajs","confluence-ui-components/confluence","jquery","underscore"],function(f,h,d,i){var a=/[:;,\.\?&\[\(\)#\^\*@!<>\]]/g;function k(l){var m=i.uniq(l.match(a));return m.join(" ")}function b(l){return{id:l.name,text:l.name}}function j(m){var l=m.contentNameMatches[0];if(!l){return[]}var n=i.map(l,b);return i.sortBy(n,function(o){return o.text.toLowerCase()})}function e(l){return function(m){return d.extend({query:m,ignoreRelated:true,maxResults:10},l)}}var c={placeholder:"Add labels",multiple:true,minimumInputLength:1,maximumSelectionSize:20,tokenSeparators:[" ",","],formatInputTooShort:function(m,l){return "Start typing to search for a label"},formatSelectionTooBig:function(l){return f.format("You can only input {0} labels",l)},formatResult:function(l){return h.UI.Components.LabelPicker.templates.labelResult({label:{labelName:l.text,isNew:l.isNew}})},formatNoMatches:function(m){var l=k(m);if(l){return h.UI.Components.LabelPicker.templates.labelInvalid({inputValue:m,invalidCharacters:l})}return this.noMatches},createSearchChoice:function(m){if(!m){return null}var l=k(m);if(l){return null}return{id:m,text:m,isNew:true}},ajax:{data:e(),dataType:"json",url:h.getContextPath()+"/labels/autocompletelabel.action",results:function(l){return{results:j(l)}},quietMillis:300},dropdownCssClass:"labels-dropdown",containerCssClass:"labels-autocomplete",initSelection:function(l,o){var n=l.val().split(",");var m=i.map(n,function(p){return{id:p,text:p}});o(m)}};function g(m){var l=d.extend({},c,m);if(m&&m.queryOpts){l.ajax.data=e(m.queryOpts);delete l.queryOpts}if(!m||!m.noMatches){l.noMatches=l.placeholder}return l}return{build:g}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:label-picker', location = '/js/label-picker-legacy.js' */
window.Confluence.UI.Components.LabelPicker=require("confluence-ui-components/js/label-picker");AJS.deprecate.prop(window.Confluence.UI.Components.LabelPicker,"build",{sinceVersion:"1.4.18",extraInfo:"Use require('confluence-ui-components/js/label-picker')"});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:label-picker', location = '/soy/label-picker.soy' */
// This file was automatically generated from label-picker.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.UI == 'undefined') { Confluence.UI = {}; }
if (typeof Confluence.UI.Components == 'undefined') { Confluence.UI.Components = {}; }
if (typeof Confluence.UI.Components.LabelPicker == 'undefined') { Confluence.UI.Components.LabelPicker = {}; }
if (typeof Confluence.UI.Components.LabelPicker.templates == 'undefined') { Confluence.UI.Components.LabelPicker.templates = {}; }


Confluence.UI.Components.LabelPicker.templates.labelResult = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.label.isNew) ? soy.$$escapeHtml(AJS.format("\x22{0}\x22 - add a new label",opt_data.label.labelName)) : soy.$$escapeHtml(opt_data.label.labelName));
  return opt_sb ? '' : output.toString();
};


Confluence.UI.Components.LabelPicker.templates.labelInvalid = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  var inputValueHtml__soy9 = new soy.StringBuilder('<b>', soy.$$escapeHtml(opt_data.inputValue), '</b>');
  inputValueHtml__soy9 = inputValueHtml__soy9.toString();
  var invalidCharactersHtml__soy13 = new soy.StringBuilder('<b>', soy.$$escapeHtml(opt_data.invalidCharacters), '</b>');
  invalidCharactersHtml__soy13 = invalidCharactersHtml__soy13.toString();
  output.append(AJS.format("{0} contains invalid characters {1}",inputValueHtml__soy9,invalidCharactersHtml__soy13));
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:include-exclude-picker', location = '/js/include-exclude-picker.js' */
define("confluence-ui-components/js/include-exclude-picker",["jquery","underscore"],function(d,j){var e="";function c(k){var l=k.charAt(0);if(j.contains(["-"],l)){e=l;k=k.substring(1)}else{e=""}return k}function h(k){var l=d.extend({},k);if(l.children){l.children=j.map(l.children,h)}else{l.id=e+l.id;l.text=e+l.text}return l}function b(k){return function(l){l=c(l);return k(l)}}function f(k){return function(m){var l=k?k(m):m;if(e){l.results=j.map(l.results,h)}return l}}function a(k){return function(l){return k(l,c,h)}}function g(k){var l=k.text.charAt(0);if(l==="-"){return"cql-exclude"}return}function i(l){var k=d.extend({formatSelectionCssClass:g},l);if(k.query){k.query=a(k.query);return k}else{k.ajax=d.extend({},k.ajax);k.ajax.data=b(k.ajax.data);k.ajax.results=f(k.ajax.results);return k}}return{build:i}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'soy/cql/cql-component.soy' */
// This file was automatically generated from cql-component.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.UI == 'undefined') { Confluence.UI = {}; }
if (typeof Confluence.UI.Components == 'undefined') { Confluence.UI.Components = {}; }
if (typeof Confluence.UI.Components.CQL == 'undefined') { Confluence.UI.Components.CQL = {}; }
if (typeof Confluence.UI.Components.CQL.Templates == 'undefined') { Confluence.UI.Components.CQL.Templates = {}; }


Confluence.UI.Components.CQL.Templates.container = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="cql-container"><div class="cql-error-container"></div><div class="cql-fields"></div></div>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'soy/cql/cql-filter-field.soy' */
// This file was automatically generated from cql-filter-field.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.UI == 'undefined') { Confluence.UI = {}; }
if (typeof Confluence.UI.Components == 'undefined') { Confluence.UI.Components = {}; }
if (typeof Confluence.UI.Components.CQLFilters == 'undefined') { Confluence.UI.Components.CQLFilters = {}; }
if (typeof Confluence.UI.Components.CQLFilters.Templates == 'undefined') { Confluence.UI.Components.CQLFilters.Templates = {}; }


Confluence.UI.Components.CQLFilters.Templates.baseFilterField = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="cql-filter cql-field-', soy.$$escapeHtml(opt_data.field.fieldName), ' cql-type-', soy.$$escapeHtml(opt_data.field.valueType), '">');
  var id__soy8 = new soy.StringBuilder('cql-field-', soy.$$escapeHtml(opt_data.field.fieldName), '-', soy.$$escapeHtml(opt_data.counter));
  id__soy8 = id__soy8.toString();
  output.append('<label for="', soy.$$escapeHtml(id__soy8), '">', soy.$$escapeHtml(opt_data.label), (! opt_data.field.fixed) ? '<span class="aui-icon aui-icon-small aui-iconfont-remove" title="' + soy.$$escapeHtml("Remove field") + '"></span>' : '', '</label><input type="text" class="cql-field-input text" id="', soy.$$escapeHtml(id__soy8), '"></div>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'soy/cql/cql-filter-select.soy' */
// This file was automatically generated from cql-filter-select.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.UI == 'undefined') { Confluence.UI = {}; }
if (typeof Confluence.UI.Components == 'undefined') { Confluence.UI.Components = {}; }
if (typeof Confluence.UI.Components.CQL == 'undefined') { Confluence.UI.Components.CQL = {}; }
if (typeof Confluence.UI.Components.CQL.FilterSelect == 'undefined') { Confluence.UI.Components.CQL.FilterSelect = {}; }
if (typeof Confluence.UI.Components.CQL.FilterSelect.Templates == 'undefined') { Confluence.UI.Components.CQL.FilterSelect.Templates = {}; }


Confluence.UI.Components.CQL.FilterSelect.Templates.container = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="cql-add-filter-container"><button type="button" class="aui-button aui-button-link">', soy.$$escapeHtml("Add a field"), '</button><div class="input-wrapper hidden"><input class="select2-input" type="text" /></div></div>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'js/cql/internal/cql-special-spaces.js' */
define("confluence-ui-components/js/cql/internal/cql-special-spaces",["underscore"],function(c){var e={conf_current:"currentSpace()",conf_favorites:"favourite",conf_global:"global",conf_personal:"personal"};var b=c.invert(e);var a=c.keys(e);function d(){return e}function g(){return a}function f(h){return b[h]}return{getMap:d,getKeys:g,getUIValue:f}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'js/cql/internal/cql-ajax.js' */
define("confluence-ui-components/js/cql/internal/cql-ajax",["jquery","underscore","ajs"],function(e,d,b){var h;var c={equality:["ancestor","contributor","creator","label","mention","parent","space","type"],text:["title","text"]};function g(){if(!h){h=e.Deferred();var j=function(m){var l=m.equality;var n=m.text;if(!l||!n){throw Error("Unknown CQL field data returned from server - cannot initialise CQL fields.")}l=d.filter(l,function(o){return d.contains(c.equality,o.fieldName)});n=d.filter(n,function(o){return d.contains(c.text,o.fieldName)});var k=l.concat(n);k=d.sortBy(k,"fieldName");h.resolve(k)};var i=function(){h.reject()};e.getJSON(b.contextPath()+"/rest/cql/fields").done(j).fail(i)}return h.promise()}function f(i){return e.getJSON(b.contextPath()+"/rest/cql/expressions?cql="+encodeURIComponent(i))}function a(){return e.getJSON(b.contextPath()+"/rest/cql/contenttypes")}return{getFields:g,parseClauses:f,getContentTypes:a}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'js/cql/internal/cql-content-type-picker.js' */
define("confluence-ui-components/js/cql/internal/cql-content-type-picker",["jquery","underscore","ajs","confluence-ui-components/js/cql/internal/cql-ajax"],function(f,c,b,e){var h;var d=[];function a(i){d=c.map(i,function(j){return{id:j.type,text:j.label}})}function g(){if(!h){h=e.getContentTypes();h.done(a)}var i={query:function(j,m,l){m(j.term);var k=window.Select2.query.local({results:c.map(d,l)});k(j)},initSelection:function(k,n){var j=k.val().split(",");var m="";var l=c.map(j,function(o){var p=o.charAt(0);if(p==="-"){m="-";return o.substring(1)}return o});h.done(function(){var o=c.filter(d,function(p){return c.contains(l,p.id)});n(c.map(o,function(p){return{id:m+p.id,text:m+p.text}}))})},multiple:true,placeholder:"All content types"};return{select2Options:i,setDeferredValues:function(j){h.done(j)}}}return{build:g}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'js/cql/internal/cql-field-model.js' */
define("confluence-ui-components/js/cql/internal/cql-field-model",[],function(){function b(d){try{return d.displayName.translation}catch(c){return a(d)}}function a(c){var d=c.fieldName;return d.charAt(0).toUpperCase()+d.substring(1)}return{getLabel:b}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'js/cql/internal/cql-space-expression-adjuster.js' */
define("confluence-ui-components/js/cql/internal/cql-space-expression-adjuster",["underscore","confluence-ui-components/js/cql/internal/cql-special-spaces"],function(c,a){function b(f){var e=f.functionValues;if(!e||!e.length){return f}var d=[];c.each(e,function(g){if(g.functionName==="currentSpace"){d.push(a.getUIValue("currentSpace()"))}else{throw new Error(g.functionName+" is not a known function")}});f.values=d.concat(f.values);return f}return{convertFunctionValues:b}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'js/cql/internal/cql-filter-field.js' */
define("confluence-ui-components/js/cql/internal/cql-filter-field",["jquery","underscore","ajs","confluence-ui-components/js/cql/internal/cql-content-type-picker","confluence-ui-components/js/cql/internal/cql-field-model","confluence-ui-components/js/cql/internal/cql-expression-builder","confluence-ui-components/js/cql/internal/cql-space-expression-builder","confluence-ui-components/js/cql/internal/cql-space-expression-adjuster","confluence-ui-components/js/cql/internal/cql-special-spaces","confluence-ui-components/js/label-picker","confluence-ui-components/js/include-exclude-picker","confluence-ui-components/js/page-picker","confluence-ui-components/js/space-picker"],function(d,r,g,p,n,k,j,i,o,q,l,e,f){var b=window.Confluence.Binder.autocompleteMultiUser;var a=window.Confluence.UI.Components.CQLFilters.Templates;var h=0;function c(y,w,v){var u=n.getLabel(y);var x=d(w({label:u,field:y,counter:h++}));var t=x.find("input");var s=r.bind(v,t);x.data("fieldName",y.fieldName);return d.extend({element:x,onChange:function(z){t.change(z)},asCql:s},y)}function m(y,t){var u=y.valueType;var A=y.fieldName;if(!u){throw new Error("Can't create filter without valueType.")}if(!A){throw new Error("Can't create filter without fieldName.")}var x,z;function v(){return k.buildEqualityExpressionFromValuesString(A,this.val())}if(u==="label"){x=c(y,a.baseFilterField,v);z=x.element.find("input");z.auiSelect2(l.build(q.build({createSearchChoice:false,noMatches:"No matching labels found"})));x.setValues=function(C){z.select2("val",C.values)}}else{if(u==="user"){x=c(y,a.baseFilterField,v);z=x.element.find("input");z.addClass("select2-input autocomplete-multiuser");var s=function(D){var C=D[0].result[0];return{id:C.username,text:C.title,imgSrc:C.thumbnailLink.href}};x.setValues=function(F){var D=F.values;if(!D||!D[0]){return}var E=r.map(D,function(G){return d.getJSON(g.contextPath()+"/rest/prototype/1/search/user.json?query="+encodeURI(G))});function C(){var H=E.length>1?arguments:[arguments];var G=r.map(H,s);z.auiSelect2("data",G)}d.when.apply(d,E).done(C)};b(x.element)}else{if(u==="space"){x=c(y,a.baseFilterField,function(){return j.buildExpressionFromValuesString(this.val())});z=x.element.find("input");z.auiSelect2(l.build(f.build({multiple:true,suggestCategories:o.getKeys(),disableMixedSpaceTypes:true})));x.setValues=function(C){i.convertFunctionValues(C);z.select2("val",C.values)}}else{if(u==="contentId"){x=c(y,a.baseFilterField,function(){var D=this.val().trim();if(!D){return undefined}var C=D.replace(/[a-z]+:/g,"");return k.buildEqualityExpressionFromValuesString(A,C)});z=x.element.find("input");var B={multiple:A!=="parent"};z.auiSelect2(e.build(B));x.setValues=function(E){function D(F){return"page:"+F}var C=r.map(E.values,D);z.select2("val",C)}}else{if(u==="contentType"){x=c(y,a.baseFilterField,v);z=x.element.find("input");var w=p.build();z.auiSelect2(l.build(w.select2Options));x.setValues=function(C){w.setDeferredValues(function(){z.select2("val",C.values)})}}else{if(y.type==="text"){x=c(y,a.baseFilterField,function(){return k.buildTextExpression(A,this.val())});z=x.element.find("input");x.setValues=function(C){z.val(C.values.join(","))}}else{x=c(y,a.baseFilterField,v);z=x.element.find("input");x.setValues=function(C){z.val(C.values.join(","))}}}}}}}x.element.find(".aui-iconfont-remove").click(function(){x.element.remove();t.removeField(x)});return x}return{build:m}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'js/cql/internal/cql-filter-select.js' */
define("confluence-ui-components/js/cql/internal/cql-filter-select",["jquery","underscore","ajs","confluence-ui-components/js/cql/internal/cql-ajax","confluence-ui-components/js/cql/internal/cql-field-model"],function(f,c,a,e,b){var d=window.Confluence.UI.Components.CQL.FilterSelect.Templates;function g(t){var r=t.cqlContainer;var m=r.find(".cql-fields");var i=t.onSelection;if(!i){throw Error("An onSelection callback must be provided to the FilterSelect.")}var s=f(d.container());var n=s.children("button");var q=s.find(".input-wrapper");var p=s.find("input");function j(u){u.preventDefault();q.removeClass("hidden");n.hide();s.find(".select2-choice").mousedown()}n.click(j);function h(){q.addClass("hidden");n.show()}p.bind("select2-close",function(){a.debug("CQL Field selector closed");h();setTimeout(function(){a.log("Checking CQL Field selector focus");if(!f(document.activeElement).closest(".cql-filter").length){a.debug("Setting CQL Field selector focus");n.focus()}},1)});r.append(s);function o(u){if(!u.added){return}p.auiSelect2("val","");i(u.added);a.debug("CQL Field selection made");h()}function k(u){function v(){if(!m[0]){throw new Error("Why no cql-container?")}var x=m.find(".cql-filter").map(function(){return f(this).data("fieldName")});var w=c.reject(u,function(y){return c.contains(x,y.fieldName)&&!c.contains(["label","space"],y.fieldName)});return{results:w,text:b.getLabel}}p.auiSelect2({id:"fieldName",data:v,formatResult:b.getLabel,formatSelection:b.getLabel,placeholder:"Add a field"}).change(o)}function l(){a.log("Couldn't fetch CQL fields - unable to initialise CQL field picker")}e.getFields().done(k).fail(l);return p}return{build:g}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'js/cql/internal/cql-space-expression-builder.js' */
define("confluence-ui-components/js/cql/internal/cql-space-expression-builder",["jquery","underscore","confluence-ui-components/js/cql/internal/cql-special-spaces","confluence-ui-components/js/cql/internal/cql-expression-builder"],function(d,c,b,a){function e(k){var l=k.trim();if(!l){return undefined}var g=l.split(",");var m=b.getKeys();var f=[];var j=[];c.each(g,function(n){if(n==="conf_current"){f.push("currentSpace()")}else{if(c.contains(m,n)){j.push(n)}else{f.push(n)}}});var h=[];if(j.length){var i=b.getMap();j=c.map(j,function(n){return i[n]});h.push(a.buildEqualityExpressionFromValuesArray("space.type",j))}if(f.length){h.push(a.buildEqualityExpressionFromValuesArray("space",f))}if(h.length===1){return h[0]}return"("+h.join(" or ")+")"}return{buildExpressionFromValuesString:e}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'js/cql/internal/cql-expression-builder.js' */
define("confluence-ui-components/js/cql/internal/cql-expression-builder",["jquery","underscore"],function(e,i){function c(m){if(m==="currentSpace()"){return m}return'"'+a(m)+'"'}function a(m){return m.replace(/"/g,'\\"')}function h(m,o){var n=o.trim();if(!n){return undefined}return m+" ~ "+c(n)}function f(m){var n={"+":[],"-":[],"":[]};i.each(m,function(p){var o=p.charAt(0);if(o==="+"){n["+"].push(p.substring(1))}else{if(o==="-"){n["-"].push(p.substring(1))}else{n[""].push(p)}}});return n}function d(o,m){var n=i.map(m,function(p){return o+" = "+c(p)});return n.join(" AND ")}function l(r,o,m){if(o.length===0){return""}var p=i.map(o,c);var n;if(p.length===1){n=m?" = ":" != ";return r+n+p[0]}var q=p.join(",");n=m?" in ":" not in ";return r+n+"("+q+")"}function k(n,m){return l(n,m,false)}function g(n,m){return l(n,m,true)}function j(s,p){var q=f(p);var m=[];var r=d(s,q["+"]);if(r){m.push(r)}var n=g(s,q[""]);if(n){m.push(n)}var o=k(s,q["-"]);if(o){m.push(o)}return m.join(" AND ")}function b(p,n){var o=n.trim();if(!o){return undefined}var m=o.split(",");m=i.map(m,function(q){return q.trim()});return j(p,m)}return{buildTextExpression:h,buildEqualityExpressionFromValuesString:b,buildEqualityExpressionFromValuesArray:j,makeValueMap:f,makePlusCql:d,makeMinusCql:k,makeRegularCql:g}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'js/cql/internal/cql-space-type-expression-converter.js' */
define("confluence-ui-components/js/cql/internal/cql-space-type-expression-converter",["underscore","confluence-ui-components/js/cql/internal/cql-special-spaces"],function(b,a){function c(g,d){var e=b.clone(d);var f=b.map(g.values,a.getUIValue);return{field:e,values:f,negate:g.negate}}return{convert:c}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'js/cql/internal/cql-space-expression-aggregator.js' */
define("confluence-ui-components/js/cql/internal/cql-space-expression-aggregator",["underscore","confluence-ui-components/js/cql/internal/cql-space-type-expression-converter"],function(b,d){function c(h,f){var g=b.filter(h,function(j){return j.field.fieldName==="space.type"});if(g.length===0){return h}if(g.length>1){throw Error("Only a single space.type expression is supported.")}var e=d.convert(g[0],f);var i=b.filter(h,function(j){return j.field.fieldName==="space"});h=b.difference(h,g);if(i.length){i[0]=a(i[0],e)}else{h.push(e)}return h}function a(f,e){f.values=f.values.concat(e.values);return f}return{aggregate:c,combineSpaceExpressions:a}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'js/cql/internal/cql-negation-converter.js' */
define("confluence-ui-components/js/cql/internal/cql-negation-converter",["underscore"],function(a){function b(d){d.values=a.map(d.values,function(e){return"-"+e})}function c(e){var d=$.extend({},e);if(d.field.type==="equality"){if(d.operator==="!="){d.operator="=";b(d)}else{if(d.operator==="notin"){d.operator="in";b(d)}}}return d}return{convert:c}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'js/cql/internal/cql-negation-aggregator.js' */
define("confluence-ui-components/js/cql/internal/cql-negation-aggregator",["underscore","confluence-ui-components/js/cql/internal/cql-negation-converter"],function(a,d){function b(i){var h=[];var g={};var f={};i.forEach(function(k){var l=k.field.fieldName;if(!a.contains(h,l)){h.push(l);g[l]=[];f[l]=[]}var j=d.convert(k);if(j.operator!==k.operator){f[l].push(j)}else{g[l].push(j)}});var e=[];h.forEach(function(k){var j=c(g[k],f[k]);e=e.concat(j)});return e}function c(g,e){if(!e.length){return g}var f=g[0];if(!f){f=e[0];e=a.rest(e)}e.forEach(function(h){f.values=f.values.concat(h.values)});if(f.operator==="="&&f.values.length>1){f.operator="in"}return[f].concat(a.rest(g))}return{aggregate:b}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'js/cql/cql-component.js' */
define("confluence-ui-components/js/cql/cql-component",["jquery","underscore","ajs","confluence-ui-components/js/cql/internal/cql-ajax","confluence-ui-components/js/cql/internal/cql-filter-field","confluence-ui-components/js/cql/internal/cql-filter-select","confluence-ui-components/js/cql/internal/cql-space-expression-aggregator","confluence-ui-components/js/cql/internal/cql-negation-aggregator"],function(b,k,h,a,e,l,c,g){var i=window.Confluence.UI.Components.CQL.Templates;function d(m){var n=[];k.each(m,function(o){o.forEach(function(q){if(!q){return}var p=q.asCql();if(p){n.push(p)}})});return n.join(" and ")}function f(m,n){return k.find(m,function(o){return o.fieldName===n})}function j(p){var B=p.defaultFieldNames;if(!B){B=p.defaultFields?p.defaultFields.split(","):[]}var s=b(i.container());if(p.container){b(p.container).append(s)}var C=s.find(".cql-fields");var y;var D=p.value||p.defaultValue;if(D){y=a.parseClauses(D)}else{y=new b.Deferred();y.resolve()}var r={};var q=new b.Deferred();function m(t){var F=t.fieldName;r[F]=k.without(r[F],t);if(r[F].length===0){delete r[F]}}var x={element:s,loading:q,getValue:function(){return d(r)},removeField:m,fieldArrays:r,fieldRegistry:r};function w(G){var F=e.build(G,x);var H=G.fieldName;r[H]=r[H]||[];r[H].push(F);s.trigger("cql-field-adding",F);var t=C.find(".cql-field-"+H+":last");if(t.length){t.after(F.element)}else{C.append(F.element)}return F}function A(F,t){t=t||0;var G=F.fieldName;return r[G]&&r[G][t]}var z;function v(H){if(!H){return}var G={};function F(J){var I=G[J];if(typeof I==="number"){G[J]=I+1}else{G[J]=0}return G[J]}var t=k.findWhere(z,{fieldName:"space"});H=c.aggregate(H,t);H=g.aggregate(H);k.each(H,function(L){var M=L.field.fieldName;var K=f(z,M);var J=F(M);var I=A(K,J)||w(K);I.setValues(L)})}function o(F){var G,t;if(F){var H=k.escape(F);G="We can\'t load your fields";t=h.format("Curses! We had trouble with \"{0}\". Try refreshing the page, but you may need to re-enter your macro parameters.",H)}else{G="We couldn\'t load the macro";t="If you refresh your page, we\'ll give it another shot."}h.messages.error(".cql-error-container",{title:G,body:t,closeable:true})}function E(t){var F;if(t.element.find(".select2-container-multi").length!=0){F=t.element.find("input.select2-input");F.focus().click()}else{F=t.element.find("a.select2-choice.select2-default");if(!F.length){F=b(":input:visible",t.element).first()}if(!F.length){h.log("Unable to focus CQL field: "+t.fieldName)}F.focus().mousedown()}}function u(G){var F=b.extend({},G,{fixed:false});var t=w(F);E(t)}function n(t){z=t;B.forEach(function(H){var G=f(z,H);if(!G){throw Error("Unknown fieldname: "+H)}var F=b.extend({fixed:true},G);w(F)});l.build({onSelection:u,cqlContainer:s});y.done(v).fail(function(){o(p.value)}).always(function(){q.resolve()})}a.getFields().done(n).fail(function(){o()});return x}return{build:j}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-macro-browser:macro-browser-js', location = 'js/macro-parameter-serializer.js' */
(function(f){var d=function(c){return c.replace(/\\/g,"\\\\").replace(/=/g,"\\=").replace(/[|]/g,"\\|")};Confluence.MacroParameterSerializer={serialize:function(c){var a=[];for(paramName in c)a.push(d(paramName)+"="+d(c[paramName]));return a.join("|")},deserialize:function(c){function a(e,c){for(var b=[],d=[],a,e=e||"",g=0,f=e.length;g<f;g++)a=e[g],"\\"==a?b.push(a+(g+1!=e.length?e[++g]:"")):a==c?(d.push(b.join("")),b=[]):b.push(a);d.push(b.join(""));return d}var d={};f.each(a(c||"","|"),function(c,
f){var b=a(f,"=");2==b.length&&b[0]&&(d[b[0].replace(/\\(.)/g,"$1")]=b[1].replace(/\\(.)/g,"$1"))});return d}}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-macro-browser:macro-browser-js', location = 'js/macro-browser-rest.js' */
AJS.MacroBrowser=AJS.MacroBrowser||{};
AJS.MacroBrowser.Rest=function(b){function c(a){AJS.logError(a)}var e=WRM.data.claim("confluence.macro.metadata.provider:macro-browser-metadata-resources.macro-meta-client-cache-key");return{loadMacroMetadata:function(a){a.data=a.data||{};a.data.macroMetadataClientCacheKey=e;return b.ajax({type:"GET",cache:!0,timeout:a.timeout||3E4,dataType:"json",url:(a.context||AJS.params.contextPath)+"/plugins/macrobrowser/browse-macros.action",data:a.data,success:a.successCallback,error:a.errorCallback||c}).promise()},
fetchMacroMetadataDetails:function(a){var d={id:a.id};a.alternateId&&(d.alternateId=a.alternateId);b.ajax({type:"GET",dataType:"json",url:(a.context||AJS.params.contextPath)+"/plugins/macrobrowser/browse-macros-details.action",data:d,success:a.successCallback,error:a.errorCallback||c})},fetchMacroPreviewData:function(a){if(!a.contentId||!a.macroName)return(a.errorCallback||c)("invalid parameters");b.ajax({type:"POST",contentType:"application/json; charset=utf-8",url:(a.context||AJS.params.contextPath)+
"/rest/tinymce/1/macro/preview",data:b.toJSON({contentId:a.contentId,macro:{name:a.macroName,body:a.body,params:a.params,defaultParameterValue:a.defaultParameterValue}}),dataType:"html",success:a.successCallback,error:a.errorCallback||c})}}}(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-macro-browser:macro-browser-js', location = 'js/macro-browser-editor.js' */
AJS.MacroBrowser=AJS.MacroBrowser||{};
AJS.MacroBrowser.Editor=function(d){function n(g){var b=d("#macro-insert-container").find(".macro-name").val(),a,c=AJS.MacroBrowser,h={},i;i={};for(var e=0,k=g.formDetails.parameters.length;e<k;e++){var j=g.formDetails.parameters[e],f;if(j.type&&"cql"===j.type.name)f=d(".macro-input-fields form").data("cqlComponent").getValue();else{f=d("#macro-param-"+j.name);var l=f.val();"checkbox"==f.attr("type")&&(l=""+f.prop("checked"));f=l}if(f&&(j.shared&&(h[j.name]=f),j.hidden||!j.defaultValue||j.defaultValue!=
f))i[j.name]=f}i[""]&&(a=i[""]);d.extend(i,c.unknownParams);(e=AJS.MacroBrowser.getMacroJsOverride(b))&&"function"==typeof e.beforeParamsRetrieved&&(i=e.beforeParamsRetrieved(i,g,h));return{name:b,bodyHtml:c.getMacroBody(),params:i,defaultParameterValue:a}}function q(g,b,a){var c=AJS.MacroBrowser,h,i=b.type.name;if(a){var e=a.fields&&a.fields[i];e&&"function"!=typeof e&&(e=e[b.name]);"function"==typeof e&&(h=e.call(a,b))}h||(i in c.ParameterFields&&"function"==typeof c.ParameterFields[i]||(i="string"),
h=c.ParameterFields[i](b));c.fields[b.name]=h;a=h.paramDiv;c=h.input;h="macro-param-"+b.name;a.attr("id","macro-param-div-"+b.name);c.addClass("macro-param-input").attr("id",h);b.hidden&&a.hide();c=g.pluginKey;b.displayName==AJS.MacroBrowser.Utils.makeDefaultKey(c,g.macroName,"param",b.name,"label")&&(b.displayName=b.name);b.description==AJS.MacroBrowser.Utils.makeDefaultKey(c,g.macroName,"param",b.name,"desc")&&(b.description="");d("label",a).attr("for",h).text(b.displayName);b.required&&p(a);b.description&&
a.append(Confluence.Templates.MacroBrowser.macroParameterDesc({description:b.description}));return a}function p(d){var b=d.find("label"),a=b.text()+" *";b.text(a);d.addClass("required")}return{loadMacroInBrowser:function(g){if(!g||!g.formDetails)AJS.trigger("analytics",{name:"macro-browser.unknown-macro-error"}),alert("Could not load unknown macro in the macro browser.");else{var b=AJS.MacroBrowser,a=g.formDetails,c=a.macroName,h=b.jsOverrides[c],i=b.settings.selectedMacro,e=tinymce.confluence.macrobrowser.editedMacroDiv;
if(h&&"function"===typeof h.opener)b.close(),h.opener({name:c});else{var k=a.parameters,j=_.find(k,function(b){return"cql"===b.type.name});d("#save-warning-span").addClass("hidden");d("#macro-insert-container .macro-name").val(c);var f=d("#macro-insert-container .macro-input-fields form");f.empty();var l=g.extendedDescription||g.description;if(j)a.documentationLink&&b.UI.setHelpLink(b.dialog,{href:a.documentationLink});else if(l||a.documentationLink)l=d(Confluence.Templates.MacroBrowser.macroDescription({descriptionHtml:l,
documentationLink:a.documentationLink})),f.append(l);a.body&&("NONE"!=a.body.bodyType&&e&&d(e).hasClass("editor-inline-macro"))&&(e=g.pluginKey,a.body.label==AJS.MacroBrowser.Utils.makeDefaultKey(e,c,"body","label")&&(a.body.label=""),a.body.description==AJS.MacroBrowser.Utils.makeDefaultKey(e,c,"body","desc")&&(a.body.description=""),a=a.body,e=b.selectedMacroDefinition,l=AJS.MacroBrowser,c=d(Confluence.Templates.MacroBrowser.macroBody()),e=e?e.body:l.settings.selectedText,d("textarea",c).val(e||
""),a.label&&d("label",c).text(a.label),a.description&&c.append(Confluence.Templates.MacroBrowser.macroParameterDesc({description:a.description})),a.hidden&&c.hide(),c&&f.append(c));var m=i?d.extend({},i.params):{},n=f;if(j){k=_.without(k,j);a=m.cql;delete m.cql;c=d(Confluence.Templates.MacroBrowser.cqlSections());f.append(c);n=c.filter(".cql-render-fields");f.bind("cql-field-adding",function(b,a){a.element.addClass("macro-param-div");a.element.find(".cql-field-input").addClass("macro-param-input")});
f.addClass("loading");c.filter(".cql-render-heading").find("button").click(function(){var b=d(this),a=b.closest(".cql-render-heading").next(),c=a.is(":visible");c?a.slideUp(300):(a.removeClass("hidden").show(),a=d(".cql-render-heading").position().top,d(".macro-input-fields").animate({scrollTop:a},300));c=c?"Show":"Hide";b.text(c)});var e=j.options.requiredFields,l=j.options.defaultFields,
r=e?e.split(","):[],e=l?l.split(","):[],j=d.extend({},j.options,{defaultFieldNames:e,value:a,container:c.filter(".cql-filter-fields")}),o=require("confluence-ui-components/js/cql/cql-component").build(j);f.data("cqlComponent",o);o.loading.done(function(){_.each(o.fieldRegistry||o.fieldArrays,function(a){var c=!1;_.each(a,function(a){!c&&_.contains(r,a.fieldName)&&(p(a.element),c=!0,a.onChange(b.paramChanged))})});f.removeClass("loading");b.paramChanged();AJS.MacroBrowser.Preview.previewMacro(g,i);
AJS.MacroBrowser.UI.focusOnMacroDetailsFirstInput()})}d(k).each(function(){n.append(q(g,this,h))});h&&"function"==typeof h.beforeParamsSet&&(m=h.beforeParamsSet(m,!i));d(k).each(function(){var a;a=""==this.name?b.selectedMacroDefinition?b.selectedMacroDefinition.defaultParameterValue:this.defaultValue:m[this.name];null!=a?delete m[this.name]:d(this.aliases).each(function(){m[this]&&(a=m[this],delete m[this])});null==a&&(a=this.defaultValue);null!=a&&b.fields[this.name].setValue(a)});b.unknownParams=
m;d("a",f).click(function(){window.open(this.href,"_blank").focus();return!1});d("#macro-browser-dialog:visible").length||b.showBrowserDialog();k={};d.extend(!0,k,g);k.formDetails||(k.formDetails={});k.formDetails.body||(k.formDetails.body={});b.dialog.activeMetadata=k;k.formDetails.body.content=b.settings.selectedMacro?b.settings.selectedMacro.body:k.formDetails.body.bodyType&&"plain_text"==k.formDetails.body.bodyType.toLowerCase()?b.settings.selectedText:b.settings.selectedHtml}}},getMacroParametersFromForm:function(d){return n(d).params},
getMacroDefinitionFromForm:n,processRequiredParameters:function(){if(d(".macro-input-fields form").is(".loading"))return AJS.log("Form still loading - cannot processRequiredParameters"),!1;var g=0==d("#macro-insert-container .macro-param-div.required .macro-param-input").not(".select2-container").filter(function(){var a=d(this).val();return null===a||""===a}).length,b=g?"":"disabled",a=b?"addClass":"removeClass";d("#macro-browser-dialog button.ok").prop("disabled",b);d("#macro-browser-dialog .macro-preview-header .refresh-link").prop("disabled",
b)[a]("disabled");return g}}}(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-macro-browser:macro-browser-js', location = 'js/macro-browser-model.js' */
AJS.MacroBrowser=AJS.MacroBrowser||{};
AJS.MacroBrowser.Model=function(){function f(a){a.title==AJS.MacroBrowser.Utils.makeDefaultKey(a.pluginKey,a.macroName,"label")&&(a.title=a.macroName.charAt(0).toUpperCase()+a.macroName.substring(1).replace(/-/g," "));a.description==AJS.MacroBrowser.Utils.makeDefaultKey(a.pluginKey,a.macroName,"desc")&&(a.description="");a.id="macro-"+(a.alternateId||a.macroName);var b=[a.macroName,a.title].concat(a.aliases||[]);a.keywordsNoDesc=b.join(",");var d=a.description&&a.description.replace(/,/g," ")||"";
b.push(d);a.keywords=b.join(",");return a}return{loadMacros:function(a){if(a){var b=AJS.MacroBrowser;b.metadataList=[];b.aliasMap={};for(var d=0,g=a.length;d<g;d++){var c=a[d],c=f(c);if(c.aliases)for(var e=0,h=c.aliases.length;e<h;e++)c.aliases[e]=c.aliases[e].toLowerCase(),b.aliasMap[c.aliases[e]]=c.macroName.toLowerCase();b.metadataList.push(c)}b.metadataList.sort(function(a,b){return a.title.toLowerCase()>b.title.toLowerCase()?1:-1})}else AJS.log("AJS.MacroBrowser.loadModel - no macro data, aborting")},
transformMetaDataDefault:f}}(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-macro-browser:macro-browser-js', location = 'js/macro-browser-preview.js' */
AJS.MacroBrowser=AJS.MacroBrowser||{};
AJS.MacroBrowser.Preview=function(d){function g(){return d("#macro-insert-container .macro-preview")}function j(){g().html("")}function h(c){c?(AJS.MacroBrowser.UI.showPreviewSpinner(!0),k.disable()):(AJS.MacroBrowser.UI.showPreviewSpinner(!1),k.enable())}var k={disable:function(){d("#macro-browser-preview-link").attr("disabled",!0).addClass("disabled")},enable:function(){d("#macro-browser-preview-link").removeAttr("disabled").removeClass("disabled")}};return{previewMacro:function(c,e){var f=AJS.MacroBrowser;
j();if(!AJS.MacroBrowser.Editor.processRequiredParameters())return AJS.trigger("analytics",{name:"macro-browser.missing-params-error"}),AJS.log("previewMacro: missing required params"),!1;"object"!==typeof e&&(e=AJS.MacroBrowser.Editor.getMacroDefinitionFromForm(c));var a=e.params,i=f.getMacroJsOverride(c.macroName);i&&"function"==typeof i.updateMacroParametersForPreview&&(a=i.updateMacroParametersForPreview(a));a[""]&&delete a[""];f={contentId:Confluence.getContentId(),macroName:c.macroName,params:a,
body:f.getMacroBody(),defaultParameterValue:e.defaultParameterValue,successCallback:function(a){var b=g().find("iframe")[0],b=b.contentDocument||b.contentWindow.document;b.write(a);b.close();d("div.error span.error",b).length&&AJS.logError("Error rendering macro definition : ");setTimeout(function(){h(!1)},1E3)},errorCallback:function(a){AJS.logError(a);h(!1)}};a=AJS.params.staticResourceUrlPrefix+"/blank.html";g().html('<iframe src="'+a+'" frameborder="0" name="macro-browser-preview-frame" id="macro-preview-iframe"></iframe>');
h(!0);AJS.MacroBrowser.Rest.fetchMacroPreviewData(f)},removePreviewContainer:j}}(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-macro-browser:macro-browser-js', location = 'js/macro-browser-UI.js' */
AJS.MacroBrowser=AJS.MacroBrowser||{};
AJS.MacroBrowser.UI=function(e){function j(a){return e(Confluence.Templates.MacroBrowser.macroSummaryList({category:a}))}function m(a,b){var f=e(Confluence.Templates.MacroBrowser.macroSummaryItem());if(a.icon){var c=(a.icon.relative?AJS.params.staticResourceUrlPrefix:"")+a.icon.location;!a.icon.relative&&AJS.$.browser.msie&&!window.location.href.indexOf("https")&&c.indexOf("https")?f.prepend("<span class='macro-icon-holder icon-"+a.macroName+"'></span>"):f.prepend("<img src='"+c+"' alt='icon' width='"+
a.icon.width+"' height='"+a.icon.height+"' title='"+a.title+"'/>")}else f.prepend("<span class='macro-icon-holder icon-"+a.macroName+"'></span>");e(".macro-title",f).text(a.title);e(".macro-desc",f).prepend(a.description);if("gadget"==a.macroName&&(c=a.gadgetUrl))c.match("^https?://.*")||(c=AJS.params.contextPath+"/"+c),e(".macro-title",f).after(Confluence.Templates.MacroBrowser.gadgetLink({url:c}));f.click(function(c){b(c,a)});return f}function n(a,b){var e;e=b?Confluence.Templates.Dialog.helpLink(b):
Confluence.Templates.MacroBrowser.helpLink();a.getPage(a.curpage).element.find(".dialog-title").prepend(e)}return{createDialog:function(a){for(var b=a.macros,f=a.onClickMacroSummary,c={all:j("all")},k=0,o=b.length;k<o;k++){var g=b[k];if(g.hidden)if(AJS.MacroBrowser.isHiddenMacroShown(g))g.categories.push("hidden-macros");else continue;c.all.append(m(g,f).attr("id",g.id));for(var l=0,p=g.categories.length;l<p;l++){var h=g.categories[l];c[h]=c[h]||j(h);c[h].append(m(g,f).attr("id",h+"-"+g.id))}}var d=
AJS.ConfluenceDialog({width:a.width||865,height:a.height||530,id:"macro-browser-dialog",onSubmit:a.onSubmit,onCancel:a.onCancel});d.popup.element.on("keydown",".aui-button",function(a){a.stopPropagation()});d.getPage(0).element.attr("id","select-macro-page");d.addHeader(a.title);d.addPanel("All",c.all,"all","category-button-all");i=0;for(ii=a.categories.length;i<ii;i++)b=a.categories[i],d.addPanel(b.displayName,c[b.name]||j(b.name),b.name,"category-button-"+
b.name).getPanel(i).setPadding(0);d.addCancel("Cancel",a.onCancel);n(d);"VANILLA"==AJS.Meta.get("confluence-flavour")?d.addHelpText("<a href='{0}' id='marketplace-link'><span class='icon icon-marketplace'/>{1}</a>",[AJS.params.contextPath+"/plugins/servlet/upm/marketplace/featured?category=Macros&source=macro_browser","Find more macros..."]):d.addHelpText("Hint: type \"\u003cstrong\u003e{\u003c/strong\u003e\" in the Editor to insert macros on the page.");c=AJS.$(Confluence.Templates.MacroBrowser.insertMacroPanel());
c.find("form").submit(function(a){AJS.MacroBrowser.complete();return AJS.stopEvent(a)});e("#macro-browser-preview-link",c).click(function(a){e(this).prop("disabled")||AJS.MacroBrowser.previewMacro(d.activeMetadata);return AJS.stopEvent(a)});d.addPage().addPanel("X",c,"macro-input-panel").addLink("Select macro",function(a){a.prevPage();a.searcher.focus()},"dialog-back-link").addButton("insert.name",function(){AJS.MacroBrowser.complete()},"ok").addCancel("Cancel",
function(){return a.onCancel()}).getPanel(0).setPadding(0);d.getPage(1).element.attr("id","macro-details-page");e("#macro-browser-dialog .dialog-button-panel .ok").before("<span id='save-warning-span' class='hidden'/>");d.searcher=Confluence.DomFilterField({items:"#macro-browser-dialog .dialog-panel-body #category-all .macro-list-item",formId:"macro-browser-search-form",inputId:"macro-browser-search",searcher:function(a,b){var c=null;if(""!=b){d.getCurrentPanel()!=d.getPanel(0)&&d.gotoPanel(0);var f=
AJS.MacroBrowser.searchSummaries(b),c={};e.each(f,function(){c[this.id]=this})}a.each(function(){!c||this.id in c?e(this).show():e(this).hide()})},submitCallback:function(a,b){""!=b&&1==a.length&&a.click()}});d.page[0].header.append(d.searcher.form);d.page[0].ontabchange=function(a){a!=d.getPanel(0,0)&&d.searcher.reset()};c=AJS.$(Confluence.Templates.MacroBrowser.missingUserMacroMetadataPanel({showAdminMessage:AJS.Meta.getBoolean("is-admin")}));d.addPage().addPanel("No macro metadata",
c,"missing-metadata-panel").addLink("Back",function(a){a.gotoPage(0);a.searcher.focus()},"dialog-back-link").addCancel("Cancel",function(){return a.onCancel()});d.gotoPage(2);d.addHeader("No macro metadata");d.gotoPanel(0,0);d.ready=!0;return d},showBrowserSpinner:function(a){var b=e("#macro-browser-dialog");a?b.spin("large"):b.spinStop()},showPreviewSpinner:function(a){var b=e("#macro-browser-preview");
a?b.spin("large"):b.spinStop()},updateButtonText:function(a){var b=e("#macro-browser-dialog .dialog-button-panel .ok");"edit"==a?b.text("Save"):b.text("Insert")},enableSaveButton:function(a){e("#macro-browser-dialog .dialog-button-panel .ok").prop("disabled",!a)},focusOnMacroDetailsFirstInput:function(){var a=e("#macro-insert-container").find(".macro-input-fields :input:visible:not(button,.select2-offscreen)").first();if(a.length){if(a.hasClass("select2-input")){var b=
a.closest(".select2-container").parent().find(".select2-offscreen");if("function"!==typeof b.select2){AJS.log("select2Hidden is not a select2 hidden input, skipping focus attempt.");return}b.select2("open");b.select2("close")}else a.focus();!AJS.MacroBrowser.selectedMacroDefinition&&""!==a.val()&&a.select()}else AJS.log("No input to focus")},setHelpLink:n}}(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-macro-browser:macro-browser-js', location = 'js/macro-browser-utils.js' */
AJS.MacroBrowser=AJS.MacroBrowser||{};AJS.MacroBrowser.Utils=function(a){return{makeDefaultKey:function(){return a.makeArray(arguments).join(".")}}}(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-macro-browser:macro-browser-js', location = 'js/macro-browser.js' */
AJS.MacroBrowser=AJS.MacroBrowser||{};
(function(f){var g={},d,i=function(a,b){var j={id:a.macroName,successCallback:function(a){a&&a.details&&(a.details=AJS.MacroBrowser.Model.transformMetaDataDefault(a.details));AJS.MacroBrowser.Editor.loadMacroInBrowser(a.details,b);i.displayDetails();AJS.MacroBrowser.Preview.previewMacro(a.details)},errorCallback:function(){AJS.trigger("analytics",{name:"macro-browser.fetch-metadata-error"});alert("There has been an error loading the macro browser. Please try again or see your system administrator.");i.displayDetails()}};a.alternateId&&(j.alternateId=
a.alternateId);i.setUI(b,a.title);AJS.MacroBrowser.Rest.fetchMacroMetadataDetails(j)};i.setUI=function(a,b){var j="edit"==a?c.editTitle:c.insertTitle;f("#macro-insert-container").hide();AJS.MacroBrowser.UI.updateButtonText(a);AJS.MacroBrowser.UI.enableSaveButton(!1);AJS.MacroBrowser.dialog.gotoPage(1).addHeader(j.replace(/\{0\}/,b));AJS.MacroBrowser.dialog.show();AJS.MacroBrowser.UI.showBrowserSpinner(!0)};i.displayDetails=function(){AJS.MacroBrowser.UI.showBrowserSpinner(!1);AJS.MacroBrowser.UI.enableSaveButton(!1);
f("#macro-insert-container").show();AJS.MacroBrowser.UI.focusOnMacroDetailsFirstInput()};var c=AJS.MacroBrowser;c.reset=function(){d&&d.resolve&&d.resolve();this.initData=this.initMacroBrowserAfterRequest=d=null;this.hasInit=!1;this.metadataList=[];this.aliasMap={};this.fields={};this.Macros=g={}};c.jsOverrides=g;c.Macros=g;c.getMacroJsOverride=function(a){return g[a]};c.setMacroJsOverride=function(a,b){return g[a]=b};c.hasInit=!1;c.metadataList=[];c.aliasMap={};c.fields={};c.processRequiredParameters=
function(){return AJS.MacroBrowser.Editor.processRequiredParameters()};c.paramChanged=function(){AJS.MacroBrowser.Editor.processRequiredParameters()};c.loadMacroInBrowser=function(a,b){AJS.MacroBrowser.Editor.loadMacroInBrowser(a,b)};c.getMacroDefinitionFromForm=function(a){AJS.MacroBrowser.Editor.getMacroDefinitionFromForm(a)};c.getMacroParametersFromForm=function(a){AJS.MacroBrowser.Editor.getMacroParametersFromForm(a)};c.previewMacro=function(a){AJS.MacroBrowser.Preview.previewMacro(a)};c.previewOnload=
function(a){var b=g[AJS.MacroBrowser.dialog.activeMetadata.macroName];b&&b.postPreview&&b.postPreview(AJS.$("#macro-preview-iframe")[0],AJS.MacroBrowser.dialog.activeMetadata);AJS.Editor.disableFrame(a);f(a).click(function(a){if("a"===a.target.tagName.toLowerCase())return(a=f(a.target).attr("href"))&&(0!=a.indexOf("#")&&-1==a.indexOf(window.location))&&window.open(a,"_blank").focus(),!1})};c.getMacroMetadata=function(a){for(var b=0,c=this.metadataList.length;b<c;b++){var e=this.metadataList[b];if(e.macroName==
a)return e}return null};c.getMetadataPromise=function(){return d};c.open=function(a){a||(a={},AJS.log("No settings to open the macro browser."));var b=AJS.MacroBrowser,c=a.selectedMacro;!c&&a.presetMacroMetadata&&(c={name:a.presetMacroMetadata.macroName});if(c&&c.name){var e=b.getMacroJsOverride(c.name);if(e&&"function"==typeof e.opener){e.opener(c);return}}if(!b.hasInit){AJS.debug("init macro browser");AJS.MacroBrowser.UI.showBrowserSpinner(!0);if(null!==b.initData&&f.isEmptyObject(b.initData)){AJS.trigger("analytics",
{name:"macro-browser.init-reattempt"});AJS.logError("Macro browser preload failed. Trying again...");b.initMacroBrowserAfterRequest=a;b.preLoadMacro();return}if(b.initData)b.initBrowser();else{AJS.trigger("analytics",{name:"macro-browser.init-overlap"});AJS.debug("Waiting for macro browser preloading...");b.initMacroBrowserAfterRequest=a;return}}b.openMacroBrowser(a)};c.openMacroBrowser=function(a){var b=AJS.MacroBrowser;b.settings=a;b.selectedMacroDefinition=a.selectedMacro;var c=b.selectedMacroDefinition&&
b.selectedMacroDefinition.name||a.presetMacroName;a.presetMacroName&&(a.presetMacroMetadata=b.getMacroMetadata(a.presetMacroName));var e=a.presetMacroMetadata;if(!e){var h=a.selectedMacro;if(h){var c=h.name.toLowerCase(),c=b.aliasMap[c]||c,d=g[c];d&&("function"==typeof d.updateSelectedMacro&&d.updateSelectedMacro(h),"function"==typeof d.getMacroDetailsFromSelectedMacro&&(e=d.getMacroDetailsFromSelectedMacro(b.metadataList,h)));e||(e=b.getMacroMetadata(c))}}h=f("#macro-browser-dialog").find("button.back");
e?(AJS.debug("Open macro browser to edit macro: "+e.macroName),h.hide(),b.replicateSelectMacro(e,a.mode||"edit")):c?(h.show(),b.dialog.overrideLastTab(),b.dialog.gotoPage(2),b.showBrowserDialog()):(h.show(),a.selectedCategory?(c=f("#select-macro-page .dialog-page-menu button").index(f("#category-button-"+a.selectedCategory)),0>c&&(c=0),b.dialog.overrideLastTab(),b.dialog.gotoPanel(0,c)):b.dialog.gotoPage(0),b.showBrowserDialog(),b.dialog.searcher.focusAndSearch(a.searchText))};c.showBrowserDialog=
function(){AJS.MacroBrowser.dialog.show();AJS.MacroBrowser.UI.showBrowserSpinner(!1)};c.complete=function(){if(f("#macro-browser-dialog .dialog-button-panel .ok").is(":visible:not(:disabled)")){var a=AJS.MacroBrowser,b=a.dialog.activeMetadata,c=g[b.macroName];c&&c.manipulateMarkup&&c.manipulateMarkup(b);b=AJS.MacroBrowser.Editor.getMacroDefinitionFromForm(b);a.close();if(a.settings.onComplete)a.settings.onComplete(b)}};c.cancel=function(){var a=AJS.MacroBrowser;a.close();if("function"==typeof a.settings.onCancel)a.settings.onCancel();
return!1};c.close=function(){this.unknownParams={};this.fields={};AJS.MacroBrowser.Preview.removePreviewContainer();this.dialog.hide()};c.replicateSelectMacro=function(a,b){i(a,b)};c.initBrowser=function(){var a=AJS.MacroBrowser,b=a.initData;if(!b.categories||!AJS.MacroBrowser.metadataList.length)return AJS.trigger("analytics",{name:"macro-browser.init-browser-error"}),alert("There has been an error loading the macro browser. Please try again or see your system administrator."),AJS.MacroBrowser.UI.showBrowserSpinner(!1),!1;a.editTitle=b.editTitle;
a.insertTitle=b.insertTitle;var c;b.categories=f.map(b.categories,function(a){return"hidden-macros"==a.name?(c=a,null):a});b.categories.sort(function(a,b){return a.displayName.toLowerCase()>b.displayName.toLowerCase()?1:-1});c&&AJS.params.showHiddenUserMacros&&b.categories.push(c);a.dialog=AJS.MacroBrowser.UI.createDialog({title:b.title,categories:b.categories,macros:a.metadataList,onClickMacroSummary:function(a,b){a.preventDefault();i(b,"insert")},onSubmit:a.complete,onCancel:a.cancel});return a.hasInit=
!0};c.searchSummaries=function(a,b){b=f.extend({splitRegex:/[\s\-]+/},b);return AJS.filterBySearch(this.metadataList,a,b)};c.getMacroBody=function(){var a=AJS.MacroBrowser,b="";f("#macro-insert-container .macro-body-div textarea").length?b=f("#macro-insert-container .macro-body-div textarea").val():a.selectedMacroDefinition?a.selectedMacroDefinition.body&&(b=a.selectedMacroDefinition.body):a.dialog.activeMetadata&&(b=a.dialog.activeMetadata.formDetails.body.content);return b};c.isHiddenMacroShown=
function(a){return AJS.params.showHiddenUserMacros&&"_-user-macro-_"==a.pluginKey};c.hasRequiredParameters=function(a){return a.anyParameterRequired};c.setWhitelist=function(a){AJS.MacroBrowser.whitelist=a};c.preLoadMacro=function(){var a=AJS.MacroBrowser;a.initData=null;if(d&&"pending"===d.state())return d;d=AJS.MacroBrowser.Rest.loadMacroMetadata({data:a.whitelist?{whitelist:a.whitelist}:{detailed:!1},successCallback:function(b){a.initData=b;AJS.MacroBrowser.Model.loadMacros(b.macros);a.initMacroBrowserAfterRequest&&
(a.initBrowser(),a.openMacroBrowser(a.initMacroBrowserAfterRequest))},errorCallback:function(b){AJS.trigger("analytics",{name:"macro-browser.preload-error"});AJS.logError("Error requesting macro browser metadata:");AJS.logError(b);a.initData={}}})}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-macro-browser:macro-browser-js', location = 'js/macro-browser-fields.js' */
AJS.MacroBrowser.Field=function(e,g,b){var b=b||{},a=b.setValue||function(a){g.val(a)},d=b.getValue||function(){return g.val()};g.change(b.onchange||AJS.MacroBrowser.paramChanged);return{paramDiv:e,input:g,setValue:a,getValue:d}};
AJS.MacroBrowser.ParameterFields=function(e){var g=function(b,a,d){if(a&&a.length)for(var c=0,f=a.length;c<f;c++)AJS.MacroBrowser.fields[a[c]]&&AJS.MacroBrowser.fields[a[c]].dependencyUpdated(b,d)};return{updateDependencies:g,username:function(b,a){var a=a||{},d=b.multiple?"autocomplete-multiuser":"autocomplete-user",c=e(Confluence.Templates.MacroBrowser.macroParameter()),f=AJS.$("input[type='text']",c);f.addClass(d).attr("data-none-message","Not found");
b.required&&f.keyup(AJS.MacroBrowser.processRequiredParameters);b.multiple?(Confluence.Binder.autocompleteMultiUser(c),a.setValue=function(a){f.val(a);for(var a=a.split(","),c=[],b=[],d=0,g=a.length;d<g;d++)c.push(function(a){return e.getJSON(Confluence.getContextPath()+"/rest/prototype/1/user/non-system/"+a).done(function(a){a&&a.name&&b.push({id:a.name,text:a.displayName,imgSrc:a.avatarUrl})}).fail(function(c){AJS.logError("Cannot parse user data for macro browser field with: "+c);b.push({id:a,
text:AJS.format("Unknown User ({0})",a),imgSrc:Confluence.getContextPath()+"/images/icons/profilepics/default.png"})})}(a[d]));e.when.apply(e,_.map(c,function(a){var c=e.Deferred();a.always(function(){c.resolve()});return c.promise()})).done(function(){b.length&&f.auiSelect2("data",b)})}):(f.bind("selected.autocomplete-content",function(c,d){if(a.onselect)a.onselect(d.selection);else a.setValue?a.setValue(d.content.username):(g(b.name,a.dependencies,f.val()),"function"==typeof a.onchange&&a.onchange.apply(f))}),
AJS.Confluence.Binder.autocompleteUserOrGroup(c));return AJS.MacroBrowser.Field(c,f,a)},spacekey:function(b,a){if(b.multiple)return AJS.MacroBrowser.ParameterFields.string(b,a);var a=a||{},d=e(Confluence.Templates.MacroBrowser.macroParameter()),c=AJS.$("input[type='text']",d);c.addClass("autocomplete-space").attr("data-template","{key}").attr("data-none-message","Not found");b.required&&c.keyup(AJS.MacroBrowser.processRequiredParameters);c.bind("selected.autocomplete-content",
function(d,e){if(a.onselect)a.onselect(e.selection);else a.setValue?a.setValue(e.content.key):(g(b.name,a.dependencies,c.val()),"function"===typeof a.onchange&&a.onchange.apply(c))});AJS.Confluence.Binder.autocompleteSpace(d);return AJS.MacroBrowser.Field(d,c)},attachment:attachmentHandler=function(b,a){if(b.multiple)return AJS.MacroBrowser.ParameterFields.string(b,a);var d=e(Confluence.Templates.MacroBrowser.macroParameterSelect()),c=AJS.$("select",d),a=a||{};a.setValue=a.setValue||function(a){var b=
!1;c.find("option").each(function(){if(this.value==a)return b=!0,!1});b?delete c.tempValue:(c.append(AJS.$("<option/>").attr("value",a).text(a+" ("+"Not found"+")")),c.tempValue=a);try{c.val(a)}catch(d){AJS.logError(d)}c.change()};d=AJS.MacroBrowser.Field(d,c,a);d.updateDependencies=g;d.getData=function(b){if(b.title&&b.spaceKey||b.pageId||b.draftId){var d=c.tempValue||c.val();a.fileTypes&&(b.fileTypes=a.fileTypes);e.getJSON(AJS.params.contextPath+(b.draftId?
"/json/draftattachmentsearch.action":"/json/attachmentsearch.action"),b,function(b){if(!b.error){e("option",c).remove();b=b.attachments;if(!b||!b.length){c.append(AJS.$("<option/>").attr("value","").html("No appropriate attachments"));c.tempValue&&a.setValue(c.tempValue)}else{for(var f=0,g=b.length;f<g;f++)c.append(AJS.$("<option/>").attr("value",b[f].name).text(b[f].name));d=d||c.tempValue;a.setValue(d||b[0].name)}c.attr("style","")}})}else AJS.log("Not enough parameters to send attachmentsearch request")};
return d},full_attachment:attachmentHandler,"confluence-content":function(b,a){if(b.multiple)return AJS.MacroBrowser.ParameterFields.string(b,a);a=a||{};b.options=b.options||{};var d=e(Confluence.Templates.MacroBrowser.macroParameter()),c=AJS.$("input[type='text']",d).attr("data-none-message","Not found").attr("data-template","");b.required&&c.keyup(AJS.MacroBrowser.processRequiredParameters);a.onchange=a.onchange||function(){var d=c.val();g(b.name,a.dependencies,
d)};a.setValue=a.setValue||function(b){c.val(b);"function"==typeof a.onchange&&a.onchange.apply(c)};c.bind("selected.autocomplete-content",function(d,e){var f="";"true"==b.options.includeDatePath&&"blogpost"==e.content.type&&(f=e.content.createdDate.date.split("-"),f="/"+f[0]+"/"+f[1]+"/"+f[2].substring(0,2)+"/");var g=e.content.space&&e.content.space.key,h=g&&g!=AJS.Meta.get("space-key");-1!=e.content.title.indexOf(":")&&(h=!0);f=(h?g+":":"")+f+e.content.title;c.val(f);if(a.onselect)a.onselect(e.selection);
else a.setValue(f,c)});b.options.spaceKey&&("@self"==b.options.spaceKey.toLowerCase()&&(b.options.spaceKey=AJS.Meta.get("space-key")),c.attr("data-spacekey",b.options.spaceKey));var f=b.options.type;if("string"==typeof f)if("page"==f)c.addClass("autocomplete-page"),AJS.Confluence.Binder.autocompletePage(d);else if("blogpost"==f)c.addClass("autocomplete-blogpost"),AJS.Confluence.Binder.autocompleteBlogpost(d);else{if("attachment"===f||"full_attachment"===f)c.addClass("autocomplete-attachment"),AJS.Confluence.Binder.autocompleteAttachment(d)}else c.addClass("autocomplete-confluence-content"),
AJS.Confluence.Binder.autocompleteConfluenceContent(d);return AJS.MacroBrowser.Field(d,c,a)},string:function(b,a){var d=e(Confluence.Templates.MacroBrowser.macroParameter()),c=e("input",d);b.required&&c.keyup(AJS.MacroBrowser.processRequiredParameters);return AJS.MacroBrowser.Field(d,c,a)},"boolean":function(b,a){var d=e(Confluence.Templates.MacroBrowser.macroParameterBoolean()),c=e("input",d),a=a||{};a.setValue=a.setValue||function(a){(/true/i.test(a)||/true/i.test(b.defaultValue)&&!/false/i.test(a))&&
c.prop("checked",!0)};return AJS.MacroBrowser.Field(d,c,a)},"enum":function(b,a){if(b.multiple)return AJS.MacroBrowser.ParameterFields.string(b,a);var d=e(Confluence.Templates.MacroBrowser.macroParameterSelect()),c=e("select",d);!b.required&&!b.defaultValue&&c.append(AJS.$("<option/>").attr("value",""));e(b.enumValues).each(function(){c.append(AJS.$("<option/>").attr("value",this).html(""+this))});return AJS.MacroBrowser.Field(d,c,a)},_hidden:function(b,a){var d=e(Confluence.Templates.MacroBrowser.macroParameterHidden()).hide(),
c=e("input",d);return AJS.MacroBrowser.Field(d,c,a)}}}(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-macro-browser:macro-browser-js', location = 'js/macro-browser-smartfields.js' */
(function(){var c=function(a){this.fileTypes=a};c.prototype.beforeParamsSet=function(a){!a.page&&(!a.date&&!a.space)&&("page"==AJS.params.contentType||"blogpost"==AJS.params.contentType?a.page=AJS.Editor.getCurrentTitle():"comment"==AJS.params.contentType&&(a.page=AJS.params.pageTitle));if(a.date){var b=a.date.split("/");a.page=["",b[2],b[0],b[1],a.page].join("/")}a.space&&(a.page=a.space+":"+a.page);return a};c.prototype.beforeParamsRetrieved=function(a){if(a.page){var b=a.page.split(":");1<b.length&&
(a.space=b[0],a.page=b[1]);b=a.page.split("/");1<b.length&&(a.date=[b[2],b[3],b[1]].join("/"),a.page=b[4]);(("page"==AJS.params.contentType||"blogpost"==AJS.params.contentType)&&a.page==AJS.Editor.getCurrentTitle()||"comment"==AJS.params.contentType&&a.page==AJS.params.pageTitle)&&delete a.page}return a};c.prototype.fields={attachment:function(a){a=AJS.MacroBrowser.ParameterFields.attachment(a,{fileTypes:this.fileTypes});a.dependencyUpdated=function(a,d){AJS.debug("attachment:dependencyUpdated called: "+
a+", "+d);var e=c.prototype.fields._parsePageLink(d);this.getData(e)};return a},full_attachment:function(a){a=AJS.MacroBrowser.ParameterFields.full_attachment(a,{fileTypes:this.fileTypes});a.dependencyUpdated=function(a,d){AJS.debug("attachment:dependencyUpdated called: "+a+", "+d);var e=c.prototype.fields._parsePageLink(d);this.getData(e)};return a},"confluence-content":function(a){return AJS.MacroBrowser.ParameterFields["confluence-content"](a,{dependencies:["name"]})},_parsePageLink:function(a){var b=
{},a=a.split(":",2);b.spaceKey=2===a.length&&a[0]||AJS.Meta.get("space-key");b.title=a[a.length-1];0===b.title.indexOf("/")&&(b.postingDay=b.title.substr(1,10),b.title=b.title.substr(12));b.title===AJS.Editor.getCurrentTitle()&&(b.title="");b.title||(AJS.params.newPage?b.draftId=AJS.Meta.get("content-id"):b.pageId=AJS.params.pageId);return b}};AJS.MacroBrowser.activateSmartFieldsAttachmentsOnPage=function(a,b){AJS.MacroBrowser.setMacroJsOverride(a,new c(b))}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-macro-browser:macro-browser-js', location = 'soy/macro-browser.soy' */
// This file was automatically generated from macro-browser.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.MacroBrowser == 'undefined') { Confluence.Templates.MacroBrowser = {}; }


Confluence.Templates.MacroBrowser.macroSummaryList = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<ol id="category-', soy.$$escapeHtml(opt_data.category), '" class="macro-list"></ol>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.MacroBrowser.macroSummaryItem = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<li class="macro-list-item"><h4 class="macro-title"></h4>');
  Confluence.Templates.MacroBrowser.macroDescription({description: ''}, output);
  output.append('</li>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.MacroBrowser.macroDescription = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="macro-desc">', (opt_data.descriptionHtml) ? opt_data.descriptionHtml : '', (opt_data.documentationLink) ? ' <a href="' + soy.$$escapeHtml(opt_data.documentationLink) + '" class="macro-doco-link">' + soy.$$escapeHtml("Documentation") + '</a>' : '', '</div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.MacroBrowser.insertMacroPanel = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div id="macro-insert-container"><input class="macro-name" type="hidden"/><div class="macro-input-fields dialog-panel"><form action="#" class="aui"></form></div><div class="macro-preview-container dialog-panel"><div class="macro-preview-header"><ul class="macro-preview-links"><li><a id="macro-browser-preview-link" class="refresh-link icon icon-refresh" href="#">', soy.$$escapeHtml("Refresh"), '</a></li></ul><span>', soy.$$escapeHtml("Preview"), '</span></div><div id="macro-browser-preview" class="macro-preview"></div></div></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.MacroBrowser.missingUserMacroMetadataPanel = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div id="macro-missing-metadata-container"><p>', "There is no metadata configured for this macro which means no configuration screen can be presented here.", '</p>', (opt_data.showAdminMessage) ? '<p>' + AJS.format("If this is a user macro then you can add metadata to the template using the \x3ca href\x3d\x22{0}\x22 target\x3d\x22_blank\x22\x3eUser Macro Administration\x3c/a\x3e console.","" + '/admin/usermacros.action') + '</p>' : '<p>' + "You must contact an administrator to configure metadata for this macro." + '</p>', '</div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.MacroBrowser.macroParameter = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="macro-param-div"><label></label><input type="text" class="text"/></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.MacroBrowser.macroParameterBoolean = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="checkbox macro-param-div boolean-param"><input class="checkbox" type="checkbox" value="true"/><label></label></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.MacroBrowser.macroParameterSelect = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="macro-param-div"><label></label><select class="select"></select></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.MacroBrowser.macroParameterHidden = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="macro-param-div"><input type="hidden"/></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.MacroBrowser.macroParameterDesc = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="macro-param-desc">', opt_data.description, '</div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.MacroBrowser.macroBody = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="macro-body-div"><label>', soy.$$escapeHtml("Body text"), '</label><textarea class="monospaceInput textarea" type="text" rows="10"></textarea></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.MacroBrowser.helpLink = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  Confluence.Templates.Dialog.helpLink({href: "https://docs.atlassian.com/confluence/docs-58/Macros"}, output);
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.MacroBrowser.gadgetLink = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<a class=\'macro-uri\' href="', soy.$$escapeHtml(opt_data.url), '" title="', soy.$$escapeHtml(opt_data.url), '" target=\'_blank\'>', soy.$$escapeHtml("Gadget URL"), '</a>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.MacroBrowser.cqlSections = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="cql-filter-fields"></div><h4 class="cql-render-heading"><span>', soy.$$escapeHtml("Options"), '</span>');
  aui.buttons.button({type: 'link', text: "Show", extraAttributes: {'type': 'button'}}, output);
  output.append('</h4><div class="cql-render-fields hidden"></div>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-macro-browser:macro-browser-js', location = 'js/macro-browser-preload.js' */
AJS.toInit(function(a){a(window).bind("render-content-loaded",function(c,b){a("#macro-preview-iframe").contents().find("body")[0]==b&&AJS.MacroBrowser.previewOnload(b)});AJS.MacroBrowser.preLoadMacro()});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.web.resources:moment', location = '/includes/js/moment/moment.js' */
(function(){function R(a,b){return function(c){return k(a.call(this,c),b)}}function pa(a,b){return function(c){return this.lang().ordinal(a.call(this,c),b)}}function S(){}function B(a){T(a);m(this,a)}function C(a){var a=U(a),b=a.year||0,c=a.month||0,d=a.week||0,f=a.day||0;this._milliseconds=+(a.millisecond||0)+1E3*(a.second||0)+6E4*(a.minute||0)+36E5*(a.hour||0);this._days=+f+7*d;this._months=+c+12*b;this._data={};this._bubble()}function m(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);b.hasOwnProperty("toString")&&
(a.toString=b.toString);b.hasOwnProperty("valueOf")&&(a.valueOf=b.valueOf);return a}function s(a){return 0>a?Math.ceil(a):Math.floor(a)}function k(a,b,c){for(var d=Math.abs(a)+"";d.length<b;)d="0"+d;return(0<=a?c?"+":"":"-")+d}function D(a,b,c,d){var f=b._milliseconds,i=b._days,b=b._months,g,h;f&&a._d.setTime(+a._d+f*c);if(i||b)g=a.minute(),h=a.hour();i&&a.date(a.date()+i*c);b&&a.month(a.month()+b*c);f&&!d&&e.updateOffset(a);if(i||b)a.minute(g),a.hour(h)}function E(a){return"[object Array]"===Object.prototype.toString.call(a)}
function V(a,b,c){var d=Math.min(a.length,b.length),f=Math.abs(a.length-b.length),e=0,g;for(g=0;g<d;g++)(c&&a[g]!==b[g]||!c&&h(a[g])!==h(b[g]))&&e++;return e+f}function l(a){if(a)var b=a.toLowerCase().replace(/(.)s$/,"$1"),a=qa[a]||ra[b]||b;return a}function U(a){var b={},c,d;for(d in a)a.hasOwnProperty(d)&&(c=l(d))&&(b[c]=a[d]);return b}function sa(a){var b,c;if(0===a.indexOf("week"))b=7,c="day";else if(0===a.indexOf("month"))b=12,c="month";else return;e[a]=function(d,f){var i,g,h=e.fn._lang[a],
j=[];"number"===typeof d&&(f=d,d=void 0);g=function(a){a=e().utc().set(c,a);return h.call(e.fn._lang,a,d||"")};if(null!=f)return g(f);for(i=0;i<b;i++)j.push(g(i));return j}}function h(a){var a=+a,b=0;0!==a&&isFinite(a)&&(b=0<=a?Math.floor(a):Math.ceil(a));return b}function F(a){return 0===a%4&&0!==a%100||0===a%400}function T(a){var b;if(a._a&&-2===a._pf.overflow){b=0>a._a[t]||11<a._a[t]?t:1>a._a[q]||a._a[q]>(new Date(Date.UTC(a._a[o],a._a[t]+1,0))).getUTCDate()?q:0>a._a[n]||23<a._a[n]?n:0>a._a[u]||
59<a._a[u]?u:0>a._a[x]||59<a._a[x]?x:0>a._a[y]||999<a._a[y]?y:-1;if(a._pf._overflowDayOfYear&&(b<o||b>q))b=q;a._pf.overflow=b}}function W(a){a._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function X(a){null==a._isValid&&(a._isValid=!isNaN(a._d.getTime())&&0>a._pf.overflow&&!a._pf.empty&&!a._pf.invalidMonth&&!a._pf.nullInput&&!a._pf.invalidFormat&&!a._pf.userInvalidated,a._strict&&(a._isValid=a._isValid&&
0===a._pf.charsLeftOver&&0===a._pf.unusedTokens.length));return a._isValid}function G(a){return a?a.toLowerCase().replace("_","-"):a}function H(a,b){return b._isUTC?e(a).zone(b._offset||0):e(a).local()}function p(a){var b=0,c,d,f,i,g=function(a){if(!v[a]&&Y)try{require("./lang/"+a)}catch(b){}return v[a]};if(!a)return e.fn._lang;if(!E(a)){if(d=g(a))return d;a=[a]}for(;b<a.length;){i=G(a[b]).split("-");c=i.length;for(f=(f=G(a[b+1]))?f.split("-"):null;0<c;){if(d=g(i.slice(0,c).join("-")))return d;if(f&&
f.length>=c&&V(i,f,!0)>=c-1)break;c--}b++}return e.fn._lang}function I(a,b){if(!a.isValid())return a.lang().invalidDate();b=Z(b,a.lang());if(!J[b]){var c=J,d=b,f=b,e=f.match($),g,h;g=0;for(h=e.length;g<h;g++)e[g]=r[e[g]]?r[e[g]]:e[g].match(/\[[\s\S]/)?e[g].replace(/^\[|\]$/g,""):e[g].replace(/\\/g,"");c[d]=function(a){var b="";for(g=0;g<h;g++)b+=e[g]instanceof Function?e[g].call(a,f):e[g];return b}}return J[b](a)}function Z(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(z.lastIndex=
0;0<=d&&z.test(a);)a=a.replace(z,c),z.lastIndex=0,d-=1;return a}function ta(a,b){var c=b._strict;switch(a){case "DDDD":return aa;case "YYYY":case "GGGG":case "gggg":return c?ua:va;case "YYYYYY":case "YYYYY":case "GGGGG":case "ggggg":return c?wa:xa;case "S":if(c)return ba;case "SS":if(c)return ca;case "SSS":case "DDD":return c?aa:ya;case "MMM":case "MMMM":case "dd":case "ddd":case "dddd":return za;case "a":case "A":return p(b._l)._meridiemParse;case "X":return Aa;case "Z":case "ZZ":return K;case "T":return Ba;
case "SSSS":return Ca;case "MM":case "DD":case "YY":case "GG":case "gg":case "HH":case "hh":case "mm":case "ss":case "ww":case "WW":return c?ca:da;case "M":case "D":case "d":case "H":case "h":case "m":case "s":case "w":case "W":case "e":case "E":return c?ba:da;default:var c=RegExp,d;d=a.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");return new c(d)}}function ea(a){var a=(a||"").match(K)||[],a=((a[a.length-
1]||[])+"").match(Da)||["-",0,0],b=+(60*a[1])+h(a[2]);return"+"===a[0]?-b:b}function L(a){var b,c=[],d,f,i,g,j;if(!a._d){d=new Date;d=a._useUTC?[d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate()]:[d.getFullYear(),d.getMonth(),d.getDate()];a._w&&(null==a._a[q]&&null==a._a[t])&&(b=function(b){var c=parseInt(b,10);return b?3>b.length?68<c?1900+c:2E3+c:c:null==a._a[o]?e().weekYear():a._a[o]},f=a._w,null!=f.GG||null!=f.W||null!=f.E?b=fa(b(f.GG),f.W||1,f.E,4,1):(i=p(a._l),g=null!=f.d?ga(f.d,i):null!=f.e?
parseInt(f.e,10)+i._week.dow:0,j=parseInt(f.w,10)||1,null!=f.d&&g<i._week.dow&&j++,b=fa(b(f.gg),j,g,i._week.doy,i._week.dow)),a._a[o]=b.year,a._dayOfYear=b.dayOfYear);if(a._dayOfYear){b=null==a._a[o]?d[o]:a._a[o];if(a._dayOfYear>(F(b)?366:365))a._pf._overflowDayOfYear=!0;b=ha(b,0,a._dayOfYear);a._a[t]=b.getUTCMonth();a._a[q]=b.getUTCDate()}for(b=0;3>b&&null==a._a[b];++b)a._a[b]=c[b]=d[b];for(;7>b;b++)a._a[b]=c[b]=null==a._a[b]?2===b?1:0:a._a[b];c[n]+=h((a._tzm||0)/60);c[u]+=h((a._tzm||0)%60);a._d=
(a._useUTC?ha:Ea).apply(null,c)}}function M(a){a._a=[];a._pf.empty=!0;var b=p(a._l),c=""+a._i,d,f,e,g,j=c.length,k=0;f=Z(a._f,b).match($)||[];for(b=0;b<f.length;b++){e=f[b];if(d=(c.match(ta(e,a))||[])[0])g=c.substr(0,c.indexOf(d)),0<g.length&&a._pf.unusedInput.push(g),c=c.slice(c.indexOf(d)+d.length),k+=d.length;if(r[e]){d?a._pf.empty=!1:a._pf.unusedTokens.push(e);g=a;var m=void 0,l=g._a;switch(e){case "M":case "MM":null!=d&&(l[t]=h(d)-1);break;case "MMM":case "MMMM":m=p(g._l).monthsParse(d);null!=
m?l[t]=m:g._pf.invalidMonth=d;break;case "D":case "DD":null!=d&&(l[q]=h(d));break;case "DDD":case "DDDD":null!=d&&(g._dayOfYear=h(d));break;case "YY":l[o]=h(d)+(68<h(d)?1900:2E3);break;case "YYYY":case "YYYYY":case "YYYYYY":l[o]=h(d);break;case "a":case "A":g._isPm=p(g._l).isPM(d);break;case "H":case "HH":case "h":case "hh":l[n]=h(d);break;case "m":case "mm":l[u]=h(d);break;case "s":case "ss":l[x]=h(d);break;case "S":case "SS":case "SSS":case "SSSS":l[y]=h(1E3*("0."+d));break;case "X":g._d=new Date(1E3*
parseFloat(d));break;case "Z":case "ZZ":g._useUTC=!0;g._tzm=ea(d);break;case "w":case "ww":case "W":case "WW":case "d":case "dd":case "ddd":case "dddd":case "e":case "E":e=e.substr(0,1);case "gg":case "gggg":case "GG":case "GGGG":case "GGGGG":e=e.substr(0,2),d&&(g._w=g._w||{},g._w[e]=d)}}else a._strict&&!d&&a._pf.unusedTokens.push(e)}a._pf.charsLeftOver=j-k;0<c.length&&a._pf.unusedInput.push(c);a._isPm&&12>a._a[n]&&(a._a[n]+=12);!1===a._isPm&&12===a._a[n]&&(a._a[n]=0);L(a);T(a)}function Ea(a,b,c,
d,f,e,g){b=new Date(a,b,c,d,f,e,g);1970>a&&b.setFullYear(a);return b}function ha(a){var b=new Date(Date.UTC.apply(null,arguments));1970>a&&b.setUTCFullYear(a);return b}function ga(a,b){if("string"===typeof a)if(isNaN(a)){if(a=b.weekdaysParse(a),"number"!==typeof a)return null}else a=parseInt(a,10);return a}function Fa(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function A(a,b,c){b=c-b;c-=a.day();c>b&&(c-=7);c<b-7&&(c+=7);a=e(a).add("d",c);return{week:Math.ceil(a.dayOfYear()/7),year:a.year()}}function fa(a,
b,c,d,e){var i=(new Date(k(a,6,!0)+"-01-01")).getUTCDay(),b=7*(b-1)+((null!=c?c:e)-e)+(e-i+(i>d?7:0))+1;return{year:0<b?a:a-1,dayOfYear:0<b?b:(F(a-1)?366:365)+b}}function ia(a){var b=a._i,c=a._f;"undefined"===typeof a._pf&&W(a);if(null===b)return e.invalid({nullInput:!0});"string"===typeof b&&(a._i=b=p().preparse(b));if(e.isMoment(b))a=m({},b),a._d=new Date(+b._d);else if(c)if(E(c)){var b=a,d,f,i,g;if(0===b._f.length)b._pf.invalidFormat=!0,b._d=new Date(NaN);else{for(c=0;c<b._f.length;c++)if(g=0,
d=m({},b),W(d),d._f=b._f[c],M(d),X(d)&&(g+=d._pf.charsLeftOver,g+=10*d._pf.unusedTokens.length,d._pf.score=g,null==i||g<i))i=g,f=d;m(b,f||d)}}else M(a);else if(d=a,f=d._i,i=Ga.exec(f),void 0===f)d._d=new Date;else if(i)d._d=new Date(+i[1]);else if("string"===typeof f)if(i=d._i,b=Ha.exec(i)){d._pf.iso=!0;for(f=4;0<f;f--)if(b[f]){d._f=Ia[f-1]+(b[6]||" ");break}for(f=0;4>f;f++)if(ja[f][1].exec(i)){d._f+=ja[f][0];break}i.match(K)&&(d._f+="Z");M(d)}else d._d=new Date(i);else E(f)?(d._a=f.slice(0),L(d)):
"[object Date]"===Object.prototype.toString.call(f)||f instanceof Date?d._d=new Date(+f):"object"===typeof f?d._d||(f=U(d._i),d._a=[f.year,f.month,f.day,f.hour,f.minute,f.second,f.millisecond],L(d)):d._d=new Date(f);return new B(a)}function ka(a,b){e.fn[a]=e.fn[a+"s"]=function(a){var d=this._isUTC?"UTC":"";return null!=a?(this._d["set"+d+b](a),e.updateOffset(this),this):this._d["get"+d+b]()}}function Ja(a){e.duration.fn[a]=function(){return this._data[a]}}function la(a,b){e.duration.fn["as"+a]=function(){return+this/
b}}function N(a){var b=!1,c=e;"undefined"===typeof ender&&(a?(O.moment=function(){!b&&(console&&console.warn)&&(b=!0,console.warn("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release."));return c.apply(null,arguments)},m(O.moment,c)):O.moment=e)}for(var e,O=this,w=Math.round,j,o=0,t=1,q=2,n=3,u=4,x=5,y=6,v={},Y="undefined"!==typeof module&&module.exports&&"undefined"!==typeof require,Ga=/^\/?Date\((\-?\d+)/i,Ka=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,
La=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,$=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,z=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,da=/\d\d?/,ya=/\d{1,3}/,va=/\d{1,4}/,xa=/[+\-]?\d{1,6}/,Ca=/\d+/,za=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,
K=/Z|[\+\-]\d\d:?\d\d/gi,Ba=/T/i,Aa=/[\+\-]?\d+(\.\d{1,3})?/,ba=/\d/,ca=/\d\d/,aa=/\d{3}/,ua=/\d{4}/,wa=/[+\-]?\d{6}/,Ha=/^\s*\d{4}-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Ia=["YYYY-MM-DD","GGGG-[W]WW","GGGG-[W]WW-E","YYYY-DDD"],ja=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],Da=/([\+\-]|\d\d)/gi,P=["Date","Hours","Minutes","Seconds","Milliseconds"],
Q={Milliseconds:1,Seconds:1E3,Minutes:6E4,Hours:36E5,Days:864E5,Months:2592E6,Years:31536E6},qa={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},ra={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},J={},ma="DDD w W M D d".split(" "),na="MDHhmswW".split(""),r={M:function(){return this.month()+1},MMM:function(a){return this.lang().monthsShort(this,
a)},MMMM:function(a){return this.lang().months(this,a)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(a){return this.lang().weekdaysMin(this,a)},ddd:function(a){return this.lang().weekdaysShort(this,a)},dddd:function(a){return this.lang().weekdays(this,a)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return k(this.year()%100,2)},YYYY:function(){return k(this.year(),4)},YYYYY:function(){return k(this.year(),
5)},YYYYYY:function(){var a=this.year();return(0<=a?"+":"-")+k(Math.abs(a),6)},gg:function(){return k(this.weekYear()%100,2)},gggg:function(){return this.weekYear()},ggggg:function(){return k(this.weekYear(),5)},GG:function(){return k(this.isoWeekYear()%100,2)},GGGG:function(){return this.isoWeekYear()},GGGGG:function(){return k(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},
A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return h(this.milliseconds()/100)},SS:function(){return k(h(this.milliseconds()/10),2)},SSS:function(){return k(this.milliseconds(),3)},SSSS:function(){return k(this.milliseconds(),3)},Z:function(){var a=-this.zone(),b="+";0>a&&(a=-a,b="-");return b+k(h(a/60),2)+":"+
k(h(a)%60,2)},ZZ:function(){var a=-this.zone(),b="+";0>a&&(a=-a,b="-");return b+k(h(a/60),2)+k(h(a)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},oa=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];ma.length;)j=ma.pop(),r[j+"o"]=pa(r[j],j);for(;na.length;)j=na.pop(),r[j+j]=R(r[j],2);r.DDDD=R(r.DDD,3);m(S.prototype,{set:function(a){var b,c;for(c in a)b=a[c],"function"===typeof b?
this[c]=b:this["_"+c]=b},_months:"January February March April May June July August September October November December".split(" "),months:function(a){return this._months[a.month()]},_monthsShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),monthsShort:function(a){return this._monthsShort[a.month()]},monthsParse:function(a){var b,c;this._monthsParse||(this._monthsParse=[]);for(b=0;12>b;b++)if(this._monthsParse[b]||(c=e.utc([2E3,b]),c="^"+this.months(c,"")+"|^"+this.monthsShort(c,""),
this._monthsParse[b]=RegExp(c.replace(".",""),"i")),this._monthsParse[b].test(a))return b},_weekdays:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),weekdays:function(a){return this._weekdays[a.day()]},_weekdaysShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),weekdaysShort:function(a){return this._weekdaysShort[a.day()]},_weekdaysMin:"Su Mo Tu We Th Fr Sa".split(" "),weekdaysMin:function(a){return this._weekdaysMin[a.day()]},weekdaysParse:function(a){var b,c;this._weekdaysParse||
(this._weekdaysParse=[]);for(b=0;7>b;b++)if(this._weekdaysParse[b]||(c=e([2E3,1]).day(b),c="^"+this.weekdays(c,"")+"|^"+this.weekdaysShort(c,"")+"|^"+this.weekdaysMin(c,""),this._weekdaysParse[b]=RegExp(c.replace(".",""),"i")),this._weekdaysParse[b].test(a))return b},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(a){var b=this._longDateFormat[a];!b&&this._longDateFormat[a.toUpperCase()]&&(b=this._longDateFormat[a.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,
function(a){return a.slice(1)}),this._longDateFormat[a]=b);return b},isPM:function(a){return"p"===(a+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(a,b,c){return 11<a?c?"pm":"PM":c?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(a,b){var c=this._calendar[a];return"function"===typeof c?c.apply(b):c},_relativeTime:{future:"in %s",
past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(a,b,c,d){var e=this._relativeTime[c];return"function"===typeof e?e(a,b,c,d):e.replace(/%d/i,a)},pastFuture:function(a,b){var c=this._relativeTime[0<a?"future":"past"];return"function"===typeof c?c(b):c.replace(/%s/i,b)},ordinal:function(a){return this._ordinal.replace("%d",a)},_ordinal:"%d",preparse:function(a){return a},
postformat:function(a){return a},week:function(a){return A(a,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}});e=function(a,b,c,d){"boolean"===typeof c&&(d=c,c=void 0);return ia({_i:a,_f:b,_l:c,_strict:d,_isUTC:!1})};e.utc=function(a,b,c,d){"boolean"===typeof c&&(d=c,c=void 0);return ia({_useUTC:!0,_isUTC:!0,_l:c,_i:a,_f:b,_strict:d}).utc()};e.unix=function(a){return e(1E3*a)};e.duration=function(a,b){var c=a,d=
null,f;if(e.isDuration(a))c={ms:a._milliseconds,d:a._days,M:a._months};else if("number"===typeof a)c={},b?c[b]=a:c.milliseconds=a;else if(d=Ka.exec(a))f="-"===d[1]?-1:1,c={y:0,d:h(d[q])*f,h:h(d[n])*f,m:h(d[u])*f,s:h(d[x])*f,ms:h(d[y])*f};else if(d=La.exec(a))f="-"===d[1]?-1:1,c=function(a){a=a&&parseFloat(a.replace(",","."));return(isNaN(a)?0:a)*f},c={y:c(d[2]),M:c(d[3]),d:c(d[4]),h:c(d[5]),m:c(d[6]),s:c(d[7]),w:c(d[8])};d=new C(c);e.isDuration(a)&&a.hasOwnProperty("_lang")&&(d._lang=a._lang);return d};
e.version="2.5.0";e.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";e.updateOffset=function(){};e.lang=function(a,b){if(!a)return e.fn._lang._abbr;if(b){var c=G(a);b.abbr=c;v[c]||(v[c]=new S);v[c].set(b)}else null===b?(delete v[a],a="en"):v[a]||p(a);return(e.duration.fn._lang=e.fn._lang=p(a))._abbr};e.langData=function(a){a&&(a._lang&&a._lang._abbr)&&(a=a._lang._abbr);return p(a)};e.isMoment=function(a){return a instanceof B};e.isDuration=function(a){return a instanceof C};for(j=oa.length-1;0<=j;--j)sa(oa[j]);
e.normalizeUnits=function(a){return l(a)};e.invalid=function(a){var b=e.utc(NaN);null!=a?m(b._pf,a):b._pf.userInvalidated=!0;return b};e.parseZone=function(a){return e(a).parseZone()};m(e.fn=B.prototype,{clone:function(){return e(this)},valueOf:function(){return+this._d+6E4*(this._offset||0)},unix:function(){return Math.floor(+this/1E3)},toString:function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var a=
e(this).utc();return 0<a.year()&&9999>=a.year()?I(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):I(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){return[this.year(),this.month(),this.date(),this.hours(),this.minutes(),this.seconds(),this.milliseconds()]},isValid:function(){return X(this)},isDSTShifted:function(){return this._a?this.isValid()&&0<V(this._a,(this._isUTC?e.utc(this._a):e(this._a)).toArray()):!1},parsingFlags:function(){return m({},this._pf)},invalidAt:function(){return this._pf.overflow},
utc:function(){return this.zone(0)},local:function(){this.zone(0);this._isUTC=!1;return this},format:function(a){a=I(this,a||e.defaultFormat);return this.lang().postformat(a)},add:function(a,b){var c;c="string"===typeof a?e.duration(+b,a):e.duration(a,b);D(this,c,1);return this},subtract:function(a,b){var c;c="string"===typeof a?e.duration(+b,a):e.duration(a,b);D(this,c,-1);return this},diff:function(a,b,c){var a=H(a,this),d=6E4*(this.zone()-a.zone()),f,b=l(b);"year"===b||"month"===b?(f=432E5*(this.daysInMonth()+
a.daysInMonth()),d=12*(this.year()-a.year())+(this.month()-a.month()),d+=(this-e(this).startOf("month")-(a-e(a).startOf("month")))/f,d-=6E4*(this.zone()-e(this).startOf("month").zone()-(a.zone()-e(a).startOf("month").zone()))/f,"year"===b&&(d/=12)):(f=this-a,d="second"===b?f/1E3:"minute"===b?f/6E4:"hour"===b?f/36E5:"day"===b?(f-d)/864E5:"week"===b?(f-d)/6048E5:f);return c?d:s(d)},from:function(a,b){return e.duration(this.diff(a)).lang(this.lang()._abbr).humanize(!b)},fromNow:function(a){return this.from(e(),
a)},calendar:function(){var a=H(e(),this).startOf("day"),a=this.diff(a,"days",!0);return this.format(this.lang().calendar(-6>a?"sameElse":-1>a?"lastWeek":0>a?"lastDay":1>a?"sameDay":2>a?"nextDay":7>a?"nextWeek":"sameElse",this))},isLeapYear:function(){return F(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?(a=ga(a,this.lang()),this.add({d:a-
b})):b},month:function(a){var b=this._isUTC?"UTC":"",c;if(null!=a){if("string"===typeof a&&(a=this.lang().monthsParse(a),"number"!==typeof a))return this;c=this.date();this.date(1);this._d["set"+b+"Month"](a);this.date(Math.min(c,this.daysInMonth()));e.updateOffset(this);return this}return this._d["get"+b+"Month"]()},startOf:function(a){a=l(a);switch(a){case "year":this.month(0);case "month":this.date(1);case "week":case "isoWeek":case "day":this.hours(0);case "hour":this.minutes(0);case "minute":this.seconds(0);
case "second":this.milliseconds(0)}"week"===a?this.weekday(0):"isoWeek"===a&&this.isoWeekday(1);return this},endOf:function(a){a=l(a);return this.startOf(a).add("isoWeek"===a?"week":a,1).subtract("ms",1)},isAfter:function(a,b){b="undefined"!==typeof b?b:"millisecond";return+this.clone().startOf(b)>+e(a).startOf(b)},isBefore:function(a,b){b="undefined"!==typeof b?b:"millisecond";return+this.clone().startOf(b)<+e(a).startOf(b)},isSame:function(a,b){b=b||"ms";return+this.clone().startOf(b)===+H(a,this).startOf(b)},
min:function(a){a=e.apply(null,arguments);return a<this?this:a},max:function(a){a=e.apply(null,arguments);return a>this?this:a},zone:function(a){var b=this._offset||0;if(null!=a)"string"===typeof a&&(a=ea(a)),16>Math.abs(a)&&(a*=60),this._offset=a,this._isUTC=!0,b!==a&&D(this,e.duration(b-a,"m"),1,!0);else return this._isUTC?b:this._d.getTimezoneOffset();return this},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){this._tzm?
this.zone(this._tzm):"string"===typeof this._i&&this.zone(this._i);return this},hasAlignedHourOffset:function(a){a=a?e(a).zone():0;return 0===(this.zone()-a)%60},daysInMonth:function(){var a=this.year(),b=this.month();return(new Date(Date.UTC(a,b+1,0))).getUTCDate()},dayOfYear:function(a){var b=w((e(this).startOf("day")-e(this).startOf("year"))/864E5)+1;return null==a?b:this.add("d",a-b)},quarter:function(){return Math.ceil((this.month()+1)/3)},weekYear:function(a){var b=A(this,this.lang()._week.dow,
this.lang()._week.doy).year;return null==a?b:this.add("y",a-b)},isoWeekYear:function(a){var b=A(this,1,4).year;return null==a?b:this.add("y",a-b)},week:function(a){var b=this.lang().week(this);return null==a?b:this.add("d",7*(a-b))},isoWeek:function(a){var b=A(this,1,4).week;return null==a?b:this.add("d",7*(a-b))},weekday:function(a){var b=(this.day()+7-this.lang()._week.dow)%7;return null==a?b:this.add("d",a-b)},isoWeekday:function(a){return null==a?this.day()||7:this.day(this.day()%7?a:a-7)},get:function(a){a=
l(a);return this[a]()},set:function(a,b){a=l(a);if("function"===typeof this[a])this[a](b);return this},lang:function(a){if(void 0===a)return this._lang;this._lang=p(a);return this}});for(j=0;j<P.length;j++)ka(P[j].toLowerCase().replace(/s$/,""),P[j]);ka("year","FullYear");e.fn.days=e.fn.day;e.fn.months=e.fn.month;e.fn.weeks=e.fn.week;e.fn.isoWeeks=e.fn.isoWeek;e.fn.toJSON=e.fn.toISOString;m(e.duration.fn=C.prototype,{_bubble:function(){var a=this._milliseconds,b=this._days,c=this._months,d=this._data;
d.milliseconds=a%1E3;a=s(a/1E3);d.seconds=a%60;a=s(a/60);d.minutes=a%60;a=s(a/60);d.hours=a%24;b+=s(a/24);d.days=b%30;c+=s(b/30);d.months=c%12;b=s(c/12);d.years=b},weeks:function(){return s(this.days()/7)},valueOf:function(){return this._milliseconds+864E5*this._days+2592E6*(this._months%12)+31536E6*h(this._months/12)},humanize:function(a){var b=+this,c;c=!a;var d=this.lang(),e=w(Math.abs(b)/1E3),i=w(e/60),g=w(i/60),h=w(g/24),j=w(h/365),e=45>e&&["s",e]||1===i&&["m"]||45>i&&["mm",i]||1===g&&["h"]||
22>g&&["hh",g]||1===h&&["d"]||25>=h&&["dd",h]||45>=h&&["M"]||345>h&&["MM",w(h/30)]||1===j&&["y"]||["yy",j];e[2]=c;e[3]=0<b;e[4]=d;c=Fa.apply({},e);a&&(c=this.lang().pastFuture(b,c));return this.lang().postformat(c)},add:function(a,b){var c=e.duration(a,b);this._milliseconds+=c._milliseconds;this._days+=c._days;this._months+=c._months;this._bubble();return this},subtract:function(a,b){var c=e.duration(a,b);this._milliseconds-=c._milliseconds;this._days-=c._days;this._months-=c._months;this._bubble();
return this},get:function(a){a=l(a);return this[a.toLowerCase()+"s"]()},as:function(a){a=l(a);return this["as"+a.charAt(0).toUpperCase()+a.slice(1)+"s"]()},lang:e.fn.lang,toIsoString:function(){var a=Math.abs(this.years()),b=Math.abs(this.months()),c=Math.abs(this.days()),d=Math.abs(this.hours()),e=Math.abs(this.minutes()),h=Math.abs(this.seconds()+this.milliseconds()/1E3);return!this.asSeconds()?"P0D":(0>this.asSeconds()?"-":"")+"P"+(a?a+"Y":"")+(b?b+"M":"")+(c?c+"D":"")+(d||e||h?"T":"")+(d?d+"H":
"")+(e?e+"M":"")+(h?h+"S":"")}});for(j in Q)Q.hasOwnProperty(j)&&(la(j,Q[j]),Ja(j.toLowerCase()));la("Weeks",6048E5);e.duration.fn.asMonths=function(){return(+this-31536E6*this.years())/2592E6+12*this.years()};e.lang("en",{ordinal:function(a){var b=a%10,b=1===h(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+b}});Y?(module.exports=e,N(!0)):"function"===typeof define&&define.amd?define("moment",function(a,b,c){c.config&&(c.config()&&!0!==c.config().noGlobal)&&N(void 0===c.config().noGlobal);
return e}):N()}).call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.web.resources:analytics-support', location = '/includes/js/analytics-support/analytics-support.js' */
define("confluence-analytics-support",["jquery"],function(h){function i(a){var c={};if(a=m.exec(a)){for(var b=0;b<k.length;b++)c[k[b]]=a[b];b=c.queryParams;a={};if(b)for(var b=b.split("&"),d=0;d<b.length;d++){var e=b[d].split("=");a[e[0]]||(a[e[0]]=[]);a[e[0]].push(b[d].substring(e[0].length+1))}c.queryParams=a}return c}function l(a){if(h.isEmptyObject(a))return"";var c=!a.urlPath?"":a.urlPath,b;if(h.isEmptyObject(a.queryParams))b="";else{b=a.queryParams;var d="",e;for(e in b)for(var f=0;f<b[e].length;f++)d+=
"&"+e,b[e][f]&&(d+="="+b[e][f]);b="?"+d.substring(1)}return c+b+(!a.anchor?"":"#"+a.anchor)}AJS.Confluence.Analytics=AJS.Confluence.Analytics||{};var m=/([^\?]+)[\?]?([^#]*)[#]?(.*)/,k=["source","urlPath","queryParams","anchor"],j;AJS.Confluence.Analytics.setAnalyticsSource=function(a,c){if("undefined"===typeof j){var b=h._data(window,"events");j=b&&b.analytics&&0<b.analytics.length}j&&a.attr("href",function(a,b){var f=encodeURIComponent(c),g=i(b);h.isEmptyObject(g)||(g.queryParams.src=[f]);return l(g)})};
AJS.Confluence.Analytics.srcRemovedUrl=function(a){a=i(a);delete a.queryParams.src;for(var c=Object.keys(a.queryParams),b=0;b<c.length;b++){var d=c[b],e=d.split(".");3===e.length&&"src"===e[0]&&delete a.queryParams[d]}return l(a)};AJS.Confluence.Analytics.srcParamValues=function(a){return(a=i(a).queryParams)&&a.src?a.src:[]};AJS.Confluence.Analytics.srcAttrParamValues=function(a){for(var a=i(a).queryParams,c={},b=Object.keys(a),d=0;d<b.length;d++){var e=b[d],f=e.split(".");if(3===f.length&&"src"===
f[0]){var g=f[1],f=f[2];c[g]=c[g]||{};c[g][f]=decodeURIComponent(a[e][0])}}return c};AJS.Confluence.Analytics.extractAnalyticsData=function(a){for(var c=[],b=AJS.Confluence.Analytics.srcParamValues(a),a=AJS.Confluence.Analytics.srcAttrParamValues(a),d=0;d<b.length;d++){var e=b[d];c.push({src:e,attr:a[e]||{}})}return c};AJS.Confluence.Analytics.publish=function(a,c){AJS.trigger("analytics",{name:a,data:c||{}})};AJS.toInit(function(){var a=AJS.Confluence.Analytics.extractAnalyticsData(document.URL);
if(0<a.length){for(var c=0;c<a.length;c++){var b=a[c],d=b.attr;d.userKey=AJS.Meta.get("remote-user-key");AJS.Confluence.Analytics.publish("confluence.viewpage.src."+b.src,d)}window.history&&window.history.replaceState&&(a=AJS.Confluence.Analytics.srcRemovedUrl(document.URL),document.URL!==a&&window.history.replaceState(null,"",a))}});return AJS.Confluence.Analytics});require("confluence-analytics-support");
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:page-editor-js', location = 'editor/page-editor.js' */
Confluence.Editor=$.extend(Confluence.Editor||{},function(b){function p(a){b("#editpageform").find("input[name='atl_token']").val(a);AJS.Meta.set("atl-token",a);AJS.Meta.set("atlassian-token",a);b("#atlassian-token").attr("content",a)}var i=[],g=[],k=[],q=!1,f=1,u=function(){for(var a=0;a<i.length;a++)Confluence.Editor.UI.cancelButton.click(i[a]);for(a=0;a<g.length;a++)Confluence.Editor.UI.saveButton.click(g[a]);for(var b=AJS.$(Confluence.Editor.getCurrentForm()),a=0;a<k.length;a++)b.submit(k[a]);
AJS.$.unbind("init.rte",this)},m=function(a,b,d,e){e.push(d);AJS.Rte&&AJS.Rte.BootstrapManager&&AJS.Rte.BootstrapManager.isInitComplete()?a.bind(b,d):q||(q=!0,AJS.$.bind("init.rte",u))},n=function(a,b,d){var e=null;AJS.Rte&&(AJS.Rte.BootstrapManager&&AJS.Rte.BootstrapManager.isInitComplete())&&(e=function(a,b,c){a.unbind(b,c)});for(var j=d.pop();j;)e&&e(a,b,j),j=d.pop()},r=function(a,b){if(l!==a||!o)AJS.debug("Changing heartbeat period to "+b+" (recoveryMode = "+a+")"),clearInterval(o),l=a,o=setInterval(Confluence.Editor.heartbeat,
b)},l=!1,o,s=+AJS.Meta.get("heartbeat-interval")||3E4,v=Math.max(s/5,5E3),t={normal:function(){r(!1,s)},recovery:function(){r(!0,v)},isNormal:function(){return!l},reset:function(){l=!0;t.normal()}};return{bookmark:"",MODE_RICHTEXT:"richtext",MODE_SOURCE:"source",MODE_PREVIEW:"preview",PREVIEW_OUTPUT_TYPE:"PREVIEW",currentEditMode:null,contentHasChangedSinceLastSave:!1,sourceInitialValue:!1,isSubmitting:!1,isCancelling:!1,getNumConcurrentEditors:function(){return f},addCancelHandler:function(a){m(Confluence.Editor.UI.cancelButton,
"click",a,i)},addSaveHandler:function(a){m(Confluence.Editor.UI.saveButton,"click",function(b){return Confluence.Editor.UI.isButtonEnabled(Confluence.Editor.UI.saveButton)?a(b):!1},g)},addSubmitHandler:function(a){m(AJS.$(Confluence.Editor.getCurrentForm()),"submit",a,k)},removeAllCancelHandlers:function(){n(Confluence.Editor.UI.cancelButton,"click",i)},removeAllSaveHandlers:function(){n(Confluence.Editor.UI.saveButton,"click",g)},removeAllSubmitHandlers:function(){n(AJS.$(Confluence.Editor.getCurrentForm()),
"submit",k)},hasContentChanged:function(){return!this.inRichTextMode()&&!this.contentHasChangedSinceLastSave?!1:this.editorHasContentChanged()},editorHasContentChanged:function(){return null==AJS.Rte.getEditor()?(AJS.debug("Confluence.Editor: editorHasContentChanged - No active editor present. Returning false."),!1):AJS.Rte.Content.editorHasContentChanged()},isEmpty:function(){var a=b(AJS.Rte.getEditor().getContent()).text();return!b.trim(a)},getResumeDraftUrl:function(){var a=[];a.push(Confluence.getContextPath());
a.push("/pages/"+(AJS.params.newPage?"create":"edit")+AJS.params.draftType+".action");a.push("?useDraft=true");a.push("&pageId="+AJS.params.pageId);a.push("&contentChanged="+this.hasContentChanged());this.getCurrentForm().spaceKey&&a.push("&spaceKey="+AJS.Meta.get("space-key"));return a.join("")},getCurrentTitle:function(){return b("#content-title")&&b("#content-title").val()},contentFormSubmit:function(){Confluence.Editor.Drafts.unBindUnloadMessage();AJS.$(".editable-title #content-title").prop("disabled",
!0);return!0},heartbeat:function(){var a={dataType:"json",contentId:Confluence.Editor.Drafts.isNewContent()?AJS.params.draftId:AJS.params.pageId,draftType:AJS.params.draftType,spaceKey:AJS.params.spaceKey},c=AJS.Meta.getBoolean("shared-drafts"),d="page"===AJS.Meta.get("content-type")||"blogpost"===AJS.Meta.get("content-type"),e="0"!==AJS.params.pageId;!d||!e&&!c?AJS.safe.post(AJS.params.contextPath+"/json/heartbeat.action",{},function(a){a&&a.atlToken&&p(a.atlToken)}):AJS.safe.post(AJS.params.contextPath+
"/json/startheartbeatactivity.action",a,function(a){if(!a||!a.atlToken||!(a.activityResponses instanceof Array))AJS.trigger("rte.heartbeat-error","Invalid server response"),AJS.logError("Unexpected server response for heartbeat:"),AJS.log(a);else{var c=a.activityResponses;p(a.atlToken);Confluence.Editor.heartbeatType.normal();AJS.trigger("rte.heartbeat",c);f=(c.length||0)+1;if(1<f){var d=b("#other-users-span");d.empty();for(var e=0;e<f-1;++e){0<e&&d.append(", ");var h=c[e];d.append(AJS("a").attr("href",
AJS.params.contextPath+"/display/~"+encodeURIComponent(h.userName)).text(h.fullName));null!=h.lastEditMessage&&d.append(" ").append(AJS("span").addClass("smalltext").text(h.lastEditMessage))}AJS.isVisible("#heartbeat-div")||AJS.Confluence.Analytics.publish("rte.notification.concurrent-editing",{numEditors:f,pageId:AJS.params.pageId,draftType:AJS.params.draftType})}AJS.setVisible("#heartbeat-div",1<f);b(document).trigger("resize.resizeplugin");AJS.trigger("editor-heartbeat",a)}},"json").fail(function(a,
b,c){(503===a.status||0===a.status)&&Confluence.Editor.heartbeatType.recovery();403===a.status||401===a.status?AJS.logError("Heartbeat error: Unauthorized"):(AJS.logError("Server error on heartbeat request:"),AJS.log(c));AJS.trigger("rte.heartbeat-error",a)})},heartbeatType:t,disableFrame:function(a){AJS.$("form",a).each(function(){AJS.$(this).unbind();this.onsubmit=function(){return!1}});AJS.$("a",a).each(function(){AJS.$(this).attr("target","_top").unbind()});AJS.$("input, img",a).each(function(){AJS.$(this).unbind()})},
previewFrameOnload:function(a,c){Confluence.Editor.setMode(Confluence.Editor.MODE_PREVIEW);tinyMCE.activeEditor.setProgressState(!1);Confluence.Editor.disableFrame(a);var d=AJS.$("#main",a)[0];if("comment"!=AJS.Meta.get("content-type")&&0==AJS.$(d).find("#main-header").length){var e=AJS.$("#title-heading"),j=e.attr("class");AJS.$(d).prepend('<div id="preview-header"><div id="title-heading" class="'+j+'">'+e.html()+"</div></div>")}AJS.$("a",a).attr("target","_parent");if(b(AJS.Rte.getEditor().getBody()).hasClass("resizable")){var f=
b(c||"#previewArea iframe"),i=0,g=0,h,k=f.height();d&&function(){var a=b(d).outerHeight(!0);i!=a?(a!=f.height()&&f.height(0).height(Math.max(a,k)),i=a,g=0):g++;500>g&&(h=setTimeout(arguments.callee,500))}();b(document).one("mode-changed.resize-editor",function(a,b){b!=Confluence.Editor.MODE_PREVIEW&&h&&clearTimeout(h)})}else if(tinymce.isIE||tinymce.isOpera){var e=b(window).height(),j=b("#header-precursor").height()+b("#header").height()+b("#editor-precursor").height(),l=b("#savebar-container").height();
b("#preview iframe").height(e-j-l-4);b("#content.edit").height("auto")}},showRichText:function(a){AJS.setVisible("#wysiwyg",a);b(".toolbar-group-preview").toggleClass("assistive",!a);b(".toolbar-group-edit").toggleClass("assistive",a);b("#main").toggleClass("active-richtext",a);tinymce.isGecko&&a&&AJS.Rte.fixEditorFocus(Confluence.Editor.bookmark)},showPreview:function(a){if("comment"!==AJS.Meta.get("content-type")){var c=b("#content-title");c.hasClass("placeholded")?(b("#preview-title-text").text(""),
b("#title-text").text("")):(b("#preview-title-text").text(c.val()),b("#title-text").text(c.val()))}AJS.setVisible("#preview",a);b(".toolbar-group-preview").toggleClass("assistive",a);b(".toolbar-group-edit").toggleClass("assistive",!a);b("#main").toggleClass("active-preview",a);b("#full-height-container").length&&b("#full-height-container").toggleClass("active-preview",a)},showSource:function(a){a?this.showSourceArea():this.hideSourceArea();b("#main")[a?"addClass":"removeClass"]("active-source")},
setMode:function(a){AJS.debug("Set mode: "+a);a==Confluence.Editor.MODE_RICHTEXT?(this.showRichText(!0),this.showPreview(!1),this.showSource(!1)):a==Confluence.Editor.MODE_SOURCE?(this.showSource(!0),this.showRichText(!1),this.showPreview(!1)):a==Confluence.Editor.MODE_PREVIEW&&(this.showPreview(!0),this.showRichText(!1),this.showSource(!1),Confluence.Editor.UI.spinner.removeClass("aui-icon-wait"));setTimeout(function(){var a=b(".toolbar-group-preview");a.height(0);a.height();a.height("auto")},1);
this.currentEditMode=a;b(document).trigger("mode-changed",[a])},getContentId:function(){return Confluence.getContentId()},addErrorMessage:function(a,c,d){var e=b("#"+a),d=d?"#all-messages":"#editor-messages";e.length?e.empty():e=b("<div></div>").attr("id",a).appendTo(d);AJS.messages.error(e,{closeable:!0,body:c})},changeMode:function(a,c){AJS.debug("Change mode: "+a);c=c||{};if(this.inRichTextMode()&&!AJS.Rte.BootstrapManager.isInitComplete()||this.currentEditMode==a)return!1;var d=this.currentEditMode;
AJS.trigger("rte-changeMode",a);if(a==Confluence.Editor.MODE_PREVIEW){var e=AJS.Rte.getEditor();d==Confluence.Editor.MODE_SOURCE&&Confluence.Editor.transferSourceToEditor();tinyMCE.isGecko&&(d==Confluence.Editor.MODE_RICHTEXT&&!Confluence.Editor.bookmark)&&(Confluence.Editor.bookmark=tinymce.activeEditor.selection.getBookmark());this.currentEditMode=a;e={contentId:Confluence.getContentId(),contentType:AJS.Meta.get("content-type"),spaceKey:AJS.Meta.get("space-key"),xHtml:e.getContent(),outputType:Confluence.Editor.PREVIEW_OUTPUT_TYPE};
AJS.safe.ajax({type:"POST",url:AJS.params.contextPath+"/pages/rendercontent.action",data:e,success:Confluence.Editor.replysetPreviewArea,timeout:2E4,error:function(){Confluence.Editor.addErrorMessage("preview-error","There was an error loading preview. Please try again later.");Confluence.Editor.currentEditMode=d;c.errorCallback&&c.errorCallback()}})}else this.setMode(a);a==Confluence.Editor.MODE_RICHTEXT&&b(document).trigger("resize.resizeplugin");return!1},replysetPreviewArea:function(a){b("#preview-error").remove();
var c=AJS.params.staticResourceUrlPrefix+"/blank.html";tinyMCE.activeEditor.setProgressState(!0);AJS.$("#previewArea").html('<iframe id="editor-preview-iframe" src="'+c+'" scrolling="yes" frameborder="0"></iframe>');c=AJS.$("#previewArea iframe")[0];c=c.contentDocument||c.contentWindow.document;c.write(a);c.close()},inRichTextMode:function(){return this.currentEditMode==Confluence.Editor.MODE_RICHTEXT},isNewPage:function(){return 0<AJS.$("#createpageform, #createpagetemplate").length},onInit:function(){Confluence.Editor.setMode(Confluence.Editor.MODE_RICHTEXT);
tinyMCE.activeEditor.onClick.add(function(){var a=Confluence.Editor.UI.postingDatePicker;a&&a.hide()})},contentChangeHandler:function(){this.contentHasChangedSinceLastSave=!0},getCurrentForm:function(){return tinyMCE.activeEditor.formElement},transferSourceToEditor:function(){var a=Confluence.Editor;if(a.sourceInitialValue){var b=a.getSourceAreaVal();if(b!=a.sourceInitialValue){var d=tinyMCE.activeEditor;d.setContent(b);d.setDirty(b)}}a.sourceInitialValue=!1},hideSourceArea:function(){AJS.$("#editor-html-source-container").addClass("hidden");
this.setToolBarInactive(!1);this.transferSourceToEditor();b("#rte-button-source-mode").removeClass("active");b("#rte-button-publish").unbind("click.source-save")},showSourceArea:function(){AJS.$("#editor-html-source-container").removeClass("hidden");this.setSourceAreaHeight();this.setToolBarInactive(!0);this.sourceInitialValue=tinyMCE.activeEditor.getContent();this.setSourceAreaVal(this.sourceInitialValue);b("#rte-button-source-mode").addClass("active");b("#rte-button-publish").bind("click.source-save",
Confluence.Editor.transferSourceToEditor)},getSourceAreaVal:function(){return AJS.$("#editor-html-source").val()},setSourceAreaVal:function(a){AJS.$("#editor-html-source").val(a)},setSourceAreaHeight:function(){var a=AJS.Rte.getTinyMceEditorMinHeight();AJS.debug("HTML source height= "+a);var c=b("#editor-html-source")[0].scrollHeight;c>a&&(a=c,AJS.debug("ACTUAL HEIGHT "+c));b("#editor-html-source-container").height(a+"px")},setToolBarInactive:function(a){b("#rte-toolbar").toggleClass("disabled",a)},
isVisible:function(){return 0<b("#wysiwyg:visible").length||0<b("#editor-html-source-container:visible").length||0<b("#preview:visible").length}}}($));AJS.toInit(function(){AJS.bind("init.rte",Confluence.Editor.onInit)});AJS.Editor=Confluence.Editor;
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:page-editor-js', location = 'editor/page-editor-ui.js' */
AJS.bind("init.rte",function(){var c=function(b){for(var a=0;a<Confluence.Editor.UI.buttons.length;a++)h(b,Confluence.Editor.UI.buttons[a])},h=function(b,a){a&&(b?a.removeAttr("aria-disabled"):a.attr("aria-disabled","true"))},i=function(b){return b.length&&"true"!==b.attr("aria-disabled")},g=function(){return AJS.Meta.get("new-page")},j=function(){var b="";g()||(b="Edit"+" - ");return b},e=Confluence.Editor,l=$("#rte-spinner"),f;f=Confluence.Templates.Editor.Page.saveButton({contentType:AJS.Meta.get("content-type")});
$("#rte-button-publish").replaceWith(f);f=$("#rte-button-publish");e.UI={spinner:l,saveButton:f,overwriteButton:$("#rte-button-overwrite"),editButton:$("#rte-button-edit"),previewButton:$("#rte-button-preview"),cancelButton:$("#rte-button-cancel"),watchPageCheckbox:$("#watchPage"),watchPageToolbarGroup:$(".toolbar-group-watch-page"),setButtonsState:c,setButtonState:h,isButtonEnabled:i,registerFormButton:function(b,a){Confluence.Editor.UI[b]=a;Confluence.Editor.UI.buttons.push(a)},postingDatePicker:null,
isFormEnabled:function(){for(var a=0;a<Confluence.Editor.UI.buttons.length;a++)if(i(Confluence.Editor.UI.buttons[a]))return!0;return!1},toggleSavebarBusy:function(a){if(a){if(!Confluence.Editor.UI.isFormEnabled())return!1;Confluence.Editor.UI.spinner.addClass("aui-icon-wait");c(!1)}else Confluence.Editor.UI.spinner.removeClass("aui-icon-wait"),c(!0);return!0},toggleWatchPage:function(a){a&&"comment"===AJS.Meta.get("content-type")?(Confluence.Editor.UI.watchPageToolbarGroup.show(),Confluence.Editor.UI.watchPageCheckbox.length&&
(Confluence.Editor.UI.watchPageCheckbox[0].checked=!1)):Confluence.Editor.UI.watchPageToolbarGroup.hide()}};AJS.trigger("rte.init.ui");Confluence.Editor.UI.buttons=[Confluence.Editor.UI.saveButton,Confluence.Editor.UI.overwriteButton,Confluence.Editor.UI.editButton,Confluence.Editor.UI.previewButton,Confluence.Editor.UI.cancelButton];var a=Confluence.Editor,k=Confluence.Editor.UI.cancelButton;a.isNewPage()&&$("#content-title").focus().select();a.addCancelHandler(function(){1<a.getNumConcurrentEditors()&&
AJS.Confluence.Analytics.publish("rte.notification.concurrent-editing.cancel",{numEditors:a.getNumConcurrentEditors(),pageId:AJS.params.pageId,draftType:AJS.params.draftType})});"comment"===AJS.Meta.get("content-type")&&Confluence.Editor.addSaveHandler(function(){if(AJS.Rte.Content.isEmpty())return AJS.Confluence.EditorNotification.notify("warning","Comment text is empty. Cannot create empty comments."),!1});("comment"===AJS.Meta.get("content-type")||"template"===AJS.Meta.get("content-type"))&&a.addCancelHandler(function(){if(Confluence.Editor.UI.isFormEnabled()&&
Confluence.Editor.hasContentChanged()&&!Confluence.Editor.isEmpty()){var a="comment"===AJS.Meta.get("content-type")?"Your comment will be lost.":"Your unsaved template changes will be lost.";if(!confirm(a))return!1}});a.addSaveHandler(function(){1<a.getNumConcurrentEditors()&&AJS.Confluence.Analytics.publish("rte.notification.concurrent-editing.save",{numEditors:a.getNumConcurrentEditors(),pageId:AJS.params.pageId,draftType:AJS.params.draftType})});a.addSubmitHandler(function(b){return Confluence.Editor.UI.toggleSavebarBusy(!0)?
a.contentFormSubmit(b):!1});this.currentEditMode=this.MODE_RICHTEXT;a.UI.editButton.click(function(b){Confluence.Editor.UI.isFormEnabled()&&(Confluence.Editor.changeMode(a.MODE_RICHTEXT),setTimeout(function(){AJS.Rte.getEditor().focus();tinymce.isGecko&&Confluence.Editor.bookmark&&AJS.Rte.getEditor().selection.moveToBookmark(Confluence.Editor.bookmark)},0),k.enable());b.preventDefault()});a.UI.previewButton.click(function(b){Confluence.Editor.UI.isFormEnabled()&&a.currentEditMode!==a.MODE_PREVIEW&&
(c(!1),Confluence.Editor.UI.spinner.addClass("aui-icon-wait"),tinymce.isGecko&&!Confluence.Editor.bookmark&&(Confluence.Editor.bookmark=tinymce.activeEditor.selection.getBookmark()),a.changeMode(a.MODE_PREVIEW,{errorCallback:function(){c(true);Confluence.Editor.UI.spinner.removeClass("aui-icon-wait")}}),k.disable());b.preventDefault()});$("#editor-html-source").change(a.setSourceAreaHeight).keyup(a.setSourceAreaHeight);$("#rte-button-labels").bind("updateLabel",function(){var a=+AJS.Meta.get("num-labels")||
0,d="Labels";1===a?d=AJS.format("{0} Label",a):1<a&&(d=AJS.format("{0} Labels",a));$("#rte-button-labels").attr("data-tooltip",d)});e=$("#PostingDate");e.length&&(e.attr("max",moment().format("YYYY-MM-DD")),a.UI.postingDatePicker=e.datePicker({overrideBrowserDefault:!0}),a.UI.postingDatePicker.hide());$(".mceProgress, .mceBlocker",$("#wysiwygTextarea_parent")[0]).live("click",function(){AJS.Rte.getEditor().focus()});$(window).bind("render-content-loaded",
function(b,d){var c=$("#previewArea iframe");if(c.contents().find("body")[0]==d){a.previewFrameOnload(d,c);a.UI.setButtonsState(true);c.focus();window.focus();$(document).trigger("iframeAppended",c)}});AJS.Meta.get("heartbeat")&&(a.heartbeat(),Confluence.Editor.heartbeatType.normal());AJS.bind("watchpage.pageoperation",function(){Confluence.Editor.UI.toggleWatchPage(false)});AJS.bind("unwatchpage.pageoperation",function(){Confluence.Editor.UI.toggleWatchPage(true)});g()&&"inlinecommentform"===AJS.Meta.get("form-name")&&
(document.title="Edit"+document.title);var m=document.title;g()&&$.trim($("input#content-title").val())&&(document.title=j()+$("input#content-title").val()+" - "+AJS.Meta.get("space-name")+" - "+AJS.Meta.get("site-title"));$("input#content-title").on("change input",function(){if(AJS.Meta.get("content-type")!=="template"){var a=j();document.title=$.trim(this.value)?a+this.value+" - "+AJS.Meta.get("space-name")+" - "+AJS.Meta.get("site-title"):m}});AJS.trigger("init.rte-control")});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:page-editor-js', location = 'tinymce3/plugins/insertwiki/insert-wiki-markup.soy' */
// This file was automatically generated from insert-wiki-markup.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.InsertWiki == 'undefined') { Confluence.Templates.InsertWiki = {}; }


Confluence.Templates.InsertWiki.originalDefaultTempWikiMarkupDialog = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<form action=\'#\' method=\'post\' id="insert-wiki-markup-form" class="aui"><textarea class=\'monospaceInput textarea originalDefault\' id=\'insert-wiki-textarea\' name=\'wikitext\'/></form>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.InsertWiki.previewWikiIframeContent = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<!DOCTYPE html><html class="insert-wiki-markup-dialog"><head></head><body class="wiki-content previewWiki"></body></html>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.InsertWiki.wikiMarkupDialog = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<p id="insert-wiki-info-title">', soy.$$escapeHtml("Enter wiki markup or markdown below. Confluence will convert your content to editor format and insert it into your page."), '</p><form action=\'#\' method=\'post\' id="insert-wiki-markup-form" class="aui"><h3 class="wiki-title"><span id="insert-wiki-insert-title">', soy.$$escapeHtml("Insert"), '</span><span id="insert-wiki-preview-title">', soy.$$escapeHtml("Preview"), '</span></h3><textarea class=\'monospaceInput textarea\' id=\'insert-wiki-textarea\' name=\'wikitext\'/><!-- --><div class=\'example-container\' id=\'insert-wiki-textarea-preview\'></div></form>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.InsertWiki.wikiErrorSubDialog = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<p class=\'warning\'>', soy.$$escapeHtml(opt_data.warningMessage), '</p><p class=\'exception-report\'><span class=\'exceptionMessage\'>', soy.$$escapeHtml(opt_data.exceptionMessage), '</span></p>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.InsertWiki.wikiParserSelector = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<span class="wiki-parser-selector"><form action="#" method="post" id="d" class="aui"><select class="select medium-field" id="wiki-parser-selection-tool" name="wiki-parser-selection-tool" title="wiki parser selector"><option value="', soy.$$escapeHtml(opt_data.DEFAULT.val), '">', soy.$$escapeHtml(opt_data.DEFAULT.label), '</option>');
  var wikiLangList26 = soy.$$getMapKeys(opt_data.WIKI);
  var wikiLangListLen26 = wikiLangList26.length;
  for (var wikiLangIndex26 = 0; wikiLangIndex26 < wikiLangListLen26; wikiLangIndex26++) {
    var wikiLangData26 = wikiLangList26[wikiLangIndex26];
    output.append((opt_data.WIKI[wikiLangData26].val != opt_data.DEFAULT.val) ? '<option value="' + soy.$$escapeHtml(opt_data.WIKI[wikiLangData26].val) + '">' + soy.$$escapeHtml(opt_data.WIKI[wikiLangData26].label) + '</option>' : '');
  }
  output.append('</select></form></span>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:page-editor-js', location = 'editor/page-editor.soy' */
// This file was automatically generated from page-editor.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.Editor == 'undefined') { Confluence.Templates.Editor = {}; }
if (typeof Confluence.Templates.Editor.Page == 'undefined') { Confluence.Templates.Editor.Page = {}; }


Confluence.Templates.Editor.Page.saveButton = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<button id="rte-button-publish" class="aui-button aui-button-primary" type="submit" name="confirm" value="Save"', (opt_data.contentType == 'blogpost') ? 'title="' + soy.$$escapeHtml("Publish your blog post") + '"' : (opt_data.contentType == 'page') ? 'title="' + soy.$$escapeHtml("Save your page") + '"' : 'title="' + soy.$$escapeHtml("Save") + '"', 'tabindex="101">', (opt_data.contentType == 'blogpost') ? '<span class="trigger-text">' + soy.$$escapeHtml("Publish") + '</span>' : '<span class="trigger-text">' + soy.$$escapeHtml("Save") + '</span>', '</button>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:page-editor-js', location = 'insert-image-dialog/insert-image-dialog.js' */
(function(e){e.fn.sizeToFit=function(){var a=jQuery;this.each(function(){var b=this,c=a(this).parent(),d=c.height();c.children().each(function(){this!==b&&a(this).is(":visible")&&(d-=a(this).outerHeight())});c=a(this).outerHeight()-a(this).height();a(this).css("height",Math.max(0,d-c)+"px")});return this};Confluence.Editor.ImageDialog={beforeShowListeners:[],panelComponent:[]};Confluence.Editor.defaultInsertImageDialog=function(){AJS.Rte.BookmarkManager.storeBookmark();Confluence.Editor.insertImageDialog(function(a){AJS.Rte.BookmarkManager.restoreBookmark();
var b={};if(a.url)b={url:a.url,filename:a.url,contentId:a.contentId},tinymce.confluence.ImageUtils.insertFromProperties(b);else{var c=!0,d=1<a.selectItems.length;_.each(a.selectItems,function(a){a.isImage()?(b={filename:a.getFileName(),contentId:a.get("ownerId")},tinymce.confluence.ImageUtils.insertFromProperties(b,d)):(c=!1,AJS.MacroBrowser.getMacroMetadata("view-file")?Confluence.Editor.ImageDialog._insertFilePlaceholderToEditor(a):Confluence.Editor.ImageDialog._insertLinkToEditor(a))});require(["conf/confluence-drag-and-drop/analytics/files-upload-analytics"],
function(b){b.triggerEvent("confluence.insert-files-dialog.insert",a.selectItems,c)})}e("#comments-section").length&&AJS.Rte.fixEditorFocus()},function(){AJS.Rte.BookmarkManager.restoreBookmark()})};Confluence.Editor.ImageDialog.findPanelComponentById=function(a){for(var b=Confluence.Editor.ImageDialog.panelComponent,c=0,d=b.length;c<d;c++)if(b[c].id==a)return b[c]};Confluence.Editor.insertImageDialog=function(a,b){var c=new Confluence.Editor.FileDialog.FileDialogView({submitCallback:a,cancelCallback:b,
beforeShowListeners:Confluence.Editor.ImageDialog.beforeShowListeners,panelComponents:Confluence.Editor.ImageDialog.panelComponent});c.render();return c};Confluence.Editor.ImageDialog._insertLinkToEditor=function(a){var b=Confluence.Link.fromREST(a.attributes);b.attrs["data-linked-resource-container-id"]=a.get("ownerId");b.attrs.href=a.get("downloadUrl");b.insert()};Confluence.Editor.ImageDialog._insertFilePlaceholderToEditor=function(a){var b={name:a.get("fileName"),page:a.get("parentTitle"),space:a.get("space")?
a.get("space").key:"",date:a.get("datePath"),ownerId:a.get("ownerId")};require(["confluence-editor/utils/attachments-insert"],function(a){a.insertFilePlaceholder(b)})}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:page-editor-js', location = 'panel-components/panel-components-init.js' */
(function(g,a){AJS.toInit(function(){if(a.Editor&&a.Editor.ImageDialog&&a.Editor.ImageDialog.panelComponent){var b=a.Editor.FileDialog.eventListener,d=a.Editor.FileDialog.ExternalPanelView,e=a.Editor.FileDialog.SearchPanelView,f=a.Editor.FileDialog.AttachmentsPanelView,c=a.Editor.ImageDialog.panelComponent;"template"!==AJS.Meta.get("content-type")&&(b=new f({eventListener:b}),c.push(b));c.push(new d);c.push(new e)}})})(AJS.$,Confluence||{});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:page-editor-js', location = 'drafts/page-editor-drafts.js' */
Confluence.Editor.Drafts=function(c){var i=!1,h=!1,f=function(b,a,j){c("<input>").attr({type:"hidden",name:b,value:a}).appendTo(j)};return{isDraftSaved:function(){return i},isDraftManuallySaved:function(){return h},isDraftBlank:function(){return AJS.Rte.Content.isEmpty()&&!c.trim(Confluence.Editor.getCurrentTitle())},isNewContent:function(){return AJS.Rte.getEditor()&&0==AJS.Meta.get("page-id")&&0<AJS.Meta.get("draft-id")},unloadMessage:function(){var b=function(){Confluence.Editor.Drafts.isDraftBlank()?
Confluence.Editor.Drafts.discardDraft(AJS.Meta.get("draft-id")):Confluence.Editor.Drafts.save({skipErrorHandler:!0})};if("undefined"!==typeof seleniumAlert)b();else if(Confluence.Editor.hasContentChanged()||Confluence.Editor.Drafts.isDraftSaved()&&!Confluence.Editor.Drafts.isDraftManuallySaved())return b(),"A draft will be saved. You can resume editing this draft the next time you open the editor or view all your drafts in your profile."},bindUnloadMessage:function(){c(window).bind("beforeunload.editor",Confluence.Editor.Drafts.unloadMessage)},unBindUnloadMessage:function(){c(window).unbind("beforeunload.editor")},
useDraft:function(){var b=AJS.Meta.get("existing-draft-id");Confluence.Editor.Drafts.unBindUnloadMessage();var a=Confluence.Editor.getCurrentForm();f("useDraft","true",a);f("contentChanged",""+Confluence.Editor.hasContentChanged(),a);f("pageId",AJS.params.pageId,a);c("#draftId",Confluence.Editor.getCurrentForm()).val(b);a.spaceKey||f("spaceKey",AJS.Meta.get("space-key"),a);a.action=AJS.Confluence.getContextPath()+"/pages/"+(AJS.params.newPage?"create":"edit")+AJS.params.draftType+".action";a.submit()},
discardDraft:function(b){AJS.safeAjax({url:Confluence.getContextPath()+"/json/deletedraft.action",type:"GET",dataType:"json",data:{draftId:b},success:function(a){if(a.actionErrors){for(var b=["<ul>"],a=a.actionErrors,d=0;d<a.length;d++)AJS.log("error: "+a[d]),b.push("<li>"+a[d]+"</li>");b.push("</ul>");AJS.messages.error("#editor-messages",{title:"Error",body:"There were errors discarding your draft: "+b.join("\n")})}else c("#draft-messages").remove(),AJS.messages.success("#editor-messages",{body:"Your draft has been discarded."})},
error:function(a){AJS.messages.error({title:"Error",body:a.errors||"An unknown error has occurred. Please check your logs."})}})},save:function(b){b=b||{};if(Confluence.Editor.isSubmitting||!Confluence.Editor.hasContentChanged()&&!b.forceSave)AJS.debug("skipping draft save");else{AJS.debug("preparing to save editor draft");var a=c("#content-title"),f=c("#newSpaceKey"),d=c("#originalVersion"),k=Confluence.Editor.inRichTextMode(),a={draftId:AJS.Meta.get("draft-id"),pageId:AJS.params.pageId,type:AJS.params.draftType,
title:a.hasClass("placeholded")?"":a.val(),spaceKey:f.length?f.val():encodeURIComponent(AJS.Meta.get("space-key")),content:AJS.Rte.getEditor().getContent()};d.length&&(a.pageVersion=parseInt(d.val(),10));c.ajax({type:"POST",url:AJS.params.contextPath+"/rest/tinymce/1/drafts",data:c.toJSON(a),contentType:"application/json",dataType:"text json",success:function(a){if(a!=null){Confluence.Editor.contentHasChangedSinceLastSave=false;k&&AJS.Rte.Content.editorResetContentChanged();i=true;h=!!b.manualSave;
AJS.Meta.set("draft-id",a.draftId);AJS.Meta.set("draft-share-id",a.draftId);c("#draftId",Confluence.Editor.getCurrentForm()).val(a.draftId);c("#draft-error").remove();var f=c("#draft-status"),e;if(!(e=a.time)){var g=new Date;e=g.getHours();var g=g.getMinutes(),d=e>11?"PM":"AM";e=e%12;e=(e==0?"12":e)+":"+(g<10?"0":"")+g+" "+d}g=h?AJS.format("Draft saved at {0}",e):AJS.format("Draft autosaved at {0}",e);d=AJS.params.newPage?g:"<a id='view-diff-link-heartbeat' class='view-diff-link' href='#'>"+
g+"</a>";f.attr("data-tooltip",g);f.html(d);+AJS.Meta.get("content-id")||AJS.Meta.set("content-id",a.pageId);if(c.isFunction(b.onSuccessHandler))b.onSuccessHandler(a);Confluence.Editor.Drafts.lastSaveTime=e;AJS.trigger("rte-draft-saved",{draftId:a.draftId,draftShareId:a.draftShareId})}},error:function(a,d){if(!b.skipErrorHandler){Confluence.Editor.addErrorMessage("draft-error",Confluence.Editor.Drafts.lastSaveTime?AJS.format("Error saving draft. Last draft saved at {0}",Confluence.Editor.Drafts.lastSaveTime):
"Error saving draft. No draft has been saved.",true);if(c.isFunction(b.onErrorHandler))b.onErrorHandler(d)}},timeout:3E4})}}}}(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:page-editor-js', location = 'editor/page-editor-permissions.js' */
AJS.PagePermissions=AJS.PagePermissions||{};
AJS.toInit(function(e){var g=function(c,a){var b=e("#rte-button-restrictions"),f=b.find(".icon"),d="";c||a?(f.removeClass("icon-restricted icon-restricted-inherited icon-unrestricted").addClass(c?"icon-restricted":"icon-restricted-inherited"),d="Restricted"):(f.removeClass("icon-restricted icon-restricted-inherited icon-unrestricted").addClass("icon-unrestricted"),d="Unrestricted");b.attr("data-tooltip",d);b.data("explicit-restrictions",
c);b.data("inherited-restrictions",a)};AJS.bind("editor-heartbeat",function(c,a){if("undefined"!==typeof a.restrictionsHash){var b=e("#rte-button-restrictions");if(b.data("restrictionsHash")!==a.restrictionsHash){var f=e("#update-page-restrictions-dialog"),d=""!==a.restrictionsHash,h=!!b.data("inherited-restrictions");f.is(":visible")&&AJS.PagePermissions.updateRestrictionsDialog?AJS.PagePermissions.updateRestrictionsDialog():g(d,h);b.data("restrictionsHash",a.restrictionsHash)}}});AJS.bind("edit-page-restrictions-updated",
function(c,a){g(a.hasExplicitRestrictions,a.hasInheritedRestrictions)});e.extend(AJS.PagePermissions,{updateEditPageRestrictions:g})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.auiplugin:aui-experimental-progress-indicator', location = 'js/aui-experimental-progress-indicator.js' */
(function(){function A(B,D,C){AJS._internal.animation.recomputeStyle(B);B.css("width",C*100+"%");D.attr("data-value",C)}AJS.progressBars={update:function(G,M){var C=AJS.$(G).first();var F=C.children(".aui-progress-indicator-value");var L=F.attr("data-value")||0;var K="aui-progress-indicator-after-update";var I="aui-progress-indicator-before-update";var D="transitionend webkitTransitionEnd";var E=!C.attr("data-value");if(E){F.css("width",0)}if(typeof M==="number"&&M<=1&&M>=0){C.trigger(I,[L,M]);var H=document.body||document.documentElement;var B=H.style;var J="transition";if(typeof B.transition==="string"||typeof B.WebkitTransition==="string"){F.one(D,function(){C.trigger(K,[L,M])});A(F,C,M)}else{A(F,C,M);C.trigger(K,[L,M])}}return C},setIndeterminate:function(D){var C=AJS.$(D).first();var B=C.children(".aui-progress-indicator-value");C.removeAttr("data-value");AJS._internal.animation.recomputeStyle(C);B.css("width","100%")}}}());
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.web.resources:draft-changes-js', location = '/includes/js/draft-changes.js' */
AJS.toInit(function(e){var b,i=function(b){var g="Are you sure you want to discard this draft?";return confirm(g)?(AJS.safeAjax({url:Confluence.getContextPath()+"/json/deletedraft.action",type:"GET",dataType:"json",data:{draftId:b},success:function(c){if(c.actionErrors){for(var d=["<ul>"],c=c.actionErrors,a=0;a<c.length;a++)AJS.log("error: "+c[a]),d.push("<li>"+c[a]+"</li>");d.push("</ul>");AJS.messages.error("#errors",{title:"Error",body:"There were errors discarding your draft."+
" "+d.join("\n")})}else d=e("#draft-"+b),c=d.closest("table"),a=c.closest(".drafts-container"),d.remove(),0==c.find("tbody tr").length&&a.append('<span id="no-drafts-message">'+"No drafts found."+"</span>")},error:function(b){AJS.messages.error({title:"Error",body:b.errors||"An unknown error has occurred. Please check your logs."})}}),!0):!1};e("body").on("click",".view-diff-link",function(j){var g=this.id,c=e(this);if(!b){var d="view-diff-link-notification"===g;b=new AJS.Dialog(860,530,"view-diff-draft-dialog");
var a="Unpublished Changes for \'{0}\'";b.addHeader(a.replace(/\{0\}/,""));a=e(Confluence.Templates.DraftChanges.dialogContent());b.addPanel("Diff",a);d&&(b.addButton("Edit",function(){b.hide();Confluence.Editor&&Confluence.Editor.Drafts?Confluence.Editor.Drafts.useDraft():window.location=e(this).attr("data-href")},"resume-diff-link"),b.addButton("Discard",function(){if(Confluence.Editor&&Confluence.Editor.Drafts)b.hide(),Confluence.Editor.Drafts.discardDraft(AJS.Meta.get("existing-draft-id")),
AJS.Confluence.Analytics.publish("rte.notification.draft.discard");else{var a=e(this).data("draftid");i(a)&&b.hide()}},"discard-diff-link"));b.addCancel("Close",function(){b.hide();return false});a.removeClass("hidden")}b.addHeader("Loading");e("#diff-view").html("<tr><td id='draft-changes-waiting-icon'>Loading...</td></tr>");var h,a=c.attr("class"),f=/draftPageId:([^ ]*)/.exec(a),c=f?f[1]:AJS.Meta.get("page-id"),d=(f=/username:([^ ]*)/.exec(a))?f[1]:
AJS.Meta.get("remote-user");h=(f=/draftId:([^ ]*)/.exec(a))?f[1]:null;AJS.safeAjax({url:Confluence.getContextPath()+"/draftchanges/viewdraftchanges.action",type:"GET",dataType:"json",data:{pageId:c,username:d},success:function(a){if(a.actionErrors){for(var c="",a=a.actionErrors,d=0;d<a.length;d++)AJS.log("error: "+a[d]),c=c+"<div>"+a[d]+"</div>";e("#diff-view").html(c)}else e("#diff-view").html(a.htmlDiff),c=AJS.format("Unpublished Changes for \'\'{0}\'\'",AJS.escapeHtml(a.title)),b.addHeader(c),b.popup.element.find(".dialog-title").prepend(Confluence.Templates.DraftChanges.helpLink()),
c=Confluence.getContextPath(),e(".resume-diff-link").attr("data-href",c+"/pages/resumedraft.action?draftId="+h),e(".discard-diff-link").data("draftid",h),AJS.setVisible("#merge-warning",a.isMergeRequired)},error:function(a){a=a.errors||"An unknown error has occurred. Please check your logs";e("#diff-view").html(a)}});b.show();AJS.trigger("analytics",{name:"confluence.editor.view-diff-dialog.open",data:{elementTriggerId:g}});return AJS.stopEvent(j)});e("#draft-space-list").on("click",".discard-draft-link",
function(b){b.preventDefault();AJS.Confluence.Analytics.publish("confluence.draft-list.discard");b=e(this).data("draftid");i(b)}).on("click",".resume-draft-link",function(){AJS.Confluence.Analytics.publish("confluence.draft-list.resume")})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.web.resources:draft-changes-js', location = '/includes/soy/draft-changes-dialog.soy' */
// This file was automatically generated from draft-changes-dialog.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.DraftChanges == 'undefined') { Confluence.Templates.DraftChanges = {}; }


Confluence.Templates.DraftChanges.dialogContent = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div id="draft-changes-dialog" class="hidden"><div id="diff-view" class="wiki-content"></div></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.DraftChanges.helpLink = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  Confluence.Templates.Dialog.helpLink({href: "https://docs.atlassian.com/confluence/docs-58/Working+with+Drafts#viewchange"}, output);
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.tinymce:atlassian-rte-javascript-tinymce-core', location = 'jscripts/tiny_mce/classes/tinymce.js' */
(function(g){var k=/^\s*|\s*$/g,l="$1"==="B".replace(/A(.)|B/,"$1"),h={majorVersion:"3",minorVersion:"4.9-atlassian-11",releaseDate:"2012-03-06",_init:function(){function a(a){var c=/editor/.test(a);if(a&&/tiny_mce(|_gzip|_jquery|_prototype|_full)(_dev|_src)?.js/.test(a)||c){/_(src|dev)\.js/g.test(a)&&(b.suffix="_src");if(-1!=(j=a.indexOf("?")))b.query=a.substring(j+1);b.baseURL=c?a.substring(0,a.indexOf("/download/")):a.substring(0,a.lastIndexOf("/"));f&&(-1==b.baseURL.indexOf("://")&&0!==b.baseURL.indexOf("/"))&&
(b.baseURL=f+b.baseURL);c&&(b.baseURL+="/download/resources/com.atlassian.plugins.editor/tinymcesource");return b.baseURL}return null}var b=this,d=document,c=navigator,e=c.userAgent,f,j,i;b.isOpera=g.opera&&opera.buildNumber;b.isWebKit=/WebKit/.test(e);b.isChrome=b.isWebKit&&/Chrome/.test(e);b.isIE11=!!(-1!=e.indexOf("Trident/")&&(-1!=e.indexOf("rv:")||-1!=c.appName.indexOf("Netscape")));b.isIE=!b.isWebKit&&!b.isOpera&&/MSIE/gi.test(e)&&/Explorer/gi.test(c.appName);b.isIE=b.isIE&&/MSIE (\w+)\./.exec(e)[1];
b.isIE=b.isIE||b.isIE11;b.isIE6=b.isIE&&/MSIE [56]/.test(e);b.isIE7=b.isIE&&/MSIE [7]/.test(e);b.isIE8=b.isIE&&/MSIE [8]/.test(e);b.isIE9=b.isIE&&/MSIE [9]/.test(e);b.isIE10=b.isIE&&/MSIE \d\d/.test(e);b.isIE10up=b.isIE&&/MSIE \d\d/.test(e)||b.isIE11;b.isGecko=!b.isWebKit&&!b.isIE11&&/Gecko/.test(e);b.isMac=-1!=e.indexOf("Mac");b.isAir=/adobeair/i.test(e);b.isIDevice=/(iPad|iPhone)/.test(e);b.isIOS5=b.isIDevice&&534<=e.match(/AppleWebKit\/(\d*)/)[1];if(g.tinyMCEPreInit)b.suffix=tinyMCEPreInit.suffix,
b.baseURL=tinyMCEPreInit.base,b.query=tinyMCEPreInit.query;else{b.suffix="";e=d.getElementsByTagName("base");for(c=0;c<e.length;c++)if(i=e[c].href)/^https?:\/\/[^\/]+$/.test(i)&&(i+="/"),f=i?i.match(/.*\//)[0]:"";f||(c=document.location,f=c.protocol+"//"+c.hostname+(c.port?":"+c.port:""));if(c=AJS.Meta.get("rte.src.url"))a(c);else{e=d.getElementsByTagName("script");for(c=0;c<e.length;c++)if(a(e[c].src))return;if(d=d.getElementsByTagName("head")[0]){e=d.getElementsByTagName("script");for(c=0;c<e.length&&
!a(e[c].src);c++);}}}},is:function(a,b){return!b?void 0!==a:"array"==b&&a.hasOwnProperty&&a instanceof Array?!0:typeof a==b},makeMap:function(a,b,d){a=a||[];"string"==typeof a&&(a=a.split(b||","));d=d||{};for(b=a.length;b--;)d[a[b]]={};return d},each:function(a,b,d){var c,e;if(!a)return 0;d=d||a;if(void 0!==a.length){c=0;for(e=a.length;c<e;c++)if(!1===b.call(d,a[c],c,a))return 0}else for(c in a)if(a.hasOwnProperty(c)&&!1===b.call(d,a[c],c,a))return 0;return 1},map:function(a,b){var d=[];h.each(a,
function(a){d.push(b(a))});return d},grep:function(a,b){var d=[];h.each(a,function(a){(!b||b(a))&&d.push(a)});return d},inArray:function(a,b){var d,c;if(a){d=0;for(c=a.length;d<c;d++)if(a[d]===b)return d}return-1},extend:function(a,b){var d,c,e=arguments;d=1;for(c=e.length;d<c;d++)b=e[d],h.each(b,function(b,c){void 0!==b&&(a[c]=b)});return a},trim:function(a){return(a?""+a:"").replace(k,"")},create:function(a,b,d){var c,e,f,g,i,h=0,a=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(a);f=a[3].match(/(^|\.)(\w+)$/i)[2];
e=this.createNS(a[3].replace(/\.\w+$/,""),d);if(!e[f])if("static"==a[2]){if(e[f]=b,this.onCreate)this.onCreate(a[2],a[3],e[f])}else if(b[f]||(b[f]=function(){},h=1),e[f]=b[f],this.extend(e[f].prototype,b),a[5]&&(c=this.resolve(a[5]).prototype,g=a[5].match(/\.(\w+)$/i)[1],i=e[f],e[f]=h?function(){return c[g].apply(this,arguments)}:function(){this.parent=c[g];return i.apply(this,arguments)},e[f].prototype[f]=e[f],this.each(c,function(b,a){e[f].prototype[a]=c[a]}),this.each(b,function(b,a){c[a]?e[f].prototype[a]=
function(){this.parent=c[a];return b.apply(this,arguments)}:a!=f&&(e[f].prototype[a]=b)})),this.each(b["static"],function(b,a){e[f][a]=b}),this.onCreate)this.onCreate(a[2],a[3],e[f].prototype)},walk:function(a,b,d,c){c=c||this;a&&(d&&(a=a[d]),h.each(a,function(a,f){if(!1===b.call(c,a,f,d))return!1;h.walk(a,b,d,c)}))},createNS:function(a,b){var d,c,b=b||g,a=a.split(".");for(d=0;d<a.length;d++)c=a[d],b[c]||(b[c]={}),b=b[c];return b},resolve:function(a,b){var d,c,b=b||g,a=a.split(".");d=0;for(c=a.length;d<
c&&!(b=b[a[d]],!b);d++);return b},addUnload:function(a,b){var d=this,a={func:a,scope:b||this};if(d.unloads)d.unloads.push(a);else{var c=function(){var a=d.unloads,b,h;if(a){for(h in a)(b=a[h])&&b.func&&b.func.call(b.scope,1);g.detachEvent?(g.detachEvent("onbeforeunload",e),g.detachEvent("onunload",c)):g.removeEventListener&&g.removeEventListener("unload",c,!1);d.unloads=w=c=0;g.CollectGarbage&&CollectGarbage()}},e=function(){var a=document;if("interactive"==a.readyState){var b=function(){a.detachEvent("onstop",
b);c&&c();a=0};a&&a.attachEvent("onstop",b);g.setTimeout(function(){a&&a.detachEvent("onstop",b)},0)}};g.attachEvent?(g.attachEvent("onunload",c),g.attachEvent("onbeforeunload",e)):g.addEventListener&&g.addEventListener("unload",c,!1);d.unloads=[a]}return a},removeUnload:function(a){var b=this.unloads,d=null;h.each(b,function(c,e){if(c&&c.func==a)return b.splice(e,1),d=a,!1});return d},explode:function(a,b){return a?h.map(a.split(b||","),h.trim):a},_addVer:function(a){var b;if(!this.query)return a;
b=(-1==a.indexOf("?")?"?":"&")+this.query;return-1==a.indexOf("#")?a+b:a.replace("#",b+"#")},_replace:function(a,b,d){return l?d.replace(a,function(){var a=b,d=arguments,f;for(f=0;f<d.length-2;f++)a=void 0===d[f]?a.replace(RegExp("\\$"+f,"g"),""):a.replace(RegExp("\\$"+f,"g"),d[f]);return a}):d.replace(a,b)}};h._init();g.tinymce=g.tinyMCE=h})(window);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.tinymce:atlassian-rte-javascript-tinymce-core', location = 'jscripts/tiny_mce/classes/util/Dispatcher.js' */
tinymce.create("tinymce.util.Dispatcher",{scope:null,listeners:null,Dispatcher:function(a){this.scope=a||this;this.listeners=[]},add:function(a,b){this.listeners.push({cb:a,scope:b||this.scope});return a},addToTop:function(a,b){this.listeners.unshift({cb:a,scope:b||this.scope});return a},remove:function(a){var b=this.listeners,c=null;tinymce.each(b,function(d,e){if(a==d.cb)return c=a,b.splice(e,1),!1});return c},dispatch:function(){var a,b=arguments,c,d=this.listeners;for(c=0;c<d.length&&!(a=d[c],
a=a.cb.apply(a.scope,0<b.length?b:[a.scope]),!1===a);c++);return a}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.tinymce:atlassian-rte-javascript-tinymce-core', location = 'jscripts/tiny_mce/classes/util/URI.js' */
(function(){var h=tinymce.each;tinymce.create("tinymce.util.URI",{URI:function(a,b){var c=this,e,a=tinymce.trim(a),b=c.settings=b||{};if(/^([\w\-]+):([^\/]{2})/i.test(a)||/^\s*#/.test(a))c.source=a;else if(0===a.indexOf("/")&&0!==a.indexOf("//")&&(a=(b.base_uri?b.base_uri.protocol||"http":"http")+"://mce_host"+a),/^[\w-]*:?\/\//.test(a)||(e=b.base_uri?b.base_uri.path:(new tinymce.util.URI(location.href)).directory,a=(b.base_uri&&b.base_uri.protocol||"http")+"://mce_host"+c.toAbsPath(e,a)),a=a.replace(/@@/g,
"(mce_at)"),a=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(a),h("source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),function(b,d){var e=a[d];e&&(e=e.replace(/\(mce_at\)/g,"@@"));c[b]=e}),e=b.base_uri){c.protocol||(c.protocol=e.protocol);c.userInfo||(c.userInfo=e.userInfo);!c.port&&"mce_host"==
c.host&&(c.port=e.port);if(!c.host||"mce_host"==c.host)c.host=e.host;c.source=""}},setPath:function(a){a=/^(.*?)\/?(\w+)?$/.exec(a);this.path=a[0];this.directory=a[1];this.file=a[2];this.source="";this.getURI()},toRelative:function(a){var b;if("./"===a)return a;a=new tinymce.util.URI(a,{base_uri:this});if("mce_host"!=a.host&&this.host!=a.host&&a.host||this.port!=a.port||this.protocol!=a.protocol)return a.getURI();b=this.toRelPath(this.path,a.path);a.query&&(b+="?"+a.query);a.anchor&&(b+="#"+a.anchor);
return b},toAbsolute:function(a,b){a=new tinymce.util.URI(a,{base_uri:this});return a.getURI(this.host==a.host&&this.protocol==a.protocol?b:0)},toRelPath:function(a,b){var c,e=0,f="",d,g,a=a.substring(0,a.lastIndexOf("/")),a=a.split("/");c=b.split("/");if(a.length>=c.length){d=0;for(g=a.length;d<g;d++)if(d>=c.length||a[d]!=c[d]){e=d+1;break}}if(a.length<c.length){d=0;for(g=c.length;d<g;d++)if(d>=a.length||a[d]!=c[d]){e=d+1;break}}if(1==e)return b;d=0;for(g=a.length-(e-1);d<g;d++)f+="../";d=e-1;for(g=
c.length;d<g;d++)f=d!=e-1?f+("/"+c[d]):f+c[d];return f},toAbsPath:function(a,b){var c,e=0,f=[],d;d=/\/$/.test(b)?"/":"";a=a.split("/");b=b.split("/");h(a,function(a){a&&f.push(a)});a=f;c=b.length-1;for(f=[];0<=c;c--)0==b[c].length||"."==b[c]||(".."==b[c]?e++:0<e?e--:f.push(b[c]));c=a.length-e;c=0>=c?f.reverse().join("/"):a.slice(0,c).join("/")+"/"+f.reverse().join("/");0!==c.indexOf("/")&&(c="/"+c);d&&c.lastIndexOf("/")!==c.length-1&&(c+=d);return c},getURI:function(a){var b;if(!this.source||a)b=
"",a||(this.protocol&&(b+=this.protocol+"://"),this.userInfo&&(b+=this.userInfo+"@"),this.host&&(b+=this.host),this.port&&(b+=":"+this.port)),this.path&&(b+=this.path),this.query&&(b+="?"+this.query),this.anchor&&(b+="#"+this.anchor),this.source=b;return this.source}})})();
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.tinymce:atlassian-rte-javascript-tinymce-core', location = 'jscripts/tiny_mce/classes/util/Cookie.js' */
(function(){var h=tinymce.each;tinymce.create("static tinymce.util.Cookie",{getHash:function(c){var c=this.get(c),b;c&&h(c.split("&"),function(a){a=a.split("=");b=b||{};b[unescape(a[0])]=unescape(a[1])});return b},setHash:function(c,b,a,d,e,g){var f="";h(b,function(a,b){f+=(!f?"":"&")+escape(b)+"="+escape(a)});this.set(c,f,a,d,e,g)},get:function(c){var b=document.cookie,a=c+"=",d;if(b){d=b.indexOf("; "+a);if(-1==d){if(d=b.indexOf(a),0!=d)return null}else d+=2;c=b.indexOf(";",d);-1==c&&(c=b.length);
return unescape(b.substring(d+a.length,c))}},set:function(c,b,a,d,e,g){document.cookie=c+"="+escape(b)+(a?"; expires="+a.toGMTString():"")+(d?"; path="+escape(d):"")+(e?"; domain="+e:"")+(g?"; secure":"")},remove:function(c,b){var a=new Date;a.setTime(a.getTime()-1E3);this.set(c,"",a,b,a)}})})();
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.tinymce:atlassian-rte-javascript-tinymce-core', location = 'jscripts/tiny_mce/classes/util/JSON.js' */
(function(){function e(a,d){var b,c,f,d=d||'"';if(null==a)return"null";f=typeof a;if("string"==f)return c="\bb\tt\nn\ff\rr\"\"''\\\\",d+a.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(a,e){if('"'===d&&"'"===a)return a;b=c.indexOf(e);if(b+1)return"\\"+c.charAt(b+1);a=e.charCodeAt().toString(16);return"\\u"+"0000".substring(a.length)+a})+d;if("object"==f){if(a.hasOwnProperty&&a instanceof Array){b=0;for(c="[";b<a.length;b++)c+=(0<b?",":"")+e(a[b],d);return c+"]"}c="{";for(b in a)a.hasOwnProperty(b)&&
(c+="function"!=typeof a[b]?(1<c.length?","+d:d)+b+d+":"+e(a[b],d):"");return c+"}"}return""+a}tinymce.util.JSON={serialize:e,parse:function(a){try{return eval("("+a+")")}catch(d){}}}})();
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.tinymce:atlassian-rte-javascript-tinymce-core', location = 'jscripts/tiny_mce/classes/util/XHR.js' */
tinymce.create("static tinymce.util.XHR",{send:function(a){function f(a){b=0;try{b=new ActiveXObject(a)}catch(c){}return b}var b,c=window,d=0;a.scope=a.scope||this;a.success_scope=a.success_scope||a.scope;a.error_scope=a.error_scope||a.scope;a.async=!1===a.async?!1:!0;a.data=a.data||"";if(b=c.XMLHttpRequest?new XMLHttpRequest:f("Microsoft.XMLHTTP")||f("Msxml2.XMLHTTP")){b.overrideMimeType&&b.overrideMimeType(a.content_type);b.open(a.type||(a.data?"POST":"GET"),a.url,a.async);a.content_type&&b.setRequestHeader("Content-Type",
a.content_type);b.setRequestHeader("X-Requested-With","XMLHttpRequest");b.send(a.data);var e=function(){!a.async||4==b.readyState||1E4<d++?(a.success&&1E4>d&&200==b.status?a.success.call(a.success_scope,""+b.responseText,b,a):a.error&&a.error.call(a.error_scope,1E4<d?"TIMED_OUT":"GENERAL",b,a),b=null):c.setTimeout(e,10)};if(!a.async)return e();c.setTimeout(e,10)}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.tinymce:atlassian-rte-javascript-tinymce-core', location = 'jscripts/tiny_mce/classes/util/JSONRequest.js' */
(function(){var e=tinymce.extend,f=tinymce.util.JSON,g=tinymce.util.XHR;tinymce.create("tinymce.util.JSONRequest",{JSONRequest:function(a){this.settings=e({},a);this.count=0},send:function(a){var c=a.error,h=a.success,a=e(this.settings,a);a.success=function(b,d){b=f.parse(b);"undefined"==typeof b&&(b={error:"JSON Parse error."});b.error?c.call(a.error_scope||a.scope,b.error,d):h.call(a.success_scope||a.scope,b.result)};a.error=function(b,d){c&&c.call(a.error_scope||a.scope,b,d)};a.data=f.serialize({id:a.id||
"c"+this.count++,method:a.method,params:a.params});a.content_type="application/json";g.send(a)},"static":{sendRPC:function(a){return(new tinymce.util.JSONRequest).send(a)}}})})();
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.tinymce:atlassian-rte-javascript-tinymce-core', location = 'jscripts/tiny_mce/classes/util/VK.js' */
(function(b){b.VK={DELETE:46,BACKSPACE:8,ENTER:13,TAB:9,SPACEBAR:32,UP:38,DOWN:40,modifierPressed:function(a){return a.shiftKey||a.ctrlKey||a.altKey}}})(tinymce);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.tinymce:atlassian-rte-javascript-tinymce-core', location = 'jscripts/tiny_mce/classes/util/Quirks.js' */
(function(g){function p(a){function k(b){var h=a.dom.create("body"),b=b.cloneContents();h.appendChild(b);return a.selection.serializer.serialize(h,{format:"html"})}a.onKeyDown.addToTop(function(b,h){var d=h.keyCode;if(d==n||d==m){var d=b.selection.getRng(!0),c;if(c=!d.collapsed)d=k(d),c=a.dom.createRng(),c.selectNode(a.getBody()),c=k(c),c=d===c;c&&(b.setContent("",{format:"raw"}),b.nodeChanged(),h.preventDefault())}})}function q(a){a.onKeyDown.add(function(a,b){if(b.keyCode===m&&a.selection.isCollapsed()&&
0===a.selection.getRng(!0).startOffset){var h=a.selection.getNode().previousSibling;h&&(h.nodeName&&"hr"===h.nodeName.toLowerCase())&&(a.dom.remove(h),g.dom.Event.cancel(b))}})}function o(a){function k(a,b,c){var i=/^&nbsp;$|^<br>$/,c=c||b,c=c.parentNode?c.parentNode.childNodes||[]:[],e=!0,j=/TABLE|TH|TD/;return(e=(e=(e=!j.test(b.nodeName))&&b.previousSibling?!j.test(b.previousSibling.nodeName):e)&&b.nextSibling?!j.test(b.nextSibling.nodeName):e)&&(i.test(a)||1<c.length&&"BR"==c[0].nodeName)}function b(b){return b&&
b.innerHTML&&(b.innerHTML.replace(/\uFEFF|\u200B/g,"")||"&nbsp;")}a.onKeyDown.add(function(a,d){var c=a.selection.getNode(),i=c.nextSibling,e;if(a.selection.isCollapsed()&&c!=a.dom.getRoot())if(d.keyCode===m)0===a.selection.getRng(!0).startOffset&&(i=c.previousSibling,e=b(i),i&&k(e,c,i)&&(a.dom.remove(i),g.dom.Event.cancel(d)));else if(d.keyCode==n&&(e=b(c),!(1>=(c.parentNode?c.parentNode.childNodes||[]:[]).length||1<c.childNodes.length)&&i&&k(e,c,i)))a.dom.remove(c),g.dom.Event.cancel(d),c=a.selection,
e=c.getRng(!0),a.focus(),i.focus(),e.setStart(i,0),e.setEnd(i,0),c.setRng(e)})}function r(a){a.onClick.add(function(a,b){b=b.target;/^(IMG|HR)$/.test(b.nodeName)&&a.selection.getSel().setBaseAndExtent(b,0,b,1);"A"==b.nodeName&&a.dom.hasClass(b,"mceItemAnchor")&&a.selection.select(b);a.nodeChanged()})}function r(a){a.onClick.add(function(a,b){b=b.target;/^(IMG|HR)$/.test(b.nodeName)&&a.selection.getSel().setBaseAndExtent(b,0,b,1);"A"==b.nodeName&&a.dom.hasClass(b,"mceItemAnchor")&&a.selection.select(b);
a.nodeChanged()})}function s(){document.body.setAttribute("role","application")}function s(){document.body.setAttribute("role","application")}var l=g.VK,m=l.BACKSPACE,n=l.DELETE;g.create("tinymce.util.Quirks",{Quirks:function(a){if(g.isWebKit){if(g.isChrome){var k=function(a,b){AJS.$(a).find(".non-editable").attr("contenteditable",b)},b=a.dom,h=a.selection;a.onKeyDown.add(function(a,c){var j,f,d;if(((d=c.keyCode==n)||c.keyCode==m)&&!l.modifierPressed(c))c.preventDefault(),j=h.getRng(),f=b.getParent(j.startContainer,
b.isBlock),f=d?[f,b.getNext(f,b.isBlock)]:[b.getPrev(f,b.isBlock),f],g.each(AJS.$(f).find("span"),function(a){a.setAttribute("data-mce-mark","1")}),(j=!d&&f[1]&&AJS.EditorUtils.isCursorAtStartOf(f[1],j)||d&&f[0]&&AJS.EditorUtils.isCursorAtEndOf(f[0],j))&&k(f[1],!0),a.getDoc().execCommand(d?"ForwardDelete":"Delete",!1,null),j&&k(f,!1),g.each(AJS.$(f).find("span"),function(a){a.getAttribute("data-mce-mark")?a.removeAttribute("data-mce-mark"):a.style.color?AJS.$(a).attr("style","color: "+a.style.color):
b.remove(a,!0)})})}p(a);a.dom.bind(a.getDoc(),"focusin",function(){setTimeout(function(){a&&!a.destroyed&&a.selection.setRng(a.selection.getRng())},0)});r(a);if(g.isIDevice){var d,c;a.dom.bind(a.getDoc(),"selectionchange",function(){c&&(clearTimeout(c),c=0);c=window.setTimeout(function(){var b=a.selection.getRng();if(!d||!g.dom.RangeUtils.compareRanges(b,d)){a.nodeChanged();d=b}},50)})}o(a)}g.isIE&&(q(a),p(a),s(a),a.onKeyDown.add(function(a,b){var c;if(c=b.keyCode===l.ENTER)if(c=!l.modifierPressed(b))c=
a.selection.getNode(),c=a.dom.is(c,"h1,h2,h3,h4,h5,h6")||null!==a.dom.getParent(c,"h1,h2,h3,h4,h5,h6");c&&setTimeout(function(){var b=a.selection.getNode();a.dom.is(b,"p")&&(a.dom.setAttrib(b,"style",null),a.execCommand("mceCleanup"))},0)}),o(a));g.isGecko&&(q(a),o(a),Range.prototype.getClientRects||a.onMouseDown.add(function(a,b){if(b.target.nodeName==="HTML"){var c=a.getBody();c.blur();setTimeout(function(){c.focus()},0)}}))}})})(tinymce);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.tinymce:atlassian-rte-javascript-tinymce-core', location = 'jscripts/tiny_mce/classes/html/Entities.js' */
(function(g){function l(b,d){var a,c,e,k={};if(b){b=b.split(",");d=d||10;for(a=0;a<b.length;a+=2)c=String.fromCharCode(parseInt(b[a],d)),f[c]||(e="&"+b[a+1]+";",k[c]=e,k[e]=c);return k}}var h,f,m,i=/[&<>\"\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,j=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,n=/[<>&\"\']/g,o=/&(#x|#)?([\w]+);/g,p={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",
148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"};f={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;"};m={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"};h=l("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",
32);g.html=g.html||{};g.html.Entities={encodeRaw:function(b,d){return b.replace(d?i:j,function(a){return f[a]||a})},encodeAllRaw:function(b){return(""+b).replace(n,function(b){return f[b]||b})},encodeNumeric:function(b,d){return b.replace(d?i:j,function(a){return 1<a.length?"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";":f[a]||"&#"+a.charCodeAt(0)+";"})},encodeNamed:function(b,d,a){a=a||h;return b.replace(d?i:j,function(b){return f[b]||a[b]||b})},getEncodeFunc:function(b,d){function a(a,
b){return a.replace(b?i:j,function(a){return f[a]||d[a]||"&#"+a.charCodeAt(0)+";"||a})}function c(a,b){return e.encodeNamed(a,b,d)}var e=g.html.Entities,d=l(d)||h,b=g.makeMap(b.replace(/\+/g,","));return b.named&&b.numeric?a:b.named?d?c:e.encodeNamed:b.numeric?e.encodeNumeric:e.encodeRaw},decode:function(b){return b.replace(o,function(b,a,c){if(a)return c=parseInt(c,2===a.length?16:10),65535<c?(c-=65536,String.fromCharCode(55296+(c>>10),56320+(c&1023))):p[c]||String.fromCharCode(c);if(!(a=m[b]))if(!(a=
h[b]))a=document.createElement("div"),a.innerHTML=b,a=a.textContent||a.innerText||b;return a})}}})(tinymce);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.tinymce:atlassian-rte-javascript-tinymce-core', location = 'jscripts/tiny_mce/classes/html/Styles.js' */
tinymce.html.Styles=function(n,p){function q(i,d,h,c){function g(a){a=parseInt(a).toString(16);return 1<a.length?a:"0"+a}return"#"+g(d)+g(h)+g(c)}var r=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,v=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,s=/\s*([^:]+):\s*([^;]+);?/g,t=/\s+$/,f,o={},k,n=n||{};k="\\\" \\' \\; \\: ; : ﻿".split(" ");for(f=0;f<k.length;f++)o[k[f]]="﻿"+f,o["﻿"+f]=k[f];return{toHex:function(i){return i.replace(r,
q)},parse:function(i){function d(j,e){var b,c;if(b=a[j+"-top"+e])c=a[j+"-right"+e],b==c&&(b=a[j+"-bottom"+e],c==b&&(c=a[j+"-left"+e],b==c&&(a[j+e]=c,delete a[j+"-top"+e],delete a[j+"-right"+e],delete a[j+"-bottom"+e],delete a[j+"-left"+e])))}function h(b){var e=a[b],c;if(e&&!(0>e.indexOf(" "))){e=e.split(" ");for(c=e.length;c--;)if(e[c]!==e[0])return!1;a[b]=e[0];return!0}}function c(a){f=!0;return o[a]}function g(a,b){f&&(a=a.replace(/\uFEFF[0-9]/g,function(a){return o[a]}));b||(a=a.replace(/\\([\'\";:])/g,
"$1"));return a}var a={},m,l,b,f,u=n.url_converter,k=n.url_converter_scope||this;if(i){for(i=i.replace(/\\[\"\';:\uFEFF]/g,c).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(a){return a.replace(/[;:]/g,c)});m=s.exec(i);){l=m[1].replace(t,"").toLowerCase();b=m[2].replace(t,"");if(l&&0<b.length){if("font-weight"===l&&"700"===b)b="bold";else if("color"===l||"background-color"===l)b=b.toLowerCase();b=b.replace(r,q);b=b.replace(v,function(a,b,c,i,d,f){if(d=d||f)return d=g(d),"'"+d.replace(/\'/g,"\\'")+"'";b=
g(b||c||i);u&&(b=u.call(k,b,"style"));return"url('"+b.replace(/\'/g,"\\'")+"')"});a[l]=f?g(b,!0):b}s.lastIndex=m.index+m[0].length}d("border","");d("border","-width");d("border","-color");d("border","-style");d("padding","");d("margin","");h("border-width")&&(h("border-style")&&h("border-color"))&&(a.border=a["border-width"]+" "+a["border-style"]+" "+a["border-color"],delete a["border-width"],delete a["border-style"],delete a["border-color"]);"medium none"===a.border&&delete a.border}return a},serialize:function(f,
d){function h(a){var d,b,g,h;if(d=p.styles[a]){b=0;for(g=d.length;b<g;b++)a=d[b],h=f[a],void 0!==h&&0<h.length&&(c+=(0<c.length?" ":"")+a+": "+h+";")}}var c="",g,a;if(d&&p&&p.styles)h("*"),h(d);else for(g in f)a=f[g],void 0!==a&&0<a.length&&(c+=(0<c.length?" ":"")+g+": "+a+";");return c}}};
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.tinymce:atlassian-rte-javascript-tinymce-core', location = 'jscripts/tiny_mce/classes/html/Schema.js' */
(function(k){function m(b,j){return b.split(j||",")}var s={},t,i,x,B,C={},D,E,j=k.makeMap,h=k.each;i="h1,h2,h3,h4,h5,h6,hr,p,div,address,pre,form,table,tbody,thead,tfoot,th,tr,td,li,ol,ul,caption,blockquote,center,dl,dt,dd,dir,fieldset,noscript,menu,isindex,samp,header,footer,article,section,hgroup";i=j(i,",",j(i.toUpperCase()));var n={Z:"H|K|N|O|P",Y:"X|form|R|Q",ZG:"E|span|width|align|char|charoff|valign",X:"p|T|div|U|W|isindex|fieldset|table",ZF:"E|align|char|charoff|valign",W:"pre|hr|blockquote|address|center|noframes",
ZE:"abbr|axis|headers|scope|rowspan|colspan|align|char|charoff|valign|nowrap|bgcolor|width|height",ZD:"[E][S]",U:"ul|ol|dl|menu|dir",ZC:"p|Y|div|U|W|table|br|span|bdo|object|applet|img|map|K|N|Q",T:"h1|h2|h3|h4|h5|h6",ZB:"X|S|Q",S:"R|P",ZA:"a|G|J|M|O|P",R:"a|H|K|N|O",Q:"noscript|P",P:"ins|del|script",O:"input|select|textarea|label|button",N:"M|L",M:"em|strong|dfn|code|q|samp|kbd|var|cite|abbr|acronym",L:"sub|sup",K:"J|I",J:"tt|i|b|u|s|strike",I:"big|small|font|basefont",H:"G|F",G:"br|span|bdo",F:"object|applet|img|map|iframe",
E:"A|B|C",D:"accesskey|tabindex|onfocus|onblur",C:"onclick|ondblclick|onmousedown|onmouseup|onmouseover|onmousemove|onmouseout|onkeypress|onkeydown|onkeyup",B:"lang|xml:lang|dir",A:"id|class|style|title"},o=function(b){return b.replace(/[A-Z]+/g,function(b){return o(n[b])})},c,p={};for(c in n)n.hasOwnProperty(c)&&(n[c]=o(n[c]));o("script[id|charset|type|language|src|defer|xml:space][]style[B|id|type|media|title|xml:space][]object[E|declare|classid|codebase|data|type|codetype|archive|standby|width|height|usemap|name|tabindex|align|border|hspace|vspace][#|param|Y]param[id|name|value|valuetype|type][]p[E|align][#|S]a[E|D|charset|type|name|href|hreflang|rel|rev|shape|coords|target][#|Z]br[A|clear][]span[E][#|S]bdo[A|C|B][#|S]applet[A|codebase|archive|code|object|alt|name|width|height|align|hspace|vspace][#|param|Y]h1[E|align][#|S]img[E|src|alt|name|longdesc|width|height|usemap|ismap|align|border|hspace|vspace][]map[B|C|A|name][X|form|Q|area]h2[E|align][#|S]iframe[A|longdesc|name|src|frameborder|marginwidth|marginheight|scrolling|align|width|height][#|Y]h3[E|align][#|S]tt[E][#|S]i[E][#|S]b[E][#|S]u[E][#|S]s[E][#|S]strike[E][#|S]big[E][#|S]small[E][#|S]font[A|B|size|color|face][#|S]basefont[id|size|color|face][]em[E][#|S]strong[E][#|S]dfn[E][#|S]code[E][#|S]q[E|cite][#|S]samp[E][#|S]kbd[E][#|S]var[E][#|S]cite[E][#|S]abbr[E][#|S]acronym[E][#|S]sub[E][#|S]sup[E][#|S]input[E|D|type|name|value|checked|disabled|readonly|size|maxlength|src|alt|usemap|onselect|onchange|accept|align][]select[E|name|size|multiple|disabled|tabindex|onfocus|onblur|onchange][optgroup|option]optgroup[E|disabled|label][option]option[E|selected|disabled|label|value][]textarea[E|D|name|rows|cols|disabled|readonly|onselect|onchange][]label[E|for|accesskey|onfocus|onblur][#|S]button[E|D|name|value|type|disabled][#|p|T|div|U|W|table|G|object|applet|img|map|K|N|Q]h4[E|align][#|S]ins[E|cite|datetime][#|Y]h5[E|align][#|S]del[E|cite|datetime][#|Y]h6[E|align][#|S]div[E|align][#|Y]ul[E|type|compact][li]li[E|type|value][#|Y]ol[E|type|compact|start][li]dl[E|compact][dt|dd]dt[E][#|S]dd[E][#|Y]menu[E|compact][li]dir[E|compact][li]pre[E|width|xml:space][#|ZA]hr[E|align|noshade|size|width][]blockquote[E|cite][#|Y]address[E][#|S|p]center[E][#|Y]noframes[E][#|Y]isindex[A|B|prompt][]fieldset[E][#|legend|Y]legend[E|accesskey|align][#|S]table[E|summary|width|border|frame|rules|cellspacing|cellpadding|align|bgcolor][caption|col|colgroup|thead|tfoot|tbody|tr]caption[E|align][#|S]col[ZG][]colgroup[ZG][col]thead[ZF][tr]tr[ZF|bgcolor][th|td]th[E|ZE][#|Y]form[E|action|method|name|enctype|onsubmit|onreset|accept|accept-charset|target][#|X|R|Q]noscript[E][#|Y]td[E|ZE][#|Y]tfoot[ZF][tr]tbody[ZF][tr]area[E|D|shape|coords|href|nohref|alt|target][]base[id|href|target][]body[E|onload|onunload|background|bgcolor|text|link|vlink|alink][#|Y]").replace(/#/g,
"#text").replace(/(\w+)\[([^\]]+)\]\[([^\]]*)\]/g,function(b,k,h,i){h=m(h,"|");p[k]={attributes:j(h),attributesOrder:h,children:j(i,"|",{"#comment":{}})}});s=p;t=j("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected,autoplay,loop,controls");x=j("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed,source");B=k.extend(j("td,th,iframe,video,audio,object"),x);D=j("pre,script,style,textarea,code");E=j("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr");
k.html.Schema=function(b){function n(a){var z,F,b,h,e,f,g,i,c,l,o,u,q,r,p,v,s,t,x=/^([#+-])?([^\[\/]+)(?:\/([^\[]+))?(?:\[([^\]]+)\])?$/,y=/^([!\-])?(\w+::\w+|[^=:<]+)?(?:([=:<])(.*))?$/,w=/[*?+]/;if(a){a=m(a);d["@"]&&(v=d["@"].attributes,s=d["@"].attributesOrder);z=0;for(F=a.length;z<F;z++)if(e=x.exec(a[z])){r=e[1];c=e[2];p=e[3];i=e[4];u={};q=[];f={attributes:u,attributesOrder:q};"#"===r&&(f.paddEmpty=!0);"-"===r&&(f.removeEmpty=!0);if(v){for(t in v)u[t]=v[t];q.push.apply(q,s)}if(i){i=m(i,"|");b=
0;for(h=i.length;b<h;b++)if(e=y.exec(i[b]))if(g={},o=e[1],l=e[2].replace(/::/g,":"),r=e[3],e=e[4],"!"===o&&(f.attributesRequired=f.attributesRequired||[],f.attributesRequired.push(l),g.required=!0),"-"===o)delete u[l],q.splice(k.inArray(q,l),1);else{if(r&&("="===r&&(f.attributesDefault=f.attributesDefault||[],f.attributesDefault.push({name:l,value:e}),g.defaultValue=e),":"===r&&(f.attributesForced=f.attributesForced||[],f.attributesForced.push({name:l,value:e}),g.forcedValue=e),"<"===r))g.validValues=
j(e,"?");w.test(l)?(f.attributePatterns=f.attributePatterns||[],g.pattern=RegExp("^"+l.replace(/([?+*])/g,".$1")+"$"),f.attributePatterns.push(g)):(u[l]||q.push(l),u[l]=g)}}!v&&"@"==c&&(v=u,s=q);p&&(f.outputName=c,d[p]=f);w.test(c)?(f.pattern=RegExp("^"+c.replace(/([?+*])/g,".$1")+"$"),A.push(f)):d[c]=f}}}function c(a){d={};A=[];n(a);h(s,function(a,b){g[b]=a.children})}function o(a){var b=/^(~)?(.+)$/;a&&h(m(a),function(a){var a=b.exec(a),c="~"===a[1],d=c?"span":"div",e=a[2];g[e]=g[d];C[e]=d;c||(i[e]=
{});h(g,function(a){a[d]&&(a[e]=a[d])})})}function y(a){var b=/^([+\-]?)(\w+)\[([^\]]+)\]$/;a&&h(m(a),function(a){var a=b.exec(a),d,c;a&&(d=(c=a[1])?g[a[2]]:g[a[2]]={"#comment":{}},d=g[a[2]],h(m(a[3],"|"),function(a){"-"===c?delete d[a]:d[a]={}}))})}function p(a){var b=d[a],c;if(b)return b;for(c=A.length;c--;)if(b=A[c],b.pattern.test(a))return b}var d={},g={},A=[],w,G,b=b||{};!1===b.verify_html&&(b.valid_elements="*[*]");b.valid_styles&&(w={},h(b.valid_styles,function(a,b){w[b]=k.explode(a)}));G=
b.whitespace_elements?j(b.whitespace_elements):D;b.valid_elements?c(b.valid_elements):(h(s,function(a,b){d[b]={attributes:a.attributes,attributesOrder:a.attributesOrder};g[b]=a.children}),h(m("strong/b,em/i"),function(a){a=m(a,"/");d[a[1]].outputName=a[0]}),d.img.attributesDefault=[{name:"alt",value:""}],h(m("ol,ul,sub,sup,blockquote,span,font,a,table,tbody,tr"),function(a){d[a].removeEmpty=true}),h(m("p,h1,h2,h3,h4,h5,h6,th,td,pre,div,address,caption"),function(a){d[a].paddEmpty=true}));o(b.custom_elements);
y(b.valid_children);n(b.extended_valid_elements);y("+ol[ul|ol],+ul[ul|ol]");p("span")||n("span[!data-mce-type|*]");b.invalid_elements&&k.each(k.explode(b.invalid_elements),function(a){d[a]&&delete d[a]});this.children=g;this.styles=w;this.getBoolAttrs=function(){return t};this.getBlockElements=function(){return i};this.getShortEndedElements=function(){return x};this.getSelfClosingElements=function(){return E};this.getNonEmptyElements=function(){return B};this.getWhiteSpaceElements=function(){return G};
this.isValidChild=function(a,b){var c=g[a];return!(!c||!c[b])};this.getElementRule=p;this.getCustomElements=function(){return C};this.addValidElements=n;this.setValidElements=c;this.addCustomElements=o;this.addValidChildren=y};k.html.Schema.boolAttrMap=t;k.html.Schema.blockElementsMap=i})(tinymce);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.tinymce:atlassian-rte-javascript-tinymce-core', location = 'jscripts/tiny_mce/classes/html/SaxParser.js' */
(function(q){q.html.SaxParser=function(k,m){var n=this,L=function(){},k=k||{};n.schema=m=m||new q.html.Schema;!1!==k.fix_self_closing&&(k.fix_self_closing=!0);q.each("comment cdata text start end pi doctype".split(" "),function(g){g&&(n[g]=k[g]||L)});n.parse=function(g){function n(a){var b,c;for(b=i.length;b--;)if(i[b].name===a)break;if(b>=0){for(c=i.length-1;c>=b;c--){a=i[c];a.valid&&h.end(a.name)}i.length=b}}var h=this,b,d=0,a,c,i=[],f,s,l,w,C,D,E,r,o,j,e,p,x,F,t,u,v,y,G,z,H,I,J=0,A=q.html.Entities.decode,
K,B;z=RegExp("<(?:(?:!--([\\w\\W]*?)--\>)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([^>]+)>)|(?:([^\\s\\/<>]+)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/)>))","g");H=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:\\.|[^\"])*)\")|(?:\'((?:\\.|[^\'])*)\')|([^>\s]+)))?/g;I={script:/<\/script[^>]*>/gi,style:/<\/style[^>]*>/gi,noscript:/<\/noscript[^>]*>/gi};D=m.getShortEndedElements();G=m.getSelfClosingElements();E=m.getBoolAttrs();
r=k.validate;C=k.remove_internals;K=k.fix_self_closing;B=q.isIE;for(x=/^:/;b=z.exec(g);){d<b.index&&h.text(A(g.substr(d,b.index-d)));if(a=b[6]){a=a.toLowerCase();B&&x.test(a)&&(a=a.substr(1));n(a)}else if(a=b[7]){a=a.toLowerCase();B&&x.test(a)&&(a=a.substr(1));d=a in D;K&&(G[a]&&i.length>0&&i[i.length-1].name===a)&&n(a);if(!r||(o=m.getElementRule(a))){j=true;if(r){F=o.attributes;t=o.attributePatterns}if(p=b[8]){(w=p.indexOf("data-mce-type")!==-1)&&C&&(j=false);f=[];f.map={};p.replace(H,function(a,
b,c,d,e){b=b.toLowerCase();c=b in E?b:A(c||d||e||"");if(r&&!w&&b.indexOf("data-")!==0){a=F[b];if(!a&&t){for(d=t.length;d--;){a=t[d];if(a.pattern.test(b))break}d===-1&&(a=null)}if(!a||a.validValues&&!(c in a.validValues))return}f.map[b]=c;f.push({name:b,value:c})})}else{f=[];f.map={}}if(r&&!w){u=o.attributesRequired;v=o.attributesDefault;if(y=o.attributesForced)for(c=y.length;c--;){e=y[c];l=e.name;e=e.value;e==="{$uid}"&&(e="mce_"+J++);f.map[l]=e;f.push({name:l,value:e})}if(v)for(c=v.length;c--;){e=
v[c];l=e.name;if(!(l in f.map)){e=e.value;e==="{$uid}"&&(e="mce_"+J++);f.map[l]=e;f.push({name:l,value:e})}}if(u){for(c=u.length;c--;)if(u[c]in f.map)break;c===-1&&(j=false)}f.map["data-mce-bogus"]&&(j=false)}j&&h.start(a,f,d)}else j=false;if(c=I[a]){c.lastIndex=d=b.index+b[0].length;if(b=c.exec(g)){j&&(s=g.substr(d,b.index-d));d=b.index+b[0].length}else{s=g.substr(d);d=g.length}j&&s.length>0&&h.text(s,true);j&&h.end(a);z.lastIndex=d;continue}d||(!p||p.indexOf("/")!=p.length-1?i.push({name:a,valid:j}):
j&&h.end(a))}else(a=b[1])?h.comment(a):(a=b[2])?h.cdata(a):(a=b[3])?h.doctype(a):(a=b[4])&&h.pi(a,b[5]);d=b.index+b[0].length}d<g.length&&h.text(A(g.substr(d)));for(c=i.length-1;c>=0;c--){a=i[c];a.valid&&h.end(a.name)}}}})(tinymce);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.tinymce:atlassian-rte-javascript-tinymce-core', location = 'jscripts/tiny_mce/classes/html/Node.js' */
(function(h){function i(a,b,c){var d;d=c?"lastChild":"firstChild";c=c?"prev":"next";if(a[d])return a[d];if(a!==b){if(d=a[c])return d;for(a=a.parent;a&&a!==b;a=a.parent)if(d=a[c])return d}}function g(a,b){this.name=a;this.type=b;1===b&&(this.attributes=[],this.attributes.map={})}var j=/^[ \t\r\n]*$/,k={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11};h.extend(g.prototype,{replace:function(a){a.parent&&a.remove();this.insert(a,this);this.remove();return this},attr:function(a,
b){var c,d;if("string"!==typeof a){for(d in a)this.attr(d,a[d]);return this}if(c=this.attributes){if(void 0!==b){if(null===b){if(a in c.map){delete c.map[a];for(d=c.length;d--;)if(c[d].name===a){c.splice(d,1);break}}return this}if(a in c.map)for(d=c.length;d--;){if(c[d].name===a){c[d].value=b;break}}else c.push({name:a,value:b});c.map[a]=b;return this}return c.map[a]}},clone:function(){var a=new g(this.name,this.type),b,c,d,e,f;if(d=this.attributes){f=[];f.map={};b=0;for(c=d.length;b<c;b++)e=d[b],
"id"!==e.name&&(f[f.length]={name:e.name,value:e.value},f.map[e.name]=e.value);a.attributes=f}a.value=this.value;a.shortEnded=this.shortEnded;return a},wrap:function(a){this.parent.insert(a,this);a.append(this);return this},unwrap:function(){var a,b;for(a=this.firstChild;a;)b=a.next,this.insert(a,this,!0),a=b;this.remove()},remove:function(){var a=this.parent,b=this.next,c=this.prev;if(a){if(a.firstChild===this){if(a.firstChild=b)b.prev=null}else c.next=b;if(a.lastChild===this){if(a.lastChild=c)c.next=
null}else b.prev=c;this.parent=this.next=this.prev=null}return this},append:function(a){var b;a.parent&&a.remove();(b=this.lastChild)?(b.next=a,a.prev=b,this.lastChild=a):this.lastChild=this.firstChild=a;a.parent=this;return a},insert:function(a,b,c){var d;a.parent&&a.remove();d=b.parent||this;c?(b===d.firstChild?d.firstChild=a:b.prev.next=a,a.prev=b.prev,a.next=b,b.prev=a):(b===d.lastChild?d.lastChild=a:b.next.prev=a,a.next=b.next,a.prev=b,b.next=a);a.parent=d;return a},getAll:function(a){var b,
c=[];for(b=this.firstChild;b;b=i(b,this))b.name===a&&c.push(b);return c},empty:function(){var a,b,c;if(this.firstChild){a=[];for(c=this.firstChild;c;c=i(c,this))a.push(c);for(b=a.length;b--;)c=a[b],c.parent=c.firstChild=c.lastChild=c.next=c.prev=null}this.firstChild=this.lastChild=null;return this},isEmpty:function(a){var a=a||new h.html.Schema,b=this.firstChild,c,d=a.getNonEmptyElements(),e=a.getWhiteSpaceElements();if(b){do{if(1===b.type){if(b.attributes.map["data-mce-bogus"])continue;if(d[b.name])return!1;
for(a=b.attributes.length;a--;)if(c=b.attributes[a].name,"name"===c||0===c.indexOf("data-"))return!1}if(8===b.type||3===b.type&&(!j.test(b.value)||e[this.name]&&b.value&&0<b.value.length&&j.test(b.value)))return!1}while(b=i(b,this))}return!0},walk:function(a){return i(this,null,a)}});h.extend(g,{create:function(a,b){var c,d;c=new g(a,k[a]||1);if(b)for(d in b)c.attr(d,b[d]);return c}});h.html.Node=g})(tinymce);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.tinymce:atlassian-rte-javascript-tinymce-core', location = 'jscripts/tiny_mce/classes/html/DomParser.js' */
(function(n){var y=n.html.Node;n.html.DomParser=function(k,c){var r=this,z={},s=[],t={},u={},k=k||{};k.validate="validate"in k?k.validate:!0;k.root_name=k.root_name||"body";r.schema=c=c||new n.html.Schema;r.filterNode=function(c){var d,j,h;j in z&&((h=t[j])?h.push(c):t[j]=[c]);for(d=s.length;d--;)j=s[d].name,j in c.attributes.map&&((h=u[j])?h.push(c):u[j]=[c]);return c};r.addNodeFilter=function(c,d){n.each(n.explode(c),function(c){var h=z[c];h||(z[c]=h=[]);h.push(d)})};r.addAttributeFilter=function(c,
d){n.each(n.explode(c),function(c){var h;for(h=0;h<s.length;h++)if(s[h].name===c){s[h].callbacks.push(d);return}s.push({name:c,callbacks:[d]})})};r.parse=function(L,d){function j(a,c){var b=new y(a,c),e;a in z&&((e=t[a])?e.push(b):t[a]=[b]);return b}function h(a){for(var c,a=a.prev;a&&3===a.type;)c=a.value.replace(E,""),0<c.length?(a.value=c,a=a.prev):(c=a.prev,a.remove(),a=c)}var f,o,e,i,l,b,w,p,x,A,F,C=[],E,I,G,H,d=d||{};t={};u={};A=n.extend(n.makeMap("script,style,head,html,body,title,meta,param"),
c.getBlockElements());c.getNonEmptyElements();H=c.children;x=k.validate;i="forced_root_block"in d?d.forced_root_block:k.forced_root_block;G=c.getWhiteSpaceElements();F=/^[ \t\r\n]+/;E=/[ \t\r\n]+$/;I=/[ \t\r\n]+/g;f=new n.html.SaxParser({validate:x,fix_self_closing:!x,cdata:function(a){e.append(j("#cdata",4)).value=a},text:function(a,c){var b;G[e.name]||(a=a.replace(I," "),e.lastChild&&A[e.lastChild.name]&&(a=a.replace(F,"")));0!==a.length&&(b=j("#text",3),b.raw=!!c,e.append(b).value=a)},comment:function(a){e.append(j("#comment",
8)).value=a},pi:function(a,c){e.append(j(a,7)).value=c;h(e)},doctype:function(a){e.append(j("#doctype",10)).value=a;h(e)},start:function(a,b,g){var d,f,i;if(d=x?c.getElementRule(a):{}){d=j(d.outputName||a,1);d.attributes=b;d.shortEnded=g;e.append(d);(f=H[e.name])&&(H[d.name]&&!f[d.name])&&C.push(d);for(f=s.length;f--;)i=s[f].name,i in b.map&&((p=u[i])?p.push(d):u[i]=[d]);A[a]&&h(d);g||(e=d)}},end:function(a){var b,d;if(b=x?c.getElementRule(a):{}){if(A[a]&&!G[e.name]){for(a=e.firstChild;a&&3===a.type;)d=
a.value.replace(F,""),0<d.length?(a.value=d,a=a.next):(d=a.next,a.remove(),a=d);for(a=e.lastChild;a&&3===a.type;)d=a.value.replace(E,""),0<d.length?(a.value=d,a=a.prev):(d=a.prev,a.remove(),a=d)}if((b.removeEmpty||b.paddEmpty)&&e.isEmpty(c))if(b.paddEmpty)e.empty().append(new y("#text","3")).value=" ";else if(!e.attributes.map.name){b=e.parent;e.empty().remove();e=b;return}e=e.parent}}},c);o=e=new y(d.context||k.root_name,11);f.parse(L);if(x&&C.length)if(d.context)d.invalid=!0;else{var g,m,D,q,B,
v,J,K;J=n.makeMap("tr,td,th,tbody,thead,tfoot,table");c.getNonEmptyElements();for(f=0;f<C.length;f++)if(b=C[f],b.parent){m=[b];for(g=b.parent;g&&!c.isValidChild(g.name,b.name)&&!J[g.name];g=g.parent)m.push(g);if(g&&1<m.length){m.reverse();D=q=r.filterNode(m[0].clone());for(v=0;v<m.length-1;v++){c.isValidChild(q.name,m[v].name)?(B=r.filterNode(m[v].clone()),q.append(B)):B=q;for(q=m[v].firstChild;q&&q!=m[v+1];)K=q.next,B.append(q),q=K;q=B}D.isEmpty(c)?g.insert(b,m[0],!0):(g.insert(D,m[0],!0),g.insert(b,
D));g=m[0];(g.isEmpty(c)||g.firstChild===g.lastChild&&"br"===g.firstChild.name)&&g.empty().remove()}else b.parent&&("li"===b.name?(g=b.prev)&&("ul"===g.name||"ul"===g.name)?g.append(b):(g=b.next)&&("ul"===g.name||"ul"===g.name)?g.insert(b,g.firstChild,!0):b.wrap(r.filterNode(new y("ul",1))):c.isValidChild(b.parent.name,"div")&&c.isValidChild("div",b.name)?b.wrap(r.filterNode(new y("div",1))):"style"===b.name||"script"===b.name?b.empty().remove():b.unwrap())}}if(i&&"body"==o.name)for(f=o.firstChild;f;)b=
f.next,3==f.type||1==f.type&&"p"!==f.name&&!A[f.name]&&!f.attr("data-mce-type")?(l||(l=j(i,1),o.insert(l,f)),l.append(f)):l=null,f=b;if(!d.invalid){for(w in t){p=z[w];i=t[w];for(b=i.length;b--;)i[b].parent||i.splice(b,1);l=0;for(f=p.length;l<f;l++)p[l](i,w,d)}l=0;for(f=s.length;l<f;l++)if(p=s[l],p.name in u){i=u[p.name];for(b=i.length;b--;)i[b].parent||i.splice(b,1);b=0;for(w=p.callbacks.length;b<w;b++)p.callbacks[b](i,p.name,d)}}return o};k.remove_trailing_brs&&r.addNodeFilter("br",function(k){var d,
j=k.length,h,f=c.getBlockElements();c.getNonEmptyElements();var o,e,i;f.body=1;for(d=0;d<j;d++)if(h=k[d],o=h.parent,f[h.parent.name]&&h===o.lastChild){for(e=h.prev;e;){i=e.name;if("span"!==i||"bookmark"!==e.attr("data-mce-type")){if("br"!==i)break;if("br"===i){h=null;break}}e=e.prev}if(h&&(h.remove(),o.isEmpty(c)&&(elementRule=c.getElementRule(o.name))))elementRule.removeEmpty?o.remove():elementRule.paddEmpty&&(o.empty().append(new n.html.Node("#text",3)).value=" ")}})}})(tinymce);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.tinymce:atlassian-rte-javascript-tinymce-core', location = 'jscripts/tiny_mce/classes/html/Writer.js' */
tinymce.html.Writer=function(c){var a=[],e,i,f,g,j,c=c||{};e=c.indent;i=tinymce.makeMap(c.indent_before||"");f=tinymce.makeMap(c.indent_after||"");g=tinymce.html.Entities.getEncodeFunc(c.entity_encoding||"raw",c.entities);j="html"==c.element_format;return{start:function(b,c,k){var d,l,h;e&&(i[b]&&0<a.length)&&(d=a[a.length-1],0<d.length&&"\n"!==d&&a.push("\n"));a.push("<",b);if(c){d=0;for(l=c.length;d<l;d++)h=c[d],a.push(" ",h.name,'="',g(h.value,!0),'"')}a[a.length]=!k||j?">":" />";k&&(e&&f[b]&&
0<a.length)&&(d=a[a.length-1],0<d.length&&"\n"!==d&&a.push("\n"))},end:function(b){a.push("</",b,">");e&&(f[b]&&0<a.length)&&(b=a[a.length-1],0<b.length&&"\n"!==b&&a.push("\n"))},text:function(b,c){0<b.length&&(a[a.length]=c?b:g(b))},cdata:function(b){a.push("<![CDATA[",b,"]]\>")},comment:function(b){a.push("<\!--",b,"--\>")},pi:function(b,c){c?a.push("<?",b," ",c,"?>"):a.push("<?",b,"?>");e&&a.push("\n")},doctype:function(b){a.push("<!DOCTYPE",b,">",e?"\n":"")},reset:function(){a.length=0},getContent:function(){return a.join("").replace(/\n$/,
"")}}};
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.tinymce:atlassian-rte-javascript-tinymce-core', location = 'jscripts/tiny_mce/classes/html/Serializer.js' */
(function(c){c.html.Serializer=function(b,k){var d=new c.html.Writer(b),b=b||{};b.validate="validate"in b?b.validate:!0;this.schema=k=k||new c.html.Schema;this.writer=d;this.serialize=function(c){function l(a){var b=m[a.type],c,e,f,i,g,h,j,n;if(b)b(a);else{b=a.name;c=a.shortEnded;e=a.attributes;if(o&&e&&1<e.length){g=[];g.map={};n=k.getElementRule(a.name);h=0;for(j=n.attributesOrder.length;h<j;h++)f=n.attributesOrder[h],f in e.map&&(i=e.map[f],g.map[f]=i,g.push({name:f,value:i}));h=0;for(j=e.length;h<
j;h++)f=e[h].name,f in g.map||(i=e.map[f],g.map[f]=i,g.push({name:f,value:i}));e=g}d.start(a.name,e,c);if(!c){if(a=a.firstChild){do l(a);while(a=a.next)}d.end(b)}}}var m,o;o=b.validate;m={3:function(a){d.text(a.value,a.raw)},8:function(a){d.comment(a.value)},7:function(a){d.pi(a.name,a.value)},10:function(a){d.doctype(a.value)},4:function(a){d.cdata(a.value)},11:function(a){if(a=a.firstChild){do l(a);while(a=a.next)}}};d.reset();if(1==c.type&&!b.inner)l(c);else m[11](c);return d.getContent()}}})(tinymce);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.tinymce:atlassian-rte-javascript-tinymce-core', location = 'jscripts/tiny_mce/classes/dom/DOMUtils.js' */
(function(g){var i=g.each,j=g.is,n=g.isWebKit,h=g.isIE,k=g.html.Entities,o=/^([a-z0-9],?)+$/i,l=g.html.Schema.blockElementsMap,p=/^[ \t\r\n]*$/;g.create("tinymce.dom.DOMUtils",{doc:null,root:null,files:null,pixelStyles:/^(top|left|bottom|right|width|height|borderWidth)$/,props:{"for":"htmlFor","class":"className",className:"className",checked:"checked",disabled:"disabled",maxlength:"maxLength",readonly:"readOnly",selected:"selected",value:"value",id:"id",name:"name",type:"type"},DOMUtils:function(a,
b){var c;this.doc=a;this.win=window;this.files={};this.cssFlicker=!1;this.counter=0;this.stdMode=!g.isIE||8<=a.documentMode;this.boxModel=!g.isIE||"CSS1Compat"==a.compatMode||this.stdMode;this.hasOuterHTML="outerHTML"in a.createElement("a");this.settings=b=g.extend({keep_values:!1,hex_colors:1},b);this.schema=b.schema;this.styles=new g.html.Styles({url_converter:b.url_converter,url_converter_scope:b.url_converter_scope},b.schema);if(g.isIE6)try{a.execCommand("BackgroundImageCache",!1,!0)}catch(d){this.cssFlicker=
!0}if(h&&b.schema)for(c in"abbr article aside audio canvas details figcaption figure footer header hgroup mark menu meter nav output progress section summary time video".replace(/\w+/g,function(b){a.createElement(b)}),b.schema.getCustomElements())a.createElement(c);g.addUnload(this.destroy,this)},getRoot:function(){var a=this.settings;return a&&this.get(a.root_element)||this.doc.body},getViewPort:function(a){var b,a=!a?this.win:a;b=a.document;b=this.boxModel?b.documentElement:b.body;return{x:a.pageXOffset||
b.scrollLeft,y:a.pageYOffset||b.scrollTop,w:a.innerWidth||b.clientWidth,h:a.innerHeight||b.clientHeight}},getRect:function(a){var b,a=this.get(a);b=this.getPos(a);a=this.getSize(a);return{x:b.x,y:b.y,w:a.w,h:a.h}},getSize:function(a){var b,c,a=this.get(a);b=this.getStyle(a,"width");c=this.getStyle(a,"height");-1===b.indexOf("px")&&(b=0);-1===c.indexOf("px")&&(c=0);return{w:parseInt(b)||a.offsetWidth||a.clientWidth,h:parseInt(c)||a.offsetHeight||a.clientHeight}},getParent:function(a,b,c){return this.getParents(a,
b,c,!1)},getParents:function(a,b,c,d){var e=this,f,g=e.settings,m=[],a=e.get(a),d=void 0===d;g.strict_root&&(c=c||e.getRoot());j(b,"string")&&(f=b,b="*"===b?function(a){return 1==a.nodeType}:function(a){return e.is(a,f)});for(;a&&!(a==c||!a.nodeType||9===a.nodeType);){if(!b||b(a))if(d)m.push(a);else return a;a=a.parentNode}return d?m:null},get:function(a){var b;return a&&(this.doc&&"string"==typeof a)&&(b=a,(a=this.doc.getElementById(a))&&a.id!==b)?this.doc.getElementsByName(b)[1]:a},getNext:function(a,
b){return this._findSib(a,b,"nextSibling")},getPrev:function(a,b){return this._findSib(a,b,"previousSibling")},select:function(a,b){return g.dom.Sizzle(a,this.get(b)||this.get(this.settings.root_element)||this.doc,[])},is:function(a,b){var c;if(void 0===a.length){if("*"===b)return 1==a.nodeType;if(o.test(b)){b=b.toLowerCase().split(/,/);a=a.nodeName.toLowerCase();for(c=b.length-1;0<=c;c--)if(b[c]==a)return!0;return!1}}return 0<g.dom.Sizzle.matches(b,a.nodeType?[a]:a).length},add:function(a,b,c,d,
e){var f=this;return this.run(a,function(a){var g;g=j(b,"string")?f.doc.createElement(b):b;f.setAttribs(g,c);d&&(d.nodeType?g.appendChild(d):f.setHTML(g,d));return!e?a.appendChild(g):g})},create:function(a,b,c){return this.add(this.doc.createElement(a),a,b,c,1)},createHTML:function(a,b,c){var d,e;d="<"+a;for(e in b)b.hasOwnProperty(e)&&(d+=" "+e+'="'+this.encode(b[e])+'"');return"undefined"!=typeof c?d+">"+c+"</"+a+">":d+" />"},remove:function(a,b){return this.run(a,function(a){var d,e=a.parentNode;
if(!e)return null;if(b)for(;d=a.firstChild;)!g.isIE||3!==d.nodeType||d.nodeValue?e.insertBefore(d,a):a.removeChild(d);return e.removeChild(a)})},setStyle:function(a,b,c){var d=this;return d.run(a,function(e){var f;f=e.style;b=b.replace(/-(\D)/g,function(a,b){return b.toUpperCase()});if(d.pixelStyles.test(b)&&(g.is(c,"number")||/^[\-0-9\.]+$/.test(c)))c+="px";switch(b){case "opacity":if(h&&(f.filter=""===c?"":"alpha(opacity="+100*c+")",!a.currentStyle||!a.currentStyle.hasLayout))f.display="inline-block";
f[b]=f["-moz-opacity"]=f["-khtml-opacity"]=c||"";break;case "float":h?f.styleFloat=c:f.cssFloat=c;break;default:f[b]=c||""}d.settings.update_styles&&d.setAttrib(e,"data-mce-style")})},getStyle:function(a,b,c){if(a=this.get(a)){if(this.doc.defaultView&&c){b=b.replace(/[A-Z]/g,function(a){return"-"+a});try{return this.doc.defaultView.getComputedStyle(a,null).getPropertyValue(b)}catch(d){return null}}b=b.replace(/-(\D)/g,function(a,b){return b.toUpperCase()});"float"==b&&(b=h?"styleFloat":"cssFloat");
return a.currentStyle&&c?a.currentStyle[b]:a.style?a.style[b]:void 0}},setStyles:function(a,b){var c=this,d=c.settings,e;e=d.update_styles;d.update_styles=0;i(b,function(b,d){c.setStyle(a,d,b)});d.update_styles=e;d.update_styles&&c.setAttrib(a,d.cssText)},removeAllAttribs:function(a){return this.run(a,function(a){var c,d=a.attributes;for(c=d.length-1;0<=c;c--)a.removeAttributeNode(d.item(c))})},setAttrib:function(a,b,c){var d=this;if(a&&b)return d.settings.strict&&(b=b.toLowerCase()),this.run(a,function(a){var f=
d.settings,g=a.getAttribute(b);if(null!==c)switch(b){case "style":if(!j(c,"string")){i(c,function(b,c){d.setStyle(a,c,b)});return}f.keep_values&&(c&&!d._isRes(c)?a.setAttribute("data-mce-style",c,2):a.removeAttribute("data-mce-style",2));a.style.cssText=c;break;case "class":a.className=c||"";break;case "src":case "href":f.keep_values&&(f.url_converter&&(c=f.url_converter.call(f.url_converter_scope||d,c,b,a)),d.setAttrib(a,"data-mce-"+b,c,2));break;case "shape":a.setAttribute("data-mce-style",c)}j(c)&&
null!==c&&0!==c.length?a.setAttribute(b,""+c,2):a.removeAttribute(b,2);tinyMCE.activeEditor&&g!=c&&(f=tinyMCE.activeEditor,f.onSetAttrib.dispatch(f,a,b,c))})},setAttribs:function(a,b){var c=this;return this.run(a,function(a){i(b,function(b,f){c.setAttrib(a,f,b)})})},getAttrib:function(a,b,c){var d,a=this.get(a);if(!a||1!==a.nodeType)return void 0===c?!1:c;j(c)||(c="");if(/^(src|href|style|coords|shape)$/.test(b)&&(d=a.getAttribute("data-mce-"+b)))return d;h&&this.props[b]&&(d=(d=a[this.props[b]])&&
d.nodeValue?d.nodeValue:d);d||(d=a.getAttribute(b,2));if(/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noshade|nowrap|readonly|selected)$/.test(b))return!0===a[this.props[b]]&&""===d?b:d?b:"";if("FORM"===a.nodeName&&a.getAttributeNode(b))return a.getAttributeNode(b).nodeValue;if("style"===b&&(d=d||a.style.cssText))d=this.serializeStyle(this.parseStyle(d),a.nodeName),this.settings.keep_values&&!this._isRes(d)&&a.setAttribute("data-mce-style",d);n&&("class"===b&&d)&&(d=d.replace(/(apple|webkit)\-[a-z\-]+/gi,
""));if(h)switch(b){case "rowspan":case "colspan":1===d&&(d="");break;case "size":if("+0"===d||20===d||0===d)d="";break;case "width":case "height":case "vspace":case "checked":case "disabled":case "readonly":0===d&&(d="");break;case "hspace":-1===d&&(d="");break;case "maxlength":case "tabindex":if(32768===d||2147483647===d||"32768"===d)d="";break;case "multiple":case "compact":case "noshade":case "nowrap":return 65535===d?b:c;case "shape":d=d.toLowerCase();break;default:0===b.indexOf("on")&&d&&(d=
g._replace(/^function\s+\w+\(\)\s+\{\s+(.*)\s+\}$/,"$1",""+d))}return void 0!==d&&null!==d&&""!==d?""+d:c},getPos:function(a,b){var c=0,d=0,e=this.doc,a=this.get(a),b=b||e.body;if(a){if(a.getBoundingClientRect)return a=a.getBoundingClientRect(),d=this.boxModel?e.documentElement:e.body,c=a.left+(e.documentElement.scrollLeft||e.body.scrollLeft)-d.clientTop,d=a.top+(e.documentElement.scrollTop||e.body.scrollTop)-d.clientLeft,{x:c,y:d};for(e=a;e&&e!=b&&e.nodeType;)c+=e.offsetLeft||0,d+=e.offsetTop||0,
e=e.offsetParent;for(e=a.parentNode;e&&e!=b&&e.nodeType;)c-=e.scrollLeft||0,d-=e.scrollTop||0,e=e.parentNode}return{x:c,y:d}},parseStyle:function(a){return this.styles.parse(a)},serializeStyle:function(a,b){return this.styles.serialize(a,b)},loadCSS:function(a){var b=this,c=b.doc,d;a||(a="");d=b.select("head")[0];i(a.split(","),function(a){var f;b.files[a]||(b.files[a]=!0,f=b.create("link",{rel:"stylesheet",href:g._addVer(a)}),h&&(c.documentMode&&c.recalc)&&(f.onload=function(){c.recalc&&c.recalc();
f.onload=null}),d.appendChild(f))})},addClass:function(a,b){return this.run(a,function(a){var d;if(!b)return 0;if(this.hasClass(a,b))return a.className;d=this.removeClass(a,b);return a.className=(""!=d?d+" ":"")+b})},removeClass:function(a,b){var c=this,d;return c.run(a,function(a){var f;return c.hasClass(a,b)?(d||(d=RegExp("(^|\\s+)"+b+"(\\s+|$)","g")),f=a.className.replace(d," "),f=g.trim(" "!=f?f:""),a.className=f,f||(a.removeAttribute("class"),a.removeAttribute("className")),f):a.className})},
hasClass:function(a,b){a=this.get(a);return!a||!b?!1:-1!==(" "+a.className+" ").indexOf(" "+b+" ")},show:function(a){return this.setStyle(a,"display","block")},hide:function(a){return this.setStyle(a,"display","none")},isHidden:function(a){a=this.get(a);return!a||"none"==a.style.display||"none"==this.getStyle(a,"display")},uniqueId:function(a){return(!a?"mce_":a)+this.counter++},setHTML:function(a,b){var c=this;return c.run(a,function(a){if(h){for(;a.firstChild;)a.removeChild(a.firstChild);try{a.innerHTML=
"<br />"+b,a.removeChild(a.firstChild)}catch(e){a=c.create("div"),a.innerHTML="<br />"+b,i(a.childNodes,function(b,c){c&&a.appendChild(b)})}}else a.innerHTML=b;return b})},getOuterHTML:function(a){var b,a=this.get(a);if(!a)return null;if(1===a.nodeType&&this.hasOuterHTML)return a.outerHTML;b=(a.ownerDocument||this.doc).createElement("body");b.appendChild(a.cloneNode(!0));return b.innerHTML},setOuterHTML:function(a,b,c){function d(a,b,d){d=d.createElement("body");d.innerHTML=b;for(b=d.lastChild;b;)e.insertAfter(b.cloneNode(!0),
a),b=b.previousSibling;e.remove(a)}var e=this;return this.run(a,function(a){a=e.get(a);if(1==a.nodeType)if(c=c||a.ownerDocument||e.doc,h)try{h&&1==a.nodeType?a.outerHTML=b:d(a,b,c)}catch(g){d(a,b,c)}else d(a,b,c)})},decode:k.decode,encode:k.encodeAllRaw,insertAfter:function(a,b){b=this.get(b);return this.run(a,function(a){var d,e;d=b.parentNode;(e=b.nextSibling)?d.insertBefore(a,e):d.appendChild(a);return a})},isBlock:function(a){var b=a.nodeType;return b?!!(1===b&&l[a.nodeName]):!!l[a]},replace:function(a,
b,c){j(b,"array")&&(a=a.cloneNode(!0));return this.run(b,function(b){c&&i(g.grep(b.childNodes),function(b){a.appendChild(b)});return b.parentNode.replaceChild(a,b)})},rename:function(a,b){var c=this,d;a.nodeName!=b.toUpperCase()&&(d=c.create(b),i(c.getAttribs(a),function(b){c.setAttrib(d,b.nodeName,c.getAttrib(a,b.nodeName))}),c.replace(d,a,1));return d||a},findCommonAncestor:function(a,b){for(var c=a,d;c;){for(d=b;d&&c!=d;)d=d.parentNode;if(c==d)break;c=c.parentNode}return!c&&a.ownerDocument?a.ownerDocument.documentElement:
c},toHex:function(a){function b(a){a=parseInt(a).toString(16);return 1<a.length?a:"0"+a}var c=/^\s*rgb\s*?\(\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?\)\s*$/i.exec(a);c&&(a="#"+b(c[1])+b(c[2])+b(c[3]));return a},getClasses:function(){function a(f){i(f.imports,function(b){a(b)});i(f.cssRules||f.rules,function(f){switch(f.type||1){case 1:f.selectorText&&i(f.selectorText.split(","),function(a){a=a.replace(/^\s*|\s*$|^\s\./g,"");if(!/\.mce/.test(a)&&/\.[\w\-]+$/.test(a)&&(e=a,a=g._replace(/.*\.([a-z0-9_\-]+).*/i,
"$1",a),(!d||(a=d(a,e)))&&!c[a]))b.push({"class":a}),c[a]=1});break;case 3:a(f.styleSheet)}})}var b=[],c={},d=this.settings.class_filter,e;if(this.classes)return this.classes;try{i(this.doc.styleSheets,a)}catch(f){}0<b.length&&(this.classes=b);return b},run:function(a,b,c){var d=this,e;d.doc&&"string"===typeof a&&(a=d.get(a));if(!a)return!1;c=c||this;return!a.nodeType&&(a.length||0===a.length)?(e=[],i(a,function(a,g){a&&("string"==typeof a&&(a=d.doc.getElementById(a)),e.push(b.call(c,a,g)))}),e):
b.call(c,a)},getAttribs:function(a){var b,a=this.get(a);if(!a)return[];if(h){b=[];if("OBJECT"==a.nodeName)return a.attributes;"OPTION"===a.nodeName&&this.getAttrib(a,"selected")&&b.push({specified:1,nodeName:"selected"});a.cloneNode(!1).outerHTML.replace(/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi,"").replace(/[\w:\-]+/gi,function(a){b.push({specified:1,nodeName:a})});return b}return a.attributes},isEmpty:function(a,b){var c,d,e,f;if(a=a.firstChild){e=new g.dom.TreeWalker(a);b=b||this.schema?
this.schema.getNonEmptyElements():null;do{d=a.nodeType;if(1===d){if(a.getAttribute("data-mce-bogus"))continue;f=a.nodeName.toLowerCase();if(b&&b[f]){c=a.parentNode;if("br"===f&&this.isBlock(c)&&c.firstChild===a&&c.lastChild===a)continue;return!1}this.getAttribs(a);for(c=a.attributes.length;c--;)if(f=a.attributes[c].nodeName.toLowerCase(),"name"===f||"data-mce-bookmark"===f||"contenteditable"===f&&"true"===a.attributes[c].value)return!1}if(8==d||3===d&&!p.test(a.nodeValue))return!1}while(a=e.next())}return!0},
destroy:function(a){this.events&&this.events.destroy();this.win=this.doc=this.root=this.events=null;a||g.removeUnload(this.destroy)},createRng:function(){var a=this.doc;return a.createRange?a.createRange():new g.dom.Range(this)},nodeIndex:function(a,b){var c=0,d,e;if(a){d=a.nodeType;for(a=a.previousSibling;a;a=a.previousSibling)if(e=a.nodeType,!(b&&3==e)||e!=d&&a.nodeValue.length)c++,d=e}return c},split:function(a,b,c){function d(a){var b,c=a.childNodes,f=a.nodeType;if(!(1==f&&"bookmark"==a.getAttribute("data-mce-type"))){for(b=
c.length-1;0<=b;b--)d(c[b]);if(9!=f){if(3==f&&0<a.nodeValue.length){b=g.trim(a.nodeValue).length;if(!(c=!e.isBlock(a.parentNode)))if(!(c=0<b)){if(b=0==b)b=a.nextSibling&&"SPAN"==a.nextSibling.nodeName,b=a.previousSibling&&"SPAN"==a.previousSibling.nodeName&&b;c=b}if(c)return}else if(1==f&&(c=a.childNodes,1==c.length&&(c[0]&&1==c[0].nodeType&&"bookmark"==c[0].getAttribute("data-mce-type"))&&a.parentNode.insertBefore(c[0],a),c.length||/^(br|hr|input|img)$/i.test(a.nodeName)))return;e.remove(a)}return a}}
var e=this,f=e.createRng(),i,h;if(a&&b)return f.setStart(a.parentNode,e.nodeIndex(a)),f.setEnd(b.parentNode,e.nodeIndex(b)),i=f.extractContents(),f=e.createRng(),f.setStart(b.parentNode,e.nodeIndex(b)+1),f.setEnd(a.parentNode,e.nodeIndex(a)+1),f=f.extractContents(),h=a.parentNode,h.insertBefore(d(i),a),c?h.replaceChild(c,b):h.insertBefore(b,a),h.insertBefore(d(f),a),e.remove(a),c||b},bind:function(a,b,c,d){this.events||(this.events=new g.dom.EventUtils);return this.events.add(a,b,c,d||this)},unbind:function(a,
b,c){this.events||(this.events=new g.dom.EventUtils);return this.events.remove(a,b,c)},dumpRng:function(a){return"startContainer: "+a.startContainer.nodeName+", startOffset: "+a.startOffset+", endContainer: "+a.endContainer.nodeName+", endOffset: "+a.endOffset},_findSib:function(a,b,c){var d=this,e=b;if(a){j(e,"string")&&(e=function(a){return d.is(a,b)});for(a=a[c];a;a=a[c])if(e(a))return a}return null},_isRes:function(a){return/^(top|left|bottom|right|width|height)/i.test(a)||/;\s*(top|left|bottom|right|width|height)/i.test(a)}});
g.DOM=new g.dom.DOMUtils(document,{process_html:0})})(tinymce);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.tinymce:atlassian-rte-javascript-tinymce-core', location = 'jscripts/tiny_mce/classes/dom/Range.js' */
(function(y){function B(t){function w(b,a){C(j,b,a)}function x(b,a){C(m,b,a)}function D(b){w(b.parentNode,p(b))}function E(b){x(b.parentNode,p(b)+1)}function z(b,a){var c;if(3==b.nodeType||0>a)return b;for(c=b.firstChild;c&&0<a;)--a,c=c.nextSibling;return c?c:b}function u(b,a,c,d){var e,g;if(b==c)return a==d?0:a<d?-1:1;for(e=c;e&&e.parentNode!=b;)e=e.parentNode;if(e){g=0;for(c=b.firstChild;c!=e&&g<a;)g++,c=c.nextSibling;return a<=g?-1:1}for(e=b;e&&e.parentNode!=c;)e=e.parentNode;if(e){g=0;for(c=c.firstChild;c!=
e&&g<d;)g++,c=c.nextSibling;return g<d?-1:1}for(a=t.findCommonAncestor(b,c);b&&b.parentNode!=a;)b=b.parentNode;b||(b=a);for(d=c;d&&d.parentNode!=a;)d=d.parentNode;d||(d=a);if(b==d)return 0;for(c=a.firstChild;c;){if(c==b)return-1;if(c==d)return 1;c=c.nextSibling}}function C(b,a,c){b?(d[i]=a,d[k]=c):(d[n]=a,d[o]=c);for(a=d[n];a.parentNode;)a=a.parentNode;for(c=d[i];c.parentNode;)c=c.parentNode;c==a?0<u(d[i],d[k],d[n],d[o])&&d.collapse(b):d.collapse(b);d.collapsed=d[i]==d[n]&&d[k]==d[o];d.commonAncestorContainer=
t.findCommonAncestor(d[i],d[n])}function A(b){var a,c=0,f=0,e;if(d[i]==d[n])return y(b);a=d[n];for(e=a.parentNode;e;a=e,e=e.parentNode){if(e==d[i]){var g=a;e=f=c=c=e=a=void 0;b!=l&&(a=q.createDocumentFragment());e=F(g,b);a&&a.appendChild(e);c=p(g);c-=d[k];if(!(0>=c))for(e=g.previousSibling;0<c;)f=e.previousSibling,e=v(e,b),a&&a.insertBefore(e,a.firstChild),--c,e=f;b!=r&&(d.setEndBefore(g),d.collapse(m));b=a;return b}++c}a=d[i];for(e=a.parentNode;e;a=e,e=e.parentNode){if(e==d[n]){g=a;e=f=c=e=c=a=void 0;
b!=l&&(a=q.createDocumentFragment());e=G(g,b);a&&a.appendChild(e);c=p(g);++c;c=d[o]-c;for(e=g.nextSibling;0<c;)f=e.nextSibling,e=v(e,b),a&&a.appendChild(e),--c,e=f;b!=r&&(d.setStartAfter(g),d.collapse(j));return a}++f}f-=c;for(a=d[i];0<f;)a=a.parentNode,f--;for(c=d[n];0>f;)c=c.parentNode,f++;f=a.parentNode;for(e=c.parentNode;f!=e;f=f.parentNode,e=e.parentNode)a=f,c=e;var h;b!=l&&(g=q.createDocumentFragment());h=G(a,b);g&&g.appendChild(h);f=p(a);e=p(c);++f;f=e-f;for(h=a.nextSibling;0<f;)e=h.nextSibling,
h=v(h,b),g&&g.appendChild(h),h=e,--f;h=F(c,b);g&&g.appendChild(h);b!=r&&(d.setStartAfter(a),d.collapse(j));return g}function y(b){var a,c,f,e;b!=l&&(a=q.createDocumentFragment());if(d[k]==d[o])return a;if(3==d[i].nodeType){c=d[i].nodeValue;c=c.substring(d[k],d[o]);b!=r&&(d[i].deleteData(d[k],d[o]-d[k]),d.collapse(j));if(b==l)return;a.appendChild(q.createTextNode(c));return a}f=z(d[i],d[k]);for(c=d[o]-d[k];0<c;)e=f.nextSibling,f=v(f,b),a&&a.appendChild(f),--c,f=e;b!=r&&d.collapse(j);return a}function F(b,
a){var c=z(d[n],d[o]-1),f,e,g,h=c!=d[n];if(c==b)return s(c,h,m,a);f=c.parentNode;for(e=s(f,m,m,a);f;){for(;c;)g=c.previousSibling,c=s(c,h,m,a),a!=l&&e.insertBefore(c,e.firstChild),h=j,c=g;if(f==b)return e;c=f.previousSibling;f=f.parentNode;g=s(f,m,m,a);a!=l&&g.appendChild(e);e=g}}function G(b,a){var c=z(d[i],d[k]),f=c!=d[i],e,g,h;if(c==b)return s(c,f,j,a);e=c.parentNode;for(g=s(e,m,j,a);e;){for(;c;)h=c.nextSibling,c=s(c,f,j,a),a!=l&&g.appendChild(c),f=j,c=h;if(e==b)return g;c=e.nextSibling;e=e.parentNode;
h=s(e,m,j,a);a!=l&&h.appendChild(g);g=h}}function s(b,a,c,f){var e;if(a)return v(b,f);if(3==b.nodeType){a=b.nodeValue;c?(e=d[k],c=a.substring(e),a=a.substring(0,e)):(e=d[o],c=a.substring(0,e),a=a.substring(e));f!=r&&(b.nodeValue=a);if(f==l)return;b=b.cloneNode(m);b.nodeValue=c;return b}if(f!=l)return b.cloneNode(m)}function v(b,a){if(a!=l)return a==r?b.cloneNode(j):b;b.parentNode.removeChild(b)}var d=this,q=t.doc,r=1,l=2,j=!0,m=!1,k="startOffset",i="startContainer",n="endContainer",o="endOffset",
H=tinymce.extend,p=t.nodeIndex;H(d,{startContainer:q,startOffset:0,endContainer:q,endOffset:0,collapsed:j,commonAncestorContainer:q,START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3,setStart:w,setEnd:x,setStartBefore:D,setStartAfter:function(b){w(b.parentNode,p(b)+1)},setEndBefore:function(b){x(b.parentNode,p(b))},setEndAfter:E,collapse:function(b){b?(d[n]=d[i],d[o]=d[k]):(d[i]=d[n],d[k]=d[o]);d.collapsed=j},selectNode:function(b){D(b);E(b)},selectNodeContents:function(b){w(b,0);x(b,1===
b.nodeType?b.childNodes.length:b.nodeValue.length)},compareBoundaryPoints:function(b,a){var c=d[i],f=d[k],e=d[n],g=d[o],h=a.startContainer,j=a.startOffset,l=a.endContainer,m=a.endOffset;if(0===b)return u(c,f,h,j);if(1===b)return u(e,g,h,j);if(2===b)return u(e,g,l,m);if(3===b)return u(c,f,l,m)},deleteContents:function(){A(l)},extractContents:function(){return A(0)},cloneContents:function(){return A(r)},insertNode:function(b){var a=this[i],c=this[k],d;(3===a.nodeType||4===a.nodeType)&&a.nodeValue?c?
c>=a.nodeValue.length?t.insertAfter(b,a):(c=a.splitText(c),a.parentNode.insertBefore(b,c)):a.parentNode.insertBefore(b,a):(0<a.childNodes.length&&(d=a.childNodes[c]),d?a.insertBefore(b,d):a.appendChild(b))},surroundContents:function(b){var a=d.extractContents();d.insertNode(b);b.appendChild(a);d.selectNode(b)},cloneRange:function(){return H(new B(t),{startContainer:d[i],startOffset:d[k],endContainer:d[n],endOffset:d[o],collapsed:d.collapsed,commonAncestorContainer:d.commonAncestorContainer})}})}y.Range=
B})(tinymce.dom);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.tinymce:atlassian-rte-javascript-tinymce-core', location = 'jscripts/tiny_mce/classes/dom/TridentSelection.js' */
(function(){tinymce.dom.TridentSelection=function(l){function p(e,c){var a,b=0,f,j,h,k,i,d,g=-1,m;a=e.duplicate();a.collapse(c);m=a.parentElement();if(m.ownerDocument===l.dom.doc){for(;"false"===m.contentEditable;)m=m.parentNode;if(!m.hasChildNodes())return{node:m,inside:1};h=m.children;for(f=h.length-1;b<=f;)if(d=Math.floor((b+f)/2),k=h[d],a.moveToElementText(k),g=a.compareEndPoints(c?"StartToStart":"EndToEnd",e),0<g)f=d-1;else if(0>g)b=d+1;else return{node:k};if(0>g){k?a.collapse(!1):(a.moveToElementText(m),
a.collapse(!0),k=m,j=!0);a.setEndPoint(c?"EndToStart":"EndToEnd",e);if(0<a.compareEndPoints(c?"StartToStart":"StartToEnd",e)){a=e.duplicate();a.collapse(c);for(i=-1;m==a.parentElement()&&0!=a.move("character",-1);)i++}i=i||a.text.replace("\r\n"," ").length}else a.collapse(!0),a.setEndPoint(c?"StartToStart":"StartToEnd",e),i=a.text.replace("\r\n"," ").length;return{node:k,position:g,offset:i,inside:j}}}var q=this,n=l.dom,r=!0;this.getBookmark=function(e){function c(a){var h,b,i,d,c=[];h=a.parentNode;
for(b=n.doc.body.parentNode;h!=b&&9!==h.nodeType;){i=h.children;for(d=i.length;d--;)if(a===i[d]){c.push(d);break}a=h;h=h.parentNode}return c}function a(a){if(a=p(b,a))return{position:a.position,offset:a.offset,indexes:c(a.node),inside:a.inside}}var b=l.getRng(),f={};2===e&&(b.item?f.start={ctrl:!0,indexes:c(b.item(0))}:(f.start=a(!0),l.isCollapsed()||(f.end=a())));return f};this.moveToBookmark=function(e){function c(a){var b,c,i,d;b=n.doc.body;for(c=a.length-1;0<=c;c--)d=b.children,i=a[c],i<=d.length-
1&&(b=d[i]);return b}function a(a){var h=e[a?"start":"end"],k,i;h&&(k=0<h.position,i=f.createTextRange(),i.moveToElementText(c(h.indexes)),offset=h.offset,void 0!==offset?(i.collapse(h.inside||k),i.moveStart("character",k?-offset:offset)):i.collapse(a),b.setEndPoint(a?"StartToStart":"EndToStart",i),a&&b.collapse(!0))}var b,f=n.doc.body;e.start&&(e.start.ctrl?(b=f.createControlRange(),b.addElement(c(e.start.indexes))):(b=f.createTextRange(),a(!0),a()),b.select())};this.addRange=function(e){function c(b){var c,
e,g,l,o;g=n.create("a");c=b?f:h;e=b?j:k;l=a.duplicate();if(c==i||c==i.documentElement)c=d,e=0;3==c.nodeType?(c.parentNode.insertBefore(g,c),l.moveToElementText(g),l.moveStart("character",e),n.remove(g),a.setEndPoint(b?"StartToStart":"EndToEnd",l)):(o=c.childNodes,o.length?(e>=o.length?n.insertAfter(g,o[o.length-1]):c.insertBefore(g,o[e]),l.moveToElementText(g)):(g=i.createTextNode("﻿"),c.appendChild(g),l.moveToElementText(g.parentNode),l.collapse(r)),a.setEndPoint(b?"StartToStart":"EndToEnd",l),n.remove(g))}
var a,b,f,j,h,k,i=l.dom.doc,d=i.body;f=e.startContainer;j=e.startOffset;h=e.endContainer;k=e.endOffset;a=d.createTextRange();if(f==h&&(1==f.nodeType&&j==k-1)&&j==k-1)try{b=d.createControlRange();b.addElement(f.childNodes[j]);b.select();return}catch(g){}c(!0);c();a.select()};this.getRangeAt=function(){function e(b){var d=p(c,b),g,e,f=0,h;g=d.node;e=d.offset;if(d.inside&&!g.hasChildNodes())a[b?"setStart":"setEnd"](g,0);else if(void 0===e)a[b?"setStartBefore":"setEndAfter"](g);else{if(0>d.position){d=
d.inside?g.firstChild:g.nextSibling;if(!d){a[b?"setStartAfter":"setEndAfter"](g);return}if(!e){if(3==d.nodeType)a[b?"setStart":"setEnd"](d,0);else a[b?"setStartBefore":"setEndBefore"](d);return}for(;d;){h=d.nodeValue;f+=h.length;if(f>=e){g=d;f-=e;f=h.length-f;break}d=d.nextSibling}}else{d=g.previousSibling;if(!d)return a[b?"setStartBefore":"setEndBefore"](g);if(!e){if(3==g.nodeType)a[b?"setStart":"setEnd"](d,g.nodeValue.length);else a[b?"setStartAfter":"setEndAfter"](d);return}for(;d;){f+=d.nodeValue.length;
if(f>=e){g=d;f-=e;break}d=d.previousSibling}}a[b?"setStart":"setEnd"](g,f)}}var c=l.getRng(),a=n.createRng(),b,f,j,h;b=c.item?c.item(0):c.parentElement();if(b.ownerDocument!=n.doc)return a;f=l.isCollapsed();if(c.item)return a.setStart(b.parentNode,n.nodeIndex(b)),a.setEnd(a.startContainer,a.startOffset+1),a;try{e(!0),f||e()}catch(k){if(-2147024809==k.number)h=q.getBookmark(2),j=c.duplicate(),j.collapse(!0),b=j.parentElement(),f||(j=c.duplicate(),j.collapse(!1),j=j.parentElement(),j.innerHTML=j.innerHTML),
b.innerHTML=b.innerHTML,q.moveToBookmark(h),c=l.getRng(),e(!0),f||e();else throw k;}return a}}})();
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.tinymce:atlassian-rte-javascript-tinymce-core', location = 'jscripts/tiny_mce/classes/dom/Sizzle.js' */
(function(){function w(a,b,c,d,f,e){for(var f=0,j=d.length;f<j;f++){var h=d[f];if(h){for(var h=h[a],g=!1;h;){if(h.sizcache===c){g=d[h.sizset];break}1===h.nodeType&&!e&&(h.sizcache=c,h.sizset=f);if(h.nodeName.toLowerCase()===b){g=h;break}h=h[a]}d[f]=g}}}function x(a,b,c,d,f,e){for(var f=0,j=d.length;f<j;f++){var h=d[f];if(h){for(var h=h[a],g=!1;h;){if(h.sizcache===c){g=d[h.sizset];break}if(1===h.nodeType)if(e||(h.sizcache=c,h.sizset=f),"string"!==typeof b){if(h===b){g=!0;break}}else if(0<i.filter(b,
[h]).length){g=h;break}h=h[a]}d[f]=g}}}var t=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,u=0,y=Object.prototype.toString,m=!1,z=!0;[0,0].sort(function(){z=!1;return 0});var i=function(a,b,c,d){var c=c||[],f=b=b||document;if(1!==b.nodeType&&9!==b.nodeType)return[];if(!a||"string"!==typeof a)return c;var e=[],j,h,l,k,o=!0,m=i.isXML(b),n=a,p;do if(t.exec(""),j=t.exec(n))if(n=j[3],e.push(j[1]),j[2]){k=j[3];break}while(j);
if(1<e.length&&B.exec(a))if(2===e.length&&g.relative[e[0]])h=A(e[0]+e[1],b);else for(h=g.relative[e[0]]?[b]:i(e.shift(),b);e.length;)a=e.shift(),g.relative[a]&&(a+=e.shift()),h=A(a,h);else if(!d&&(1<e.length&&9===b.nodeType&&!m&&g.match.ID.test(e[0])&&!g.match.ID.test(e[e.length-1]))&&(j=i.find(e.shift(),b,m),b=j.expr?i.filter(j.expr,j.set)[0]:j.set[0]),b){j=d?{expr:e.pop(),set:q(d)}:i.find(e.pop(),1===e.length&&("~"===e[0]||"+"===e[0])&&b.parentNode?b.parentNode:b,m);h=j.expr?i.filter(j.expr,j.set):
j.set;for(0<e.length?l=q(h):o=!1;e.length;)j=p=e.pop(),g.relative[p]?j=e.pop():p="",null==j&&(j=b),g.relative[p](l,j,m)}else l=[];l||(l=h);l||i.error(p||a);if("[object Array]"===y.call(l))if(o)if(b&&1===b.nodeType)for(a=0;null!=l[a];a++)l[a]&&(!0===l[a]||1===l[a].nodeType&&i.contains(b,l[a]))&&c.push(h[a]);else for(a=0;null!=l[a];a++)l[a]&&1===l[a].nodeType&&c.push(h[a]);else c.push.apply(c,l);else q(l,c);k&&(i(k,f,c,d),i.uniqueSort(c));return c};i.uniqueSort=function(a){if(r&&(m=z,a.sort(r),m))for(var b=
1;b<a.length;b++)a[b]===a[b-1]&&a.splice(b--,1);return a};i.matches=function(a,b){return i(a,null,null,b)};i.find=function(a,b,c){var d;if(!a)return[];for(var f=0,e=g.order.length;f<e;f++){var j=g.order[f],h;if(h=g.leftMatch[j].exec(a)){var i=h[1];h.splice(1,1);if("\\"!==i.substr(i.length-1)&&(h[1]=(h[1]||"").replace(/\\/g,""),d=g.find[j](h,b,c),null!=d)){a=a.replace(g.match[j],"");break}}}d||(d=b.getElementsByTagName("*"));return{set:d,expr:a}};i.filter=function(a,b,c,d){for(var f=a,e=[],j=b,h,l,
k=b&&b[0]&&i.isXML(b[0]);a&&b.length;){for(var m in g.filter)if(null!=(h=g.leftMatch[m].exec(a))&&h[2]){var o=g.filter[m],n,p;p=h[1];l=!1;h.splice(1,1);if("\\"!==p.substr(p.length-1)){j===e&&(e=[]);if(g.preFilter[m])if(h=g.preFilter[m](h,j,c,e,d,k)){if(!0===h)continue}else l=n=!0;if(h)for(var q=0;null!=(p=j[q]);q++)if(p){n=o(p,h,q,j);var r=d^!!n;c&&null!=n?r?l=!0:j[q]=!1:r&&(e.push(p),l=!0)}if(void 0!==n){c||(j=e);a=a.replace(g.match[m],"");if(!l)return[];break}}}if(a===f)if(null==l)i.error(a);else break;
f=a}return j};i.error=function(a){throw"Syntax error, unrecognized expression: "+a;};var g=i.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+\-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,
PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")}},relative:{"+":function(a,b){var c="string"===typeof b,d=c&&!/\W/.test(b),c=c&&!d;d&&(b=b.toLowerCase());for(var d=0,f=a.length,e;d<f;d++)if(e=a[d]){for(;(e=e.previousSibling)&&1!==e.nodeType;);a[d]=c||e&&e.nodeName.toLowerCase()===b?e||!1:e===b}c&&i.filter(b,a,!0)},">":function(a,b){var c="string"===
typeof b,d,f=0,e=a.length;if(c&&!/\W/.test(b))for(b=b.toLowerCase();f<e;f++){if(d=a[f])c=d.parentNode,a[f]=c.nodeName.toLowerCase()===b?c:!1}else{for(;f<e;f++)(d=a[f])&&(a[f]=c?d.parentNode:d.parentNode===b);c&&i.filter(b,a,!0)}},"":function(a,b,c){var d=u++,f=x,e;"string"===typeof b&&!/\W/.test(b)&&(e=b=b.toLowerCase(),f=w);f("parentNode",b,d,a,e,c)},"~":function(a,b,c){var d=u++,f=x,e;"string"===typeof b&&!/\W/.test(b)&&(e=b=b.toLowerCase(),f=w);f("previousSibling",b,d,a,e,c)}},find:{ID:function(a,
b,c){if("undefined"!==typeof b.getElementById&&!c)return(a=b.getElementById(a[1]))?[a]:[]},NAME:function(a,b){if("undefined"!==typeof b.getElementsByName){for(var c=[],d=b.getElementsByName(a[1]),f=0,e=d.length;f<e;f++)d[f].getAttribute("name")===a[1]&&c.push(d[f]);return 0===c.length?null:c}},TAG:function(a,b){return b.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,b,c,d,f,e){a=" "+a[1].replace(/\\/g,"")+" ";if(e)return a;for(var e=0,g;null!=(g=b[e]);e++)g&&(f^(g.className&&0<=(" "+g.className+
" ").replace(/[\t\n]/g," ").indexOf(a))?c||d.push(g):c&&(b[e]=!1));return!1},ID:function(a){return a[1].replace(/\\/g,"")},TAG:function(a){return a[1].toLowerCase()},CHILD:function(a){if("nth"===a[1]){var b=/(-?)(\d*)n((?:\+|-)?\d*)/.exec("even"===a[2]&&"2n"||"odd"===a[2]&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0;a[3]=b[3]-0}a[0]=u++;return a},ATTR:function(a,b,c,d,f,e){b=a[1].replace(/\\/g,"");!e&&g.attrMap[b]&&(a[1]=g.attrMap[b]);"~="===a[2]&&(a[4]=" "+a[4]+" ");return a},
PSEUDO:function(a,b,c,d,f){if("not"===a[1])if(1<(t.exec(a[3])||"").length||/^\w/.test(a[3]))a[3]=i(a[3],null,null,b);else return a=i.filter(a[3],b,c,1^f),c||d.push.apply(d,a),!1;else if(g.match.POS.test(a[0])||g.match.CHILD.test(a[0]))return!0;return a},POS:function(a){a.unshift(!0);return a}},filters:{enabled:function(a){return!1===a.disabled&&"hidden"!==a.type},disabled:function(a){return!0===a.disabled},checked:function(a){return!0===a.checked},selected:function(a){a.parentNode.selectedIndex;return!0===
a.selected},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},has:function(a,b,c){return!!i(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){return"text"===a.type},radio:function(a){return"radio"===a.type},checkbox:function(a){return"checkbox"===a.type},file:function(a){return"file"===a.type},password:function(a){return"password"===a.type},submit:function(a){return"submit"===a.type},image:function(a){return"image"===a.type},reset:function(a){return"reset"===
a.type},button:function(a){return"button"===a.type||"button"===a.nodeName.toLowerCase()},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)}},setFilters:{first:function(a,b){return 0===b},last:function(a,b,c,d){return b===d.length-1},even:function(a,b){return 0===b%2},odd:function(a,b){return 1===b%2},lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0},nth:function(a,b,c){return c[3]-0===b},eq:function(a,b,c){return c[3]-0===b}},filter:{PSEUDO:function(a,
b,c,d){var f=b[1],e=g.filters[f];if(e)return e(a,c,b,d);if("contains"===f)return 0<=(a.textContent||a.innerText||i.getText([a])||"").indexOf(b[3]);if("not"===f){b=b[3];c=0;for(d=b.length;c<d;c++)if(b[c]===a)return!1;return!0}i.error("Syntax error, unrecognized expression: "+f)},CHILD:function(a,b){var c=b[1],d=a;switch(c){case "only":case "first":for(;d=d.previousSibling;)if(1===d.nodeType)return!1;if("first"===c)return!0;d=a;case "last":for(;d=d.nextSibling;)if(1===d.nodeType)return!1;return!0;case "nth":var c=
b[2],f=b[3];if(1===c&&0===f)return!0;var e=b[0],g=a.parentNode;if(g&&(g.sizcache!==e||!a.nodeIndex)){for(var h=0,d=g.firstChild;d;d=d.nextSibling)1===d.nodeType&&(d.nodeIndex=++h);g.sizcache=e}d=a.nodeIndex-f;return 0===c?0===d:0===d%c&&0<=d/c}},ID:function(a,b){return 1===a.nodeType&&a.getAttribute("id")===b},TAG:function(a,b){return"*"===b&&1===a.nodeType||a.nodeName.toLowerCase()===b},CLASS:function(a,b){return-1<(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)},ATTR:function(a,b){var c=
b[1],c=g.attrHandle[c]?g.attrHandle[c](a):null!=a[c]?a[c]:a.getAttribute(c),d=c+"",f=b[2],e=b[4];return null==c?"!="===f:"="===f?d===e:"*="===f?0<=d.indexOf(e):"~="===f?0<=(" "+d+" ").indexOf(e):!e?d&&!1!==c:"!="===f?d!==e:"^="===f?0===d.indexOf(e):"$="===f?d.substr(d.length-e.length)===e:"|="===f?d===e||d.substr(0,e.length+1)===e+"-":!1},POS:function(a,b,c,d){var f=g.setFilters[b[2]];if(f)return f(a,c,b,d)}}},B=g.match.POS,k=function(a,b){return"\\"+(b-0+1)},n;for(n in g.match)g.match[n]=RegExp(g.match[n].source+
/(?![^\[]*\])(?![^\(]*\))/.source),g.leftMatch[n]=RegExp(/(^(?:.|\r|\n)*?)/.source+g.match[n].source.replace(/\\(\d+)/g,k));var q=function(a,b){a=Array.prototype.slice.call(a,0);return b?(b.push.apply(b,a),b):a};try{Array.prototype.slice.call(document.documentElement.childNodes,0)[0].nodeType}catch(C){q=function(a,b){var c=b||[],d=0;if("[object Array]"===y.call(a))Array.prototype.push.apply(c,a);else if("number"===typeof a.length)for(var f=a.length;d<f;d++)c.push(a[d]);else for(;a[d];d++)c.push(a[d]);
return c}}var r;document.documentElement.compareDocumentPosition?r=function(a,b){if(!a.compareDocumentPosition||!b.compareDocumentPosition)return a==b&&(m=!0),a.compareDocumentPosition?-1:1;var c=a.compareDocumentPosition(b)&4?-1:a===b?0:1;0===c&&(m=!0);return c}:"sourceIndex"in document.documentElement?r=function(a,b){if(!a.sourceIndex||!b.sourceIndex)return a==b&&(m=!0),a.sourceIndex?-1:1;var c=a.sourceIndex-b.sourceIndex;0===c&&(m=!0);return c}:document.createRange&&(r=function(a,b){if(!a.ownerDocument||
!b.ownerDocument)return a==b&&(m=!0),a.ownerDocument?-1:1;var c=a.ownerDocument.createRange(),d=b.ownerDocument.createRange();c.setStart(a,0);c.setEnd(a,0);d.setStart(b,0);d.setEnd(b,0);c=c.compareBoundaryPoints(Range.START_TO_END,d);0===c&&(m=!0);return c});i.getText=function(a){for(var b="",c,d=0;a[d];d++)c=a[d],3===c.nodeType||4===c.nodeType?b+=c.nodeValue:8!==c.nodeType&&(b+=i.getText(c.childNodes));return b};k=document.createElement("div");n="script"+(new Date).getTime();k.innerHTML="<a name='"+
n+"'/>";var s=document.documentElement;s.insertBefore(k,s.firstChild);document.getElementById(n)&&(g.find.ID=function(a,b,c){if("undefined"!==typeof b.getElementById&&!c)return(b=b.getElementById(a[1]))?b.id===a[1]||"undefined"!==typeof b.getAttributeNode&&b.getAttributeNode("id").nodeValue===a[1]?[b]:void 0:[]},g.filter.ID=function(a,b){var c="undefined"!==typeof a.getAttributeNode&&a.getAttributeNode("id");return 1===a.nodeType&&c&&c.nodeValue===b});s.removeChild(k);s=k=null;k=document.createElement("div");
k.appendChild(document.createComment(""));0<k.getElementsByTagName("*").length&&(g.find.TAG=function(a,b){var c=b.getElementsByTagName(a[1]);if(a[1]==="*"){for(var d=[],f=0;c[f];f++)c[f].nodeType===1&&d.push(c[f]);c=d}return c});k.innerHTML="<a href='#'></a>";k.firstChild&&("undefined"!==typeof k.firstChild.getAttribute&&"#"!==k.firstChild.getAttribute("href"))&&(g.attrHandle.href=function(a){return a.getAttribute("href",2)});k=null;if(document.querySelectorAll){var v=i,k=document.createElement("div");
k.innerHTML="<p class='TEST'></p>";if(!(k.querySelectorAll&&0===k.querySelectorAll(".TEST").length)){var i=function(a,b,c,d){b=b||document;if(!d&&b.nodeType===9&&!i.isXML(b))try{return q(b.querySelectorAll(a),c)}catch(f){}return v(a,b,c,d)},o;for(o in v)i[o]=v[o];k=null}}o=document.createElement("div");o.innerHTML="<div class='test e'></div><div class='test'></div>";o.getElementsByClassName&&0!==o.getElementsByClassName("e").length&&(o.lastChild.className="e",1!==o.getElementsByClassName("e").length&&
(g.order.splice(1,0,"CLASS"),g.find.CLASS=function(a,b,c){if(typeof b.getElementsByClassName!=="undefined"&&!c)return b.getElementsByClassName(a[1])},o=null));i.contains=document.compareDocumentPosition?function(a,b){return!!(a.compareDocumentPosition(b)&16)}:function(a,b){return a!==b&&(a.contains?a.contains(b):true)};i.isXML=function(a){return(a=(a?a.ownerDocument||a:0).documentElement)?a.nodeName!=="HTML":false};var A=function(a,b){for(var c=[],d="",f,e=b.nodeType?[b]:b;f=g.match.PSEUDO.exec(a);){d=
d+f[0];a=a.replace(g.match.PSEUDO,"")}a=g.relative[a]?a+"*":a;f=0;for(var j=e.length;f<j;f++)i(a,e[f],c);return i.filter(d,c)};window.tinymce.dom.Sizzle=i})();
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.tinymce:atlassian-rte-javascript-tinymce-core', location = 'jscripts/tiny_mce/classes/dom/EventUtils.js' */
(function(d){var h=d.each,j=d.DOM,l=d.isIE,k;d.create("tinymce.dom.EventUtils",{EventUtils:function(){this.inits=[];this.events=[]},add:function(a,b,c,g){var e,f=this,m=f.events,i;if(b instanceof Array)return i=[],h(b,function(b){i.push(f.add(a,b,c,g))}),i;if(a&&a.hasOwnProperty&&a instanceof Array)return i=[],h(a,function(a){a=j.get(a);i.push(f.add(a,b,c,g))}),i;if(a=j.get(a)){e=function(a){if(!f.disabled){if((a=a||window.event)&&l&&!d.isIE11)a.target||(a.target=a.srcElement),d.extend(a,f._stoppers);
return!g?c(a):c.call(g,a)}};if("unload"==b)return d.unloads.unshift({func:e}),e;if("init"==b)return f.domLoaded?e():f.inits.push(e),e;m.push({obj:a,name:b,func:c,cfunc:e,scope:g});f._add(a,b,e);return c}},remove:function(a,b,c){var g=this,e=g.events,f=!1,d;if(a&&a.hasOwnProperty&&a instanceof Array)return d=[],h(a,function(a){a=j.get(a);d.push(g.remove(a,b,c))}),d;a=j.get(a);h(e,function(d,h){if(d.obj==a&&d.name==b&&(!c||d.func==c||d.cfunc==c))return e.splice(h,1),g._remove(a,b,d.cfunc),f=!0,!1});
return f},clear:function(a){var b=this.events,c,d;if(a){a=j.get(a);for(c=b.length-1;0<=c;c--)d=b[c],d.obj===a&&(this._remove(d.obj,d.name,d.cfunc),d.obj=d.cfunc=null,b.splice(c,1))}},cancel:function(a){if(!a)return!1;this.stop(a);return this.prevent(a)},stop:function(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0;return!1},prevent:function(a){a.preventDefault?a.preventDefault():a.returnValue=!1;return!1},destroy:function(){var a=this;h(a.events,function(b){a._remove(b.obj,b.name,b.cfunc);
b.obj=b.cfunc=null});a.events=[];a=null},_add:function(a,b,c){a.attachEvent?a.attachEvent("on"+b,c):a.addEventListener?a.addEventListener(b,c,!1):a["on"+b]=c},_remove:function(a,b,c){if(a)try{a.detachEvent?a.detachEvent("on"+b,c):a.removeEventListener?a.removeEventListener(b,c,!1):a["on"+b]=null}catch(d){}},_pageInit:function(){this.domLoaded||(this.domLoaded=!0,h(this.inits,function(a){a()}),this.inits=[])},_wait:function(a){var b=this,c=a.document;a.tinyMCE_GZ&&tinyMCE_GZ.loaded?b.domLoaded=1:"complete"===
c.readyState?b._pageInit(a):(c.attachEvent?(c.attachEvent("onreadystatechange",function(){"complete"===c.readyState&&(c.detachEvent("onreadystatechange",arguments.callee),b._pageInit(a))}),c.documentElement.doScroll&&a==a.top&&function(){if(!b.domLoaded){try{c.documentElement.doScroll("left")}catch(d){setTimeout(arguments.callee,0);return}b._pageInit(a)}}()):c.addEventListener&&b._add(a,"DOMContentLoaded",function(){b._pageInit(a)}),b._add(a,"load",function(){b._pageInit(a)}))},_stoppers:{preventDefault:function(){this.returnValue=
!1},stopPropagation:function(){this.cancelBubble=!0}}});k=d.dom.Event=new d.dom.EventUtils;k._wait(window);d.addUnload(function(){k.destroy()})})(tinymce);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.tinymce:atlassian-rte-javascript-tinymce-core', location = 'jscripts/tiny_mce/classes/dom/Element.js' */
(function(e){e.dom.Element=function(h,g){var a=this,c;a.settings=g=g||{};a.id=h;a.dom=c=g.dom||e.DOM;e.isIE||c.get(a.id);e.each("getPos,getRect,getParent,add,setStyle,getStyle,setStyles,setAttrib,setAttribs,getAttrib,addClass,removeClass,hasClass,getOuterHTML,setOuterHTML,remove,show,hide,isHidden,setHTML,get".split(/,/),function(b){a[b]=function(){var f=[h],d;for(d=0;d<arguments.length;d++)f.push(arguments[d]);f=c[b].apply(c,f);a.update(b);return f}});e.extend(a,{on:function(b,f,c){return e.dom.Event.add(a.id,
b,f,c)},getXY:function(){return{x:parseInt(a.getStyle("left")),y:parseInt(a.getStyle("top"))}},getSize:function(){var b=c.get(a.id);return{w:parseInt(a.getStyle("width")||b.clientWidth),h:parseInt(a.getStyle("height")||b.clientHeight)}},moveTo:function(b,c){a.setStyles({left:b,top:c})},moveBy:function(b,c){var d=a.getXY();a.moveTo(d.x+b,d.y+c)},resizeTo:function(b,c){a.setStyles({width:b,height:c})},resizeBy:function(b,c){var d=a.getSize();a.resizeTo(d.w+b,d.h+c)},update:function(b){e.isIE6&&g.blocker&&
(b=b||"",0===b.indexOf("get")||(0===b.indexOf("has")||0===b.indexOf("is"))||("remove"==b?c.remove(a.blocker):(a.blocker?b=c.get(a.blocker):(a.blocker=c.uniqueId(),b=c.add(g.container||c.getRoot(),"iframe",{id:a.blocker,style:"position:absolute;",frameBorder:0,src:'javascript:""'}),c.setStyle(b,"opacity",0)),c.setStyles(b,{left:a.getStyle("left",1),top:a.getStyle("top",1),width:a.getStyle("width",1),height:a.getStyle("height",1),display:a.getStyle("display",1),zIndex:parseInt(a.getStyle("zIndex",1)||
0)-1}))))}})}})(tinymce);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.tinymce:atlassian-rte-javascript-tinymce-core', location = 'jscripts/tiny_mce/classes/dom/Selection.js' */
(function(k){var n=k.is,o=k.isIE,m=k.each;k.create("tinymce.dom.Selection",{Selection:function(a,b,c){var d=this;d.dom=a;d.win=b;d.serializer=c;m(["onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent"],function(a){d[a]=new k.util.Dispatcher(d)});d.win.getSelection||(d.tridentSel=new k.dom.TridentSelection(d));k.isIE&&a.boxModel&&this._fixIESelection();k.addUnload(d.destroy,d)},setCursorLocation:function(a,b){var c=this.dom.createRng();c.setStart(a,b);c.setEnd(a,b);this.setRng(c);
this.collapse(!1)},getContent:function(a){var b=this.getRng(),c=this.dom.create("body"),d=this.getSel(),f,e,a=a||{};f=e="";a.get=!0;a.format=a.format||"html";a.forced_root_block="";this.onBeforeGetContent.dispatch(this,a);if("text"==a.format)return this.isCollapsed()?"":b.text||(d.toString?d.toString():"");b.cloneContents?(b=b.cloneContents())&&c.appendChild(b):n(b.item)||n(b.htmlText)?(c.innerHTML="<br>"+(b.item?b.item(0).outerHTML:b.htmlText),c.removeChild(c.firstChild)):c.innerHTML=b.toString();
/^\s/.test(c.innerHTML)&&(f=" ");/\s+$/.test(c.innerHTML)&&(e=" ");a.getInner=!0;a.content=this.isCollapsed()?"":f+this.serializer.serialize(c,a)+e;this.onGetContent.dispatch(this,a);return a.content},setContent:function(a,b){var c=this.getRng(),d,f=this.win.document,e,b=b||{format:"html"};b.set=!0;b.content=a;b.no_events||this.onBeforeSetContent.dispatch(this,b);a=b.content;if(c.insertNode){a+='<span id="__caret">_</span>';if(c.startContainer==f&&c.endContainer==f)f.body.innerHTML=a;else if(c.deleteContents(),
0==f.body.childNodes.length)f.body.innerHTML=a;else if(c.createContextualFragment)try{c.insertNode(c.createContextualFragment(a))}catch(g){if(0===c.startOffset&&0===c.endOffset&&0===c.startContainer.children.length){d=f.createDocumentFragment();e=f.createElement("div");e.innerHTML=a;e=e.children[0];for(d.appendChild(e.cloneNode());e=e.nextSibling;)d.appendChild(e.cloneNode());c.startContainer.parentNode.insertBefore(d,c.startContainer)}else throw g;}else d=f.createDocumentFragment(),e=f.createElement("div"),
d.appendChild(e),e.outerHTML=a,c.insertNode(d);d=this.dom.get("__caret");c=f.createRange();c.setStartBefore(d);c.setEndBefore(d);this.setRng(c);this.dom.remove("__caret");try{this.setRng(c)}catch(i){}}else(c.item&&(f.execCommand("Delete",!1,null),c=this.getRng()),/^\s+/.test(a))?(c.pasteHTML('<span id="__mce_tmp">_</span>'+a),this.dom.remove("__mce_tmp")):c.pasteHTML(a);b.no_events||this.onSetContent.dispatch(this,b)},getStart:function(){var a=this.getRng(),b,c;if(a.duplicate||a.item){if(a.item)return a.item(0);
b=a.duplicate();b.collapse(1);b=b.parentElement();for(a=c=a.parentElement();c=c.parentNode;)if(c==b){b=a;break}return b}b=a.startContainer;1==b.nodeType&&b.hasChildNodes()&&(b=b.childNodes[Math.min(b.childNodes.length-1,a.startOffset)]);return b&&3==b.nodeType?b.parentNode:b},getEnd:function(){var a=this.getRng(),b;if(a.duplicate||a.item){if(a.item)return a.item(0);a=a.duplicate();a.collapse(0);return(b=a.parentElement())&&"BODY"==b.nodeName?b.lastChild||b:b}b=a.endContainer;a=a.endOffset;1==b.nodeType&&
b.hasChildNodes()&&(b=b.childNodes[0<a?a-1:a]);return b&&3==b.nodeType?b.parentNode:b},getBookmark:function(a,b){function c(a,b){var c=0;m(f.select(a),function(a,d){a==b&&(c=d)});return c}var d=this,f=d.dom,e,g,i,j,h;if(2==a){if(d.tridentSel)return d.tridentSel.getBookmark(a);e=function(a,c){var f=a[c?"startContainer":"endContainer"],e=a[c?"startOffset":"endOffset"],g=[],h,i=0;if(3==f.nodeType){if(b)for(h=f.previousSibling;h&&3==h.nodeType;h=h.previousSibling)e+=h.nodeValue.length;g.push(e)}else h=
f.childNodes,e>=h.length&&h.length&&(i=1,e=Math.max(0,h.length-1)),g.push(d.dom.nodeIndex(h[e],b)+i);for(;f&&f!=k;f=f.parentNode)g.push(d.dom.nodeIndex(f,b));return g};i=d.getRng(!0);var k=f.doc.body;j={};j.start=e(i,!0);d.isCollapsed()||(j.end=e(i));return j}if(a)return{rng:d.getRng()};e=d.getRng();i=f.uniqueId();j=tinyMCE.activeEditor.selection.isCollapsed();if(e.duplicate||e.item){if(e.item)return h=e.item(0),g=h.nodeName,{name:g,index:c(g,h)};g=e.duplicate();try{e.collapse(),e.pasteHTML('<span data-mce-type="bookmark" id="'+
i+'_start" style="overflow:hidden;line-height:0px">﻿</span>'),j||(g.collapse(!1),e.moveToElementText(g.parentElement()),0==e.compareEndPoints("StartToEnd",g)&&g.move("character",-1),g.pasteHTML('<span data-mce-type="bookmark" id="'+i+'_end" style="overflow:hidden;line-height:0px">﻿</span>'))}catch(p){return null}}else{h=d.getNode();g=h.nodeName;if("IMG"==g)return{name:g,index:c(g,h)};g=e.cloneRange();j||(g.collapse(!1),g.insertNode(f.create("span",{"data-mce-type":"bookmark",id:i+"_end",style:"overflow:hidden;line-height:0px"},
"﻿")));e.collapse(!0);e.insertNode(f.create("span",{"data-mce-type":"bookmark",id:i+"_start",style:"overflow:hidden;line-height:0px"},"﻿"))}d.moveToBookmark({id:i,keep:1});return{id:i}},moveToBookmark:function(a){var b=this.dom,c,d,f,e,g,i;if(a)if(a.start){c=b.createRng();d=b.doc.body;var j=function(b){var f=a[b?"start":"end"],e,g,h;if(f){h=f[0];g=d;for(e=f.length-1;1<=e;e--){g=g.childNodes;if(f[e]>g.length-1)return;g=g[f[e]]}3===g.nodeType&&(h=Math.min(f[0],g.nodeValue.length));1===g.nodeType&&(h=
Math.min(f[0],g.childNodes.length));b?c.setStart(g,h):c.setEnd(g,h)}return!0};if(this.tridentSel)return this.tridentSel.moveToBookmark(a);j(!0)&&j()&&this.setRng(c)}else if(a.id){var j=function(c){var d=b.get(a.id+"_"+c),h,j,l;l=a.keep;if(d&&(h=d.parentNode,"start"==c?(l?(h=d.firstChild,j=1):j=b.nodeIndex(d),f=e=h,g=i=j):(l?(h=d.firstChild,j=1):j=b.nodeIndex(d),e=h,i=j),!l)){l=d.previousSibling;h=d.nextSibling;for(m(k.grep(d.childNodes),function(a){if(a.nodeType==3)a.nodeValue=a.nodeValue.replace(/\uFEFF/g,
"")});d=b.get(a.id+"_"+c);)b.remove(d,1);l&&(h&&l.nodeType==h.nodeType&&3==l.nodeType&&!k.isOpera)&&(j=l.nodeValue.length,l.appendData(h.nodeValue),b.remove(h),"start"==c?(f=e=l,g=i=j):(e=l,i=j))}},h=function(a){b.isBlock(a)&&!a.innerHTML&&(a.innerHTML=!o?'<br data-mce-bogus="1" />':" ");return a};j("start");j("end");f&&(c=b.createRng(),c.setStart(h(f),g),c.setEnd(h(e),i),this.setRng(c))}else a.name?this.select(b.select(a.name)[a.index]):a.rng&&this.setRng(a.rng)},select:function(a,b){var c=this.dom,
d=c.createRng();a&&(c=c.nodeIndex(a),d.setStart(a.parentNode,c),d.setEnd(a.parentNode,c+1),b&&(c=function(a,c){var b=new k.dom.TreeWalker(a,a);do{if(3==a.nodeType&&0!=k.trim(a.nodeValue).length){c?d.setStart(a,0):d.setEnd(a,a.nodeValue.length);break}if("BR"==a.nodeName){c?d.setStartBefore(a):d.setEndBefore(a);break}}while(a=c?b.next():b.prev())},c(a,1),c(a)),this.setRng(d));return a},isCollapsed:function(){var a=this.getRng(),b=this.getSel();return!a||a.item?!1:a.compareEndPoints?0===a.compareEndPoints("StartToEnd",
a):!b||a.collapsed},collapse:function(a){var b=this.getRng(),c;b.item&&(c=b.item(0),b=this.win.document.body.createTextRange(),b.moveToElementText(c));b.collapse(!!a);this.setRng(b)},getSel:function(){var a=this.win;return a.getSelection?a.getSelection():a.document.selection},getRng:function(a){var b,c,d,f=this.win.document;if(a&&this.tridentSel)return this.tridentSel.getRangeAt(0);try{if(b=this.getSel())c=0<b.rangeCount?b.getRangeAt(0):b.createRange?b.createRange():f.createRange()}catch(e){}try{k.isIE&&
(c&&c.setStart&&f.selection&&f.selection.createRange().item)&&(d=f.selection.createRange().item(0),c=f.createRange(),c.setStartBefore(d),c.setEndAfter(d))}catch(g){}c||(c=f.createRange?f.createRange():f.body.createTextRange());this.selectedRange&&this.explicitRange&&(0===c.compareBoundaryPoints(c.START_TO_START,this.selectedRange)&&0===c.compareBoundaryPoints(c.END_TO_END,this.selectedRange)?c=this.explicitRange:this.explicitRange=this.selectedRange=null);return c},setRng:function(a){var b;if(this.tridentSel){if(a.cloneRange)try{this.tridentSel.addRange(a);
return}catch(c){AJS.logError("Exception occurred at tinymce setRng() - tridentSel.addRange(): "+c)}try{a.select()}catch(d){AJS.logError("Exception occurred at tinymce setRng() - select(): "+d)}}else if(b=this.getSel()){this.explicitRange=a;try{b.removeAllRanges()}catch(f){AJS.logError("Exception occurred at tinymce setRng() - removeAllRanges(): "+f)}try{b.addRange(a)}catch(e){AJS.logError("Exception occurred at tinymce setRng() - addRange(): "+e)}this.selectedRange=0<b.rangeCount?b.getRangeAt(0):
null}},setNode:function(a){this.setContent(this.dom.getOuterHTML(a));return a},getNode:function(){var a=this.getRng();this.getSel();var b,c=a.startContainer,d=a.endContainer;if(!a)return this.dom.getRoot();if(a.setStart){b=a.commonAncestorContainer;if(!a.collapsed&&(a.startContainer==a.endContainer&&2>a.endOffset-a.startOffset&&a.startContainer.hasChildNodes()&&(b=a.startContainer.childNodes[a.startOffset]),3===c.nodeType&&3===d.nodeType)){var f=function(a,c){for(var b=a;a&&3===a.nodeType&&0===a.length;)a=
c?a.nextSibling:a.previousSibling;return a||b},c=c.length===a.startOffset?f(c.nextSibling,!0):c.parentNode,d=0===a.endOffset?f(d.previousSibling,!1):d.parentNode;if(c&&c===d)return c}return b&&3==b.nodeType?b.parentNode:b}return a.item?a.item(0):a.parentElement()},getSelectedBlocks:function(a,b){var c=this.dom,d,f,e,g=[];d=c.getParent(a||this.getStart(),c.isBlock);f=c.getParent(b||this.getEnd(),c.isBlock);d&&g.push(d);if(d&&f&&d!=f){e=d;for(var i=new k.dom.TreeWalker(d,c.getRoot());(e=i.next())&&
e!=f;)c.isBlock(e)&&g.push(e)}f&&d!=f&&g.push(f);return g},normalize:function(){function a(a){var e,g,i,j=b.dom;i=j.getRoot();var h;e=c[(a?"start":"end")+"Container"];g=c[(a?"start":"end")+"Offset"];9===e.nodeType&&(e=e.body,g=0);if(e===i&&e.hasChildNodes()){e=e.childNodes[Math.min(!a&&0<g?g-1:g,e.childNodes.length-1)];g=0;if("TABLE"===e.nodeName)return;if(e.hasChildNodes()){h=e;i=new k.dom.TreeWalker(e,i);do{if(3===h.nodeType){g=a?0:h.nodeValue.length-1;e=h;d=!0;break}if(/^(BR|IMG)$/.test(h.nodeName)){g=
j.nodeIndex(h);e=h.parentNode;"IMG"==h.nodeName&&!a&&g++;d=!0;break}}while(h=a?i.next():i.prev())}}if(d)c["set"+(a?"Start":"End")](e,g)}var b=this,c,d;k.isIE||(c=b.getRng(),a(!0),c.collapsed&&d&&a(),d&&b.setRng(c))},destroy:function(a){this.win=null;a||k.removeUnload(this.destroy)},_fixIESelection:function(){function a(a,c){var b=e.createTextRange();try{b.moveToPoint(a,c)}catch(d){b=null}return b}function b(b){if(b.button){if(b=a(b.x,b.y))0<b.compareEndPoints("StartToStart",i)?b.setEndPoint("StartToStart",
i):b.setEndPoint("EndToEnd",i),b.select()}else c()}function c(){var a=f.selection?f.selection.createRange():tinyMCE.activeEditor.getBody().createTextRange();i&&(!a.item&&0===a.compareEndPoints("StartToEnd",a))&&i.select();d.unbind(f,"mouseup",c);d.unbind(f,"mousemove",b);i=g=0}var d=this.dom,f=d.doc,e=f.body,g,i,j;f.documentElement.unselectable=!0;d.bind(f,["mousedown","contextmenu"],function(e){if("HTML"===e.target.nodeName&&(g&&c(),j=f.documentElement,!(j.scrollHeight>j.clientHeight)&&(g=1,i=a(e.x,
e.y))))d.bind(f,"mouseup",c),d.bind(f,"mousemove",b),d.win.focus(),i.select()})}})})(tinymce);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.tinymce:atlassian-rte-javascript-tinymce-core', location = 'jscripts/tiny_mce/classes/dom/Serializer.js' */
(function(h){h.dom.Serializer=function(g,j,i){var k,l,m=h.each,f;g.apply_source_formatting||(g.indent=!1);j=j||h.DOM;i=i||new h.html.Schema(g);g.entity_encoding=g.entity_encoding||"named";g.remove_trailing_brs="remove_trailing_brs"in g?g.remove_trailing_brs:!0;k=new h.util.Dispatcher(self);l=new h.util.Dispatcher(self);f=new h.html.DomParser(g,i);f.addAttributeFilter("src,href,style",function(c,a){for(var b=c.length,d,e,f="data-mce-"+a,h=g.url_converter,i=g.url_converter_scope;b--;){d=c[b];e=d.attributes.map[f];
if(e!==void 0){d.attr(a,e.length>0?e:null);d.attr(f,null)}else{e=d.attributes.map[a];a==="style"?e=j.serializeStyle(j.parseStyle(e),d.name):h&&(e=h.call(i,e,a,d.name));d.attr(a,e.length>0?e:null)}}});f.addAttributeFilter("class",function(c){for(var a=c.length,b,d;a--;){b=c[a];d=b.attr("class").replace(/\s*mce(Item\w+|Selected)\s*/g,"");b.attr("class",d.length>0?d:null)}});f.addAttributeFilter("data-mce-type",function(c,a,b){for(var a=c.length,d;a--;){d=c[a];d.attributes.map["data-mce-type"]==="bookmark"&&
!b.cleanup&&d.remove()}});f.addNodeFilter("script,style",function(c,a){function b(a){return a.replace(/(<\!--\[CDATA\[|\]\]--\>)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<\!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<\!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<\!--|\/\*\s*<\!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(--\>)?|\s*\/\/\s*\]\]>(--\>)?|\/\/\s*(--\>)?|\]\]>|\/\*\s*--\>\s*\*\/|\s*--\>\s*)\s*$/g,"")}for(var d=c.length,e,f;d--;){e=c[d];f=e.firstChild?e.firstChild.value:
"";if(a==="script"){e.attr("type",(e.attr("type")||"text/javascript").replace(/^mce\-/,""));if(f.length>0)e.firstChild.value="// <![CDATA[\n"+b(f)+"\n// ]]\>"}else if(f.length>0)e.firstChild.value="<\!--\n"+b(f)+"\n--\>"}});f.addNodeFilter("#comment",function(c){for(var a=c.length,b;a--;){b=c[a];if(b.value.indexOf("[CDATA[")===0){b.name="#cdata";b.type=4;b.value=b.value.replace(/^\[CDATA\[|\]\]$/g,"")}else if(b.value.indexOf("mce:protected ")===0){b.name="#text";b.type=3;b.raw=true;b.value=unescape(b.value).substr(14)}}});
f.addNodeFilter("xml:namespace,input",function(c,a){for(var b=c.length,d;b--;){d=c[b];d.type===7?d.remove():d.type===1&&a==="input"&&!("type"in d.attributes.map)&&d.attr("type","text")}});g.fix_list_elements&&f.addNodeFilter("ul,ol",function(c){for(var a=c.length,b,d;a--;){b=c[a];d=b.parent;(d.name==="ul"||d.name==="ol")&&b.prev&&b.prev.name==="li"&&b.prev.append(b)}});f.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style",function(c,a){for(var b=c.length;b--;)c[b].attr(a,null)});return{schema:i,
addNodeFilter:f.addNodeFilter,addAttributeFilter:f.addAttributeFilter,onPreProcess:k,onPostProcess:l,serialize:function(c,a){var b,d,e,c=c.cloneNode(true);b=c.ownerDocument.implementation;if(b.createHTMLDocument){d=b.createHTMLDocument("");m(c.nodeName=="BODY"?c.childNodes:[c],function(a){d.body.appendChild(d.importNode(a,true))});c=c.nodeName!="BODY"?d.body.firstChild:d.body;e=j.doc;j.doc=d}a=a||{};a.format=a.format||"html";if(!a.no_events){a.node=c;k.dispatch(self,a)}b=new h.html.Serializer(g,i);
a.content=b.serialize(f.parse(a.getInner?c.innerHTML:h.trim(j.getOuterHTML(c),a),a));if(!a.cleanup)a.content=a.content.replace(/\uFEFF|\u200B/g,"");a.no_events||l.dispatch(self,a);if(e)j.doc=e;a.node=null;return a.content},addRules:function(c){i.addValidElements(c)},setRules:function(c){i.setValidElements(c)}}}})(tinymce);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.tinymce:atlassian-rte-javascript-tinymce-core', location = 'jscripts/tiny_mce/classes/dom/ScriptLoader.js' */
(function(a){a.dom.ScriptLoader=function(){var b={},h=[],c={},d=[],j=0;this.isDone=function(a){return 2==b[a]};this.markDone=function(a){b[a]=2};this.add=this.load=function(a,f,d){void 0==b[a]&&(h.push(a),b[a]=0);f&&(c[a]||(c[a]=[]),c[a].push({func:f,scope:d||this}))};this.loadQueue=function(a,b){this.loadScripts(h,a,b)};this.loadScripts=function(h,f,n){function m(b){a.each(c[b],function(a){a.func.call(a.scope)});c[b]=void 0}var k;d.push({func:f,scope:n||this});k=function(){var c=a.grep(h);h.length=
0;a.each(c,function(g){if(2==b[g])m(g);else if(1!=b[g]){b[g]=1;j++;a:{var c=function(){d.remove(l);e&&(e.onreadystatechange=e.onload=e=null);b[g]=2;j--;m(g);k()},h=function(){AJS.log("Failed to load: "+g)},d=a.DOM,e,i,f,l;l=d.uniqueId();if(a.isIE6&&(i=new a.util.URI(g),f=location,i.host==f.hostname&&i.port==f.port&&i.protocol+":"==f.protocol&&"file"!=i.protocol.toLowerCase())){a.util.XHR.send({url:a._addVer(i.getURI()),success:function(a){var b=d.create("script",{type:"text/javascript"});b.text=a;
document.getElementsByTagName("head")[0].appendChild(b);d.remove(b);c()},error:h});break a}e=d.create("script",{id:l,type:"text/javascript",src:a._addVer(g)});a.isIE||(e.onload=c);e.onerror=h;a.isOpera||(e.onreadystatechange=function(){var a=e.readyState;(a=="complete"||a=="loaded")&&c()});(document.getElementsByTagName("head")[0]||document.body).appendChild(e)}}});j||(a.each(d,function(a){a.func.call(a.scope)}),d.length=0)};k()}};a.ScriptLoader=new a.dom.ScriptLoader})(tinymce);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.tinymce:atlassian-rte-javascript-tinymce-core', location = 'jscripts/tiny_mce/classes/dom/TreeWalker.js' */
tinymce.dom.TreeWalker=function(f,e){function d(a,c,b,d){if(a){if(!d&&a[c])return a[c];if(a!=e){if(c=a[b])return c;for(a=a.parentNode;a&&a!=e;a=a.parentNode)if(c=a[b])return c}}}var b=f;this.current=function(){return b};this.next=function(a){return b=d(b,"firstChild","nextSibling",a)};this.prev=function(a){return b=d(b,"lastChild","previousSibling",a)}};
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.tinymce:atlassian-rte-javascript-tinymce-core', location = 'jscripts/tiny_mce/classes/dom/RangeUtils.js' */
(function(l){l.dom.RangeUtils=function(c){this.walk=function(a,d){function e(a){var b;b=a[0];3===b.nodeType&&(b===g&&n>=b.nodeValue.length)&&a.splice(0,1);b=a[a.length-1];0===o&&(0<a.length&&b===f&&3===b.nodeType)&&a.splice(a.length-1,1);return a}function p(a,b,d){for(var e=[];a&&a!=d;a=a[b])e.push(a);return e}function q(a,b){do{if(a.parentNode==b)return a;a=a.parentNode}while(a)}function k(a,g,f){var c=f?"nextSibling":"previousSibling";b=a;for(m=b.parentNode;b&&b!=g;b=m)m=b.parentNode,j=p(b==a?b:
b[c],c),j.length&&(f||j.reverse(),d(e(j)))}var g=a.startContainer,n=a.startOffset,f=a.endContainer,o=a.endOffset,h,i,b,m,j;i=c.select("td.mceSelected,th.mceSelected");if(0<i.length)l.each(i,function(a){d([a])});else{1==g.nodeType&&g.hasChildNodes()&&(g=g.childNodes[n]);1==f.nodeType&&f.hasChildNodes()&&(f=f.childNodes[Math.min(o-1,f.childNodes.length-1)]);if(g==f)return d(e([g]));h=c.findCommonAncestor(g,f);for(b=g;b;b=b.parentNode){if(b===f)return k(g,h,!0);if(b===h)break}for(b=f;b;b=b.parentNode){if(b===
g)return k(f,h);if(b===h)break}i=q(g,h)||g;h=q(f,h)||f;k(g,i,!0);j=p(i==g?i:i.nextSibling,"nextSibling",h==f?h.nextSibling:h);j.length&&d(e(j));k(f,h)}};this.split=function(a){var d=a.startContainer,e=a.startOffset,c=a.endContainer,a=a.endOffset;if(d==c&&3==d.nodeType)0<e&&e<d.nodeValue.length&&(c=d.splitText(e),d=c.previousSibling,a>e?(d=c=c.splitText(a-e).previousSibling,a=c.nodeValue.length,e=0):a=0);else if(3==d.nodeType&&(0<e&&e<d.nodeValue.length)&&(d=d.splitText(e),e=0),3==c.nodeType&&0<a&&
a<c.nodeValue.length)c=c.splitText(a).previousSibling,a=c.nodeValue.length;return{startContainer:d,startOffset:e,endContainer:c,endOffset:a}}};l.dom.RangeUtils.compareRanges=function(c,a){if(c&&a)if(c.item||c.duplicate){if(c.item&&a.item&&c.item(0)===a.item(0)||c.isEqual&&a.isEqual&&a.isEqual(c))return!0}else return c.startContainer==a.startContainer&&c.startOffset==a.startOffset;return!1}})(tinymce);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.tinymce:atlassian-rte-javascript-tinymce-core', location = 'jscripts/tiny_mce/classes/ui/KeyboardNavigation.js' */
(function(i){var n=i.dom.Event,o=i.each;i.create("tinymce.ui.KeyboardNavigation",{KeyboardNavigation:function(d,a){var c=this,e=d.root,f=d.items,p=d.enableUpDown,q=d.enableLeftRight||!d.enableUpDown,r=d.excludeFromTabOrder,j,k,l,m,g,a=a||i.DOM;j=function(a){g=a.target.id};k=function(b){a.setAttrib(b.target.id,"tabindex","-1")};m=function(){var b=a.get(g);a.setAttrib(b,"tabindex","0");b.focus()};c.focus=function(){a.get(g).focus()};c.destroy=function(){o(f,function(b){a.unbind(a.get(b.id),"focus",
j);a.unbind(a.get(b.id),"blur",k)});a.unbind(a.get(e),"focus",m);a.unbind(a.get(e),"keydown",l);f=a=e=c.focus=j=k=l=m=null;c.destroy=function(){}};c.moveFocus=function(b,c){var h=-1,e;if(g){o(f,function(a,b){if(a.id===g)return h=b,!1});h+=b;0>h?h=f.length-1:h>=f.length&&(h=0);e=f[h];a.setAttrib(g,"tabindex","-1");a.setAttrib(e.id,"tabindex","0");a.get(e.id).focus();if(d.actOnFocus)d.onAction(e.id);c&&n.cancel(c)}};l=function(a){switch(a.keyCode){case 37:q&&c.moveFocus(-1);break;case 39:q&&c.moveFocus(1);
break;case 38:p&&c.moveFocus(-1);break;case 40:p&&c.moveFocus(1);break;case 27:d.onCancel&&(d.onCancel(),n.cancel(a));break;case 14:case 13:case 32:d.onAction&&(d.onAction(g),n.cancel(a))}};o(f,function(b,d){var c;b.id||(b.id=a.uniqueId("_mce_item_"));r?(a.bind(b.id,"blur",k),c="-1"):c=0===d?"0":"-1";a.setAttrib(b.id,"tabindex",c);a.bind(a.get(b.id),"focus",j)});f[0]&&(g=f[0].id);a.setAttrib(e,"tabindex","-1");a.bind(a.get(e),"focus",m);a.bind(a.get(e),"keydown",l)}})})(tinymce);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.tinymce:atlassian-rte-javascript-tinymce-core', location = 'jscripts/tiny_mce/classes/ui/Control.js' */
(function(c){var b=c.DOM,e=c.is;c.create("tinymce.ui.Control",{Control:function(a,b,d){this.id=a;this.settings=b=b||{};this.rendered=!1;this.onRender=new c.util.Dispatcher(this);this.classPrefix="";this.scope=b.scope||this;this.active=this.disabled=0;this.editor=d},setAriaProperty:function(a,c){var d=b.get(this.id+"_aria")||b.get(this.id);d&&b.setAttrib(d,"aria-"+a,!!c)},focus:function(){b.get(this.id).focus()},setDisabled:function(a){a!=this.disabled&&(this.setAriaProperty("disabled",a),this.setState("Disabled",
a),this.setState("Enabled",!a),this.disabled=a)},isDisabled:function(){return this.disabled},setActive:function(a){a!=this.active&&(this.setState("Active",a),this.active=a,this.setAriaProperty("pressed",a))},isActive:function(){return this.active},setState:function(a,c){var d=b.get(this.id),a=this.classPrefix+a;c?b.addClass(d,a):b.removeClass(d,a)},isRendered:function(){return this.rendered},renderHTML:function(){},renderTo:function(a){b.setHTML(a,this.renderHTML())},postRender:function(){var a;e(this.disabled)&&
(a=this.disabled,this.disabled=-1,this.setDisabled(a));e(this.active)&&(a=this.active,this.active=-1,this.setActive(a))},remove:function(){b.remove(this.id);this.destroy()},destroy:function(){c.dom.Event.clear(this.id)}})})(tinymce);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.tinymce:atlassian-rte-javascript-tinymce-core', location = 'jscripts/tiny_mce/classes/ui/Container.js' */
tinymce.create("tinymce.ui.Container:tinymce.ui.Control",{Container:function(a,b,c){this.parent(a,b,c);this.controls=[];this.lookup={}},add:function(a){this.lookup[a.id]=a;this.controls.push(a);return a},get:function(a){return this.lookup[a]}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.tinymce:atlassian-rte-javascript-tinymce-core', location = 'jscripts/tiny_mce/classes/ui/Separator.js' */
tinymce.create("tinymce.ui.Separator:tinymce.ui.Control",{Separator:function(a,b){this.parent(a,b);this.classPrefix="mceSeparator";this.setDisabled(!0)},renderHTML:function(){return tinymce.DOM.createHTML("span",{"class":this.classPrefix,role:"separator","aria-orientation":"vertical",tabindex:"-1"})}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.tinymce:atlassian-rte-javascript-tinymce-core', location = 'jscripts/tiny_mce/classes/ui/MenuItem.js' */
(function(b){var c=b.is;b.create("tinymce.ui.MenuItem:tinymce.ui.Control",{MenuItem:function(a,b){this.parent(a,b);this.classPrefix="mceMenuItem"},setSelected:function(a){this.setState("Selected",a);this.setAriaProperty("checked",!!a);this.selected=a},isSelected:function(){return this.selected},postRender:function(){this.parent();c(this.selected)&&this.setSelected(this.selected)}})})(tinymce);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.tinymce:atlassian-rte-javascript-tinymce-core', location = 'jscripts/tiny_mce/classes/ui/Menu.js' */
(function(b){var d=b.DOM,c=b.walk;b.create("tinymce.ui.Menu:tinymce.ui.MenuItem",{Menu:function(a,e){this.parent(a,e);this.items={};this.collapsed=!1;this.menuCount=0;this.onAddItem=new b.util.Dispatcher(this)},expand:function(a){a&&c(this,function(a){a.expand&&a.expand()},"items",this);this.collapsed=!1},collapse:function(a){a&&c(this,function(a){a.collapse&&a.collapse()},"items",this);this.collapsed=!0},isCollapsed:function(){return this.collapsed},add:function(a){a.settings||(a=new b.ui.MenuItem(a.id||
d.uniqueId(),a));this.onAddItem.dispatch(this,a);return this.items[a.id]=a},addSeparator:function(){return this.add({separator:!0})},addMenu:function(a){a.collapse||(a=this.createMenu(a));this.menuCount++;return this.add(a)},hasMenus:function(){return 0!==this.menuCount},remove:function(a){delete this.items[a.id]},removeAll:function(){c(this,function(a){a.removeAll?a.removeAll():a.remove();a.destroy()},"items",this);this.items={}},createMenu:function(a){a=new b.ui.Menu(a.id||d.uniqueId(),a);a.onAddItem.add(this.onAddItem.dispatch,
this.onAddItem);return a}})})(tinymce);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.tinymce:atlassian-rte-javascript-tinymce-core', location = 'jscripts/tiny_mce/classes/ui/DropMenu.js' */
(function(j){var r=j.is,c=j.DOM,p=j.each,h=j.dom.Event,q=j.dom.Element;j.create("tinymce.ui.DropMenu:tinymce.ui.Menu",{DropMenu:function(a,b){b=b||{};b.container=b.container||c.doc.body;b.offset_x=b.offset_x||0;b.offset_y=b.offset_y||0;b.vp_offset_x=b.vp_offset_x||0;b.vp_offset_y=b.vp_offset_y||0;r(b.icons)&&!b.icons&&(b["class"]+=" mceNoIcons");this.parent(a,b);this.onShowMenu=new j.util.Dispatcher(this);this.onHideMenu=new j.util.Dispatcher(this);this.classPrefix="mceMenu"},createMenu:function(a){var b=
this.settings;a.container=a.container||b.container;a.parent=this;a.constrain=a.constrain||b.constrain;a["class"]=a["class"]||b["class"];a.vp_offset_x=a.vp_offset_x||b.vp_offset_x;a.vp_offset_y=a.vp_offset_y||b.vp_offset_y;a.keyboard_focus=b.keyboard_focus;a=new j.ui.DropMenu(a.id||c.uniqueId(),a);a.onAddItem.add(this.onAddItem.dispatch,this.onAddItem);return a},focus:function(){this.keyboardNav&&this.keyboardNav.focus()},update:function(){var a=this.settings,b=c.get("menu_"+this.id+"_tbl"),e=c.get("menu_"+
this.id+"_co"),d,f;d=a.max_width?Math.min(b.clientWidth,a.max_width):b.clientWidth;f=a.max_height?Math.min(b.clientHeight,a.max_height):b.clientHeight;c.boxModel?this.element.setStyles({width:d,height:f}):this.element.setStyles({width:d+2,height:f+2});a.max_width&&c.setStyle(e,"width",d);a.max_height&&(c.setStyle(e,"height",f),b.clientHeight<a.max_height&&c.setStyle(e,"overflow","hidden"))},showMenu:function(a,b,e){var d=this,f=d.settings,g,i=c.getViewPort(),l,m,n,k,o=d.classPrefix;d.collapse(1);
d.isMenuVisible||(d.rendered?g=c.get("menu_"+d.id):(g=c.add(d.settings.container,d.renderNode()),p(d.items,function(a){a.postRender()}),d.element=new q("menu_"+d.id,{blocker:1,container:f.container})),j.isOpera||c.setStyles(g,{left:-65535,top:-65535}),c.show(g),d.update(),a+=f.offset_x||0,b+=f.offset_y||0,i.w-=4,i.h-=4,f.constrain&&(l=g.clientWidth-2,m=g.clientHeight-2,n=i.x+i.w,i=i.y+i.h,a+f.vp_offset_x+l>n&&(a=e?e-l:Math.max(0,n-f.vp_offset_x-l)),b+f.vp_offset_y+m>i&&(b=Math.max(0,i-f.vp_offset_y-
m))),c.setStyles(g,{left:a,top:b}),d.element.update(),d.isMenuVisible=1,d.mouseClickFunc=h.add(g,"click",function(a){var b;if((a=a.target)&&(a=c.getParent(a,"tr"))&&!c.hasClass(a,o+"ItemSub")){b=d.items[a.id];if(!b.isDisabled()){for(k=d;k;){k.hideMenu&&k.hideMenu();k=k.settings.parent}if(b.settings.onclick)b.settings.onclick(a);return h.cancel(a)}}}),d.hasMenus()&&(d.mouseOverFunc=h.add(g,"mouseover",function(a){var b;if((a=a.target)&&(a=c.getParent(a,"tr"))){b=d.items[a.id];d.lastMenu&&d.lastMenu.collapse(1);
if(!b.isDisabled()&&a&&c.hasClass(a,o+"ItemSub")){a=c.getRect(a);b.showMenu(a.x+a.w-2,a.y-2,a.x);d.lastMenu=b;c.addClass(c.get(b.id).firstChild,o+"ItemActive")}}})),h.add(g,"keydown",d._keyHandler,d),d.onShowMenu.dispatch(d),f.keyboard_focus&&d._setupKeyboardNav())},hideMenu:function(a){var b=c.get("menu_"+this.id),e;this.isMenuVisible&&(this.keyboardNav&&this.keyboardNav.destroy(),h.remove(b,"mouseover",this.mouseOverFunc),h.remove(b,"click",this.mouseClickFunc),h.remove(b,"keydown",this._keyHandler),
c.hide(b),this.isMenuVisible=0,a||this.collapse(1),this.element&&this.element.hide(),(e=c.get(this.id))&&c.removeClass(e.firstChild,this.classPrefix+"ItemActive"),this.onHideMenu.dispatch(this))},add:function(a){var b,a=this.parent(a);this.isRendered&&(b=c.get("menu_"+this.id))&&this._add(c.select("tbody",b)[0],a);return a},collapse:function(a){this.parent(a);this.hideMenu(1)},remove:function(a){c.remove(a.id);this.destroy();return this.parent(a)},destroy:function(){var a=c.get("menu_"+this.id);this.keyboardNav&&
this.keyboardNav.destroy();h.remove(a,"mouseover",this.mouseOverFunc);h.remove(c.select("a",a),"focus",this.mouseOverFunc);h.remove(a,"click",this.mouseClickFunc);h.remove(a,"keydown",this._keyHandler);this.element&&this.element.remove();c.remove(a)},renderNode:function(){var a=this,b=a.settings,e,d,f;f=c.create("div",{role:"listbox",id:"menu_"+a.id,"class":b["class"],style:"position:absolute;left:0;top:0;z-index:200000;outline:0"});a.settings.parent&&c.setAttrib(f,"aria-parent","menu_"+a.settings.parent.id);
d=c.add(f,"div",{role:"presentation",id:"menu_"+a.id+"_co","class":a.classPrefix+(b["class"]?" "+b["class"]:"")});a.element=new q("menu_"+a.id,{blocker:1,container:b.container});b.menu_line&&c.add(d,"span",{"class":a.classPrefix+"Line"});b=c.add(d,"table",{role:"presentation",id:"menu_"+a.id+"_tbl",border:0,cellPadding:0,cellSpacing:0});e=c.add(b,"tbody");p(a.items,function(b){a._add(e,b)});a.rendered=!0;return f},_setupKeyboardNav:function(){var a,b,e=this;a=c.get("menu_"+e.id);b=c.select("a[role=option]",
"menu_"+e.id);b.splice(0,0,a);e.keyboardNav=new j.ui.KeyboardNavigation({root:"menu_"+e.id,items:b,onCancel:function(){e.hideMenu()},enableUpDown:!0});a.focus()},_keyHandler:function(a){switch(a.keyCode){case 37:this.settings.parent&&(this.hideMenu(),this.settings.parent.focus(),h.cancel(a));break;case 39:this.mouseOverFunc&&this.mouseOverFunc(a)}},_add:function(a,b){var e,d=b.settings,f,g,i,h=this.classPrefix;d.separator?(g=c.add(a,"tr",{id:b.id,"class":h+"ItemSeparator"}),c.add(g,"td",{"class":h+
"ItemSeparator"}),(e=g.previousSibling)&&c.addClass(e,"mceLast")):(e=g=c.add(a,"tr",{id:b.id,"class":h+"Item "+h+"ItemEnabled"}),e=i=c.add(e,d.titleItem?"th":"td"),e=f=c.add(e,"a",{id:b.id+"_aria",role:d.titleItem?"presentation":"option",href:"javascript:;",onclick:"return false;",onmousedown:"return false;"}),d.parent&&(c.setAttrib(f,"aria-haspopup","true"),c.setAttrib(f,"aria-owns","menu_"+b.id)),c.addClass(i,d["class"]),f=c.add(e,"span",{"class":"mceIcon"+(d.icon?" mce_"+d.icon:"")}),d.icon_src&&
c.add(f,"img",{src:d.icon_src}),e=c.add(e,d.element||"span",{"class":"mceText",title:b.settings.title},b.settings.title),b.settings.style&&c.setAttrib(e,"style",b.settings.style),1==a.childNodes.length&&c.addClass(g,"mceFirst"),(e=g.previousSibling)&&c.hasClass(e,h+"ItemSeparator")&&c.addClass(g,"mceFirst"),b.collapse&&c.addClass(g,h+"ItemSub"),(e=g.previousSibling)&&c.removeClass(e,"mceLast"),c.addClass(g,"mceLast"))}})})(tinymce);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.tinymce:atlassian-rte-javascript-tinymce-core', location = 'jscripts/tiny_mce/classes/ui/Button.js' */
(function(d){var f=d.DOM;d.create("tinymce.ui.Button:tinymce.ui.Control",{Button:function(a,c,b){this.parent(a,c,b);this.classPrefix="mceButton"},renderHTML:function(){var a=this.classPrefix,c=this.settings,b,e;e=f.encode(c.label||"");b='<a role="button" id="'+this.id+'" href="javascript:;" class="'+a+" "+a+"Enabled "+c["class"]+(e?" "+a+"Labeled":"")+'" onmousedown="return false;" onclick="return false;" aria-labelledby="'+this.id+'_voice" title="'+f.encode(c.title)+'">';b=c.image&&(!this.editor||
!this.editor.forcedHighContrastMode)?b+('<img class="mceIcon" src="'+c.image+'" alt="'+f.encode(c.title)+'" />'+e):b+('<span class="mceIcon '+c["class"]+'"></span>'+(e?'<span class="'+a+'Label">'+e+"</span>":""));b+='<span class="mceVoiceLabel mceIconOnly" style="display: none;" id="'+this.id+'_voice">'+c.title+"</span>";return b+"</a>"},postRender:function(){var a=this,c=a.settings,b;d.isIE&&a.editor&&d.dom.Event.add(a.id,"mousedown",function(){b="IMG"===a.editor.selection.getNode().nodeName?a.editor.selection.getBookmark():
null});d.dom.Event.add(a.id,"click",function(e){if(!a.isDisabled())return d.isIE&&(a.editor&&null!==b)&&a.editor.selection.moveToBookmark(b),c.onclick.call(c.scope,e)});d.dom.Event.add(a.id,"keyup",function(b){if(!a.isDisabled()&&b.keyCode==d.VK.SPACEBAR)return c.onclick.call(c.scope,b)})}})})(tinymce);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.tinymce:atlassian-rte-javascript-tinymce-core', location = 'jscripts/tiny_mce/classes/ui/ListBox.js' */
(function(f){var c=f.DOM,e=f.dom.Event,h=f.each,i=f.util.Dispatcher;f.create("tinymce.ui.ListBox:tinymce.ui.Control",{ListBox:function(a,d,b){this.parent(a,d,b);this.items=[];this.onChange=new i(this);this.onPostRender=new i(this);this.onAdd=new i(this);this.onRenderMenu=new f.util.Dispatcher(this);this.classPrefix="mceListBox"},select:function(a){var d=this,b,c;if(void 0==a)return d.selectByIndex(-1);c=a&&"function"==typeof a?a:function(b){return b==a};a!=d.selectedValue&&(h(d.items,function(a,e){if(c(a.value))return b=
1,d.selectByIndex(e),!1}),b||d.selectByIndex(-1))},selectByIndex:function(a){var d,b,e;a!=this.selectedIndex&&(d=c.get(this.id+"_text"),e=c.get(this.id+"_voiceDesc"),(b=this.items[a])?(this.selectedValue=b.value,this.selectedIndex=a,c.setHTML(d,c.encode(b.title)),c.setHTML(e,this.settings.title+" - "+b.title),c.removeClass(d,"mceTitle"),c.setAttrib(this.id,"aria-valuenow",b.title)):(c.setHTML(d,c.encode(this.settings.title)),c.setHTML(e,c.encode(this.settings.title)),c.addClass(d,"mceTitle"),this.selectedValue=
this.selectedIndex=null,c.setAttrib(this.id,"aria-valuenow",this.settings.title)))},add:function(a,c,b){b=b||{};b=f.extend(b,{title:a,value:c});this.items.push(b);this.onAdd.dispatch(this,b)},getLength:function(){return this.items.length},renderHTML:function(){var a="",a=this.settings,d=this.classPrefix,a='<span role="listbox" aria-haspopup="true" aria-labelledby="'+this.id+'_voiceDesc" aria-describedby="'+this.id+'_voiceDesc"><table role="presentation" tabindex="0" id="'+this.id+'" cellpadding="0" cellspacing="0" class="'+
d+" "+d+"Enabled"+(a["class"]?" "+a["class"]:"")+'"><tbody><tr>',a=a+("<td>"+c.createHTML("span",{id:this.id+"_voiceDesc","class":"voiceLabel",style:"display:none;"},this.settings.title)),a=a+(c.createHTML("a",{id:this.id+"_text",tabindex:-1,href:"javascript:;","class":"mceText",onclick:"return false;",onmousedown:"return false;"},c.encode(this.settings.title))+"</td>"),a=a+("<td>"+c.createHTML("a",{id:this.id+"_open",tabindex:-1,href:"javascript:;","class":"mceOpen",onclick:"return false;",onmousedown:"return false;"},
'<span><span style="display:none;" class="mceIconOnly" aria-hidden="true">▼</span></span>')+"</td>");return a+"</tr></tbody></table></span>"},showMenu:function(){var a=this,d,b=c.get(this.id),g;if(!(a.isDisabled()||0==a.items.length)){if(a.menu&&a.menu.isMenuVisible)return a.hideMenu();a.isMenuRendered||(a.renderMenu(),a.isMenuRendered=!0);d=c.getPos(b);g=a.menu;g.settings.offset_x=d.x;g.settings.offset_y=d.y;g.settings.keyboard_focus=!f.isOpera;a.oldID&&g.items[a.oldID].setSelected(0);h(a.items,
function(b){if(b.value===a.selectedValue){g.items[b.id].setSelected(1);a.oldID=b.id}});g.showMenu(0,b.clientHeight);e.add(c.doc,"mousedown",a.hideMenu,a);c.addClass(a.id,a.classPrefix+"Selected")}},hideMenu:function(a){if(this.menu&&this.menu.isMenuVisible&&(c.removeClass(this.id,this.classPrefix+"Selected"),!a||!("mousedown"==a.type&&(a.target.id==this.id+"_text"||a.target.id==this.id+"_open"))))if(!a||!c.getParent(a.target,".mceMenu"))c.removeClass(this.id,this.classPrefix+"Selected"),e.remove(c.doc,
"mousedown",this.hideMenu,this),this.menu.hideMenu()},renderMenu:function(){var a=this,d;d=a.settings.control_manager.createDropMenu(a.id+"_menu",{menu_line:1,"class":a.classPrefix+"Menu mceNoIcons",max_width:150,max_height:150});d.onHideMenu.add(function(){a.hideMenu();a.focus()});d.add({title:a.settings.title,"class":"mceMenuItemTitle",onclick:function(){!1!==a.settings.onselect("")&&a.select("")}});h(a.items,function(b){void 0===b.value?d.add({title:b.title,role:"option","class":"mceMenuItemTitle",
onclick:function(){!1!==a.settings.onselect("")&&a.select("")}}):(b.id=c.uniqueId(),b.role="option",b.onclick=function(){!1!==a.settings.onselect(b.value)&&a.select(b.value)},d.add(b))});a.onRenderMenu.dispatch(a,d);a.menu=d},postRender:function(){var a=this,d=a.classPrefix;e.add(a.id,"click",a.showMenu,a);e.add(a.id,"keydown",function(b){32==b.keyCode&&(a.showMenu(b),e.cancel(b))});e.add(a.id,"focus",function(){a._focused||(a.keyDownHandler=e.add(a.id,"keydown",function(b){40==b.keyCode&&(a.showMenu(),
e.cancel(b))}),a.keyPressHandler=e.add(a.id,"keypress",function(b){var c;13==b.keyCode&&(c=a.selectedValue,a.selectedValue=null,e.cancel(b),a.settings.onselect(c))}));a._focused=1});e.add(a.id,"blur",function(){e.remove(a.id,"keydown",a.keyDownHandler);e.remove(a.id,"keypress",a.keyPressHandler);a._focused=0});if(f.isIE6||!c.boxModel)e.add(a.id,"mouseover",function(){c.hasClass(a.id,d+"Disabled")||c.addClass(a.id,d+"Hover")}),e.add(a.id,"mouseout",function(){c.hasClass(a.id,d+"Disabled")||c.removeClass(a.id,
d+"Hover")});a.onPostRender.dispatch(a,c.get(a.id))},destroy:function(){this.parent();e.clear(this.id+"_text");e.clear(this.id+"_open")}})})(tinymce);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.tinymce:atlassian-rte-javascript-tinymce-core', location = 'jscripts/tiny_mce/classes/ui/NativeListBox.js' */
(function(f){var c=f.DOM,e=f.dom.Event,g=f.each;f.create("tinymce.ui.NativeListBox:tinymce.ui.ListBox",{NativeListBox:function(a,b){this.parent(a,b);this.classPrefix="mceNativeListBox"},setDisabled:function(a){c.get(this.id).disabled=a;this.setAriaProperty("disabled",a)},isDisabled:function(){return c.get(this.id).disabled},select:function(a){var b=this,d,h;if(void 0==a)return b.selectByIndex(-1);h=a&&"function"==typeof a?a:function(b){return b==a};a!=b.selectedValue&&(g(b.items,function(a,c){if(h(a.value))return d=
1,b.selectByIndex(c),!1}),d||b.selectByIndex(-1))},selectByIndex:function(a){c.get(this.id).selectedIndex=a+1;this.selectedValue=this.items[a]?this.items[a].value:null},add:function(a,b,d){d=d||{};d.value=b;this.isRendered()&&c.add(c.get(this.id),"option",d,a);a={title:a,value:b,attribs:d};this.items.push(a);this.onAdd.dispatch(this,a)},getLength:function(){return this.items.length},renderHTML:function(){var a;a=c.createHTML("option",{value:""},"-- "+this.settings.title+" --");g(this.items,function(b){a+=
c.createHTML("option",{value:b.value},b.title)});a=c.createHTML("select",{id:this.id,"class":"mceNativeListBox","aria-labelledby":this.id+"_aria"},a);return a+=c.createHTML("span",{id:this.id+"_aria",style:"display: none"},this.settings.title)},postRender:function(){function a(a){if((a=b.items[a.target.selectedIndex-1])&&(a=a.value))if(b.onChange.dispatch(b,a),b.settings.onselect)b.settings.onselect(a)}var b=this,d=!0;b.rendered=!0;e.add(b.id,"change",a);e.add(b.id,"keydown",function(c){var g;e.remove(b.id,
"change",void 0);d=!1;g=e.add(b.id,"blur",function(){d||(d=!0,e.add(b.id,"change",a),e.remove(b.id,"blur",g))});if(f.isWebKit&&(37==c.keyCode||39==c.keyCode))return e.prevent(c);if(13==c.keyCode||32==c.keyCode)return a(c),e.cancel(c)});b.onPostRender.dispatch(b,c.get(b.id))}})})(tinymce);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.tinymce:atlassian-rte-javascript-tinymce-core', location = 'jscripts/tiny_mce/classes/ui/MenuButton.js' */
(function(e){var d=e.DOM,f=e.dom.Event;e.create("tinymce.ui.MenuButton:tinymce.ui.Button",{MenuButton:function(a,b,c){this.parent(a,b,c);this.onRenderMenu=new e.util.Dispatcher(this);b.menu_container=b.menu_container||d.doc.body},showMenu:function(){var a,b=d.get(this.id),c;if(!this.isDisabled()){this.isMenuRendered||(this.renderMenu(),this.isMenuRendered=!0);if(this.isMenuVisible)return this.hideMenu();d.getPos(this.settings.menu_container);a=d.getPos(b);c=this.menu;c.settings.offset_x=a.x;c.settings.offset_y=
a.y;c.settings.vp_offset_x=a.x;c.settings.vp_offset_y=a.y;c.settings.keyboard_focus=this._focused;c.showMenu(0,b.clientHeight);f.add(d.doc,"mousedown",this.hideMenu,this);this.setState("Selected",1);this.isMenuVisible=1}},renderMenu:function(){var a=this,b;b=a.settings.control_manager.createDropMenu(a.id+"_menu",{menu_line:1,"class":this.classPrefix+"Menu",icons:a.settings.icons});b.onHideMenu.add(function(){a.hideMenu();a.focus()});a.onRenderMenu.dispatch(a,b);a.menu=b},hideMenu:function(a){var b=
this;if(!a||!("mousedown"==a.type&&d.getParent(a.target,function(a){return a.id===b.id||a.id===b.id+"_open"}))){if(!a||!d.getParent(a.target,".mceMenu"))b.setState("Selected",0),f.remove(d.doc,"mousedown",b.hideMenu,b),b.menu&&b.menu.hideMenu();b.isMenuVisible=0}},postRender:function(){var a=this,b=a.settings;f.add(a.id,"click",function(){if(!a.isDisabled()){if(b.onclick)b.onclick(a.value);a.showMenu()}})}})})(tinymce);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.tinymce:atlassian-rte-javascript-tinymce-core', location = 'jscripts/tiny_mce/classes/ui/SplitButton.js' */
(function(e){var d=e.DOM,c=e.dom.Event;e.create("tinymce.ui.SplitButton:tinymce.ui.MenuButton",{SplitButton:function(a,b,c){this.parent(a,b,c);this.classPrefix="mceSplitButton"},renderHTML:function(){var a,b=this.settings,c;a="<tbody><tr>";c=b.image?d.createHTML("img ",{src:b.image,role:"presentation","class":"mceAction "+b["class"]}):d.createHTML("span",{"class":"mceAction "+b["class"]},"");c+=d.createHTML("span",{"class":"mceVoiceLabel mceIconOnly",id:this.id+"_voice",style:"display:none;"},b.title);
a+="<td >"+d.createHTML("a",{role:"button",id:this.id+"_action",tabindex:"-1",href:"javascript:;","class":"mceAction "+b["class"],onclick:"return false;",onmousedown:"return false;",title:b.title},c)+"</td>";c=d.createHTML("span",{"class":"mceOpen "+b["class"]},'<span style="display:none;" class="mceIconOnly" aria-hidden="true">▼</span>');a+="<td >"+d.createHTML("a",{role:"button",id:this.id+"_open",tabindex:"-1",href:"javascript:;","class":"mceOpen "+b["class"],onclick:"return false;",onmousedown:"return false;",
title:b.title},c)+"</td>";a=d.createHTML("table",{role:"presentation","class":"mceSplitButton mceSplitButtonEnabled "+b["class"],cellpadding:"0",cellspacing:"0",title:b.title},a+"</tr></tbody>");return d.createHTML("div",{id:this.id,role:"button",tabindex:"0","aria-labelledby":this.id+"_voice","aria-haspopup":"true"},a)},postRender:function(){var a=this,b=a.settings,f;b.onclick&&(f=function(g){a.isDisabled()||(b.onclick(a.value),c.cancel(g))},c.add(a.id+"_action","click",f),c.add(a.id,["click","keydown"],
function(b){if((32===b.keyCode||13===b.keyCode||14===b.keyCode)&&!b.altKey&&!b.ctrlKey&&!b.metaKey)f(),c.cancel(b);else if("click"===b.type||40===b.keyCode)a.showMenu(),c.cancel(b)}));c.add(a.id+"_open","click",function(b){a.showMenu();c.cancel(b)});c.add([a.id,a.id+"_open"],"focus",function(){a._focused=1});c.add([a.id,a.id+"_open"],"blur",function(){a._focused=0});if(e.isIE6||!d.boxModel)c.add(a.id,"mouseover",function(){d.hasClass(a.id,"mceSplitButtonDisabled")||d.addClass(a.id,"mceSplitButtonHover")}),
c.add(a.id,"mouseout",function(){d.hasClass(a.id,"mceSplitButtonDisabled")||d.removeClass(a.id,"mceSplitButtonHover")})},destroy:function(){this.parent();c.clear(this.id+"_action");c.clear(this.id+"_open");c.clear(this.id)}})})(tinymce);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.tinymce:atlassian-rte-javascript-tinymce-core', location = 'jscripts/tiny_mce/classes/ui/ColorSplitButton.js' */
(function(f){var b=f.DOM,e=f.dom.Event,m=f.is,n=f.each;f.create("tinymce.ui.ColorSplitButton:tinymce.ui.SplitButton",{ColorSplitButton:function(a,b,e){this.parent(a,b,e);this.settings=b=f.extend({colors:"000000,993300,333300,003300,003366,000080,333399,333333,800000,FF6600,808000,008000,008080,0000FF,666699,808080,FF0000,FF9900,99CC00,339966,33CCCC,3366FF,800080,999999,FF00FF,FFCC00,FFFF00,00FF00,00FFFF,00CCFF,993366,C0C0C0,FF99CC,FFCC99,FFFF99,CCFFCC,CCFFFF,99CCFF,CC99FF,FFFFFF",grid_width:8,default_color:"#888888"},
this.settings);this.onShowMenu=new f.util.Dispatcher(this);this.onHideMenu=new f.util.Dispatcher(this);this.value=b.default_color},showMenu:function(){var a=this,c,f;if(!a.isDisabled()){a.isMenuRendered||(a.renderMenu(),a.isMenuRendered=!0);if(a.isMenuVisible)return a.hideMenu();c=b.get(a.id);b.show(a.id+"_menu");b.addClass(c,"mceSplitButtonSelected");f=b.getPos(c);b.setStyles(a.id+"_menu",{left:f.x,top:f.y+c.clientHeight,zIndex:2E5});c=0;e.add(b.doc,"mousedown",a.hideMenu,a);a.onShowMenu.dispatch(a);
a._focused&&(a._keyHandler=e.add(a.id+"_menu","keydown",function(b){b.keyCode==27&&a.hideMenu()}),b.select("a",a.id+"_menu")[0].focus());a.isMenuVisible=1}},hideMenu:function(a){var c=this;if(c.isMenuVisible&&(!a||!("mousedown"==a.type&&b.getParent(a.target,function(a){return a.id===c.id+"_open"})))){if(!a||!b.getParent(a.target,".mceSplitButtonMenu"))b.removeClass(c.id,"mceSplitButtonSelected"),e.remove(b.doc,"mousedown",c.hideMenu,c),e.remove(c.id+"_menu","keydown",c._keyHandler),b.hide(c.id+"_menu");
c.isMenuVisible=0;c.onHideMenu.dispatch()}},renderMenu:function(){var a=this,c,i=0,g=a.settings,d,h,l,j,k;j=b.add(g.menu_container,"div",{role:"listbox",id:a.id+"_menu","class":g.menu_class+" "+g["class"],style:"position:absolute;left:0;top:-1000px;"});c=b.add(j,"div",{"class":g["class"]+" mceSplitButtonMenu"});b.add(c,"span",{"class":"mceMenuLine"});d=b.add(c,"table",{role:"presentation","class":"mceColorSplitMenu"});h=b.add(d,"tbody");i=0;n(m(g.colors,"array")?g.colors:g.colors.split(","),function(c){c=
c.replace(/^#/,"");i--||(l=b.add(h,"tr"),i=g.grid_width-1);d=b.add(l,"td");var e={href:"javascript:;",style:{backgroundColor:"#"+c},title:a.editor.getLang("colors."+c,c),"data-mce-color":"#"+c};f.isIE||(e.role="option");d=b.add(d,"a",e);a.editor.forcedHighContrastMode&&(d=b.add(d,"canvas",{width:16,height:16,"aria-hidden":"true"}),d.getContext&&(k=d.getContext("2d"))?(k.fillStyle="#"+c,k.fillRect(0,0,16,16)):b.remove(d))});g.more_colors_func&&(d=b.add(h,"tr"),d=b.add(d,"td",{colspan:g.grid_width,
"class":"mceMoreColors"}),d=b.add(d,"a",{role:"option",id:a.id+"_more",href:"javascript:;",onclick:"return false;","class":"mceMoreColors"},g.more_colors_title),e.add(d,"click",function(a){g.more_colors_func.call(g.more_colors_scope||this);return e.cancel(a)}));b.addClass(c,"mceColorSplitMenu");new f.ui.KeyboardNavigation({root:a.id+"_menu",items:b.select("a",a.id+"_menu"),onCancel:function(){a.hideMenu();a.focus()}});e.add(a.id+"_menu","mousedown",function(a){return e.cancel(a)});e.add(a.id+"_menu",
"click",function(c){var d;(c=b.getParent(c.target,"a",h))&&(c.nodeName.toLowerCase()=="a"&&(d=c.getAttribute("data-mce-color")))&&a.setColor(d);return e.cancel(c)});return j},setColor:function(a){this.displayColor(a);this.hideMenu();this.settings.onselect(a)},displayColor:function(a){b.setStyle(this.id+"_preview","backgroundColor",a);this.value=a},postRender:function(){var a=this.id;this.parent();b.add(a+"_action","div",{id:a+"_preview","class":"mceColorPreview"});b.setStyle(this.id+"_preview","backgroundColor",
this.value)},destroy:function(){this.parent();e.clear(this.id+"_menu");e.clear(this.id+"_more");b.remove(this.id+"_menu")}})})(tinymce);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.tinymce:atlassian-rte-javascript-tinymce-core', location = 'jscripts/tiny_mce/classes/ui/ToolbarGroup.js' */
(function(b){var d=b.DOM,e=b.each,f=b.dom.Event;b.create("tinymce.ui.ToolbarGroup:tinymce.ui.Container",{renderHTML:function(){var a=[],c=this.controls,g=b.each,h=this.settings;a.push('<div id="'+this.id+'" role="group" aria-labelledby="'+this.id+'_voice">');a.push("<span role='application'>");a.push('<span id="'+this.id+'_voice" class="mceVoiceLabel" style="display:none;">'+d.encode(h.name)+"</span>");g(c,function(b){a.push(b.renderHTML())});a.push("</span>");a.push("</div>");return a.join("")},
focus:function(){d.get(this.id).focus()},postRender:function(){var a=this,c=[];e(a.controls,function(a){e(a.controls,function(a){a.id&&c.push(a)})});a.keyNav=new b.ui.KeyboardNavigation({root:a.id,items:c,onCancel:function(){b.isWebKit&&d.get(a.editor.id+"_ifr").focus();a.editor.focus()},excludeFromTabOrder:!a.settings.tab_focus_toolbar})},destroy:function(){this.parent();this.keyNav.destroy();f.clear(this.id)}})})(tinymce);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.tinymce:atlassian-rte-javascript-tinymce-core', location = 'jscripts/tiny_mce/classes/ui/Toolbar.js' */
(function(f){var d=f.DOM;f.create("tinymce.ui.Toolbar:tinymce.ui.Container",{renderHTML:function(){var b="",a,c,f=this.settings,e,h,i,g;g=this.controls;for(e=0;e<g.length;e++){c=g[e];h=g[e-1];i=g[e+1];0===e&&(a="mceToolbarStart",c.Button?a+=" mceToolbarStartButton":c.SplitButton?a+=" mceToolbarStartSplitButton":c.ListBox&&(a+=" mceToolbarStartListBox"),b+=d.createHTML("td",{"class":a},d.createHTML("span",null,"<\!-- IE --\>")));if(h&&c.ListBox&&(h.Button||h.SplitButton))b+=d.createHTML("td",{"class":"mceToolbarEnd"},
d.createHTML("span",null,"<\!-- IE --\>"));b=d.stdMode?b+('<td style="position: relative">'+c.renderHTML()+"</td>"):b+("<td>"+c.renderHTML()+"</td>");if(i&&c.ListBox&&(i.Button||i.SplitButton))b+=d.createHTML("td",{"class":"mceToolbarStart"},d.createHTML("span",null,"<\!-- IE --\>"))}a="mceToolbarEnd";c.Button?a+=" mceToolbarEndButton":c.SplitButton?a+=" mceToolbarEndSplitButton":c.ListBox&&(a+=" mceToolbarEndListBox");b+=d.createHTML("td",{"class":a},d.createHTML("span",null,"<\!-- IE --\>"));return d.createHTML("table",
{id:this.id,"class":"mceToolbar"+(f["class"]?" "+f["class"]:""),cellpadding:"0",cellspacing:"0",align:this.settings.align||"",role:"presentation",tabindex:"-1"},"<tbody><tr>"+b+"</tr></tbody>")}})})(tinymce);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.tinymce:atlassian-rte-javascript-tinymce-core', location = 'jscripts/tiny_mce/classes/AddOnManager.js' */
(function(c){var i=c.util.Dispatcher;c.create("tinymce.AddOnManager",{AddOnManager:function(){this.items=[];this.urls={};this.lookup={};this.onAdd=new i(this)},get:function(b){if(this.lookup[b])return this.lookup[b].instance},dependencies:function(b){var a;this.lookup[b]&&(a=this.lookup[b].dependencies);return a||[]},requireLangPack:function(b){var a=c.settings;a&&(a.language&&!1!==a.language_load)&&c.ScriptLoader.add(this.urls[b]+"/langs/"+a.language+".js")},add:function(b,a,c){this.items.push(a);
this.lookup[b]={instance:a,dependencies:c};this.onAdd.dispatch(this,b,a);return a},createUrl:function(b,a){return"object"===typeof a?a:{prefix:b.prefix,resource:a,suffix:b.suffix}},addComponents:function(b,a){var f=this.urls[b];c.each(a,function(a){c.ScriptLoader.add(f+"/"+a)})},load:function(b,a,f,g){function h(){var d=e.dependencies(b);c.each(d,function(b){b=e.createUrl(a,b);e.load(b.resource,b,void 0,void 0)});f&&(g?f.call(g):f.call(c.ScriptLoader))}var e=this,d=a;e.urls[b]||("object"===typeof a&&
(d=a.prefix+a.resource+a.suffix),0!=d.indexOf("/")&&-1==d.indexOf("://")&&(d=c.baseURL+"/"+d),e.urls[b]=d.substring(0,d.lastIndexOf("/")),c.settings.atlassian||(e.lookup[b]?h():c.ScriptLoader.add(d,h,g)))}});c.PluginManager=new c.AddOnManager;c.ThemeManager=new c.AddOnManager})(tinymce);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.tinymce:atlassian-rte-javascript-tinymce-core', location = 'jscripts/tiny_mce/classes/EditorManager.js' */
(function(b){var e=b.each,n=b.extend,i=b.DOM,o=b.dom.Event,p=b.explode,m=b.util.Dispatcher,q=0;b.documentBaseURL=b.baseURL;AJS.debug("tinymce.documentBaseURL = "+b.documentBaseURL);/[\/\\]$/.test(b.documentBaseURL)||(b.documentBaseURL+="/");b.baseURL=(new b.util.URI(b.documentBaseURL)).toAbsolute(b.baseURL);b.baseURI=new b.util.URI(b.baseURL);b.onBeforeUnload=new m(b);o.add(window,"beforeunload",function(a){b.onBeforeUnload.dispatch(b,a)});b.onAddEditor=new m(b);b.onRemoveEditor=new m(b);b.EditorManager=
n(b,{editors:[],i18n:{},activeEditor:null,init:function(a){function g(a,c,k){var d=a[c];if(d){if(b.is(d,"string")){k=(k=d.replace(/\.\w+$/,""))?b.resolve(k):0;d=b.resolve(d)}return d.apply(k||this,Array.prototype.slice.call(arguments,2))}}function c(){var c,j;g(a,"onpageload");switch(a.mode){case "exact":c=a.elements||"";c.length>0&&e(p(c),function(c){if(i.get(c)){h=new b.Editor(c,a);l.push(h);h.render(1)}else e(document.forms,function(d){e(d.elements,function(d){if(d.name===c){c="mce_editor_"+q++;
i.setAttrib(d,"id",c);h=new b.Editor(c,a);l.push(h);h.render(1)}})})});break;case "textareas":case "specific_textareas":e(i.select("textarea"),function(c){if(!a.editor_deselector||!(a.editor_deselector.constructor===RegExp?a.editor_deselector.test(c.className):i.hasClass(c,a.editor_deselector)))if(!a.editor_selector||(a.editor_selector.constructor===RegExp?a.editor_selector.test(c.className):i.hasClass(c,a.editor_selector))){f=i.get(c.name);if(!c.id&&!f)c.id=c.name;if(!c.id||d.get(c.id))c.id=i.uniqueId();
h=new b.Editor(c.id,a);l.push(h);h.render(1)}})}if(a.oninit){c=j=0;e(l,function(b){j++;b.initialized?c++:b.onInit.add(function(){c++;c==j&&g(a,"oninit")});c==j&&g(a,"oninit")})}}var d=this,f,l=[],h,a=n({theme:"simple",language:"en"},a);d.settings=a;a.atlassian?c():o.add(document,"init",c)},get:function(a){return a===void 0?this.editors:this.editors[a]},getInstanceById:function(a){return this.get(a)},add:function(a){var g=this.editors;g[a.id]=a;g.push(a);this._setActive(a);this.onAddEditor.dispatch(this,
a);b.adapter&&b.adapter.patchEditor(a);return a},remove:function(a){var b,c=this.editors;if(!c[a.id])return null;delete c[a.id];for(b=0;b<c.length;b++)if(c[b]==a){c.splice(b,1);break}this.activeEditor==a&&this._setActive(c[0]);a.destroy();this.onRemoveEditor.dispatch(this,a);return a},execCommand:function(a,g,c){var d=this.get(c),f;switch(a){case "mceFocus":d.focus();return true;case "mceAddEditor":case "mceAddControl":this.get(c)||(new b.Editor(c,this.settings)).render();return true;case "mceAddFrameControl":f=
c.window;f.tinyMCE=tinyMCE;f.tinymce=b;b.DOM.doc=f.document;b.DOM.win=f;d=new b.Editor(c.element_id,c);d.render();if(b.isIE){var e=function(){d.destroy();f.detachEvent("onunload",e);f=f.tinyMCE=f.tinymce=null};f.attachEvent("onunload",e)}c.page_window=null;return true;case "mceRemoveEditor":case "mceRemoveControl":d&&d.remove();return true;case "mceToggleEditor":if(!d){this.execCommand("mceAddControl",0,c);return true}d.isHidden()?d.show():d.hide();return true}return this.activeEditor?this.activeEditor.execCommand(a,
g,c):false},execInstanceCommand:function(a,b,c,d){return(a=this.get(a))?a.execCommand(b,c,d):false},triggerSave:function(){e(this.editors,function(a){a.save()})},addI18n:function(a,g){var c=this.i18n;b.is(a,"string")?e(g,function(b,f){c[a+"."+f]=b}):e(a,function(a,b){e(a,function(a,d){e(a,function(a,e){d==="common"?c[b+"."+e]=a:c[b+"."+d+"."+e]=a})})})},_setActive:function(a){this.selectedInstance=this.activeEditor=a}})})(tinymce);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.tinymce:atlassian-rte-javascript-tinymce-core', location = 'jscripts/tiny_mce/classes/Editor.js' */
(function(d){var g=d.DOM,i=d.dom.Event,u=d.extend,v=d.util.Dispatcher,j=d.each,p=d.isGecko,r=d.isIE,m=d.is,s=d.ThemeManager,o=d.PluginManager,q=d.explode,w=d.VK;d.create("tinymce.Editor",{Editor:function(a,b){var c=this;c.id=c.editorId=a;c.execCommands={};c.queryStateCommands={};c.queryValueCommands={};c.isNotDirty=!1;c.plugins={};j("onPreInit onBeforeRenderUI onPostRender onLoad onInit onRemove onActivate onDeactivate onClick onEvent onMouseUp onMouseDown onDblClick onKeyDown onKeyUp onKeyPress onContextMenu onSubmit onReset onPaste onPreProcess onPostProcess onBeforeSetContent onBeforeGetContent onSetContent onGetContent onLoadContent onSaveContent onNodeChange onChange onBeforeExecCommand onExecCommand onUndo onRedo onVisualAid onSetProgressState onSetAttrib".split(" "),
function(a){c[a]=new v(c)});c.settings=b=u({id:a,language:"en",docs_language:"en",theme:"simple",skin:"default",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:d.documentBaseURL,add_form_submit_trigger:1,submit_patch:1,add_unload_trigger:1,convert_urls:1,relative_urls:1,remove_script_host:1,table_inline_editing:0,object_resizing:1,cleanup:1,accessibility_focus:1,custom_shortcuts:1,custom_undo_redo_keyboard_shortcuts:1,custom_undo_redo_restore_selection:1,custom_undo_redo:1,
doctype:d.isIE6?'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">':"<!DOCTYPE html>",visual_table_class:"mceItemTable",visual:1,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",apply_source_formatting:1,directionality:"ltr",forced_root_block:"p",hidden_input:1,padd_empty_editor:1,render_ui:1,init_theme:1,force_p_newlines:1,indentation:"30px",keep_styles:1,fix_table_elements:1,inline_styles:1,
convert_fonts_to_spans:!0,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr",validate:!0,entity_encoding:"named",url_converter:c.convertURL,url_converter_scope:c,ie7_compat:!0},b);c.documentBaseURI=new d.util.URI(b.document_base_url||d.documentBaseURL,{base_uri:tinyMCE.baseURI});c.baseURI=d.baseURI;c.contentCSS=
[];c.execCallback("setup",c)},render:function(){var a=this,b=a.settings,c=a.id,e=d.ScriptLoader;if(!b.atlassian&&!i.domLoaded)i.add(document,"init",function(){a.render()});else if(tinyMCE.settings=b,a.getElement()&&(!d.isIDevice||d.isIOS5))!/TEXTAREA|INPUT/i.test(a.getElement().nodeName)&&(b.hidden_input&&g.getParent(c,"form"))&&g.insertAfter(g.create("input",{type:"hidden",name:c}),c),d.WindowManager&&(a.windowManager=new d.WindowManager(a)),"xml"==b.encoding&&a.onGetContent.add(function(a,b){if(b.save)b.content=
g.encode(b.content)}),b.add_form_submit_trigger&&a.onSubmit.addToTop(function(){if(a.initialized){a.save();a.isNotDirty=1}}),b.add_unload_trigger&&(a._beforeUnload=tinyMCE.onBeforeUnload.add(function(){a.initialized&&(!a.destroyed&&!a.isHidden())&&a.save({format:"raw",no_events:true})})),d.addUnload(a.destroy,a),b.submit_patch&&a.onBeforeRenderUI.add(function(){var b=a.getElement().form;if(b&&!b._mceOldSubmit){if(!b.submit.nodeType&&!b.submit.length){a.formElement=b;b._mceOldSubmit=b.submit;b.submit=
function(){d.triggerSave();a.isNotDirty=1;return a.formElement._mceOldSubmit(a.formElement)}}b=null}}),c=function(){a.removed||a.init()},b.theme&&("-"!=b.theme.charAt(0)&&!s.urls[b.theme])&&s.load(b.theme,"themes/"+b.theme+"/editor_template"+d.suffix+".js"),j(q(b.plugins),function(a){if(a&&!o.urls[a])if(a.charAt(0)=="-"){a=a.substr(1,a.length);a=o.dependencies(a);j(a,function(a){a=o.createUrl({prefix:"plugins/",resource:a,suffix:"/editor_plugin"+d.suffix+".js"},a);o.load(a.resource,a)})}else a!="safari"&&
o.load(a,{prefix:"plugins/",resource:a,suffix:"/editor_plugin"+d.suffix+".js"})}),b.atlassian?c():e.loadQueue(c)},init:function(){function a(c){var f=o.get(c),h=o.urls[c]||d.documentBaseURL.replace(/\/$/,"");f&&-1===d.inArray(i,c)&&(j(o.dependencies(c),function(b){a(b)}),f=new f(b,h),b.plugins[c]=f,f.init&&(f.init(b,h),i.push(c)),AJS.debug("initPlugin: "+c+" initialised"))}var b=this,c=b.settings,e,h,f=b.getElement(),k,l,n,i=[];d.add(b);c.aria_label=c.aria_label||g.getAttrib(f,"aria-label",b.getLang("aria.rich_text_area"));
c.theme&&(c.theme=c.theme.replace(/-/,""),k=s.get(c.theme),b.theme=new k,b.theme.init&&c.init_theme&&b.theme.init(b,s.urls[c.theme]||d.documentBaseURL.replace(/\/$/,"")));j(q(c.plugins.replace(/\-/g,"")),a);!1!==c.popup_css&&(c.popup_css=c.popup_css?b.documentBaseURI.toAbsolute(c.popup_css):b.baseURI.toAbsolute("themes/"+c.theme+"/skins/"+c.skin+"/dialog.css"));c.popup_css_add&&(c.popup_css+=","+b.documentBaseURI.toAbsolute(c.popup_css_add));b.controlManager=new d.ControlManager(b);c.custom_undo_redo&&
(b.onBeforeExecCommand.add(function(a,c,f,h,e){c!="Undo"&&(c!="Redo"&&c!="mceRepaint"&&(!e||!e.skip_undo))&&b.undoManager.beforeChange()}),b.onExecCommand.add(function(a,c,f,h,e){c!="Undo"&&(c!="Redo"&&c!="mceRepaint"&&(!e||!e.skip_undo))&&b.undoManager.add()}));b.onExecCommand.add(function(a,c){/^(FontName|FontSize)$/.test(c)||b.nodeChanged()});p&&(n=function(a,c){(!c||!c.initial)&&b.execCommand("mceRepaint")},b.onUndo.add(n),b.onRedo.add(n),b.onSetContent.add(n));b.onBeforeRenderUI.dispatch(b,b.controlManager);
c.render_ui&&(e=c.width||f.style.width||f.offsetWidth,h=c.height||f.style.height||f.offsetHeight,b.orgDisplay=f.style.display,n=/^[0-9\.]+(|px)$/i,n.test(""+e)&&(e=Math.max(parseInt(e)+(k.deltaWidth||0),100)),n.test(""+h)&&(h=Math.max(parseInt(h)+(k.deltaHeight||0),100)),k=b.theme.renderUI({targetNode:f,width:e,height:h,deltaWidth:c.delta_width,deltaHeight:c.delta_height}),b.editorContainer=k.editorContainer);if(c.content_editable)return f=k=null,b.setupContentEditable();document.domain&&location.hostname!=
document.domain&&(d.relaxedDomain=document.domain);g.setStyles(k.sizeContainer||k.editorContainer,{width:e,height:h});c.content_css&&d.each(q(c.content_css),function(a){b.contentCSS.push(b.documentBaseURI.toAbsolute(a))});100>h&&(h=100);AJS.debug("Editor:init iframe base href="+AJS.Rte.getCurrentBaseUrl());b.iframeHTML=c.doctype+'<html><head xmlns="http://www.w3.org/1999/xhtml">';c.document_base_url!=d.documentBaseURL&&(b.iframeHTML+='<base href="'+AJS.Rte.getCurrentBaseUrl()+'" />');b.iframeHTML=
c.ie7_compat?b.iframeHTML+'<meta http-equiv="X-UA-Compatible" content="IE=7" />':b.iframeHTML+'<meta http-equiv="X-UA-Compatible" content="IE=edge" />';b.iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';for(e=0;e<b.contentCSS.length;e++)b.iframeHTML+='<link type="text/css" rel="stylesheet" href="'+b.contentCSS[e]+'" />';c.contentCssTags&&(b.iframeHTML+=c.contentCssTags);b.contentCSS=[];e=c.body_id||"tinymce";-1!=e.indexOf("=")&&(e=b.getParam("body_id","","hash"),
e=e[b.id]||e);f=c.body_class||"";-1!=f.indexOf("=")&&(f=b.getParam("body_class","","hash"),f=f[b.id]||"");b.iframeHTML+='</head><body id="'+e+'" class="mceContentBody aui-theme-default '+f+'" onload="window.parent.tinyMCE.get(\''+b.id+"').onLoad.dispatch();\"><br></body></html>";if(d.relaxedDomain&&(r||d.isOpera&&11>parseFloat(opera.version())))l='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinyMCE.get("'+b.id+'");document.write(ed.iframeHTML);document.close();ed.setupIframe();})()';
g.add(k.iframeContainer,"iframe",{id:b.id+"_ifr",src:l||'javascript:""',frameBorder:"0",allowTransparency:"true",title:c.aria_label,style:{width:"100%",height:h,display:"block"}});b.contentAreaContainer=k.iframeContainer;g.get(k.editorContainer).style.display=b.orgDisplay;g.get(b.id).style.display="none";g.setAttrib(b.id,"aria-hidden",!0);(!d.relaxedDomain||!l)&&b.setupIframe();f=k=null},setupIframe:function(){var a=this,b=a.settings;g.get(a.id);var c=a.getDoc();if(!r||!d.relaxedDomain)c.open(),c.write(a.iframeHTML),
c.close(),d.relaxedDomain&&(c.domain=d.relaxedDomain);c=a.getBody();c.disabled=!0;b.readonly||(c.contentEditable=!0);c.disabled=!1;a.schema=new d.html.Schema(b);a.dom=new d.dom.DOMUtils(a.getDoc(),{keep_values:!0,url_converter:a.convertURL,url_converter_scope:a,hex_colors:b.force_hex_style_colors,class_filter:b.class_filter,update_styles:1,fix_ie_paragraphs:1,schema:a.schema});a.parser=new d.html.DomParser(b,a.schema);a.settings.allow_html_in_named_anchor||a.parser.addAttributeFilter("name",function(a){for(var b=
a.length,c,e,d,g;b--;){g=a[b];if(g.name==="a"&&g.firstChild){d=g.parent;c=g.lastChild;do{e=c.prev;d.insert(c,g);c=e}while(c)}}});a.parser.addAttributeFilter("src,href,style",function(b,c){for(var e=b.length,d,g=a.dom,i,t;e--;){d=b[e];i=d.attr(c);t="data-mce-"+c;d.attributes.map[t]||(c==="style"?d.attr(t,g.serializeStyle(g.parseStyle(i),d.name)):d.attr(t,a.convertURL(i,c,d.name)))}});a.parser.addNodeFilter("script",function(a){for(var b=a.length,c;b--;){c=a[b];c.attr("type","mce-"+(c.attr("type")||
"text/javascript"))}});a.parser.addNodeFilter("#cdata",function(a){for(var b=a.length,c;b--;){c=a[b];c.type=8;c.name="#comment";c.value="[CDATA["+c.value+"]]"}});a.parser.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(b){var c=b.length,e;for(a.schema.getNonEmptyElements();c--;){e=b[c];if(e.isEmpty(a.schema))e.empty().append(new d.html.Node("br",1)).shortEnded=true}});a.serializer=new d.dom.Serializer(b,a.dom,a.schema);a.selection=new d.dom.Selection(a.dom,a.getWin(),a.serializer);a.formatter=new d.Formatter(this);
a.formatter.register({alignleft:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"left"}},{selector:"img.confluence-embedded-image",classes:"image-left"},{selector:"img,table",collapsed:!1,styles:{"float":"left"}}],aligncenter:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"center"}},{selector:"img.confluence-embedded-image",classes:"image-center"},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"}}],alignright:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",
styles:{textAlign:"right"}},{selector:"img.confluence-embedded-image",classes:"image-right"},{selector:"img,table",collapsed:!1,styles:{"float":"right"}}],alignfull:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"justify"}}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"u",remove:"all"},{inline:"span",
styles:{textDecoration:"underline"},exact:!0}],strikethrough:[{inline:"s",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},wrap_links:!1},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},wrap_links:!1},fontname:{inline:"span",styles:{fontFamily:"%value"}},fontsize:{inline:"span",styles:{fontSize:"%value"}},fontsize_class:{inline:"span",attributes:{"class":"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},
link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(){return true},onformat:function(b,c,e){j(e,function(c,f){a.dom.setAttrib(b,f,c)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]});j("p h1 h2 h3 h4 h5 h6 div address pre div code dt dd samp".split(/\s/),
function(b){a.formatter.register(b,{block:b,remove:"all"})});a.formatter.register(a.settings.formats);a.undoManager=new d.UndoManager(a);a.undoManager.onAdd.add(function(b,c){if(b.hasUndo())return a.onChange.dispatch(a,c,b)});a.undoManager.onUndo.add(function(b,c){return a.onUndo.dispatch(a,c,b)});a.undoManager.onRedo.add(function(b,c){return a.onRedo.dispatch(a,c,b)});a.forceBlocks=new d.ForceBlocks(a,{forced_root_block:b.forced_root_block});a.editorCommands=new d.EditorCommands(a);a.serializer.onPreProcess.add(function(b,
c){return a.onPreProcess.dispatch(a,c,b)});a.serializer.onPostProcess.add(function(b,c){return a.onPostProcess.dispatch(a,c,b)});AJS.debug("Editor:setupIframe: dispatch onPreInit");a.onPreInit.dispatch(a);b.gecko_spellcheck||(a.getBody().spellcheck=0);b.readonly||a._addEvents();AJS.debug("Editor:setupIframe: dispatch controlManager onPostRender");a.controlManager.onPostRender.dispatch(a,a.controlManager);AJS.debug("Editor:setupIframe: dispatch onPostRender");a.onPostRender.dispatch(a);a.quirks=new d.util.Quirks(this);
b.directionality&&(a.getBody().dir=b.directionality);b.nowrap&&(a.getBody().style.whiteSpace="nowrap");b.handle_node_change_callback&&a.onNodeChange.add(function(b,c,e){a.execCallback("handle_node_change_callback",a.id,e,-1,-1,true,a.selection.isCollapsed())});b.save_callback&&a.onSaveContent.add(function(b,c){var e=a.execCallback("save_callback",a.id,c.content,a.getBody());if(e)c.content=e});b.onchange_callback&&a.onChange.add(function(b,c){a.execCallback("onchange_callback",a,c)});b.protect&&a.onBeforeSetContent.add(function(a,
c){b.protect&&j(b.protect,function(a){c.content=c.content.replace(a,function(a){return"<\!--mce:protected "+escape(a)+"--\>"})})});b.convert_newlines_to_brs&&a.onBeforeSetContent.add(function(a,b){if(b.initial)b.content=b.content.replace(/\r?\n/g,"<br />")});b.preformatted&&a.onPostProcess.add(function(a,b){b.content=b.content.replace(/^\s*<pre.*?>/,"");b.content=b.content.replace(/<\/pre>\s*$/,"");if(b.set)b.content='<pre class="mceItemHidden">'+b.content+"</pre>"});b.verify_css_classes&&(a.serializer.attribValueFilter=
function(b,c){var e,d;if(b=="class"){if(!a.classesRE){d=a.dom.getClasses();if(d.length>0){e="";j(d,function(a){e=e+((e?"|":"")+a["class"])});a.classesRE=RegExp("("+e+")","gi")}}return!a.classesRE||/(\bmceItem\w+\b|\bmceTemp\w+\b)/g.test(c)||a.classesRE.test(c)?c:""}return c});b.cleanup_callback&&(a.onBeforeSetContent.add(function(b,c){c.content=a.execCallback("cleanup_callback","insert_to_editor",c.content,c)}),a.onPreProcess.add(function(b,c){c.set&&a.execCallback("cleanup_callback","insert_to_editor_dom",
c.node,c);c.get&&a.execCallback("cleanup_callback","get_from_editor_dom",c.node,c)}),a.onPostProcess.add(function(b,c){if(c.set)c.content=a.execCallback("cleanup_callback","insert_to_editor",c.content,c);if(c.get)c.content=a.execCallback("cleanup_callback","get_from_editor",c.content,c)}));b.save_callback&&a.onGetContent.add(function(b,c){if(c.save)c.content=a.execCallback("save_callback",a.id,c.content,a.getBody())});b.handle_event_callback&&a.onEvent.add(function(b,c,e){a.execCallback("handle_event_callback",
c,b,e)===false&&i.cancel(c)});a.onSetContent.add(function(){a.addVisual(a.getBody())});b.padd_empty_editor&&a.onPostProcess.add(function(a,b){b.content=b.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")});if(p){var e=function(a){j(a.dom.select("a"),function(b){var c=b.parentNode;a.dom.isBlock(c)&&c.lastChild===b&&a.dom.add(c,"br",{"data-mce-bogus":1})})};a.onExecCommand.add(function(a,b){b==="CreateLink"&&e(a)});a.onSetContent.add(a.selection.onSetContent.add(e))}a.load({initial:!0,
format:"html"});a.startContent=a.getContent({format:"raw"});a.undoManager.add();a.initialized=!0;AJS.debug("Editor:setupIframe: dispatch onInit");a.onInit.dispatch(a);AJS.debug("Editor:setupIframe: Callback setupcontent_callback");a.execCallback("setupcontent_callback",a.id,a.getBody(),a.getDoc());AJS.debug("Editor:setupIframe: Completed setupcontent_callback");AJS.debug("Editor:setupIframe: Callback init_instance_callback");a.execCallback("init_instance_callback",a);AJS.debug("Editor:setupIframe: Completed init_instance_callback");
a.focus(!0);a.nodeChanged({initial:1});j(a.contentCSS,function(b){a.dom.loadCSS(b)});b.auto_focus&&setTimeout(function(){var a=d.get(b.auto_focus);a.selection.select(a.getBody(),1);a.selection.collapse(1);a.getBody().focus();a.getWin().focus()},100)},setupContentEditable:function(){var a=this,b=a.settings,c=a.getElement();a.contentDocument=b.content_document||document;a.contentWindow=b.content_window||window;a.bodyElement=c;b.content_document=b.content_window=null;g.hide(c);c.contentEditable=a.getParam("content_editable_state",
!0);g.show(c);b.gecko_spellcheck||(a.getDoc().body.spellcheck=0);a.dom=new d.dom.DOMUtils(a.getDoc(),{keep_values:!0,url_converter:a.convertURL,url_converter_scope:a,hex_colors:b.force_hex_style_colors,class_filter:b.class_filter,root_element:a.id,fix_ie_paragraphs:1,update_styles:1});a.serializer=new d.dom.Serializer(b,a.dom,schema);a.selection=new d.dom.Selection(a.dom,a.getWin(),a.serializer);a.forceBlocks=new d.ForceBlocks(a,{forced_root_block:b.forced_root_block});a.editorCommands=new d.EditorCommands(a);
a.serializer.onPreProcess.add(function(b,c){return a.onPreProcess.dispatch(a,c,b)});a.serializer.onPostProcess.add(function(b,c){return a.onPostProcess.dispatch(a,c,b)});a.onPreInit.dispatch(a);a._addEvents();a.controlManager.onPostRender.dispatch(a,a.controlManager);a.onPostRender.dispatch(a);a.onSetContent.add(function(){a.addVisual(a.getBody())});a.startContent=a.getContent({format:"raw"});a.undoManager.add({initial:!0});a.initialized=!0;a.onInit.dispatch(a);a.focus(!0);a.nodeChanged({initial:1});
b.content_css&&j(q(b.content_css),function(b){a.dom.loadCSS(a.documentBaseURI.toAbsolute(b))});r&&(a.dom.bind(a.getElement(),"beforedeactivate",function(){a.lastSelectionBookmark=a.selection.getBookmark(1)}),a.onBeforeExecCommand.add(function(a,b,c,d,l){if(!g.getParent(a.selection.getStart(),function(b){return b==a.getBody()}))l.terminate=1;if(!g.getParent(a.selection.getEnd(),function(b){return b==a.getBody()}))l.terminate=1}));c=null},focus:function(a){var b,c=this.selection,e=this.settings.content_editable,
h,f=this.getDoc(),k,l;if(!a){a=c.getRng();a.item&&(h=a.item(0));this._refreshContentEditable();if(!e)if(d.isIE)try{k=this.getWin(),l=g.getViewPort(k),this.dom.getRoot().focus(),k.scrollTo(l.x,l.y)}catch(i){}else this.getWin().focus();d.isGecko&&this.getBody().focus();h&&h.ownerDocument==f&&(a=f.body.createControlRange(),a.addElement(h),a.select());e&&(d.isWebKit?this.getWin().focus():d.isIE?this.getElement().setActive():this.getElement().focus())}d.activeEditor!=this&&(null!=(b=d.activeEditor)&&b.onDeactivate.dispatch(b,
this),this.onActivate.dispatch(this,b));d._setActive(this)},execCallback:function(a){var b=this.settings[a],c;if(b){if(this.callbackLookup&&(c=this.callbackLookup[a]))b=c.func,c=c.scope;m(b,"string")&&(c=(c=b.replace(/\.\w+$/,""))?d.resolve(c):0,b=d.resolve(b),this.callbackLookup=this.callbackLookup||{},this.callbackLookup[a]={func:b,scope:c});return b.apply(c||this,Array.prototype.slice.call(arguments,1))}},translate:function(a){var b=this.settings.language||"en",c=d.i18n;return!a?"":c[b+"."+a]||
a.replace(/{\#([^}]+)\}/g,function(a,d){return c[b+"."+d]||"{#"+d+"}"})},getLang:function(a,b){return d.i18n[(this.settings.language||"en")+"."+a]||(m(b)?b:"{#"+a+"}")},getParam:function(a,b,c){var e=d.trim,a=m(this.settings[a])?this.settings[a]:b,h;return"hash"===c?(h={},m(a,"string")?j(0<a.indexOf("=")?a.split(/[;,](?![^=;,]*(?:[;,]|$))/):a.split(","),function(a){a=a.split("=");1<a.length?h[e(a[0])]=e(a[1]):h[e(a[0])]=e(a)}):h=a,h):a},nodeChanged:function(a){var b=this.selection,c=b.getStart()||
this.getBody();this.initialized&&(a=a||{},c=r&&c.ownerDocument!=this.getDoc()?this.getBody():c,a.parents=[],this.dom.getParent(c,function(b){if("BODY"==b.nodeName)return!0;a.parents.push(b)}),this.onNodeChange.dispatch(this,a?a.controlManager||this.controlManager:this.controlManager,c,b.isCollapsed(),a))},addButton:function(a,b){this.buttons=this.buttons||{};this.buttons[a]=b},addCommand:function(a,b,c){this.execCommands[a]={func:b,scope:c||this}},addQueryStateHandler:function(a,b,c){this.queryStateCommands[a]=
{func:b,scope:c||this}},addQueryValueHandler:function(a,b,c){this.queryValueCommands[a]={func:b,scope:c||this}},addShortcut:function(a,b,c,e){var d=this,f;if(!d.settings.custom_shortcuts)return!1;d.shortcuts=d.shortcuts||{};m(c,"string")&&(f=c,c=function(){d.execCommand(f,!1,null)});m(c,"object")&&(f=c,c=function(){d.execCommand(f[0],f[1],f[2])});j(q(a),function(a){var f={func:c,scope:e||this,desc:b,alt:false,ctrl:false,shift:false};j(q(a,"+"),function(a){switch(a){case "alt":case "ctrl":case "shift":f[a]=
true;break;default:f.charCode=a.charCodeAt(0);f.keyCode=a.toUpperCase().charCodeAt(0)}});d.shortcuts[(f.ctrl?"ctrl":"")+","+(f.alt?"alt":"")+","+(f.shift?"shift":"")+","+f.keyCode]=f});return!0},execCommand:function(a,b,c,e){var d=this,f=0,g;!/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint|SelectAll)$/.test(a)&&(!e||!e.skip_focus)&&d.focus();e=u({},e);d.onBeforeExecCommand.dispatch(d,a,b,c,e);if(e.terminate)return!1;if(d.execCallback("execcommand_callback",d.id,d.selection.getNode(),
a,b,c))return d.onExecCommand.dispatch(d,a,b,c,e),!0;if(g=d.execCommands[a])if(g=g.func.call(g.scope,b,c),!0!==g)return d.onExecCommand.dispatch(d,a,b,c,e),g;j(d.plugins,function(g){if(g.execCommand&&g.execCommand(a,b,c))return d.onExecCommand.dispatch(d,a,b,c,e),f=1,!1});if(f)return!0;if(d.theme&&d.theme.execCommand&&d.theme.execCommand(a,b,c)||d.editorCommands.execCommand(a,b,c))return d.onExecCommand.dispatch(d,a,b,c,e),!0;d.getDoc().execCommand(a,b,c);d.onExecCommand.dispatch(d,a,b,c,e)},queryCommandState:function(a){var b;
if(!this._isHidden()){if(b=this.queryStateCommands[a])if(b=b.func.call(b.scope),!0!==b)return b;b=this.editorCommands.queryCommandState(a);if(-1!==b)return b;try{return this.getDoc().queryCommandState(a)}catch(c){}}},queryCommandValue:function(a){var b;if(!this._isHidden()){if(b=this.queryValueCommands[a])if(b=b.func.call(b.scope),!0!==b)return b;b=this.editorCommands.queryCommandValue(a);if(m(b))return b;try{return this.getDoc().queryCommandValue(a)}catch(c){}}},show:function(){g.show(this.getContainer());
g.hide(this.id);this.load()},hide:function(){var a=this.getDoc();r&&a&&a.execCommand("SelectAll");this.save();g.hide(this.getContainer());g.setStyle(this.id,"display",this.orgDisplay)},isHidden:function(){return!g.isHidden(this.id)},setProgressState:function(a,b,c){this.onSetProgressState.dispatch(this,a,b,c);return a},load:function(a){var b=this.getElement(),c;if(b)return a=a||{},a.load=!0,c=this.setContent(m(b.value)?b.value:b.innerHTML,a),a.element=b,a.no_events||this.onLoadContent.dispatch(this,
a),a.element=null,c},save:function(a){var b=this,c=b.getElement(),d,h;if(c&&b.initialized){a=a||{};a.save=!0;try{a.no_events||(b.undoManager.typing=!1,b.undoManager.add())}catch(f){AJS.logError("editor.save() : "+f)}a.element=c;d=a.content=b.getContent(a);a.no_events||b.onSaveContent.dispatch(b,a);d=a.content;/TEXTAREA|INPUT/i.test(c.nodeName)?c.value=d:(c.innerHTML=d,(h=g.getParent(b.id,"form"))&&j(h.elements,function(a){if(a.name==b.id)return a.value=d,!1}));a.element=c=null;return d}},setContent:function(a,
b){var c=this.getBody(),e,b=b||{};b.format=b.format||"html";b.set=!0;b.content=a;b.no_events||this.onBeforeSetContent.dispatch(this,b);a=b.content;if(!d.isIE&&(0===a.length||/^\s+$/.test(a)))a=(e=this.settings.forced_root_block)?"<"+e+'><br data-mce-bogus="1"></'+e+">":'<br data-mce-bogus="1">',c.innerHTML=a,this.selection.select(c,!0),this.selection.collapse(!0);"raw"!==b.format&&(a=(new d.html.Serializer({},this.schema)).serialize(this.parser.parse(a)));b.content=d.trim(a);this.dom.setHTML(c,b.content);
b.no_events||this.onSetContent.dispatch(this,b);this.selection.normalize();return b.content},getContent:function(a){var b,a=a||{};a.format=a.format||"html";a.get=!0;a.no_events||this.onBeforeGetContent.dispatch(this,a);b="raw"==a.format?this.getBody().innerHTML:this.serializer.serialize(this.getBody(),a);a.content=d.trim(b);a.no_events||this.onGetContent.dispatch(this,a);return a.content},isDirty:function(){return d.trim(this.startContent)!=d.trim(this.getContent({format:"raw",no_events:1}))&&!this.isNotDirty},
setDirty:function(a){this.isNotDirty=a?0:1},getContainer:function(){this.container||(this.container=g.get(this.editorContainer||this.id+"_parent"));return this.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return g.get(this.settings.content_element||this.id)},getWin:function(){var a;if(!this.contentWindow&&(a=g.get(this.id+"_ifr")))this.contentWindow=a.contentWindow;return this.contentWindow},getDoc:function(){var a;if(!this.contentDocument&&
(a=this.getWin()))this.contentDocument=a.document;return this.contentDocument},getBody:function(){return this.bodyElement||this.getDoc().body},convertURL:function(a,b,c){var d=this.settings;return d.urlconverter_callback?this.execCallback("urlconverter_callback",a,c,!0,b):!d.convert_urls||c&&"LINK"==c.nodeName||0===a.indexOf("file:")?a:d.relative_urls?this.documentBaseURI.toRelative(a):a=this.documentBaseURI.toAbsolute(a,d.remove_script_host)},addVisual:function(a){var b=this,c=b.settings,a=a||b.getBody();
m(b.hasVisual)||(b.hasVisual=c.visual);j(b.dom.select("table,a",a),function(a){var d;switch(a.nodeName){case "TABLE":d=b.dom.getAttrib(a,"border");if(!d||d=="0")b.hasVisual?b.dom.addClass(a,c.visual_table_class):b.dom.removeClass(a,c.visual_table_class);break;case "A":(d=b.dom.getAttrib(a,"name"))&&(b.hasVisual?b.dom.addClass(a,"mceItemAnchor"):b.dom.removeClass(a,"mceItemAnchor"))}});b.onVisualAid.dispatch(b,a,b.hasVisual)},remove:function(){var a=this.getContainer();this.removed=1;this.hide();this.execCallback("remove_instance_callback",
this);this.onRemove.dispatch(this);this.onExecCommand.listeners=[];d.remove(this);g.remove(a)},destroy:function(a){this.destroyed||(a||(d.removeUnload(this.destroy),tinyMCE.onBeforeUnload.remove(this._beforeUnload),this.theme&&this.theme.destroy&&this.theme.destroy(),this.controlManager.destroy(),this.selection.destroy(),this.dom.destroy(),this.settings.content_editable||(i.clear(this.getWin()),i.clear(this.getDoc())),i.clear(this.getBody()),i.clear(this.formElement)),this.formElement&&(this.formElement.submit=
this.formElement._mceOldSubmit,this.formElement._mceOldSubmit=null),this.contentAreaContainer=this.formElement=this.container=this.settings.content_element=this.bodyElement=this.contentDocument=this.contentWindow=null,this.selection&&(this.selection=this.selection.win=this.selection.dom=this.selection.dom.doc=null),this.destroyed=1)},_addEvents:function(){function a(a,c){b.removed||!1!==b.onEvent.dispatch(b,a,c)&&b[h[a.fakeType||a.type]].dispatch(b,a,c)}var b=this,c=b.settings,e=b.dom,h={mouseup:"onMouseUp",
mousedown:"onMouseDown",click:"onClick",keyup:"onKeyUp",keydown:"onKeyDown",keypress:"onKeyPress",submit:"onSubmit",reset:"onReset",contextmenu:"onContextMenu",dblclick:"onDblClick",paste:"onPaste"};j(h,function(d,f){switch(f){case "contextmenu":e.bind(b.getDoc(),f,a);break;case "paste":e.bind(b.getBody(),f,function(b){a(b)});break;case "submit":case "reset":e.bind(b.getElement().form||g.getParent(b.id,"form"),f,a);break;default:e.bind(c.content_editable?b.getBody():b.getDoc(),f,a)}});e.bind(c.content_editable?
b.getBody():p?b.getDoc():b.getWin(),"focus",function(){b.focus(!0)});if(c.content_editable&&d.isOpera){var f=function(){b.focus(!0)};e.bind(b.getBody(),"click",f);e.bind(b.getBody(),"keydown",f)}d.isGecko&&e.bind(b.getDoc(),"DOMNodeInserted",function(a){var c,a=a.target;if(1===a.nodeType&&"IMG"===a.nodeName&&(c=a.getAttribute("data-mce-src")))a.src=b.documentBaseURI.toAbsolute(c)});p&&(f=function(){var a=this.getDoc(),b=this.settings;if(p&&!b.readonly){this._refreshContentEditable();try{a.execCommand("styleWithCSS",
0,!1)}catch(c){if(!this._isHidden())try{a.execCommand("useCSS",0,!0)}catch(d){}}if(!b.table_inline_editing)try{a.execCommand("enableInlineTableEditing",!1,!1)}catch(e){}if(!b.object_resizing)try{a.execCommand("enableObjectResizing",!1,!1)}catch(f){}}},b.onBeforeExecCommand.add(f),b.onMouseDown.add(f));b.onMouseUp.add(b.nodeChanged);b.onKeyUp.add(function(a,c){var e=c.keyCode;(e>=33&&e<=36||e>=37&&e<=40||e==13||e==45||e==46||e==8||d.isMac&&(e==91||e==93)||c.ctrlKey)&&b.nodeChanged()});b.onKeyDown.add(function(a,
b){if(b.keyCode==w.BACKSPACE){var c=a.selection.getRng(true);if(c.collapsed){for(var d=c.startContainer,e=c.startOffset;d&&d.nodeType&&d.nodeType!=1&&d.parentNode;)d=d.parentNode;if(d&&d.parentNode&&d.parentNode.tagName==="BLOCKQUOTE"&&d.parentNode.firstChild==d&&e===0){a.formatter.toggle("blockquote",null,d.parentNode);c.setStart(d,0);c.setEnd(d,0);a.selection.setRng(c);a.selection.collapse(false)}}}});b.onReset.add(function(){b.setContent(b.startContent,{format:"raw"})});if(c.custom_shortcuts){c.custom_undo_redo_keyboard_shortcuts&&
(b.addShortcut("ctrl+z",b.getLang("undo_desc"),"Undo"),b.addShortcut("ctrl+y",b.getLang("redo_desc"),"Redo"));b.addShortcut("ctrl+b",b.getLang("bold_desc"),"Bold");b.addShortcut("ctrl+i",b.getLang("italic_desc"),"Italic");b.addShortcut("ctrl+u",b.getLang("underline_desc"),"Underline");var k=function(a){var c=null;if(!a.altKey&&!a.ctrlKey&&!a.metaKey)return c;j(b.shortcuts,function(b){if(!d.isMac||!(b.ctrl!=a.metaKey&&b.ctrl!=a.ctrlKey))if((d.isMac||b.ctrl==a.ctrlKey)&&b.alt==a.altKey&&b.shift==a.shiftKey)if(a.keyCode==
b.keyCode||a.charCode&&a.charCode==b.charCode){c=b;return false}});return c};b.onKeyUp.add(function(a,b){if(k(b))return i.cancel(b)});b.onKeyPress.add(function(a,b){if(k(b))return i.cancel(b)});b.onKeyDown.add(function(a,b){var c=k(b);if(c){c.func.call(c.scope);return i.cancel(b)}})}d.isIE&&e.bind(b.getDoc(),"controlselect",function(a){var c=b.resizeInfo,a=a.target;if(a.nodeName==="IMG"){c&&e.unbind(c.node,c.ev,c.cb);if(e.hasClass(a,"mceItemNoResize")){ev="resizestart";c=e.bind(a,"resizestart",i.cancel,
i)}else{ev="resizeend";c=e.bind(a,ev,function(a){var b,a=a.target;if(b=e.getStyle(a,"width")){e.setAttrib(a,"width",b.replace(/[^0-9%]+/g,""));e.setStyle(a,"width","")}if(b=e.getStyle(a,"height")){e.setAttrib(a,"height",b.replace(/[^0-9%]+/g,""));e.setStyle(a,"height","")}})}c=b.resizeInfo={node:a,ev:ev,cb:c}}});d.isOpera&&b.onClick.add(function(a,b){i.prevent(b)});if(c.custom_undo_redo){var l=function(){b.undoManager.typing=false;b.undoManager.add()},f=d.isGecko?"blur":"focusout";e.bind(b.getDoc(),
f,function(){!b.removed&&b.undoManager.typing&&l()});b.dom.bind(b.dom.getRoot(),"dragend",function(){l()});b.onKeyUp.add(function(a,b){var c=b.keyCode;(c>=33&&c<=36||c>=37&&c<=40||c==13||c==45||b.ctrlKey)&&l()});b.onKeyDown.add(function(a,c){var e=c.keyCode,f;if(e==8)if((f=b.getDoc().selection)&&f.createRange&&f.createRange().item){b.undoManager.beforeChange();a.dom.remove(f.createRange().item(0));l();return i.cancel(c)}if(e>=33&&e<=36||e>=37&&e<=40||e==13||e==45){d.isIE&&e==13&&b.undoManager.beforeChange();
b.undoManager.typing&&l()}else if((e<16||e>20)&&e!=224&&e!=91&&!b.undoManager.typing){b.undoManager.beforeChange();b.undoManager.typing=true;b.undoManager.add()}});b.onMouseDown.add(function(){b.undoManager.typing&&l()})}if(d.isGecko){var n=function(){var a=b.dom.getAttribs(b.selection.getStart().cloneNode(false));return function(){var c=b.selection.getStart();if(c!==b.getBody()){b.dom.setAttrib(c,"style",null);j(a,function(a){c.setAttributeNode(a.cloneNode(true))})}}},m=function(){var a=b.selection;
return!a.isCollapsed()&&a.getStart()!=a.getEnd()};b.onKeyPress.add(function(a,c){var d;if((c.keyCode==8||c.keyCode==46)&&m()){d=n();b.getDoc().execCommand("delete",false,null);d();return i.cancel(c)}});b.dom.bind(b.getDoc(),"cut",function(){var a;if(m()){a=n();b.onKeyUp.addToTop(i.cancel,i);setTimeout(function(){a();b.onKeyUp.remove(i.cancel,i)},0)}})}},_refreshContentEditable:function(){var a,b;this._isHidden()&&(a=this.getBody(),b=a.parentNode,b.removeChild(a),b.appendChild(a),a.focus())},_isHidden:function(){var a;
if(!p)return 0;a=this.selection.getSel();return!a||!a.rangeCount||0==a.rangeCount}})})(tinymce);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.tinymce:atlassian-rte-javascript-tinymce-core', location = 'jscripts/tiny_mce/classes/EditorCommands.js' */
(function(k){var r=k.each,i=!0,p=!1;k.EditorCommands=function(e){function u(b,a,c){var d,b=b.toLowerCase();return(d=s.exec[b])?(d(b,a,c),i):p}function j(b){var a,b=b.toLowerCase();return(a=s.state[b])?a(b):-1}function q(b,a){a=a||"exec";r(b,function(b,d){r(d.toLowerCase().split(","),function(d){s[a][d]=b})})}function t(b,a,c){void 0===a&&(a=p);void 0===c&&(c=null);return e.getDoc().execCommand(b,a,c)}function m(b,a){h.toggle(b,a?{value:a}:void 0)}var f=e.dom,d=e.selection,s={state:{},exec:{},value:{}},
n=e.settings,h=e.formatter,o;k.extend(this,{execCommand:u,queryCommandState:j,queryCommandValue:function(b){var a,b=b.toLowerCase();return(a=s.value[b])?a(b):p},addCommands:q});q({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){e.undoManager.add()},"Cut,Copy,Paste":function(b){var a=e.getDoc(),c;try{t(b)}catch(d){c=i}if(c||!a.queryCommandSupported(b))k.isGecko?e.windowManager.confirm(e.getLang("clipboard_msg"),function(a){a&&open("http://www.mozilla.org/editor/midasdemo/securityprefs.html",
"_blank")}):e.windowManager.alert(e.getLang("clipboard_no_support"))},unlink:function(b){d.isCollapsed()&&d.select(d.getNode());t(b);d.collapse(p)},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(b){var a=b.substring(7);e.undoManager.add();var c=d.getRng(),f=d.getNode();r(["left","center","right","full"],function(b){a!=b&&h.remove("align"+b);!tinyMCE.isIE&&("IMG"==f.nodeName&&("#document"==d.getRng().startContainer.nodeName||"#text"==d.getRng().startContainer.nodeName))&&d.setRng(c)});
m("align"+a);u("mceRepaint")},"InsertUnorderedList,InsertOrderedList":function(b){var a;t(b);if(b=f.getParent(d.getNode(),"ol,ul"))a=b.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(a.nodeName)&&(o=d.getBookmark(void 0),f.split(a,b),d.moveToBookmark(o))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(b){m(b)},"ForeColor,HiliteColor,FontName":function(b,a,c){m(b,c)},FontSize:function(b,a,c){var d;1<=c&&7>=c&&(d=k.explode(n.font_size_style_values),c=(a=k.explode(n.font_size_classes))?
a[c-1]||c:d[c-1]||c);m(b,c)},RemoveFormat:function(b){h.remove(b)},mceBlockQuote:function(){m("blockquote")},FormatBlock:function(b,a,c){return m(c||"p")},mceCleanup:function(){var b=d.getBookmark();e.setContent(e.getContent({cleanup:i}),{cleanup:i});d.moveToBookmark(b)},mceRemoveNode:function(b,a,c){b=c||d.getNode();b!=e.getBody()&&(o=d.getBookmark(void 0),e.dom.remove(b,i),d.moveToBookmark(o))},mceSelectNodeDepth:function(b,a,c){var l=0;f.getParent(d.getNode(),function(a){if(1==a.nodeType&&l++==
c)return d.select(a),p},e.getBody())},mceSelectNode:function(b,a,c){d.select(c)},mceInsertContent:function(b,a,c){var l,i,g,h,j;l=e.parser;i=new k.html.Serializer({},e.schema);b={content:c,format:"html"};d.onBeforeSetContent.dispatch(d,b);c=b.content;-1==c.indexOf("{$caret}")&&(c+="{$caret}");c=c.replace(/\{\$caret\}/,'<span id="mce_marker" data-mce-type="bookmark">﻿</span>');!d.isCollapsed()&&d.getContent().length&&e.execCommand("mceDelete",!1,null,{skip_undo:!0});g=d.getNode();b={context:g.nodeName.toLowerCase()};
j=l.parse(c,b);a=j.lastChild;if("mce_marker"==a.attr("id")){c=a;for(a=a.prev;a;a=a.walk(!0))if(3==a.type||!f.isBlock(a.name)){a.parent.insert(c,a,"br"===a.name);break}}if(b.invalid){d.setContent('<span id="mce_marker" data-mce-type="bookmark">﻿</span>');g=e.selection.getNode();h=e.getBody();for(9==g.nodeType?g=a=h:a=g;a!==h;)g=a,a=a.parentNode;c=g==h?h.innerHTML:f.getOuterHTML(g);c=i.serialize(l.parse(c.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return i.serialize(j)})));
g==h?f.setHTML(h,c):f.setOuterHTML(g,c)}else c=i.serialize(j),a=g.firstChild,l=g.lastChild,!a||a===l&&"BR"===a.nodeName?f.setHTML(g,c):d.setContent(c);c=f.get("mce_marker");a=f.getRect(c);g=f.getViewPort(e.getWin());if(a.y+a.h>g.y+g.h||a.y<g.y||a.x>g.x+g.w||a.x<g.x)l=k.isIE?e.getDoc().documentElement:e.getBody(),l.scrollLeft=a.x,l.scrollTop=a.y-g.h+25;g=f.createRng();(a=c.previousSibling)&&3==a.nodeType?g.setStart(a,a.nodeValue.length):(g.setStartBefore(c),g.setEndBefore(c));f.remove(c);d.setRng(g);
d.onSetContent.dispatch(d,b);e.addVisual()},mceInsertRawHTML:function(b,a,c){d.setContent("tiny_mce_marker");e.setContent(e.getContent().replace(/tiny_mce_marker/g,function(){return c}))},mceSetContent:function(b,a,c){e.setContent(c)},"Indent,Outdent":function(b){var a,c,e;a=n.indentation;c=/[a-z%]+$/i.exec(a);a=parseInt(a);!j("InsertUnorderedList")&&!j("InsertOrderedList")&&!j("InsertInlineTaskList")?r(d.getSelectedBlocks(),function(d){"outdent"==b?(e=Math.max(0,parseInt(d.style.paddingLeft||0)-
a),f.setStyle(d,"paddingLeft",e?e+c:"")):f.setStyle(d,"paddingLeft",parseInt(d.style.paddingLeft||0)+a+c)}):t(b)},mceRepaint:function(){if(k.isGecko)try{o=d.getBookmark(i),d.getSel()&&d.getSel().selectAllChildren(e.getBody()),d.collapse(i),d.moveToBookmark(o)}catch(b){}},mceToggleFormat:function(b,a,c){h.toggle(c)},InsertHorizontalRule:function(){e.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){e.hasVisual=!e.hasVisual;e.addVisual()},mceReplaceContent:function(b,a,c){e.execCommand("mceInsertContent",
!1,c.replace(/\{\$selection\}/g,d.getContent({format:"text"})))},mceInsertLink:function(b,a,c){"string"==typeof c&&(c={href:c});b=f.getParent(d.getNode(),"a");c.href=c.href.replace(" ","%20");(!b||!c.href)&&h.remove("link");c.href&&h.apply("link",c,b)},selectAll:function(){var b=f.getRoot(),a=f.createRng();a.setStart(b,0);a.setEnd(b,b.childNodes.length);e.selection.setRng(a)}});q({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(b){var a="align"+b.substring(7),b=d.isCollapsed()?[d.getNode()]:
d.getSelectedBlocks(),b=k.map(b,function(b){return!!h.matchNode(b,a)});return-1!==k.inArray(b,i)},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(b){return h.match(b)},mceBlockQuote:function(){return h.match("blockquote")},Outdent:function(){var b;return n.inline_styles&&((b=f.getParent(d.getStart(),f.isBlock))&&0<parseInt(b.style.paddingLeft)||(b=f.getParent(d.getEnd(),f.isBlock))&&0<parseInt(b.style.paddingLeft))?i:j("InsertUnorderedList")||j("InsertOrderedList")||j("InsertInlineTaskList")||
!n.inline_styles&&!!f.getParent(d.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList,InsertInlineTaskList":function(b){var a=f.getParent(d.getNode(),"ul,ol"),c;if(!a)return!1;c=a.tagName;return"OL"===c&&"insertorderedlist"===b||"UL"===c&&!f.hasClass(a,"inline-task-list")&&"insertunorderedlist"===b||"UL"===c&&f.hasClass(a,"inline-task-list")&&"insertinlinetasklist"===b}},"state");q({"FontSize,FontName":function(b){var a=0,c;if(c=f.getParent(d.getNode(),"span"))a="fontsize"==b?c.style.fontSize:
c.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase();return a}},"value");n.custom_undo_redo&&q({Undo:function(){e.undoManager.undo()},Redo:function(){e.undoManager.redo()}})}})(tinymce);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.tinymce:atlassian-rte-javascript-tinymce-core', location = 'jscripts/tiny_mce/classes/UndoManager.js' */
(function(g){var h=g.util.Dispatcher;g.UndoManager=function(e){var c,d=0,b=[],i;return c={typing:!1,onAdd:new h(c),onUndo:new h(c),onRedo:new h(c),beforeChange:function(){i=e.selection.getBookmark(2,!0)},add:function(a){var f;f=e.settings;var j,a=a||{};a.content=g.trim(e.getContent({format:"raw",no_events:1}));if((j=b[d])&&j.content==a.content)return null;b[d]&&(b[d].beforeBookmark=i);if(f.custom_undo_redo_levels&&b.length>f.custom_undo_redo_levels){for(f=0;f<b.length-1;f++)b[f]=b[f+1];b.length--;
d=b.length}a.bookmark=e.selection.getBookmark(2,!0);d<b.length-1&&(b.length=d+1);b.push(a);d=b.length-1;c.onAdd.dispatch(c,a);e.isNotDirty=0;return a},undo:function(){var a;c.typing&&(c.add(),c.typing=!1);0<d&&(a=b[--d],e.setContent(a.content,{format:"raw"}),e.selection.moveToBookmark(a.beforeBookmark),c.onUndo.dispatch(c,a));return a},redo:function(){var a;d<b.length-1&&(a=b[++d],e.setContent(a.content,{format:"raw"}),e.selection.moveToBookmark(a.bookmark),c.onRedo.dispatch(c,a));return a},clear:function(){b=
[];d=0;c.typing=!1},hasUndo:function(){return 0<d||this.typing},hasRedo:function(){return d<b.length-1&&!this.typing},ignore:function(a,c){var d=b.slice();a.call(c||e);b=d}}}})(tinymce);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.tinymce:atlassian-rte-javascript-tinymce-core', location = 'jscripts/tiny_mce/classes/ForceBlocks.js' */
(function(s){var u=s.dom.Event,y=s.isIE,z=s.isGecko,x=s.isOpera,t=!1;s.create("tinymce.ForceBlocks",{ForceBlocks:function(k){var a=k.settings,h;this.editor=k;this.dom=k.dom;h=(a.forced_root_block||"p").toLowerCase();a.element=h.toUpperCase();k.onPreInit.add(this.setup,this)},setup:function(){var k=this,a=k.editor,h=a.settings,d=a.dom,f=a.selection,n=a.schema.getBlockElements();if(h.forced_root_block){var c=function(){var b=f.getStart(),o=d.getRoot(),c=a.getDoc().body,e,g,k,p,j,l;if(b&&1===b.nodeType){for(;b!=
o;)if(b&&1===b.nodeType){if(n[b.nodeName])return;b=b.parentNode}else return;e=f.getRng();if(e.setStart)g=e.startContainer,k=e.startOffset,p=e.endContainer,j=e.endOffset;else if(e.item&&(e=a.getDoc().body.createTextRange(),e.moveToElementText(e.item(0))),tmpRng=e.duplicate(),tmpRng.collapse(!0),k=-1*tmpRng.move("character",-16777215),!tmpRng.collapsed)tmpRng=e.duplicate(),tmpRng.collapse(!1),j=-1*tmpRng.move("character",-16777215)-k;for(b=o.firstChild;b;b)3===b.nodeType||1==b.nodeType&&!n[b.nodeName]?
(l||(l=d.create(h.forced_root_block),b.parentNode.insertBefore(l,b)),o=b,b=b.nextSibling,l.appendChild(o)):(l=null,b=b.nextSibling);if(e.setStart)e.setStart(g,k),e.setEnd(p,j),f.setRng(e);else try{e=c.createTextRange(),e.moveToElementText(c),e.move("character",-16777215),e.collapse(!0),e.moveStart("character",k),0<j&&e.moveEnd("character",j),e.select()}catch(q){}a.nodeChanged()}};a.onKeyUp.add(c);a.onKeyDown.add(c);a.onClick.add(c)}h.force_br_newlines&&y&&a.onKeyPress.add(function(b,a){var c;if(13==
a.keyCode&&"LI"!=f.getNode().nodeName)return f.setContent('<br id="__" /> ',{format:"raw"}),c=d.get("__"),c.removeAttribute("id"),f.select(c),f.collapse(),u.cancel(a)});h.force_p_newlines&&(y||a.onKeyPress.add(function(b,a){13==a.keyCode&&(!a.shiftKey&&!k.insertPara(a))&&u.cancel(a)}),z&&a.onKeyDown.add(function(b,a){(8==a.keyCode||46==a.keyCode)&&!a.shiftKey&&k.backspaceDelete(a,8==a.keyCode)}));s.isWebKit&&a.onKeyPress.add(function(a,c){if(c.keyCode==13&&(c.shiftKey||h.force_br_newlines&&!d.getParent(f.getNode(),
"h1,h2,h3,h4,h5,h6,ol,ul"))){var i=f.getRng(),e,g=d.create("div",null," "),k=d.getViewPort(a.getWin());i.insertNode(e=d.create("br"));i.setStartAfter(e);i.setEndAfter(e);f.setRng(i);if(f.getSel().focusNode==e.previousSibling){f.select(d.insertAfter(d.doc.createTextNode(" "),e));f.collapse(true)}d.insertAfter(g,e);i=d.getPos(g).y;e=d.getSize(g).h;d.remove(g);g=i+e;g>k.y+k.h&&a.getWin().scrollTo(0,g-k.h);u.cancel(c)}});y&&"P"!=h.element&&(a.onKeyPress.add(function(){k.lastElm=f.getNode().nodeName}),
a.onKeyUp.add(function(a,c){var i;i=f.getNode();if(a.getBody().childNodes.length===1&&i.nodeName=="P"){i=d.rename(i,h.element);f.select(i);f.collapse();a.nodeChanged()}else if(c.keyCode==13&&!c.shiftKey&&k.lastElm!="P")if(i=d.getParent(i,"p")){d.rename(i,h.element);a.nodeChanged()}}))},getParentBlock:function(k){var a=this.dom;return a.getParent(k,a.isBlock)},insertPara:function(){function k(a,b){var c=[],d,e;a.innerHTML="";if(f.keep_styles){e=b;do/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(e.nodeName)&&
(d=e.cloneNode(t),h.setAttrib(d,"id",""),c.push(d));while(e=e.parentNode)}if(0<c.length){e=c.length-1;for(d=a;0<=e;e--)d=d.appendChild(c[e]);c[0].innerHTML=x?" ":"<br />";return c[0]}a.innerHTML=x?" ":"<br />"}var a=this.editor,h=a.dom,d=a.getDoc(),f=a.settings,n=a.selection.getSel(),c=n.getRangeAt(0),b=d.body,o,i,e,g,v,p,j,l,q,w,m,r=h.getViewPort(a.getWin());a.undoManager.beforeChange();o=d.createRange();o.setStart(n.anchorNode,n.anchorOffset);o.collapse(!0);i=d.createRange();i.setStart(n.focusNode,
n.focusOffset);i.collapse(!0);g=(e=0>o.compareBoundaryPoints(o.START_TO_END,i))?n.anchorNode:n.focusNode;v=e?n.anchorOffset:n.focusOffset;p=e?n.focusNode:n.anchorNode;n=e?n.focusOffset:n.anchorOffset;if(s.isWebKit&&g===p&&1===g.nodeType&&0<g.childNodes.length&&a.dom.is(q=g.childNodes[0<v?v-1:0],"table"))return d=h.create("p",0,'<br data-mce-bogus="1" />'),h.insertAfter(d,q),c.setStart(d,0),a.selection.setRng(c),d=a.dom.getPos(d).y,d>r.y&&a.getWin().scrollTo(0,d),a.undoManager.add(),t;if(g===p&&/^(TD|TH)$/.test(g.nodeName))return"BR"==
g.firstChild.nodeName&&h.remove(g.firstChild),0==g.childNodes.length?a.dom.add(g,f.element,null,"<br />"):(m=g.innerHTML,g.innerHTML="",a.dom.add(g,f.element,null,m)),l=a.dom.add(g,f.element,null,"<br />"),c=d.createRange(),c.selectNodeContents(l),c.collapse(1),a.selection.setRng(c),t;g==b&&(p==b&&b.firstChild&&a.dom.isBlock(b.firstChild))&&(g=p=g.firstChild,v=n=0,o=d.createRange(),o.setStart(g,0),i=d.createRange(),i.setStart(p,0));d.body.hasChildNodes()||d.body.appendChild(h.create("br"));g="HTML"==
g.nodeName?d.body:g;g="BODY"==g.nodeName?g.firstChild:g;p="HTML"==p.nodeName?d.body:p;p="BODY"==p.nodeName?p.firstChild:p;q=a.dom.getRoot();g.nodeName==q.nodeName&&(g=g.firstChild,v=0);p.nodeName==q.nodeName&&(p=p.firstChild,n=0);j=this.getParentBlock(g);l=this.getParentBlock(p);q=j?j.nodeName:f.element;if(m=this.dom.getParent(j,"li,pre"))return"LI"==m.nodeName?(a=a.selection,r=this.dom,d=m,r.isEmpty(d)?(b=r.getParent(d,"ul,ol"),r.getParent(b.parentNode,"ul,ol")||(r.split(b,d),b=r.create("p",0,'<br data-mce-bogus="1" />'),
r.replace(b,d),a.select(b,1)),AJS.Rte.showSelection(),a=t):a=!0,a):!0;if(j&&("CAPTION"==j.nodeName||/absolute|relative|fixed/gi.test(h.getStyle(j,"position",1))))q=f.element,j=null;if(l&&("CAPTION"==l.nodeName||/absolute|relative|fixed/gi.test(h.getStyle(j,"position",1))))q=f.element,l=null;if(/(TD|TABLE|TH|CAPTION)/.test(q)||j&&"DIV"==q&&/left|right/gi.test(h.getStyle(j,"float",1)))q=f.element,j=l=null;e=j&&j.nodeName==q?j.cloneNode(0):a.dom.create(q);l=l&&l.nodeName==q?l.cloneNode(0):a.dom.create(q);
l.removeAttribute("id");if(m=/^(H[1-6])$/.test(q))m=j,j=m.ownerDocument.createRange(),j.setStart(c.endContainer,c.endOffset),j.setEndAfter(m),m=0==j.cloneContents().textContent.length;m&&(l=a.dom.create(f.element));m=j=g;do{if(m==b||9==m.nodeType||this.dom.isBlock(m)||/(TD|TABLE|TH|CAPTION)/.test(m.nodeName))break;j=m}while(m=m.previousSibling?m.previousSibling:m.parentNode);m=w=p;do{if(m==b||9==m.nodeType||this.dom.isBlock(m)||/(TD|TABLE|TH|CAPTION)/.test(m.nodeName))break;w=m}while(m=m.nextSibling?
m.nextSibling:m.parentNode);j.nodeName==q?o.setStart(j,0):o.setStartBefore(j);o.setEnd(g,v);e.appendChild(o.cloneContents()||d.createTextNode(""));try{i.setEndAfter(w)}catch(u){}i.setStart(p,n);l.appendChild(i.cloneContents()||d.createTextNode(""));c=d.createRange();!j.previousSibling&&j.parentNode.nodeName==q?c.setStartBefore(j.parentNode):o.startContainer.nodeName==q&&0==o.startOffset?c.setStartBefore(o.startContainer):c.setStart(o.startContainer,o.startOffset);!w.nextSibling&&w.parentNode.nodeName==
q?c.setEndAfter(w.parentNode):c.setEnd(i.endContainer,i.endOffset);c.deleteContents();x&&a.getWin().scrollTo(0,r.y);e.firstChild&&e.firstChild.nodeName==q&&(e.innerHTML=e.firstChild.innerHTML);l.firstChild&&l.firstChild.nodeName==q&&(l.innerHTML=l.firstChild.innerHTML);h.isEmpty(e)&&k(e,g);h.isEmpty(l)&&k(l,p);x&&9.5>parseFloat(opera.version())?(c.insertNode(e),c.insertNode(l)):(c.insertNode(l),c.insertNode(e));l.normalize();e.normalize();a.selection.select(l,!0);a.selection.collapse(!0);d=a.dom.getPos(l).y;
if(d<r.y||d+25>r.y+r.h)a.getWin().scrollTo(0,d<r.y?d:d-r.h+25);a.undoManager.add();return t},backspaceDelete:function(k,a){var h=this.editor,d=h.getBody(),f,n=h.selection,c=n.getRng(),b=c.startContainer,o;if(!(k.getPreventDefault?k.getPreventDefault():k.defaultPrevented)){if(!a&&c.collapsed&&1==b.nodeType&&c.startOffset==b.childNodes.length){o=new s.dom.TreeWalker(b.lastChild,b);for(f=b.lastChild;f;f=o.prev())if(3==f.nodeType){c.setStart(f,f.nodeValue.length);c.collapse(!0);n.setRng(c);return}}if(b&&
(h.dom.isBlock(b)&&!/^(TD|TH)$/.test(b.nodeName)&&a)&&(0==b.childNodes.length||1==b.childNodes.length&&"BR"==b.firstChild.nodeName)){for(f=b;(f=f.previousSibling)&&!h.dom.isBlock(f););if(f){if(b!=d.firstChild){for(d=h.dom.doc.createTreeWalker(f,NodeFilter.SHOW_TEXT,null,t);c=d.nextNode();)f=c;c=h.getDoc().createRange();c.setStart(f,f.nodeValue?f.nodeValue.length:0);c.setEnd(f,f.nodeValue?f.nodeValue.length:0);n.setRng(c);h.dom.remove(b)}return u.cancel(k)}}if(!a&&c.collapsed&&/^(BODY)$/.test(b.nodeName)&&
(b=b.childNodes[c.startOffset])&&(h.dom.isBlock(b)&&!/^(TD|TH)$/.test(b.nodeName))&&(0==b.childNodes.length||1==b.childNodes.length&&"BR"==b.firstChild.nodeName)){f=b;for(var i;f=f.nextSibling;)if(h.dom.isBlock(f)){i=f;break}if(i&&b!=d.lastChild)return d=h.dom.doc.createTreeWalker(i,NodeFilter.SHOW_TEXT,null,t),i=d.nextNode(),c=h.getDoc().createRange(),c.setStart(i,0),c.setEnd(i,0),n.setRng(c),h.dom.remove(b),u.cancel(k)}}}})})(tinymce);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.tinymce:atlassian-rte-javascript-tinymce-core', location = 'jscripts/tiny_mce/classes/ControlManager.js' */
(function(e){var k=e.dom.Event,i=e.each,h=e.extend;e.create("tinymce.ControlManager",{ControlManager:function(b,a){var c=this,a=a||{};c.editor=b;c.controls={};c.onAdd=new e.util.Dispatcher(c);c.onPostRender=new e.util.Dispatcher(c);c.prefix=a.prefix||b.id+"_";c._cls={};c.onPostRender.add(function(){i(c.controls,function(a){a.postRender()})})},get:function(b){return this.controls[this.prefix+b]||this.controls[b]},setActive:function(b,a){var c=null;(c=this.get(b))&&c.setActive(a);return c},setDisabled:function(b,
a){var c=null;(c=this.get(b))&&c.setDisabled(a);return c},add:function(b){b&&(this.controls[b.id]=b,this.onAdd.dispatch(b,this));return b},createControl:function(b){var a,c=this,d=c.editor;i(d.plugins,function(d){if(d.createControl&&(a=d.createControl(b,c)))return!1});switch(b){case "|":case "separator":return c.createSeparator()}return!a&&d.buttons&&(a=d.buttons[b])?c.createButton(b,a):c.add(a)},createDropMenu:function(b,a,c){var d=this.editor,f,g,j,a=h({"class":"mceDropDown",constrain:d.settings.constrain_menus},
a);a["class"]=a["class"]+" "+d.getParam("skin")+"Skin";if(j=d.getParam("skin_variant"))a["class"]+=" "+d.getParam("skin")+"Skin"+j.substring(0,1).toUpperCase()+j.substring(1);b=this.prefix+b;f=this.controls[b]=new (c||this._cls.dropmenu||e.ui.DropMenu)(b,a);f.onAddItem.add(function(a,b){var c=b.settings;c.title=d.getLang(c.title,c.title);c.onclick||(c.onclick=function(){c.cmd&&d.execCommand(c.cmd,c.ui||!1,c.value)})});d.onRemove.add(function(){f.destroy()});e.isIE&&(f.onShowMenu.add(function(){d.focus();
g=d.selection.getBookmark(1)}),f.onHideMenu.add(function(){g&&(d.selection.moveToBookmark(g),g=0)}));return this.add(f)},createListBox:function(b,a,c){var d=this.editor;if(this.get(b))return null;a.title=d.translate(a.title);a.scope=a.scope||d;a.onselect||(a.onselect=function(b){d.execCommand(a.cmd,a.ui||!1,b||a.value)});a=h({title:a.title,"class":"mce_"+b,scope:a.scope,control_manager:this},a);b=this.prefix+b;d.settings.use_native_selects||d.settings.use_accessible_selects&&!e.isGecko?c=new e.ui.NativeListBox(b,
a):(c=c||this._cls.listbox||e.ui.ListBox,c=new c(b,a,d));this.controls[b]=c;e.isWebKit&&c.onPostRender.add(function(a,b){k.add(b,"mousedown",function(){d.bookmark=d.selection.getBookmark(1)});k.add(b,"focus",function(){d.selection.moveToBookmark(d.bookmark);d.bookmark=null})});c.hideMenu&&d.onMouseDown.add(c.hideMenu,c);return this.add(c)},createButton:function(b,a,c){var d=this.editor;if(this.get(b))return null;a.title=d.translate(a.title);a.label=d.translate(a.label);a.scope=a.scope||d;!a.onclick&&
!a.menu_button&&(a.onclick=function(){d.execCommand(a.cmd,a.ui||!1,a.value)});a=h({title:a.title,"class":"mce_"+b,unavailable_prefix:d.getLang("unavailable",""),scope:a.scope,control_manager:this},a);b=this.prefix+b;a.menu_button?(c=c||this._cls.menubutton||e.ui.MenuButton,b=new c(b,a,d),d.onMouseDown.add(b.hideMenu,b)):(c=this._cls.button||e.ui.Button,b=new c(b,a,d));return this.add(b)},createMenuButton:function(b,a,c){a=a||{};a.menu_button=1;return this.createButton(b,a,c)},createSplitButton:function(b,
a,c){var d=this.editor;if(this.get(b))return null;a.title=d.translate(a.title);a.scope=a.scope||d;a.onclick||(a.onclick=function(b){d.execCommand(a.cmd,a.ui||!1,b||a.value)});a.onselect||(a.onselect=function(b){d.execCommand(a.cmd,a.ui||false,b||a.value)});a=h({title:a.title,"class":"mce_"+b,scope:a.scope,control_manager:this},a);b=this.prefix+b;b=this.add(new (c||this._cls.splitbutton||e.ui.SplitButton)(b,a,d));d.onMouseDown.add(b.hideMenu,b);return b},createColorSplitButton:function(b,a,c){var d=
this.editor,f,g;if(this.get(b))return null;a.title=d.translate(a.title);a.scope=a.scope||d;a.onclick||(a.onclick=function(b){e.isIE&&(g=d.selection.getBookmark(1));d.execCommand(a.cmd,a.ui||!1,b||a.value)});a.onselect||(a.onselect=function(b){d.execCommand(a.cmd,a.ui||false,b||a.value)});a=h({title:a.title,"class":"mce_"+b,menu_class:d.getParam("skin")+"Skin",scope:a.scope,more_colors_title:d.getLang("more_colors")},a);b=this.prefix+b;f=new (c||this._cls.colorsplitbutton||e.ui.ColorSplitButton)(b,
a,d);d.onMouseDown.add(f.hideMenu,f);d.onRemove.add(function(){f.destroy()});e.isIE&&(f.onShowMenu.add(function(){d.focus();g=d.selection.getBookmark(1)}),f.onHideMenu.add(function(){if(g){d.selection.moveToBookmark(g);g=0}}));return this.add(f)},createToolbar:function(b,a,c){b=this.prefix+b;a=new (c||this._cls.toolbar||e.ui.Toolbar)(b,a,this.editor);return this.get(b)?null:this.add(a)},createToolbarGroup:function(b,a,c){b=this.prefix+b;a=new (c||this._cls.toolbarGroup||e.ui.ToolbarGroup)(b,a,this.editor);
return this.get(b)?null:this.add(a)},createSeparator:function(b){return new (b||this._cls.separator||e.ui.Separator)},setControlType:function(b,a){return this._cls[b.toLowerCase()]=a},destroy:function(){i(this.controls,function(b){b.destroy()});this.controls=null}})})(tinymce);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.tinymce:atlassian-rte-javascript-tinymce-core', location = 'jscripts/tiny_mce/classes/WindowManager.js' */
(function(e){var i=e.util.Dispatcher,l=e.each,j=e.isIE,k=e.isOpera;e.create("tinymce.WindowManager",{WindowManager:function(a){this.editor=a;this.onOpen=new i(this);this.onClose=new i(this);this.params={};this.features={}},open:function(a,b){var c="",d="modal"==this.editor.settings.dialog_type,g,f,h;h=e.DOM.getViewPort();a=a||{};b=b||{};f=k?h.w:screen.width;h=k?h.h:screen.height;a.name=a.name||"mc_"+(new Date).getTime();a.width=parseInt(a.width||320);a.height=parseInt(a.height||240);a.resizable=!0;
a.left=a.left||parseInt(f/2)-a.width/2;a.top=a.top||parseInt(h/2)-a.height/2;b.inline=!1;b.mce_width=a.width;b.mce_height=a.height;b.mce_auto_focus=a.auto_focus;d&&j&&(a.center=!0,a.help=!1,a.dialogWidth=a.width+"px",a.dialogHeight=a.height+"px",a.scroll=a.scrollbars||!1);l(a,function(a,b){e.is(a,"boolean")&&(a=a?"yes":"no");/^(name|url)$/.test(b)||(c=j&&d?c+((c?";":"")+b+":"+a):c+((c?",":"")+b+"="+a))});this.features=a;this.params=b;this.onOpen.dispatch(this,a,b);f=a.url||a.file;f=e._addVer(f);try{j&&
d?(g=1,window.showModalDialog(f,window,c)):g=window.open(f,a.name,c)}catch(i){}g||alert(this.editor.getLang("popup_blocked"))},close:function(a){a.close();this.onClose.dispatch(this)},createInstance:function(a,b,c,d,g,f){return new (e.resolve(a))(b,c,d,g,f)},confirm:function(a,b,c,d){d=d||window;b.call(c||this,d.confirm(this._decode(this.editor.getLang(a,a))))},alert:function(a,b,c,d){d=d||window;d.alert(this._decode(this.editor.getLang(a,a)));b&&b.call(c||this)},resizeBy:function(a,b,c){c.resizeBy(a,
b)},_decode:function(a){return e.DOM.decode(a).replace(/\\n/g,"\n")}})})(tinymce);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.tinymce:atlassian-rte-javascript-tinymce-core', location = 'jscripts/tiny_mce/classes/Formatter.js' */
(function(w){w.Formatter=function(r){function M(b){return 1===b.nodeType&&"_mce_caret"===b.id}function A(b){return b?N[b]:N}function X(b,c){b&&("string"!==typeof b?p(b,function(a,c){X(c,a)}):(c=c.length?c:[c],p(c,function(a){void 0===a.deep&&(a.deep=!a.selector);void 0===a.split&&(a.split=!a.selector||a.inline);void 0===a.remove&&(a.selector&&!a.inline)&&(a.remove="none");a.selector&&a.inline&&(a.mixed=!0,a.block_expand=!0);"string"===typeof a.classes&&(a.classes=a.classes.split(/\s+/))}),N[b]=c))}
function J(b,c,a){function g(b,j){j=j||d;if(b){if(j.onformat)j.onformat(b,j,c,a);p(j.styles,function(a,j){f.setStyle(b,j,u(a,c))});p(j.attributes,function(a,j){f.setAttrib(b,j,u(a,c))});p(j.classes,function(a){a=u(a,c);f.hasClass(b,a)||f.addClass(b,a)})}}function k(){var b=r.selection.getRng(),c=b.startContainer,l=b.endContainer;if(c!=l&&0==b.endOffset){a:{l=new C(l);for(a=l.current();a;a=l.prev())if(1<a.childNodes.length||a==c){c=a;break a}c=void 0}b.setEnd(c,3==c.nodeType?c.length:c.childNodes.length)}return b}
function e(a,j,l){var i=[],e,k;e=d.inline||d.block;k=f.create(e);g(k);K.walk(a,function(a){function q(a){var v=a.nodeName.toLowerCase(),t=a.parentNode.nodeName.toLowerCase(),o;if(D(v,"br"))z=0,d.block&&f.remove(a);else if(d.wrapper&&E(a,b,c))z=0;else if(d.block&&!d.wrapper&&/^(h[1-6]|p|div|pre|address|dl|dt|dd)$/.test(v))a=f.rename(a,e),g(a),i.push(a),z=0;else{if(d.selector&&(p(m,function(c){!("collapsed"in c&&c.collapsed!==h)&&(f.is(a,c.selector)&&!M(a))&&(g(a,c),o=!0)}),!d.inline||o)){z=0;return}if(O(e,
v)&&O(t,e)&&(l||!(3===a.nodeType&&1===a.nodeValue.length&&65279===a.nodeValue.charCodeAt(0)))&&!M(a))z||(z=k.cloneNode(s),a.parentNode.insertBefore(z,a),i.push(z)),z.appendChild(a);else if("li"==v&&j){var v=a,r=j,t=k,n=i,y=q,x=[],B=-1,A,u=-1,C=-1,F;p(v.childNodes,function(a,c){if("UL"===a.nodeName||"OL"===a.nodeName)return B=c,A=a,!1});p(v.childNodes,function(a,c){"SPAN"===a.nodeName&&"bookmark"==f.getAttrib(a,"data-mce-type")&&(a.id==r.id+"_start"?u=c:a.id==r.id+"_end"&&(C=c))});0>=B||u<B&&C>B?(p(w.grep(v.childNodes),
y),z=0):(F=t.cloneNode(s),p(w.grep(v.childNodes),function(a,c){if(u<B&&c<B||u>B&&c>B)x.push(a),a.parentNode.removeChild(a)}),u<B?v.insertBefore(F,A):u>B&&v.insertBefore(F,A.nextSibling),n.push(F),p(x,function(a){F.appendChild(a)}),z=F)}else z=0,p(w.grep(a.childNodes),q),z=0}}var z;p(a,q)});!1===d.wrap_links&&p(i,function(a){function c(a){var b,j,l;if("A"===a.nodeName){j=k.cloneNode(s);i.push(j);l=w.grep(a.childNodes);for(b=0;b<l.length;b++)j.appendChild(l[b]);a.appendChild(j)}p(w.grep(a.childNodes),
c)}c(a)});p(i,function(a){var j,l=0;p(a.childNodes,function(a){!G(a)&&!x(a)&&l++});j=l;if((1<i.length||!y(a))&&0===j)f.remove(a,1);else if(d.inline||d.wrapper){if(!d.exact&&1===j){j=a;var q,h;p(j.childNodes,function(a){if(1==a.nodeType&&!x(a)&&!M(a))return q=a,s});q&&P(q,d)&&(h=q.cloneNode(s),g(h),f.replace(h,j,n),f.remove(q,1));a=h||j}p(m,function(b){p(f.select(b.inline,a),function(a){var j;if(!1===b.wrap_links){j=a.parentNode;do if("A"===j.nodeName)return;while(j=j.parentNode)}L(b,c,a,b.exact?a:
null)})});if(E(a.parentNode,b,c))return f.remove(a,1),a=0,n;d.merge_with_parents&&f.getParent(a.parentNode,function(j){if(E(j,b,c))return f.remove(a,1),a=0,n});a&&!1!==d.merge_siblings&&(a=Y(Q(a),a),a=Y(a,Q(a,n)))}})}var m=A(b),d=m[0],i,h=o.isCollapsed();if(d)if(a)a.nodeType?(i=f.createRng(),i.setStartBefore(a),i.setEndAfter(a),e(H(i,m),null,!0)):e(a,null,!0);else if(!h||!d.inline||f.select("td.mceSelected,th.mceSelected").length){if(!f.select("td.mceSelected.numberingColumn").length){var t=r.selection.getNode();
r.selection.setRng(k());i=o.getBookmark();e(H(o.getRng(n),m),i);if(d.styles&&(d.styles.color||d.styles.textDecoration))w.walk(t,Z,"childNodes"),Z(t);o.moveToBookmark(i);$(o.getRng(n));r.nodeChanged()}}else aa("apply",b,c)}function R(b,c,a){function g(a){var b,l,d;b=w.grep(a.childNodes);l=0;for(d=i.length;l<d&&!L(i[l],c,a,a);l++);if(h.deep){l=0;for(d=b.length;l<d;l++)g(b[l])}}function k(a){var j;p(f.getParents(a.parentNode,void 0,f.getRoot()).reverse(),function(a){var d;!j&&"_start"!=a.id&&"_end"!=
a.id&&(d=E(a,b,c))&&!1!==d.split&&(j=a)});return j}function e(a,b,d,e){var g,k,v,m,t,o;if(a){o=a.parentNode;for(g=b.parentNode;g&&g!=o;g=g.parentNode){k=g.cloneNode(s);for(t=0;t<i.length;t++)if(L(i[t],c,k,k)){k=0;break}k&&(v&&k.appendChild(v),m||(m=k),v=k)}if(e&&(!h.mixed||!y(a)))b=f.split(a,b);v&&(d.parentNode.insertBefore(v,d),m.appendChild(d))}return b}function m(a){var b=f.get(a?"_start":"_end"),c=b[a?"firstChild":"lastChild"];x(c)&&(c=c[a?"firstChild":"lastChild"]);f.remove(b,!0);return c}function d(a){var c,
b,d,a=H(a,i,n);h.split&&(c=ba(a,n),b=ba(a),c!=b?(d=c.firstChild,"TD"==c.nodeName&&d&&(c=d),c=S(c,"span",{id:"_start","data-mce-type":"bookmark"}),b=S(b,"span",{id:"_end","data-mce-type":"bookmark"}),e(k(c),c,c,!0),e(k(b),b,b,!0),c=m(n),b=m()):c=b=e(k(c),c,c,!0),a.startContainer=c.parentNode,a.startOffset=I(c),a.endContainer=b.parentNode,a.endOffset=I(b)+1);K.walk(a,function(a){p(a,function(a){g(a);a.nodeType===1&&(r.dom.getStyle(a,"text-decoration")==="underline"&&a.parentNode&&ca(a.parentNode)===
"underline")&&L({deep:false,exact:true,inline:"span",styles:{textDecoration:"underline"}},null,a)})})}var i=A(b),h=i[0],t;a?a.nodeType?(t=f.createRng(),t.setStartBefore(a),t.setEndAfter(a),d(t)):d(a):!o.isCollapsed()||!h.inline||f.select("td.mceSelected,th.mceSelected").length?f.select("td.mceSelected.numberingColumn").length||(a=o.getBookmark(),d(o.getRng(n)),o.moveToBookmark(a),h.inline&&T(b,c,o.getStart())&&$(o.getRng(!0)),r.nodeChanged()):aa("remove",b,c)}function E(b,c,a,g){function k(c,b,h){var e,
q,j=b[h];if(b.onmatch)return b.onmatch(c,b,h);if(j)if(void 0===j.length)for(e in j){if(j.hasOwnProperty(e)&&(q="attributes"===h?f.getAttrib(c,e):U(c,e),g&&!q&&!b.exact||(!g||b.exact)&&!D(q,u(j[e],a))))return}else for(e=0;e<j.length&&!("attributes"===h?f.getAttrib(c,j[e]):U(c,j[e]));e++);return b}var e=A(c),m;if(e&&b)for(m=0;m<e.length;m++)if(c=e[m],P(b,c)&&k(b,c,"attributes")&&k(b,c,"styles")){if(e=c.classes)for(m=0;m<e.length;m++)if(!f.hasClass(b,e[m]))return;return c}}function T(b,c,a){function g(a){a=
f.getParent(a,function(a){return!!E(a,b,c,!0)});return E(a,b,c)}var k;if(a)return g(a);a=o.getNode();if(g(a))return n;k=o.getStart();return k!=a&&g(k)?n:s}function P(b,c){if(D(b,c.inline)||D(b,c.block))return n;if(c.selector)return f.is(b,c.selector)}function D(b,c){b=b||"";c=c||"";b=""+(b.nodeName||b);c=""+(c.nodeName||c);return b.toLowerCase()==c.toLowerCase()}function U(b,c){var a=f.getStyle(b,c);if("color"==c||"backgroundColor"==c)a=f.toHex(a);"fontWeight"==c&&700==a&&(a="bold");return""+a}function u(b,
c){"string"!=typeof b?b=b(c):c&&(b=b.replace(/%(\w+)/g,function(a,b){return c[b]||a}));return b}function G(b){return b&&3===b.nodeType&&/^([\t \r\n]+|)$/.test(b.nodeValue)}function S(b,c,a){c=f.create(c,a);b.parentNode.insertBefore(c,b);c.appendChild(b);return c}function H(b,c,a){function g(a){var b,h,g;b=h=a?e:d;g=a?"previousSibling":"nextSibling";root=f.getRoot();if(3==b.nodeType&&!G(b)&&(a?0<m:i<b.nodeValue.length))return b;for(;;){if(!c[0].block_expand&&y(h))return h;for(a=h[g];a;a=a[g])if(!x(a)&&
!G(a))return h;if(h.parentNode==root){b=h;break}h=h.parentNode}return b}function k(a,b){for(void 0===b&&(b=3===a.nodeType?a.length:a.childNodes.length);a&&a.hasChildNodes();)(a=a.childNodes[b])&&(b=3===a.nodeType?a.length:a.childNodes.length);return{node:a,offset:b}}var e=b.startContainer,m=b.startOffset,d=b.endContainer,i=b.endOffset,h;1==e.nodeType&&e.hasChildNodes()&&(h=e.childNodes.length-1,e=e.childNodes[m>h?h:m],3==e.nodeType&&(m=0));1==d.nodeType&&d.hasChildNodes()&&(h=d.childNodes.length-
1,d=d.childNodes[i>h?h:i-1],3==d.nodeType&&(i=d.nodeValue.length));if(x(e.parentNode)||x(e))e=x(e)?e:e.parentNode,e=e.nextSibling||e,3==e.nodeType&&(m=0);if(x(d.parentNode)||x(d))d=x(d)?d:d.parentNode,d=d.previousSibling||d,3==d.nodeType&&(i=d.length);if(c[0].inline){if(b.collapsed){var t=function(b,c,d){function h(b,c){var e,i;i=b.nodeValue;typeof c=="undefined"&&(c=d?i.length:0);if(d){e=i.lastIndexOf(" ",c);i=i.lastIndexOf(" ",c);e=e>i?e:i;e!==-1&&!a&&e++}else{e=i.indexOf(" ",c);i=i.indexOf(" ",
c);e=e!==-1&&(i===-1||e<i)?e:i}return e}var e,i;if(b.nodeType===3){c=h(b,c);if(c!==-1)return{container:b,offset:c};i=b}for(b=new C(b,f.getParent(b,y)||r.getBody());e=b[d?"prev":"next"]();)if(e.nodeType===3){i=e;c=h(e);if(c!==-1)return{container:e,offset:c}}else if(y(e))break;if(i){c=d?0:i.length;return{container:i,offset:c}}};if(h=t(e,m,!0))e=h.container,m=h.offset;if(h=t(d,i))d=h.container,i=h.offset}h=k(d,i);if(h.node){for(;h.node&&0===h.offset&&h.node.previousSibling;)h=k(h.node.previousSibling);
h.node&&(0<h.offset&&3===h.node.nodeType&&" "===h.node.nodeValue.charAt(h.offset-1))&&1<h.offset&&(d=h.node,d.splitText(h.offset-1))}}if(c[0].inline||c[0].block_expand){if(!c[0].inline||3!=e.nodeType||0===m)e=g(!0);if(!c[0].inline||3!=d.nodeType||i===d.nodeValue.length)d=g()}c[0].selector&&(c[0].expand!==s&&!c[0].inline)&&(h=function(a,d){var e,h,i,g;a.nodeType==3&&(a.nodeValue.length==0&&a[d])&&(a=a[d]);e=f.getParents(a,void 0,f.getRoot());for(h=0;h<e.length;h++)for(i=0;i<c.length;i++){g=c[i];if(!("collapsed"in
g&&g.collapsed!==b.collapsed)&&f.is(e[h],g.selector))return e[h]}return a},e=h(e,"previousSibling"),d=h(d,"nextSibling"));if(c[0].block||c[0].selector)h=function(a,b){var d;if(a==f.getRoot())return a;c[0].wrapper||(d=f.getParent(a,c[0].block));d||(d=f.getParent(a.nodeType==3?a.parentNode:a,y));d&&c[0].wrapper&&(d=f.getParents(d,"ul,ol",f.getRoot()).reverse()[0]||d);if(!d)for(d=a;d[b]&&!y(d[b]);){d=d[b];if(D(d,"br"))break}return d||a},e=h(e,"previousSibling"),d=h(d,"nextSibling"),c[0].block&&(y(e)||
(e=g(!0)),y(d)||(d=g()));1==e.nodeType&&(m=I(e),e=e.parentNode);1==d.nodeType&&(i=I(d)+1,d=d.parentNode);return{startContainer:e,startOffset:m,endContainer:d,endOffset:i}}function L(b,c,a,g){var k,e,m;if(!P(a,b))return s;if("all"!=b.remove){p(b.styles,function(b,d){b=u(b,c);"number"===typeof d&&(d=b,g=0);(!g||D(U(g,d),b))&&f.setStyle(a,d,"");m=1});m&&""==f.getAttrib(a,"style")&&(a.removeAttribute("style"),a.removeAttribute("data-mce-style"));p(b.attributes,function(b,d){var e,b=u(b,c);if(typeof d===
"number"){d=b;g=0}if(!g||D(f.getAttrib(g,d),b)){if(d=="class")if(b=f.getAttrib(a,d)){e="";p(b.split(/\s+/),function(a){/mce\w+/.test(a)&&(e=e+((e?" ":"")+a))});if(e){f.setAttrib(a,d,e);return}}d=="class"&&a.removeAttribute("className");da.test(d)&&a.removeAttribute("data-mce-"+d);a.removeAttribute(d)}});p(b.classes,function(b){b=u(b,c);(!g||f.hasClass(g,b))&&f.removeClass(a,b)});e=f.getAttribs(a);for(k=0;k<e.length;k++)if(0!==e[k].nodeName.indexOf("_"))return s}if("none"!=b.remove){k=a.parentNode;
var d;b.block&&(V?k==f.getRoot()&&(!b.list_block||!D(a,b.list_block))&&p(w.grep(a.childNodes),function(a){O(V,a.nodeName.toLowerCase())?d?d.appendChild(a):d=S(a,V):d=0}):(e=function(a,b,c){a=Q(a,b,c);return!a||"BR"==a.nodeName||y(a)},y(a)&&!y(k)&&(!e(a,s)&&!e(a.firstChild,n,1)&&a.insertBefore(f.create("br"),a.firstChild),!e(a,n)&&!e(a.lastChild,s,1)&&a.appendChild(f.create("br")))));(!b.selector||!b.inline||D(b.inline,a))&&f.remove(a,1);return n}}function Q(b,c,a){if(b){c=c?"nextSibling":"previousSibling";
for(b=a?b:b[c];b;b=b[c])if(1==b.nodeType||!G(b))return b}}function x(b){return b&&1==b.nodeType&&"bookmark"==b.getAttribute("data-mce-type")}function Y(b,c){var a,g;if(b&&c){g=function(b,c){for(a=b;a&&!(3==a.nodeType&&0!==a.nodeValue.length);a=a[c])if(1==a.nodeType&&!x(a))return a;return b};b=g(b,"previousSibling");c=g(c,"nextSibling");g=b;var k=c,e=function(a){var b={};p(f.getAttribs(a),function(c){c=c.nodeName.toLowerCase();0!==c.indexOf("_")&&"style"!==c&&(b[c]=f.getAttrib(a,c))});return b},m=
function(a,b){var c,e;for(e in a)if(a.hasOwnProperty(e)){c=b[e];if(void 0===c||a[e]!=c)return s;delete b[e]}for(e in b)if(b.hasOwnProperty(e))return s;return n};if(g.nodeName!=k.nodeName||!m(e(g),e(k))||!m(f.parseStyle(f.getAttrib(g,"style")),f.parseStyle(f.getAttrib(k,"style")))?s:n){for(a=b.nextSibling;a&&a!=c;)g=a,a=a.nextSibling,b.appendChild(g);f.remove(c);p(w.grep(c.childNodes),function(a){b.appendChild(a)});return b}}return c}function ba(b,c){var a,f,k;a=b[c?"startContainer":"endContainer"];
f=b[c?"startOffset":"endOffset"];1==a.nodeType&&(k=a.childNodes.length-1,!c&&f&&f--,a=a.childNodes[f>k?k:f]);3===a.nodeType&&(c&&f>=a.nodeValue.length)&&(a=(new C(a,r.getBody())).next()||a);3===a.nodeType&&(!c&&0==f)&&(a=(new C(a,r.getBody())).prev()||a);return a}function aa(b,c,a){function g(a){var b=f.create("span",{id:h,"data-mce-bogus":!0,style:p?"color:red":""});a&&b.appendChild(r.getDoc().createTextNode(i));return b}function k(a,b){for(;a;){if(3===a.nodeType&&a.nodeValue!==i||1<a.childNodes.length)return!1;
b&&1===a.nodeType&&b.push(a);a=a.firstChild}return!0}function e(a){for(;a;){if(a.id===h)return a;a=a.parentNode}}function m(a){var b;if(a){b=new C(a,a);for(a=b.current();a;a=b.next())if(3===a.nodeType)return a}}function d(a,b){var c,g;if(a)g=o.getRng(!0),k(a)?(!1!==b&&(g.setStartBefore(a),g.setEndBefore(a)),f.remove(a)):(c=m(a),c.nodeValue.charAt(0)===W&&c.deleteData(0,1),f.remove(a,1)),o.setRng(g);else if(a=e(o.getStart()),!a)for(;a=f.get(h);)d(a,!1)}var i,h="_mce_caret",p=r.settings.caret_debug;
i=w.isGecko?"​":W;self._hasCaretEvents||(r.onBeforeGetContent.addToTop(function(){var a=[],b;if(k(e(o.getStart()),a))for(b=a.length;b--;)f.setAttrib(a[b],"data-mce-bogus","1")}),w.each(["onMouseUp","onKeyUp"],function(a){r[a].addToTop(function(){d()})}),r.onKeyDown.addToTop(function(a,b){var c=b.keyCode;(8==c||37==c||39==c)&&d(e(o.getStart()))}),self._hasCaretEvents=!0);if("apply"==b){var q,j,l,n;q=o.getRng(!0);b=q.startOffset;n=q.startContainer.nodeValue;(j=e(o.getStart()))&&(l=m(j));if(n&&0<b&&
b<n.length&&/\w/.test(n.charAt(b))&&/\w/.test(n.charAt(b-1)))j=o.getBookmark(),q.collapse(!0),q=H(q,A(c)),q=K.split(q),J(c,a,q),o.moveToBookmark(j);else{if(!j||l.nodeValue!==i)j=g(!0),l=j.firstChild,q.insertNode(j),b=1;J(c,a,j);o.setCursorLocation(l,b)}}else{n=o.getRng(!0);var s,u,b=[];s=n.startContainer;u=n.startOffset;l=s;if(3==s.nodeType){if(u!=s.nodeValue.length||s.nodeValue===i)j=!0;l=l.parentNode}for(;l;){if(E(l,c,a)){q=l;break}l.nextSibling&&(j=!0);b.push(l);l=l.parentNode}if(q)if(j)q=o.getBookmark(),
n.collapse(!0),n=H(n,A(c),!0),n=K.split(n),R(c,a,n),o.moveToBookmark(q);else{l=a=g();for(c=b.length-1;0<=c;c--)l.appendChild(b[c].cloneNode(!1)),l=l.firstChild;l.appendChild(f.doc.createTextNode(i));l=l.firstChild;f.insertAfter(a,q);o.setCursorLocation(l,1)}}}function $(b){var c=b.startContainer,a=b.startOffset,g;3==c.nodeType&&a>=c.nodeValue.length&&(c=c.parentNode,a=I(c)+1);if(1==c.nodeType){g=c.childNodes;c=g[Math.min(a,g.length-1)];c=new C(c,f.getParent(c,f.isBlock));a>g.length-1&&c.next();for(a=
c.current();a;a=c.next())if(3==a.nodeType&&!G(a)){c=f.create("a",null,W);a.parentNode.insertBefore(c,a);b.setStart(a,0);o.setRng(b);f.remove(c);break}}}var N={},p=w.each,f=r.dom,o=r.selection,C=w.dom.TreeWalker,K=new w.dom.RangeUtils(f),O=r.schema.isValidChild,y=f.isBlock,V=r.settings.forced_root_block,I=f.nodeIndex,W="﻿",da=/^(src|href|style)$/,s=!1,n=!0,ca=function(b){var c;r.dom.getParent(b,function(a){return(c=r.dom.getStyle(a,"text-decoration"))&&"none"!==c});return c},Z=function(b){var c;1===
b.nodeType&&(b.parentNode&&1===b.parentNode.nodeType)&&(c=ca(b.parentNode),r.dom.getStyle(b,"color")&&c?r.dom.setStyle(b,"text-decoration",c):r.dom.getStyle(b,"textdecoration")===c&&r.dom.setStyle(b,"text-decoration",null))};w.extend(this,{get:A,register:X,apply:J,remove:R,toggle:function(b,c,a){var f=A(b);T(b,c,a)&&(!("toggle"in f[0])||f[0].toggle)?R(b,c,a):J(b,c,a)},match:T,matchAll:function(b,c){var a,g=[],k={};a=o.getStart();f.getParent(a,function(a){var f,d;for(f=0;f<b.length;f++)d=b[f],!k[d]&&
E(a,d,c)&&(k[d]=!0,g.push(d))});return g},matchNode:E,canApply:function(b){var b=A(b),c,a,g,k;if(b){c=o.getStart();c=f.getParents(c,void 0,f.getRoot());for(g=b.length-1;0<=g;g--){k=b[g].selector;if(!k)return n;for(a=c.length-1;0<=a;a--)if(f.is(c[a],k))return n}}return s}})}})(tinymce);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.tinymce:atlassian-rte-javascript-tinymce-core', location = 'jscripts/tiny_mce/classes/LegacyInput.js' */
tinymce.onAddEditor.add(function(c,b){var g,h,e,f=b.settings;if(f.inline_styles){h=c.explode(f.font_size_legacy_values);var i=function(b,a){c.each(a,function(a,c){a&&e.setStyle(b,c,a)});e.rename(b,"span")};g={font:function(b,a){i(a,{backgroundColor:a.style.backgroundColor,color:a.color,fontFamily:a.face,fontSize:h[parseInt(a.size)-1]})},strike:function(b,a){i(a,{textDecoration:"line-through"})}};var d=function(d,a){e=d.dom;f.convert_fonts_to_spans&&c.each(e.select("font,strike",a.node),function(a){g[a.nodeName.toLowerCase()](b.dom,
a)})};b.onPreProcess.add(d);b.onSetContent.add(d);b.onInit.add(function(){b.selection.onSetContent.add(d)})}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.tinymce:atlassian-rte-javascript-tinymce-extensions', location = 'jscripts/tiny_mce/themes/atlassian/editor_template.js' */
(function(e,g,h){g(function(){var j=e.DOM,k=e.each,l=e.explode,m=e.extend,i;i=function(a){this.setup=this.setup();this.init=this.init(a)};i.INCOMPATIBLE_PLUGINS=["dfe"];i.shouldInit=function(){var a=g("body");return a.hasClass("edit")||a.hasClass("create")||a.hasClass("copy-page")};i.suppressIncompatiblePlugins=function(){for(var a=function(){},b=0,f=i.INCOMPATIBLE_PLUGINS.length;b<f;b++)e.PluginManager.lookup[i.INCOMPATIBLE_PLUGINS[b]]=a};i.prototype.setup=function(){window.requestAnimFrame=window.requestAnimationFrame||
window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(a){window.setTimeout(a,1E3/60)};return!0};i.prototype.init=function(a){function b(a){c.toggleToolbarButtons(a,a,a,function(){return!g(this).parent().hasClass("close")})}function f(){var a=l-j.scrollTop(),c=o.offset().top-i.offset().top,b=n.outerHeight(),d=o.outerHeight();n.css("top",c+d+a+q+"px");h.css("padding-top",b+m+"px")}var d=g.ui.keyCode,c=a.plugins.customtoolbar,e=g("#content-title"),i=g("form.editor"),h=g(a.getBody()),
j=g(a.getDoc()),n=g("#editor-precursor"),k=g(a.getWin()),o=g("#toolbar"),l=j.scrollTop(),m=parseInt(h.css("padding-top"),10)+parseInt(h.css("margin-top"),10),q=parseInt(n.css("padding-top"),10);e.on("keydown",function(c){var b=c.keyCode||c.which;if(b===d.ENTER||b===d.DOWN)c.preventDefault(),c.stopPropagation(),a.focus()}).on("focus click",function(){b(!0)});k.on("focus",function(){b(!1)});(function p(){requestAnimFrame(p);f()})();h.on("scroll mousewheel",function(){setTimeout(f,0)});return!0};e.ThemeManager.requireLangPack("advanced");
e.create("tinymce.themes.ConfluenceTheme",{controlHandlers:{},controls:{bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",justifyleft:"JustifyLeft",justifycenter:"JustifyCenter",justifyright:"JustifyRight",bullist:"InsertUnorderedList",numlist:"InsertOrderedList",tasklist:"InsertInlineTaskList",outdent:"Outdent",indent:"Indent",cut:"Cut",copy:"Copy",paste:"Paste",undo:"Undo",redo:"Redo",removeformat:"RemoveFormat",sub:"subscript",sup:"superscript",forecolor:"ForeColor",
forecolorpicker:"mceForeColor",backcolor:"HiliteColor",backcolorpicker:"mceBackColor",charmap:"mceCharMap",visualaid:"mceToggleVisualAid",anchor:"mceInsertAnchor",newdocument:"mceNewDocument",blockquote:"mceBlockQuote"},stateControls:"bold italic underline bullist numlist tasklist justifyleft justifycenter justifyright strikethrough sub sup monospace".split(" "),init:function(a,b){var f=i.shouldInit(),d=this;f&&i.suppressIncompatiblePlugins();d.editor=a;d.url=b;d.settings=m({theme_advanced_toolbar_location:"bottom",
theme_advanced_buttons1:"formatselect,bold,italic,underline,strikethrough,forecolor,separator,table,row_before,row_after,delete_row,col_before,col_after,delete_col,delete_table,separator,bullist,numlist,tasklist,outdent,indent,blockquote,justifyleft,justifycenter,justifyright,justifyfull,separator,sup,sub,separator,undo,redo,separator,conflink,oldlinkbrowserButton,confimage,conf_macro_browser,separator,search,code,customtoolbar, monospacep,h1,h2,h3,h4,h5,h6,pre,blockquote",readonly:a.settings.readonly},
a.settings);a.onInit.add(function(){a.settings.readonly||(a.onNodeChange.add(d.nodeChanged,d),a.onKeyUp.add(d._updateUndoStatus,d),a.onMouseUp.add(d._updateUndoStatus,d),a.dom.bind(a.dom.getRoot(),"dragend",function(){d._updateUndoStatus(a)}),f&&new i(a))})},execCommand:function(a,b,f){return(a=this["_"+a])?(a.call(this,b,f),!0):!1},renderUI:function(a){this.bindControls();return{iframeContainer:j.get("rte"),editorContainer:"wysiwyg",sizeContainer:void 0,deltaHeight:a.deltaHeight}},getInfo:function(){return{longname:"Confluence theme",
author:"Atlassian",authorurl:"http://tinymce.moxiecode.com",version:e.majorVersion+"."+e.minorVersion}},bindControls:function(){var a=this;k(l(a.settings.theme_advanced_buttons1),function(b){if(!a.createEditorButtons(b))switch(b){case "formatselect":a.createBlockFormats()}});a.bindControlHandlers();a.renderToolbarButtons()},renderToolbarButtons:function(){var a=this,b=Confluence.Templates.Editor.Toolbar.toolbarButton,f={toolbar:"toolbar-primary",title:"",tooltip:"",cmd:"",className:"",locationGroup:null,
weight:Infinity,onclick:null},d=h.map(this.editor.buttons,function(a,b){a=h.extend({},f,a);a.id=b;a.weight=h.isNumber(a.weight)?a.weight:Infinity;return a}),d=h.filter(d,function(a){return!!a.locationGroup});h.each(["toolbar-primary"],function(c){var f=g("."+c),c=h.where(d,{toolbar:c}),c=h.sortBy(c,"weight");h.each(c,function(c){a.createEditorButtons(c.id);var d=f.find("."+c.locationGroup),c=g(b({button:c}));d.append(c).removeClass("hidden")})})},createEditorButtons:function(a){var b=this.editor.buttons[a];
if(b)this.controls[a]=b.cmd?b.cmd:b.onclick;else return!1},bindControlHandlers:function(){var a=this;a.controlHandlers.buttons={};a.controlHandlers.buttons.state=new e.util.Dispatcher;a.controlHandlers.buttons.click=new e.util.Dispatcher;a.controlHandlers.buttons.click.add(function(b){var f=a.controls[b],d=typeof f;"string"==d?AJS.Rte.getEditor().execCommand(a.controls[b]):"function"==d&&f()})},createBlockFormats:function(){this.controlHandlers.formatselect={};this.controlHandlers.formatselect.state=
new e.util.Dispatcher;this.controlHandlers.formatselect.click=new e.util.Dispatcher;this.controlHandlers.formatselect.click.add(function(a){AJS.Rte.getEditor().execCommand("FormatBlock",!1,a)})},createForeColorMenu:function(){return!0},_updateUndoStatus:function(a){a=a.undoManager;this.controlHandlers.buttons.state.dispatch("undo","disabled",!a.hasUndo()&&!a.typing);this.controlHandlers.buttons.state.dispatch("redo","disabled",!a.hasRedo())},nodeChanged:function(a,b,f,d,c){var e=this;k(e.stateControls,
function(b){e.controlHandlers.buttons.state.dispatch(b,"active",!!a.queryCommandState(e.controls[b]))});e._updateUndoStatus(a);e.controlHandlers.buttons.state.dispatch("outdent","disabled",!a.queryCommandState("Outdent"));a:{b=j.isBlock;f=c.parents;for(c=0;c<f.length;c++)if(b(f[c])){c=f[c];break a}c=void 0}c&&e.controlHandlers.formatselect.state.dispatch(c.nodeName.toLowerCase())}});e.ThemeManager.add("atlassian",e.themes.ConfluenceTheme)})})(tinymce,$,_);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.tinymce:atlassian-rte-javascript-tinymce-extensions', location = 'jscripts/jquery/jquery-column.js' */
/*
 jQuery Column cell selector v1.0

 Licensed under the new BSD License.
 Copyright 2009-2012, Bram Stein
 All rights reserved.

 ATLASSIAN modified: Removed all extensions,modifications to jQuery expression internals (jQuery.expr)
 now creates pseudo selector via jQuery/Sizzle preferred method
*/
(function(g){var m=/([\+\-]?\d*)[nN]([\+\-]?\d*)/,j,c;g.extend(jQuery.fn,{nthCol:function(a){var f=[],i={multiplier:0,offset:0};"even"===a?a="2n":"odd"===a?a="2n+1":/^\d*$/.test(a)&&(a="0n+"+a);f=m.exec(a);null!==f&&(i.multiplier=f[1]-0,i.offset=f[2]-0);c=i;var d,k,e=[],h=0,l=[];g.each(this,function(n,a){var b=0,c=0,f=a.rowSpan||1,g=a.colSpan||1;if(a.parentNode!==d){d=a.parentNode;if(d.parentNode!==k){k=d.parentNode;e=[]}h=0;e[d.rowIndex]===void 0&&(e[d.rowIndex]=[])}for(b=0;b<e[d.rowIndex].length+
1;b=b+1)if(e[d.rowIndex][b]===void 0){h=b;break}l[n]=h;for(b=d.rowIndex;b<d.rowIndex+f;b=b+1){e[b]===void 0&&(e[b]=[]);for(c=h;c<h+g;c=c+1)e[b][c]=true}});j=l;return g(this).filter(function(a){a=j[a]-(c.offset-1);a=c.multiplier===0?a===0:a%c.multiplier===0&&a/c.multiplier>=0;return a})}})})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.tinymce:atlassian-rte-javascript-tinymce-extensions', location = 'jscripts/tiny_mce/plugins/lists/editor_plugin_src.js' */
(function(C){function D(a,b){for(;a&&(8===a.nodeType||3===a.nodeType&&/^[ \t\n\r]*$/.test(a.nodeValue));)a=b(a);return a}function m(a){return D(a,function(a){return a.previousSibling})}function r(a){return D(a,function(a){return a.nextSibling})}function E(a,b,f){return a.dom.getParent(b,function(a){return-1!==tinymce.inArray(f,a)})}function n(a){return a&&("OL"===a.tagName||"UL"===a.tagName)}function A(a,b){var f,d;for(f=m(a.lastChild);n(f);)d=f,f=m(d.previousSibling);d&&(f=b.create("li",{style:t}),
b.split(a,d),b.insertAfter(f,d),f.appendChild(d),f.appendChild(d),a=f.previousSibling);return a}function u(a,b,f){var d=m(a.previousSibling),a=d?s(d,a,b?d:!1,f):a;return F(a,b,f)}function F(a,b,f){var d=r(a.nextSibling);return d?s(a,d,b?d:!1,f):a}function s(a,b,f,d){var e=!!f;if(!a||!b)d=!1;else if("LI"===a.tagName&&"LI"===b.tagName)d="none"===b.style.listStyleType||G(b);else if(n(a)){if(!(d=a.tagName===b.tagName&&a.className===b.className&&(e||a.style.listStyleType===b.style.listStyleType)))d=r(b.firstChild),
e=m(b.lastChild),d=d&&e&&n(b)&&d===e&&(n(d)||"none"===d.style.listStyleType||G(d))}else d=d&&"P"===a.tagName&&"P"===b.tagName;if(d){d=m(a.lastChild);e=r(b.firstChild);for("P"===a.tagName&&a.appendChild(a.ownerDocument.createElement("br"));b.firstChild;)a.appendChild(b.firstChild);f&&(a.style.listStyleType=f.style.listStyleType);b.parentNode.removeChild(b);s(d,e,!1);return a}a&&("LI"===a.tagName&&n(b))&&a.appendChild(b);return b}function G(a){var b=r(a.firstChild),a=m(a.lastChild);return b&&a&&b===
a&&n(b)}function H(a,b){var f;b.is(a,"li,ol,ul")||(f=b.getParent(a,"li"))&&(a=f);return a}var t="list-style-type: none; background-image: none;",I="a,b,i,em,strong,u,span,s,sub,sup,code,br",v=tinymce.each,q=tinymce.dom.Event,w;tinymce.create("tinymce.plugins.Lists",{init:function(a){function b(){var x=a.selection.getStart();return"LI"==x.tagName?x:a.dom.getParent(x,"li")}function f(a){if(a){var a=C(a),b=a.find("*"),c=b.filter(I);return b.length!=c.length?!1:0===AJS.trim(a.text()).length&&1>=c.filter("br").length}return!1}
function d(b){if(b&&(tinymce.isGecko||tinymce.isWebKit))for(var b=b.childNodes,d,c=b.length-1;0<=c;c--)d=b[c],3==d.nodeType&&!d.length&&a.dom.remove(d)}function e(a,b,c){c&&(1==c.nodeType&&a.dom.is(c,"li"))&&(b=c.parentNode,tinymce.each(a.dom.select("li>ul,li>ol",b),function(c){a.dom.getAttrib(c.parentNode,"data-mce-style")||c.previousSibling||c.parentNode.insertBefore(a.dom.doc.createElement("br"),c)}))}function j(a,d){var c,g;if(b()&&(d.keyCode===tinymce.VK.ENTER&&!d.shiftKey||d.keyCode===tinymce.VK.BACKSPACE||
d.keyCode===tinymce.VK.DELETE)){c=a.selection.getRng(!0);g=c.endContainer;if(3==g.nodeType){if(c.endOffset!==g.length)return;g=g.nextSibling}else if(1==g.nodeType)g=g.childNodes[c.endOffset];else return;if(g&&a.dom.is(g,"ul,ol"))if(tinymce.isIE){var f=g,e=a.dom.doc.createTextNode(String.fromCharCode(160)),h=f.previousSibling;c=tinymce.isIE6||tinymce.isIE7||tinymce.isIE8?c:a.getDoc().createRange();h&&3==h.nodeType&&h.nodeValue[h.length-1]==e.nodeValue?(c.setStart(h,h.length-1),c.setEnd(h,h.length-
1)):(g.parentNode.insertBefore(e,f),c.setStartBefore(e),c.setEndBefore(e));c.collapse(!0);a.selection.setRng(c)}else g.parentNode.insertBefore(a.dom.create("br"),g)}}function l(a){function e(c){var b=c.parentNode,g=b.previousSibling,o;d(b);b.childNodes[0]===c&&!a.dom.getAttrib(b,"data-mce-style")&&(a.selection.getStart().parentNode==c&&(o=a.selection.getRng(!0),o={startOffset:o.startOffset,startContainer:o.startContainer}),g?g.appendChild(c):(g=a.dom.create("li",{style:t}),g.appendChild(c),b.parentNode.insertBefore(g,
b)),o&&a.selection.setCursorLocation(o.startContainer||c.firstChild,o.startOffset),f(b)&&a.dom.remove(b))}var c=b();if(c){var g=c.parentNode;tinymce.grep(a.dom.select("li>ul, li>ol",g),e);a.dom.is(g.parentNode,"li")&&e(g);c===g.lastChild&&(g.nextSibling&&a.dom.is(g.nextSibling,"ul, ol"))&&tinymce.grep(a.dom.select("li>ul, li>ol",g.nextSibling),e)}}function k(a,d){if(46==d.keyCode&&!d.shiftKey){var c=b();if(c&&(0==c.childNodes.length||1==c.childNodes.length&&"BR"==c.firstChild.nodeName)){var g,f;if(g=
c.nextSibling)g=a.dom.doc.createTreeWalker(g,NodeFilter.SHOW_TEXT,null,!1),g=g.nextNode(),f=a.getDoc().createRange(),f.setStart(g,0),f.setEnd(g,0),a.selection.setRng(f),a.dom.remove(c),a.undoManager.add(),q.cancel(d)}}}var i="UNKNOWN";this.ed=a;a.addCommand("Indent",this.indent,this);a.addCommand("Outdent",this.outdent,this);a.addCommand("InsertUnorderedList",function(){this.applyList("UL","OL")},this);a.addCommand("InsertOrderedList",function(){this.applyList("OL","UL")},this);a.addCommand("InsertInlineTaskList",
function(){AJS.Rte.Support.inlineTasks()&&this.applyList("UL","OL","inline-task-list",{attributesOnItems:{"data-inline-task-id":""},placeholderText:"Type your task here, using \"@\" to assign to a user and \"//\" to select a due date"})},this);a.addCommand("InsertInlineTaskListNoToggle",function(){AJS.Rte.Support.inlineTasks()&&this.applyList("UL","OL","inline-task-list",{attributesOnItems:{"data-inline-task-id":""},placeholderText:"Type your task here, using \"@\" to assign to a user and \"//\" to select a due date",noToggle:!0})},this);a.onInit.add(function(){a.editorCommands.addCommands({outdent:function(){function b(d){return(d=
c.getParent(d,c.isBlock))&&0<parseInt(a.dom.getStyle(d,"margin-left")||0,10)+parseInt(a.dom.getStyle(d,"padding-left")||0,10)}var d=a.selection,c=a.dom;return b(d.getStart())||b(d.getEnd())||a.queryCommandState("InsertOrderedList")||a.queryCommandState("InsertUnorderedList")||a.queryCommandState("InsertInlineTaskList")}},"state")});a.onKeyUp.add(function(f,e){if("TABBING"==i)return f.execCommand(e.shiftKey?"Outdent":"Indent",!0,null),d(b()),i="UNKNOWN",q.cancel(e);if("EMPTY"==i){var c=b();f.execCommand(!0===
f.settings.list_outdent_on_enter||e.shiftKey?"Outdent":"Indent",!0,null);if(tinymce.isIE){var g=a.dom.getParent(c,"ol,ul");null!=g&&(g=g.lastChild,g.appendChild(a.getDoc().createTextNode(AJS.Rte.HIDDEN_CHAR)),a.selection.setCursorLocation(g,0))}d(c);AJS.Rte.showSelection();return q.cancel(e)}if("ESCAPE"==i)if(tinymce.isIE6||tinymce.isIE7||tinymce.isIE8)c=f.getDoc().createTextNode(AJS.Rte.HIDDEN_CHAR),f.selection.getNode().appendChild(c);else if(tinymce.isIE9||tinymce.isIE10||tinymce.isIE11||tinymce.isGecko||
tinymce.isWebKit)return f.execCommand("Outdent"),q.cancel(e)});a.onKeyDown.add(function(d,e){if(e.keyCode===tinymce.VK.TAB&&!e.altKey&&!e.ctrlKey&&(a.queryCommandState("InsertUnorderedList")||a.queryCommandState("InsertOrderedList")||a.queryCommandState("InsertInlineTaskList")||a.queryCommandState("InsertInlineTaskListNoToggle")))i="TABBING";else{var c;if(c=e.keyCode===tinymce.VK.ENTER&&!e.shiftKey)if(c=b()){var g=c.parentNode.parentNode;c=c.parentNode.lastChild===c&&!(n(g)?g.parentNode&&"LI"===g.parentNode.tagName:
"LI"===g.tagName)&&f(c)}else c=!1;i=c?"ESCAPE":e.keyCode===tinymce.VK.ENTER&&!e.shiftKey&&a.selection.isCollapsed()&&f(b())?"EMPTY":"UNKNOWN"}});a.onKeyDown.add(function(a,b){("TABBING"==i||"EMPTY"==i||(tinymce.isGecko||tinymce.isWebKit)&&"ESCAPE"==i)&&q.cancel(b)});a.onKeyDown.add(function(a,b){var c;if(tinymce.isGecko){var d=a.selection.getStart();if(!(b.keyCode!=tinymce.VK.BACKSPACE||"IMG"!==d.tagName))if(c=d.parentNode.previousSibling){if(!("UL"===c.tagName||"OL"===c.tagName))if(c.previousSibling&&
("UL"===c.previousSibling.tagName||"OL"===c.previousSibling.tagName))c=c.previousSibling;else return;c=c.firstChild;var e=null;do{if(!c)break;"LI"===c.tagName&&(e=c)}while(c=c.nextSibling);c=e;e=a.dom.createRng();e.setStart(c,1);e.setEnd(c,1);a.selection.setRng(e);a.selection.collapse(!0);var e=a.selection.getBookmark(),f=d.parentNode.cloneNode(!0);if("P"===f.tagName||"DIV"===f.tagName)for(;0<f.childNodes.length;)c.appendChild(f.childNodes[0]);else c.appendChild(f);d.parentNode.parentNode.removeChild(d.parentNode);
a.selection.moveToBookmark(e)}}});a.onKeyDown.add(function(b,d){var c;if(c=d.keyCode===tinymce.VK.ENTER&&!d.shiftKey){var e=a.selection.getNode();c=a.dom.is(e,"h1,h2,h3,h4,h5,h6,p,div")&&"LI"===e.parentNode.tagName&&e.parentNode.lastChild===e;e=AJS.EditorUtils.isCursorAtEndOf(e,a.selection.getRng(!0));c=a.selection.isCollapsed()&&c&&e}if(c){b.undoManager.beforeChange();b.undoManager.add();c=b.selection.getNode();var f=b.dom.create("li",{},!tinyMCE.isIE?'<br data-mce-bogus="true">':"");c=b.dom.getParent(c,
"li");b.dom.insertAfter(f,c);tinyMCE.isIE6||tinyMCE.isIE7||tinyMCE.isIE8?(f.appendChild(b.dom.create("&nbsp;")),b.selection.setCursorLocation(f,1)):tinyMCE.isGecko?setTimeout(function(){b.selection.setCursorLocation(f,0)},0):b.selection.setCursorLocation(f,0);b.undoManager.add();d.preventDefault()}});tinymce.isWebKit&&(a.onNodeChange.add(l),a.onKeyUp.add(l));tinymce.isIE?a.onKeyDown.add(j):(a.onNodeChange.add(e),tinymce.isGecko&&a.onKeyDown.add(j));tinymce.isGecko&&a.onKeyDown.add(k)},applyList:function(a,
b,f,d){function e(a){a&&"BR"===a.tagName&&h.remove(a)}function j(a){a&&"LI"===a.tagName&&(h.removeClass(a,"checked"),a.removeAttribute("data-inline-task-id"))}function l(a){if(B&&a&&"LI"===a.tagName)for(var b in B)a.setAttribute(b,B[b])}function k(b){function d(a){(a.style.marginLeft||a.style.paddingLeft)&&n.adjustPaddingFunction(!1)(a)}var c=h.create(a),g;""!=f&&(c.className=f);if("LI"===b.tagName)l(b);else{if("P"===b.tagName||"DIV"===b.tagName||"BODY"===b.tagName){x(b,function(a,c){i(a,c,b.tagName===
"BODY"?null:a.parentNode);g=a.parentNode;d(g);tinymce.isChrome||e(c)});if(g){if("LI"===g.tagName&&("P"===b.tagName||1<y.length)){if(z&&n.isEmptyElement(g)){var k=document.createTextNode(z),c=h.create("span");c.appendChild(k);g.appendChild(c);setTimeout(function(){p.selection.select(k)},0);(tinymce.isIE7||tinymce.isIE8)&&g.appendChild(p.dom.create("br",{_mce_bogus:"1"}));var j=function(a,b){if((b.which||b.keyCode)==64)if(k.textContent==z)k.textContent=" ";else if(k.data==z)k.data=" ";window.setTimeout(function(){p.onKeyPress.remove(j)},
0)};p.onKeyPress.addToTop(j)}h.split(g.parentNode.parentNode,g.parentNode)}u(g.parentNode,!0);l(g)}return}g=h.create("li");l(g);h.insertAfter(g,b);g.appendChild(b);d(b);b=g}h.insertAfter(c,b);c.appendChild(b);u(c,!0);m.push(b)}function i(a,b,c){for(var d=a;!h.isBlock(a.parentNode)&&a.parentNode!==h.getRoot();)a=h.split(a.parentNode,a.previousSibling),d=a=a.nextSibling;if(c){c=c.cloneNode(!0);for(a.parentNode.insertBefore(c,a);c.firstChild;)h.remove(c.firstChild);c=h.rename(c,"li")}else c=h.create("li"),
a.parentNode.insertBefore(c,a);d&&d==b&&(a=h.create("br"),h.setAttrib(a,"data-mce-bogus",1),c.appendChild(d),h.insertAfter(a,d));for(;d&&d!=b;)a=d.nextSibling,c.appendChild(d),d=a;0===c.childNodes.length&&(c.innerHTML='<br _mce_bogus="1" />');k(c)}function x(a,b){function c(a,b){var d=h.createRng(),e;w.keep=!0;p.selection.moveToBookmark(w);w.keep=!1;e=p.selection.getRng(!0);b||(b=a.parentNode.lastChild);d.setStartBefore(a);d.setEndAfter(b);return!(0<d.compareBoundaryPoints(g,e)||0>=d.compareBoundaryPoints(k,
e))}function d(a){if(a.nextSibling)return a.nextSibling;if(!h.isBlock(a.parentNode)&&a.parentNode!==h.getRoot())return d(a.parentNode)}var e,f,g=3,k=1;e=a.firstChild;var i=!1;v(h.select("br,ul,ol,p,div,h1,h2,h3,h4,h5,h6,table,blockquote,address,pre,form,center,dl",a),function(a){if(a.hasAttribute&&a.hasAttribute("_mce_bogus"))return!0;c(e,a)&&(h.addClass(a,"_mce_tagged_br"),e=d(a))});i=e&&c(e,void 0);e=a.firstChild;v(h.select("br,ul,ol,p,div,h1,h2,h3,h4,h5,h6,table,blockquote,address,pre,form,center,dl",
a),function(a){var c=d(a);if(a.hasAttribute&&a.hasAttribute("_mce_bogus"))return!0;h.hasClass(a,"_mce_tagged_br")?(b(e,a,f),f=null):f=a;e=c});i&&b(e,void 0,f)}function o(a){x(a,function(a,b,c){i(a,b);e(b);e(c)})}function c(a){j(a);if(-1===tinymce.inArray(m,a)){if(a.parentNode.tagName===b||!s)h.split(a.parentNode,a),k(a),F(a.parentNode,!1);""!=f&&(a.parentNode.className=f);l(a);m.push(a)}}function g(a){j(a);var b,c;if(-1===tinymce.inArray(m,a)&&(a=A(a,h))){for(;h.is(a.parentNode,"ol,ul,li");)h.split(a.parentNode,
a);m.push(a);a=h.rename(a,"p");b=u(a,!1,p.settings.force_br_newlines);if(b===a)for(a=a.firstChild;a;)h.isBlock(a)?(a=h.split(a.parentNode,a),c=!0,b=a.nextSibling&&a.nextSibling.firstChild):(b=a.nextSibling,c&&"BR"===a.tagName&&h.remove(a),c=!1),a=b}}var n=this,p=n.ed,h=p.dom,m=[],q=!1,r=!1,t=!1,s=!1,y=p.selection.getSelectedBlocks(),f=f||"",d=d||{},B=d.attributesOnItems,z=d.placeholderText,d=d.noToggle;v(y,function(c){c=H(c,h);c="LI"===c.tagName?c.parentNode:c;s=c.className===f;c.tagName===b?r=!0:
c.tagName===a?q=!0:t=!0});d=t&&!q||r||!s||0===y.length?{LI:c,H1:k,H2:k,H3:k,H4:k,H5:k,H6:k,P:k,BODY:k,DIV:1<y.length?k:o,defaultAction:o,elements:this.selectedBlocks()}:d?{}:{defaultAction:g,elements:this.selectedBlocks()};this.process(d)},indent:function(){var a=this.ed,b=a.dom,f=[];this.process({LI:function(d){if(!E(a,d,f)&&(d=A(d,b))){var e=d,j=b.create("li",{style:t});b.insertAfter(j,e);var l=b.getParent(e,"ol,ul"),e=l.tagName,k=b.getStyle(l,"list-style-type"),l=l.className||"",i={};""!==k&&(i.style=
"list-style-type: "+k+";");e=b.create(e,i);""!=l&&(e.className=l);j.appendChild(e);(tinymce.isIE7||tinymce.isIE8)&&d.appendChild(a.dom.create("br",{_mce_bogus:"1"}));e.appendChild(d);u(e.parentNode,!1);u(e,!1);f.push(d)}},defaultAction:this.adjustPaddingFunction(!0),elements:this.selectedBlocks()})},outdent:function(a,b){var f=this,d=f.ed,e=d.dom,j=[],l=b&&tinymce.is(b,"array")?b:this.selectedBlocks();this.process({LI:function(a){var b,l;if(!E(d,a,j)){if(""!==e.getStyle(a,"margin-left")||""!==e.getStyle(a,
"padding-left"))return f.adjustPaddingFunction(!1)(a);b=e.getStyle(a,"text-align",!0);if("center"===b||"right"===b)e.setStyle(a,"text-align","left");else if(a=A(a,e))b=a.parentNode,l=a.parentNode.parentNode,"P"===l.tagName?e.split(l,a.parentNode):(e.split(b,a),"LI"===l.tagName?e.split(l,a):e.is(l,"ol,ul")||e.rename(a,"p")),e.hasClass(a.parentNode,"inline-task-list")?a.hasAttribute("data-inline-task-id")||a.setAttribute("data-inline-task-id",""):a.removeAttribute("data-inline-task-id"),j.push(a)}},
defaultAction:this.adjustPaddingFunction(!1),elements:l});v(j,u)},isEmptyElement:function(a){var b=this.ed.dom;return 0===tinymce.grep(a.childNodes,function(a){return!("BR"===a.nodeName||"SPAN"===a.nodeName&&"bookmark"==b.getAttrib(a,"data-mce-type")||3==a.nodeType&&(a.nodeValue==String.fromCharCode(160)||""==a.nodeValue))}).length},process:function(a){function b(b){(tinymce.isIE7||tinymce.isIE8)&&C(b).find("br[_mce_bogus='1']").remove();l.removeClass(b,"_mce_act_on");if(b&&!(1!==b.nodeType||1<k.length&&
e.isEmptyElement(b))){var b=H(b,l),c=a[b.tagName];c||(c=a.defaultAction);c(b)}}function f(a){e.splitSafeEach(a.childNodes,b)}function d(a,b){return 0<=b&&a.hasChildNodes()&&b<a.childNodes.length&&"BR"===a.childNodes[b].tagName}var e=this,j=e.ed.selection,l=e.ed.dom,k,i;if(!l.select("td.mceSelected.numberingColumn").length){k=a.elements;i=j.getRng(!0);if(!i.collapsed&&(d(i.endContainer,i.endOffset-1)&&(i.setEnd(i.endContainer,i.endOffset-1),j.setRng(i)),d(i.startContainer,i.startOffset)))i.setStart(i.startContainer,
i.startOffset+1),j.setRng(i);if(tinymce.isIE7||tinymce.isIE8)if(i=e.ed.selection.getNode(),"LI"===i.tagName&&i.parentNode.lastChild!==i){var m=e.ed.getDoc().createTextNode(AJS.Rte.HIDDEN_CHAR);i.appendChild(m)}w=j.getBookmark();a.OL=a.UL=f;e.splitSafeEach(k,b);j.moveToBookmark(w);w=null;j=j.getNode();null===l.getParent(j,"td")&&e.ed.execCommand("mceRepaint")}},splitSafeEach:function(a,b){tinymce.isGecko&&(/Firefox\/[12]\.[0-9]/.test(navigator.userAgent)||/Firefox\/3\.[0-4]/.test(navigator.userAgent))?
this.classBasedEach(a,b):v(a,b)},classBasedEach:function(a,b){var f=this.ed.dom,d;v(a,function(a){f.addClass(a,"_mce_act_on")});for(d=f.select("._mce_act_on");0<d.length;)d=d.shift(),f.removeClass(d,"_mce_act_on"),b(d),d=f.select("._mce_act_on")},adjustPaddingFunction:function(a){var b,f,d=this.ed;b=d.settings.indentation;f=/[a-z%]+/i.exec(b);b=parseInt(b,10);return function(e){var j;j=parseInt(d.dom.getStyle(e,"margin-left")||0,10)+parseInt(d.dom.getStyle(e,"padding-left")||0,10);j=a?j+b:j-b;d.dom.setStyle(e,
"padding-left","");d.dom.setStyle(e,"margin-left",0<j?j+f:"")}},selectedBlocks:function(){var a=this.ed,b=a.selection.getSelectedBlocks();return 0==b.length?[a.dom.getRoot()]:b},getInfo:function(){return{longname:"Lists",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/lists",version:tinymce.majorVersion+"."+tinymce.minorVersion}}});tinymce.PluginManager.add("lists",tinymce.plugins.Lists)})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.tinymce:atlassian-rte-javascript-tinymce-extensions', location = 'jscripts/tiny_mce/plugins/table/editor_plugin_src.js' */
(function(l,s){function v(e,j){return parseInt(e.getAttribute(j)||1)}function S(d,j,t){function E(b,a){b=b.cloneNode(a);b.removeAttribute("id");a&&z()&&b.removeChild(b.children[0]);return b}function F(){var b=0;k=[];e(["thead","tbody","tfoot"],function(a){var g=j.select("> "+a+" tr",d);e(g,function(g,p){p+=b;e(j.select("> td, > th",g),function(b,g){var h,f,c,o;if(k[p])for(;k[p][g];)g++;c=v(b,"rowspan");o=v(b,"colspan");for(f=p;f<p+c;f++){k[f]||(k[f]=[]);for(h=g;h<g+o;h++)k[f][h]={part:a,real:f==p&&
h==g,elm:b,rowspan:c,colspan:o}}})});b+=g.length})}function B(b,a){var g;if(g=k[a])return g[b]}function n(b,a,g){b&&(g=parseInt(g),1===g?b.removeAttribute(a,1):b.setAttribute(a,g,1))}function w(b){return b&&(j.hasClass(b.elm,"mceSelected")||b==H)}function C(){var b=[];e(d.rows,function(a){e(a.cells,function(g){if(j.hasClass(g,"mceSelected")||g==H.elm)return b.push(a),!1})});return b}function A(b){var a;l.walk(b,function(g){var h;if(3==g.nodeType)return e(j.getParents(g.parentNode,null,b).reverse(),
function(b){b=E(b,!1);a?h&&h.appendChild(b):a=h=b;h=b}),h&&(h.innerHTML=l.isIE?"&nbsp;":'<br data-mce-bogus="1" />'),!1},"childNodes");b=E(b,!1);n(b,"rowSpan",1);n(b,"colSpan",1);a?b.appendChild(a):l.isIE||(b.innerHTML='<br data-mce-bogus="1" />');s(b).attr("contenteditable","true").removeClass("numberingColumn");return b}function a(){var b=j.createRng();e(j.select("tr",d),function(b){0==b.cells.length&&j.remove(b)});if(0==j.select("tr",d).length)b.setStartAfter(d),b.setEndAfter(d),t.setRng(b),j.remove(d);
else if(e(j.select("thead,tbody,tfoot",d),function(b){0==b.rows.length&&j.remove(b)}),F(),b=k[Math.min(k.length-1,q.y)])if(b=b[Math.min(b.length-1,q.x)].elm)l.isIE9||l.isIE10up?t.setCursorLocation(b,0):t.select(b,!0),t.collapse(!0)}function m(b,a,g,h){var p,L,f,c,o;p=k[a][b].elm.parentNode;for(f=1;f<=g;f++)if(p=j.getNext(p,"tr")){for(L=b;0<=L;L--)if(o=k[a+f][L].elm,o.parentNode==p){for(c=1;c<=h;c++)j.insertAfter(A(o),o);break}if(-1==L)for(c=1;c<=h;c++)p.insertBefore(A(p.cells[0]),p.cells[0])}}function O(){e(k,
function(b,a){e(b,function(b,h){var p,f,c;if(w(b)&&(b=b.elm,p=v(b,"colspan"),f=v(b,"rowspan"),1<p||1<f)){n(b,"rowSpan",1);n(b,"colSpan",1);for(c=0;c<p-1;c++)j.insertAfter(A(b),b);m(h,a,f-1,p)}})})}function N(b){var a,g,h,p,f,c,o,m;e(k,function(g,h){e(g,function(g){if(w(g)&&(g=g.elm,f=g.parentNode,c=E(f,!1),a=h,b))return!1});if(b)return!a});for(p=0;p<k[0].length;p++)if(k[a][p]&&(g=k[a][p].elm,g!=h)){if(b){if(0<a&&k[a-1][p]&&(o=k[a-1][p].elm,m=v(o,"rowSpan"),1<m)){n(o,"rowSpan",m+1);continue}}else if(m=
v(g,"rowspan"),1<m){n(g,"rowSpan",m+1);continue}h=(o=AJS.Rte.Table.isColumnHeading(s(g).closest("table"),p+1))?j.create("th"):j.create("td");h.colSpan=g.colSpan;h.width=g.width;h.innerHTML=l.isIE9?"":l.isIE?"&nbsp;":'<br data-mce-bogus="1" />';h.className=g.className;o||(j.removeClass(h,l.settings.confluence_table_heading_style),j.addClass(h,l.settings.confluence_table_cell_style));o=j.getAttrib(g,"data-highlight-colour");AJS.Rte.Table.isColumnHighlighted(d,p+1)?j.setAttrib("data-highlight-colour",
o):j.removeClass(h,"highlight-"+o);c.appendChild(h);h=g}c.hasChildNodes()&&(b?f.parentNode.insertBefore(c,f):j.insertAfter(c,f));r()}function u(b){var a,g,h=[];e(k,function(g){e(g,function(g,h){if(w(g)&&(a=h,b))return!1});if(b)return!a});if(0==a&&b&&z())return!1;e(k,function(p,f){var c,o,k;if(p[a]&&(c=p[a].elm,c!=g)){k=v(c,"colspan");o=v(c,"rowspan");if(1==k){var e,d=j.create(c.tagName);d.colSpan=c.colSpan;d.width=c.width;d.className=c.className;d.innerHTML=l.isIE?"&nbsp;":'<br data-mce-bogus="1"/>';
(e=j.getAttrib(c,"data-highlight-colour"))&&j.setAttrib(d,"data-highlight-colour",e);s(d).attr("contenteditable","true").removeClass("numberingColumn");b?c.parentNode.insertBefore(d,c):j.insertAfter(d,c);m(a,f,o-1,k);h.push(d)}else n(c,"colSpan",c.colSpan+1);g=c}});return h}function r(){if(z()){var b=1,a=0,g=0;e(d.rows,function(h){h=s(h);AJS.Rte.Table.areCellsHeadings(h.children())?h.children(":first").addClass("numberingColumn").attr("contenteditable","true"):0<g?g--:(h.children(":first").html(b).attr("contenteditable",
"false").addClass("numberingColumn"),a=h.children(":first").attr("rowspan"),1<a&&(g=a-1),b++)})}}function z(){return s(d.rows[0]).children(":first").hasClass("numberingColumn")}function o(b){b?s(d.rows[0]).children(":first").addClass("numberingColumn"):s(d.rows[0]).children(":first").removeClass("numberingColumn")}function c(){var b=[];e(k,function(a){e(a,function(a,h){w(a)&&-1===l.inArray(b,h)&&(e(k,function(b){if(b[h]){var b=b[h].elm,a;a=v(b,"colSpan");1<a?n(b,"colSpan",a-1):j.remove(b)}}),b.push(h))})});
a()}function f(){var b={};e(k,function(a){e(a,function(a,h){w(a)&&(b[h]||(b[h]=[]))})});e(k,function(a){e(a,function(a,h){b[h]&&b[h].push(a.elm.innerHTML)})});return b}function M(b){b&&b.parentNode&&(t.select(b.parentNode),t.collapse(!0))}function P(b,a){var g=B(b.x,b.y).elm,h="undefined"===typeof a?!0:a;if((l.isGecko||l.isIE)&&g.firstChild)g=g.firstChild;if(l.isIE9||l.isIE10up){var c=t.getRng(1);h?(c.setStart(g,0),c.setEnd(g,0)):(c.setStartAfter(g,0),c.setEndAfter(g,0));t.setRng(c)}else t.select(g,
!0),t.collapse(h)}function Q(){var b,a=k[0].length;q.x==a-1&&q.y==k.length-1||(q.x==a-1&&z()?(b={x:1,y:q.y+1},AJS.Rte.Table.areCellsHeadings(s(k[b.y][0].elm).parent().children())&&(b.x=0)):b=q.x==a-1?{x:0,y:q.y+1}:{x:q.x+1,y:q.y});return b}function R(){var b;0==q.x&&0==q.y||(1==q.x&&z()&&!AJS.Rte.Table.areCellsHeadings(s(k[q.y][0].elm).parent().children())?(b=q.y-1,b={x:k[b].length-1,y:b}):0<q.x?b={x:q.x-1,y:q.y}:(b=q.y-1,b={x:k[b].length-1,y:b}));return b}function G(b){var a;e(k,function(g,h){e(g,
function(g,c){if(g.elm==b)return a={x:c,y:h},!1});return!a});return a}var k,q,D,H;F();if(H=j.select("td.mceSelected,th.mceSelected")[0]||j.getParent(t.getStart(),"th,td")){q=G(H);var I,J;I=J=0;e(k,function(b,a){e(b,function(b,h){var c,f;w(b)&&(b=k[a][h],h>I&&(I=h),a>J&&(J=a),b.real&&(c=b.colspan-1,f=b.rowspan-1,c&&h+c>I&&(I=h+c),f&&a+f>J&&(J=a+f)))})});D={x:I,y:J};H=B(q.x,q.y)}l.extend(this,{deleteTable:function(){var b=j.createRng();b.setStartAfter(d);b.setEndAfter(d);t.setRng(b);j.remove(d)},split:O,
merge:function(b,c,g){var h,f,o,d,m,M;b?(pos=G(b),h=pos.x,b=pos.y,c=h+(c-1),g=b+(g-1)):(h=q.x,b=q.y,c=D.x,g=D.y);if(!(0==h&&z())&&(d=B(h,b),f=B(c,g),d&&f&&d.part==f.part)){O();F();d=B(h,b).elm;n(d,"colSpan",c-h+1);n(d,"rowSpan",g-b+1);for(o=b;o<=g;o++)for(f=h;f<=c;f++)k[o]&&k[o][f]&&(b=k[o][f].elm,b!=d&&(m=l.grep(b.childNodes),e(m,function(b){d.appendChild(b)}),m.length&&(m=l.grep(d.childNodes),M=0,e(m,function(b){b.nodeName=="BR"&&(j.getAttrib(b,"data-mce-bogus")&&M++<m.length-1)&&d.removeChild(b)})),
j.remove(b)));a()}},insertRow:N,insertCol:u,insertNumCol:function(){if(z())e(k,function(b){cell=b[0].elm;s(cell).hasClass("numberingColumn")&&null!==cell.parentNode&&cell.parentNode.removeChild(cell)}),o(!1);else{var b;e(k,function(a){cell=a[0].elm;b!=cell&&(a=A(cell),cell.parentNode.insertBefore(a,cell),1<cell.rowSpan&&(a.rowSpan=cell.rowSpan),b=cell)});o(!0)}r()},updateNumCol:r,deleteCols:c,deleteRows:function(){var b;b=C();(l.isIE9||l.isIE10)&&M(b[0]);e(b.reverse(),function(b){var a,c;j.getNext(b,
"tr");e(b.cells,function(b){var c=v(b,"rowSpan");1<c&&(n(b,"rowSpan",c-1),a=G(b),m(a.x,a.y,1,1))});a=G(b.cells[0]);e(k[a.y],function(b){var a,b=b.elm;b!=c&&(a=v(b,"rowSpan"),1>=a?j.remove(b):n(b,"rowSpan",a-1),c=b)})});a();r()},cutRows:function(){var b=C();(l.isIE9||l.isIE10)&&M(b[0]);j.remove(b);a();r();return b},copyRows:function(){var b=C();e(b,function(a,c){b[c]=E(a,!0)});return b},pasteRows:function(b,a){var c=C(),h=c[a?0:c.length-1],f=h.cells.length;e(k,function(b){var a;f=0;e(b,function(b){b.real&&
(f+=b.colspan);b.elm.parentNode==h&&(a=1)});if(a)return!1});a||b.reverse();e(b,function(b){var c=b.cells.length,g;s(b.cells[0]).hasClass("numberingColumn")&&b.removeChild(b.cells[0]);for(i=0;i<c;i++)g=b.cells[i],n(g,"colSpan",1),n(g,"rowSpan",1);z()&&(b.insertBefore(b.firstChild.cloneNode(!1),b.firstChild),s(b.firstChild).addClass("numberingColumn"),c++);for(;f<c;)u(!1),f++;for(i=c;i<f;i++)b.appendChild(A(b.cells[c-1]));a?h.parentNode.insertBefore(b,h):j.insertAfter(b,h)});r()},getPos:G,setStartCell:function(b){q=
G(b)},setEndCell:function(b){var a,c,f,o,d,m,e;D=G(b);if(q&&D){a=Math.min(q.x,D.x);c=Math.min(q.y,D.y);f=Math.max(q.x,D.x);o=Math.max(q.y,D.y);d=f;m=o;for(y=c;y<=m;y++)b=k[y][a],b.real||a-(b.colspan-1)<a&&(a-=b.colspan-1);for(x=a;x<=d;x++)b=k[c][x],b.real||c-(b.rowspan-1)<c&&(c-=b.rowspan-1);for(y=c;y<=o;y++)for(x=a;x<=f;x++)b=k[y][x],b.real&&(e=b.colspan-1,b=b.rowspan-1,e&&x+e>d&&(d=x+e),b&&y+b>m&&(m=y+b));j.removeClass(j.select("td.mceSelected,th.mceSelected"),"mceSelected");for(y=c;y<=m;y++)for(x=
a;x<=d;x++)k[y][x]&&j.addClass(k[y][x].elm,"mceSelected")}},moveCaretToNextCell:function(){var b=Q();b||(N(!1),F(),b=Q());P(b)},moveCaretToPrevCell:function(){var b=R();b||(N(!0),F(),q=G(j.getParent(t.getStart(),"th,td")),b=R());P(b,!1)},cutColumns:function(){var b=f();c();return b},copyColumns:f,pasteColumns:function(b,a){var c=Object.keys(b);a||c.reverse();s.each(c,function(c,f){for(var g=u(a),c=0;c<g.length;c++)g[c].innerHTML=b[f][c]||""})},prepareTableForColPasteAndCheckIfNeedToRepaint:function(b){var a=
b[Object.keys(b)[0]].length,c,f,b=!1;e(k,function(b,o){a--;c=o;e(b,function(b,a){f=a})});if(0<a){b=!0;H=B(f,c);for(var o=0;o<a;o++)N(!1)}return b}})}var e=l.each,K=AJS.storageManager("atlassian.editor","tables");l.create("tinymce.plugins.TablePlugin",{init:function(d,j){function t(a){var m=d.selection,a=a||m.getNode().parentNode;if(a=d.dom.getParent(a,"table"))return new S(a,d.dom,m)}function E(){d.getBody().style.webkitUserSelect="";A&&(d.dom.removeClass(d.dom.select("td.mceSelected,th.mceSelected"),
"mceSelected"),A=!1)}function F(a){for(var d=[],e="",e=0;e<a.length;e++)d.push(AJS.Rte.getEditor().serializer.serialize(a[e]));e="<tr>"+d.join("</tr><tr>")+"</tr>";K.setItem("copied",e,7200)}function B(){var a=[],e=K.getItem("copied")||"";e&&(a=d.getDoc().createElement("div"),a.innerHTML="<table>"+e+"</table>",a=s(a).find("tr"));return a}var n,w,C,A=!0;e([["table","table.desc","mceInsertTable",!0],["delete_table","table.del","mceTableDelete"],["delete_col","table.delete_col_desc","mceTableDeleteCol"],
["delete_row","table.delete_row_desc","mceTableDeleteRow"],["col_after","table.col_after_desc","mceTableInsertColAfter"],["col_before","table.col_before_desc","mceTableInsertColBefore"],["row_after","table.row_after_desc","mceTableInsertRowAfter"],["row_before","table.row_before_desc","mceTableInsertRowBefore"],["row_props","table.row_desc","mceTableRowProps",!0],["cell_props","table.cell_desc","mceTableCellProps",!0],["split_cells","table.split_cells_desc","mceTableSplitCells",!0],["merge_cells",
"table.merge_cells_desc","mceTableMergeCells",!0]],function(a){d.addButton(a[0],{title:a[1],cmd:a[2],ui:a[3]})});l.isIE||d.onClick.add(function(a,d){d=d.target;"TABLE"===d.nodeName&&(a.selection.select(d),a.nodeChanged())});d.onPreProcess.add(function(a,d){var e,j,l,r=a.dom,n;e=r.select("table",d.node);for(j=e.length;j--;){l=e[j];r.setAttrib(l,"data-mce-style","");if(n=r.getAttrib(l,"width"))r.setStyle(l,"width",n),r.setAttrib(l,"width","");if(n=r.getAttrib(l,"height"))r.setStyle(l,"height",n),r.setAttrib(l,
"height","")}});d.onNodeChange.add(function(a,d,e){e=a.selection.getStart();a=a.dom.getParent(e,"td,th,caption");d.setActive("table","TABLE"===e.nodeName||!!a);a&&"CAPTION"===a.nodeName&&(a=0);d.setDisabled("delete_table",!a);d.setDisabled("delete_col",!a);d.setDisabled("delete_table",!a);d.setDisabled("delete_row",!a);d.setDisabled("col_after",!a);d.setDisabled("col_before",!a);d.setDisabled("row_after",!a);d.setDisabled("row_before",!a);d.setDisabled("row_props",!a);d.setDisabled("cell_props",!a);
d.setDisabled("split_cells",!a);d.setDisabled("merge_cells",!a)});d.onInit.add(function(a){function d(a){if(l.isWebKit){var c=a.selection.getRng(),f=a.selection.getNode(),e=a.dom.getParent(c.startContainer,"TD,TH"),j=e,m=a.dom.getParent(c.startContainer,"TABLE"),n;m&&(n=m.parentNode);m=3==c.startContainer.nodeType&&0==c.startOffset&&0==c.endOffset&&j&&("TR"==f.nodeName||f==n);j=("TD"==f.nodeName||"TH"==f.nodeName)&&!j;if(m||j){e||(e=f);for(f=e.lastChild;f.lastChild;)f=f.lastChild;c.setEnd(f,f.nodeValue.length);
a.selection.setRng(c)}}}var j,s,u=a.dom,r;n=a.windowManager;a.onMouseDown.add(function(a,c){2!=c.button&&(E(),s=u.getParent(c.target,"td,th"),j=u.getParent(s,"table"))});u.bind(a.getDoc(),"mouseover",function(d){var c,f=u.getParent(d.target,"td,th");if(s&&(r||f!=s)&&f){c=u.getParent(f,"table");c==j&&(r||(r=t(c),r.setStartCell(s),a.getBody().style.webkitUserSelect="none"),r.setEndCell(f),A=!0);c=a.selection.getSel();try{c.removeAllRanges?c.removeAllRanges():c.empty()}catch(e){}d.preventDefault()}});
a.onMouseUp.add(function(a){var c,f=a.selection,d;f.getSel();var e,m;if(s){r&&(a.getBody().style.webkitUserSelect="");var n=function(a,f){var d=new l.dom.TreeWalker(a,a);do{if(a.nodeType==3&&l.trim(a.nodeValue).length!=0){f?c.setStart(a,0):c.setEnd(a,a.nodeValue.length);break}if(a.nodeName=="BR"){f?c.setStartBefore(a):c.setEndBefore(a);break}}while(a=f?d.next():d.prev())};d=u.select("td.mceSelected,th.mceSelected");if(0<d.length){c=u.createRng();e=d[0];c.setStartBefore(e);c.setEndAfter(e);n(e,1);
d=new l.dom.TreeWalker(e,u.getParent(d[0],"table"));do if("TD"==e.nodeName||"TH"==e.nodeName){if(!u.hasClass(e,"mceSelected"))break;m=e}while(e=d.next());n(m);f.setRng(c)}a.nodeChanged();s=r=j=null}});a.onUndo.add(function(a){A=0<a.dom.select("td.mceSelected, th.mceSelected").length});a.onKeyUp.add(function(){E()});a.onKeyDown.add(function(a){d(a)});a.onMouseDown.add(function(a,c){2!=c.button&&d(a)});a.plugins.table.fixTableCellSelection=d;a&&a.plugins.contextmenu&&a.plugins.contextmenu.onContextMenu.add(function(d,
c,f){d=a.selection.getNode()||a.getBody();a.dom.getParent(f,"td")||a.dom.getParent(f,"th")||a.dom.select("td.mceSelected,th.mceSelected").length?(c.removeAll(),"A"==d.nodeName&&!a.dom.getAttrib(d,"name")&&(c.add({title:"advanced.link_desc",icon:"link",cmd:a.plugins.advlink?"mceAdvLink":"mceLink",ui:!0}),c.add({title:"advanced.unlink_desc",icon:"unlink",cmd:"UnLink"}),c.addSeparator()),"IMG"==d.nodeName&&-1==d.className.indexOf("mceItem")&&(c.add({title:"advanced.image_desc",icon:"image",cmd:a.plugins.advimage?
"mceAdvImage":"mceImage",ui:!0}),c.addSeparator()),c.add({title:"table.desc",icon:"table",cmd:"mceInsertTable",value:{action:"insert"}}),c.add({title:"table.props_desc",icon:"table_props",cmd:"mceInsertTable"}),c.add({title:"table.del",icon:"delete_table",cmd:"mceTableDelete"}),c.addSeparator(),f=c.addMenu({title:"table.cell"}),f.add({title:"table.cell_desc",icon:"cell_props",cmd:"mceTableCellProps"}),f.add({title:"table.split_cells_desc",icon:"split_cells",cmd:"mceTableSplitCells"}),f.add({title:"table.merge_cells_desc",
icon:"merge_cells",cmd:"mceTableMergeCells"}),f=c.addMenu({title:"table.row"}),f.add({title:"table.row_desc",icon:"row_props",cmd:"mceTableRowProps"}),f.add({title:"table.row_before_desc",icon:"row_before",cmd:"mceTableInsertRowBefore"}),f.add({title:"table.row_after_desc",icon:"row_after",cmd:"mceTableInsertRowAfter"}),f.add({title:"table.delete_row_desc",icon:"delete_row",cmd:"mceTableDeleteRow"}),f.addSeparator(),f.add({title:"table.cut_row_desc",icon:"cut",cmd:"mceTableCutRow"}),f.add({title:"table.copy_row_desc",
icon:"copy",cmd:"mceTableCopyRow"}),f.add({title:"table.paste_row_before_desc",icon:"paste",cmd:"mceTablePasteRowBefore"}).setDisabled(!w),f.add({title:"table.paste_row_after_desc",icon:"paste",cmd:"mceTablePasteRowAfter"}).setDisabled(!w),f=c.addMenu({title:"table.col"}),f.add({title:"table.col_before_desc",icon:"col_before",cmd:"mceTableInsertColBefore"}),f.add({title:"table.col_after_desc",icon:"col_after",cmd:"mceTableInsertColAfter"}),f.add({title:"table.delete_col_desc",icon:"delete_col",cmd:"mceTableDeleteCol"})):
c.add({title:"table.desc",icon:"table",cmd:"mceInsertTable"})});l.isWebKit&&a.onKeyDown.add(function(a,c){function f(c,e,k){var m=c?"previousSibling":"nextSibling",b=a.dom.getParent(e,"tr"),n=b[m];if(n)return j(a,e,n,c),l.dom.Event.cancel(k),!0;var n=a.dom.getParent(b,"table"),g=b.parentNode,h=g.nodeName.toLowerCase();if("tbody"===h||h===(c?"tfoot":"thead")){var h=a.dom.select(">tbody",n),p=h.indexOf(g);c&&0===p||!c&&p===h.length-1?(g=a.dom.select(">"+(c?"thead":"tfoot"),n),g=0!==g.length?g[0]:null):
-1===p?(g="thead"===g.tagName.toLowerCase()?0:h.length-1,g=h[g]):g=h[p+(c?-1:1)];if(null!==g)return(b=d(g,c))&&j(a,e,b,c),l.dom.Event.cancel(k),!0}(e=n[m])?(a.selection.setCursorLocation(e,0),k=!0):(e=a.dom.getParent(n,"td,th"))?k=f(c,e,k):(c=d(b,!c),a.selection.setCursorLocation(c,0),k=l.dom.Event.cancel(k));return k}function d(c,f){var e=c&&c[f?"lastChild":"firstChild"];return e&&"BR"===e.nodeName?a.dom.getParent(e,"td,th"):e}function j(c,f,k,l){for(var b=0,c=c.dom.getParent(f,"td,th");c.previousSibling;)c=
c.previousSibling,b+=v(c,"colspan");var m=b,g=0,h=0;e(k.children,function(a,b){g+=v(a,"colspan");h=b;if(g>m)return!1});k=k.childNodes[h];l=d(k,l);a.selection.setCursorLocation(l||k,0)}var m=l.VK,n=c.keyCode,r;if(r=n==m.UP||n==m.DOWN){r=a;var k=r.selection.getNode();r=null!==r.dom.getParent(k,"tr")}if(r){var q=a.selection.getNode();setTimeout(function(){var d=a.selection.getNode(),d=a.dom.getParent(d,"td,th"),e=a.dom.getParent(q,"td,th");d&&(d!==e&&a.dom.getParent(d,"TABLE")===a.dom.getParent(e,"TABLE"))&&
f(!c.shiftKey&&n===m.UP,q,c)},0)}});if(!l.isIE){var z=function(){};l.isGecko&&a.onKeyDown.add(function(a,c){var d,e,j=a.dom;if(37==c.keyCode||38==c.keyCode)if(d=a.selection.getRng(),(e=j.getParent(d.startContainer,"table"))&&a.getBody().firstChild==e){var l=d,m=e.ownerDocument;d=m.createRange();d.setStartBefore(e);d.setEnd(l.endContainer,l.endOffset);l=m.createElement("body");l.appendChild(d.cloneContents());0==l.innerHTML.replace(/<(br|img|object|embed|input|textarea)[^>]*>/gi,"-").replace(/<[^>]+>/g,
"").length&&(d=j.createRng(),d.setStartBefore(e),d.setEndBefore(e),a.selection.setRng(d),c.preventDefault())}});a.onKeyUp.add(z);a.onSetContent.add(z);a.onVisualAid.add(z);l.isGecko&&a.onKeyDown.add(function(a,c){if(c.keyCode===l.VK.ENTER&&c.shiftKey){var d=a.selection.getRng().startContainer;if(u.getParent(d,"td,th")){var e=a.getDoc().createTextNode("﻿");u.insertAfter(e,d)}}});a.startContent=a.getContent({format:"raw"})}});e({mceTableSplitCells:function(a){a.split()},mceTableMergeCells:function(a){d.dom.getParent(d.selection.getNode(),
"th,td");d.dom.select("td.mceSelected,th.mceSelected").length&&a.merge()},mceTableInsertRowBefore:function(a){a.insertRow(!0)},mceTableInsertRowAfter:function(a){a.insertRow()},mceTableInsertNumberingCol:function(a){a.insertNumCol()},mceTableUpdateNumberingCol:function(a){a.updateNumCol()},mceTableInsertColBefore:function(a){a.insertCol(!0)},mceTableInsertColAfter:function(a){a.insertCol()},mceTableDeleteCol:function(a){a.deleteCols()},mceTableDeleteRow:function(a){a.deleteRows()},mceTableCutRow:function(a){w=
a.cutRows();F(w)},mceTableCopyRow:function(a){w=a.copyRows();F(w)},mceTablePasteRowBefore:function(a){a.pasteRows(B(),!0)},mceTablePasteRowAfter:function(a){a.pasteRows(B())},mceTableDelete:function(a){a.deleteTable()},mceTableMoveCaretToNextCell:function(a){a.moveCaretToNextCell()},mceTableMoveCaretToPrevCell:function(a){a.moveCaretToPrevCell()},mceTableCopyCol:function(a){C=a.copyColumns();K.setItem("copiedCols",JSON.stringify(C))},mceTableCutCol:function(a){C=a.cutColumns();K.setItem("copiedCols",
JSON.stringify(C))},mceTablePasteColBefore:function(a){var e=JSON.parse(K.getItem("copiedCols"))||{};a.prepareTableForColPasteAndCheckIfNeedToRepaint(e)&&(d.execCommand("mceRepaint"),a=t());a.pasteColumns(e,!0)},mceTablePasteColAfter:function(a){a.pasteColumns(JSON.parse(K.getItem("copiedCols"))||{},!1)}},function(a,e){d.addCommand(e,function(){var e=t();e&&(a(e),d.execCommand("mceRepaint"),E())})});e({mceInsertTable:function(a){n.open({url:j+"/table.htm",width:400+parseInt(d.getLang("table.table_delta_width",
0)),height:320+parseInt(d.getLang("table.table_delta_height",0)),inline:1},{plugin_url:j,action:a?a.action:0})},mceTableRowProps:function(){n.open({url:j+"/row.htm",width:400+parseInt(d.getLang("table.rowprops_delta_width",0)),height:295+parseInt(d.getLang("table.rowprops_delta_height",0)),inline:1},{plugin_url:j})},mceTableCellProps:function(){n.open({url:j+"/cell.htm",width:400+parseInt(d.getLang("table.cellprops_delta_width",0)),height:295+parseInt(d.getLang("table.cellprops_delta_height",0)),
inline:1},{plugin_url:j})}},function(a,e){d.addCommand(e,function(d,e){a(e)})})}});l.PluginManager.add("table",l.plugins.TablePlugin)})(tinymce,AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.tinymce:atlassian-rte-javascript-tinymce-extensions', location = 'jscripts/tiny_mce/plugins/table/js/table.js' */
(function(){function i(c,a){var e=document.forms[0].elements[c];if("undefined"==typeof a||null==a)a="",e&&(a=e.value);if(""==a)return"";a=a.replace(/&/g,"&amp;");a=a.replace(/\"/g,"&quot;");a=a.replace(/</g,"&lt;");a=a.replace(/>/g,"&gt;");return" "+c+'="'+a+'"'}AJS.$.extend(tinymce.plugins.TablePlugin.prototype,{insertTable:function(){var c=AJS.$("#tinymce-table-form")[0],a=AJS.Rte.getEditor(),e=a.dom,f=2,m=2,h=tinymce.settings.confluence_table_style,d="",b="";e.getParent(a.selection.getNode(),"table");
var j,n;j=c.elements.heading.checked;n=c.elements["equal-width-columns"].checked;f=c.elements.cols.value;m=c.elements.rows.value;c=AJS.$("#tinymce-table-form input[name='width']").val();b=b+"<table"+i("data-mce-new","1");c&&a.settings.inline_styles?(d&&(d+="; "),/^[0-9\.]+$/.test(c)&&(c+="px"),d+="width: "+c):b+=i("width",c);b+=i("class",h);b+=i("style",d);b+=">";for(h=0;h<m;h++){b+="<tr>";for(d=0;d<f;d++){var k,l;0==h&&j?(c="th",l=tinymce.settings.confluence_table_heading_style):(c="td",l=tinymce.settings.confluence_table_cell_style);
n&&(k=' width="'+Math.round(100*(100/f))/100+'%"');b+="<"+c+(k?k:"")+' class="'+l+'">';!tinymce.isIE||tinymce.isIE11?b+='<br data-mce-bogus="1"/>':tinymce.isIE9&&(b+="&nbsp;");b+="</"+c+">"}b+="</tr>"}b+="</table>";if(a.settings.fix_table_elements){var g="";AJS.Rte.BookmarkManager.restoreBookmark();a.selection.setContent('<br class="_mce_marker" />');tinymce.each("h1 h2 h3 h4 h5 h6 p".split(" "),function(a){g&&(g=g+",");g=g+(a+" ._mce_marker")});tinymce.each(a.dom.select(g),function(b){a.dom.split(a.dom.getParent(b,
"h1,h2,h3,h4,h5,h6,p"),b)});f=e.select("br._mce_marker")[0];a.selection.select(f);a.selection.setContent(b);a.dom.remove(f)}else a.execCommand("mceInsertContent",!1,b);tinymce.each(e.select("table[data-mce-new]"),function(b){var c=e.select(j?"th":"td",b);try{a.selection.setCursorLocation(c[0],0)}catch(d){}e.setAttrib(b,"data-mce-new","")});a.addVisual();a.execCommand("mceEndUndoLevel",!1,{},{skip_undo:!0})}})})();
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.tinymce:atlassian-rte-javascript-tinymce-extensions', location = 'jscripts/tiny_mce/plugins/autoresize/editor_plugin_src.js' */
(function(j){tinymce.create("tinymce.plugins.AutoResizePlugin",{init:function(a){function b(){var e,d=a.getDoc();e=d.body;var h=d.documentElement,i=tinymce.DOM,f=c.autoresize_min_height,d=AJS.$(d).height();d>c.autoresize_min_height&&(f=d);c.autoresize_max_height&&d>c.autoresize_max_height?(f=c.autoresize_max_height,e.style.overflowY="auto",h.style.overflowY="auto"):(e.style.overflowY="hidden",h.style.overflowY="hidden",e.scrollTop=0);f!==g&&(e=f-g,i.setStyle(i.get(a.id+"_ifr"),"height",f+"px"),g=
f,tinymce.isWebKit&&0>e&&b())}a.onInit.add(function(){j(a.getBody()).addClass("resizable")});var c=this,g=0;a.getParam("fullscreen_is_enabled")||(c.editor=a,c.autoresize_min_height=parseInt(a.getParam("autoresize_min_height",a.getElement().offsetHeight)),c.autoresize_max_height=parseInt(a.getParam("autoresize_max_height",0)),a.onChange.add(b),a.onSetContent.add(b),a.onPaste.add(b),a.onKeyUp.add(b),a.onPostRender.add(b),a.getParam("autoresize_on_init",!0)&&(a.onLoad.add(b),a.onLoadContent.add(b)),
a.addCommand("mceAutoResize",b))},getInfo:function(){return{longname:"Auto Resize",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/autoresize",version:tinymce.majorVersion+"."+tinymce.minorVersion}}});tinymce.PluginManager.add("autoresize",tinymce.plugins.AutoResizePlugin)})($);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.aui.staging:persistable', location = 'js/persistable.js' */
define("confluence/persistable",["ajs","confluence-skate"],function(g,b){var f=g.storageManager("confluence","userSettings");return b("data-persist",{type:b.types.ATTRIBUTE,ready:function(a){var d=null;if(!a.name)throw'Missing attribute "name"';var e=a.getAttribute("data-persist"),b=f.getItem(a.name);/radio|checkbox/.test(a.type)&&a.dataset.defaultValue&&(d=a.dataset.defaultValue);if(/value|checked/.test(e)){var c;null!==b?c=b:"undefined"!==typeof d&&(c=d);"undefined"!==typeof c&&("checked"===e&&
(c="true"===c),a[e]=c)}else throw"Persistable only works with 'value' or 'checked' attributes!";},events:{change:function(a){var b=a.getAttribute("data-persist");f.setItem(a.name,a[b])}}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:attachments-insert-utils-resources', location = 'utils/attachments-insert-utils.js' */
define("confluence-editor/utils/attachments-insert",["underscore","ajs"],function(c,b){return{insertFilePlaceholder:function(a,d,e){a.height="comment"===b.Meta.get("content-type")?"150":"250";a.ownerId&&a.ownerId===b.Data.get("content-id")&&(delete a.page,delete a.space,delete a.date);a=c.omit(c.pick(a,"name","page","space","date","height"),function(a){return!a});a={contentId:b.Meta.get("content-id")||"0",macro:{name:"view-file",params:a}};tinymce.confluence.MacroUtils.insertMacro(a,d).done(function(a){e&&
$(a).click()})}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-javascript-resources', location = 'tinymce3/plugins/flextofullsize/editor_plugin_src.js' */
(function(a){var f,e,c=function(){var d=a("#wysiwyg").is(":hidden")?a("#preview"):a("#wysiwyg");e=d.find("iframe");$headerPrecursor=a("#header-precursor");var b=a(window).height(),c=$headerPrecursor.offset().top+$headerPrecursor.height()+a("#header").height();a("#content.edit").height(b-c);setTimeout(function(){if(a("#preview").is(":hidden"))e.height(0).height(d.height());else{a("#content.edit").height("auto");var g=a("#savebar-container").height();c+=a("#editor-precursor").height()+a("#conflict-wrapper").height();
e.height(b-c-g-4)}},1)};tinymce.create("tinymce.plugins.flextofullsizeplugin",{init:function(d){d.onInit.add(function(){var b;a(d.getBody()).addClass("fullsize");if(tinymce.isIE||tinymce.isOpera)b=d.getWin(),f=a(b.parent),b=a(b.parent.document),a("body").css({overflow:"hidden"}),f.bind("resize.resizeplugin",function(){c()}),b.bind("messageClose",function(){setTimeout(c,0)}),b.bind("resize.resizeplugin",function(a,b){c(b&&b.height)}),b.bind("mode-changed",function(){c()}),d.onChange.add(function(){c()}),
d.onInit.add(function(){c()})})},getInfo:function(){return{longname:"flex editor to full size plugin",description:"adjusts height of editor so it always occupies the right space in between the toolbars",author:"Atlassian",authorurl:"http://www.atlassian.com",version:"1.0"}}});tinymce.PluginManager.add("flextofullsize",tinymce.plugins.flextofullsizeplugin)})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-javascript-resources', location = 'i18n/tinyMce-translations.i18n.js' */
TinyMCELang={popup_blocked:"The browser has blocked a popup opened by the Editor.",ctrl_key:"Ctrl",shift_key:"Shift",searchreplace:{search_desc:"Find",replace_desc:"Find/Replace"},searchreplace_dlg:{allreplacedplural:"{0} replacements were made",allreplacedsingular:"1 replacement was made",
notfound:"No replacements were made",findlabel:"Find",replacelabel:"Replace",findnext:"Next",findprevious:"Previous",replace:"Replace",replaceall:"Replace all",close:"Close"},
advhr:{advhr_desc:"tinymce.advhr.advhr_desc"},emotions:{emotions_desc:"Emoticons"},emotions_dlg:{title:"Insert emoticon",desc:"Emoticons",smile:"Smile :)",sad:"Sad :(",tongue:"Tongue :p",biggrin:"Big grin :D",wink:"Wink ;)",
thumbs_up:"Thumbs up (y)",thumbs_down:"Thumbs down (n)",information:"Info (i)",check:"Tick (/)",error:"Error (x)",warning:"Warning (!)",add:"Plus (+)",forbidden:"Minus (-)",help_16:"Question mark (?)",
lightbulb_on:"Lightbulb on (on)",lightbulb:"Lightbulb off (off)",star_yellow:"Yellow star (*y)",star_red:"Red star (*r)",star_green:"Green star (*g)",star_blue:"Blue star (*b)",heart:"Heart \u003c3",broken_heart:"Broken heart \u003c/3"},confluence:{conf_macro_browser:"Macro",
conf_macro_browser_desc:"Insert macro",conf_image:"Image",confimage_desc:"Insert image",conf_file:"Files and images",confifile_desc:"Insert files and images",conf_link:"Link",conflink_desc:"Insert link",conf_table:"Table",
conf_wikimarkup:"Markup",conf_wikimarkup_desc:"Insert markup",conf_wikimarkup_errors:"Wiki markup conversion errors",conf_wikimarkup_timeout:"The server took too long to convert the wiki markup. This may only be a temporary problem so you could try again.",conf_wikimarkup_hint:"Hint: you can also enter wiki markup directly in the editor, where it will be formatted as you type.",conf_wikimarkup_markdown_label:"Markdown",
conf_wikimarkup_confluence_label:"Confluence wiki",conf_shortcuts_help_desc:"Keyboard shortcuts help",conf_insert_button_title:"Insert"},table:{desc:"Insert table",row_before_desc:"Insert row before",row_after_desc:"Insert row after",delete_row_desc:"Remove row",
numbering_column_desc:"Insert numbering column",col_before_desc:"Insert column before",col_after_desc:"Insert column after",col_copy_desc:"Copy table column",col_paste_desc:"Paste table column",col_cut_desc:"Cut table column",delete_col_desc:"Remove column",split_cells_desc:"Split merged table cells",
merge_cells_desc:"Merge table cells",row_desc:"tinymce.table.row_desc",cell_desc:"tinymce.table.cell_desc",props_desc:"tinymce.table.props_desc",paste_row_before_desc:"Paste table row",paste_row_after_desc:"Paste row after",cut_row_desc:"Cut table row",copy_row_desc:"Copy table row",
del:"Remove table",row:"Row",col:"Column",cell:"Cell",row_highlight:"Heading row",col_highlight:"Heading column",selection_highlight:"Change cell colour",invalid_table_field:"Rows and columns must both be numbers greater than zero.",table_more_heading:"Table settings",
cut_row_desc_shortcut:"Ctrl+Shift+X",copy_row_desc_shortcut:"Ctrl+Shift+C",paste_row_before_desc_shortcut:"Ctrl+Shift+V",row_before_desc_shortcut:"Alt+\u2191",row_after_desc_shortcut:"Alt+\u2193"},advanced:{style_select:"tinymce.advanced.style_select",font_size:"tinymce.advanced.font_size",
fontdefault:"tinymce.advanced.fontdefault",block:"Format",paragraph:"Paragraph",pre:"Preformatted",h1:"Heading 1",h2:"Heading 2",h3:"Heading 3",h4:"Heading 4",h5:"Heading 5",h6:"Heading 6",blockquote:"Quote",
code:"tinymce.advanced.code",samp:"tinymce.advanced.samp",dt:"tinymce.advanced.dt",dd:"tinymce.advanced.dd",bold_desc:"Bold",italic_desc:"Italic",underline_desc:"Underline",striketrough_desc:"Strikethrough",justifyleft_desc:"Align left",
justifycenter_desc:"Align center",justifyright_desc:"Align right",justifyfull_desc:"Align full",bullist_desc:"Bullet list",numlist_desc:"Numbered list",tasklist_desc:"Task list",outdent_desc:"Outdent",indent_desc:"Indent",
undo_desc:"Undo",redo_desc:"Redo",link_desc:"tinymce.advanced.link_desc",unlink_desc:"Unlink",image_desc:"tinymce.advanced.image_desc",cleanup_desc:"tinymce.advanced.cleanup_desc",code_desc:"tinymce.advanced.code_desc",sub_desc:"Subscript",sup_desc:"Superscript",
hr_desc:"Horizontal rule",removeformat_desc:"tinymce.advanced.removeformat_desc",custom1_desc:"tinymce.advanced.custom1_desc",forecolor_desc:"Select text colour",backcolor_desc:"tinymce.advanced.backcolor_desc",charmap_desc:"Symbol",visualaid_desc:"tinymce.advanced.visualaid_desc",anchor_desc:"tinymce.advanced.anchor_desc",
cut_desc:"tinymce.advanced.cut_desc",copy_desc:"tinymce.advanced.copy_desc",paste_desc:"tinymce.advanced.paste_desc",image_props_desc:"tinymce.advanced.image_props_desc",newdocument_desc:"tinymce.advanced.newdocument_desc",help_desc:"Help",blockquote_desc:"tinymce.advanced.blockquote_desc",path:"tinymce.advanced.path",newdocument:"tinymce.advanced.newdocument",
toolbar_focus:"tinymce.advanced.toolbar_focus",more_colors:"tinymce.advanced.more_colors",paragraph_shortcut:"Ctrl+0",pre_shortcut:"Ctrl+7",h1_shortcut:"Ctrl+1",h2_shortcut:"Ctrl+2",h3_shortcut:"Ctrl+3",h4_shortcut:"Ctrl+4",
h5_shortcut:"Ctrl+5",h6_shortcut:"Ctrl+6",blockquote_shortcut:"Ctrl+8",bullist_shortcut:"Ctrl+Shift+B",numlist_shortcut:"Ctrl+Shift+N",tasklist_shortcut:"[ then ]",undo_shortcut:"Ctrl+Z",redo_shortcut:"Ctrl+Y"},
colorpicker:{more_colors:"More colours",title:"Select a colour",picker_tab:"Picker",picker_title:"Colour picker",palette_title:"tinymce.colorpicker.palette_title",named_tab:"tinymce.colorpicker.named_tab",named_title:"tinymce.colorpicker.named_title",color:"Colour",
name:"tinymce.colorpicker.name",apply:"tinymce.colorpicker.apply"},hints:{drafts:"Hint: Confluence saves drafts automatically. If you ever lose a window, recover your work from the \"Username -\u003e Drafts\" menu.",dnd:"Hint: you can drag and drop images and Office files from your computer right into this editor.",insert_link_recently_viewed:"Hint: type \"\u003cstrong\u003e[\u003c/strong\u003e\" to see a list of suggested pages and insert a link.",insert_link_search:"Hint: type \"\u003cstrong\u003e[\u003c/strong\u003e\" and part of a page title to find and link to that page.",insert_link_end:"Hint: press \u003cstrong\u003eCtrl+Shift+K\u003c/strong\u003e after a word to find and link to relevant pages. Press it again for more suggestions.",insert_link_newpage:"Hint: type \"\u003cstrong\u003e[\u003c/strong\u003e\" and the title of a new page you wish to create, to see an insert link suggestion.",
insert_link_user_mention:"Hint: you can mention somebody in Confluence by typing \"\u003cstrong\u003e@\u003c/strong\u003e\" and then their name.",insert_image_on_page:"Hint: type \"\u003cstrong\u003e!\u003c/strong\u003e\" to see images attached to the page and insert one of them.",insert_image_search:"Hint: type \"\u003cstrong\u003e!\u003c/strong\u003e\" and part of an image name to find and insert the image.",insert_image_end:"Hint: press \u003cstrong\u003eCtrl+Shift+M\u003c/strong\u003e after a word to find and insert relevant images.",insert_wikimarkup:"Hint: the Editor will automatically convert wiki markup as you type it.",insert_wikimarkup_dialog:"Hint: press \u003cstrong\u003eCtrl+Shift+D\u003c/strong\u003e to open the Wiki Markup dialog.",insert_link:"Hint: press \u003cstrong\u003eCtrl+K\u003c/strong\u003e to open the link browser.",
insert_image:"Hint: press \u003cstrong\u003eCtrl+M\u003c/strong\u003e to open the image browser.",insert_macro:"Hint: press \u003cstrong\u003eCtrl+Shift+A\u003c/strong\u003e to open the macro browser.",insert_macro_toc:"Hint: Let Confluence generate you a table of contents for this page. Use \"Insert -\u003e Table of contents\"",insert_bullet_list:"Hint: press \u003cstrong\u003eCtrl+Shift+B\u003c/strong\u003e to start a bullet list.",insert_numbered_list:"Hint: press \u003cstrong\u003eCtrl+Shift+N\u003c/strong\u003e to start a numbered list.",insert_heading:"Hint: press \u003cstrong\u003eCtrl+1\u003c/strong\u003e to create a heading level 1, \u003cstrong\u003eCtrl+2\u003c/strong\u003e for heading level 2 and so on.",insert_table:"Hint: press \u003cstrong\u003eCtrl+Shift+I\u003c/strong\u003e to insert a table.",table_rows_copy:"Hint: press \u003cstrong\u003eCtrl+Shift+C\u003c/strong\u003e to copy a row and \u003cstrong\u003eCtrl+Shift+V\u003c/strong\u003e to paste a row in a table.",
table_rows_cut:"Hint: press \u003cstrong\u003eCtrl+Shift+X\u003c/strong\u003e to cut a row and \u003cstrong\u003eCtrl+Shift+V\u003c/strong\u003e to paste a row in a table.",insert_newline:"Hint: Type \u003cstrong\u003eShift+Enter\u003c/strong\u003e to insert a new paragraph without spacing",autoformat_heading1:"Hint: Type \"\u003cstrong\u003eh1. Title\u003c/strong\u003e\" to quickly insert a Heading 1.",autoformat_heading3:"Hint: Type \"\u003cstrong\u003eh3. Title\u003c/strong\u003e\" to quickly insert a Heading 3.",autoformat_code:"Hint: Type \"\u003cstrong\u003e{{code}}\u003c/strong\u003e\" to quickly insert monospaced text."},auiwindowmanager:{cancel:"Cancel",ok:"OK"},propertypanel:{links_goto:"Go to link",
links_edit:"Edit",links_unlink:"Unlink",links_goto_disabled_tooltip:"This link goes to content on the page you are editing",links_edit_tooltip:"Edit link in a dialogue",links_unlink_tooltip:"Replace link with the text it contains",images_small:"Small",images_medium:"Medium",
images_large:"Large",images_original:"Original",images_border:"Border",images_link_create:"Link",images_link_edit:"Edit link",images_link_remove:"Unlink",images_link_create_tooltip:"Link this image to other content",
images_link_edit_tooltip:"Edit the link for this image",images_link_remove_tooltip:"Remove the link for this image",images_sizing_tooltip:"Resize image to a specific width",images_small_tooltip:"Resize image to small and link to the original",images_medium_tooltip:"Resize image to medium and link to the original",images_large_tooltip:"Resize image to large and link to the original",
images_original_tooltip:"Reset image size to original",images_thumbnail_tooltip:"tinymce.propertypanel.images.thumbnail.tooltip",images_border_tooltip:"Display a border around image"}};
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-javascript-resources', location = 'toolbar/toolbar.soy' */
// This file was automatically generated from toolbar.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.Editor == 'undefined') { Confluence.Templates.Editor = {}; }
if (typeof Confluence.Templates.Editor.Toolbar == 'undefined') { Confluence.Templates.Editor.Toolbar = {}; }


Confluence.Templates.Editor.Toolbar.toolbarButton = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<li id="', soy.$$escapeHtml(opt_data.button.id), '" class="toolbar-item ', soy.$$escapeHtml(opt_data.button.className), '" data-tooltip="', soy.$$escapeHtml(opt_data.button.tooltip), '" data-weight="', soy.$$escapeHtml(opt_data.button.weight), '"><a class="toolbar-trigger aui-button" href="#" data-control-id="', soy.$$escapeHtml(opt_data.button.id), '"><span class="icon"></span><span class="trigger-text">', soy.$$escapeHtml(opt_data.button.title), '</span></a></li>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-javascript-resources', location = 'tinymce3/plugins/confluencepaste/editor_plugin_src.js' */
(function(g){function h(b,a){return b.getParam(a,q[a])}function p(b,a){b.is("ul.inline-task-list")?a.each(function(){var b=g(this);b.attr("data-inline-task-id")||b.attr("data-inline-task-id","")}):a.removeAttr("data-inline-task-id").removeAttr("data-pasted-task")}var k=tinymce.each,q={paste_auto_cleanup_on_paste:!0,paste_enable_default_filters:!0,paste_block_drop:!1,paste_retain_style_properties:"none",paste_strip_class_attributes:"mso",paste_remove_spans:!1,paste_remove_styles:!1,paste_remove_styles_if_webkit:!1,
paste_convert_middot_lists:!0,paste_convert_headers_to_strong:!1,paste_dialog_width:"450",paste_dialog_height:"400",paste_text_use_dialog:!1,paste_text_sticky:!1,paste_text_sticky_default:!1,paste_text_notifyalways:!1,paste_text_linebreaktype:"combined",paste_text_replacements:[[/\u2026/g,"..."],[/[\x93\x94\u201c\u201d]/g,'"'],[/[\x60\x91\x92\u2018\u2019]/g,"'"]]};tinymce.create("tinymce.plugins.ConfluencePastePlugin",{init:function(b,a){function c(a,c){var e=b.dom,f;d.onPreProcess.dispatch(d,a);
a.node=e.create("div",0,a.content);tinymce.isGecko&&(f=b.selection.getRng(!0),f.startContainer==f.endContainer&&3==f.startContainer.nodeType&&1===a.node.childNodes.length&&(/^(p|h[1-6]|pre)$/i.test(a.node.firstChild.nodeName)&&-1===a.content.indexOf("__MCE_ITEM__"))&&e.remove(a.node.firstChild,!0));d.onPostProcess.dispatch(d,a);a.content=b.serializer.serialize(a.node,{getInner:1,forced_root_block:""});!c&&b.pasteAsPlainText?(d._insertPlainText(a.content),h(b,"paste_text_sticky")||(b.pasteAsPlainText=
!1,b.controlManager.setActive("pastetext",!1))):d._insert(a.content);tinymce.isGecko&&b.dom.getRoot().focus()}function f(a){if(a){var c=a.firstChild;c&&("DIV"==c.nodeName&&c.style.marginTop&&c.style.backgroundColor)&&b.dom.remove(c,1);tinymce.isWebKit&&k(b.dom.select("span.Apple-style-span",a),function(a){b.dom.removeClass(a,"Apple-style-span")});tinymce.isWebKit&&k(b.dom.select("br.Apple-interchange-newline",a),function(a){b.dom.remove(a)});k(b.dom.select("br[data-mce-bogus]",a),function(a){b.dom.remove(a)});
k(b.dom.select("meta[charset]",a),function(a){b.dom.remove(a)})}}function e(a){var d,e,i,o,n=b.selection,j=b.dom;i=b.getBody();var l;b.undoManager.add();if(function(a){if(!a.clipboardData||-1==g.inArray("text/html",a.clipboardData.types||[]))return!1;var a=a.clipboardData.getData("text/html"),d;if(!a||!g.browser.webkit)return!1;d=AJS.ClipboardHelper.repair(a);if(d==a)return!1;a=AJS.ClipboardHelper.parse(d,b.getDoc());d=g("<div></div>");d.append(a);f(d[0]);c({content:d.html()});return!0}(a))g.Event(a).preventDefault();
else{if(a.clipboardData||j.doc.dataTransfer)if(l=(a.clipboardData||j.doc.dataTransfer).getData("Text"),b.pasteAsPlainText){a.preventDefault();c({content:j.encode(l).replace(/\r?\n/g,"<br />")});return}if(!j.get("_mcePaste"))if(o=i,"true"!=i.contentEditable&&(o=j.getParent(b.selection.getStart(),'[contenteditable="true"]',i)),d=j.add(o,"div",{id:"_mcePaste","class":"mcePaste","data-mce-bogus":"1"},"\ufeff\ufeff"),i!=b.getDoc().body?i=j.getPos(b.selection.getStart(),i).y:(i=j.getViewPort(b.getWin()),
i=i.y+parseInt(i.h/2,10)),j.setStyles(d,{position:"absolute",left:tinymce.isGecko?-40:0,top:i-25,width:1,height:1,overflow:"hidden"}),tinymce.isIE)if(o=n.getRng(),i=j.doc.body.createTextRange(),i.moveToElementText(d),i.execCommand("Paste"),j.remove(d),"\ufeff\ufeff"===d.innerHTML)b.execCommand("mcePasteWord"),a.preventDefault();else return n.setRng(o),n.setContent(""),setTimeout(function(){c({content:d.innerHTML})},0),tinymce.dom.Event.cancel(a);else{var h=function(b){b.preventDefault()};j.bind(b.getDoc(),
"mousedown",h);j.bind(b.getDoc(),"keydown",h);e=b.selection.getRng();d=d.firstChild;i=b.getDoc().createRange();i.setStart(d,0);i.setEnd(d,2);n.setRng(i);window.setTimeout(function(){var a="",d;if(j.select("div.mcePaste > div.mcePaste").length)a="<p>"+j.encode(l).replace(/\r?\n\r?\n/g,"</p><p>").replace(/\r?\n/g,"<br />")+"</p>";else{d=j.select("div.mcePaste");k(d,function(b){f(b);b.parentNode.className!="mcePaste"&&(a=a+b.innerHTML)})}k(j.select("div.mcePaste"),function(b){j.remove(b)});e&&n.setRng(e);
c({content:a});j.unbind(b.getDoc(),"mousedown",h);j.unbind(b.getDoc(),"keydown",h)},0)}}}var d=this;d.editor=b;d.url=a;d.onPreProcess=new tinymce.util.Dispatcher(d);d.onPostProcess=new tinymce.util.Dispatcher(d);d.onPreProcess.add(d._preProcess);d.onPostProcess.add(d._postProcess);d.onPreProcess.add(function(a,c){b.execCallback("paste_preprocess",a,c)});d.onPostProcess.add(function(a,c){b.execCallback("paste_postprocess",a,c)});b.onKeyDown.addToTop(function(a,b){if((tinymce.isMac?b.metaKey:b.ctrlKey)&&
!b.shiftKey&&86==b.keyCode||b.shiftKey&&45==b.keyCode)return!1});b.pasteAsPlainText=h(b,"paste_text_sticky_default");b.addCommand("mceInsertClipboardContent",function(b,a){c(a,!0)});h(b,"paste_text_use_dialog")||b.addCommand("mcePasteText",function(){var a=tinymce.util.Cookie;b.pasteAsPlainText=!b.pasteAsPlainText;b.controlManager.setActive("pastetext",b.pasteAsPlainText);b.pasteAsPlainText&&!a.get("tinymcePasteText")&&(h(b,"paste_text_sticky")?b.windowManager.alert(b.translate("paste.plaintext_mode_sticky")):
b.windowManager.alert(b.translate("paste.plaintext_mode")),h(b,"paste_text_notifyalways")||a.set("tinymcePasteText","1",new Date((new Date).getFullYear()+1,12,31)))});b.addButton("pastetext",{title:"paste.paste_text_desc",cmd:"mcePasteText"});b.addButton("selectall",{title:"paste.selectall_desc",cmd:"selectall"});h(b,"paste_auto_cleanup_on_paste")&&(tinymce.isOpera||/Firefox\/2/.test(navigator.userAgent)?b.onKeyDown.addToTop(function(b,a){((tinymce.isMac?a.metaKey:a.ctrlKey)&&86==a.keyCode||a.shiftKey&&
45==a.keyCode)&&e(a)}):b.onPaste.addToTop(function(a,b){return e(b)}));b.onInit.add(function(){b.controlManager.setActive("pastetext",b.pasteAsPlainText);h(b,"paste_block_drop")&&b.dom.bind(b.getBody(),"dragend dragover draggesture dragdrop drop drag".split(" "),function(a){a.preventDefault();a.stopPropagation();return false})});b.onSaveContent.add(function(a,b){var c=g("<div/>").html(b.content);g('ul.inline-task-list > li[data-pasted-task="true"]',c).each(function(){var a=g(this),b=a.attr("data-inline-task-id");
b&&1<c.find('ul.inline-task-list > li[data-inline-task-id="'+b+'"]').size()&&a.attr("data-inline-task-id","")});b.content=c.html()});d._legacySupport()},getInfo:function(){return{longname:"ConfluencePastePlugin",author:"Atlassian",authorurl:"http://www.atlassian.com",infourl:"http://www.atlassian.com",version:tinymce.majorVersion+"."+tinymce.minorVersion}},_preProcess:function(b,a){function c(a){k(a,function(a){e=a.constructor==RegExp?e.replace(a,""):e.replace(a[0],a[1])})}var f=this.editor,e=a.content,
d=tinymce.grep,g=tinymce.explode,r=tinymce.trim,m,i;if(!1!=f.settings.paste_enable_default_filters){tinymce.isIE&&9<=document.documentMode&&(c([[/(?:<br>&nbsp;[\s\r\n]+|<br>)*(<\/?(h[1-6r]|p|div|address|pre|form|table|tbody|thead|tfoot|th|tr|td|li|ol|ul|caption|blockquote|center|dl|dt|dd|dir|fieldset)[^>]*>)(?:<br>&nbsp;[\s\r\n]+|<br>)*/g,"$1"]]),c([[/<br><br>/g,"<BR><BR>"],[/<br>/g," "],[/<BR><BR>/g,"<br>"]]));if(/class="?Mso|style="[^"]*\bmso-|w:WordDocument/i.test(e)||a.wordContent){a.wordContent=
!0;c([/^\s*(&nbsp;)+/gi,/(&nbsp;|<br[^>]*>)+\s*$/gi]);h(f,"paste_convert_headers_to_strong")&&(e=e.replace(/<p [^>]*class="?MsoHeading"?[^>]*>(.*?)<\/p>/gi,"<p><strong>$1</strong></p>"));h(f,"paste_convert_middot_lists")&&c([[/<\!--\[if !supportLists\]--\>/gi,"$&__MCE_ITEM__"],[/(<span[^>]+(?:mso-list:|:\s*symbol)[^>]+>)/gi,"$1__MCE_ITEM__"],[/(<p[^>]+(?:MsoListParagraph)[^>]+>)/gi,"$1__MCE_ITEM__"]]);c([/<\!--[\s\S]+?--\>/gi,/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,
[/<(\/?)s>/gi,"<$1strike>"],[/&nbsp;/gi,"\u00a0"]]);do m=e.length,e=e.replace(/(<[a-z][^>]*\s)(?:id|name|language|type|on\w+|\w+:\w+)=(?:"[^"]*"|\w+)\s?/gi,"$1");while(m!=e.length);0==h(f,"paste_retain_style_properties").replace(/^none$/i,"").length?e=e.replace(/<\/?span[^>]*>/gi,""):c([[/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(a,b){return b.length>0?b.replace(/./," ").slice(Math.floor(b.length/2)).split("").join("\u00a0"):""}],[/(<[a-z][^>]*)\sstyle="([^"]*)"/gi,
function(a,b,c){var d=[],e=0,a=g(r(c).replace(/&quot;/gi,"'"),";");k(a,function(a){function b(a){return a+(a!=="0"&&/\d$/.test(a))?"px":""}var c,f=g(a,":");if(f.length==2){a=f[0].toLowerCase();c=f[1].toLowerCase();switch(a){case "mso-padding-alt":case "mso-padding-top-alt":case "mso-padding-right-alt":case "mso-padding-bottom-alt":case "mso-padding-left-alt":case "mso-margin-alt":case "mso-margin-top-alt":case "mso-margin-right-alt":case "mso-margin-bottom-alt":case "mso-margin-left-alt":case "mso-table-layout-alt":case "mso-height":case "mso-width":case "mso-vertical-align-alt":d[e++]=
a.replace(/^mso-|-alt$/g,"")+":"+b(c);return;case "horiz-align":d[e++]="text-align:"+c;return;case "vert-align":d[e++]="vertical-align:"+c;return;case "font-color":case "mso-foreground":d[e++]="color:"+c;return;case "mso-background":case "mso-highlight":d[e++]="background:"+c;return;case "mso-default-height":d[e++]="min-height:"+b(c);return;case "mso-default-width":d[e++]="min-width:"+b(c);return;case "mso-padding-between-alt":d[e++]="border-collapse:separate;border-spacing:"+b(c);return;case "text-line-through":if(c==
"single"||c=="double")d[e++]="text-decoration:line-through";return;case "mso-zero-height":c=="yes"&&(d[e++]="display:none");return}/^(mso|column|font-emph|lang|layout|line-break|list-image|nav|panose|punct|row|ruby|sep|size|src|tab-|table-border|text-(?!align|decor|indent|trans)|top-bar|version|vnd|word-break)/.test(a)||(d[e++]=a+":"+f[1])}});return e>0?b+' style="'+d.join(";")+'"':b}]])}h(f,"paste_convert_headers_to_strong")&&c([[/<h[1-6][^>]*>/gi,"<p><strong>"],[/<\/h[1-6][^>]*>/gi,"</strong></p>"]]);
c([[/Version:[\d.]+\nStartHTML:\d+\nEndHTML:\d+\nStartFragment:\d+\nEndFragment:\d+/gi,""]]);i=h(f,"paste_strip_class_attributes");"none"!==i&&(m=function(a,b){if(i==="all")return"";var c=d(g(b.replace(/^(["'])(.*)\1$/,"$2")," "),function(a){return/^(?!mso)/i.test(a)});return c.length?' class="'+c.join(" ")+'"':""},e=e.replace(/ class="([^"]+)"/gi,m),e=e.replace(/ class=([\-\w]+)/gi,m));h(f,"paste_remove_spans")&&(e=e.replace(/<\/?span[^>]*>/gi,""));a.content=e}},_postProcess:function(b,a){var c=
this.editor,f=c.dom,e;!1!=c.settings.paste_enable_default_filters&&(a.wordContent&&(k(f.select("a",a.node),function(a){(!a.href||-1!=a.href.indexOf("#_Toc"))&&f.remove(a,1)}),h(c,"paste_convert_middot_lists")&&this._convertLists(b,a),e=h(c,"paste_retain_style_properties"),tinymce.is(e,"string")&&("all"!==e&&"*"!==e)&&(e=tinymce.explode(e.replace(/^none$/i,"")),k(f.select("*",a.node),function(a){var b={},c=0,g,i,h;if(e)for(g=0;g<e.length;g++)if(i=e[g],h=f.getStyle(a,i))b[i]=h,c++;f.setAttrib(a,"style",
"");e&&0<c?f.setStyles(a,b):"SPAN"==a.nodeName&&!a.className&&f.remove(a,!0)}))),h(c,"paste_remove_styles")||h(c,"paste_remove_styles_if_webkit")&&tinymce.isWebKit?k(f.select("*[style]",a.node),function(a){a.removeAttribute("style");a.removeAttribute("data-mce-style")}):tinymce.isWebKit&&k(f.select("*",a.node),function(a){a.removeAttribute("data-mce-style")}))},_convertLists:function(b,a){var c=b.editor.dom,f,e,d=-1,g,h=[],m,i;k(c.select("p",a.node),function(a){var b,i="",l;for(b=a.firstChild;b&&
3==b.nodeType;b=b.nextSibling)i+=b.nodeValue;i=a.innerHTML.replace(/<\/?\w+[^>]*>/gi,"").replace(/&nbsp;/g,"\u00a0");/^(__MCE_ITEM__)+[\u2022\u00b7\u00a7\u00d8o\u25CF]\s*\u00a0*/.test(i)&&(l="ul");/^__MCE_ITEM__\s*\w+\.\s*\u00a0+/.test(i)&&(l="ol");l?(g=parseFloat(a.style.marginLeft||0),g>d&&h.push(g),!f||l!=m?(f=c.create(l),c.insertAfter(f,a)):g>d?f=e.appendChild(c.create(l)):g<d&&(b=tinymce.inArray(h,g),i=c.getParents(f.parentNode,l),f=i[i.length-1-b]||f),k(c.select("span",a),function(a){var b=
a.innerHTML.replace(/<\/?\w+[^>]*>/gi,"");l=="ul"&&/^__MCE_ITEM__[\u2022\u00b7\u00a7\u00d8o\u25CF]/.test(b)?c.remove(a):/^__MCE_ITEM__[\s\S]*\w+\.(&nbsp;|\u00a0)*\s*/.test(b)&&c.remove(a)}),b=a.innerHTML,b="ul"==l?a.innerHTML.replace(/__MCE_ITEM__/g,"").replace(/^[\u2022\u00b7\u00a7\u00d8o\u25CF]\s*(&nbsp;|\u00a0)+\s*/,""):a.innerHTML.replace(/__MCE_ITEM__/g,"").replace(/^\s*\w+\.(&nbsp;|\u00a0)+\s*/,""),e=f.appendChild(c.create("li",0,b)),c.remove(a),d=g,m=l):f=d=0});i=a.node.innerHTML;-1!=i.indexOf("__MCE_ITEM__")&&
(a.node.innerHTML=i.replace(/__MCE_ITEM__/g,""))},_insert:function(b,a){var c=this.editor,f=c.selection.getRng(!0),e,d,b=this._applyOnBeforeSetContentListeners(c,b);d=AJS.ClipboardHelper.parse(b,c.getDoc());(e=this._getClipboardInserter(c,f,d))?(e.insert(c,f,d),c.selection.onSetContent.dispatch(c.selection,{content:b,format:"html"}),c.addVisual()):(!c.selection.isCollapsed()&&f.startContainer!=f.endContainer&&c.execCommand("mceDelete",!1,null,{skip_undo:!0}),c.execCommand("mceInsertContent",!1,b,
{skip_undo:a}))},_getClipboardInserter:function(b,a,c){var f;g.each(this.clipboardInserters,function(e,d){if(d.shouldInsert(b,a,c))return f=d,!1});return f},clipboardInserters:[{shouldInsert:function(b,a,c){b=3==a.startContainer.nodeType?a.startContainer.parentNode:a.startContainer;return(tinymce.isIE?"LI"==b.nodeName&&0===b.childNodes.length:"LI"==b.nodeName&&1===b.childNodes.length&&"BR"==b.firstChild.nodeName)&&c.length===c.filter("ol,ul").length&&0<c.children("li").length},insert:function(b,a,
c){a=g(3==a.startContainer.nodeType?a.startContainer.parentNode:a.startContainer);c=c.children();b.undoManager.beforeChange();b.undoManager.add();p(a.parent(),c);a.replaceWith(c);b.selection.select(c.last()[0],!0);b.selection.collapse();b.undoManager.add()}},{shouldInsert:function(b,a,c){!a.collapsed||0!=a.startOffset?a=!1:(b=g(a.startContainer).closest("ol, ul",b.getBody()),0===b.length?a=!1:(a=(new tinymce.dom.TreeWalker(a.startContainer,b[0])).prev(!0),a=void 0===a||g(a).is("li")));return a&&c.length===
c.filter("ol,ul").length&&0<c.children("li").length},insert:function(b,a,c){a=g(a.startContainer).closest("li",b.getBody());c=c.children();b.undoManager.beforeChange();b.undoManager.add();p(a.parent(),c);a.before(c);b.selection.select(a[0],!0);b.selection.collapse(!0);b.undoManager.add()}},{shouldInsert:function(b,a,c){!a.collapsed||3==a.startContainer.nodeType&&a.startOffset!=a.startContainer.nodeValue.length||1===a.startContainer.nodeType&&a.startOffset!=a.startContainer.childNodes.length?a=!1:
(b=g(a.startContainer).closest("ol, ul",b.getBody()),0===b.length?a=!1:(a=(new tinymce.dom.TreeWalker(a.startContainer,b[0])).next(!0),a=void 0===a||g(a).is("li")));return a&&c.length===c.filter("ol,ul").length&&0<c.children("li").length},insert:function(b,a,c){a=g(a.startContainer).closest("li",b.getBody());c=c.children();b.undoManager.beforeChange();b.undoManager.add();p(a.parent(),c);a.after(c);b.selection.select(c.last()[0],!0);b.selection.collapse(!1);b.undoManager.add()}},{shouldInsert:function(b,
a,c){return a.collapsed||!g(a.commonAncestorContainer).is("table.confluenceTable > tbody, table.confluenceTable > tbody > tr")?!1:c.is("table:not(.wysiwyg-macro)")},insert:function(b,a,c){function f(a,b){for(var c=a.shift(),d=b.shift();c&&d;c=a.shift(),d=b.shift())g(d).html(g(c).html())}var e=0<c.children("tbody").length?c.children("tbody").children("tr"):c.children("tr"),d=e.children("td, th"),h=g(".mceSelected",b.getDoc()),c=h.parent();b.undoManager.beforeChange();b.undoManager.add();if(1===c.length)f(g.makeArray(d),
g.makeArray(h));else{e=g.makeArray(e);c=g.makeArray(c);d=e.shift();for(h=c.shift();d&&h;d=e.shift(),h=c.shift())f(g.makeArray(g(d).children()),g.makeArray(g(h).children()))}b.selection.setRng(a);b.undoManager.add()}},{shouldInsert:function(b,a,c){b=g(a.startContainer).closest("td.confluenceTd, th.confluenceTh",".mceContent");if(0===b.length)return!1;b=b.closest("table.confluenceTable",".mceContent");if(!(0===b.length||0===b.children("tbody").length)){if(!c.is("table:not(.wysiwyg-macro)"))return!1;
var f=!1;b.find("*[colspan], *[rowspan]").each(function(a,b){if(1<g(b).attr("rowspan")||1<g(b).attr("colspan"))return f=!0,!1});return!f}},insert:function(b,a,c){var a=g(a.startContainer).closest("td.confluenceTd, th.confluenceTh",".mceContent"),f=a.closest("table.confluenceTable",".mceContent"),c=0<c.children("tbody").length?c.children("tbody").children("tr"):c.children("tr"),e=f.children("tbody").children("tr"),d=c.length,h=c.first().children("td, th").length,k=e.length,m=e.first().children("td, th").length,
i=a.parent().index(),o=a.index();b.undoManager.beforeChange();b.undoManager.add();var n=o+h-m,d=i+d-k,n=0>n?0:n,d=0>d?0:d;e.each(function(a,b){for(var c=g(b),d=c.children().last(),e=0;e<n;e++)c.append(d.clone().html(tinymce.isIE?"":"<br/>"))});h=e.last();for(e=0;e<d;e++){h=g("<tr></tr>").insertAfter(h);for(k=0;k<m+n;k++)h.append('<td class="confluenceTd">'+(tinymce.isIE?"":"<br/>")+"</td>")}var j=[];f.children("tbody").children("tr").slice(i).each(function(a,b){j.push(g.makeArray(g(b).children("th, td").slice(o)))});
var l=[];c.each(function(a,b){l.push(g.makeArray(g(b).children("th, td")))});f=l.shift();for(c=j.shift();f&&c;f=l.shift(),c=j.shift()){m=f.shift();for(i=c.shift();m&&i;m=f.shift(),i=c.shift())g(i).html(g(m).html())}b.selection.select(a[0],1);b.selection.collapse(!0);b.undoManager.add()}}],_applyOnBeforeSetContentListeners:function(b,a){var c={content:a,format:"html"};b.selection.onBeforeSetContent.dispatch(b.selection,c);return c.content},_insertPlainText:function(b){function a(a){k(a,function(a){b=
a.constructor==RegExp?b.replace(a,""):b.replace(a[0],a[1])})}var c=this.editor,f=h(c,"paste_text_linebreaktype"),e=h(c,"paste_text_replacements"),d=tinymce.is;"string"===typeof b&&0<b.length&&(/<(?:p|br|h[1-6]|ul|ol|dl|table|t[rdh]|div|blockquote|fieldset|pre|address|center)[^>]*>/i.test(b)?a([/[\n\r]+/g]):a([/\r+/g]),a([[/<\/(?:p|h[1-6]|ul|ol|dl|table|div|blockquote|fieldset|pre|address|center)>/gi,"\n\n"],[/<br[^>]*>|<\/tr>/gi,"\n"],[/<\/t[dh]>\s*<t[dh][^>]*>/gi,"\t"],/<[a-z!\/?][^>]*>/gi,[/&nbsp;/gi,
" "],[/(?:(?!\n)\s)*(\n+)(?:(?!\n)\s)*/gi,"$1"],[/\n{3,}/g,"\n\n"]]),b=c.dom.decode(tinymce.html.Entities.encodeRaw(b)),d(e,"array")?a(e):d(e,"string")&&a(RegExp(e,"gi")),"none"==f?a([[/\n+/g," "]]):"br"==f?a([[/\n/g,"<br />"]]):"p"==f?a([[/\n+/g,"</p><p>"],[/^(.*<\/p>)(<p>)$/,"<p>$1"]]):a([[/\n\n/g,"</p><p>"],[/^(.*<\/p>)(<p>)$/,"<p>$1"],[/\n/g,"<br />"]]),c.execCommand("mceInsertContent",!1,b))},_legacySupport:function(){var b=this,a=b.editor;a.addCommand("mcePasteWord",function(){a.windowManager.open({file:b.url+
"/pasteword.htm",width:parseInt(h(a,"paste_dialog_width")),height:parseInt(h(a,"paste_dialog_height")),inline:1})});h(a,"paste_text_use_dialog")&&a.addCommand("mcePasteText",function(){a.windowManager.open({file:b.url+"/pastetext.htm",width:parseInt(h(a,"paste_dialog_width")),height:parseInt(h(a,"paste_dialog_height")),inline:1})});a.addButton("pasteword",{title:"paste.paste_word_desc",cmd:"mcePasteWord"})}});tinymce.PluginManager.add("confluencepaste",tinymce.plugins.ConfluencePastePlugin)})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-javascript-resources', location = 'tinymce3/plugins/confcharmap/editor_plugin_src.js' */
(function(){tinymce.create("tinymce.plugins.ConfCharmapPlugin",{init:function(a){a.addCommand("confCharmap",function(){a.windowManager.open({id:"insert-char-dialog",url:tinyMCE.settings.editor_plugin_action_base_path+"/charmap.action",width:600+parseInt(a.getLang("advanced.charmap_delta_width",0)),height:290+parseInt(a.getLang("advanced.charmap_delta_height",0)),inline:!0,name:"advanced.charmap_desc"})})},getInfo:function(){return{longname:"Confluence Charmap Plugin",author:"Atlassian",authorurl:"http://www.atlassian.com",
version:tinymce.majorVersion+"."+tinymce.minorVersion}}});tinymce.PluginManager.add("confcharmap",tinymce.plugins.ConfCharmapPlugin)})();
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-javascript-resources', location = 'tinymce3/plugins/confluencelist/editor_plugin_src.js' */
(function(b){tinymce.create("tinymce.plugins.ConfluenceListPlugin",{init:function(j){!tinymce.isIE8&&j.onKeyDown.add(function(d,i){if(8==i.keyCode){var c=d.selection.getRng(!0),e=b(c.startContainer).closest("li",d.getBody());if(0!==e.length&&AJS.EditorUtils.isCursorAtStartOf(e[0],c)){var c=e.prev("li"),f,g=e[0],a;if(0<c.length){f=c[0];a=b(g.firstChild);tinymce.isIE9&&0===a.length?a=b("<br/>").appendTo(e):a.is("p")&&(a=a.contents().first());var h=function(a){a&&a.lastChild&&!d.dom.isBlock(a.lastChild)&&
!b(a.lastChild).is("br")&&b(a).append("<br/>")};d.undoManager.beforeChange();d.undoManager.add();b(f.lastChild).is("p")&&!d.dom.isBlock(g.firstChild)?(h(f.lastChild),e.contents().each(function(a,c){if(d.dom.isBlock(c))return!1;b(f.lastChild).append(b(c).detach())})):b(g.firstChild).is("p")&&!d.dom.isBlock(f.lastChild)?(h(f),b.each(b.makeArray(c.contents()).reverse(),function(a,c){if(d.dom.isBlock(c))return!1;b(g.firstChild).prepend(b(c).detach())})):h(f);c.append(e.detach().contents());a[0]&&AJS.EditorUtils.setCursorAtStartOfContents(a[0]);
d.undoManager.add();return tinymce.dom.Event.cancel(i)}}}})},getInfo:function(){return{longname:"Confluence List Plugin",author:"Atlassian",authorurl:"http://www.atlassian.com",version:tinymce.majorVersion+"."+tinymce.minorVersion}}});tinymce.PluginManager.add("confluencelist",tinymce.plugins.ConfluenceListPlugin)})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-javascript-resources', location = 'tinymce3/plugins/atlassianemotions/editor_plugin_src.js' */
(function(d,f){d.create("tinymce.plugins.EmotionsPlugin",{init:function(a,g){a.addCommand("mceEmotion",function(){a.windowManager.open({file:tinyMCE.settings.editor_plugin_action_base_path+"/emotions.action",width:190+parseInt(a.getLang("emotions.delta_width",0)),height:125+parseInt(a.getLang("emotions.delta_height",0)),inline:1,id:"insert-emoticon-dialog",name:"emotions_dlg.title"},{plugin_url:g})});a.addButton("emotions",{title:"emotions.emotions_desc",cmd:"mceEmotion"});a.onClick.add(function(a,
e){var b=e.target,c;if("IMG"===b.nodeName&&(c=f(b),c.hasClass("emoticon")))return c=a.selection.getRng(!0),(e.offsetX||e.layerX-b.x)<b.width/2?(c.setStartBefore(b),c.setEndBefore(b)):(c.setStartAfter(b),c.setEndAfter(b)),a.selection.setRng(c),a.selection.collapse(),d.dom.Event.prevent(e)})},getInfo:function(){return{longname:"Emotions",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/emotions",version:d.majorVersion+
"."+d.minorVersion}}});d.PluginManager.add("emotions",d.plugins.EmotionsPlugin)})(tinymce,AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-javascript-resources', location = 'com/atlassian/confluence/tinymceplugin/tinymce-confluence.js' */
tinymce.confluence=tinymce.confluence||{};
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-javascript-resources', location = 'breadcrumbs/tinymce-breadcrumbs-oninit-rte.js' */
(function(a){AJS.bind("init.rte",function(){if("comment"!==AJS.Meta.get("content-type")){var b=a("#quickedit-breadcrumbs");0<b.length&&(a("#breadcrumbs").detach(),b.attr("id","breadcrumbs"),a("#breadcrumb-section").append(b));var d=a(".edited-page-title").parent().detach(),e=function(){var c=a("#breadcrumbs");c.detach();!c.find(".edited-page-title").length&&d.length&&c.append(d);a("#editor-precursor .cell").prepend(c)};e();a(document).bind("mode-changed",function(c,b){if(b==="preview"){var f=a("#breadcrumbs").detach();
d.detach();a("#breadcrumb-section").append(f)}else b==="richtext"&&e()})}})})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-javascript-resources', location = 'utils/tinymce-node-utils.js' */
(function(j){var l;tinymce.confluence.NodeUtils=l={updateNode:function(a,e){var c=j(a,tinymce.activeEditor.getDoc()),b=l.prepareNodeForUpdate(c);return l.replaceNode(c,e).fail(b).promise()},storeNodeState:function(a,e){for(var c={},b,d=0,g=e.length;d<g;d++)b=e[d],c[b]=a.attr(b);return function(){for(var b in c)a.attr(b,c[b])}},prepareNodeForUpdate:function(a){var e=null;a.is("img")&&(e=l.storeNodeState(a,["width","height","src","class"]),a.addClass("image-hotswap").attr({src:Confluence.getContextPath()+
"/images/border/spacer.gif",width:a.attr("width"),height:a.attr("height")}));return e},replaceNode:function(a,e){var c=l.getDoc(),b=j(e,c),d=j(a,c);return j.Deferred(function(){var a=this;b.is("img")?(b[0].onload=function(){AJS.debug("replaceNode: new node's src has been loaded by the browser.");this.onload=null;a.resolve(this)},j.browser.opera&&(b[0].src=b.attr("src")),c.createDocumentFragment().appendChild(b[0])):a.resolve(b[0])}).done(function(a){d.replaceWith(a)}).promise()},replaceSelection:function(a){var e=
tinymce.activeEditor,c=e.selection.getRng(!0),b;b=j.browser.msie&&9>~~j.browser.version?c:e.getDoc().createRange();a=j(a).clone(!0,!1)[0];c.deleteContents();3==c.startContainer.nodeType&&""===c.startContainer.nodeValue&&(c.startContainer.nodeValue=AJS.Rte.HIDDEN_CHAR);c.insertNode(a);j.browser.msie&&9>~~j.browser.version?c=a:(c=e.getDoc().createTextNode(AJS.Rte.HIDDEN_CHAR),e.dom.insertAfter(c,a));b.setStartBefore(c);b.setEndAfter(c);b.collapse(!1);e.selection.setRng(b);return a},normalize:function(a){var e,
c,b,d,g,f,l=tinymce.activeEditor;g=l.selection.getRng(!0);var h,m=[];if(a&&a.childNodes){if(tinymce.isWebKit)h=g;else if(tinymce.isGecko&&(h=g.cloneRange(),e=j.inArray(g.startContainer,a.childNodes),c=h.startOffset,b=j.inArray(g.endContainer,a.childNodes),d=h.endOffset,f=g=f=g=void 0,-1<e||-1<b)){var n=[],o=0;j.each(a.childNodes,function(a,b){var c={},e=n[a-1]||{};c.isTextNode=3==b.nodeType;c.textNodesBefore=(c.isTextNode&&e.isTextNode?1:0)+~~e.textNodesBefore;c.precedingTextLength=o;o=c.isTextNode?
o+b.nodeValue.length:0;n.push(c)});m=n}a.normalize();if(tinymce.isGecko){if(f=m[e])g=e-f.textNodesBefore,f=c+f.precedingTextLength,h.setStart(a.childNodes[g],f);if(f=m[b])g=b-f.textNodesBefore,f=d+f.precedingTextLength,h.setEnd(a.childNodes[g],f)}h&&l.selection.setRng(h)}},getDoc:function(){var a=tinymce.activeEditor;return j.browser.mozilla||j.browser.opera?document:a.getDoc()},isolateSelectedRange:function(){function a(a,b,d){var g;(g=e.dom.getParent(a,e.dom.isBlock))||(g=e.getBody());a:{var f,
i=null,k=null,h;h=(f=d?!0:!1)?"nextSibling":"previousSibling";i=0===b;!i&&f&&(i=3===a.nodeType?b===a.length:b===a.childNodes.length);if(i){i=a[h];for(k=a;null===i;){if(k===g){a=void 0;break a}else if(k.parentNode===g)break;k=k.parentNode;i=k[h]}}else 3===a.nodeType?(h=a.data,a.data=h.slice(b),i=c.createTextNode(h.slice(0,b)),k=a,j(i).insertBefore(k),f&&(h=k,k=i,i=h)):(k=a.childNodes[b-(f?1:0)],i=k[h]);a=[k,i]}if(a)if(a[1]){b=a[1];a=a[0];for(d=d?!0:!1;!(a===g||a.parentNode===g);){i=a.parentNode;f=
i.cloneNode(!1);if(d)for(j(f).insertAfter(i);b;)k=b.nextSibling,f.appendChild(b),b=k;else{j(f).insertBefore(i);for(b=i.firstChild;b!==a;)k=b.nextSibling,f.appendChild(b),b=k}b=f;a=i}d=a}else d=a[0];else d=void 0;return d}var e=tinymce.activeEditor,c=l.getDoc(),b=e.selection,d=b.getRng(!0),g=d.startContainer,f=d.startOffset,p=d.endContainer,h=d.endOffset,m;if(d.collapsed)return d;g===p&&(m=h-f);(f=a(g,f))&&d.setStartBefore(f);g!==d.startContainer&&(h=m||h);(g=a(p,h,!0))&&d.setEndAfter(g);b.setRng(d);
return d}}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-javascript-resources', location = 'autoformat/wiki-autoformat-oninit-rte.js' */
AJS.bind("init.rte",function(q,r){function k(a){return AJS.$("<div>").append(a.cloneNode(!0)).html()}function s(a,b,e){if(!b)throw Error("text node is null");3!=b.nodeType&&(b=b.childNodes[e-1],e=b.length);for(;b&&3==b.nodeType;b=b.previousSibling){-1==e&&(e=b.nodeValue.length);if(e>a)return{container:b,offset:e-a};if(e==a){e=0;for(a=b.parentNode;b=b.previousSibling;)e++;return{container:a,offset:e}}a-=e;e=-1}return null}function l(a){var b,e;if(!a||!a.collapsed)throw Error("range is null or not collapsed");
b=a.startContainer;e=a.startOffset;if(1==b.nodeType&&0<e)if(b=b.childNodes[a.startOffset-1],3==b.nodeType)e=b.nodeValue.length;else return"";else if(3!=b.nodeType)return"";a=b.nodeValue.substring(0,e);for(b=b.previousSibling;b&&3==b.nodeType;b=b.previousSibling)a=b.nodeValue+a;return a}function f(a,b,e,c){return{handles:function(b){var e=!1,b=b.selection.getRng(!0),e=b.commonAncestorContainer||{};return!b.collapsed||AJS.$(e).closest("pre,.text-placeholder").length||c&&AJS.$(e).closest(c).length?!1:
e=a.test(l(b))},execute:function(c,h,g){var f,d,j=1;f=AJS.$.browser.msie?h.keyCode:h.which;32==f?c.execCommand("mceInsertContent",!1,"&nbsp;"):c.execCommand("mceInsertContent",!1,String.fromCharCode(f));c.undoManager.beforeChange();c.undoManager.add();f=c.selection.getRng(!0);d=l(f);"|"==d[d.length-1]&&(d+=" ",j=0);d=a.exec(d.substring(0,d.length-1));j=s(d[1].length+j,f.commonAncestorContainer,f.startOffset);f.setStart(j.container,j.offset);j=AJS.$(f.commonAncestorContainer);c.selection.setRng(f);
j.closest(".wysiwyg-macro-body").length&&f.toString()==j.text()?(j[0].innerHTML="<br>",c.selection.select(j[0].childNodes[0]),c.selection.collapse(!0)):c.execCommand("delete",!1,{},{skip_undo:!0});b(d,c.selection.getRng(!0));m=c.selection.getRng(!0);if(e)return g.preventDefault(),g.stopPropagation(),tinymce.dom.Event.cancel(h),AJS.Rte.showElement(m.startContainer),!1}}}function n(){this.handlers={}}function g(a,b,e,d,g){var a=a.charCodeAt(0),i=AJS.Rte.getResourceUrlPrefix()+"/images/icons/emoticons/"+
g,b=f(b,function(){var a=c.dom.createHTML("img",{src:i,alt:c.getLang(d),title:c.getLang(d),border:0,"class":"emoticon emoticon-"+e,"data-emoticon-name":e});c.execCommand("mceInsertContent",!1,a,{skip_undo:!0})},!0);this.imagePath=i;h.registerHandler(a,b)}function o(a,b){var e=c.formatter.get(a)[0],e=c.dom.create(e.inline,{style:e.styles});e.appendChild(document.createTextNode(b+"{$caret}"));c.execCommand("mceInsertContent",!1,k(e),{skip_undo:!0});c.formatter.remove(a)}AJS.Rte.autoformat={_REGEXES:{WIKI_MACRO:/(?:\s|^)(\{[^{^}]+)$/,
WIKI_LINK:/(?:\s|^)(\[[^\[^\]]+)$/,WIKI_EMBED:/(?:\s|^)(![^!]{5,})$/},_REGEXES_EMOTICON:{SMILE:/\B(:-?)$/,SAD:/\B(:-?)$/,CHEEKY:/\B(:-?)$/,CHEEKY_2:/\B(:-?)$/,LAUGH:/\B(:-?)$/,WINK:/\B(;-?)$/,THUMBS_UP:/\B(\(y)$/,THUMBS_DOWN:/\B(\(n)$/,INFORMATION:/\B(\(i)$/,TICK:/\B(\(\/)$/,CROSS:/\B(\(x)$/,WARNING:/\B(\(!)$/,PLUS:/\B(\(\+)$/,MINUS:/\B(\(-)$/,QUESTION:/\B(\(\?)$/,LIGHT_ON:/\B(\(on)$/,LIGHT_OFF:/\B(\(off)$/,YELLOW_STAR:/\B(\(\*)$/,YELLOW_STAR_2:/\B(\(\*y)$/,RED_STAR:/\B(\(\*r)$/,GREEN_STAR:/\B(\(\*g)$/,
BLUE_STAR:/\B(\(\*b)$/,HEART:/\B(<)$/,BROKEN_HEAR:/\B(<\/)$/}};var m;if(!AJS.Meta.get("remote-user")||!AJS.Meta.get("confluence.prefs.editor.disable.autoformat")){n.prototype={registerHandler:function(a,b){this.handlers[a]||(this.handlers[a]=[]);this.handlers[a].push(b)},executeHandlers:function(a,b,e,c){var d=!0;AJS.$.each(this.handlers[a]||[],function(a,f){if(f.handles(b))return d=f.execute(b,e,c),!1});return d}};for(var c=r.editor,h=new n,d=[new g(")",AJS.Rte.autoformat._REGEXES_EMOTICON.SMILE,
"smile","emotions_dlg.smile","smile.png"),new g("(",AJS.Rte.autoformat._REGEXES_EMOTICON.SAD,"sad","emotions_dlg.sad","sad.png"),new g("P",AJS.Rte.autoformat._REGEXES_EMOTICON.CHEEKY,"cheeky","emotions_dlg.tongue","tongue.png"),new g("p",AJS.Rte.autoformat._REGEXES_EMOTICON.CHEEKY_2,"cheeky","emotions_dlg.tongue","tongue.png"),new g("D",AJS.Rte.autoformat._REGEXES_EMOTICON.LAUGH,"laugh","emotions_dlg.biggrin","biggrin.png"),new g(")",AJS.Rte.autoformat._REGEXES_EMOTICON.WINK,"wink","emotions_dlg.wink",
"wink.png"),new g(")",AJS.Rte.autoformat._REGEXES_EMOTICON.THUMBS_UP,"thumbs-up","emotions_dlg.thumbs_up","thumbs_up.png"),new g(")",AJS.Rte.autoformat._REGEXES_EMOTICON.THUMBS_DOWN,"thumbs-down","emotions_dlg.thumbs_down","thumbs_down.png"),new g(")",AJS.Rte.autoformat._REGEXES_EMOTICON.INFORMATION,"information","emotions_dlg.information","information.png"),new g(")",AJS.Rte.autoformat._REGEXES_EMOTICON.TICK,"tick","emotions_dlg.check","check.png"),new g(")",AJS.Rte.autoformat._REGEXES_EMOTICON.CROSS,
"cross","emotions_dlg.error","error.png"),new g(")",AJS.Rte.autoformat._REGEXES_EMOTICON.WARNING,"warning","emotions_dlg.warning","warning.png"),new g(")",AJS.Rte.autoformat._REGEXES_EMOTICON.PLUS,"plus","emotions_dlg.add","add.png"),new g(")",AJS.Rte.autoformat._REGEXES_EMOTICON.MINUS,"minus","emotions_dlg.forbidden","forbidden.png"),new g(")",AJS.Rte.autoformat._REGEXES_EMOTICON.QUESTION,"question","emotions_dlg.help_16","help_16.png"),new g(")",AJS.Rte.autoformat._REGEXES_EMOTICON.LIGHT_ON,"light-on",
"emotions_dlg.lightbulb_on","lightbulb_on.png"),new g(")",AJS.Rte.autoformat._REGEXES_EMOTICON.LIGHT_OFF,"light-off","emotions_dlg.lightbulb","lightbulb.png"),new g(")",AJS.Rte.autoformat._REGEXES_EMOTICON.YELLOW_STAR,"yellow-star","emotions_dlg.star_yellow","star_yellow.png"),new g(")",AJS.Rte.autoformat._REGEXES_EMOTICON.YELLOW_STAR_2,"yellow-star","emotions_dlg.star_yellow","star_yellow.png"),new g(")",AJS.Rte.autoformat._REGEXES_EMOTICON.RED_STAR,"red-star","emotions_dlg.star_red","star_red.png"),
new g(")",AJS.Rte.autoformat._REGEXES_EMOTICON.GREEN_STAR,"green-star","emotions_dlg.star_green","star_green.png"),new g(")",AJS.Rte.autoformat._REGEXES_EMOTICON.BLUE_STAR,"blue-star","emotions_dlg.star_blue","star_blue.png"),new g("3",AJS.Rte.autoformat._REGEXES_EMOTICON.HEART,"heart","emotions_dlg.heart","heart.png"),new g("3",AJS.Rte.autoformat._REGEXES_EMOTICON.BROKEN_HEAR,"broken-heart","emotions_dlg.broken_heart","broken_heart.png")],p=[],i=0;i<d.length;i++)p[i]=new Image,p[i].src=d[i].imagePath;
AJS.$.each({"*":"bold",_:"italic","~":"subscript","^":"superscript","+":"underline","-":"strikethrough"},function(a,b){var c=RegExp("(?:[\\s\\xA0\\u200b\\uFEFF]+|^)(\\"+a+"(?=[^\\s"+a+"])([^"+a+"]*?[^\\s]))$");h.registerHandler(a.charCodeAt(0),f(c,function(a){o(b,a[2])},!0))});c.formatter.register("code",{inline:"code"});h.registerHandler(125,f(/(?:[\s\xA0\u200b]+|^)({{(?=[^\s])([^}]*?[^\s])})$/,function(a){o("code",a[2])},!0));for(i=1;6>=i;i++)(function(a){h.registerHandler(32,f(RegExp("^\\u200b?(h"+
a+"\\.)$"),function(){c.execCommand("formatBlock",!1,"h"+a,{skip_undo:!0})},!0))})(i);h.registerHandler(32,f(/^\u200b?(bq\.)$/,function(){c.execCommand("formatBlock",!1,"blockquote",{skip_undo:!0})},!0));h.registerHandler(32,f(/^\u200b?(\*)$/,function(){c.plugins.lists.applyList("UL","OL")},!0));h.registerHandler(32,f(/^\u200b?(\#)$/,function(){c.plugins.lists.applyList("OL","UL")},!0));h.registerHandler(32,f(/^\u200b?(1\.)$/,function(){c.plugins.lists.applyList("OL","UL")},!0));h.registerHandler(32,
f(/^\u200b?(\-)$/,function(){var a=c.dom,b;c.plugins.lists.applyList("UL","OL");if(b=a.getParent(c.selection.getNode(),"OL,UL"))a.setStyles(b,{listStyleType:"square"}),b.removeAttribute("data-mce-style")},!0));AJS.trigger("confluence.editor.registerHandlers",{handlerManager:h,createHandler:f,ed:c});h.registerHandler(32,f(/[^-]*[\s](\-\-\-?)$/,function(a){c.execCommand("mceInsertContent",!1,2===a[1].length?"\u2013":"\u2014",{skip_undo:!0})},!1));d=f(/(([^\s-]+)(\-\-\-?)([^\s-]+))$/,function(a){c.execCommand("mceInsertContent",
!1,a[2]+(2===a[3].length?"\u2013":"\u2014")+a[4],{skip_undo:!0})},!1);h.registerHandler(32,d);h.registerHandler(13,d);d=f(/^\u200b?(\-\-\-\-)$/,function(){c.execCommand("mceInsertContent",!1,"<hr />",{skip_undo:!0})},!0);h.registerHandler(32,d);h.registerHandler(13,d);h.registerHandler(13,f(/(^\u200b?\|\|\s*(?:[^|]*\s?\|\|\s?)+$)/,function(a){var b="<table class='confluenceTable'><tr>",e="",d=!0,a=AJS.$(a[1].slice(2,-2).split("||")).map(function(a){a=AJS.$.trim(this);d=d&&""==a;return a});d&&(a[0]=
"first cell");for(var f=0,g=a.length;f<g;f++)b+="<th class='confluenceTh'>"+a[f]+"</th>",e+="<td class='confluenceTd'>"+AJS.Rte.ZERO_WIDTH_WHITESPACE+"</td>";c.execCommand("mceInsertContent",!1,b+("</tr><tr>"+e+"</tr></table>"),{skip_undo:!0});c.selection.select(AJS.$(c.selection.getRng(!0).commonAncestorContainer).parents("table").find(d?"th":"td")[0].childNodes[0]);AJS.$(c.selection.getRng().startContainer).parent().closest('[contenteditable="true"]').focus()},
!0));h.registerHandler(13,f(/(^\u200b?\|\s?(?:[^|]*\s?\|\s?)+$)/,function(a){var b="<table class='confluenceTable'><tr>",e=!0,a=AJS.$(a[1].slice(1,-1).split("|")).map(function(a){a=AJS.$.trim(this);e=e&&""==a;return a});e&&(a[0]="first cell");for(var d=0,f=a.length;d<f;d++)b+="<td class='confluenceTd'>"+a[d]+"</td>";c.execCommand("mceInsertContent",!1,b+"</tr></table>",{skip_undo:!0});e&&c.selection.select(AJS.$(c.selection.getRng(!0).commonAncestorContainer).parents("table").find("td")[0].childNodes[0]);
AJS.$(c.selection.getRng().startContainer).parent().closest('[contenteditable="true"]').focus()},!0));d=f(/\b(((https?|ftp):\/\/|(www\.))[\w\.\$\-_\+!\*'\(\),/\?:@=&%#~;\[\]]+)$/,function(a){var b=c.dom.create("a",{href:a[3]?a[1]:"http://"+a[1]});b.appendChild(document.createTextNode(a[1]));c.execCommand("mceInsertContent",!1,k(b),{skip_undo:!0});c.getDoc().execCommand("unlink",!1,{})},!1,"a");h.registerHandler(32,d);h.registerHandler(13,d);d=f(/\b((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)$/i,
function(a){var b=c.dom.create("a",{href:"mailto:"+a[1]});b.appendChild(document.createTextNode(a[1]));c.execCommand("mceInsertContent",!1,k(b),{skip_undo:!0});c.getDoc().execCommand("unlink",!1,{})},!1,"a");h.registerHandler(32,d);h.registerHandler(13,d);d=function(a,b){var e=f(a,function(){c.execCommand("mceInsertContent",!1,b,{skip_undo:!0})},!1);h.registerHandler(32,e);h.registerHandler(13,e)};d(/(?:\b|^)([Jj]ira)$/,"JIRA");d(/(?:\b|^)(bitbucket|[Bb]itBucket)$/,"Bitbucket");d(/(?:\b|^)(atlassian)$/,
"Atlassian");d(/(?:\b|^)([Hh]ipchat)$/,"HipChat");AJS.$.each({"]":AJS.Rte.autoformat._REGEXES.WIKI_LINK,"}":AJS.Rte.autoformat._REGEXES.WIKI_MACRO,"!":AJS.Rte.autoformat._REGEXES.WIKI_EMBED},function(a,b){h.registerHandler(a.charCodeAt(0),f(b,function(b){var d=b[1]+a,b={type:"POST",contentType:"application/json; charset=utf-8",url:AJS.Meta.get("context-path")+"/rest/tinymce/1/wikixhtmlconverter",data:AJS.$.toJSON({wiki:d,entityId:AJS.Meta.get("content-id"),spaceKey:AJS.Meta.get("space-key"),suppressFirstParagraph:!0}),
dataType:"text",timeout:5E3};"}"==a?tinymce.confluence.MacroUtils.insertMacro(b):"!"==a?AJS.$.ajax(b).done(function(a){!d===a?tinymce.confluence.ImageUtils.insertImagePlaceholder(a):c.execCommand("mceInsertContent",!1,a,{skip_undo:!0})}):AJS.$.ajax(b).done(function(a){c.execCommand("mceInsertContent",!1,a,{skip_undo:!0})})},!0))});c.onKeyPress.addToTop(function(a,b){return h.executeHandlers(AJS.$.browser.msie?b.keyCode:b.which,a,b,q)})}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-javascript-resources', location = 'tinymce3/plugins/confluencedrafts/editor_plugin_src.js' */
(function(){tinymce.create("tinymce.plugins.ConfluenceDrafts",{init:function(d){function e(c,a){a===Confluence.Editor.MODE_PREVIEW&&Confluence.Editor.Drafts.save()}var f;d.onInit.add(function(){AJS.bind("rte-changeMode",e)});d.onRemove.add(function(){AJS.unbind("rte-changeMode",e)});AJS.bind("rte-ready",function(){AJS.debug("confluence drafts plugin initialisation");$("#draft-status").show();$("#draft-messages").show();Confluence.Editor.Drafts.bindUnloadMessage();Confluence.Editor.UI.cancelButton.text("Close");
Confluence.Editor.UI.cancelButton.click(function(){Confluence.Editor.Drafts.save({skipErrorHandler:!0})});$("#draft-messages").is(":visible")&&AJS.Confluence.Analytics.publish("rte.notification.draft");$("#draft-messages").find("a.use-draft").click(function(a){a.stopPropagation();a.preventDefault();Confluence.Editor.Drafts.useDraft();AJS.Confluence.Analytics.publish("rte.notification.draft.resume")});$("#draft-messages").find("a.discard-draft").click(function(a){a.stopPropagation();a.preventDefault();
Confluence.Editor.Drafts.discardDraft(AJS.Meta.get("existing-draft-id"));AJS.Confluence.Analytics.publish("rte.notification.draft.discard")});if(AJS.Meta.getBoolean("shared-drafts")){var c=function(a,b){0!==a&&(window.history&&window.history.replaceState)&&window.history.replaceState(null,"",AJS.Meta.get("base-url")+"/pages/resumedraft.action?draftId="+a+"&draftShareId="+b)};c(AJS.Meta.getNumber("draft-id"),AJS.Meta.get("draft-share-id"));Confluence.Editor.UI.saveButton.text("Publish");
AJS.bind("rte-draft-saved",function(a,b){c(b.draftId,b.draftShareId)})}f=setInterval(Confluence.Editor.Drafts.save,+AJS.params.draftSaveInterval||3E4)});AJS.bind("rte-destroyed",function(){AJS.debug("confluence drafts plugin tear down");clearInterval(f)})},getInfo:function(){return{longname:"Confluence Drafts",author:"Atlassian",authorurl:"http://www.atlassian.com",version:tinymce.majorVersion+"."+tinymce.minorVersion}}});tinymce.PluginManager.add("confluencedrafts",tinymce.plugins.ConfluenceDrafts)})();
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-javascript-resources', location = 'tinymce3/plugins/referrer/editor_plugin_src.js' */
(function(){tinymce.create("tinymce.plugins.Referrer",{init:function(c){c.onInit.add(function(){var a=$("#createpageform"),b=a.find("#originalReferrer");a.length&&(!b.val()&&document.referrer)&&b.val(document.referrer)})},getInfo:function(){return{longname:"Confluence Cancel Return Url",author:"Atlassian",authorurl:"http://www.atlassian.com",version:tinymce.majorVersion+"."+tinymce.minorVersion}}});tinymce.PluginManager.add("referrer",tinymce.plugins.Referrer)})();
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-javascript-resources', location = 'tinymce3/plugins/watch/editor_plugin_src.js' */
(function(){tinymce.create("tinymce.plugins.ConfluenceWatch",{init:function(a){a.onInit.add(function(){if(AJS.Meta.get("use-watch")){var a={userWatchingOwnContent:AJS.Meta.get("user-watching-own-content")};$("#rte-savebar-tinymce-plugin-point").append(Confluence.Templates.Editor.SaveBar.Watch.render(a))}})},getInfo:function(){return{longname:"Confluence Watch",author:"Atlassian",authorurl:"http://www.atlassian.com",version:tinymce.majorVersion+"."+tinymce.minorVersion}}});tinymce.PluginManager.add("confluencewatch",
tinymce.plugins.ConfluenceWatch)})();
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-javascript-resources', location = 'tinymce3/plugins/watch/watch.soy' */
// This file was automatically generated from watch.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.Editor == 'undefined') { Confluence.Templates.Editor = {}; }
if (typeof Confluence.Templates.Editor.SaveBar == 'undefined') { Confluence.Templates.Editor.SaveBar = {}; }
if (typeof Confluence.Templates.Editor.SaveBar.Watch == 'undefined') { Confluence.Templates.Editor.SaveBar.Watch = {}; }


Confluence.Templates.Editor.SaveBar.Watch.render = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<ul class="toolbar-group toolbar-group-watch-page" id="toolbar-group-watch-page-after-comment"><li class="toolbar-item"><input id="watchPage" name="watchPageAfterComment" value="true" type="checkbox" ', (opt_data.userWatchingOwnContent) ? 'checked="checked"' : '', '/><label for="watchPage">', soy.$$escapeHtml("Watch this page"), '</label></li></ul>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-javascript-resources', location = 'tinymce3/plugins/notifywatchers/editor_plugin_src.js' */
(function(){tinymce.create("tinymce.plugins.ConfluenceNotifyWatchers",{init:function(a){a.onInit.add(function(){var a={defaultVersionComment:AJS.params.versionComment};$("#rte-savebar-tinymce-plugin-point").append(Confluence.Templates.Editor.SaveBar.NotifyWatchers.render(a))});require(["confluence/persistable"])},getInfo:function(){return{longname:"Confluence Notify Watchers",author:"Atlassian",authorurl:"http://www.atlassian.com",version:tinymce.majorVersion+"."+tinymce.minorVersion}}});tinymce.PluginManager.add("confluencenotifywatchers",
tinymce.plugins.ConfluenceNotifyWatchers)})();
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-javascript-resources', location = 'tinymce3/plugins/notifywatchers/notifywatchers.soy' */
// This file was automatically generated from notifywatchers.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.Editor == 'undefined') { Confluence.Templates.Editor = {}; }
if (typeof Confluence.Templates.Editor.SaveBar == 'undefined') { Confluence.Templates.Editor.SaveBar = {}; }
if (typeof Confluence.Templates.Editor.SaveBar.NotifyWatchers == 'undefined') { Confluence.Templates.Editor.SaveBar.NotifyWatchers = {}; }


Confluence.Templates.Editor.SaveBar.NotifyWatchers.render = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<span class="minor-edit toolbar-item"><input id="notifyWatchers" name="notifyWatchers" value="true" type="checkbox" data-persist="checked" data-default-value="true" checked><label for="notifyWatchers"><span>', soy.$$escapeHtml("Notify watchers"), '</span></label></span>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-javascript-resources', location = 'tinymce3/plugins/versioncomment/editor_plugin_src.js' */
(function(){tinymce.create("tinymce.plugins.ConfluenceVersionComment",{init:function(a){a.onInit.add(function(){var a={versionComment:AJS.params.versionComment};$("#rte-savebar-tinymce-plugin-point").append(Confluence.Templates.Editor.SaveBar.VersionComment.render(a))})},getInfo:function(){return{longname:"Confluence Version Comment",author:"Atlassian",authorurl:"http://www.atlassian.com",version:tinymce.majorVersion+"."+tinymce.minorVersion}}});tinymce.PluginManager.add("confluenceversioncomment",
tinymce.plugins.ConfluenceVersionComment)})();
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-javascript-resources', location = 'tinymce3/plugins/versioncomment/versioncomment.soy' */
// This file was automatically generated from versioncomment.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.Editor == 'undefined') { Confluence.Templates.Editor = {}; }
if (typeof Confluence.Templates.Editor.SaveBar == 'undefined') { Confluence.Templates.Editor.SaveBar = {}; }
if (typeof Confluence.Templates.Editor.SaveBar.VersionComment == 'undefined') { Confluence.Templates.Editor.SaveBar.VersionComment = {}; }


Confluence.Templates.Editor.SaveBar.VersionComment.render = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<span class="rte-toolbar-comment toolbar-item"><input id="versionComment" name="versionComment" ', (opt_data.versionComment) ? 'value="' + soy.$$escapeHtml(opt_data.versionComment) + '"' : '', 'placeholder="', soy.$$escapeHtml("What did you change?"), '" class="text" type="text" size="35"><label for="versionComment" class="assistive">', soy.$$escapeHtml("What did you change?"), '</label></span>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-javascript-resources', location = 'tinymce3/plugins/imagedialog/editor_plugin_src.js' */
(function(){tinymce.create("tinymce.plugins.ConfluenceImageDialog",{init:function(a){a.onInit.add(function(){a.addCommand("mceConfimage",Confluence.Editor.defaultInsertImageDialog)})},getInfo:function(){return{longname:"Confluence Image Dialog",author:"Atlassian",authorurl:"http://www.atlassian.com",version:tinymce.majorVersion+"."+tinymce.minorVersion}}});tinymce.PluginManager.add("confluenceimagedialog",tinymce.plugins.ConfluenceImageDialog)})();
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-javascript-resources', location = 'tinymce3/plugins/macrobrowser/editor_plugin_src.js' */
(function(){tinymce.create("tinymce.plugins.ConfluenceMacroBrowser",{init:function(a){a.onInit.add(function(){a.addCommand("mceConfMacroBrowser",tinymce.confluence.macrobrowser.macroBrowserToolbarButtonClicked)})},getInfo:function(){return{longname:"Confluence Macro Browser",author:"Atlassian",authorurl:"http://www.atlassian.com",version:tinymce.majorVersion+"."+tinymce.minorVersion}}});tinymce.PluginManager.add("confluencemacrobrowser",tinymce.plugins.ConfluenceMacroBrowser)})();
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-javascript-resources', location = 'tinymce3/plugins/leavecomment/editor_plugin_src.js' */
(function(b){tinymce.create("tinymce.plugins.ConfluenceLeaveComment",{init:function(a){function c(){if(Confluence.Editor.UI.isFormEnabled()&&a.isDirty()&&!Confluence.Editor.isEmpty())return "Your comment will be lost."}a.onInit.add(function(){b(window).bind("beforeunload",c)});a.onRemove.add(function(){b(window).unbind("beforeunload",c)})},getInfo:function(){return{longname:"Confluence Leave Comment",author:"Atlassian",authorurl:"http://www.atlassian.com",version:tinymce.majorVersion+
"."+tinymce.minorVersion}}});tinymce.PluginManager.add("confluenceleavecomment",tinymce.plugins.ConfluenceLeaveComment)})($);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-javascript-resources', location = 'tinymce3/plugins/leavetemplate/editor_plugin_src.js' */
(function(b){tinymce.create("tinymce.plugins.ConfluenceLeaveTemplate",{init:function(a){function c(){if(Confluence.Editor.UI.isFormEnabled()&&a.isDirty()&&!Confluence.Editor.isEmpty())return "Your unsaved template changes will be lost."}a.onInit.add(function(){b(window).bind("beforeunload",c)});a.onRemove.add(function(){b(window).unbind("beforeunload",c)})},getInfo:function(){return{longname:"Confluence Leave Template",author:"Atlassian",authorurl:"http://www.atlassian.com",version:tinymce.majorVersion+
"."+tinymce.minorVersion}}});tinymce.PluginManager.add("confluenceleavetemplate",tinymce.plugins.ConfluenceLeaveTemplate)})($);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-javascript-resources', location = 'tinymce3/plugins/template-editor/editor_plugin_src.js' */
(function(b){tinymce.create("tinymce.plugins.ConfluenceTemplateEditor",{init:function(a){a.onInit.add(function(){b(a.getBody()).addClass("template-editor")})},getInfo:function(){return{longname:"Confluence Template Editor",author:"Atlassian",authorurl:"http://www.atlassian.com",version:tinymce.majorVersion+"."+tinymce.minorVersion}}});tinymce.PluginManager.add("confluencetemplateeditor",tinymce.plugins.ConfluenceTemplateEditor)})($);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-javascript-resources', location = 'tinymce3/plugins/customtoolbar/tinyMce-table-toolbar.js' */
$(document).bind("initContextToolbars.Toolbar",function(u,c){function i(f){var a=$(this),b=$("#table-highlight-group"),d=b.attr("data-highlight-colour"),e=b.attr("data-remove-highlight");d&&(b.removeClass("highlight-"+d),b.removeAttr("data-highlight-colour"));b.removeClass("remove-highlight");e&&b.removeAttr("data-remove-highlight");if(d=a.attr("data-highlight-colour"))b.addClass("highlight-"+d),b.attr("data-highlight-colour",d);a.attr("data-remove-highlight")&&(b.addClass("remove-highlight"),b.attr("data-remove-highlight",
!0));c.focus();c.execCommand("confTableSelectionToggleHighlight",!1,{alwaysHighlight:!0});f.preventDefault()}var g,a=function(f){var a=c.getLang(f);(f=c.getLang(f+"_shortcut",""))&&(a+=" ("+f+")");return a},h=AJS.storageManager("atlassian.editor","tables"),e;require("aui/inline-dialog2");e=aui.buttons.button({id:"table-more-settings-trigger",text:"",iconType:"aui",iconClass:"aui-icon-small aui-iconfont-configure",iconText:a("table.table_more_heading"),extraAttributes:{type:"button","data-aui-trigger":"true",
"aria-controls":"table-more-settings","data-tooltip":a("table.table_more_heading")}});var k=aui.inlineDialog2.inlineDialog2({alignment:"bottom left",respondsTo:"toggle",id:"table-more-settings",content:"<h2>"+a("table.table_more_heading")+"</h2>"}),l=aui.buttons.buttons({content:e});e=function(a){this.render=function(){var c=$(l),b=$(k),d=b.find(".aui-inline-dialog-contents"),e=b[0],g=function(){e.hide&&e.hide()};a.forEach(function(a){var f=$(aui.form.field({type:"checkbox",id:a.id,labelContent:a.text,
isChecked:a.isChecked,isDisabled:a.isDisabled}));f.on("change",a.onChange);b.on("aui-layer-show",a.onMenuOpen);b.on("aui-layer-hide",a.onMenuClose);d.append(f)});c.append(b);$(window).on("resize",$.debounce(g,100));$(document).on("enableContextToolbarRow.Toolbar disableContextToolbarRow.Toolbar",g);return c}};c.onNodeChange.add(function(a,e,b){a=$("body");a=!a.hasClass("no-tools")||a.hasClass("no-tools-toolbars-visible");!g&&(null!=b.parentNode&&"BODY"!=b.nodeName)&&(g=!0,$(b).closest("table:not(.wysiwyg-macro)").length?
($(document).trigger("createContextToolbarRow.Toolbar",{buttons:Confluence.Editor.tableToolbar.Buttons,topToolbar:!0,animate:a}).trigger("enableContextToolbarRow.Toolbar"),b=$(b).closest("td,th"),a=$(".mceSelected",b.closest("table")),1<=b.add(a).filter(function(){var a=$(this);return 1<parseInt(a.attr("rowspan"),10)||1<parseInt(a.attr("colspan"),10)}).length?c.plugins.customtoolbar.enableToolbarButton("table-split-cells"):c.plugins.customtoolbar.disableToolbarButton("table-split-cells")):$(document).trigger("disableContextToolbarRow.Toolbar",
{animate:a}),g=!1)});c.onUndo.add(function(a){a.nodeChanged()});c.onInit.add(function(){$(document).delegate("#table-highlight-colour .aui-dropdown a","click",i)});c.onRemove.add(function(){$(document).undelegate("#table-highlight-colour .aui-dropdown a","click",i)});var m=Confluence.Editor,n=new Confluence.Editor.Toolbar.Components.Group([new Confluence.Editor.Toolbar.Components.Button({text:a("table.row_before_desc"),iconClass:"table-insert-row-before",click:function(){tinyMCE.execCommand("mceTableInsertRowBefore",
!1,"")}}),new Confluence.Editor.Toolbar.Components.Button({text:a("table.row_after_desc"),iconClass:"table-insert-row-after",click:function(){tinyMCE.execCommand("mceTableInsertRowAfter",!1,"")}}),new Confluence.Editor.Toolbar.Components.Button({text:a("table.delete_row_desc"),iconClass:"table-delete-row",click:function(){tinyMCE.execCommand("mceTableDeleteRow",!1,"")}})]),h=new Confluence.Editor.Toolbar.Components.Group([new Confluence.Editor.Toolbar.Components.Button({text:a("table.cut_row_desc"),
iconClass:"table-cut",click:function(){tinyMCE.execCommand("mceTableCutRow",!1,"");c.plugins.customtoolbar.enableToolbarButton("table-paste")}}),new Confluence.Editor.Toolbar.Components.Button({text:a("table.copy_row_desc"),iconClass:"table-copy",click:function(){tinyMCE.execCommand("mceTableCopyRow",!1,"");c.plugins.customtoolbar.enableToolbarButton("table-paste")}}),new Confluence.Editor.Toolbar.Components.Button({text:a("table.paste_row_before_desc"),iconClass:"table-paste",click:function(){tinyMCE.execCommand("mceTablePasteRowBefore",
!1,"")},disabled:!h.doesContain("copied")})]),o=new Confluence.Editor.Toolbar.Components.Group([new Confluence.Editor.Toolbar.Components.Button({text:a("table.col_before_desc"),iconClass:"table-insert-column-before",click:function(){tinyMCE.execCommand("mceTableInsertColBefore",!1,"")}}),new Confluence.Editor.Toolbar.Components.Button({text:a("table.col_after_desc"),iconClass:"table-insert-column-after",click:function(){tinyMCE.execCommand("mceTableInsertColAfter",!1,"")}}),new Confluence.Editor.Toolbar.Components.Button({text:a("table.delete_col_desc"),
iconClass:"table-delete-column",click:function(){tinyMCE.execCommand("mceTableDeleteCol",!1,"")}})]),p=new Confluence.Editor.Toolbar.Components.Group([new Confluence.Editor.Toolbar.Components.Button({text:a("table.merge_cells_desc"),iconClass:"table-merge-cells",click:function(){tinyMCE.execCommand("mceTableMergeCells",!1,"")}}),new Confluence.Editor.Toolbar.Components.Button({text:a("table.split_cells_desc"),iconClass:"table-split-cells",click:function(){tinyMCE.execCommand("mceTableSplitCells",
!1,"")}})]),q=new Confluence.Editor.Toolbar.Components.Group([new Confluence.Editor.Toolbar.Components.Button({text:a("table.row_highlight"),iconClass:"table-heading-row",click:function(){tinyMCE.execCommand("confTableRowToggleHeading",!1);tinyMCE.execCommand("mceTableUpdateNumberingCol",!1)}}),new Confluence.Editor.Toolbar.Components.Button({text:a("table.col_highlight"),iconClass:"table-heading-column",click:function(){tinyMCE.execCommand("confTableColumnToggleHeading",!1)}})]),r=Confluence.Editor.Toolbar.Components.SplitGroup,
s=[new Confluence.Editor.Toolbar.Components.Button({text:a("table.selection_highlight"),iconClass:"table-highlight-selection",click:function(){tinyMCE.execCommand("confTableSelectionToggleHighlight",!1)}})],j=$("<ul/>").addClass("table-highlight-picker"),t=[!1,!1,!1,!1,!1,!0];$.each("grey red green blue yellow ".split(" "),function(a,c){var b=$("<li/>"),d=$("<a href='#'></a>");t[a]?d.addClass("remove-highlight").attr("data-remove-highlight",true):d.addClass("highlight-"+c).attr("data-highlight-colour",
c);b.append(d);j.append(b)});m.tableToolbar={Buttons:[n,h,o,p,q,new r(s,{id:"table-highlight-group",dropDownOptions:{id:"table-highlight-colour",dropDownContent:j,alignment:"right"},postProcess:function(a){a.attr("data-highlight-colour","grey");a.addClass("highlight-grey");var c=$("<span>&nbsp;</span>");c.addClass("highlight-indicator");a.find(".icon.table-highlight-selection").after(c)}}),new Confluence.Editor.Toolbar.Components.Group([new Confluence.Editor.Toolbar.Components.Button({text:a("table.del"),
iconClass:"table-delete-table",click:function(){tinyMCE.execCommand("mceTableDelete",!1,"")}})])],Events:[]};AJS.DarkFeatures.isEnabled("confluence-table-enhancements.copy-cut-paste-cols.disabled")||Confluence.Editor.tableToolbar.Buttons.splice(3,0,new Confluence.Editor.Toolbar.Components.Group([new Confluence.Editor.Toolbar.Components.Button({text:a("table.col_cut_desc"),iconClass:"table-cut-col",click:function(){tinyMCE.execCommand("mceTableCutCol",!1,"")}}),new Confluence.Editor.Toolbar.Components.Button({text:a("table.col_copy_desc"),
iconClass:"table-copy-col",click:function(){tinyMCE.execCommand("mceTableCopyCol",!1,"")}}),new Confluence.Editor.Toolbar.Components.Button({text:a("table.col_paste_desc"),iconClass:"table-paste-col",click:function(){tinyMCE.execCommand("mceTablePasteColBefore",!1,"")}})]));AJS.DarkFeatures.isEnabled("confluence-table-enhancements.auto-row.disabled")||Confluence.Editor.tableToolbar.Buttons.push(new e([{text:a("table.numbering_column_desc"),id:"insert-numbering-column",onChange:function(){tinyMCE.execCommand("mceTableInsertNumberingCol",
!1,"")},onMenuOpen:function(){var a=0<$(c.selection.getNode()).closest("table").find(".numberingColumn").length;$("#insert-numbering-column").prop("checked",a)}}]))});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-javascript-resources', location = 'tinymce3/plugins/customtoolbar/editor_plugin_src.js' */
(function(b){function q(a){var c=function(){a&&a.hide()};b(document).bind("showLayer",function(b,d,f){"dropdown"==d&&f==a&&(b=AJS.Rte.getEditor(),b.onClick.add(c),b.onKeyUp.add(c))}).bind("hideLayer",function(b,d,f){"dropdown"==d&&f==a&&(b=AJS.Rte.getEditor(),b.onClick.remove(c),b.onKeyUp.remove(c))})}function r(b){b.addCallback("show",function(){b.$.parents(".disabled").length&&b.hide()})}function s(a,c){var e=j(c);b("#"+e).removeClass("disabled")}function t(a,c){var e=j(c);b("#"+e).addClass("disabled")}
function k(b,c){c?b.closest(".aui-button").prop("disabled",!0).attr("aria-disabled","true").toggleClass("disabled",c):b.closest(".aui-button").prop("disabled",!1).removeAttr("aria-disabled").toggleClass("disabled",c)}function n(a,c,e,d){var f=b("#toolbar"),h=f.find(".toolbar-item"),o=b("#insert-menu, #more-menu"),g=b("#insert-menu, #color-picker-control"),i=b("#format-dropdown"),d=d||function(){return!0};h.toggleClass("disabled",a);o.toggleClass("disabled",a);g.toggleClass("disabled",a);i.toggleClass("disabled",
!!c);AJS.Rte.TablePicker[a?"disable":"enable"]();"undefined"!==typeof e&&f.find("button, input").filter(d).toggleClass("disabled",e).prop("disabled",e)}function j(b){var c="default";b&&b.id&&(c=b.id);return"rte-toolbar-row-"+c}function u(a,c){var e=c.animate;void 0==e&&(e=!0);var d=function(){b(this).remove();b(document).trigger("resize.resizeplugin");if(c.onHide)c.onHide()};clearTimeout(l);l=setTimeout(function(){var a=j(c),a=b("#"+a);e?a.slideUp(400,d):(a.hide(),d.call(a))},100)}function v(a,c){var e=
j(c),d=c.animate;void 0==d&&(d=!0);if(0<b("#"+e).length)b("#"+e+":hidden").slideDown(400,function(){AJS.debug("Prevented toolbar deferred display race condition")});else{var f=b("<div></div>").addClass("toolbar-split toolbar-split-row toolbar-contextual");f.attr("id",e);c.editorAdjacent&&f.addClass("editor-adjacent");for(var e=!c.topToolbar?b("#savebar-container .aui-toolbar"):b("#rte-toolbar.aui-toolbar"),h=0,o=c.buttons.length;h<o;h++)f.append(c.buttons[h].render());f.css({display:"none"});c.editorAdjacent?
e.append(f):(h=b(".editor-adjacent",e).filter(":first"),h.length?h.before(f):e.append(f));f.find(".toolbar-dropdown").each(function(){i(this)});var g=function(){b(document).trigger("resize.resizeplugin").trigger("shown.contextToolbar");if(c.onVisible)c.onVisible()};clearTimeout(l);l=setTimeout(function(){if(d)f.slideDown(400,g);else{f.show();g()}},100)}}function i(a){var a=b(a),c=a.dropDown("Standard",{alignment:a.data("dropdown-alignment")||"left"})[0];a.find(".dropdown-item").click(function(a){var d=
b(this),f=d.attr("data-macro-name"),h=d.attr("data-command"),i=d.attr("data-format"),d=d.attr("data-control-id"),g=AJS.Rte.getEditor();f&&tinymce.confluence.macrobrowser.macroBrowserToolbarButtonClicked({presetMacroName:f});h&&g.execCommand(h,!1);i&&g.theme.controlHandlers.formatselect.click.dispatch(i);d&&g.theme.controlHandlers.buttons.click.dispatch(d);c.hide();a.preventDefault()});r(c);q(c)}var l;tinymce.create("tinymce.plugins.customtoolbar",{init:function(a){i("#format-dropdown");i("#more-menu .aui-dd-parent");
i("#insert-menu .aui-dd-parent");b("#pagelayout-menu").length&&i("#pagelayout-menu .aui-dd-parent");b("#template-menu").length&&i("#template-menu .aui-dd-parent");var c=b("#color-picker-control");if(c.length){var e=c.find(".aui-dd-parent"),d=b("#rte-button-color"),f=d.find(".selected-color"),e=e.dropDown("Standard",{alignment:"left"})[0],h=d.attr("data-color");f.css("background-color","#"+h);c.delegate("a[data-color]","click",function(a){var c=b(this),e=c.attr("data-color");a.preventDefault();c.closest(".disabled").length||
(tinyMCE.execCommand("ForeColor",!1,"#"+e),d.attr("data-color",e),f.css("background-color","#"+e))});r(e);q(e)}AJS.Rte.TablePicker.bindToControl(AJS.Rte.getEditor(),b("#insert-table-dropdown"));var j=b("#rte-button-source-mode");j.click(function(){j.hasClass("active")?Confluence.Editor.changeMode(Confluence.Editor.MODE_RICHTEXT):Confluence.Editor.changeMode(Confluence.Editor.MODE_SOURCE)});var c=[],g;for(g in TinyMCELang.hints)c.push("hints."+g);var l=Confluence.hintManager(c),k=function(){b("#rte-savebar .hints-text").html(AJS.Rte.getEditor().getLang(l.getNextHint()))};
k();b("#rte-savebar a.hints-close").click(function(a){b(this).closest(".toolbar-split").addClass("hidden");a.preventDefault()});b("#rte-savebar a.hints-next").click(function(b){k();b.preventDefault()});g=AJS.Rte.EventDelegator(a);b(document).trigger("initContextToolbars.Toolbar",a);b(document).bind("createContextToolbarRow.Toolbar",v).bind("removeContextToolbarRow.Toolbar",u).bind("enableContextToolbarRow.Toolbar",s).bind("disableContextToolbarRow.Toolbar",t);g.addEventsForComponent("TableToolbar",
Confluence.Editor.tableToolbar.Events);var m=b("#format-dropdown"),p=m.find("span.dropdown-text");a.onBeforeExecCommand.add(function(a,c,e,d,f){b.each(["pre","blockquote"],function(){"FormatBlock"==c&&d==this&&(a.formatter.remove("alignleft"),a.formatter.remove("aligncenter"),a.formatter.remove("alignright"))});if(b(a.selection.getNode()).closest("pre,.text-placeholder").length)for(var e="Bold Italic Underline Strikethrough InsertUnorderedList InsertOrderedList InsertInlineTaskList InsertInlineTaskListNoToggle superscript subscript mceConfMacroBrowser mceConfimage mceConfAttachments mceEmotion InsertWikiMarkup mceConflink mceInsertTable mceConfAutocompleteLink".split(" "),
h=e.length,g=0;g<h;g++)c==e[g]&&(f.terminate=!0);"FormatBlock"==c&&"pre"==d&&(a.undoManager.add(),a.execCommand("removeFormat"));"FormatBlock"==c&&"p"==d?(e=m.find(".dropdown-item[data-format='blockquote']").text(),p.text()==e&&(f.terminate=!0,a.execCommand("FormatBlock",!1,"blockquote"))):"FormatBlock"==c&&("removeformat"==d&&a.selection.isCollapsed())&&(f.terminate=!0,AJS.debug("Not removing format for no selected text"))});a.onExecCommand.add(function(b,a,c,e){"FormatBlock"==a&&(b=m.find(".dropdown-item[data-format='"+
e+"']"),b.length||(b=m.find(".dropdown-item[data-format='p']")),p.text(b.text()))});a.onNodeChange.add(function(a,c,e){var d,f=e,f=b(f).closest("PRE,BLOCKQUOTE,.text-placeholder");d=function(b){return f.is(b)};var a=d("BLOCKQUOTE"),g=d("PRE");d=d(".text-placeholder");g?(c=b(e).parents("table").is("[data-macro-body-type='PLAIN_TEXT']"),n(!0,c)):d?n(!0):a?(c.setDisabled("justifyleft",a),c.setDisabled("justifycenter",a),c.setDisabled("justifyright",a)):n(!1)});a.onInit.add(function(a){AJS.debug("customtoolbar: ed.onInit function");
var c={};b(".aui-toolbar").find("[data-control-id]").each(function(e,d){var f,d=b(d);d.closest(".toolbar-item");f=d.attr("data-control-id");"formatselect"==f?(f=a.theme.controlHandlers[f],f.state.add(function(a){var c=AJS.Rte.getEditor();"p"==a&&(c=c.selection.getNode(),b(c).closest("p").parent().is("blockquote")&&(a="blockquote"));(a=m.find(".dropdown-item[data-format='"+a+"']").text())&&p.text(a)})):c[f]=d});control=a.theme.controlHandlers.buttons;control.state.add(function(a,b,d){if(a=c[a]){var e=
a.find(".icon-check");toolbarItem=a.closest(".toolbar-item");e.length?e.toggleClass("hidden",!d):toolbarItem.toggleClass(b,d)}});b(".aui-toolbar").delegate(".toolbar-item","click",function(a){var c=b(this);if(c.hasClass("disabled"))a.preventDefault();else if(c=c.children(".toolbar-trigger[data-control-id]").attr("data-control-id"))control.click.dispatch(c),a.preventDefault()});AJS.$.support.shrinkWrapBlocks=!1;AJS.debug("customtoolbar: finished ed.onInit function")})},toggleToolbarButton:k,disableToolbarButton:function(a){k(b("."+
a.replace(".","")),!0)},enableToolbarButton:function(a){k(b("."+a.replace(".","")),!1)},focusToolbarButton:function(a){b("."+a.replace(".","")).closest(".aui-button").focus()},isToolbarRowEnabled:function(a){a=j({id:a});return 0<b("#"+a).length&&!b("#"+a).hasClass("disabled")},getToolbarRow:function(a){a=j({id:a});a=b("#"+a);return a.length?a[0]:null},isToolbarButtonEnabled:function(a){return!b("."+a.replace(".","")).closest(".aui-button").prop("disabled")},bindDropdownMenu:i,toggleToolbarButtons:n,
getInfo:function(){return{longname:"customtoolbar",author:"Atlassian",authorurl:"http://www.atlassian.com",infourl:"http://www.atlassian.com/",version:"1.0"}}});tinymce.PluginManager.add("customtoolbar",tinymce.plugins.customtoolbar)})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-javascript-resources', location = 'tinymce3/plugins/customtoolbar/custom-toolbar-components.js' */
Confluence.Editor.Toolbar={Components:{}};
Confluence.Editor.Toolbar.Components.Button=function(a){var b=a.text,e=a.tooltip,c=a.triggerText,h=a.iconClass,f=a.click,i=!!a.disabled,g=a.id;this.render=function(){var a=AJS.$('<button type="button"></button>').addClass("aui-button").attr("data-tooltip",e||b);g&&a.attr("id",g);i&&a.prop("disabled",!0).attr("aria-disabled","true");a.click(function(){a.prop("disabled")||f()});if(h){var d=AJS.$("<span />");d.addClass("icon "+h);d.text(b);a.append(d)}c&&(d=AJS.$("<span />"),d.addClass("trigger-text"),
d.text(c),a.append(d));return a[0]}};
Confluence.Editor.Toolbar.Components.DropDownButton=function(a){var b=a.id,e=a.text,c=a.iconClass,h=!!a.disabled,f=a.dropDownContent,i;this.render=function(){var a=AJS.$("<div></div>").addClass("toolbar-item").addClass("toolbar-dropdown").attr("data-tooltip",e);a.attr("id",b);var j=AJS.$("<div/>").addClass("aui-dd-parent"),d=AJS.$("<a href='#'></a>");d.addClass("toolbar-trigger").addClass("aui-dd-trigger");h&&(a.addClass("disabled"),d.addClass("disabled"));if(c){var k=AJS.$("<span />");k.addClass("icon "+
c);k.text(e);d.append(k)}k=AJS.$("<span/>");k.addClass("icon").addClass("icon-dropdown");d.append(k);i=AJS.$("<div/>").addClass("hidden").addClass("aui-dropdown").addClass("aui-dropdown-right");f&&i.append(f);j.append(d);j.append(i);a.append(j);return a[0]}};
Confluence.Editor.Toolbar.Components.TextButton=function(a){var b=a.text,e=a.textClass,c=a.click,h=!!a.disabled,f=a.tooltip;this.render=function(){var a=AJS.$('<button type="button"></button>').addClass("aui-button").addClass(e).text(b);f&&a.attr("data-tooltip",f);h&&a.prop("disabled",!0).attr("aria-disabled","true");a.click(function(){a.prop("disabled")||c()});return a[0]}};
Confluence.Editor.Toolbar.Components.TextBox=function(a){var b=a.id,e=a.text,c=a.name,h=a.keydown,f=a.cssClass;this.render=function(){var a=AJS.$("<div></div>").addClass("toolbar-item");a.append(AJS.$("<label for='"+b+"'>"+e+"</label>"));var g=AJS.$("<input id='"+b+"' type='text' name='"+c+"' class='"+f+" text' autocomplete='off'>");g.keydown(function(a){h(a)});a.append(g);return a[0]}};
Confluence.Editor.Toolbar.Components.Group=function(a,b){this.render=function(){var e=AJS.$("<div></div>");e.addClass("aui-buttons");b&&(b.id&&e.attr("id",b.id),b.groupClass&&e.addClass(b.groupClass));for(var c=0,h=a.length;c<h;c++)e.append(a[c].render());return e[0]}};
Confluence.Editor.Toolbar.Components.SplitGroup=function(a,b){function e(){var a=c.id,b=c.disabled,e=c.dropDownContent,g=c.title,j=c.alignment,d=AJS.$("<div></div>").addClass("toolbar-item").addClass("toolbar-dropdown").addClass("toolbar-splitbutton");a&&d.attr("id",a);g&&d.attr({"data-tooltip":g});j&&d.data("dropdown-alignment",j);a=AJS.$("<div/>").addClass("aui-dd-parent");g=AJS.$("<a href='#'></a>");g.addClass("toolbar-trigger aui-dd-trigger");b&&(d.addClass("disabled"),g.addClass("disabled"));
b=AJS.$("<span/>");b.addClass("icon").addClass("icon-dropdown");g.append(b);b=AJS.$("<div/>").addClass("hidden").addClass("aui-dropdown");e&&b.append(e);a.append(g);a.append(b);d.append(a);return d[0]}var c=b&&b.dropDownOptions||{};this.render=function(){var c=AJS.$("<div></div>");c.addClass("aui-buttons");b&&(b.id&&c.attr("id",b.id),b.groupClass&&c.addClass(b.groupClass));for(var f=0,i=a.length;f<i;f++)c.append(a[f].render());c.append(e(b));b&&b.postProcess&&b.postProcess(c);return c[0]}};
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-javascript-resources', location = 'tinymce3/plugins/customtoolbar/thirdpartycode/tipsy.js' */
(function(a){a.fn.tipsy.autoBounds2=function(f,b){return function(){var d,c,g=a(document).scrollTop()+f,h=a(document).scrollLeft()+f,e=a(this);1<b.length?(d=b[0],c=b[1]):"e"==b[0]||"w"==b[0]?c=b[0]:d=b[0];e.offset().top<g&&(d="n");e.offset().left<h&&(c="w");a(window).width()+a(document).scrollLeft()-(e.offset().left+e.width())<f&&(c="e");a(window).height()+a(document).scrollTop()-(e.offset().top+e.height())<f&&(d="s");return d?d+(c?c:""):c}}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-javascript-resources', location = 'tinymce3/plugins/customtoolbar/chunky-tips.js' */
(function(a){AJS.bind("init.rte",function(){function h(d,c,b){if("dropdown"===c&&(a(".tipsy").remove(),b&&(b.trigger&&b.trigger.jquery)&&(d=b.trigger.data("tipsy"))))d.hoverState="out"}function i(){a(".tipsy").remove()}AJS.debug("Enabling Chunky Tooltip for the editor");var e={live:!0,gravity:"n",title:function(){return a(this).attr("data-tooltip")||""},delayIn:250,delayOut:0},f=a.fn.tipsy.autoBounds2(50,"n"),g=a.fn.tipsy.autoBounds2(50,"s"),j=a.fn.tipsy.autoBounds2(50,"w"),f=a.extend({},e,{gravity:f}),
g=a.extend({},e,{gravity:g}),e=a.extend({},e,{gravity:j});a("#rte-toolbar [data-tooltip]:not(.dropdown-item)").tooltip(f);a("#rte-toolbar .dropdown-item[data-tooltip]").tooltip(e);a("#rte-savebar [data-tooltip]").tooltip(g);a("#editor-precursor [data-tooltip]").tooltip(f);a("#property-panel [data-tooltip]").tooltip(f);AJS.$(document).bind("showLayer",h);AJS.$(document).bind("hideLayer",h);AJS.bind("created.property-panel",i);AJS.bind("destroyed.property-panel",i);var k=/\+/g;AJS.bind("register-contexts.keyboardshortcuts",
function(){setTimeout(function(){AJS.$("#rte-savebar .aui-button[title]").each(function(){var d=a(this),c=d.attr("title");d.removeAttr("title");if(tinymce.isMac){var b=c.indexOf("(");0<=b&&(c=c.substr(0,b)+c.substr(b).replace(k,""))}d.attr("data-tooltip",c)})},0)})})})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-javascript-resources', location = 'tinymce3/plugins/confluencepaste/linkify.js' */
linkify={RE_EMAIL_PATTERN:"(?:\\s|\\A|^)[\\w.-]+\\+*[\\w.-]+@(?:(?:[\\w-]+\\.)+[A-Za-z]{2,6}|(?:\\d{1,3}\\.){3}\\d{1,3})",RE_URL_SCHEME:"(?:[\\w-]{2,}):/{1,3}",RE_TLD:"(?:aero|arpa|biz|com|coop|edu|gov|info|int|mil|museum|name|net|org|travel|ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cu|cv|cx|cy|cz|de|dj|dk|dm|do|dz|ec|ee|eg|eh|er|es|et|fi|fj|fk|fm|fo|fr|ga|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|qa|re|ro|ru|rw|sa|sb|sc|sd|se|sg|si|sj|sk|sl|sm|sn|so|sr|st|sv|sy|sz|tc|td|tf|tg|th|tj|tk|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|um|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|yu|za|zm|zw)",
RE_URL_MIDCHAR:"(?:[^\\s()]+|\\((\\S+)\\))",RE_URL_ENDCHAR:"(?:\\((\\S+)\\)|[^\\s`!()\\[\\]{};:'\".,<>?\u00ab\u00bb\u201c\u201d\u2018\u2019])",init:function(){this.RE_URL_ENDING||(this.RE_URL_ENDING="(?:"+this.RE_URL_MIDCHAR+"*"+this.RE_URL_ENDCHAR+")?",this.RE_FULL_URL=this.RE_URL_SCHEME+"\\w+(?:.\\w+)"+this.RE_URL_ENDING,this.RE_OTHER_URL="\\w[\\w_-]*(?:\\.\\w[\\w_-]*)*\\."+this.RE_TLD+"(?:[\\/\\?#]"+this.RE_URL_ENDING+"|\\b)")},linkify:function(f,b,i){this.init();f=this.match_and_replace(this.RE_EMAIL_PATTERN,
f,!0,!1,b,i);f=this.match_and_replace(this.RE_FULL_URL,f,!1,!1,b,i);return f=this.match_and_replace(this.RE_OTHER_URL,f,!1,!0,b,i)},match_and_replace:function(f,b,i,o,k,h){for(var c=0,a=0,d=0,c=0,l=/<\/[aA]>/,f=RegExp(f,"g"),p=h.hasOwnProperty("add_wbrs")?h.add_wbrs:null,j=h.hasOwnProperty("truncate_length")?h.truncate_length:100,m=h.hasOwnProperty("link_target")?h.link_target:"_blank",h=h.hasOwnProperty("link_titles")?h.link_titles:null,d={},n=0;d=f.exec(b);){n++;if(20<n)break;c=d.index;d=d[0].length;
if(0<=b.substring(a,c).search(/<[aA]/)){l.lastIndex=a;c=b.substring(a,b.length).search(l);if(0>c)break;c+=a;f.lastIndex=c+4;a=c+4}else{var a=b.substr(c,d),g=a.search(/&(amp|gt|lt)$/);if(0<g&&b.length>c+d&&";"==b[c+d]){d-=a.length-g;for(a=b.substr(c,d);!a.match(this.RE_URL_ENDCHAR+"$")&&0<d;)d--,a=b.substr(c,d)}g=a;o&&(g="http://"+g);var e="<a";m&&(e+=' target="'+m+'"');e+=' href="';i&&(e+="mailto:");g=g.replace(/"/g,"%22");e+=g+'"';h&&(e+=' title="'+(i?"Email "+g:g)+'"');j&&a.length>j&&(a=a.substr(0,
j)+"...");p&&(a=a.replace(RegExp("([/=])","g"),"<wbr>$1"));e+=">"+a+"</a>";k&&k.push(g);b=b.slice(0,c)+e+b.slice(c+d,b.length);f.lastIndex=c+e.length;a=c+e.length}}return b}};
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-javascript-resources', location = 'tinymce3/plugins/confluencepaste/post-paste-node-filter.js' */
(function(d,h){function r(a,b){for(var e=d(a).find("["+b+"]"),c="",g="",f="",i=0,v=e.length;i<v;i++)g=(c=d(e[i]))&&["/",c.attr(b)].join(""),f=c&&["/",c.attr("data-mce-"+b)].join(""),h.getContextPath()&&0===g.indexOf(h.getContextPath())&&(e[i]=c.attr(b,g)),h.getContextPath()&&0===f.indexOf(h.getContextPath())&&(e[i]=c.attr("data-mce-"+b,f));return e}function j(a,b,e){var a=d(a).find("["+b+"]"),c="",g,f;if(a)for(var i=0,h=a.length;i<h;i++){g=d(a[i]);f=e.standard;for(var j in e)e.hasOwnProperty(j)&&
g.is(j)&&(f=e[j]);if(-1<b.indexOf("style")){var c=g,l=f;f=[];for(var n="",n=void 0,o=c.attr("style"),m=c.attr("data-mce-style"),k=0,p=l.length;k<p;k++)o&&-1<o.toLowerCase().indexOf(l[k])?f.push(l[k]+": "+c.css(l[k])+";"):m&&-1<m.toLowerCase().indexOf(l[k])&&(n=RegExp(l[k]+":.+?(?:;|$)"),n=m.match(n),f.push(-1<n[0].indexOf(";")?n:n+";"));c=f.join(" ")}else{c=g;l=b;o=[];if(f){m=0;for(k=f.length;m<k;m++)c.is("["+l+"~="+f[m]+"]")&&o.push(f[m])}c=o.join(" ")}g.removeAttr(b);c.length&&g.attr(b,c)}}function w(a,
b){function e(e){var f;c.index&&(f=a.splitText(c.index),a&&b.push(a),a=f);(f=a.splitText(c[0].length))&&b.push(f);d(a).wrap("<a href='"+e+a.data+"'></a>")}var c,g,f;g=p.exec(a.data);f=q.exec(a.data);g?(c=g,e("mailto:")):f&&(g=(c=f)&&-1==c[0].indexOf("://")?"http://":"",e(g))}var q;linkify.init();var s=RegExp(linkify.RE_FULL_URL),t=RegExp(linkify.RE_OTHER_URL);q={exec:function(a){var b=s.exec(a);return b?b:t.exec(a)},test:function(a){return s.test(a)||t.test(a)}};var p,u=RegExp(linkify.RE_EMAIL_PATTERN);
p={exec:function(a){if((a=u.exec(a))&&/\s/.test(a[0][0]))a[0]=a[0].replace(/\s/,""),a.index++;return a},test:function(a){return u.test(a)}};h=h||{};h.Editor=h.Editor||{};h.Editor.regex={URL:q,EMAIL:p};d(document).bind("postPaste",function(a,b,e){a=e.node;b={standard:["text-decoration","text-align","margin-left"],".wysiwyg-macro":["background-image"],p:["margin-left","text-align"],span:["color","text-decoration"],pre:["margin-left"]};b.td=b.th=["text-align"];j(a,"style",b);j(a,"data-mce-style",b);
d.browser.mozilla&&(r(a,"src"),r(a,"href"));j(a,"face",{standard:[]});j(a,"id",{standard:[]});j(a,"data-mce-href",{standard:[]});var c=e.node;d.each(".contentLayout .contentLayout2 .columnLayout .header .footer .cell .innerCell .panelContent .panel .panelHeader .Apple-converted-space font .jira-status .jira-issue .diff-html-removed .diff-html-added .diff-html-changed".split(" "),function(a,b){d(b,c).contents().unwrap()});d("img",c).map(function(){!d(this).attr("src")&&d(this).remove()});d("dl",c).map(function(){d(this).replaceWith("<p>"+
d(this).text()+"</p>")});d("a",c).map(function(){d(this).removeClass("confluence-userlink userLogoLink")});if(!d.browser.msie)for(a=d.makeArray(e.node.childNodes);a.length;)b=a.pop(),d(b).is("a")||(3==b.nodeType?w(b,a):1==b.nodeType&&(b.childNodes&&"pre"!==b.nodeName.toLowerCase())&&(a=a.concat(d.makeArray(b.childNodes))));if(a=d.browser.mozilla)a=d(e.node),a=a.children("br").length&&!a.find(":not(br)").length;a&&(e=d(e.node),a="<p>"+e.html().replace(/<br>/gi,"</p><p>")+"</p>",e.html(a))})})(AJS.$,
Confluence);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-javascript-resources', location = 'tinymce3/plugins/confluencepaste/clipboard-helper.js' */
(function(c){var d=[{repair:function(a){var b=/<meta charset='utf-8'>(<td.*<\/td>)<br class="Apple-interchange-newline">/.exec(a);return b?'<table class="confluenceTable"><tbody><tr>'+b[1]+"</tr></tbody></table>":a}},{repair:function(a){var b=/<meta charset='utf-8'>(<tr.*<\/tr>)<br class="Apple-interchange-newline">/.exec(a);return b?'<table class="confluenceTable"><tbody>'+b[1]+"</tbody></table>":a}}];AJS.ClipboardHelper={parse:function(a,b){return"<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&3<=
a.length?c(a,b||document):c("<div>"+a+"</div>",b||document).contents()},repair:function(a){if(!a)return a;c.each(d,function(b,c){a=c.repair(a)});return a}}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-javascript-resources', location = 'tinymce3/plugins/confluencepastetable/editor_plugin_src.js' */
(function(f){tinymce.create("tinymce.plugins.ConfluencePasteTablePlugin",{init:function(i){function m(a){var c={id:!0,"class":!0,style:!0,rowspan:!0,colspan:!0,"data-mce-style":!0,"data-mce-bogus":!0,"data-macro-name":!0,"data-macro-parameters":!0,"data-macro-body-type":!0,"data-highlight-colour":!0,"data-highlight-class":!0},d=["highlight","nohighlight"],b,e=0,g=[],h=f(a);if(!a||j(a))return a;a&&a.getAttribute&&(b=a.getAttribute("class"));if(b&&0<=b.indexOf("table-wrap"))if(a=f("table",a),a.length)f(a).unwrap(),
a=a[0];else return null;if((!a.tagName?0:"TABLE"==a.tagName||"TR"==a.tagName||"TH"==a.tagName||"TD"==a.tagName||"TBODY"==a.tagName||"THEAD"==a.tagName||"TFOOT"==a.tagName||"COL"==a.tagName||"COLGROUP"==a.tagName||"CAPTION"==a.tagName)&&a.attributes){for(;e<=a.attributes.length;)(b=a.attributes[e])&&!0===b.specified&&!c[b.name]?a.removeAttribute(b.name):e++;k(a)&&g.push(k(a));c=0;for(e=d.length;c<e;c++)d[c].exec||h.hasClass(d[c])&&g.push(d[c]);(d=h.attr("data-highlight-class"))&&g.push(d);(d=h.attr("data-highlight-colour"))&&
g.push("highlight-"+d);h.attr("class",g.join(" "))}return a}function k(a){return!a.tagName?"":"TABLE"==a.tagName?"confluenceTable":"TH"==a.tagName?"confluenceTh":"TD"==a.tagName?"confluenceTd":""}function j(a){var c="";a&&a.getAttribute&&(c=a.getAttribute("class"));return!a.tagName?!1:"TABLE"!=a.tagName?!1:!c?!1:-1!==c.indexOf("wysiwyg-macro")}function l(a,c,d){for(var a=d.node,c=m,b=a,e="";b;)if("function"==typeof c&&(b=c(b)),b)b.firstChild&&e.parentNode!==b&&!j(b)?(e=b,b=b.firstChild):b.nextSibling?
(e=b,b=b.nextSibling):(e=b,b=b.parentNode);else break;d.node=a}i.onInit.add(function(){f(document).bind("postPaste",l)});i.onRemove.add(function(){f(document).unbind("postPaste",l)})},getInfo:function(){return{longname:"ConfluencePasteTablePlugin",author:"Atlassian",authorurl:"http://www.atlassian.com",infourl:"http://www.atlassian.com",version:"1.0"}}});tinymce.PluginManager.add("confluencepastetableplugin",tinymce.plugins.ConfluencePasteTablePlugin)})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-javascript-resources', location = 'tinymce3/plugins/confluencepastemacro/editor_plugin_src.js' */
(function(f){tinymce.create("tinymce.plugins.ConfluencePasteMacroPlugin",{init:function(b){var c=this,a=function(a,d,g){d=b.getDoc();f(b.selection.getStart()).closest("[data-macro-body-type='PLAIN_TEXT']").length&&(c.bindPostSerializeHandler(b),a=c.parseHtml(b,g.node),d=d.createElement("div"),d.appendChild(a),g.node=d)};b.onInit.add(function(){f(document).bind("postPaste",a)});b.onRemove.add(function(){f(document).unbind("postPaste",a)})},bindPostSerializeHandler:function(b){function c(b,d){d.content=
d.content.replace(/^<pre>|<\/pre>$/g,"");a.remove(c)}var a=b.serializer.onPostProcess;a.add(c)},parseHtml:function(b,c){for(var a=f.makeArray(c.childNodes),e,d=b.getDoc(),g=d.createElement("pre");a.length;)e=a.shift(),e.childNodes.length?(tinymce.html.Schema.blockElementsMap[e.nodeName]&&a.unshift(d.createElement("br")),a=f.makeArray(e.childNodes).concat(a)):(e=this.formatMacroContent(e,d))&&g.appendChild(e);return g},formatMacroContent:function(b,c){var a,e=/\xA0/g,c=c||window.document;3==b.nodeType?
a=c.createTextNode(f(b).text().replace(e," ")):"BR"==b.nodeName&&(a=c.createElement("br"));return a},getInfo:function(){return{longname:"ConfluencePasteMacroPlugin",author:"Atlassian",authorurl:"http://www.atlassian.com",infourl:"http://www.atlassian.com",version:"1.0"}}});tinymce.PluginManager.add("confluencepastemacroplugin",tinymce.plugins.ConfluencePasteMacroPlugin)})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-javascript-resources', location = 'tinymce3/plugins/confcursortarget/editor_plugin_src.js' */
(function(e){var j=".wysiwyg-macro,.placeholder,table";AJS.Rte=AJS.Rte||{};AJS.Rte.CursorTarget={addFixSelector:function(e){j+=","+e}};tinymce.create("tinymce.plugins.CursorTargetPlugin",{init:function(d){function k(a){e(j,a).each(function(b,a){var u=function(a){if(0===a.length)throw Error("no paragraph element specified");a=a[0];0===a.childNodes.length&&(a.innerHTML=tinymce.isIE&&!tinymce.isIE9?"&nbsp;":"<br />");return a},d=function(a,b){var c=e("<p/>");if(e(a.parentNode).is("li, td, th"))for(;a[b]&&
!e(a[b]).is(q);)c["previousSibling"==b?"prepend":"append"](a[b]);return u(c)},h=e(a);(!h.prev().length||h.prev(j).length||e(a.parentNode).is("li, td, th")&&!e(a.previousSibling).is(q))&&h.before(d(a,"previousSibling"));(!h.next().length||h.next(j).length||e(a.parentNode).is("li, td, th")&&!e(a.nextSibling).is(q))&&h.after(d(a,"nextSibling"));var d=function(a){("BR"==a[0].nodeName||l(a[0]))&&a.replaceWith(u(e("<p/>")))},g=h.prev(),f;if(f=g.length)a:{for(f=g.prev();f.length&&!f.is(j);){var i=f[0];if("BR"!=
i.nodeName&&"P"!=i.nodeName){f=!1;break a}f=f.prev()}f=!0}f&&d(g);h=h.next();if(g=h.length)a:{for(g=h.next();g.length&&!g.is(j);){f=g[0];if("BR"!=f.nodeName&&"P"!=f.nodeName){g=!1;break a}g=g.next()}g=!0}g&&d(h)})}function v(a){e("p",a).each(function(a,c){l(c)&&m(c)&&e(c).attr("data-tag","marked-for-deletion")});e("p[data-tag=marked-for-deletion]",a).remove();return a}function l(a){function b(a){for(var b=0,e=0,d=0,g=a.childNodes.length;d<g;d++){var f=a.childNodes[d];if("BR"==f.nodeName){if(1<++b)return!1}else if(/^[\s|\u00A0]$/.test(f.nodeValue)){if(1<
++e)return!1}else if(""!==f.nodeValue)return!1}return!0}return 1==a.nodeType&&0===a.childNodes.length||b(a)}function m(a){if(!a||1!=a.nodeType)return!1;var b=n(a,!1),c=n(a,!0),a=p(b)||e(b).is(j),d=p(c)||e(c).is(j),b=p(b)&&p(c);return a&&d&&!b}function p(a){return a?a.className&&/cell|header|footer/.test(a.className):!0}function n(a,b){var c=e(a);do{var d=b?c[0].nextSibling:c[0].previousSibling;if(d)return d;c=c.parent()}while(0<c.length&&!c.is(".cell, .mceContentBody, td, li"));return null}function r(a){var b=
a.startContainer;return 3==b.nodeType?!(b.previousSibling&&(3==b.previousSibling.nodeType||e(b.previousSibling).is("br")))&&0===a.startOffset:1==b.nodeType?0===a.startOffset:!1}function w(a){var a=e(a).children(),b;for(b=0;b<a.length;b++)if(!l(a[b])&&(e(a[b]).contents().filter(function(){return 3==this.nodeType}).length||w(a[b])))return!0;return!1}function s(a,b){var c;if(c=b.startContainer==b.endContainer)if(c=1==b.startContainer.nodeType)c=b.startOffset,a||c--,c=0<=c&&c<b.startContainer.childNodes.length&&
"TABLE"==b.startContainer.childNodes[c].nodeName;return c}function x(a){if(!a.collapsed)return!1;var b=a.startContainer,c;if(3==b.nodeType)return c=n(b,!0),a.startOffset==b.nodeValue.length&&(null==c||e(c).is("br"));if(1===b.nodeType){if(e(b).is("td, th")&&0===a.startOffset&&0<b.childNodes.length)return e(b.childNodes[0]).is("br");c=n(b.parentNode.childNodes[0===a.startOffset?0:a.startOffset-1],!0);return null==c||e(c).is("br")}return!1}function y(a){return a&&1===a.childNodes.length&&e(a.childNodes[0]).is("br")}
function z(a,b){return tinymce.isWebKit&&s(!1,b)||tinymce.isGecko&&(x(b)||m(a)&&0===b.startOffset&&y(a))?!0:!1}function A(a,b){var c;if(c=tinymce.isWebKit)if(!(c=s(!0,b)))if(!(c=r(b)&&m(a)))c=d.getBody(),c=c.childNodes.length?b.collapsed&&0===b.startOffset&&c.childNodes[0]==b.startContainer:!1;return c||tinymce.isGecko&&r(b)&&m(a)&&y(a)?!0:!1}function t(a,b){var c=b.keyCode;if(c!==i.BACKSPACE&&c!==i.DELETE)return!0;a.selection.isCollapsed()?c===i.BACKSPACE&&A(a.selection.getNode(),a.selection.getRng(B))?
tinymce.dom.Event.prevent(b):c===i.DELETE&&z(a.selection.getNode(),a.selection.getRng(B))&&tinymce.dom.Event.prevent(b):k(a.getBody());return!0}var B=!0,q="ol, ul, p, pre, table, blockquote, div, h1, h2, h3, h4, h5, h6",i=e.ui.keyCode;d.onSetContent.add(function(a){k(a.getBody());var a=a.getBody(),b=tinyMCE.isIE?"&nbsp;":"<br/>";e("p, td.confluenceTd, th.confluenceTh",a).each(function(a,d){d&&(d.childNodes&&1===d.childNodes.length&&3==d.childNodes[0].nodeType&&d.childNodes[0].nodeValue&&1===d.childNodes[0].nodeValue.length&&
160==d.childNodes[0].nodeValue.charCodeAt(0))&&e(d).html(b)})});d.onGetContent.add(function(a,b){var c=v(e("<div class='root-node'>"+b.content+"</div>")),c=AJS.Rte.getEditor().serializer.serialize(c[0],b);b.content=c.substring(23,c.length-6)});var o=function(){k(d.getBody())};d.onInit.add(function(){d.selection.onSetContent.add(o);d.dom.bind(d.getBody(),"cut",o);AJS.bind("cursor-target-refresh",o)});d.onRemove.add(function(){AJS.unbind("cursor-target-refresh",o)});tinymce.isGecko&&d.onKeyDown.add(function(a,
b){(b.keyCode===i.ENTER||b.keyCode===i.BACKSPACE||b.keyCode===i.DELETE)&&a.selection.normalize()});d.onKeyDown.add(t);d.onKeyUp.add(t);tinymce.isGecko&&d.onKeyPress.add(t);d.onPaste.add(o);e.extend(this,{_isTextContainerEmpty:l,_processCursorTargets:v,_isCursorAtStartOfContainer:r,_isCursorAtEndOfContainer:function(a){var b=a.startContainer;if(3==b.nodeType)return!(b.nextSibling&&(3==b.nextSibling.nodeType||e(b.nextSibling).is("br")))&&a.endOffset==b.nodeValue.length;if(1==b.nodeType){var c=b.childNodes[a.startOffset];
return e(c).is("br")&&null==c.nextSibling?!0:a.endOffset==b.childNodes.length}return!1},_getSiblingWithinBlockDisregardingNesting:n,_doesContainerHaveNestedContent:w,isCursorBeforeAfterTable:s,isCursorTarget:m,_addCursorTargetParagraphsToContent:k,_isCursorAtEndOfBottomRightCellInTable:x,_shouldCancelDelete:z,_shouldCancelBackspace:A});AJS.Rte.Cursor=AJS.Rte.Cursor||{};e.extend(AJS.Rte.Cursor,{isTextContainerEmpty:l,fixCursorTargets:k})},getInfo:function(){return{longname:"Cursor Target plugin",author:"Atlassian",
authorurl:"http://www.atlassian.com",version:"1.0"}}});tinymce.PluginManager.add("cursorTarget",tinymce.plugins.CursorTargetPlugin)})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-javascript-resources', location = 'tinymce3/plugins/confcleanup/editor_plugin_src.js' */
(function(f){tinymce.create("tinymce.plugins.ConfluenceCleanupPlugin",{init:function(d){if(tinymce.isWebKit){var h={},g=function(a,c){var b=a[c];b||(b={},a[c]=b);return b};f("#format-dropdown").find("ul.aui-dropdown li").each(function(){var a=f("a",this),c=a.css("font-size"),b=a.css("font-weight"),a=a.css("color"),a=g(h,a),b=g(a,b);b[c]||(b[c]=f(this).attr("data-format"))});d.onNodeChange.add(function(a){for(var c=a.dom.select("span.Apple-style-span",a.dom.doc.body),b=a.dom.select("font.Apple-style-span",
a.dom.doc.body),c=c.concat(b),b=0,j=c.length;b<j&&!a.dom.is(c[b],'[face="mceinline"]');b++){var e;a:{e=f(c[b]);var d=h[e.css("color")],g=void 0;if(d&&(g=d[e.css("font-weight")])){e=g[e.css("font-size")];break a}e=null}e&&(d=a.selection.getBookmark(),e&&a.dom.remove(c[b],1),a.selection.moveToBookmark(d),a.execCommand("FormatBlock",!1,e))}})}d.onNodeChange.add(function(a){for(var c=a.dom.select("img",a.dom.doc.body),b=c.length,d=0;d<b;d++)"file:///"===f(c[d]).attr("src").substr(0,8)&&a.dom.remove(c[d])});
if(tinymce.isIE9){var i=function(a){a.getBody().childNodes.length||a.setContent("<p>\ufeff</p>")};d.onNodeChange.add(i);d.onSetContent.add(i)}},getInfo:function(){return{longname:"ConfluenceCleanupPlugin",author:"Atlassian",authorurl:"http://www.atlassian.com",infourl:"http://www.atlassian.com",version:"1.0"}}});tinymce.PluginManager.add("confluencecleanupplugin",tinymce.plugins.ConfluenceCleanupPlugin)})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-javascript-resources', location = 'com/atlassian/confluence/tinymceplugin/tinyMce-auiwindowmanager.js' */
(function(){var f=tinymce.util.Dispatcher,g=tinymce.isIE;tinymce.create("tinymce.plugins.AUIWindowManager",{init:function(a){a.onBeforeRenderUI.add(function(){a.windowManager=new tinymce.AUIWindowManager(a)})},getInfo:function(){return{longname:"AUIWindowManager",author:"Atlassian",authorurl:"http://www.atlassian.com",version:tinymce.majorVersion+"."+tinymce.minorVersion}}});tinymce.create("tinymce.AUIWindowManager:tinymce.WindowManager",{AUIWindowManager:function(a){this.editor=a;this.onOpen=new f(this);
this.onClose=new f(this);this.params={};this.features={};this.modalDialogsStack=[];this.dialogs={};this.count=0},open:function(a,b){tinymce.DOM.getViewPort();a=a||{};this.initialiseSettings(a);b=b||{};b=this.setDefaultParameters(b);b.mce_width=a.width;b.mce_height=a.height;b.mce_auto_focus=a.auto_focus;g&&(a.center=!0,a.help=!1,a.dialogWidth=a.width+"px",a.dialogHeight=a.height+"px");this.features=a;this.params=b;this.onOpen.dispatch(this,a,b);var c=a.height;a.name&&(c+=56);if(b.cancelLink||b.buttons)c+=
51;c+=40;a.popup&&(c+=8);var d=a.id||tinymce.DOM.uniqueId(),e=new AJS.ConfluenceDialog({width:a.width,height:c,id:d,onCancel:function(){e.hide().remove()}});a.name&&e.addHeader(this.editor.getLang(a.name));this.createDialogButtons(e,b,d);a.file=a.file||a.url;a.file&&(a.file=tinymce._addVer(a.file));this.createDialogContent(e,a,b,d);b.helpLink&&this.createHelpLink(e,b.helpLink,b.helpName,d);b.hintText&&this.createHintText(e,b.hintText,d);c={id:d,settings:a,params:b,dialog:e};this.modalDialogsStack.push(c);
this.dialogs[d]=c;this.count++;AJS.Rte.BookmarkManager.storeBookmark();e.show();void 0!=e.takeFocus&&e.takeFocus();g&&(AJS.$("#"+d).css("overflow","hidden"),AJS.$("#"+d+" ."+b.cssClass).css("overflow","hidden"));return d},initialiseSettings:function(a){a.width=parseInt(a.width||400,10);a.height=parseInt(a.height||250,10);a.resizable=!1;void 0==a.popup&&(a.popup=!0);a.popup&&void 0!=a.content&&(a.popup=!1);a.scrollbars=a.scrollbars?"yes":"no"},createDialogButtons:function(a,b,c){if(b.buttons)for(var d=
0,d=0;d<b.buttons.length;d++){var e=b.buttons[d];a.addButton(this.editor.getLang(e.label),e.action)}b.cancelLink&&a.addCancel(this.editor.getLang("auiwindowmanager.cancel"),function(){return tinyMCE.activeEditor.windowManager.close(c)})},createDialogContent:function(a,b,c,d){var e=this.createContentId(d),d="panel_"+e;b.popup?(a.addPanel(d,AJS.$("<iframe id='"+e+"' width='100%' height='"+b.height+"px' frameborder='0' name='auidialogiframe' src='"+b.file+"' scrolling='"+b.scrollbars+"'></iframe>"),
c.cssClass),a.takeFocus=function(){AJS.$("#"+e).focus()}):(void 0==b.content?(a.addPanel(d,AJS.$("<div id='"+e+"'/>"),c.cssClass),AJS.$("#"+e).load(b.file)):a.addPanel(d,AJS.$("<div id='"+e+"'>"+b.content+"</div>"),c.cssClass),a.takeFocus=function(){var a=AJS.$("#"+e+" :input");if(a.length)AJS.$(a[0]).focus();else{a=AJS.$("#"+e+" .button-panel button");a.length&&AJS.$(a[0]).focus()}});a.gotoPanel(0,0)},createHintText:function(a,b,c){a=AJS.$("<div></div>").addClass("dialog-tip");a.text(tinyMCE.activeEditor.getLang(b));
AJS.$("#"+c+" .dialog-button-panel").append(a)},createHelpLink:function(a,b,c,d){a=AJS.$("<div></div>").addClass("dialog-help-link");a.load(AJS.params.contextPath+"/plugins/tinymce/helplink.action",{linkUrlKey:b,linkNameKey:c||""});AJS.$("#"+d+" .dialog-components .dialog-title").prepend(a)},close:function(a,b){var c;if("string"==typeof a)c=a;else if(b)c=b;else{var d=this.modalDialogsStack.pop();d&&(c=d.id)}this.dialogs[c]?(this.count--,d=this.dialogs[c],d.dialog.remove(),this.dialogs[c]=null,tinyMCE.activeEditor.focus(),
AJS.Rte.BookmarkManager.restoreBookmark()):AJS.log("Couldn't find id "+c+" in dialogs array so dialog is not closed.");return!1},alert:function(a,b,c){var d;d=this.open({content:"<p>"+a+"</p>",width:500,height:160,popup:!1},{buttons:[{label:"auiwindowmanager.ok",action:function(){tinyMCE.activeEditor.windowManager.toggleOtherDialogs(d,!0);tinyMCE.activeEditor.windowManager.close(d);b&&b.call(c||this)}}],cancelLink:!1,cssClass:"tinymce-auidialog-alert"});this.toggleOtherDialogs(d,!1)},createInstance:function(a,
b,c,d,e,h){return new (tinymce.resolve(a))(b,c,d,e,h)},toggleOtherDialogs:function(a,b){for(var c=0,c=0;c<this.modalDialogsStack.length;c++){var d=this.modalDialogsStack[c];d.id!=a&&AJS.$("#"+d.id+" .dialog-button-panel").toggle(b)}},confirm:function(a,b,c,d){d=d||window;b.call(c||this,d.confirm(this._decode(this.editor.getLang(a,a))))},setBusy:function(a,b){if(this.dialogs[a])if(b){var c=this.createContentId(a),c=AJS.$("#"+c);c.hide();var c=c.parent(),d=this.createBusyContentId(a),e=AJS.$("#"+d,
c);e.length||(c.append(AJS.$("<div id='"+d+"' class='spinner'></div>")),e=AJS.$("#"+d,c),Raphael.spinner(e[0],50,"#666"));AJS.$(".button-panel button",AJS.$("#"+a)).each(function(a,b){AJS.$(b).prop("disabled",true)});AJS.$(e[0]).show()}else d=this.createBusyContentId(a),e=AJS.$("#"+d),e.length&&AJS.$(e[0]).hide(),c=this.createContentId(a),c=AJS.$("#"+c),AJS.$(".button-panel button",AJS.$("#"+a)).each(function(a,b){AJS.$(b).prop("disabled",!1)}),AJS.$(c[0]).show()},logMCESelection:function(a){var b=
tinyMCE.activeEditor.selection;AJS.log("******************************");AJS.log("Logging TinyMCE selection title:    "+a);AJS.log("Bookmark:");AJS.log(b.getBookmark());a=AJS.$(b.getRng().startContainer).text()||$(b.getRng().startContainer.parentNode).text();AJS.log("Range: "+a);AJS.log(b.getRng())},setDefaultParameters:function(a){a.inline=!1;a.cssClass||(a.cssClass="tinymce-auidialog");!1!=a.cancelLink&&(a.cancelLink=!0);return a},createContentId:function(a){return"content_"+a},createBusyContentId:function(a){return"content_busy_"+
a}});tinymce.PluginManager.add("auiwindowmanager",tinymce.plugins.AUIWindowManager)})();
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-javascript-resources', location = 'macrobrowser/tinymce-macrobrowser.js' */
tinymce.confluence.macrobrowser=function(c){return{storedRange:null,bookmark:null,getCurrentNode:function(){return c(tinyMCE.activeEditor.selection.getNode())},isMacroDiv:function(a){return c(a).hasClass("wysiwyg-macro")},isMacroTag:function(a){a=c(a);return a.hasClass("wysiwyg-macro")||a.hasClass("editor-inline-macro")},isBodylessMacro:function(a){return c(a).hasClass("editor-inline-macro")},isMacroWithBody:function(a){return c(a).hasClass("wysiwyg-macro")},isMacroStartTag:function(a){return c(a).hasClass("wysiwyg-macro-starttag")},
isMacroEndTag:function(a){return c(a).hasClass("wysiwyg-macro-endtag")},isMacroBody:function(a){return c(a).hasClass("wysiwyg-macro-body")},hasMacroBody:function(a){return"true"==c(a).attr("macrohasbody")},getNestingMacros:function(a){var b=[];c(a||this.getCurrentNode()).parents(".wysiwyg-macro").each(function(){b.push(c(this).attr("data-macro-name"))});return b},logMCESelection:function(a){var b=tinyMCE.activeEditor.selection;AJS.log("******************************");AJS.log("Logging TinyMCE selection title:    "+
a);AJS.log("Bookmark:");AJS.log(b.getBookmark());a=c(b.getRng().startContainer).text()||c(b.getRng().startContainer.parentNode).text();AJS.log("Range: "+a);AJS.log(b.getRng())},getSelectedMacro:function(){var a=tinymce.confluence.macrobrowser,b=a.getCurrentNode();AJS.log("getSelectedMacro: $selectionNode="+b[0]);return a.isMacroDiv(b)?b:tinymce.confluence.MacroUtils.isInMacro(b)},openMacro:function(a){AJS.MacroBrowser.open({selectedMacro:a,onComplete:tinymce.confluence.macrobrowser.macroBrowserComplete,
onCancel:tinymce.confluence.macrobrowser.macroBrowserCancel})},editMacro:function(a){var b=tinymce.confluence.macrobrowser,a=c(a);b.editedMacroDiv=a[0];var d=AJS.Rte.getEditor().serializer.serialize(a.clone()[0],{forced_root_block:!1});AJS.Rte.getEditor().selection.select(a[0]);AJS.Rte.BookmarkManager.storeBookmark();c.ajax({type:"POST",contentType:"application/json; charset=utf-8",url:AJS.params.contextPath+"/rest/tinymce/1/macro/definition",data:AJS.$.toJSON({contentId:Confluence.getContentId(),
macroHtml:d}),dataType:"text",success:function(a){b.openMacro(AJS.$.secureEvalJSON(a))}})},macroBrowserToolbarButtonClicked:function(a){var b=tinymce.confluence.macrobrowser,d=tinyMCE.activeEditor,e=b.getCurrentNode();AJS.Rte.BookmarkManager.storeBookmark();b=c.extend({presetMacroName:null,nestingMacros:b.getNestingMacros(e),onComplete:b.macroBrowserComplete,onCancel:b.macroBrowserCancel,mode:"insert",selectedHtml:"",selectedText:""},a);a.ignoreEditorSelection||(b.selectedHtml=d.selection.getContent(),
b.selectedText=d.selection.getContent({format:"text"}));AJS.MacroBrowser.open(b)},macroBrowserComplete:function(a){var b=tinymce.confluence.macrobrowser,a={contentId:AJS.Meta.get("content-id")||"0",macro:{name:a.name,params:a.params,defaultParameterValue:a.defaultParameterValue,body:a.bodyHtml}};AJS.Rte.BookmarkManager.restoreBookmark();b.editedMacroDiv?(tinymce.confluence.MacroUtils.insertMacro(a,b.editedMacroDiv),delete b.editedMacroDiv):tinymce.confluence.MacroUtils.insertMacro(a)},macroBrowserCancel:function(){var a=
tinymce.confluence.macrobrowser;AJS.Rte.BookmarkManager.restoreBookmark();a.editedMacroDiv=null;a.editedMacro=null}}}(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-javascript-resources', location = 'utils/tinymce-image-utils.js' */
(function(g){var k="imagetext src align border width height".split(" "),m=/\/download\/(thumbnails|attachments)\/([0-9]+)\//,l=function(a,b,e,c,d){c?(b>=d&&(a.width=d),a.style.maxWidth=""):(e>=d&&(a.height=d),a.style.maxHeight="")},h;tinymce.confluence.ImageProperties=function(a){if(a&&g.nodeName(a,"img")&&g(a).hasClass("confluence-embedded-image")){var b=g(a),a={destination:b.attr("src"),url:b.attr("src"),border:b.attr("class")&&-1!=b.attr("class").indexOf("confluence-content-image-border")?1:0,
width:b.prop("width"),height:b.prop("height"),originalSelected:!b.attr("width")&&!b.attr("height")};if(!h.isRemoteImg(a.destination)&&!AJS.$(b).hasClass("confluence-external-resource")){var e=a;var b=g(b).attr("src"),c=b.match(m);c&&3==c.length?b=c[2]:(AJS.log("ERROR: could not parse page id from image url "+b),b="0");e.pageId=b}return g.extend({},a)}return a.destination?(a.imageFileName=a.imageFileName||a.destination,g.extend({},a)):null};h=tinymce.confluence.ImageUtils={isScaledByWidth:function(){return!1},
updateImageElement:function(a,b){var e=g(a),c;c=b.destination;c=h.isRemoteImg(c)?c:b.thumbnail?c.replace("/attachments/","/thumbnails/"):c.replace("/thumbnails/","/attachments/");b.src=c;e.toggleClass("confluence-content-image-border",!!b.border);e.toggleClass("confluence-thumbnail",!!b.thumbnail);c=0;for(var d=k.length;c<d;c++){var f=k[c],i=b[f];!1!==i&&null!=i?e.attr(f,i):e.removeAttr(f)}tinyMCE.activeEditor.undoManager.add()},insertFromProperties:function(a,b){AJS.$.ajax({type:"POST",contentType:"application/json; charset=utf-8",
url:AJS.params.contextPath+"/rest/tinymce/1/embed/placeholder/image",data:AJS.$.toJSON(a),dataType:"text",success:function(a){h.insertImagePlaceholder(a,b)}})},insertImagePlaceholder:function(a,b){var e,c=tinymce.confluence.ImageUtils.isScaledByWidth(),d=g(a);e=c?AJS.Confluence.PropertyPanel.Image.getPresetImageSize("large"):"comment"===AJS.Meta.get("content-type")?AJS.Confluence.PropertyPanel.Image.getPresetImageSize("small"):AJS.Confluence.PropertyPanel.Image.getPresetImageSize("medium");d.css(c?
"max-width":"max-height",e+"px");var f=tinyMCE.activeEditor,i="_"+ +new Date,h=g("<div></div>").append(d.attr("id",i));f.selection.setContent(h.html());var j=f.dom.get(i);f.dom.setAttrib(j,"id","");d.hasClass("confluence-external-resource")||l(j,d.attr("data-image-width"),d.attr("data-image-height"),c,e);g(j).one("load",function(){d.hasClass("confluence-external-resource")&&l(this,this.width,this.height,c,e);AJS.Rte.showSelection(function(){b||AJS.trigger("trigger.property-panel",{elem:j});f.undoManager.add()});
f.onChange.dispatch()})},isRemoteImg:function(a){var b=AJS.Rte.getCurrentBaseUrl();return a.match("(https?://)")&&-1==a.indexOf(b)},isThumbnailUsable:function(a,b,e,c,d,f){if(a){if(a>d)return!1;d=e/c;return 1<=d?!0:d*f>=a}a=b;if(a>f)return!1;f=c/e;return 1<=f?!0:f*d>=a}}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-javascript-resources', location = 'utils/tinymce-macro-utils.js' */
(function(e){var k;tinymce.confluence.MacroUtils=k={DEFAULT_INSERT_MACRO_TIMEOUT:5E3,insertMacro:function(a,d){var f;if(a.macro&&a.contentId)f={type:"POST",url:Confluence.getContextPath()+"/rest/tinymce/1/macro/placeholder",contentType:"application/json; charset=utf-8",data:e.toJSON(a),dataType:"text"};else if(a.url&&a.type)f=a;else throw Error("illegal argument received: "+a);var c=e.Deferred(),g=AJS.Rte.getEditor(),i,j;d||(j="macro-"+(new Date).getTime(),i=g.dom.create("span",{id:j}),g.selection.setNode(i),
d=i=g.dom.select("#"+j)[0],c.fail(function(){e(i).remove()}));e.extend(f,{timeout:k.DEFAULT_INSERT_MACRO_TIMEOUT});AJS.debug("Insert macro timeout = "+f.timeout);Confluence.Editor.UI.setButtonsState(!1);e.ajax(f).done(function(b){b[0]!=="<"&&(b=document.createTextNode(b));if(!d||!d.parentNode){AJS.logError("The node to be replaced has been already deleted from the document");c.rejectWith(this,arguments)}else tinymce.confluence.NodeUtils.updateNode(d,b).done(function(a){c.resolve(a,b)}).fail(c.reject)}).fail(function(b,
a,e){AJS.logError("Macro placeholder request failed "+a+": '"+e+"'");c.rejectWith(this,arguments)});c.done(function(b,a){Confluence.Editor.UI.setButtonsState(true);tinymce.confluence.macrobrowser.isMacroWithBody(b)&&/P|H\d/.test(b.parentNode.nodeName)&&g.dom.split(b.parentNode,b);var c=tinymce.confluence.macrobrowser,d=tinymce.activeEditor,f=d.getDoc(),h=d.selection.getRng(true);if(c.isMacroWithBody(b)){!tinymce.isIE&&e("p, pre",b).each(function(){this.childNodes.length===0&&this.appendChild(f.createElement("br"))});
if(c=d.dom.select(".wysiwyg-macro-body",b)[0].firstChild){h.setStart(c,0);h.setEnd(c,0)}else AJS.debug("focusMacroNode: couldn't find anything to focus, cap'n!")}else{h.setStartAfter(b);h.setEndAfter(b)}d.selection.setRng(h);g.nodeChanged();AJS.Rte.showElement(b);g.selection.onSetContent.dispatch(g.selection,{content:a,format:"html"});tinymce.activeEditor.undoManager.add()}).fail(function(){Confluence.Editor.UI.setButtonsState(true)});return c.promise()},isInMacro:function(a){return 0<(a.jquery?a:
e(a)).closest(".wysiwyg-macro").length}}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-javascript-resources', location = 'tinymce3/plugins/confluence/editor_plugin_src.js' */
(function(j){tinymce.create("tinymce.plugins.ConfluencePlugin",{init:function(e){e.addCommand("mceConfUnlink",function(e,k){var f=AJS.Rte.getEditor(),g=f.selection,d=k||g.getNode(),a=j(d);if("A"!=d.nodeName){a=a.closest("a");if(!a.length)return;d=a[0]}var b=a.attr("href");b||(b="#",a.attr("href",b));var c;if(c=!a.attr("data-linked-resource-id"))if(c=Confluence.Link.isExternalLink(b)){c=a.text();var h=b,i=/(.*)[\/]$/.exec(h);c=c==(null!=i?i[1]:h)}c?(g=f.dom.create("span",{"class":"nolink"},b),f.dom.replace(g,
d,!1)):(g.select(d),a.removeClass("createlink unresolved"),f.execCommand("UnLink"))});e.addButton("confimage",{title:"confluence.confimage_desc",cmd:"mceConfimage"});e.addButton("conf_macro_browser",{title:"confluence.conf_macro_browser_desc",cmd:"mceConfMacroBrowser"})},getInfo:function(){return{longname:"Confluence TinyMCE Plugin",author:"Atlassian",authorurl:"http://www.atlassian.com",version:tinymce.majorVersion+"."+tinymce.minorVersion}}});tinymce.PluginManager.add("confluence",tinymce.plugins.ConfluencePlugin)})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-javascript-resources', location = 'tinymce3/plugins/macroplaceholder/editor_plugin_src.js' */
(function(e){var i=tinymce.VK;tinymce.create("tinymce.plugins.MacroPlaceHolderPlugin",{init:function(h){function g(a){h.onKeyDown.add(a);tinymce.isGecko&&(h.onKeyPress.add(a),h.onKeyUp.add(a))}function j(a,b){return a&&1===a.childNodes.length&&e(a).is(b)&&e(a.firstChild).is("br")}function k(a){if(!a.collapsed)return!1;a=3==a.startContainer.nodeType?a.startContainer.parentNode:a.startContainer;if(!a||!a.parentNode)return!1;for(;a&&!e(a).is(".wysiwyg-macro-body");){if(a.previousSibling||a.nextSibling)return!1;
a=a.parentNode}return!0}var f=this;h.onInit.add(function(a){a.selection.onSetContent.add(function(a){tinymce.each(a.dom.select("p > .wysiwyg-macro"),function(c){var d=a.dom.getParent(c.parentNode,"p");try{a.dom.split(d,c)}catch(e){}})})});h.onSetContent.add(function(a){tinymce.each(a.dom.select('.wysiwyg-macro[data-macro-body-type="PLAIN_TEXT"] .wysiwyg-macro-body'),function(b){a.dom.select("pre",b).length||(tinymce.isIE?a.dom.setHTML(b,"<pre></pre>"):a.dom.setHTML(b,"<pre><br /></pre>"))})});h.onKeyDown.add(function(a,
b){var c=a.selection,d;if(!(d=-1!=jQuery.inArray(b.keyCode,[i.BACKSPACE,i.DELETE,i.ENTER,i.ESCAPE])))d=!1,0===b.charCode&&(d=-1!=jQuery.inArray(b.keyCode,[i.SHIFT,i.CTRL,i.ALT,i.META])),d=d||c.isCollapsed();if(!d&&!b.ctrlKey&&!(b.metaKey||!tinymce.isMac&&b.altKey))d=c.getNode(),tinymce.confluence.macrobrowser.isMacroWithBody(d)&&(d=e(".wysiwyg-macro-body",d),0<d.length&&(AJS.debug("MacroPlaceholderPlugin: Adjusting text selection to only include macro's body."),c.select(d[0],!0)))});h.onDblClick.add(function(a,
b){var c=e(b.target),d=c.closest("[data-macro-name]");if(d.length){AJS.debug("Double-click triggered inside a macro.");if(d.attr("data-macro-body-type"))if(tinymce.isIE)if(c.hasClass("wysiwyg-macro-body")||c.hasClass("wysiwyg-macro"))AJS.debug("Double-click inside macro body, but its IE so its OK I guess...");else{AJS.debug("Double-click was inside bodied macro content, even in IE. Skipping.");return}else if(c.closest(".wysiwyg-macro-body").length){AJS.debug("Double-click was inside bodied macro content. Skipping.");
return}tinymce.confluence.macrobrowser.editMacro(d);AJS.Confluence.PropertyPanel&&AJS.Confluence.PropertyPanel.current&&AJS.Confluence.PropertyPanel.destroy()}});h.onNodeChange.addToTop(function(a){var b=a.selection.getNode();"PRE"==b.nodeName&&AJS.$(b).closest(".wysiwyg-macro").length?f._setTinymceControlsState(a,0):f._setTinymceControlsState(a,1)});h.addCommand("mceConfRemoveMacro",function(a){e(a).remove();tinymce.isGecko&&AJS.Rte.getEditor().execCommand("mceRepaint",!1)});f._isCursorInMostNestedElement=
k;var n=function(a){if(!a.collapsed)return!1;a=3==a.startContainer.nodeType?a.startContainer.parentNode:a.startContainer;return a.previousSibling&&!a.nextSibling&&j(a,"p, pre")};(tinymce.isWebKit||tinymce.isGecko)&&g(function(a,b){if(46==b.keyCode&&n(a.selection.getRng(!0)))return tinymce.dom.Event.cancel(b)});f._isCursorInLastParagraphOrPre=n;tinymce.isWebKit&&g(function(a,b){if(8!=b.keyCode&&46!=b.keyCode)return!0;var c=a.selection.getRng(!0),d=3==c.startContainer.nodeType?c.startContainer.parentNode:
c.startContainer;if(c.collapsed)var f=3==c.startContainer.nodeType?c.startContainer.parentNode:c.startContainer,c=k(c)&&1===f.childNodes.length&&e(f.firstChild).is("br");else c=!1;return c&&(8==b.keyCode?!e(d).is("li"):1)?tinymce.dom.Event.cancel(b):!0});var o=function(a){if(!a.collapsed)return!1;var b=3==a.startContainer.nodeType?a.startContainer.parentNode:a.startContainer;return 0===a.startOffset&&e(b).is(".wysiwyg-macro-body > ul > li")&&1===b.childNodes.length&&e(b.firstChild).is("br")};tinymce.isWebKit&&
g(function(a,b){return 8!=b.keyCode?!0:o(a.selection.getRng(!0))?(a.execCommand("Outdent"),tinymce.dom.Event.cancel(b)):!0});f._isCursorInsideMacroPlacholderInsideListItemContainingSoloBr=o;var p=function(a){var b=3==a.startContainer.nodeType?a.startContainer.parentNode:a.startContainer,c=e(b);return 0===a.startOffset&&j(b,"p, pre")&&c.parent().is("td.wysiwyg-macro-body")&&!b.previousSibling&&b.nextSibling&&j(b.nextSibling,"p, pre")};tinymce.isWebKit&&g(function(a,b){if(46!=b.keyCode)return!0;var c=
a.selection.getRng(!0),d=3==c.startContainer.nodeType?c.startContainer.parentNode:c.startContainer,f=e(d);if(p(c))return c=d.nextSibling,f.remove(),a.selection.select(c,!0),tinymce.dom.Event.cancel(b)});f._isCursorInFirstParagraphWhenThereAreTwoEmptyParagraphs=p;var q=function(a){var b=3==a.startContainer.nodeType?a.startContainer.parentNode:a.startContainer,c=e(b);return 0===a.startOffset&&j(b,"p, pre")&&c.parent().is("td.wysiwyg-macro-body")&&!b.nextSibling&&b.previousSibling&&!b.previousSibling.previousSibling&&
j(b.previousSibling,"p, pre")};tinymce.isWebKit&&g(function(a,b){if(8!=b.keyCode)return!0;var c=a.selection.getRng(!0),d=3==c.startContainer.nodeType?c.startContainer.parentNode:c.startContainer,f=e(d);if(q(c))return c=d.previousSibling,f.remove(),a.selection.select(c,!0),tinymce.dom.Event.cancel(b)});f._isCursorInSecondParagraphWhenThereAreTwoEmptyParagraphs=q;var r=function(a){if(!a.collapsed)return!1;var b=3==a.startContainer.nodeType?a.startContainer.parentNode:a.startContainer,c=e(b);if(!b||
0<a.startOffset)return!1;tinymce.confluence.NodeUtils.normalize(b);return b&&0===a.startOffset&&j(b,"p, pre")&&c.parent().is("td.wysiwyg-macro-body")&&!b.previousSibling&&!b.nextSibling};(tinymce.isWebKit||tinymce.isGecko)&&g(function(a,b){if(8!=b.keyCode&&46!=b.keyCode)return!0;if(r(a.selection.getRng(!0)))return tinymce.dom.Event.cancel(b)});f._isCursorInSoloParagraphOrPreInsidePlaceholder=r;var s=function(a){return a&&a.parentNode&&"BR"==a.nodeName&&a===a.parentNode.lastChild},t=function(a){if(!a.collapsed)return!1;
var b=a.startContainer;return b&&0===a.startOffset&&3==b.nodeType&&k(a)&&1===b.nodeValue.length&&!b.previousSibling&&(!b.nextSibling||s(b.nextSibling))},u=function(a){if(!a.collapsed)return!1;var b=a.startContainer;return b&&1===a.startOffset&&3==b.nodeType&&k(a)&&1===b.nodeValue.length&&!b.previousSibling&&(!b.nextSibling||s(b.nextSibling))},v=function(a){if(!a.collapsed)return!1;var b=a.startContainer;return b&&0===a.startOffset&&1==b.nodeType&&1===b.childNodes.length&&k(a)&&!b.previousSibling&&
!b.nextSibling},w=function(a){if(!a.collapsed)return!1;var b=a.startContainer;return b&&1===a.startOffset&&1==b.nodeType&&1===b.childNodes.length&&k(a)&&!b.previousSibling&&!b.nextSibling};(tinymce.isWebKit||tinymce.isGecko)&&g(function(a,b){if(8!=b.keyCode&&46!=b.keyCode)return!0;var c=a.selection.getRng(!0),d=3==c.startContainer.nodeType?c.startContainer.parentNode:c.startContainer;if(!e(d).closest(".wysiwyg-macro-body").size())return!0;tinymce.confluence.NodeUtils.normalize(d);return 46==b.keyCode&&
(t(c)||v(c))||8==b.keyCode&&(u(c)||w(c))?(d.lastChild&&!e(d.lastChild).is("br")&&e(d).append("<br/>"),e(d.firstChild).remove(),a.selection.select(d,1),tinymce.dom.Event.cancel(b)):!0});f._isCursorBehindOnlyCharacterInNestedElement=t;f._isCursorAfterOnlyCharacterInNestedElement=u;f._isCursorBehindOnlyChildInNestedElement=v;f._isCursorAfterOnlyChildInNestedElement=w;var y=function(a){if(a.collapsed)return!1;var b=function(a){return!a.previousSibling},c=function(a){return!a.nextSibling};return 0===a.startOffset&&
x(a.startContainer,b)&&(!a.endContainer?!1:3==a.endContainer.nodeType?a.endOffset===a.endContainer.nodeValue.length:1===a.endContainer.nodeType?1===a.endContainer.childNodes.length&&e(a.endContainer.firstChild).is("br")?0===a.endOffset:a.endOffset===a.endContainer.childNodes.length:!1)&&x(a.endContainer,c)},x=function(a,b){if(!a)return!1;if(e(a).is(".wysiwyg-macro-body"))return!0;do{if(!b(a))return!1;a=a.parentNode}while(a&&!e(a).is(".wysiwyg-macro-body"));return!0};tinymce.isWebKit&&g(function(a,
b){if(8!=b.keyCode&&46!=b.keyCode)return!0;var c=a.selection.getRng(!0);if(y(c)&&(c=e(c.startContainer).closest(".wysiwyg-macro-body"),0<c.length)){var d=e(c[0].firstChild).is("pre");a.undoManager.add();c.empty();c=d?e("<pre><br/></pre>").appendTo(c):e("<p><br/></p>").appendTo(c);a.selection.select(c[0],!0);return tinymce.dom.Event.cancel(b)}return!0});f._isMacroBodySelected=y;var z=function(a){if(!a.collapsed)return!1;var b=3==a.startContainer.nodeType?a.startContainer.parentNode:a.startContainer,
c=e(b);return 0===a.startOffset&&j(b,"p")&&c.next().is("table")};tinymce.isWebKit&&g(function(a,b){if(46==b.keyCode&&z(a.selection.getRng(!0)))return tinymce.dom.Event.cancel(b)});f._isCursorInEmptyParagraphPrecedingPlaceholder=z;var A=function(a){return!a||e(a.parentNode).is(".wysiwyg-macro td")?null:e(a.parentNode).is("p")?a.parentNode:A(a.parentNode)},l=function(a){return!a?null:3==a.nodeType?a:l(a.firstChild)||l(a.nextSibling)},m=function(a){return!a||"PRE"==a.nodeName||"TD"==a.nodeName?null:
"BR"==a.nodeName?a:m(a.previousSibling)||m(a.parentNode)},B=function(a){var b,c;0<e(a.commonAncestorContainer).closest(".wysiwyg-macro td").length&&(m(a.startContainer)||(b=l(A(a.startContainer))));if(0<(c=e(a.commonAncestorContainer).closest(".wysiwyg-macro td > pre")).length)m(a.startContainer)||(b=l(c[0]));b&&(a=a.cloneRange(),a.setStart(b,0));return a};tinymce.isWebKit&&tinymce.isMac&&g(function(a,b){var c=a.selection.getRng();if((b.metaKey||b.ctrlKey)&&b.shiftKey&&b.keyCode==i.LEFT){var d=B(c);
if(d!==c)return a.selection.setRng(d),tinymce.dom.Event.cancel(b)}});f._selectTillStart=B;h.onKeyDown.add(function(a,b){if(b.keyCode==tinymce.VK.TAB){var c=a.selection.getRng(1);if(e(3==c.startContainer.nodeType?c.startContainer.parentNode:c.startContainer).is(".wysiwyg-macro-body > pre")){a.undoManager.beforeChange();a.undoManager.add();var d=a.getDoc().createTextNode("\t");c.insertNode(d);a.selection.setCursorLocation(d,1);a.undoManager.add();return tinymce.dom.Event.prevent(b)}}})},_setTinymceControlsState:function(e,
g){tinymce.each(e.controlManager.controls,function(e){e.setDisabled(!g)})},getInfo:function(){return{longname:"Macro Place Holder plugin",author:"Atlassian",authorurl:"http://www.atlassian.com",version:"1.0"}}});tinymce.PluginManager.add("macroplaceholder",tinymce.plugins.MacroPlaceHolderPlugin)})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-javascript-resources', location = 'tinymce3/plugins/insertwiki/editor_plugin_src.js' */
(function(f,e,q){var l=!AJS.DarkFeatures.isEnabled("editor.insert-wiki-markdown"),c={DEFAULT:null,HELP_REST_API:AJS.contextPath()+"/plugins/tinymce/helplink.action",WIKI:{CONFLUENCE:{val:"CONFLUENCE",label:"Confluence wiki",helpLink:"help.insert.wiki.markup",restApi:"/rest/tinymce/1/wikixhtmlconverter"},MARKDOWN:{val:"MARKDOWN",label:"Markdown",helpLink:"help.insert.wiki.markup.markdown",
restApi:"/rest/tinymce/1/markdownxhtmlconverter"}}},n=new Confluence.localStorageCacheManager("insert-wiki-markup-dialog");f.create("tinymce.plugins.InsertWikiMarkupPlugin",{init:function(d,r){d.addCommand("InsertWikiMarkup",function(){var h={id:"insert-wiki-markup-dialog",content:l?Confluence.Templates.InsertWiki.wikiMarkupDialog():Confluence.Templates.InsertWiki.originalDefaultTempWikiMarkupDialog(),width:980,height:500,popup:!1,name:"confluence.conf_wikimarkup_desc"},s=AJS.Meta.get("content-id"),
t=AJS.Meta.get("space-key");c.DEFAULT=c.WIKI[n.get("parser")||"CONFLUENCE"];var b={getElement:function(a){b[a]=b[a]||e(a);return b[a]}},i=null,j=function(){var a=b.getElement("#wiki-parser-selection-tool");return a.length?a.val():c.DEFAULT.val},o=function(a){a=a||{};a.setBusy&&d.windowManager.setBusy(h.id,!0);e.ajax({type:"POST",contentType:"application/json; charset=utf-8",url:a.API,data:e.toJSON({wiki:a.textToConvert,entityId:s,spaceKey:t}),dataType:"text",success:a.successCallback,error:a.errorCallback||
function(a){AJS.logError(a)},timeout:7500})},u=function(a){var b=h.id,c=j();d.windowManager.setBusy(b,!1);f.EditorManager.activeEditor.windowManager.close(b);l&&(AJS.trigger("analytics",{name:"insert-wiki-markup-dialog."+c}),"MARKDOWN"===c&&(a=e(a),a.find("img").addClass("confluence-embedded-image"),a=e("<div>").append(a.clone()).html()));d.execCommand("mceInsertContent",!1,a);f.each(d.dom.select("p > p"),function(a){try{d.dom.split(a.parentNode,a)}catch(b){AJS.logError("insertwikimarkup - splitParas()",
b)}})},v=function(a,b,c){d.windowManager.setBusy(h.id,!1);a={warningMessage:f.EditorManager.activeEditor.getLang("confluence.conf_wikimarkup_errors"),exceptionMessage:"timeout"===b?f.EditorManager.activeEditor.getLang("confluence.conf_wikimarkup_timeout"):AJS.escapeHtml(b)+" : "+AJS.escapeHtml(c)};a=Confluence.Templates.InsertWiki.wikiErrorSubDialog(a);f.EditorManager.activeEditor.windowManager.alert(a)},p=function(){var a=b.getElement("#insert-wiki-textarea"),d=a.val();e.trim(d)?o({API:AJS.params.contextPath+
c.WIKI[j()].restApi,textToConvert:d,successCallback:function(a){i.html(a)},errorCallback:function(){i.html(a.val())}}):i.html(d)},w=function(){var a=j();n.put("parser",a);b.getElement("#"+h.id).find(".dialog-help-link").load(c.HELP_REST_API,{linkUrlKey:c.WIKI[a].helpLink});p()};d.windowManager.open(h,{buttons:[{label:"confluence.conf_insert_button_title",action:function(){o({API:AJS.params.contextPath+c.WIKI[j()].restApi,successCallback:u,errorCallback:v,textToConvert:b.getElement("#insert-wiki-textarea").val(),
setBusy:!0})}}],plugin_url:r,helpLink:c.DEFAULT.helpLink,hintText:"confluence.conf_wikimarkup_hint",cssClass:"insert-wiki-markup-panel"});if(l){var m=e("#wysiwygTextarea_ifr").contents().find("head").html(),x=Confluence.Templates.InsertWiki.previewWikiIframeContent(),g=e("<iframe tabindex='-1' id='insert-wiki-markup-preview' />"),k;b.getElement("#insert-wiki-textarea-preview").append(g);g=g.contents();k=g[0];k.open();k.write(x);k.close();g.find("head").html(m);i=g.find("body");m=e(Confluence.Templates.InsertWiki.wikiParserSelector(c));
b.getElement("#insert-wiki-insert-title").append(m);b.getElement("#wiki-parser-selection-tool").on("change",w);b.getElement("#insert-wiki-textarea").on("keydown",q.debounce(p,300))}});d.addButton("insertwikimarkup",{title:"confluence.conf_wikimarkup_desc",cmd:"InsertWikiMarkup"})},getInfo:function(){return{longname:"InsertWikiMarkip",author:"Atlassian",authorurl:"http://www.atlassian.com",infourl:"http://www.atlassian.com/",version:"1.1"}}});f.PluginManager.add("insertwikimarkup",f.plugins.InsertWikiMarkupPlugin)})(tinymce,
AJS.$,_);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-javascript-resources', location = 'tinymce3/plugins/propertypanel/editor_plugin_src.js' */
(function(f){var g=[];AJS.bind("add-handler.property-panel",function(c,d){d&&g.push(d)});tinymce.create("tinymce.plugins.PropertyPanel",{init:function(c){AJS.debug("init property panel plugin");var d,e=function(b,a,c){var d={focusedEl:c,focusedNodeName:c.nodeName&&c.nodeName.toLowerCase(),ed:b,e:f.extend({},a)};b=f(c);b.is("img")?b=b[0]:(b=b.closest("a,table,.wysiwyg-macro,.editor-inline-macro,.text-placeholder"),b=b.length?b[0]:"");var c=!!f(c).closest("table:not(.wysiwyg-macro,.editor-inline-macro)").length,
e=!!f(".toolbar-contextual").length;d.containerEl=b;AJS.trigger("user-blurred-rte-element",d);var h;if(h=b)a="click"!=a.type?!1:a.which?3==a.which:a.button?2==a.button:void 0,h=!a&&!AJS.Confluence.PropertyPanel.current&&AJS.Confluence.PropertyPanel.shouldCreate;if(h){a=0;for(h=g.length;a<h;a++)if(g[a].canHandleElement(f(b))){if(e||!c)return g[a].handle(d);(function(a){AJS.$(document).bind("shown.contextToolbar",function(){a.handle(d)})})(g[a])}}};tinymce.isIE&&c.onMouseDown.add(function(b,a){d&&d.unbind("mouseup.IEDragHandlesWorkaround");
d=AJS.$(a.target);d.filter("img, table").bind("mouseup.IEDragHandlesWorkaround",function(){e(b,a,a.target)})});AJS.bind("trigger.property-panel",function(b,a){e(c,b,a.elem)});c.onClick.add(function(b,a){e(b,a,a.target)});c.onKeyUp.addToTop(function(b,a){27!==a.keyCode&&e(b,a,b.selection.getNode())});c.onContextMenu.add(function(){AJS.Confluence.PropertyPanel.destroy()});AJS.bind("user-blurred-rte-element",function(b,a){AJS.Confluence.PropertyPanel.current&&(!a.containerEl||AJS.Confluence.PropertyPanel.current.hasAnchorChanged(a.containerEl)?
AJS.Confluence.PropertyPanel.destroy():AJS.trigger("same-anchor.property-panel"))});AJS.bind("created.property-panel",function(){setTimeout(function(){AJS.Rte.bindScroll("property-panel",function(){AJS.Confluence.PropertyPanel.destroy()})},0);AJS.$(c.getDoc()).bind("keydown.property-panel.escape",function(b){27===b.keyCode&&AJS.Confluence.PropertyPanel.current&&AJS.Confluence.PropertyPanel.destroy()})});AJS.bind("destroyed.property-panel",function(){AJS.Rte.unbindScroll("property-panel");AJS.$(c.getDoc()).unbind("keydown.property-panel.escape")})},
getInfo:function(){return{longname:"Image, Link and Macro Property Panels",author:"Atlassian",authorurl:"http://www.atlassian.com",version:tinymce.majorVersion+"."+tinymce.minorVersion}}});tinymce.PluginManager.add("propertypanel",tinymce.plugins.PropertyPanel)})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-javascript-resources', location = 'tinymce3/plugins/confmonospace/editor_plugin_src.js' */
(function(){tinymce.create("tinymce.plugins.ConfMonospacePlugin",{init:function(a){a.addCommand("confMonospace",function(){a.formatter.toggle("monospace",void 0)});tinymce.activeEditor.onInit.add(function(a){a.formatter.register({monospace:{inline:"code"}});a.editorCommands.addCommands({confMonospace:function(){return a.formatter.match("monospace")}},"state")});a.addButton("monospace",{title:"monospace",cmd:"confMonospace"})},getInfo:function(){return{longname:"Monospace Formatting",author:"Atlassian",
authorurl:"http://www.atlassian.com",version:tinymce.majorVersion+"."+tinymce.minorVersion}}});tinymce.PluginManager.add("confmonospace",tinymce.plugins.ConfMonospacePlugin)})();
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-javascript-resources', location = 'tinymce3/plugins/propertypanel/js/tinyMce-property-panel-links.js' */
(function(f){var g=0;AJS.Confluence.PropertyPanel.Link={name:"link",canHandleElement:function(c){return c.is("a")&&"#"!=c.attr("href")&&!c.hasClass("unresolved")},handle:function(c){var b=c.containerEl,e=c.ed,a=function(b){return AJS.Rte.getEditor().getLang(b)},c={anchorIframe:AJS.Rte.getEditorFrame()},d=0==f(b).attr("href").indexOf("#"),a=[{className:"link-property-panel-goto-button",text:a("propertypanel.links_goto"),tooltip:d?a("propertypanel.links_goto_disabled_tooltip"):b.href,href:b.href,disabled:d,
click:function(){AJS.Confluence.PropertyPanel.destroy();var a=window.open(b.href,tinymce.isIE?"_blank":"confluence-goto-link-"+AJS.params.pageId+"-"+g);a&&a.focus()}},{className:"link-property-panel-edit-button",text:a("propertypanel.links_edit"),tooltip:a("propertypanel.links_edit_tooltip"),disabled:f(b).hasClass("createlink")||!b.href,click:function(){AJS.Confluence.PropertyPanel.destroy();e.selection.select(b);Confluence.Editor.LinkBrowser.open()}},{className:"link-property-panel-unlink-button",
text:a("propertypanel.links_unlink"),tooltip:a("propertypanel.links_unlink_tooltip"),click:function(){AJS.Confluence.PropertyPanel.destroy();e.execCommand("mceConfUnlink",!1,b);e.focus()}}],d=[];AJS.trigger("link-property-panel-buttons.created",{buttons:d,link:b});a=a.concat(d);AJS.Confluence.PropertyPanel.createFromButtonModel(this.name,b,a,c);g++}}})(AJS.$);AJS.bind("init.rte",function(){AJS.trigger("add-handler.property-panel",AJS.Confluence.PropertyPanel.Link)});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-javascript-resources', location = 'tinymce3/plugins/propertypanel/js/tinyMce-property-panel-images.js' */
AJS.Confluence.PropertyPanel.Image=function(f){function l(){var a=[];f.each(buttons,function(c,b){a.push(b)});AJS.Confluence.PropertyPanel.current.panel.find(a.join(", ")).removeClass("selected")}function m(a,c,b){var g=p(a,c),b=p(a,b),e=g||b;if(e){var d=f(AJS.Confluence.PropertyPanel.current.anchor),u=d.width(),d=d.height(),h=AJS.Meta.get("max-thumb-width"),k=AJS.Meta.get("max-thumb-height");a.thumbnail=tinymce.confluence.ImageUtils.isRemoteImg(a.destination)?!1:tinymce.confluence.ImageUtils.isThumbnailUsable(g,
b,u,d,h,k);a.originalSelected=!1;c?(delete a.height,a.width=e):(delete a.width,a.height=e);i(a);l();return!0}return!1}function q(a,c){return(o?m(a,h[c]):m(a,null,h[c]))?(r(c),i(a),!0):!1}function s(a){delete a.width;delete a.height;a.thumbnail=!1;a.originalSelected=!0;l();r("original");var c=AJS.Confluence.PropertyPanel.current,b=f(c.anchor);c.updating=!0;b.one("load",function(){j(c);n(a);a.width=Math.floor(b.width());a.height=Math.floor(b.height())});tinymce.confluence.ImageUtils.updateImageElement(b,
a);tinymce.isGecko&&AJS.Rte.getEditor().execCommand("mceRepaint",!1);b.each(function(){this.complete&&f(this).trigger("load")});return!0}function r(a){AJS.Confluence.PropertyPanel.current.panel.find(buttons[a]).addClass("selected")}function t(a){f(".image-border-toggle").toggleClass("selected",!a.border);a.border=+!a.border||!1;i(a)}function i(a){var c=AJS.Confluence.PropertyPanel.current,b=f(c.anchor),g=b.attr("src"),e=b.height();c.updating=!0;tinymce.confluence.ImageUtils.updateImageElement(b,a);
tinymce.isGecko&&AJS.Rte.getEditor().execCommand("mceRepaint",!1);if(a.src!=g){var d=setInterval(function(){var a=b.height();a!=e&&(AJS.debug("updateImageElement : height changed after image src change - "+e+" to "+a),clearTimeout(d),d=null,j(c))},10);setTimeout(function(){d&&(clearTimeout(d),d=null,j(c))},1E3)}else j(c);n(a)}function n(a){a=a.width?a.width:f(AJS.Confluence.PropertyPanel.current.anchor).width();a=Math.floor(a);f("#image-size-input").val(a+"px")}function p(a,c){c=parseInt(c);if(isNaN(c))return null;
c<lowerImageSizeBound?c=lowerImageSizeBound:c>upperImageSizeBound&&(c=upperImageSizeBound);return c}var o=tinymce.confluence.ImageUtils.isScaledByWidth(),h;h=o?{small:100,medium:300,large:500}:{small:150,medium:250,large:400};buttons={small:".image-size-small",medium:".image-size-medium",large:".image-size-large",original:".image-size-original"};lowerImageSizeBound=16;upperImageSizeBound=900;var j=function(a){a.updating=!1;a.snapToElement({animate:!0,animateDuration:100})};return{pluginButtons:[],
name:"image",getPresetImageSize:function(a){return h[a]},canHandleElement:function(a){return a.is("img")&&!a.hasClass("editor-inline-macro")&&!a.hasClass("template-variable")},handle:function(a){var c="IMG"==a.nodeName?a:a.containerEl,a=f(c),b=tinymce.confluence.ImageProperties(c);if(b&&!a.attr("data-resource-id")){var g=AJS.Rte.getEditor(),e=function(a){return g.getLang(a)},d=function(a){return{className:"image-size-"+a,text:e("propertypanel.images_"+a),tooltip:e("propertypanel.images_"+a+"_tooltip"),
click:function(){q(b,a);AJS.trigger("analyticsEvent",{name:"confluence.editor.image.resize."+a})},selected:o?b.width==h[a]:b.height==h[a]}},d=[{className:"editable",tooltip:e("propertypanel.images_sizing_tooltip"),html:'<input id="image-size-input"/>'},null,d("small"),d("medium"),d("large"),{className:"image-size-original",text:e("propertypanel.images_original"),tooltip:e("propertypanel.images_original_tooltip"),click:function(){s(b);AJS.trigger("analyticsEvent",{name:"confluence.editor.image.resize.original"})},
selected:b.originalSelected},null,{className:"image-border-toggle",text:e("propertypanel.images_border"),tooltip:e("propertypanel.images_border_tooltip"),click:function(){t(b)},selected:b.border||1==b.border}];d.push(null);var j=a.parent();j.is("a[href]")?(d.push({className:"image-link-edit",text:e("propertypanel.images_link_edit"),tooltip:e("propertypanel.images_link_edit_tooltip"),click:function(){AJS.Confluence.PropertyPanel.destroy();g.selection.select(j[0]);Confluence.Editor.LinkBrowser.open()}}),
d.push({className:"image-link-remove",text:e("propertypanel.images_link_remove"),tooltip:e("propertypanel.images_link_remove_tooltip"),click:function(){AJS.Confluence.PropertyPanel.destroy();g.execCommand("mceConfUnlink",!1,c);g.focus()}})):d.push({className:"image-make-link",text:e("propertypanel.images_link_create"),tooltip:e("propertypanel.images_link_create_tooltip"),click:function(){AJS.Confluence.PropertyPanel.destroy();g.selection.select(c);Confluence.Editor.LinkBrowser.open()}});for(var i=
AJS.Confluence.PropertyPanel.Image.pluginButtons,k=0;k<i.length;k++)if(null===i[k])d.push(null);else{var l=i[k].create(a);l&&d.push(l)}AJS.Confluence.PropertyPanel.createFromButtonModel(this.name,c,d,{anchorIframe:AJS.Rte.getEditorFrame()});a=f("#image-size-input");a.bind("focus",function(){f(this).select()});a.bind("change",function(){m(b,f("#image-size-input").val())?true:n(b);AJS.trigger("analyticsEvent",{name:"confluence.editor.image.resize.custom"})});AJS.Confluence.PropertyPanel.current.imageProps=
b;n(b);return{setPresetSize:function(a){q(b,a)},setPixelSize:function(a){m(b,a)},setToOriginalSize:function(){s(b)},toggleBorder:function(){t(b)},getWidth:function(){return b.width},getHeight:function(){return b.height},getDisplayWidth:function(){return f("#image-size-input").val()},isButtonSelected:function(a){return AJS.Confluence.PropertyPanel.current.panel.find(buttons[a]).hasClass("selected")}}}}}}(AJS.$);AJS.bind("init.rte",function(){AJS.trigger("add-handler.property-panel",AJS.Confluence.PropertyPanel.Image)});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-javascript-resources', location = 'tinymce3/plugins/propertypanel/js/tinyMce-property-panel-macros.js' */
AJS.Confluence.PropertyPanel.Macro=function(d){var j=[],k=[],e={};return{name:"macro",registeredEvents:j,canHandleElement:function(a){return a.hasClass("editor-inline-macro")||a.hasClass("wysiwyg-macro")},handle:function(a){if(!("click"!==a.e.type&&"mouseup"!==a.e.type)){var b=a.containerEl,c=d(b),g,f=[],a=!c.hasClass("editor-inline-macro"),n=c.hasClass("wysiwyg-unknown-macro"),h=[],m={originalHeight:a&&c.height(),anchorIframe:AJS.Rte.getEditorFrame()},l=function(a,c){return a+"-button-click"+(c?
c+".macro":"")+".property-panel"};n||(g=c.attr("data-macro-name"),AJS.MacroBrowser.getMacroMetadata(g)&&(f=AJS.MacroBrowser.getMacroMetadata(g).buttons),a="macro-placeholder-property-panel-edit-button",0<f.length&&"__PROPERTY_PANEL_SPACER"==f[0].key&&(a+=" last"),h.push({className:a,text:"Edit",click:function(){AJS.Confluence.PropertyPanel.destroy();tinymce.confluence.macrobrowser.editMacro(c)}}),d.each(f,function(a,b){if(b.key!="__PROPERTY_PANEL_SPACER"){var e=
"macro-property-panel-"+b.key;a>0&&f[a-1].key=="__PROPERTY_PANEL_SPACER"&&(e=e+" first");a<f.length-1&&f[a+1].key=="__PROPERTY_PANEL_SPACER"&&(e=e+" last");h.push({className:e,text:b.label,parameterName:b.key,click:function(){d(document).trigger(l(b.key),c);d(document).trigger(l(b.key,g),c);AJS.Confluence.PropertyPanel.destroy()}})}}));a="macro-placeholder-property-panel-remove-button";0<f.length&&"__PROPERTY_PANEL_SPACER"==f[f.length-1].key&&(a+=" first");h.push({className:a,text:"Remove",
click:function(){AJS.Confluence.PropertyPanel.destroy();AJS.Rte.getEditor().execCommand("mceConfRemoveMacro",b)}});if(c.attr("data-macro-parameters")){var i=Confluence.MacroParameterSerializer.deserialize(c.attr("data-macro-parameters"));"atlassian-macro-output-type"in i&&(a=function(a){return function(b){i["atlassian-macro-output-type"]=a;c.attr("data-macro-parameters",Confluence.MacroParameterSerializer.serialize(i));a=="INLINE"?d(".macro-placeholder-property-panel-display-newline-button").removeClass("selected"):
d(".macro-placeholder-property-panel-display-inline-button").removeClass("selected");d(b).addClass("selected")}},h.push(null),h.push({className:"macro-placeholder-property-panel-display-newline-button",tooltip:"Display on new line",selected:"BLOCK"==i["atlassian-macro-output-type"],click:a("BLOCK")}),h.push({className:"macro-placeholder-property-panel-display-inline-button",tooltip:"Display inline",selected:"INLINE"==i["atlassian-macro-output-type"],
click:a("INLINE")}))}d.each(j,function(){(!this.macroName||this.macroName==g)&&d(document).bind(l(this.id,this.macroName),this.handler)});a=k;g&&e[g]&&(a=a.concat(e[g]));d.each(a,function(){try{this(b,h,m)}catch(a){AJS.debug("Property panel init handler failed for : "+g+".  Is global handler : "+(AJS.$.inArray(this,k)>-1),a)}});0<h.length&&AJS.Confluence.PropertyPanel.createFromButtonModel("macro",b,h,m)}},registerButtonHandler:function(a,b,c){Array.isArray(a)||(a=[a]);a.forEach(function(a){j.push({id:a,
handler:b,macroName:c})})},registerInitHandler:function(a,b){b?(e[b]=e[b]||[],e[b].push(a)):k.push(a)},yieldButtonFor:function(a,b){var c;d.each(a,function(){this.parameterName&&this.parameterName==b&&(c=this)});return c}}}(AJS.$);AJS.bind("init.rte",function(){AJS.trigger("add-handler.property-panel",AJS.Confluence.PropertyPanel.Macro)});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-javascript-resources', location = 'tinymce3/plugins/conftable/editor_plugin_src.js' */
(function(e){tinymce.create("tinymce.plugins.ConfluenceTablePlugin",{init:function(g){!tinymce.isIE8&&g.onKeyDown.add(function(d,b){if(b.altKey&&!(38!=b.keyCode&&40!=b.keyCode)){var c=d.selection.getRng(!0),a=e(c.startContainer).closest("td.confluenceTd, th.confluenceTh",".mceContent");if(0!==a.length){d.execCommand(38==b.keyCode?"mceTableInsertRowBefore":"mceTableInsertRowAfter");var a=a.parent()[38==b.keyCode?"prev":"next"]().find("td:first-child")[0],f=e(a);f.hasClass("numberingColumn")&&(a=f.next()[0]);
c.setStart(a,0);c.setEnd(a,0);d.selection.setRng(c);return tinymce.dom.Event.prevent(b)}}})},getInfo:function(){return{longname:"Confluence Table Plugin",author:"Atlassian",authorurl:"http://www.atlassian.com",version:tinymce.majorVersion+"."+tinymce.minorVersion}}});tinymce.PluginManager.add("conftable",tinymce.plugins.ConfluenceTablePlugin)})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-javascript-resources', location = 'tinymce3/plugins/deletecommand/editor_plugin_src.js' */
(function(d){tinymce.create("tinymce.plugins.DeleteCommandPlugin",{init:function(b){b.addCommand("mceDelete",function(e,f){(function(){if(tinymce.isWebKit){var a=b.selection.getRng(1);if(a.collapsed)return!1;var c=d(a.startContainer).closest(".wysiwyg-macro-body",b.getBody())[0];if(c&&AJS.EditorUtils.isRangeAtStartOf(c,a)&&AJS.EditorUtils.isRangeAtEndOf(c,a))return a=d(c.firstChild).is("pre")?"pre":"p",a=d("<"+a+"><br data-mce-bogus='1'></"+a+">")[0],d(c).html(a),b.selection.select(a,1),!0}return!1})()||
b.getDoc().execCommand("Delete",e,f)})},getInfo:function(){return{longname:"Delete Command Plugin",author:"Atlassian",authorurl:"http://www.atlassian.com",version:tinymce.majorVersion+"."+tinymce.minorVersion}}});tinymce.PluginManager.add("deletecommand",tinymce.plugins.DeleteCommandPlugin)})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-javascript-resources', location = 'tinymce3/plugins/draggable/editor_plugin_src.js' */
(function(g){function E(a){if(1==a.which&&a.target==a.currentTarget)if(d)q(a);else{d=g(a.target);f.selection.select(a.target);a.preventDefault();h.bind({"mousemove.moveable-zone":F,"mouseup.moveable-zone":q,"keydown.moveable-zone":G,"mouseover.moveable-zone":k});var b=d.offset();t=a.pageX;u=a.pageY;y=b.top-u;z=b.left-t;r=!0;a=d;l=a.attr("style")||"";d=a}}function G(a){27==a.keyCode&&(j.cancelScrolling(),h.unbind(".moveable-zone"),f.undoManager.undo(),f.selection.select(d[0]),f.selection.collapse(!1),
d=null)}function k(){h.find(".mceSelected").removeClass("mceSelected")}function F(a){var b;if(r){b=Math.abs(t-a.pageX);var e=Math.abs(u-a.pageY);if(b<A&&e<A)return;AJS.Rte.BookmarkManager.storeBookmark();f.undoManager.beforeChange();f.undoManager.typing=!0;f.undoManager.add();(b=f.selection.getSel())&&b.removeAllRanges&&b.removeAllRanges();d.css({position:"absolute",width:d.css("width"),"max-width":"50%"});AJS.Confluence.PropertyPanel.current&&AJS.Confluence.PropertyPanel.destroy();d.detach();AJS.Rte.Cursor.fixCursorTargets(AJS.Rte.getEditor().getBody());
m.append(d);var n=d,o=function(){return h.find("#move-indicator")},q=function(a,b){var c=g(h[0].elementFromPoint(a,b)),i=!0;if(c.is(s)&&"move-indicator"!==c.attr("id")&&!(c.is("td.wysiwyg-macro-body")&&"PLAIN_TEXT"===c.closest("table").attr("data-macro-body-type")||c.is("img")&&!n.is("img"))){i=c;if(c.is("img")){var d;d=c.offset();d=a+h.scrollLeft()-d.left;c=c.width()}else d=v(c,b),c=c.height();c=d<c/2;return{target:i,before:c}}if(k?c.is(B):c.is(C)){c=c.is("div.cell")?c.children("div.innerCell").first():
c;if(0>v(c.children().first(),b))c=c.children().first();else{d=c.children().last();i=v(d,b);d=d.height();if(0<i-d)c=c.children().last();else{if(0<o().length&&0<o().parent(c).length)return null;i=c;c=n.parent(s);c.length||(c=i.find(s).last());c.length||(c=m.find(s).last())}i=!1}return{target:c,before:i}}return null},v=function(a,d){var c=a.offset();return d+h.scrollTop()-c.top},k=!!m.children(".contentLayout,.contentLayout2").length;p={positionNear:function(a,d){var c;if(c=q(a,d)){var b=c.target;c=
c.before;if("move-indicator"!==b.attr("id")){var e=o();if(!b.is(D)||!b.find(e).length){e.length?e.detach():e=g('<span id="move-indicator">|</span>');if(b.is(D)){var n=b.children().first();n.is(H)&&(b=n)}!b.is("img")&&AJS.Rte.Cursor.isTextContainerEmpty(b[0])?b.prepend(e):b.is(I)?c?b.prepend(e):b.append(e):c?b.before(e):b.after(e)}}}},replaceWith:function(b){var a=o();if(a.length){var c;if(c=b.is(J))c=a.parent(),c=k?c.is(B):c.is(C);c&&(b=g("<p></p>").append(b));a.replaceWith(b);AJS.Rte.showElement(b);
f.selection.select(b[0]);f.selection.collapse(!0)}else AJS.debug("No cursor - abort drop"),f.undoManager.undo();AJS.Rte.Cursor.fixCursorTargets(AJS.Rte.getEditor().getBody())},destroy:function(){var b=o();b.length&&(b.remove(),AJS.Rte.Cursor.fixCursorTargets(AJS.Rte.getEditor().getBody()))}};r=!1}a.preventDefault();d.hide();var e=a.clientY,l;b=w.length;e=Math.max(e,0);e<b?j.scrollUp(w[e]):(l=x.height(),e=Math.max(0,l-e),e<b?j.scrollDown(w[e]):j.cancelScrolling());p.positionNear(a.clientX,a.clientY);
b=Math.min(a.pageY+y,j.scrollHeight()-d.outerHeight());d.css({top:b,left:a.pageX+z,opacity:0.5});d.show()}function q(a){h.unbind(".moveable-zone");j.cancelScrolling();r?d=null:(a.preventDefault(),d.detach(),d.attr("style",l),p.replaceWith(d),p.destroy(),p=d=null,k(),f.undoManager.add())}if(!(g.browser.msie&&8>=g.browser.version)){var J="img",A=10,f,x,h,m,y,z,t,u,d,l,r,j,p,w=[800,800,400,400,400,300,300,300,300,300,300,300,300,300,300,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,100,
100,100,100,100,100,100,100,100,100,100,100,100,100,100],B="div.innerCell,div.cell",C="body",s="p,h1,h2,h3,h4,h5,h6,blockquote,li,td,th,img",D="li,td,th",H="p,h1,h2,h3,h4,h5,h6,blockquote",I="li,td,th";tinymce.create("tinymce.plugins.draggable",{init:function(a){f=a;a.onInit.add(function(){x=g(a.getWin());h=g(a.getDoc());m=g(a.getBody());g(x[0].parent);var b=g.browser.webkit?m:h.find("html"),d=0;j={scrollUp:function(a){d!==-a&&(d=-a,a=1E3*(b.scrollTop()/a),b.stop(!1,!1),b.animate({scrollTop:0},{duration:a}))},
scrollDown:function(a){var f;d!==a&&(d=a,f=b[0].scrollHeight,a=1E3*((f-b.scrollTop())/a),b.stop(!1,!1),b.animate({scrollTop:f},{duration:a}))},cancelScrolling:function(){d=0;b.stop(!0,!1)},scrollHeight:function(){return b[0].scrollHeight}};h.delegate("img.confluence-embedded-image,img.editor-inline-macro,table.wysiwyg-macro",{mousedown:E})})},getInfo:function(){return{longname:"Draggable objects (images, tables, placeholders) around the document via drag and drop",author:"Atlassian",authorurl:"http://www.atlassian.com",
version:"1.0"}}});tinymce.PluginManager.add("draggable",tinymce.plugins.draggable)}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-javascript-resources', location = 'editor/atlassian-editor.js' */
(function(c){function h(a){a=a&&a.jquery?a[0]:a;if(!a)return!1;if("BR"===a.tagName||3==a.nodeType)a=a.parentNode;a&&9==a.nodeType&&(a=null);return a}var f=parseInt(c.browser.version,10);AJS.Rte=c.extend({HIDDEN_CHAR:"\ufeff",ZERO_WIDTH_WHITESPACE:"&#x200b;",editorId:"wysiwygTextArea",isQuickEdit:!1,getEditor:function(){return tinyMCE.activeEditor},getCurrentBaseUrl:function(){if(!this.currentBaseUrl){var a=document.location;this.currentBaseUrl=a.protocol+"//"+a.hostname+(a.port?":"+a.port:"")}return this.currentBaseUrl},
showSelection:function(a){AJS.Rte.showElement(tinyMCE.activeEditor.selection.getStart(),a)},isAnyPartShown:function(a){a=h(a);if(!a)return AJS.debug("AJS.Rte.isAnyPartShown: no element to find"),!1;var b=c(a),a=b.offset().top,b=a+b.outerHeight(),d=c(AJS.Rte.getEditor().getDoc()).scrollTop(),e=d+c(AJS.Rte.getEditorFrame()).height();return b>d&&a<e},showElement:function(a,b){var d=h(a);if(!d)return AJS.log("AJS.Rte.showElement: no element to show - skipping"),!1;var e=c(d),d=AJS.Rte.getEditor(),g=c(d.getDoc()),
d=e.offset().top,e=d+e.outerHeight(),g=g.scrollTop(),f=g+c(AJS.Rte.getEditorFrame()).height(),i=function(){AJS.Rte.bindScroll("AJS.Rte.showElement",function(){AJS.Rte.unbindScroll("AJS.Rte.showElement");setTimeout(b,1)})};d<g?(AJS.Rte.scrollTo(d),b&&i()):e>f?(AJS.Rte.scrollTo(Math.min(d,g+e-f)),b&&i()):b&&b()},scrollTo:function(a){var b=AJS.Rte.getEditor(),a=Math.ceil(a);c(b.getDoc()).scrollTop(a)},bindScroll:function(a,b){var d=AJS.Rte.getEditor();c(document).add(d.getDoc()).add(d.getWin()).bind("scroll."+
a,b)},unbindScroll:function(a){var b=AJS.Rte.getEditor();c(document).add(b.getDoc()).add(b.getWin()).unbind("scroll."+a)},getMainEditor:function(){var a=tinymce.EditorManager.editors[AJS.Rte.editorId];if(!a)throw Error("Main editor has not been initialised yet and is therefore not accessible via tinymce.EditorManager.editors");return a},getEditorContainer:function(){return c("#wysiwyg")},getEditorFrame:function(){return c("#"+AJS.Rte.getEditor().id+"_ifr")[0]},getEditorTable:function(){return c("#"+
AJS.Rte.getEditor().id+"_tbl")},webResourcePath:"/download/resources/com.atlassian.confluence.tinymceplugin%3Atinymceeditor/",getResourceUrlPrefix:function(){this.resourceUrlPrefix||(this.resourceUrlPrefix=this.getCurrentBaseUrl()+AJS.Meta.get("editor-plugin-resource-prefix"));return this.resourceUrlPrefix},getTinyMceBaseUrl:function(){this.absoluteUrl||(this.absoluteUrl=this.getResourceUrlPrefix()+this.webResourcePath+"tinymcesource/");return this.absoluteUrl},getMinEditorHeight:function(){return+AJS.Meta.get("min-editor-height")},
getTinyMceEditorMinHeight:function(a){var a=a||0,b=AJS.Rte.getMinEditorHeight(),d=0;if(b)return b;c("#editor-precursor,#header-precursor,#header").each(function(){d+=c(this).outerHeight(!0)});return c(window).height()-d-a},fixEditorFocus:function(){AJS.log("WARNING: The fixEditorFocus method has been deprecated and it will be removed in an upcoming Confluence release.");if(tinyMCE.isGecko&&!isNaN(f)&&30>f){var a=AJS.Rte.getEditor().getBody();AJS.log("Fixing FF cursor positioning");"true"==a.contentEditable&&
(a.contentEditable=!1,a.contentEditable=!0)}},editorFocus:function(a){if(a&&!a.destroyed){var b;b=a.dom.getRoot();tinymce.isWebKit&&!c(b).parents("body").length&&(b=c(a.getBody()).find("p:first-child")[0]);b?(a.selection.select(b,1),a.selection.collapse(1),b.focus()):AJS.log("editorFocus was called with an invalid node");a.getBody().focus();a.getWin().focus()}}},AJS.Rte);tinymce.VK=jQuery.extend({BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46,
META:91},tinymce.VK)})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-javascript-resources', location = 'editor/atlassian-editor-content.js' */
(function(f){AJS.Rte.Content={offset:function(a){var a=f(a).offset(),c=f(AJS.Rte.getEditorFrame()),d=c.offset(),b=c[0].contentWindow.document,e=f(AJS.Rte.getEditor().getBody()),c=jQuery.support.boxModel&&b.documentElement.scrollTop||e.scrollTop(),b=jQuery.support.boxModel&&b.documentElement.scrollLeft||e.scrollLeft();return{top:a.top-c+d.top,left:a.left-b+d.left}},getSelectedText:function(){var a=AJS.Rte.getEditor().selection;return a.getRng().text||a.getSel()&&a.getSel().toString&&a.getSel().toString()||
""},setHtml:function(a){a&&AJS.Rte.getEditor().setContent(a)},getHtml:function(){return""+AJS.Rte.getEditor().getContent()},isEmpty:function(){var a=AJS.Rte.getEditor().getContent().replace("&nbsp;"," ");return!AJS.$.trim(a)},editorHasContentChanged:function(){return AJS.Rte.getEditor().isDirty()},editorResetContentChanged:function(){AJS.Rte.getEditor().setDirty(!1)},getChildIndex:function(a,c){for(var d=a.childNodes,b=0,e=d.length;b<e;b++)if(d[b]==c)return b;return-1}}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-javascript-resources', location = 'bookmark/atlassian-editor-bookmark-manager.js' */
(function(){var b;AJS.Rte.BookmarkManager={storeBookmark:function(){var a=tinyMCE.activeEditor,c=tinyMCE.DOM.getViewPort(tinyMCE.activeEditor.getWin());a.focus();a=a.selection.getRng();a=a.cloneRange&&"function"==typeof a.cloneRange?a.cloneRange():a.duplicate&&a.duplicate()||a;b={scrollX:c.x,scrollY:c.y,range:a}},restoreBookmark:function(){var a=tinyMCE.activeEditor.selection,c=tinyMCE.activeEditor.getWin();b&&(c.scrollTo(b.scrollX,b.scrollY),c.focus(),a.setRng(b.range))}}})();
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-javascript-resources', location = 'support/atlassian-editor-support.js' */
(function(){AJS.Rte.Support={inlineTasks:function(){var a=AJS.Meta.get("use-inline-tasks");return"true"===a||!0===a}}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-javascript-resources', location = 'event/tinyMce-eventDelegator.js' */
AJS.Rte.EventDelegator=function(h){var c={},f={},i=function(d,b){var a,e;for(e in c)if(c.hasOwnProperty(e)&&c[e].isEnabled)for(var g=0,f=c[e].events.length;g<f;g++)a=c[e].events[g],-1<a.type.toLowerCase().indexOf(b.type)&&(a.shouldTrigger(d,b)?a.callback.apply(this,[b.target]):a.missed&&a.missed())};return{addEventsForComponent:function(d,b){d in c||(c[d]={},c[d].events=[],c[d].isEnabled=!0);for(var a=0,e=b.length;a<e;a++)b[a].type in f||(f[b[a].type]=!0,h[b[a].type].add(i)),"function"!=typeof b[a].shouldTrigger&&
function(c){b[a].shouldTrigger=function(a,b){return b.target.tagName.toLowerCase()==c}}(b[a].shouldTrigger),c[d].events.push(b[a])},disableEventsForComponent:function(d){for(var b=0,a=c.length;b<a;b++)if(d in c)return c[d].isEnabled=!1,!0;return!1},enableEventsForComponent:function(d){for(var b=0,a=c.length;b<a;b++)if(d in c)return c[d].isEnabled=!0;return!1}}};
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-javascript-resources', location = 'oninit/tinymce-cursor-fixes.js' */
(function(g){function j(a){if(0==g(a).closest("td").length)return!0;for(a=a.parentNode;"td"!=a.nodeName.toLowerCase();){if(g(a).prevAll().contents().filter(function(){return 3==this.nodeType}).length)return!1;a=a.parentNode}return!0}function k(a,b,e){if(b.compareEndPoints)return a=a.getBody().createTextRange(),a.moveToElementText(e),a.collapse(1),0===b.compareEndPoints("StartToStart",a)&&j(e);if(!a.selection.getSel().isCollapsed)return!1;e=b.startContainer;if(3==e.nodeType)return!e.previousSibling&&
0===b.startOffset&&j(e);if(g(e).is("p:first-child"))return 0===b.startOffset;if(g(e).is(".wysiwyg-macro-body"))return 1==b.startOffset&&3==b.startContainer.childNodes[0].nodeType&&"\n"==b.startContainer.childNodes[0].nodeValue}function i(a,b,e){if(b.compareEndPoints)return a=a.getBody().createTextRange(),a.moveToElementText(e),a.collapse(0),0===b.compareEndPoints("EndToEnd",a);if(!a.selection.getSel().isCollapsed)return!1;e=b.endContainer;return 3==e.nodeType?e.wholeText.length==b.endOffset:g(e.childNodes[b.endOffset]).is(":last-child")}
function h(a,b,e){var c=a.dom.create("p",0,tinymce.isIE?"&nbsp;":'<br data-mce-bogus="1" />');e?b.after(c):b.before(c);a.selection.select(c,!0);a.selection.collapse()}AJS.Rte=AJS.Rte||{};AJS.Rte.Cursor=AJS.Rte.Cursor||{};g.extend(AJS.Rte.Cursor,{insertParagraph:h,isCursorAtStart:k,isCursorAtEnd:i});AJS.bind("init.rte",function(){var a=AJS.Rte.getEditor();tinymce.isIE&&a.onKeyPress.add(function(b,a){var c=b.selection,d=c.getNode();if(13==a.keyCode&&"P"==d.nodeName&&b.dom.is(d,":first-child")&&tinymce.confluence.MacroUtils.isInMacro(d)){var f=
b.dom.create("p","&#x200b");b.dom.insertAfter(f,d);c.select(f,1);c.collapse();return tinymce.dom.Event.cancel(a)}});tinymce.isGecko&&a.onKeyPress.add(function(b,a){var c,d,f;a.charCode==g.ui.keyCode.SPACE&&(c=b.selection.getNode(),d=g(c).closest("a"),f=b.selection.getRng(),d.length&&i(b,b.selection.getRng(),c)&&(f.setStartAfter(d[0]),f.setEndAfter(d[0]),b.selection.setRng(f),b.selection.collapse()))});a.onKeyPress.addToTop(function(b,a){if(13==a.keyCode&&!a.shiftKey){var c=b.selection.getNode(),d=
g(c).closest("pre");if(d.length&&!tinymce.confluence.MacroUtils.isInMacro(d)&&i(b,b.selection.getRng(),c))return h(b,d,!0),tinymce.dom.Event.cancel(a);d=g(c).closest("blockquote");if(d.length){var f=g(c).closest("p");if(f.is(":first-child")&&k(b,b.selection.getRng(),c))return h(b,d,!1),tinymce.dom.Event.cancel(a);if(c=f.is(":last-child"))c=f.contents(),c=!c.length||1==c.length&&(c.is("br")||"&nbsp;"==c.html()||160==c.text().charCodeAt(0)||3==c[0].nodeType&&c[0].nodeValue==AJS.Rte.HIDDEN_CHAR)?!0:
!1;if(c)return b.dom.remove(f[0],!1),h(b,d,!0),tinymce.dom.Event.cancel(a)}}return!0})})})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-javascript-resources', location = 'tinymce3/plugins/highlightnode/editor_plugin_src.js' */
(function(b){tinymce.create("tinymce.plugins.ShowCurrentNode",{init:function(f){AJS.debug("Hightlight Current Node Plugin");var h="strong em u s sub sup a code h1 h2 h3 h4 h5 h6 pre".split(" "),e={strong:"Bold",em:"Italic",u:"Underline",s:"Strikethrough",sub:"subscript",sup:"superscript"};f.onNodeChange.add(function(a,c,d){c=b(d);$oldCurrentElement=b(".highlight-marker",a.getBody());a=-1!=b.inArray(d.nodeName.toLowerCase(),h)&&!(d.nodeName.toLowerCase()in e&&!a.queryCommandState(e[d.nodeName.toLowerCase()]))&&
!(!(d.nodeName.toLowerCase()in e)&&!a.formatter.match(d.nodeName.toLowerCase()));if(!c.hasClass("highlight-marker")||!a)$oldCurrentElement&&$oldCurrentElement.removeClass("highlight-marker"),a&&c.addClass("highlight-marker")});var g=function(a){$highlightedElement=b(".highlight-marker",a);$highlightedElement.each(function(){b(this).removeClass("highlight-marker")})};b(document).bind("mode-changed",function(a,c){"preview"===c&&g(b("iframe").contents().find("#content"))});f.onSaveContent.add(function(a,
c){$content=b("<div>"+c.content+"</div>");g($content);c.content=$content[0].innerHTML})},getInfo:function(){return{longname:"Atlassian Show Current Node",author:"Atlassian",authorurl:"http://www.atlassian.com",version:tinymce.majorVersion+"."+tinymce.minorVersion}}});AJS.DarkFeatures.isEnabled("highlightnode")&&tinymce.PluginManager.add("highlightnode",tinymce.plugins.ShowCurrentNode)})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-javascript-resources', location = 'tinymce3/plugins/iosediting/editor_plugin_src.js' */
(function(a){tinymce.create("tinymce.plugins.iOSEditing",{init:function(){tinymce.isIDevice&&setTimeout(function(){a(AJS.Rte.getEditor().getBody()).addClass("ios")},0)},getInfo:function(){return{longname:"iOS Comments Plugin",author:"Atlassian",authorurl:"http://www.atlassian.com",version:tinymce.majorVersion+"."+tinymce.minorVersion}}});tinymce.PluginManager.add("iosediting",tinymce.plugins.iOSEditing)})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-javascript-resources', location = 'tinymce3/overrides/DOMUtils.js' */
(function(d){d.prototype.getRoot=function(){var a=AJS.Rte.getEditor(),c=a.dom,b=c.settings;if(!(b=b&&c.get(b.root_element)))a=$(a.selection.getNode()).closest("div.innerCell"),b=0<a.length?a[0]:c.doc.body;return b};d.prototype.setRoot=function(a){AJS.Rte.getEditor().dom.settings.root_element=a}})(tinymce.dom.DOMUtils);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-javascript-resources', location = 'toolbar/toolbar-configuration-manager.js' */
(function(e){AJS.Confluence._ToolbarConfigurationManager=function(c){var d={Formatting:".rte-toolbar-group-formatting",Style:".rte-toolbar-group-style",Indentation:".rte-toolbar-group-indentation",Lists:".rte-toolbar-group-lists",Tasks:".rte-toolbar-group-task-lists",Justification:".rte-toolbar-group-justification",Links:".rte-toolbar-group-link",Table:".rte-toolbar-group-table",Insert:".rte-toolbar-group-insert",Undo:".rte-toolbar-group-undo",PageLayouts:"#page-layout-2-group",SearchReplace:".rte-toolbar-group-searchreplace",
Help:".rte-toolbar-group-help"};return{configureToolbar:function(a){if(!1===a)c.hide();else{var a=a||{},b;for(b in a)a.hasOwnProperty(b)&&d[b]&&!1===a[b]&&e(d[b],c).hide()}}}}})($);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-javascript-resources', location = 'loader/tinymce-bootstrap.js' */
(function(b,j){var h={atlassian:!0,keep_values:!0,convert_urls:!0,relative_urls:!1,remove_script_host:!1,button_tile_map:!0,gecko_spellcheck:!0,apply_source_formatting:!1,list_outdent_on_enter:!0,visual:!1,confluence_table_style:"confluenceTable",confluence_table_cell_style:"confluenceTd",confluence_table_heading_style:"confluenceTh",confluence_table_default_rows:4,confluence_table_default_cols:3,confluence_table_default_heading:!0,cleanup:!0,cleanup_on_startup:!0,fix_list_elements:!1,fix_table_elements:!0,
valid_elements:"@[id|class|style|title|wysiwyg|dir<ltr?rtl|lang|xml::lang|onclick|ondblclick|onmousedown|onmouseup|onmouseover|onmousemove|onmouseout|onkeypress|onkeydown|onkeyup],a[*],strong/b,em/i,s,u,#p[align|user],-ol[type|compact],-ul[type|compact],li,br,img[imagetext|longdesc|usemap|src|border|alt=|title|hspace|vspace|width|height|align],-sub,-sup,-blockquote[cite|markup],-table[*],-tr[rowspan|width|height|align|valign|bgcolor|background|bordercolor],tbody,thead,tfoot,#td[colspan|rowspan|width|height|align|valign|bgcolor|background|bordercolor|scope],#th[colspan|rowspan|width|height|align|valign|scope],caption,div[*],#span[*],-code,#pre[*],address,-h1,-h2,-h3,-h4,-h5,-h6,hr[size|noshade],-font[face|size|color],dd,dl,dt,cite,abbr,acronym,del[datetime|cite],ins[datetime|cite],object[classid|width|height|codebase|*],param[name|value],embed[type|width|height|src|*],map[name],area[shape|coords|href|alt|target],bdo,button,col[align|char|charoff|span|valign|width],colgroup[align|char|charoff|span|valign|width],dfn,fieldset,form[action|accept|accept-charset|enctype|method],input[accept|alt|checked|disabled|maxlength|name|readonly|size|src|type|value],kbd,label[for],legend,noscript,optgroup[label|disabled],option[disabled|label|selected|value],q[cite],samp,select[disabled|multiple|name|size],small,textarea[cols|rows|disabled|name|readonly],tt,var,big",
extended_valid_elements:"img[*],time[class|datetime|contenteditable|onselectstart|unselectable|oncontrolselect]",formats:{removeformat:[{selector:"h1,h2,h3,h4,h5,h6,pre",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0,block:"*"},{selector:"address,article,b,big,blockquote,center,cite,code,date,dd,del,dfn,dl,dt,em,embed,font,footer,header,hgroup,i,ins,kbd,link,menu,nav,object,param,q,s,samp,script,section,small,strike,strong,style,sub,sup,time,tt,u,var",remove:"all",split:!0,expand:!1,block_expand:!0,
deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"table",attributes:["cellpadding","cellspacing","border"],split:!1,expand:!1,deep:!0},{selector:"*",attributes:["style","color","bgcolor","title","lang"],split:!1,expand:!1,deep:!0}]},forced_root_block:"p",force_p_newlines:!0,force_br_newlines:!1,oninit:"AJS.Rte.BootstrapManager.onInit",object_resizing:!1,paste_preprocess:function(a,c){b(document).trigger("prePaste",[a,c])},paste_postprocess:function(a,
c){b("img",c.node).not("[data-emoticon-name]").not(".editor-inline-macro").not(".confluence-embedded-image").not(".template-variable").addClass("confluence-embedded-image confluence-external-resource");b(document).trigger("postPaste",[a,c])}};AJS.Rte.BootstrapManager={_tinyMceHasInit:!1,_beforeInitCallbacks:[],_tinymcePluginInits:[],_settings:null,isInitComplete:function(){return this._tinyMceHasInit},isEditorActive:function(){return this.isInitComplete()&&tinyMCE&&tinyMCE.activeEditor},onInit:function(){this._tinyMceHasInit=
!0;var a=AJS.Rte.getEditor();AJS.trigger("init.rte",{editor:a});!1!==AJS.Meta.get("editor-auto-focus")?AJS.Rte.editorFocus(a):AJS.debug("Bootstrap: editor-auto-focus=false. Do not focus the editor automatically.")},addOnInitCallback:function(a){if(b.isFunction(a))this._tinyMceHasInit?a():AJS.bind("init.rte",a);else throw Error("Attempt made to register an oninit callback that is not a function. Received: "+a);},addBeforeInitCallback:function(a){this._beforeInitCallbacks.push(a)},addTinyMcePluginInit:function(a){this._tinymcePluginInits.push(a)},
preInitialise:function(a){this._settings=b.extend(h,a)},initialise:function(a){if(this._settings){var a=b.extend({},a),c=b.extend({},this._settings);AJS.Rte.isQuickEdit=a.isQuickEdit||!1;AJS.debug("Bootstrap:initialise: Initialising TinyMce version "+tinymce.majorVersion+"."+tinymce.minorVersion);b.each(this._beforeInitCallbacks,function(a,b){b(c)});for(var d=0,e=this._tinymcePluginInits.length;d<e;d++)if("function"==typeof this._tinymcePluginInits[d])this._tinymcePluginInits[d](c);d=c.language;AJS.debug("Bootstrap: set locale translations");
void 0==typeof TinyMCELang&&AJS.log("ERROR: could not find the TinyMCE language pack");var h=RegExp(TinyMCELang.ctrl_key+"\\+","g"),k=RegExp(TinyMCELang.shift_key+"\\+","g"),i=function(a){return a.replace(h,"\u2318").replace(k,"\u21e7")},f;for(f in TinyMCELang){e=TinyMCELang[f];if("object"==typeof e)for(var g in e)tinymce.isMac&&(e[g]=i(e[g]));tinymce.EditorManager.addI18n(d+"."+f,TinyMCELang[f])}tinymce.isMac&&b("#rte-toolbar .toolbar-item, #rte-toolbar .dropdown-item, #rte-savebar .aui-button").each(function(){var a=
b(this),c=a.attr("title"),d=a.attr("data-tooltip");c&&a.attr("title",i(c));d&&a.attr("data-tooltip",i(d))});(new AJS.Confluence._ToolbarConfigurationManager(b("#toolbar"))).configureToolbar(a.toolbar);f=a.plugins;a=a.excludePlugins;g=c.plugins.split(",");g=j.chain(g).union(f).difference(a).value();a=g.join(",");c.plugins=a;tinyMCE.init(c);AJS.Rte.Content.editorResetContentChanged();b(AJS.Rte.getEditorFrame()).attr("tabindex",100);tinymce.isIE&&b(AJS.Rte.getEditorFrame()).attr("hidefocus","hidefocus");
AJS.trigger("rte-ready")}else AJS.log("Bootstrap:initialise: No settings found. Has preInitialise been called?")}}})(AJS.$,window._);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-javascript-resources', location = 'utils/environment.js' */
define("confluence-editor/utils/environment",function(){return{isMac:0<=navigator.platform.indexOf("Mac"),transformCmdKeyTextBasingOnOS:function(a){var b="Ctrl";return this.isMac?a.replace(RegExp(b,"g"),"\u2318"):a}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-javascript-resources', location = 'utils/editor-utils.js' */
AJS.EditorUtils=function(f){var e={isCursorAtStartOf:function(b,a){return a.collapsed&&e.isRangeAtStartOf(b,a)},isRangeAtStartOf:function(b,a){if(!a||!a.startContainer)throw Error("range is invalid. received: "+a);if(!b||!b.nodeType)throw Error("context is invalid. received: "+b);var c=a.startContainer,d;if(3==c.nodeType){if(0!==a.startOffset)return!1;d=c}else if(d=c.childNodes[a.startOffset],void 0===d&&0<c.childNodes.length)return!1;c=new tinymce.dom.TreeWalker(d,b);do d=c.prev(!0);while(d&&3==
d.nodeType&&0===d.nodeValue.length);return void 0===d},isCursorAtEndOf:function(b,a){return a.collapsed&&e.isRangeAtEndOf(b,a)},isRangeAtEndOf:function(b,a){if(!a||!a.endContainer)throw Error("range is invalid. received: "+a);if(!b||!b.nodeType)throw Error("container is invalid. received: "+b);var c=a.endContainer;if(3==c.nodeType){if(a.endOffset!=c.nodeValue.length)return!1}else c=c.childNodes[0===a.endOffset?a.endOffset:a.endOffset-1];var c=new tinymce.dom.TreeWalker(c,b),d;do d=c.next(!0);while(d&&
3==d.nodeType&&0===d.nodeValue.length);return void 0===d||"BR"==d.nodeName&&void 0===c.next(!0)},setCursorAtStartOfContents:function(b){if(!b)throw Error("element is required.");if(1!==b.nodeType&&3!=b.nodeType)throw Error("invalid argument: expected a DOM element or text node, got: "+b);var a=tinymce.activeEditor,c=a.dom.createRng();f(b).is("br, img")?(c.setStartBefore(b),c.setEndBefore(b),a.selection.setRng(c)):(a.selection.select(b,!0),a.selection.collapse(!0))}};return e}(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-javascript-resources', location = 'tinymce3/plugins/table/atlassian-table.js' */
(function(g){function k(){return AJS.$("#table-highlight-group").attr("data-highlight-colour")||""}function n(c){var h,g,d,e;h=0;for(g=c.length;h<g;h++)if(d=c.eq(h),e=d.attr("data-highlight-colour"))d.removeClass("highlight-"+e),d.removeAttr("data-highlight-colour")}function m(c,h){if(c.length){var f=AJS.Rte.getEditor(),d;d=g(AJS.Rte.getEditor().selection.getNode());d=d.length?d[0]===c[0]?!0:!!d.closest(c).length:!1;for(var e=c[0],i=e.ownerDocument.createElement(h),l=e.attributes,j=0,k=l.length;j<
k;j++){var a=l[j];i.setAttribute(a.nodeName,a.nodeValue)}for(;e.hasChildNodes();)i.appendChild(e.firstChild);e.parentNode.replaceChild(i,e);d&&(f.selection.select(i,!0),f.selection.collapse());return g(i)}}AJS.Rte=AJS.Rte||{};AJS.Rte.Table={convertToNormalCells:function(c){c.filter("th").each(function(){var c=g(this),c=m(c,"td");c.removeClass("confluenceTh");c.addClass("confluenceTd")})},convertToHeadingCells:function(c){c.filter("td").each(function(){var c=g(this),c=m(c,"th");c.removeClass("confluenceTd");
c.addClass("confluenceTh")})},areCellsHeadings:function(c){var g=c.filter("th").length;return c.length==g},isColumnHeading:function(c,h){var f=g(c).children("tbody").children("tr");return 1==f.length?!1:f.children().nthCol(h).filter("th").length===f.length},areCellsHighlighted:function(c){var g=c.filter("td[data-highlight-colour],th[data-highlight-colour]");if(c=c.length===g.length)a:{var c=k(),f,d,e;f=0;for(d=g.length;f<d;f++)if(e=g.eq(f).attr("data-highlight-colour")||"",e!==c){c=!1;break a}c=!0}return c},
isColumnHighlighted:function(c,h){var f=g(c).children("tbody").children("tr").children("th,td").nthCol(h),d=f.filter("td[data-highlight-colour],th[data-highlight-colour]").length;if(f.length!==d)return!1;for(var d=f.eq(0).attr("data-highlight-colour"),e=1,i=f.length;e<i;e++)if(d!==f.eq(e).attr("data-highlight-colour"))return!1;return!0}};AJS.bind("init.rte",function(c,h){function f(){var a=e.selection.getNode();return g(a).parents("table").is(".confluenceTable")?!e.dom.getParent(a,"UL,OL"):!1}var d,
e=h.editor,i=function(a){return g(a.selection.getNode()).closest("th.confluenceTh,td.confluenceTd")},l=function(a){var b=g(a.getBody()).find("th.confluenceTh.mceSelected,td.confluenceTd.mceSelected");return b.length?b:i(a)},j=function(a){return 0===a.find("tbody > tr > td").length};e.addCommand("mceInsertTable",function(){AJS.Rte.BookmarkManager.storeBookmark();if(!d){d=new AJS.Dialog({width:400,height:230,id:"insert-table-dialog",keypressListener:function(b){27===b.keyCode&&d.hide()}});d.addHeader("Insert Table");
d.addPanel("Panel 1","panel1");d.getCurrentPanel().html(AJS.renderTemplate("tableForm","4","3"));g("#tinymce-table-form input[type='text']").click(function(){g(this).select()});var a=function(b){b.hide();e.plugins.table.insertTable()};g("#tinymce-table-form").keypress(function(b){13==b.keyCode&&a(d)});d.addButton("Insert",a,"ok");d.addCancel("Cancel",function(b){b.hide();return!1},"cancel")}d.show()});e.addCommand("confTableRowToggleHeading",function(){var a;a=g(this.getBody()).find("td.mceSelected,th.mceSelected");
a.length||(a=g(this.selection.getNode()));a=a.closest("tr");for(var b=a.parent(),b=b.is("tbody")?a.parent().parent():b;0!=a.length&&!b.is(".confluenceTable");)a=b.closest("tr"),b=a.parent(),b=b.is("tbody")?a.parent().parent():b;var b=a.children("td,th"),c=0;AJS.Rte.Table.areCellsHeadings(b)?(j(a.closest("table"))||(b=b.filter(function(){var b=g(this),a=b.closest("table");c+=b.attr("colspan")||1;return!AJS.Rte.Table.isColumnHeading(a,c)})),AJS.Rte.Table.convertToNormalCells(b)):AJS.Rte.Table.convertToHeadingCells(b)});
e.addCommand("confTableColumnToggleHeading",function(){var a;a=l(this);var b=g([]);a.each(function(){var a=g(this),c=a.index()+1,a=a.closest("table.confluenceTable").children("tbody").children("tr");b=b.add(a.children().nthCol(c))});a=b;AJS.Rte.Table.areCellsHeadings(a)?(j(a.closest("table"))||(a=a.filter(function(){var a=g(this).parent("tr").children(),b=a.filter("th");return a.length!==b.length})),AJS.Rte.Table.convertToNormalCells(a)):AJS.Rte.Table.convertToHeadingCells(a)});e.addCommand("confTableSelectionToggleHighlight",
function(a,b){var c=b&&b.alwaysHighlight,e=l(this);e.filter("td");e.filter("th");AJS.Rte.Table.areCellsHighlighted(e)&&!c||AJS.$("#table-highlight-group").attr("data-remove-highlight")?n(e):(n(e),k()&&(c=k(),e.attr("data-highlight-colour",c),e.addClass("highlight-"+c)))});(tinymce.isIE8||!AJS.DarkFeatures.isEnabled("confluence-table-enhancements.auto-row.disabled"))&&e.onKeyDown.add(function(a,b){function c(a,b){var d=e.selection.getRng(!0),g=d.startContainer;if(d.collapsed){var f;a:{for(f=g;f!=a;){if(f[b]){f=
!1;break a}f=f.parentNode}f=!0}return 3==g.nodeType?f&&d.startOffset==("nextSibling"==b?g.length:0):g==a?d.startOffset==("nextSibling"==b?g.childNodes.length-1:0):f}return!1}if((37==b.keyCode||39==b.keyCode)&&!b.shiftKey){var d=i(this);if(d.length){var d=d[0],f;if(f=37==b.keyCode)if(f=c(d,"previousSibling"))f=e.selection.getNode(),f=g(f).parents("table").first().find("tr:first-child").children().first()[0]!=f;if(f)return e.execCommand("mceTableMoveCaretToPrevCell"),tinymce.dom.Event.cancel(b);if(f=
39==b.keyCode){if(d=c(d,"nextSibling"))d=e.selection.getNode(),d=g(d).parents("table").first().find("tr:last-child").children().last()[0]!=d;f=d}if(f)return e.execCommand("mceTableMoveCaretToNextCell"),tinymce.dom.Event.cancel(b)}}});if(tinymce.isWebKit){var m=g('<style type="text/css"></style>').html(".confluenceTable th,td { white-space: pre-wrap; }");g(e.getDoc().head).append(m)}e.onKeyDown.add(function(a,b){if(9==b.keyCode&&f())return e.execCommand(b.shiftKey?"mceTableMoveCaretToPrevCell":"mceTableMoveCaretToNextCell"),
b.preventDefault(),!1});AJS.DarkFeatures.isEnabled("confluence-table-enhancements.auto-row.disabled")||(e.onClick.add(function(){var a=i(this);a.hasClass("numberingColumn")&&!a.hasClass("confluenceTh")&&e.execCommand("mceTableMoveCaretToNextCell")}),e.onKeyDown.addToTop(function(a,b){if((38==b.keyCode||40==b.keyCode)&&f()&&i(this).hasClass("numberingColumn"))return e.execCommand("mceTableMoveCaretToNextCell"),b.preventDefault(),!1}))});if(!AJS.DarkFeatures.isEnabled("confluence-table-enhancements.auto-row.disabled")){var o=
function(){g(AJS.Rte.getEditor().getDoc().body).find(".confluenceTd.numberingColumn").attr("contenteditable","false")};AJS.bind("quickedit.success",o);AJS.bind("init.rte",o)}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-javascript-resources', location = 'tinymce3/plugins/table/atlassian-table-picker.js' */
(function(f){function D(){d.css({top:f("#insert-table-dropdown").outerHeight(!0)});D=function(){}}function i(){if(!d.hasClass("hidden")){var a=f(AJS.Rte.getEditor().getDoc());j.unbind(".atlassian-table-picker");a.unbind(".atlassian-table-picker");d.addClass("hidden");p.addClass("hidden");x.removeClass("active")}}function E(a,b){AJS.debugEnabled()&&AJS.debug("setSize("+[a,b]+")");a==e&&b==q||(a=Math.max(1,Math.min(F,a)),b=Math.max(1,Math.min(G,b)),m=Math.max(M,a),r=Math.max(N,b),e=a,q=b,s.width(m*
k+1),s.height(r*l+O),t(n,m,r),t(y,e,q),t(z,m,1),t(u,e,1),H(),I.text(e+" x "+q))}function H(){z.toggleClass("hidden",!g);u.toggleClass("hidden",!g)}function t(a,b,c){a.width(k*b+1);a.height(l*c+1)}function P(a){var b=n.offset(),c=b.top-j.scrollTop(),f=b.left-j.scrollLeft(),b=c+n.outerHeight(!0)+v,d=b-l-v,g=f+n.outerWidth(!0)+v,i=g-k-v,e=a.clientY,h=a.clientX,a=m,o=r;AJS.debugEnabled()&&AJS.debug("[mouseX,spLeft,spRightShrink,spRightGrow][mouseY,spTop,spBottomShrink,spBottomGrow] = "+[h,f,i,g]+"/"+
[e,c,d,b]);h>g?(c=~~((h-g)/k+1),a+=c,AJS.debugEnabled()&&AJS.debug("grow: xdelta = "+c)):h<i&&(c=~~((h-i)/k-1),a+=c,AJS.debugEnabled()&&AJS.debug("shrink: xdelta = "+c));e>b?(c=~~((e-b)/l+1),o+=c,AJS.debugEnabled()&&AJS.debug("grow: ydelta = "+c)):e<d&&(c=~~((e-d)/l-1),o+=c,AJS.debugEnabled()&&AJS.debug("shrink: ydelta = "+c));E(a,o)}function J(a){AJS.debugEnabled()&&AJS.debug("enableHeading("+a+")");a!=g&&(g=a,H())}function A(a){var b;b=~~(~~(a.offsetX||a.originalEvent.layerX)/k)+1;var c=~~(~~(a.offsetY||
a.originalEvent.layerY)/l)+1;b=1>b||b>F||1>c||c>G?null:{width:b,height:c};a.preventDefault();AJS.debug("insertTable: size = "+(b&&[b.width,b.height]));if(b){i();a=b.width;c=b.height;b=g;var d,e;AJS.debugEnabled()&&AJS.debug("shamefulInsertTable("+a+","+c+","+b+")");d=f("#tinymce-table-form");d.length?(d.find('input[name="rows"]').val(c),d.find('input[name="cols"]').val(a)):(a=AJS.renderTemplate("tableForm",c,a),e=f("<div></div>").addClass("hidden"),e.append(a),K.append(e));f("#table-heading-checkbox").prop("checked",
b);AJS.Rte.BookmarkManager.restoreBookmark();tinymce.activeEditor.undoManager.beforeChange();tinymce.activeEditor.plugins.table.insertTable();e&&e.remove()}}function w(a){AJS.debugEnabled()&&AJS.debug("key: "+a.charCode+"/"+a.keyCode+"/"+a.shiftKey);AJS.debug("key: "+a.charCode+"/"+a.keyCode+"/"+a.shiftKey);f.browser.msie?(16==a.keyCode&&J(!a.shiftKey),27==a.keyCode&&i()):(0==a.charCode&&J(!a.shiftKey),27==a.keyCode&&0==a.charCode&&i())}function Q(){i()}var L={};AJS.Rte.TablePicker={bindToControl:function(){AJS.debugEnabled()&&
AJS.debug("Table Picker - bind to control");j=f(document);K=j.find("body");h=f("#insert-table-dropdown");B=f("#rte-button-insert-table");x=h.find(".aui-dd-parent");d=f("#table-picker-container");s=d.find(".table-picker-box");n=d.find(".picker-cell");z=d.find(".picker-heading");y=d.find(".picker-selected-cell");u=d.find(".picker-selected-heading");I=s.find(".desc");p=f("<div></div>").attr("id","table-picker-backdrop").addClass("hidden").appendTo(h);B.click(function(a){a.preventDefault();C||(AJS.Rte.BookmarkManager.storeBookmark(),
D(),g=!0,E(1,1),a=f(AJS.Rte.getEditor().getDoc()),j.bind("mousemove.atlassian-table-picker",P),j.bind("keydown.atlassian-table-picker",w),j.bind("keyup.atlassian-table-picker",w),a.bind("keydown.atlassian-table-picker",w),a.bind("keyup.atlassian-table-picker",w),p.removeClass("hidden"),d.removeClass("hidden"),x.addClass("active"),B.focus())});p.click(Q);y.click(A);u.click(A)},disable:function(){C=!0;h.addClass("disabled")},enable:function(){C=!1;h.removeClass("disabled")},close:i,_internal:L};var j,
K,p,h,B,x,d,s,n,z,y,u,I,M=4,N=4,F=15,G=20,k=25,l=17,O=20,v=0,m,r,e,q,g,C=!1;L.insertTable=A})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-javascript-resources', location = 'tinymce3/plugins/table/atlassian-table-migration.js' */
(function(d){AJS.Rte.Migration=AJS.Rte.Migration||{};AJS.Rte.Migration.Table={migrateTables:function(b){var b=b||d(AJS.Rte.getEditor().getBody()),f=(new Date).getTime(),e=b.find("td.highlight,th.nohighlight,td[data-highlight-class],th[data-highlight-class]"),b=(new Date).getTime();e.each(function(){var a=d(this),b=a.attr("data-highlight-class"),c;if(a.hasClass("nohighlight"))a.removeClass("nohighlight"),AJS.Rte.Table.convertToNormalCells(a);else if(a.hasClass("highlight")&&(a.removeClass("highlight"),
b||(a.attr("data-highlight-colour","grey"),a.addClass("highlight-grey"))),b){a.removeClass(b);a.removeAttr("data-highlight-class");switch(b){case "warning":c="red";break;case "success":c="green";break;case "note":c="yellow";break;case "info":c="blue"}c&&(a.addClass("highlight-"+c),a.attr("data-highlight-colour",c))}});e=(new Date).getTime();AJS.debug("Migration duration: selector: "+(b-f)+"ms; migration: "+(e-b)+"ms")}};d(document).bind("postPaste",function(){AJS.Rte.Migration.Table.migrateTables()});
AJS.bind("init.rte",function(){AJS.Rte.Migration.Table.migrateTables()})})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-javascript-resources', location = 'tinymce3/plugins/placeholder/editor_plugin_src.js' */
(function(e){var n={click:!1,keypress:!0},f=tinymce.VK,h=tinymce.dom.Event,o="template"===AJS.Meta.get("content-type"),k={UL:!0,OL:!0,LI:!0,TABLE:!0,TBODY:!0};tinymce.create("tinymce.plugins.TextPlaceholderPlugin",{init:function(i){i.onInit.add(function(){if(o)AJS.trigger("cursor-target-refresh"),e("#rte-button-insert-placeholder").click(function(b){b.preventDefault();AJS.Rte.Placeholder.insertTextPlaceHolder()}),i.onKeyPress.addToTop(function(b,c){if(13==c.keyCode&&!c.shiftKey){var a=b.selection.getNode(),
d=e(a).closest(".text-placeholder");if(d.length&&AJS.Rte.Cursor.isCursorAtEnd(b,b.selection.getRng(),a))return AJS.Rte.Cursor.insertParagraph(b,d,!0),tinymce.dom.Event.cancel(c)}});else{var p=function(){var b=e(AJS.Rte.getEditor().getBody()).find(".text-placeholder.selected");b.length&&AJS.Rte.getEditor().selection.select(b[0])},j=function(b){b.onKeyDown.remove(l);b.onKeyPress.remove(g);b.onClick.remove(g)},l=function(b,c){var a=e(b.getBody()).find(".text-placeholder.selected");if(a.length){if(c.keyCode===
f.LEFT||c.keyCode===f.UP){for(var a=a[0],d=a.previousSibling;a&&!d;)a=a.parentNode,d=a.previousSibling;if(d){for(a=d;k[a.nodeName]&&a.lastChild;)a=a.lastChild;b.selection.select(a.lastChild||a);b.selection.collapse(!1);b.selection.normalize()}return h.cancel(c)}if(c.keyCode===f.RIGHT||c.keyCode===f.DOWN){a=a[0];for(d=a.nextSibling;a&&!d;)a=a.parentNode,d=a.nextSibling;if(d){for(a=d;k[a.nodeName]&&a.firstChild;)a=a.firstChild;b.selection.select(a.firstChild||a);b.selection.collapse(!0);b.selection.normalize()}return h.cancel(c)}if(c.keyCode===
f.BACKSPACE||c.keyCode===f.DELETE)return AJS.Rte.Placeholder.removePlaceholder(a),h.cancel(c)}else j(b)},g=function(b,c){if(!tinymce.isGecko||c.isChar||"keypress"!==c.type){var a=e(b.getBody()).find(".text-placeholder.selected");if(a.length){if(a.length){var d=a.attr("data-placeholder-type"),f=c.type,g=AJS.Rte.Placeholder.getPlaceholderType(d);e.extend({},n,g&&g.activation)[f]&&(AJS.Rte.Placeholder.removePlaceholder(a),AJS.trigger("editor.text-placeholder.activated",{placeholderType:d||"",triggerEvent:c}))}}else j(b)}};
i.onNodeChange.addToTop(function(b,c,a){c=e(a).closest(".text-placeholder");e(b.getBody()).find(".text-placeholder.selected").not(c).removeClass("selected");c.length?(c.hasClass("selected")||(c.addClass("selected"),b.onKeyDown.addToTop(l),b.onKeyPress.addToTop(g),b.onClick.addToTop(g)),setTimeout(p,0)):j(b)})}var m=e(AJS.Rte.getEditor().getDoc()).find("head");e.browser.msie?m.append('<style type="text/css">.wiki-content .text-placeholder { display: inline; }</style>'):m.append('<style type="text/css">.wiki-content .text-placeholder { display: inline-block; }</style>')})},
getInfo:function(){return{longname:"Text Placeholder Plugin",author:"Atlassian",authorurl:"http://www.atlassian.com",infourl:"http://www.atlassian.com",version:"1.0"}}});tinymce.PluginManager.add("textplaceholders",tinymce.plugins.TextPlaceholderPlugin)})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-javascript-resources', location = 'tinymce3/plugins/placeholder/placeholder.js' */
(function(f){var d=[],c={};AJS.Rte=AJS.Rte||{};AJS.Rte.Placeholder=AJS.Rte.Placeholder||{};var e,g;tinymce.isIE?(e="\ufeff{$caret}",g="<p>{$caret}</p>"):g=e=tinymce.isWebKit?"\ufeff{$caret}<br>":"\ufeff{$caret}";f.extend(AJS.Rte.Placeholder,{insertTextPlaceHolder:function(a){var b=f("<div></div>").append(AJS.Rte.Placeholder.Templates.textPlaceholder({content:e}));a&&b.find(".text-placeholder").html(a);AJS.Rte.getEditor().execCommand("mceInsertContent",false,b.html())},removePlaceholder:function(a){var b=
AJS.Rte.getEditor(),d=f(b.getBody()),c=e;a.parent()[0].nodeName==="LI"&&(c=g);a.replaceWith('<span id="placeholder-cursor">&nbsp;</span>');a=d.find("#placeholder-cursor")[0];b.selection.select(a.firstChild);b.execCommand("mceInsertContent",false,c);b.dom.remove(a,true)},addPlaceholderType:function(a){if(!a||!a.type)AJS.log("PlaceHolderRegister : unable to register new place holder type !");else{d.push(a);c[a.type]=a}},getPlaceholderTypes:function(){return[].concat(d)},getPlaceholderType:function(a){return c[a]}})})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-javascript-resources', location = 'tinymce3/plugins/placeholder/tinyMce-property-panel-text-placeholders.js' */
(function(f){AJS.Confluence.PropertyPanel.TextPlaceholder={name:"textplaceholder",canHandleElement:function(a){return a.hasClass("text-placeholder")},handle:function(a){function g(a,b,c){return{className:"text-placeholder-property-panel-type-item text-placeholder-property-panel-type-"+a,text:b,tooltip:c,selected:h===a,click:function(){"default"===a?d.removeAttr("data-placeholder-type"):d.attr("data-placeholder-type",a);var b=f(".text-placeholder-property-panel-type-"+a);b.parent().find(".text-placeholder-property-panel-type-item").removeClass("selected");
b.addClass("selected")}}}if(!("click"!=a.e.type&&"mouseup"!=a.e.type)){var i=AJS.Rte.Placeholder.getPlaceholderTypes(),a=a.containerEl,d=f(a),h=d.attr("data-placeholder-type"),c=[],b=g("default","Text","Instructional text is replaced with empty content when a person types.");b.selected=!h;c.push(b);for(var e=0,j=i.length;e<j;e++)b=i[e],c.push(g(b.type,b.label,b.tooltip));c.push(null);c.push({className:"text-placeholder-property-panel-remove-button",
text:"Remove",click:function(){AJS.Confluence.PropertyPanel.destroy();AJS.Rte.Placeholder.removePlaceholder(d)}});AJS.Confluence.PropertyPanel.createFromButtonModel("textplaceholder",a,c,{anchorIframe:AJS.Rte.getEditorFrame()})}}}})(AJS.$);AJS.bind("init.rte",function(){"template"===AJS.Meta.get("content-type")&&AJS.trigger("add-handler.property-panel",AJS.Confluence.PropertyPanel.TextPlaceholder)});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-javascript-resources', location = 'tinymce3/plugins/placeholder/placeholder.soy' */
// This file was automatically generated from placeholder.soy.
// Please don't edit this file by hand.

if (typeof AJS == 'undefined') { var AJS = {}; }
if (typeof AJS.Rte == 'undefined') { AJS.Rte = {}; }
if (typeof AJS.Rte.Placeholder == 'undefined') { AJS.Rte.Placeholder = {}; }
if (typeof AJS.Rte.Placeholder.Templates == 'undefined') { AJS.Rte.Placeholder.Templates = {}; }


AJS.Rte.Placeholder.Templates.textPlaceholder = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<span class="text-placeholder">', opt_data.content, '</span>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-javascript-resources', location = 'tinymce3/plugins/imageproperties/js/image-properties-dialog.js' */
Confluence.Editor.ImageProps=function(e){function k(){d||(d=e("#image-properties-tab-items > div").map(function(){var a=e(this);return{key:a.text(),weight:a.attr("data-weight"),label:this.title}}).sort(function(a,b){return a.weight-b.weight}));return d}function l(){var a=c.popup.element,b=650/60,f=e('<div class="image-properties-loading-blanket"><div class="loading-data"></div></div>').appendTo(a.find(".dialog-page-body")),g=f.find(".loading-data");f.css({width:f.parent().width(),height:a.height()});
g.css({marginTop:-60,marginLeft:-60});g.spin({color:"#666",width:b,radius:25,length:25,top:0,left:0,zIndex:0,speed:1.042});var a=[],h;for(h in i)b=i[h],(b=b.saveFn&&b.saveFn())&&b.done&&a.push(b);e.when.apply(e,a).done(function(){var a=c.popup.element.find(".image-properties-loading-blanket .loading-data");a.css({marginTop:"",marginLeft:""});a.spinStop();a.closest(".image-properties-loading-blanket").remove();c.hide().remove()})}function n(){c.hide().remove()}var c,d,i={},m;return{init:function(){m||
(d=null,0<k().length&&(m=!0,AJS.Confluence.PropertyPanel.Image.pluginButtons.push(null,{create:function(){return{className:"image-properties",text:"Properties",tooltip:"Set additional image properties",click:function(a,b){AJS.trigger("analyticsEvent",{name:"confluence.editor.image-properties-trigger"});AJS.Confluence.PropertyPanel.destroy();e("#image-properties-dialog").remove();c=new AJS.ConfluenceDialog({id:"image-properties-dialog",onSubmit:l});
AJS.trigger("dialog-created.image-properties",{img:b});c.popup.element.attr("data-tab-default","0");c.addHeader("Image Properties");c.addSubmit("Save",l);c.addCancel("Cancel",n);for(var f=c,g=k(),h=0;h<g.length;h++){var d=g[h],j=i[d.key];j&&f.addPanel(d.label,j.content,j.panelClass,d.key)}1===g.length&&f.popup.element.find(".dialog-page-menu").show();AJS.trigger("dialog-before-show.image-properties");
c.show()}}}})))},registerPanel:function(a,b,c,d){i[a]={content:b,panelClass:c,saveFn:d}}}}(AJS.$);AJS.toInit(Confluence.Editor.ImageProps.init);AJS.bind("quickedit.success",Confluence.Editor.ImageProps.init);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-javascript-resources', location = 'unpublished-changes/unpublished-changes.soy' */
// This file was automatically generated from unpublished-changes.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.UnpublishedChanges == 'undefined') { Confluence.Templates.UnpublishedChanges = {}; }


Confluence.Templates.UnpublishedChanges.lozenge = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<a id="unpublished-changes-lozenge" href="#" class="view-diff-link" title="', soy.$$escapeHtml(opt_data.tooltip), '"><span class="aui-lozenge aui-lozenge-complete aui-lozenge-subtle unpublished-changes-lozenge">', soy.$$escapeHtml(opt_data.label), '</span></a>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-javascript-resources', location = 'unpublished-changes/unpublished-changes.js' */
(function(){tinymce.create("tinymce.plugins.UnpublishedChanges",{init:function(a){var d=$(Confluence.Templates.UnpublishedChanges.lozenge({tooltip:"This page has unpublished changes",label:"Unpublished"})),e=function(b){b=_.isBoolean(b)?b:!0;Confluence.Editor.UI.setButtonState(b,$("#rte-button-publish"))},f=function(b,c){var a=c||function(){};(_.isBoolean(b)?b:1)?d.addClass("visible").fadeIn("fast",a):d.fadeOut("fast",function(){$(this).hide().removeClass("visible");
a()})},c={show:function(){d.hasClass("visible")||f(!0,e)},hide:function(){f(!1);e(!1)}};AJS.bind("rte-ready",function(){var b=$("#content-title-div");c.hide();d.insertBefore(b);d.tooltip();$("#content-title").on("keydown change",c.show);a.onChange.add(c.show);a.onKeyDown.add(c.show);a.onLoad.add(function(){$(a.startContent).text().trim()&&0<AJS.Meta.get("draft-id")&&c.show()});d.on("mouseenter.tipsy",function(){AJS.trigger("analytics",{name:"confluence.editor.unpublished-changes.lozenge.hover"})});
a.addCommand("mceConf.UnpublishedChangesLozenge.show",c.show);a.addCommand("mceConf.UnpublishedChangesLozenge.hide",c.hide)})},getInfo:function(){return{longname:"Unpublished Changes",author:"Atlassian",authorurl:"http://www.atlassian.com",version:tinymce.majorVersion+"."+tinymce.minorVersion}}});tinymce.PluginManager.add("unpublishedchanges",tinymce.plugins.UnpublishedChanges)})();
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-javascript-resources', location = 'tinymce3/settings/tinymce-default-settings.js' */

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-javascript-resources', location = 'loader/tinymce-adapter.js' */
(function(d){AJS.toInit(function(){var a;a=Confluence.getContextPath();a={autoresize_min_height:"100%",width:"100%",height:"100%",document_base_url:Confluence.getBaseUrl()+"/",plugins:"auiwindowmanager,table,emotions,confluence,macroplaceholder,customtoolbar,insertwikimarkup,propertypanel,keyboardshortcuts,confmonospace,confcharmap,lists,confluencepaste,cursorTarget,confluencecleanupplugin,conftable,confluencepastetableplugin,confluencepastemacroplugin,pagelayoutplugin,highlightnode,iosediting,autoconvert,confluencelist,deletecommand,draggable,confluencesortabletablesplugin,textplaceholders,linkbrowser,insertfiles",
theme:"atlassian",theme_advanced_buttons1:"formatselect,bold,italic,underline,strikethrough,forecolor,separator,table,row_before,row_after,delete_row,col_before,col_after,delete_col,delete_table,separator,bullist,numlist,tasklist,outdent,indent,blockquote,justifyleft,justifycenter,justifyright,justifyfull,separator,sup,sub,separator,undo,redo,separator,confimage,conf_macro_browser,separator,code,customtoolbar,help,monospace,separator,searchreplace,linkbrowserButton",theme_advanced_toolbar_location:"top",
theme_advanced_toolbar_align:"left",theme_advanced_resizing:!1,theme_advanced_resize_horizontal:!1,theme_advanced_statusbar_location:"none",theme_advanced_path:!1,theme_advanced_blockformats:"p,h1,h2,h3,h4,h5,h6,pre,blockquote",mode:"specific_textareas",editor_selector:"tinymce-editor",body_class:"wiki-content",popup_css:!1,content_css:!1,editor_css:!1,custom_undo_redo:!0,custom_undo_redo_levels:20,context_path:a,plugin_action_base_path:a+"/plugins/tinymce",editor_plugin_action_base_path:a+"/plugins/editor/tinymce",
page_id:AJS.Meta.get("page-id"),draft_type:null,form_name:AJS.Meta.get("form-name"),space_key:encodeURI(AJS.Meta.get("space-key")),confluence_popup_width:620,confluence_popup_height:550,editor_id:"wysiwygTextarea"};0==a.page_id&&(a.page_id=null,a.draft_type=AJS.Meta.get("draft-type"));AJS.Rte.BootstrapManager.addBeforeInitCallback(function(a){a.contentCssTags=d("script[title='editor-css']").html();a.language=AJS.Meta.get("action-locale");var b=AJS.Meta.get("min-editor-height");if(b)a.autoresize_min_height=
b});var b=!(AJS.Meta.get("remote-user")&&AJS.Meta.get("confluence.prefs.editor.disable.autocomplete"));b&&(a.plugins+=",autocomplete,autocompletelink,autocompletemedia");if(AJS.Meta.get("auto-start")){b&&(a.plugins+=",autocompletemacro");b="0"===""+AJS.Meta.get("page-id");var c=AJS.Meta.get("content-type"),b="template"===c?AJS.Confluence.Editor._Profiles.createProfileForTemplateEditor():"comment"===c?AJS.Confluence.Editor._Profiles.createProfileForCommentEditor():AJS.Confluence.Editor._Profiles.createProfileForPageEditor({versionComment:!b,
notifyWatchers:!b});if(b=b.plugins.join(","))a.plugins+=","+b;AJS.Rte.BootstrapManager.preInitialise(a);AJS.Rte.BootstrapManager.initialise()}else AJS.Rte.BootstrapManager.preInitialise(a)})})($);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-javascript-resources', location = 'com/atlassian/confluence/tinymceplugin/tinymce-adapter-deprecated.js' */
(function(f){AJS.Editor.Adapter={putCursorAtPostionInElement:function(a,b,c){var d=tinyMCE.activeEditor,e=d.getDoc(),a=f(a,c||e),a=a.contents().filter(function(){return 3==this.nodeType})[0],c=d.selection.getRng(!0);c.setStart(a,b);c.setEnd(a,b);d.selection.setRng(c)},storeCurrentSelectionState:AJS.Rte.BookmarkManager.storeBookmark,restoreSelectionState:AJS.Rte.BookmarkManager.restoreBookmark,insertLink:function(a,b){b&&AJS.Rte.getEditor().selection.select(b);Confluence.Editor.LinkAdapter.setLink(a)},
getCurrentBaseUrl:AJS.Rte.getCurrentBaseUrl,addOnInitCallback:function(a){AJS.debug("Adding callback to AJS.Rte.BootstrapManager. AJS.Rte.BootstrapManager = "+AJS.Rte.BootstrapManager);AJS.Rte.BootstrapManager.addOnInitCallback(a)},bindScroll:function(a,b){AJS.Rte.bindScroll(a,b)},unbindScroll:function(a){AJS.Rte.unbindScroll(a)},getTinyMceHasInit:function(){return AJS.Rte.BootstrapManager.isInitComplete()},getEditor:AJS.Rte.getEditor,addTinyMcePluginInit:function(a){AJS.Rte.BootstrapManager.addTinyMcePluginInit(a)},
isExternalLink:function(a){return Confluence.Link.isExternalLink(a)},isInMacroPlaceholder:function(a){return tinymce.confluence.MacroUtils.isInMacro(a)},initialiseTinyMce:function(){var a=AJS.Editor.Adapter;tinymce.EditorManager.preInit.apply(tinymce.EditorManager);tinymce.EditorManager.init(a.settings)},offset:function(a){AJS.Rte.Content.offset(a)},getSelectedText:function(){return AJS.Rte.Content.getSelectedText()},setEditorValue:function(a){AJS.Rte.Content.setHtml(a)},getEditorHTML:function(){return""+
AJS.Rte.getEditor.getContent()},editorHasContentChanged:function(){return AJS.Rte.getEditor().isDirty()},editorResetContentChanged:function(){AJS.Rte.getEditor().setDirty(!1)},getChildIndex:function(a,b){for(var c=a.childNodes,d=0,e=c.length;d<e;d++)if(c[d]==b)return d;return-1},getMainEditor:function(){return AJS.Rte.getMainEditor()},getEditorContainer:function(){return AJS.Rte.getEditorContainer()},getEditorFrame:function(){return AJS.Rte.getEditorFrame()},getEditorTable:function(){return AJS.Rte.getEditorTable()},
webResourcePath:AJS.Rte.webResourcePath,getResourceUrlPrefix:function(){return AJS.Rte.getResourceUrlPrefix()},getTinyMceBaseUrl:function(){return AJS.Rte.getTinyMceBaseUrl()},getMinEditorHeight:function(){return AJS.Rte.getMinEditorHeight()},getTinyMceEditorMinHeight:function(a){return AJS.Rte.getTinyMceEditorMinHeight(a)}}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-javascript-resources', location = 'analytics/editor-analytics.js' */
(function(i){function b(a,c){if(a&&(d[a]?d[a]++:d[a]=1,c)){var b=a+"Size";d[b]=d[b]?d[b]+c:c}}function f(){d.pageID=AJS.Meta.get("page-id");AJS.Confluence.Analytics.publish("confluence.editor.action",d);d={};g=setTimeout(f,h)}var h=6E4;AJS.bind("rte-ready",function(){g=setTimeout(f,h);tinymce.activeEditor.onExecCommand.add(function(a,c){b(j[c])});tinymce.activeEditor.onKeyPress.add(function(){b("keys")});tinymce.activeEditor.onKeyUp.add(function(a,c){46===c.keyCode?b("delete",e):8===c.keyCode&&b("backspace",
e);e=a.selection.getContent().length});tinymce.activeEditor.onMouseUp.add(function(a){e=a.selection.getContent().length});tinymce.activeEditor.onPaste.add(function(a,c){b("paste",c.clipboardData.getData("text/plain").length)});i("#rte-button-insert-table").on("click",function(){b("insert.table")});window.addEventListener("beforeunload",function(){clearTimeout(g);f()})});var g,d={},e=0,j={Bold:"bold",confCharmap:"insert.symbol",confMonospace:"monospace",confTableRowToggleHeading:"table.row.toggle.heading",
confTableColumnToggleHeading:"table.column.toggle.heading",confTableSelectionToggleHighlight:"table.selection.toggle.highlight",ForeColor:"foreground.color",FormatBlock:"format.block",Indent:"indent",InsertHorizontalRule:"insert.horizontal.rule",InsertOrderedList:"insert.ordered.list",InsertUnorderedList:"insert.unordered.list",InsertWikiMarkup:"insert.wiki.markup",Italic:"italic",JustifyCenter:"justify.center",JustifyLeft:"justify.left",JustifyRight:"justify.right",mceConfimage:"insert.files.images",
mceConflink:"insert.link",mceConfMacroBrowser:"open.other.macros.browser",mceEmotion:"insert.emoticon",mceTableCopyRow:"table.copy.row",mceTableCutRow:"table.cut.row",mceTableDelete:"table.delete",mceTableDeleteCol:"table.delete.column",mceTableDeleteRow:"table.delete.row",mceTableInsertColAfter:"table.insert.column.after",mceTableInsertColBefore:"table.insert.column.before",mceTableInsertRowAfter:"table.insert.row.after",mceTableInsertRowBefore:"table.insert.row.before",mceTableMergeCells:"table.merge.cells",
mceTablePasteRowBefore:"table.paste.row.before",mceTableSplitCells:"table.split.cells",mcePageLayoutsToolbar:"page.layouts.toolbar.toggle",mcePageLayoutAddSection:"page.layouts.toolbar.add.section",mcePageLayoutRemoveSection:"page.layouts.toolbar.remove.section",mcePageLayoutMoveSectionDown:"page.layouts.toolbar.movedown.section",mcePageLayoutMoveSectionUp:"page.layouts.toolbar.moveup.section",mcePageLayoutChangeSection:"page.layouts.toolbar.change.section",mceConfShortcutDialog:"open.help.dialog",
mceSearchReplaceToolbar:"search.replace.toolbar.toggle",mceConfSearchClose:"search.replace.toolbar.close",mceConfSearch:"search",mceConfReplace:"replace",mceConfReplaceAll:"replace.all",Outdent:"outdent",Redo:"redo",Strikethrough:"strikethrough",subscript:"subscript",superscript:"superscript",Underline:"underline",Undo:"undo",InsertInlineTaskList:"insert.inline.tasklist",InsertInlineTaskListNoToggle:"insert.inline.tasklist.no.toggle"}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.extra.jira:jiraAnalytics', location = '/jira/jiraanalytics.js' */
AJS.Editor.JiraAnalytics={events:{paste:{key:"confluence.jira.plugin.paste"},search:{key:"confluence.jira.plugin.search"},trigger:{key:"confluence.jira.plugin.trigger"},customizeColumn:{key:"confluence.jira.plugin.column.customize"}},linkTypes:{jqlDirect:"direct_jql",jql:"jql_link",xml:"xml_link",rss:"rss_link",filter:"filter_link"},getDisplayType:function(a){var b="single";if(a.container.find("#opt-table").is(":checked")){b="table"}else{if(a.container.find("#opt-total").is(":checked")){b="count"}}return b},setupAnalyticPanelActionObject:function(a,c,b){return{name:a.analyticPanelActionName,properties:this.setupPanelActionProperties(a,c,b)}},setupPanelActionProperties:function(a,d,b){var c={};if(d===AJS.Editor.JiraConnector.source.instructionalText){if(a.analyticPanelActionName==="confluence.jira.plugin.issuecreated"){c.issueType=a.container.find('select[name="issuetype"] :selected').text()}else{if(a.analyticPanelActionName==="confluence.jira.plugin.searchadded"){c.display=this.getDisplayType(a)}}c.label=b}return c},triggerPasteEvent:function(a){AJS.EventQueue=AJS.EventQueue||[];AJS.EventQueue.push({name:AJS.Editor.JiraAnalytics.events.paste.key,properties:a})},triggerPannelActionEvent:function(a){AJS.EventQueue=AJS.EventQueue||[];AJS.EventQueue.push(a)},triggerSearchEvent:function(a){AJS.EventQueue=AJS.EventQueue||[];AJS.EventQueue.push({name:AJS.Editor.JiraAnalytics.events.search.key,properties:a})},triggerMarkupEvent:function(a){this.triggerSearchEvent(a)},triggerPannelTriggerEvent:function(a){AJS.EventQueue=AJS.EventQueue||[];AJS.EventQueue.push({name:AJS.Editor.JiraAnalytics.events.trigger.key,properties:a})},triggerCustomizeColumnEvent:function(a){AJS.EventQueue=AJS.EventQueue||[];AJS.EventQueue.push({name:AJS.Editor.JiraAnalytics.events.customizeColumn.key,properties:a})}};(function(a){a.aop.before({target:AJS.MacroBrowser,method:"loadMacroInBrowser"},function(b,c){if(b&&b[0]&&b[0].pluginKey=="confluence.extra.jira"){AJS.Editor.JiraAnalytics.triggerPannelTriggerEvent({source:AJS.Editor.JiraConnector.source.macroBrowser})}});a.aop.before({target:tinymce.confluence.macrobrowser,method:"macroBrowserToolbarButtonClicked"},function(b,c){if(b&&b[0]&&b[0].presetMacroMetadata&&b[0].presetMacroMetadata.pluginKey=="confluence.extra.jira"){AJS.Editor.JiraAnalytics.triggerPannelTriggerEvent({source:AJS.Editor.JiraConnector.source.editorBraceKey})}});AJS.bind("init.rte",function(){a.aop.before({target:tinyMCE.activeEditor,method:"execCommand"},function(l,k){if(l&&l[0]=="mceInsertContent"&&l[2]){var m=l[2];var e=AJS.$("<div></div>").html(m).children().first();var c=e.attr("data-macro-name");var h=["jira","jiraissues"];if(a.inArray(c,h)==-1){return}var j=AJS.Editor.JiraAnalytics;var n={source:"wiki_markup"};if(!e.attr("data-macro-parameters")){return}var g=e.attr("data-macro-parameters").split("|");for(var f=0;f<g.length;f++){var d=a.trim(g[f]);if(d.indexOf("jql")==0||d.indexOf("jqlQuery")==0){n.type=j.linkTypes.jqlDirect;break}else{if(d.indexOf("url")==0){var b=a.trim(d.substring(d.indexOf("=")+1,d.length));n.type=AJS.JQLHelper.checkQueryType(b);break}else{if(d.indexOf("http")==0){var b=d;n.type=AJS.JQLHelper.checkQueryType(b);break}}}}if(typeof n.type==="undefined"){n.type=j.linkTypes.jqlDirect}j.triggerMarkupEvent(n)}})})})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.integration.jira.jira-integration-plugin:jira-create-issue-form', location = '/jira-create-issue-form/jira-create-issue-form.js' */
var jiraIntegration=window.jiraIntegration||{};jiraIntegration.JiraCreateIssueForm=(function(c,a){b.defaults={formClass:"jira-interation-create-issue-form",ignoreFieldsWithDefaultValue:true,excludedField:["project","issuetype","reporter"],renderSummaryAndDescription:false,get$unsupportedFieldMessage:function(d,e){return c(jiraIntegration.templates.jiraCreateIssueForm.unsupportedFieldsMessage({unsupportedFields:d,createIssueUrl:e}))},get$unexpectedError:function(d){return c(aui.message.error({content:AJS.escapeHtml(d)}))},get$unauthorizeMessage:function(d){return c(jiraIntegration.templates.jiraCreateIssueForm.authorize({extraClasses:"jira-oauth-dialog",applicationName:d}))},get$unsupportedServerMessage:function(d){return c(jiraIntegration.templates.jiraCreateIssueForm.unsupportedServerMessage({serverUrl:d}))}};function b(d){this.configuration=a.extend({},b.defaults,d);if(this.configuration.renderSummaryAndDescription){this.configuration.excludedField.push("summary","description")}this._init()}b.prototype._trigger=function(d,e){var f=this.configuration[d];if(f){f.apply(this,Array.prototype.slice.call(arguments,1))}};b.prototype._bindEventListener=function(){var d=this;this.defaultFields.server.on("change",function(g){d.resetForm();var f=this.value;d.currentServerId=f;if(f){d.formIsLoading(d.defaultFields.server);jiraIntegration.JiraCreateIssueForm.Data.isIssueCreationSupported(f).done(function(e){if(e){d._loadProjectData(f);d.formLoadingCompleted(d.defaultFields.server)}else{var h=jiraIntegration.JiraCreateIssueForm.Data.getServerById(f).displayUrl;d._handleUnsupportedServer(h)}}).fail(function(e){d._handleAjaxError(e)})}else{jiraIntegration.JiraCreateIssueForm.FieldHelper.resetSelectField(d.defaultFields.project);d.defaultFields.project.trigger("change")}d._trigger("onServerChanged",this.value)});this.defaultFields.project.on("change",function(){if(this.value){c('option[value=""]',d.defaultFields.project).remove();d._loadIssueType(d.defaultFields.server.val(),this.value)}else{jiraIntegration.JiraCreateIssueForm.FieldHelper.resetSelectField(d.defaultFields.issueType)}d.resetForm();d.defaultFields.issueType.trigger("change");d._trigger("onProjectChanged",this.value)});this.defaultFields.issueType.on("change",function(){d.resetForm();if(this.value){d._loadRequireFields()}else{d.$containerRequireField&&d.$containerRequireField.html("");c(".aui-message",this.formEl).remove()}d._trigger("onTypeChanged",this.value)})};b.prototype._init=function(){this.container=c(this.configuration.container);if(this.container.length){this._renderForm();this._bindEventListener();this._loadServerData()}else{throw new Error("container property should be defined.")}};b.prototype._renderForm=function(){this.formEl=c(jiraIntegration.templates.jiraCreateIssueForm.form({formClass:this.configuration.formClass}));if(this.configuration.renderSummaryAndDescription){this._renderSummaryAndDescription()}this.container.append(this.formEl);this.defaultFields=this._getDefaultFields();a.each(this.defaultFields,a.bind(function(d){this.createSelect2WithIcon(c(d))},this));this.$containerRequireField=c(".create-issue-required-fields",this.container);this._trigger("onFormRendered")};b.prototype._renderSummaryAndDescription=function(){var d=c(".create-issue-default-fields",this.formEl);d.append(aui.form.textField({labelContent:"Summary",isRequired:true,name:"summary"}));d.append(aui.form.textareaField({labelContent:"Description",name:"description"}))};b.prototype._getDefaultFields=function(){var d=c("."+this.configuration.formClass,this.configuration.container);return{server:c(".server-select",d),project:c(".project-select",d),issueType:c(".issuetype-select",d)}};b.prototype._loadServerData=function(){var d=this;this.formIsLoading(this.defaultFields.server);c.when(jiraIntegration.JiraCreateIssueForm.Data.loadServers()).then(function(e){d.formLoadingCompleted(d.defaultFields.server);d._loadServerDataComplete(e)})};b.prototype._loadRequireFields=function(){var e=this;var d={serverId:this.defaultFields.server.val(),projectKey:this.defaultFields.project.val(),issueType:this.defaultFields.issueType.val()};this.formIsLoading(this.defaultFields.issueType);var f=jiraIntegration.JiraCreateIssueForm.Data.getFieldMetadata(d);f.done(function(j){var g=e._getValidRequiredFields(j);if(e.configuration.renderSummaryAndDescription){var h=j.fields.description;var i=!!(h&&h.required);e._setDescriptionAsRequiredField(i)}e._renderRequireFields(g,d);e.formLoadingCompleted(e.defaultFields.issueType)}).fail(a.bind(e._handleAjaxError,this))};b.prototype._loadServerDataComplete=function(d){if(d.length){if(d.length===1){jiraIntegration.JiraCreateIssueForm.FieldHelper.hideField(this.defaultFields.server)}jiraIntegration.JiraCreateIssueForm.FieldHelper.fillSelectData(this.defaultFields.server,d,true);this._loadProjectData(d[0].id);this.currentServerId=d[0].id;this._hasMultiServer=d.length>1}else{this._handlerUnexpectedError("Don\'t have any JIRA server, please check the application link configuration.")}};b.prototype._loadProjectData=function(d){var e=this;this.formIsLoading(this.defaultFields.project);var f=jiraIntegration.JiraCreateIssueForm.Data.loadProjects(d);f.then(function(g){if(g.errors&&g.errors.length){var h=g.errors[0];if(h.authenticationUri){e._handleAuthorizeError(h)}else{e._handlerUnexpectedError(h.message)}}else{if(g.length){jiraIntegration.JiraCreateIssueForm.FieldHelper.fillSelectData(e.defaultFields.project,g);jiraIntegration.JiraCreateIssueForm.FieldHelper.resetSelectField(e.defaultFields.issueType)}else{e._handlerUnexpectedError("You do not have permission to create issues on this JIRA server.")}}e.formLoadingCompleted(e.defaultFields.project)},a.bind(e._handleAjaxError,this))};b.prototype._loadIssueType=function(e,d){var f=jiraIntegration.JiraCreateIssueForm.Data.getIssueTypes(e,d);jiraIntegration.JiraCreateIssueForm.FieldHelper.fillSelectData(this.defaultFields.issueType,f,true)};b.prototype._renderRequireFields=function(d,e){this.$containerRequireField.html("");var f=a.reject(d,jiraIntegration.fields.canRender);if(f.length){this._handleUnsupportedFields(f)}else{this.$containerRequireField.html(a.map(d,function(g){return jiraIntegration.fields.renderField(null,g,null,null)}).join(""));jiraIntegration.fields.attachFieldBehaviors(this.$containerRequireField,{serverId:e.serverId,projectKey:e.projectKey},null);this._trigger("onRequiredFieldsRendered",d,f)}};b.prototype._handlerUnexpectedError=function(e){var d=this.configuration.get$unexpectedError(e);c(".aui-message",this.formEl).remove();this.formEl.prepend(d);this.formLoadingCompleted();this.formHasError()};b.prototype._handleUnsupportedFields=function(d){d=a.map(d,function(f){return AJS.escapeHtml(f.name)});var e=this.configuration.get$unsupportedFieldMessage(d,this._getCreateJiraIssueUrl());c(".aui-message",this.formEl).remove();this.formEl.prepend(e);this._trigger("onError");this.formLoadingCompleted()};b.prototype._handleUnsupportedServer=function(d){var e=this.configuration.get$unsupportedServerMessage(d);c(".aui-message",this.formEl).remove();this.formEl.prepend(e);this.formLoadingCompleted();this.formHasError()};b.prototype._handleAjaxError=function(e){var d=this;if(e.status>=500&&e.status<600){d._handlerUnexpectedError("Received the following HTTP error code from the server"+":"+e.status)}d.formHasError()};b.prototype._handleAuthorizeError=function(f){var e=this;this.formHasError();var d=this.configuration.get$unauthorizeMessage(f.applicationName);this.formEl.append(d);c(".oauth-init",d).on("click",function(g){AppLinks.authenticateRemoteCredentials(f.authenticationUri,function(){e.resetForm();e._loadProjectData(e.currentServerId)},function(){e._handlerUnexpectedError(AJS.format("You have refused to permit access to {0}.",f.applicationName))});g.preventDefault()})};b.prototype._getCreateJiraIssueUrl=function(){var f=this.defaultFields.project.find("option:selected").val();var g=this.defaultFields.issueType.find("option:selected").val();var h=jiraIntegration.JiraCreateIssueForm.Data.getServerById(this.currentServerId).displayUrl;h=h+"/secure/CreateIssueDetails!Init.jspa?pid="+f+"&issuetype="+g;var e=this._getFieldValue("summary");if(e.length){h=h+"&summary="+encodeURIComponent(e)}var d=this._getFieldValue("description");if(d.length){h=h+"&description="+encodeURIComponent(d)}return h};b.prototype._getValidRequiredFields=function(d){var e=this;return a.filter(d.fields,function(h){var g=h.schema?(h.schema.system||h.schema.custom||h.schema.customId):h;var f=a.contains(e.configuration.excludedField,g);return(h.required&&!f&&!h.hasDefaultValue)})};b.prototype._getFieldValue=function(e){var d=c("[name='"+e+"']",this.formEl);return(d)?c.trim(d.val()):""};b.prototype._setDescriptionAsRequiredField=function(d){var e=c('.field-group [name="description"]',this.formEl).prev("label");e.find(".aui-icon.aui-icon-required").remove();if(d){e.append(aui.icons.icon({icon:"required"}))}};b.prototype.resetForm=function(){c(".aui-message",this.formEl).remove();c(".field-group",this.formEl).show();if(this.configuration.renderSummaryAndDescription){this._setDescriptionAsRequiredField(false)}if(!this._hasMultiServer){jiraIntegration.JiraCreateIssueForm.FieldHelper.hideField(this.defaultFields.server)}this.$containerRequireField.html("")};b.prototype.formHasError=function(){c(".field-group",this.formEl).hide();this.$containerRequireField.html("");jiraIntegration.JiraCreateIssueForm.FieldHelper.showField(this.defaultFields.server);jiraIntegration.JiraCreateIssueForm.FieldHelper.setFieldDisabled(c(".insert-issue-button"),true);this._trigger("onError");this.formLoadingCompleted()};b.prototype.getCurrentServer=function(){return jiraIntegration.JiraCreateIssueForm.Data.getServerById(this.currentServerId)};b.prototype.formIsLoading=function(d){if(d){jiraIntegration.JiraCreateIssueForm.FieldHelper.setIsLoading(d,true)}var e=c(":input",c(this.formEl));jiraIntegration.JiraCreateIssueForm.FieldHelper.setFieldDisabled(e,true)};b.prototype.formLoadingCompleted=function(d){if(d){jiraIntegration.JiraCreateIssueForm.FieldHelper.setIsLoading(d,false)}else{c(".aui-icon.aui-icon-wait",this.formEl).remove()}var e=c(":input",c(this.formEl));jiraIntegration.JiraCreateIssueForm.FieldHelper.setFieldDisabled(e,false)};b.prototype.createSelect2WithIcon=function(d){if(d.is(".server-select")){d.auiSelect2({minimumResultsForSearch:-1})}else{var e=d.is(".project-select")?{formatSelection:this.projectSelectFormat,formatResult:this.projectSelectFormat,extraAttributes:this.defaultFields}:{formatSelection:this.issueTypeSelectFormat,formatResult:this.issueTypeSelectFormat,minimumResultsForSearch:-1,extraAttributes:this.defaultFields};d.auiSelect2(e)}d.auiSelect2("val","")};b.prototype.projectSelectFormat=function(f){var e=this.extraAttributes.server.find("option:selected").val();var d=jiraIntegration.JiraCreateIssueForm.Data.getProjectIconUrl(e,f.id);return jiraIntegration.templates.fields.select2WithIconOption({optionValue:f.text,iconUrl:d,isProject:true})};b.prototype.issueTypeSelectFormat=function(g){var f=this.extraAttributes.server.find("option:selected").val();var d=this.extraAttributes.project.find("option:selected").val();var e=jiraIntegration.JiraCreateIssueForm.Data.getIssueTypeIconUrl(f,d,g.id);return jiraIntegration.templates.fields.select2WithIconOption({optionValue:g.text,iconUrl:e,isProject:false})};return b})(AJS.$,window._);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.integration.jira.jira-integration-plugin:jira-create-issue-form', location = '/jira-create-issue-form/jira-create-issue-form-data.js' */
var jiraIntegration=window.jiraIntegration||{};jiraIntegration.JiraCreateIssueForm=jiraIntegration.JiraCreateIssueForm||{};jiraIntegration.JiraCreateIssueForm.Data=(function(d){var l={};var b={};var o=AJS.contextPath()+"/plugins/servlet/jira-integration/icons?serverId={0}&iconType={1}&{2}";var h=[];function n(){return d.getJSON(AJS.contextPath()+"/rest/jira-integration/1.0/servers",function(p){if(p.length){d.each(p,function(q,r){l[r.id]=r})}})}function m(p){var q=(l[p])?l[p].projects:undefined;return q?d.Deferred().resolve(q):d.getJSON(AJS.contextPath()+"/rest/jira-integration/1.0/servers/"+p+"/projects",function(r){if(r.length){d.each(r,function(u,w){var v=_.filter(w.issuetypes,function(x){return !x.subtask});w.issueTypes=v;var t=[];_.each(v,function(x){t[x.id]=x.iconUrl});var s={iconUrl:AJS.format(o,p,"project",w.avatarUrls["16x16"].split("/secure/projectavatar?")[1]),issueTypes:t};h[a(p,w.id)]=s});if(!l[p]){l[p]={}}l[p].projects=r}})}function f(q,p){var r=_.find(k(q),function(s){return s.id===p});return r?r.issueTypes:[]}function g(p){var q=a(p.serverId,p.projectKey,p.issueType);if(!_.has(b,q)){return d.ajax({type:"GET",url:AJS.contextPath()+"/rest/jira-integration/1.0/servers/"+p.serverId+"/projects/"+p.projectKey+"/issue-types/"+p.issueType+"/fields-meta"}).pipe(function(r){b[q]=r;return b[q]})}else{return d.Deferred().resolve(b[q])}}function e(p){return l?l[p]:{}}function j(p){if(!l||!l[p]){return false}return(l[p].isSupported!=undefined)?d.Deferred().resolve(l[p].issueCreationSupported):d.ajax({type:"GET",url:AJS.contextPath()+"/rest/jira-integration/1.0/servers/"+p+"/features"}).pipe(function(q){if(q!=undefined){l[p].issueCreationSupported=_.contains(q,"CREATE_ISSUE")}return l[p].issueCreationSupported})}function k(p){return l&&l[p]?l[p].projects:[]}function i(q,p){var r=a(q,p);return h[r]?h[r].iconUrl:""}function c(r,q,s){var t=a(r,q);var p=h[t];return(p&&p.issueTypes[s])?p.issueTypes[s]:""}function a(q,p,r){return q+(p?"-"+p:"")+(r?"-"+r:"")}return{loadServers:n,loadProjects:m,getIssueTypes:f,getFieldMetadata:g,getServerById:e,getProjectIconUrl:i,getIssueTypeIconUrl:c,getProjects:k,isIssueCreationSupported:j}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.integration.jira.jira-integration-plugin:jira-create-issue-form', location = '/jira-create-issue-form/jira-create-issue-form-field-helper.js' */
var jiraIntegration=window.jiraIntegration||{};jiraIntegration.JiraCreateIssueForm=jiraIntegration.JiraCreateIssueForm||{};jiraIntegration.JiraCreateIssueForm.FieldHelper=(function(c,h){function e(j,l,k){var m=k?[]:[a(j)];c.each(l,function(n,p){var o={value:p.id,text:p.name,iconUrl:p.iconUrl?p.iconUrl:(p.avatarUrls?p.avatarUrls["16x16"]:"")};if(k&&n===0){o.selected=true}m.push(aui.form.optionOrOptgroup(o))});j.html(m.join(""));j.auiSelect2("val","")}function b(j){j.html(a(j));j.auiSelect2("val","")}function a(j){var k=j.attr("data-placeholder");return aui.form.optionOrOptgroup({value:"",text:k,iconUrl:""})}function i(j){j.parent().hide()}function d(j){j.parent().show()}function f(k,j){j?k.disable():k.enable()}function g(k,j){return j?k.after(aui.icons.icon({icon:"wait"})):k.next(".aui-icon.aui-icon-wait").remove()}return{fillSelectData:e,resetSelectField:b,hideField:i,showField:d,setFieldDisabled:f,setIsLoading:g}})(AJS.$,window._);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.integration.jira.jira-integration-plugin:jira-create-issue-form', location = '/jira-create-issue-form/jira-create-issue-form.soy' */
// This file was automatically generated from jira-create-issue-form.soy.
// Please don't edit this file by hand.

if (typeof jiraIntegration == 'undefined') { var jiraIntegration = {}; }
if (typeof jiraIntegration.templates == 'undefined') { jiraIntegration.templates = {}; }
if (typeof jiraIntegration.templates.jiraCreateIssueForm == 'undefined') { jiraIntegration.templates.jiraCreateIssueForm = {}; }


jiraIntegration.templates.jiraCreateIssueForm.form = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  aui.form.form({id: 'jira-create-form', extraClasses: opt_data.formClass, method: 'post', action: '#', content: '<fieldset class="create-issue-default-fields"><div class="field-group"><label>' + soy.$$escapeHtml("Server") + '<span class="aui-icon icon-required"> required</span></label><select class="jira-select2-drop-box server-select" name="server" data-placeholder="' + soy.$$escapeHtml("Select a server") + '"><option disabled selected value="">' + soy.$$escapeHtml("Select a server") + '</option></select></div><div class="field-group"><label>' + soy.$$escapeHtml("Project") + '<span class="aui-icon icon-required"> required</span></label><select class="jira-select2-drop-box project-select" name="project" data-placeholder="' + soy.$$escapeHtml("Select a project") + '"><option disabled selected value="">' + soy.$$escapeHtml("Select a project") + '</option></select></div><div class="field-group"><label>' + soy.$$escapeHtml("Issue Type") + '<span class="aui-icon icon-required"> required</span></label><select class="jira-select2-drop-box issuetype-select" name="issue-type" data-placeholder="' + soy.$$escapeHtml("Select an issue type") + '"><option disabled selected value="">' + soy.$$escapeHtml("Select an issue type") + '</option></select></div></fieldset><fieldset class="create-issue-required-fields"></fieldset>'}, output);
  return opt_sb ? '' : output.toString();
};


jiraIntegration.templates.jiraCreateIssueForm.unsupportedFieldsMessage = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  var param29 = new soy.StringBuilder();
  if (opt_data.unsupportedFields.length == 1) {
    var field__soy32 = new soy.StringBuilder('<strong>', soy.$$escapeHtml(opt_data.unsupportedFields), '</strong>');
    field__soy32 = field__soy32.toString();
    param29.append(AJS.format("The required field {0} is not available in this form. You will need to",field__soy32));
  } else {
    var fieldList__soy39 = new soy.StringBuilder();
    jiraIntegration.templates.jiraCreateIssueForm.buildFieldList({fields: opt_data.unsupportedFields}, fieldList__soy39);
    fieldList__soy39 = fieldList__soy39.toString();
    param29.append(AJS.format("The required fields {0} are not available in this form. You will need to",fieldList__soy39));
  }
  param29.append(' <a href="', soy.$$escapeHtml(opt_data.createIssueUrl), '" target="_blank">', soy.$$escapeHtml("create your issue directly in JIRA"), '</a>.');
  aui.message.warning({content: param29.toString()}, output);
  return opt_sb ? '' : output.toString();
};


jiraIntegration.templates.jiraCreateIssueForm.buildFieldList = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  var joinText__soy51 = new soy.StringBuilder((opt_data.fields.length == 2) ? ' ' + soy.$$escapeHtml("and") + ' ' : ', ');
  joinText__soy51 = joinText__soy51.toString();
  var fieldList59 = opt_data.fields;
  var fieldListLen59 = fieldList59.length;
  for (var fieldIndex59 = 0; fieldIndex59 < fieldListLen59; fieldIndex59++) {
    var fieldData59 = fieldList59[fieldIndex59];
    output.append((! (fieldIndex59 == 0)) ? soy.$$escapeHtml(joinText__soy51) : '', '<strong>', soy.$$escapeHtml(fieldData59), '</strong>');
  }
  return opt_sb ? '' : output.toString();
};


jiraIntegration.templates.jiraCreateIssueForm.authorize = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  var applicationNameEscaped__soy68 = new soy.StringBuilder(soy.$$escapeHtml(opt_data.applicationName));
  applicationNameEscaped__soy68 = applicationNameEscaped__soy68.toString();
  aui.message.info({content: AJS.format("{0}Log in and approve{1} to retrieve data from {2}",'<a class="oauth-init" href="#">','</a>',applicationNameEscaped__soy68)}, output);
  return opt_sb ? '' : output.toString();
};


jiraIntegration.templates.jiraCreateIssueForm.unsupportedServerMessage = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  aui.message.warning({content: AJS.format("The version of selected JIRA server is not supported. You may want to upgrade to at least version 5.x or {0}create issue in JIRA{1}.",'<a href="' + opt_data.serverUrl + '" target="_blank">','</a>')}, output);
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.extra.jira:jqlHelper', location = '/jira/jqlhelper.js' */
AJS.JQLHelper=(function(){var a=/^\s*((key|issuekey)\s*=\s*)?([A-Z]+)([0-9]+)?([A-Z]+)?-([0-9]+)\s*$/i;var e=/\s*([A-Z][A-Z]+)-[0-9]+\s*/;var j=/(issue|searchrequest)-xml/i;var g=/\/(i#)?browse\/([\x00-\x19\x21-\x22\x24\x27-\x3E\x40-\x7F]+-[0-9]+$)/i;var i=/\/jira\.issueviews:issue-xml\/([\x00-\x19\x21-\x22\x24\x27-\x3E\x40-\x7F]+-[0-9]+)\//;var c=/(jqlQuery|jql)\s*\=([^&]+)/i;var h=/(\?|&)(requestId|filter)\=([^&]+)/i;var b=/(searchrequest-xml\/)([0-9]+)\/SearchRequest/i;var k=/(requestId|filter)\=([^&]+)/i;var d=/=|!=|~|>|<|!~| is | in | was | changed /i;var f=function(p){var m="";var q=g.exec(p);if(q){m="key="+q[2]}else{var n=c.exec(p);if(n){m=n[2]}else{var o=e.exec(p);if(o){m="key="+o[0]}}}m=m.replace(/\+/g," ");return m};var l=function(n,p){var m;var o=decodeURIComponent(n);var q=function(r){if(r.jql){m=r.jql}};AJS.JQLHelper.getJqlQueryFromJiraFilter(o,p,q);return m};return{isSingleKeyJQLExp:function(m){return a.exec(m)},isMultipleSingleKeyJQLExp:function(p){var o=p.split(",");for(var n in o){var m=AJS.$.trim(o[n]);if(!AJS.JQLHelper.isSingleKeyJQLExp(m)){return false}}return true},isIssueUrlOrXmlUrl:function(m){if(g.test(m)||j.test(m)||c.test(m)||i.test(m)){return true}return false},isFilterUrl:function(m){return h.test(m)||b.test(m)},getFilterFromFilterUrl:function(m){if(h.test(m)){var n=h.exec(m);return n[2]+"="+n[3]}else{if(b.test(m)){return"filter="+b.exec(m)[2]}}},getJqlQueryFromJiraFilter:function(p,q,r,o){var m=(h.exec(p)||b.exec(p))[2];var n="/rest/jiraanywhere/1.0/jira/appLink/"+q+"/filter/"+m;AJS.$.ajax({async:false,dataType:"json",url:Confluence.getContextPath()+n,success:r,error:o})},findServerIndexFromUrl:function(m,p){if(typeof(p)!=="undefined"||p.length>0){var o=m.toLowerCase();for(var n=0;n<p.length;n++){if(o.indexOf(p[n].url.toLowerCase())==0){if(m.charAt(p[n].url.length)=="/"){return n}}}}return -1},getJqlQueryFromUrl:f,getJqlAndServerIndexFromUrl:function(n,o){var m={};m.serverIndex=this.findServerIndexFromUrl(n,o);m.jqlQuery=f(n);return m},checkQueryType:function(m){if(!AJS.Editor.JiraAnalytics){return undefined}if(!m||AJS.$.trim(m).length==0){return}if(m.indexOf("http")!=0){return AJS.Editor.JiraAnalytics.linkTypes.jqlDirect}else{if(m.indexOf("jira.issueviews:searchrequest-xml")!=-1||m.indexOf("jira.issueviews:issue-xml")!=-1){return AJS.Editor.JiraAnalytics.linkTypes.xml}else{if(m.indexOf("jira.issueviews:searchrequest-rss")!=-1){return AJS.Editor.JiraAnalytics.linkTypes.rss}else{if(m.indexOf("filter=")!=-1||m.indexOf("filter\\=")!=-1){return AJS.Editor.JiraAnalytics.linkTypes.filter}else{return AJS.Editor.JiraAnalytics.linkTypes.jql}}}}},convertToJQL:function(n,p){var o;if(AJS.$.trim(n)!==""){if(n.indexOf("http")===0&&this.isFilterUrl(n)){o=l(n,p)}else{if(n.indexOf("http")===0&&this.isIssueUrlOrXmlUrl(n)){var m=f(decodeURIComponent(n));if(m.length>0){o=m}}else{if(n.indexOf("http")!==0&&n.match(d)){o=n}else{if(n.match(e)){o="key="+n}else{o='summary ~ "'+n+'" OR description ~ "'+n+'"'}}}}}return o}}})();
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.extra.jira:dialogsJs', location = '/jira/datatable.js' */
(function(a){AJS.DataTable=function(h,d,b){var g=null;if(h&&h.jquery){g=h}else{if(typeof h=="string"){g=a(h)}}g.addClass("data-table");if(d&&d.length){this.columns=d;var f=a("<tr></tr>").appendTo(g);f.addClass("data-table-header");for(var c=0;c<d.length;c++){var e=d[c];f.append('<th class="'+e.className+'">'+e.title+"</th>")}}this.tbl=g;this.rowIdx=0};AJS.DataTable.prototype.addRow=function(e){var f=a("<tr></tr>").appendTo(this.tbl);var c=this.columns;for(var b=0;b<this.columns.length;b++){var d=c[b];var g=a("<td></td>").appendTo(f);g.addClass(d.className);d.renderCell(g,e)}f.data("row-data",e);this._bindRowJs(f,this.rowIdx,"selected","hover");this.rowIdx+=1;f.attr("tabindex","-1")};AJS.DataTable.prototype.selectRow=function(b){var c=a("tbody tr",this.tbl)[b+1];a(c).focus()};AJS.DataTable.prototype._bindRowJs=function(f,g,c,b){var e=this;f.click(function(i){if(c){a(e.tbl).find("."+c).removeClass(c);a(this).addClass(c)}var h=f.data("row-data");e.tbl.trigger("row-select",[h])});var d=function(k){switch(k.keyCode){case 13:var j;var h=f.data("row-data");f.keyup(j=function(l){e.tbl.trigger("row-action",[h]);f.unbind("keyup",j);return AJS.stopEvent(l)});return AJS.stopEvent(k);break;case 38:if(g>0){f.prev().focus()}return AJS.stopEvent(k);case 40:var i=a("tbody tr",e.tbl).length;if(g<i-1){f.next().focus()}return AJS.stopEvent(k)}};if(a.browser.mozilla){f.keypress(d)}else{f.keydown(d)}f.focus(function(h){f.click()});if(b){f.hover(function(){a(this).addClass(b)},function(){a(this).removeClass(b)})}}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.extra.jira:dialogsJs', location = '/jira/dialogs.js' */
(function(){tinymce.create("tinymce.plugins.JiraLink",{init:function(a){a.addCommand("mceJiralink",AJS.Editor.JiraConnector.hotKey);a.onPostRender.add(function(b){AJS.$.get(Confluence.getContextPath()+"/rest/jiraanywhere/1.0/servers",function(c){AJS.Editor.JiraConnector.servers=c});AJS.$("#jiralink").click(function(c){AJS.Editor.JiraConnector.open(AJS.Editor.JiraConnector.source.editorDropdownLink,true);return AJS.stopEvent(c)});AJS.$("#insert-menu .macro-jiralink").show();b.addShortcut("ctrl+shift+j","","mceJiralink")})},getInfo:function(){return{longname:"Confluence Jira Connector",author:"Atlassian",authorurl:"http://www.atlassian.com",version:tinymce.majorVersion+"."+tinymce.minorVersion}}});tinymce.PluginManager.add("jiraconnector",tinymce.plugins.JiraLink)})();AJS.Editor.Adapter.addTinyMcePluginInit(function(b){b.plugins+=",jiraconnector";var c=b.theme_advanced_buttons1;var a=c.indexOf("confimage");b.theme_advanced_buttons1=c.substring(0,a)+"jiralinkButton,"+c.substring(a)});AJS.Editor.JiraConnector=(function(j){var f="";var c="Insert JIRA Issue/Filter";var a="Insert";var h="Cancel";var l=function(){var q=navigator.platform.toLowerCase().indexOf("mac")!=-1;return q?"Cmd":"Ctrl"};var b={macroBrowser:"macro_browser",editorBraceKey:"editor_brace_key",editorHotKey:"editor_hot_key",editorDropdownLink:"editor_dropdown_link",instructionalText:"instructional text"};var p=AJS.format("Hint: type \"{0}+Shift+J\" in the editor to quickly access this dialog.",l());var n,m,d;var i=function(){var q=j("#createPageLabelsString");if(q.length>0){m=q.val().split(" ").join();AJS.Editor.JiraAnalytics.triggerPannelTriggerEvent({source:n,label:m});return}j.getJSON(AJS.Meta.get("base-url")+"/rest/ui/1.0/content/"+AJS.Meta.get("page-id")+"/labels",function(s){var r=[];j.each(s.labels,function(u,t){r.push(t.name)});m=r.join();AJS.Editor.JiraAnalytics.triggerPannelTriggerEvent({source:n,label:m})})};var g=function(q,r){if(AJS.Editor.JiraAnalytics){AJS.Editor.JiraConnector.analyticPanelActionObject=AJS.Editor.JiraAnalytics.setupAnalyticPanelActionObject(r,n,m);if(q.customizedColumn){AJS.Editor.JiraAnalytics.triggerCustomizeColumnEvent({columns:q.customizedColumn})}}};var o=function(q){q.focusForm&&q.focusForm()};var e=function(t){if(!d){d=new AJS.ConfluenceDialog({width:840,height:590,id:"jira-connector"});d.addHeader(c);var s=AJS.Editor.JiraConnector.Panels;for(var u=0;u<s.length;u++){d.addPanel(s[u].title());var w=d.getCurrentPanel();var r=s[u];r.init(w)}d.addLink("Select Macro",function(){d.hide();AJS.MacroBrowser.open(false)},"dialog-back-link");d.addHelpText(p);j("#jira-connector .dialog-tip").attr("title",p);d.addButton(a,function(){var z=d.getCurrentPanel().id;var y=s[z];var x=s[0];g(x,y);y.insertLink()},"insert-issue-button");AJS.$(".insert-issue-button").disable();d.addCancel(h,function(){AJS.Editor.JiraConnector.closePopup()});d.gotoPanel(0);if(AJS.Editor.JiraConnector.servers){for(var u=0;u<AJS.Editor.JiraConnector.servers.length;u++){var v=AJS.Editor.JiraConnector.servers[u];AppLinks.makeRequest({appId:v.id,type:"GET",url:"/rest/api/2/field",dataType:"json",serverIndex:u,success:function(x){if(x&&x.length){AJS.Editor.JiraConnector.servers[this.serverIndex].columns=x}},error:function(){AJS.log("Jira Issues Macro: unable to retrieve fields from AppLink: "+v.id)}})}}j("#jira-connector ul.dialog-page-menu").append(Confluence.Templates.ConfluenceJiraPlugin.addCrossMacroLink({id:"open-jira-chart-dialog",label:"JIRA Charts"}));j("#jira-connector .dialog-page-menu button").click(function(){var x=AJS.Editor.JiraConnector.Panels[d.getCurrentPanel().id];x.setInsertButtonState&&x.setInsertButtonState();o(x)});j("#open-jira-chart-dialog").click(function(){AJS.Editor.JiraConnector.closePopup();if(AJS.Editor.JiraChart){AJS.Editor.JiraChart.open()}})}AJS.Editor.JiraConnector.Panels[0].refreshSearchForm();if(t){d.gotoPanel(1);var q=AJS.Editor.JiraConnector.Panels[1];q.setSummary(t);setTimeout(function(){o(q)},0)}else{d.gotoPanel(0)}d.overrideLastTab();d.show()};var k=function(){if(AJS.Editor.JiraConnector.clickConfigApplink){AJS.$.ajax({url:Confluence.getContextPath()+"/rest/jiraanywhere/1.0/servers",async:false}).done(function(q){AJS.Editor.JiraConnector.servers=q})}if(typeof(AJS.Editor.JiraConnector.servers)=="undefined"||AJS.Editor.JiraConnector.servers.length==0){AJS.Editor.JiraConnector.warningPopup(AJS.Meta.get("is-admin"));return false}AJS.Editor.JiraConnector.clickConfigApplink=false;if(AJS.Editor.JiraConnector.refreshAppLink){AJS.Editor.JiraConnector.refreshAppLink.call();AJS.Editor.JiraConnector.refreshAppLink=false}return true};return{warningPopup:function(s){var q=new AJS.ConfluenceDialog({width:600,height:400,id:"warning-applink-dialog"});var r="Connect Confluence To JIRA";q.addHeader(r);var t=Confluence.Templates.ConfluenceJiraPlugin.warningDialog({isAdministrator:s});q.addPanel("Panel 1",t);q.get("panel:0").setPadding(0);if(s){q.addButton("Set connection",function(u){AJS.Editor.JiraConnector.clickConfigApplink=true;u.hide();tinymce.confluence.macrobrowser.macroBrowserCancel();window.open(Confluence.getContextPath()+"/admin/listapplicationlinks.action")},"create-dialog-create-button app_link");q.popup.element.find(".create-dialog-create-button").removeClass("button-panel-button").addClass("aui-button aui-button-primary")}else{q.addButton("Contact admin",function(u){u.hide();tinymce.confluence.macrobrowser.macroBrowserCancel();window.open(Confluence.getContextPath()+"/wiki/contactadministrators.action")})}q.addLink("Cancel",function(u){u.hide();tinymce.confluence.macrobrowser.macroBrowserCancel()});q.show();q.gotoPanel(0)},closePopup:function(){d.hide();tinymce.confluence.macrobrowser.macroBrowserCancel()},open:function(s,t){if(!k()){return}AJS.Editor.Adapter.storeCurrentSelectionState();n=s;if(AJS.Editor.JiraAnalytics&&n){if(n===AJS.Editor.JiraConnector.source.instructionalText){i()}else{m=null;AJS.Editor.JiraAnalytics.triggerPannelTriggerEvent({source:n})}}var r=tinymce.confluence.macrobrowser,q=r.getCurrentNode();if(r.isMacroTag(q)&&"jira"==j(q).attr("data-macro-name")){r.editMacro(q);return}AJS.Editor.JiraConnector.openCleanDialog(t)},openCleanDialog:function(s){var r=s&&tinyMCE.activeEditor.selection&&tinyMCE.activeEditor.selection.getContent({format:"text"});e(r);var q=AJS.Editor.JiraConnector.Panels[0];q.setMacroParams(null)},edit:function(u){if(!k()){return}if(typeof(u.params)=="undefined"){AJS.Editor.JiraConnector.openCleanDialog(false);return}n=f;m=f;var w=function(z){if(z.hasOwnProperty("jqlQuery")){return z.jqlQuery}var y=/^([0-9]\d*)$/;var x=["count","columns","title","renderMode","cache","width","height","server","serverId","anonymous","baseurl","showSummary"];for(var A in z){if(j.inArray(A,x)==-1&&z.hasOwnProperty(A)){if(y.test(A)){return z[A]}return A+=" = "+z[A]}}return""};var r=function(z){var A={};if(z.params.url){A.searchStr=z.params.url;return A}A.maximumIssues=z.params.maximumIssues;var x=z.defaultParameterValue||w(z.params);if(typeof(x)=="undefined"){A.searchStr=f}else{A.searchStr=x}if(typeof(z.params.server)!="undefined"){A.serverName=z.params.server}else{for(var y=0;y<AJS.Editor.JiraConnector.servers.length;y++){if(AJS.Editor.JiraConnector.servers[y].selected){A.serverName=AJS.Editor.JiraConnector.servers[y].name;break}}}return A};var t=function(z){var A=r(z);var y=z.params.count;if(typeof y==="undefined"){y="false"}A.count=y;var x=z.params.columns;if(typeof(x)!="undefined"){if(x.length){A.columns=x}}return A};var s=t(u);if(u&&!AJS.Editor.inRichTextMode()){j("#markupTextarea").selectionRange(u.startIndex,u.startIndex+u.markup.length)}e();if(s.searchStr){d.gotoPanel(0);var q=AJS.Editor.JiraConnector.Panels[0];q.setMacroParams(s);var v={searchValue:s.searchStr,serverName:s.serverName,isJqlQuery:u.params.hasOwnProperty("jqlQuery"),isAutoSearch:true};q.doSearch(v)}},source:b}})(AJS.$);AJS.MacroBrowser.setMacroJsOverride("jira",{opener:AJS.Editor.JiraConnector.edit});AJS.MacroBrowser.setMacroJsOverride("jiraissues",{opener:AJS.Editor.JiraConnector.edit});AJS.Editor.JiraConnector.Panels=[];AJS.Editor.JiraConnector.clickConfigApplink=false;AJS.Editor.JiraConnector.hotKey=function(){AJS.Editor.JiraConnector.open(AJS.Editor.JiraConnector.source.editorHotKey,true)};
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.extra.jira:dialogsJs', location = '/jira/panelhelper.js' */
AJS.Editor.JiraConnector.Panel=function(){};AJS.Editor.JiraConnector.Panel.prototype={SHOW_MESSAGE_ON_TOP:false,insertIssueLink:function(a){this.insertIssueLinkWithParams({key:a})},insertJqlLink:function(a){this.insertIssueLinkWithParams({jqlQuery:a})},insertIssueLinkWithParams:function(e){var f=function(g){tinymce.confluence.macrobrowser.macroBrowserComplete(g)};e.server=this.selectedServer.name;e.serverId=this.selectedServer.id;if(AJS.Editor.inRichTextMode()){f({name:"jira",params:e})}else{var a="{jira:";for(var b in e){a=a+b+"="+e[b]+"|"}if(a.charAt(a.length-1)=="|"){a=a.substr(0,a.length-1)}var d=AJS.$("#markupTextarea");var c=d.selectionRange();d.selectionRange(c.start,c.end);d.selection(a);c=d.selectionRange();d.selectionRange(c.end,c.end)}if(AJS.Editor.JiraAnalytics&&AJS.Editor.JiraConnector.analyticPanelActionObject){AJS.Editor.JiraAnalytics.triggerPannelActionEvent(AJS.Editor.JiraConnector.analyticPanelActionObject);AJS.Editor.JiraConnector.analyticPanelActionObject=null}AJS.Editor.JiraConnector.closePopup()},disableInsert:function(){AJS.$(".insert-issue-button").disable()},isInsertDisabled:function(){return AJS.$(".insert-issue-button").is(":disabled")},getOAuthRealm:function(d){var b=d.getResponseHeader("WWW-Authenticate")||"";var a=/OAuth realm\=\"([^\"]+)\"/;var c=a.exec(b);if(c){return c[1]}else{return null}},enableInsert:function(){AJS.$(".insert-issue-button").enable()},handleInsertWaiting:function(b){var a=AJS.$(".insert-issue-button");return b?a.before(aui.icons.icon({icon:"wait"})):a.prev(".aui-icon.aui-icon-wait").remove()},msg:function(a,c,b){if(aui&&aui.message){try{var h=AJS.$('<div class="aui-message-container"/>');var f=c;if(c.html){f=c.html()}var i={content:f};var d;switch(b){case"error":d=aui.message.error(i);break;case"success":d=aui.message.success(i);break;case"warning":d=aui.message.warning(i);break;default:d=aui.message.info(i)}h.append(d);c=h}catch(g){if(AJS&&AJS.logError){AJS.logError("jira-connector",g)}}}a.append(c)},errorMsg:function(a,c){this.removeError(a);var b=this.SHOW_MESSAGE_ON_TOP?AJS.$('<div class="jira-error"></div>').prependTo(a):AJS.$('<div class="jira-error"></div>').appendTo(a);this.msg(b,c,"error")},warningMsg:function(a,b){this.removeError(a);var c=this.SHOW_MESSAGE_ON_TOP?AJS.$('<div class="jira-error"></div>').prependTo(a):AJS.$('<div class="jira-error"></div>').appendTo(a);this.msg(c,b,"warning")},noServerMsg:function(a,b){var d=AJS.$('<div class="data-table jiraSearchResults" ></div>').appendTo(a);var c=this.SHOW_MESSAGE_ON_TOP?AJS.$('<div class="message-panel"/>').prependTo(d):AJS.$('<div class="message-panel"/>').appendTo(d);this.msg(c,b,"info")},ajaxError:function(c,b){if(c.status==401){var a=this.getOAuthRealm(c);this.selectedServer.authUrl=a;b.call(this)}else{this.errorMsg(this.container,"Received the following HTTP error code from the server"+":"+c.status)}},removeError:function(a){AJS.$("div.jira-error",a).remove()},setActionOnEnter:function(a,c,b){a.unbind("keydown").keydown(function(d){if(d.which==13){var f=function(g){a.unbind("keyup",f);c(b);return AJS.stopEvent(g)};a.keyup(f);return AJS.stopEvent(d)}})},createOauthForm:function(e){var d=this.selectedServer;var c={onSuccess:function(){d.authUrl=null;e(d)},onFailure:function(){}};var a='<a class="oauth-init" href="#">'+"Login & Approve"+"</a> "+"to retrieve data from"+" "+AJS.escapeHtml(this.selectedServer.name);var b=AJS.$('<div class="jira-oauth-message-marker"/>');if(!(aui&&aui.message)){b.addClass("oauth-message")}this.msg(b,a,"info");AJS.$(".oauth-init",b).click(function(f){AppLinks.authenticateRemoteCredentials(d.authUrl,c.onSuccess,c.onFailure);f.preventDefault()});return b},applinkServerSelect:function(a,b){var c=AJS.Editor.JiraConnector.servers;AJS.$(c).each(function(){var d="<option ";if(this.selected){selectedServer=this;d+='selected="selected"'}d+='value="'+this.id+'"></option>';d=AJS.$(d);d.text(this.name);AJS.$(a).append(d);d.data("jiraapplink",this)});AJS.$(a).change(function(g){var d=AJS.$("option:selected",a);var f=d.data("jiraapplink");b(f)})},showSpinner:function(d,a,c,b){AJS.$.data(d,"spinner",Raphael.spinner(d,a,"#666"));if(c){AJS.$(d).css("marginLeft",-a*1.2)}if(b){AJS.$(d).css("marginTop",-a*1.2)}},hideSpinner:function(a){AJS.$(a).css("marginTop","");AJS.$(a).css("marginLeft","");var b=AJS.$.data(a,"spinner");if(b){b();delete b;AJS.$.data(a,"spinner",null)}},setSelectedIssue:function(a){this.selectedIssue=a;this.enableInsert()},insertSelected:function(){if(this.selectedIssue){this.insertIssueLink(this.selectedIssue.key)}},createIssueTableFromUrl:function(c,k,b,a,d,h,i,f,e){AJS.$("div.data-table",c).remove();var j=AJS.$('<div class="data-table jiraSearchResults" ></div>').appendTo(c);var l=AJS.$('<div class="loading-data"></div>').appendTo(j);this.removeError(c);this.showSpinner(l[0],50,true,true);var g=this;this.currentXhr=AppLinks.makeRequest({appId:k,type:"GET",url:b,dataType:"xml",success:function(q){l.remove();var r=AJS.$("item",q);AJS.$(":disabled",c).enable();if(r.length){var u=AJS.$('<table class="my-result aui"></table>');AJS.$(".jiraSearchResults",c).append(u);var o=[];if(e){var t={className:"issue-checkbox-column",title:'<input type="checkbox" name="jira-issue-all" checked/>',renderCell:function(y,w){var x=Confluence.Templates.ConfluenceJiraPlugin.issueCheckbox({issueKey:w.key});AJS.$(x).appendTo(y)}};o.push(t)}var s=[{className:"issue-key-column",title:"Key",renderCell:function(y,x){var w=Confluence.Templates.ConfluenceJiraPlugin.issueKey({issueIconUrl:x.iconUrl,issueKey:x.key});AJS.$(w).appendTo(y)}},{className:"issue-summary-column",title:"Summary",renderCell:function(x,w){x.text(w.summary)}}];o=o.concat(s);var m=new AJS.DataTable(u,o);AJS.$(r).each(function(){var w={iconUrl:AJS.$("type",this).attr("iconUrl"),key:AJS.$("key",this).text(),summary:AJS.$("summary",this).text(),url:AJS.$("link",this).text()};m.addRow(w)});u.bind("row-action",function(x,w){d.call(g,w)});u.bind("row-select",function(x,w){a.call(g,w)});m.selectRow(0);if(i){var n=AJS.$("issue",q).attr("total");i.call(g,n)}}else{if(h){h()}var v="No search results found.";var p=AJS.$('<div class="message-panel"/>');g.msg(p,v,"info");AJS.$(".jiraSearchResults",c).append(p)}},error:function(m){AJS.$(":disabled",c).enable();l.remove();f.call(g,m)}})},retrieveJson:function(c,a,d,b){AppLinks.makeRequest({appId:c,type:"GET",url:a,dataType:"json",success:d,error:b})}};
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.extra.jira:dialogsJs', location = '/jira/searchpanel.js' */
AJS.Editor.JiraConnector.Panel.Search=function(){this.jql_operators=/=|!=|~|>|<|!~| is | in /i};AJS.Editor.JiraConnector.Select2=AJS.Editor.JiraConnector.Select2||{};AJS.Editor.JiraConnector.Select2.getKeyColumnsSelectedOptions=function(b){var a=[];var d=b.select2("data");for(var c=0;c<d.length;c++){a[c]=d[c].id}return a.join()};AJS.Editor.JiraConnector.Panel.Search.prototype=AJS.$.extend(AJS.Editor.JiraConnector.Panel.Search.prototype,AJS.Editor.JiraConnector.Panel.prototype);AJS.Editor.JiraConnector.Panel.Search.prototype=AJS.$.extend(AJS.Editor.JiraConnector.Panel.Search.prototype,{defaultColumns:"key,summary,type,created,updated,due,assignee,reporter,priority,status,resolution",DEFAULT_MAX_ISSUES_VAL:20,MAXIMUM_MAX_ISSUES_VAL:1000,MINIMUM_MAX_ISSUES_VAL:1,title:function(){return "Search"},init:function(a){a.html('<div id="my-jira-search"></div>');var f=this;var b=AJS.$("#my-jira-search");this.container=b;var h=function(){b.children(":not(div.jira-search-form)").remove()};var e=function(){AJS.$("input.text",b).enable();AJS.$("button",b).enable()};var l=function(){AJS.$("button",b).disable();AJS.$("input.text",b).disable()};var i=function(n){h();f.disableInsert();if(n){f.selectedServer=n}if(f.selectedServer.authUrl){l();var m=f.createOauthForm(function(){h();e()});b.append(m)}else{e();AJS.$(".search-help").show()}};this.authCheck=i;var g=function(x){var m=x&&x.searchValue;var o=x&&x.serverName;if(m){AJS.$("input:text",b).val(m)}if(o&&o!=this.selectedServer.name){var y=AJS.Editor.JiraConnector.servers;var q=false;for(var r=0;r<y.length;r++){if(y[r].name==o){AJS.$('option[value="'+y[r].id+'"]',b).attr("selected","selected");AJS.$("select",b).change();q=true;break}}if(!q){c(AJS.Meta.get("is-admin"));return}}if(this.currentXhr&&this.currentXhr.readyState!=4){return}var p=m||AJS.$("input",b).val();if(AJS.Editor.JiraAnalytics){var w=AJS.JQLHelper.checkQueryType(p);if(w){AJS.Editor.JiraAnalytics.triggerSearchEvent({type:w,source:"dialog"})}}var s=function(C,E,D){var B=b.find("#jiraIssueColumnSelector");var A=B.val()&&B.val().join();AJS.$("select",b).disable();l();f.lastSearch=C;f.createIssueTableFromUrl(b,f.selectedServer.id,"/sr/jira.issueviews:searchrequest-xml/temp/SearchRequest.xml?jqlQuery="+encodeURIComponent(C)+"&returnMax=true&tempMax=20&field=summary&field=type&field=link",f.selectHandler,f.insertLinkFromForm,function(){f.addDisplayOptionPanel();f.loadMacroParams(A);f.bindEventToDisplayOptionPanel(true,x);f.enableInsert()},function(F){f.addDisplayOptionPanel();f.loadMacroParams(A);f.bindEventToDisplayOptionPanel(false,x);f.updateTotalIssuesDisplay(F);f.checkAutoSelectColumns();x&&x.isAutoSearch&&f.focusForm()},function(F){f.disableInsert();if(F.status==400){if(D){D()}else{AJS.$("div.data-table",b).remove();f.warningMsg(b,AJS.format("The JIRA server didn\'\'t understand your search query. If you entered JQL, please ensure that it\'\'s correctly formed. If you entered an issue key, ensure that it exists and you have permission to view it. {0}",Confluence.Templates.ConfluenceJiraPlugin.learnMore()))}}else{AJS.$("div.data-table",b).remove();f.ajaxError(F,i)}x&&x.isAutoSearch&&f.focusForm()},true)};if(AJS.JQLHelper.isFilterUrl(p)){var n=decodeURIComponent(p);var v=AJS.JQLHelper.findServerIndexFromUrl(n,AJS.Editor.JiraConnector.servers);if(v!=-1){var t=AJS.Editor.JiraConnector.servers[v].id;AJS.$('option[value="'+t+'"]',b).attr("selected","selected");AJS.$("select",b).change();var z=AJS.JQLHelper.getFilterFromFilterUrl(n);if(z){AJS.$("input",b).val(z);s(z)}else{h();f.warningMsg(b,AJS.format("The JIRA server didn\'\'t understand your search query. If you entered JQL, please ensure that it\'\'s correctly formed. If you entered an issue key, ensure that it exists and you have permission to view it. {0}",Confluence.Templates.ConfluenceJiraPlugin.learnMore()))}}else{h();f.disableInsert();c(AJS.Meta.get("is-admin"))}}else{if(AJS.JQLHelper.isIssueUrlOrXmlUrl(p)){var n=decodeURIComponent(p);var u=AJS.JQLHelper.getJqlAndServerIndexFromUrl(n,AJS.Editor.JiraConnector.servers);if(d(u)){AJS.$("input",b).val(u.jqlQuery);s(u.jqlQuery,false,null)}}else{if(p.match(f.jql_operators)){s(p,false,null)}else{if(AJS.JQLHelper.isSingleKeyJQLExp(p)){s("key = "+p,true)}else{if(AJS.JQLHelper.isMultipleSingleKeyJQLExp(p)){s("key in ("+p+")",true)}else{s('summary ~ "'+p+'" OR description ~ "'+p+'"',false,null)}}}}}};this.doSearch=g;f.addSearchForm();var d=function(m){var n;if(m.serverIndex!=-1){AJS.$('option[value="'+AJS.Editor.JiraConnector.servers[m.serverIndex].id+'"]',b).attr("selected","selected");AJS.$("select",b).change();if(m.jqlQuery.length==0){h();f.errorMsg(b,"The JIRA server didn\'t understand your search query. If you entered JQL, please ensure that it\'s correctly formed. If you entered an issue key, ensure that it exists and you have permission to view it. {0}")}else{n=m.jqlQuery}}else{h();f.disableInsert();c(AJS.Meta.get("is-admin"))}return n};f.processJiraParams=d;var c=function(m){var o=Confluence.Templates.ConfluenceJiraPlugin.showMessageNoServer({isAdministrator:m,contextPath:Confluence.getContextPath()});f.noServerMsg(b,o);var n=AJS.$("#open_applinks");n.bind("click",function(){AJS.Editor.JiraConnector.clickConfigApplink=true;AJS.Editor.JiraConnector.refreshAppLink=function(){f.refreshSearchForm()}})};f.bindPasteEvent();AJS.$(a).select(function(){f.validate()});var k=AJS.$(".jql-display-opts-open.disabled");var j={live:true,title:function(){return AJS.$(".jql-display-opts-open.disabled").data("title")},gravity:"s",delayIn:300,delayOut:0};k.tooltip(j)},focusForm:function(){AJS.$('input[name="jiraSearch"]',this.container).focus()},addSearchForm:function(){var d=this;d.container.empty();var f=AJS.Editor.JiraConnector.servers;d.selectedServer=f[0];var a=false;if(f.length>1){a=true}var e=Confluence.Templates.ConfluenceJiraPlugin.searchForm({isMultiServer:a});var c=AJS.$(e).appendTo(d.container);if(f.length>1){var b=AJS.$('<select class="select" tabindex="0"></select>').insertAfter("div.search-input",c);d.applinkServerSelect(b,d.authCheck)}d.authCheck(d.selectedServer);AJS.$("button",d.container).click(function(){d.doSearch()});d.setActionOnEnter(AJS.$("input.text",d.container),d.doSearch)},bindPasteEvent:function(){var a=this;AJS.$("#my-jira-search input:text").bind("paste",function(){var b=this;setTimeout(function(){var d=AJS.$(b).val();if(AJS.JQLHelper.isFilterUrl(d)){a.doSearch()}else{if(AJS.JQLHelper.isIssueUrlOrXmlUrl(d)){var e=decodeURIComponent(d);var c=AJS.JQLHelper.getJqlAndServerIndexFromUrl(e,AJS.Editor.JiraConnector.servers);if(a.processJiraParams(c)){AJS.$(b).val(c.jqlQuery);a.doSearch()}}}},100)})},refreshSearchForm:function(){this.container.empty();this.addSearchForm();this.bindPasteEvent()},validate:function(e,d){var c=this.container;var f=AJS.$("input:checkbox[name=jira-issue]",c);var b=AJS.Editor.JiraConnector.Panel.Search.prototype;if(f.length||e){var a=AJS.$("input:checkbox[name=jira-issue]:checked",c).length;if(a>0||e){b.enableInsert()}else{b.disableInsert()}b.changeInsertOptionStatus(a,e,d)}else{if(AJS.$(".jira-oauth-message-marker",c).length){b.authCheck(this.selectedServer)}AJS.$("input",c).focus();b.disableInsert()}if(b.isInsertDisabled()){return}b.validateMaxIssues()},isValidMaxIssues:function(a){return AJS.$.isNumeric(a)&&(this.MINIMUM_MAX_ISSUES_VAL<=a&&a<=this.MAXIMUM_MAX_ISSUES_VAL)},validateMaxIssues:function(i){var b=AJS.$("#jira-maximum-issues");function d(){b.next("#jira-max-number-error").remove()}function f(){b.attr("disabled","disabled")}function h(){b.removeAttr("disabled")}function c(){d();b.after(Confluence.Templates.ConfluenceJiraPlugin.warningValMaxiumIssues())}switch(AJS.$("input:radio[name=insert-advanced]:checked").val()){case"insert-single":case"insert-count":d();f();break;case"insert-table":var a=AJS.Editor.JiraConnector.Panel.Search.prototype;h();var g=b.val();if(AJS.$.trim(g)===""){if(i&&i.type==="keyup"){d();break}if(i&&i.type==="blur"){g=a.MAXIMUM_MAX_ISSUES_VAL;b.val(g);break}}if(a.isValidMaxIssues(g)){d();a.enableInsert()}else{c();a.disableInsert()}break}},customizedColumn:null,parseColumnsStringToArray:function(g){var f="";var b=[];var a=null;var c=function(i,h){i=AJS.$.trim(i);if(i!=""){h.push(i)}};for(var e=0;e<g.length;e++){var d=g.charAt(e);if(d!==","&&d!=='"'&&d!=="'"){f+=d}if(d==='"'||d==="'"){if(a==null){a=d}else{if(a===d){c(f,b);f="";a=null}}}else{if(d===","){if(a==null){c(f,b);f=""}else{f+=d}}}}c(f,b);return b},parseArrayToColumnString:function(b){var a="";for(var c=0;c<b.length;c++){var d=AJS.$.trim(b[c]);if(d!=""){if(d.indexOf(",")>=0){d='"'+d+'"'}if(c!=0){a+=","}a+=d}}},checkAndSetDefaultValueMaximumIssues:function(a){if(!a){AJS.log("Cannot set default value for Maximum Issues");return}var b=a.element||AJS.$("#jira-maximum-issues");var d=a.defaultVal||this.MAXIMUM_MAX_ISSUES_VAL;var c=AJS.$.trim(b.val());if(c===""){b.val(d)}},setMacroParams:function(a){this.macroParams=a},getMacroParamsFromUserInput:function(){var e=((AJS.$("input:radio[name=insert-advanced]:checked").val()=="insert-count")?true:false);var d=[];var a=[];AJS.$("#my-jira-search .my-result.aui input:checkbox[name=jira-issue]").each(function(f){var g=AJS.$(this);if(g.is(":checked")){d[d.length]=g.val()}else{a[a.length]=g.val()}});var c={};if(e){c.count="true"}else{if(!AJS.Editor.JiraConnector.Panel.Search.jiraColumnSelectBox){c.columns=this.defaultColumns;return}c.columns=AJS.Editor.JiraConnector.Select2.getKeyColumnsSelectedOptions(AJS.Editor.JiraConnector.Panel.Search.jiraColumnSelectBox);if(!c.columns){c.columns=this.defaultColumns}}var b=AJS.$("input:radio[name=insert-advanced]:checked").val();if(b==="insert-single"){c.key=d.toString()}else{if(a.length==0){c.jqlQuery=this.lastSearch+" "}else{if(d.length==1){c.jqlQuery="key = "+d.toString()}else{c.jqlQuery="key in ("+d.toString()+")"}}}if(b==="insert-table"){c.maximumIssues=AJS.$("#jira-maximum-issues").val()}return c},insertLinkFromForm:function(){var c=this;var b=c.container;var d=AJS.$("input:checkbox[name=jira-issue]",b);if(d.length){var a=AJS.$("input:checkbox[name=jira-issue]:checked",b).length;if(a>0){c.insertLink()}}},insertLink:function(c){var a;if(c&&typeof c.insertIssueLinkWithParams==="function"){a=c}else{a=this}var b=a.getMacroParamsFromUserInput();a.insertIssueLinkWithParams(b);return true},loadMacroParams:function(a){var b=this.macroParams;if(!b){this.prepareColumnInput(a||this.defaultColumns);this.checkAndSetDefaultValueMaximumIssues({defaultVal:20})}else{b.columns=a||b.columns||this.defaultColumns;if(!b.maximumIssues){AJS.$("#jira-maximum-issues").attr("disabled","disabled")}if(b.count=="true"){AJS.$("#opt-total").prop("checked",true)}else{AJS.$("#opt-table").prop("checked",true);AJS.$("#jira-maximum-issues").removeAttr("disabled");var c=b.maximumIssues||this.DEFAULT_MAX_ISSUES_VAL;this.checkAndSetDefaultValueMaximumIssues({defaultVal:c})}this.prepareColumnInput(b.columns)}},selectHandler:function(){var a=this.container;var b=a.find("tr.selected");if(b.length){b.unbind("keydown.space").bind("keydown.space",function(c){if(c.which==32||c.keyCode==32){var d=b.find("[type=checkbox]");d.trigger("click")}})}},addDisplayOptionPanel:function(){var a=Confluence.Templates.ConfluenceJiraPlugin.displayOptsOverlayHtml;AJS.$(".jiraSearchResults").after(a());AJS.$("#jiraMacroDlg").unbind("submit").on("submit",function(b){return false})},updateTotalIssuesDisplay:function(b){var a=this.selectedServer.url+"/issues/?jql="+this.lastSearch;if(b>20){AJS.$(".my-result.aui").after(Confluence.Templates.ConfluenceJiraPlugin.viewAll({jiraIssuesLink:a}))}var c=AJS.format("{0} issues",b);AJS.$(".total-issues-text").html(c);AJS.$(".total-issues-link").attr("href",a)},prepareColumnInput:function(c){var b=c.split(/\s*,\s*/);for(var a in b){var g=b[a];if(g&&typeof g.toLowerCase==="function"){b[a]=g.toLowerCase()}}var f=this.selectedServer;var d={issuekey:"key",duedate:"due",issuetype:"type"};var e=function(j){var p=[];var s=AJS.$("#jiraIssueColumnSelector");var l="";var o="";var r;for(var k=0;k<j.length;k++){var q=j[k];if(q.navigable){if(d[q.id]){q.id=d[q.id]}if(q.custom===true){r=q.name.toLowerCase()}else{r=q.id.toLowerCase()}var n=AJS.template("<option value='{value}'>{displayValue}</option>");p[r]=q.name;if(AJS.$.inArray(r,b)<0){l+=n.fill({value:r,displayValue:q.name})}}}p.key="Key";for(var k=0;k<b.length;k++){var h=AJS.template("<option selected='true' value='{value}'>{displayValue}</option>");r=b[k].toLowerCase();if(p[r]!=null){o+=h.fill({value:r,displayValue:p[r]})}}var m=o+l;s.hide();s.html(m);s.show();s.auiSelect2({width:"415px",containerCssClass:"select2-container-jira-issue-columns"});AJS.Editor.JiraConnector.Panel.Search.jiraColumnSelectBox=s};if(f.columns&&f.columns.length>0){e(f.columns);return}this.retrieveJson(f.id,"/rest/api/2/field",function(h){if(h&&h.length){f.columns=h;e(f.columns)}})},expandDisplayOptPanel:function(){var b=AJS.$(".jql-display-opts-overlay");var c=b.height();var d=40;b.css("top","");var a=-(c-d);b.css("bottom",a+"px");b.animate({bottom:0},500)},minimizeDisplayOptPanel:function(){var a=AJS.$(".jql-display-opts-overlay");a.css("top",a.position().top+"px");a.css("bottom","");a.animate({top:420},500)},disableAutoSelectColumns:function(){AJS.Editor.JiraConnector.Panel.Search.jiraColumnSelectBox.auiSelect2("enable",false)},enableAutoSelectColumns:function(){AJS.Editor.JiraConnector.Panel.Search.jiraColumnSelectBox.auiSelect2("enable",true)},checkAutoSelectColumns:function(){if(AJS.$("#opt-table").prop("checked")){this.enableAutoSelectColumns()}else{this.disableAutoSelectColumns();this.enableInsert()}},bindEventToDisplayOptionPanel:function(f,h){var d=this;var b=AJS.$(".jql-display-opts-close, .jql-display-opts-open"),c=AJS.$(".jql-display-opts-overlay"),i=AJS.$(".jql-display-opts-inner .radio"),a=AJS.$("#my-jira-search input:checkbox[name=jira-issue-all]"),e=AJS.$("#my-jira-search input:checkbox[name=jira-issue]");var g=AJS.$("#jira-maximum-issues");g.on("blur keyup",AJS.Editor.JiraConnector.Panel.Search.prototype.validateMaxIssues);c.css("top","420px");b.click(function(j){j.preventDefault();if(AJS.$(this).hasClass("disabled")){return}var k=AJS.$(this).hasClass("jql-display-opts-open");if(k){d.expandDisplayOptPanel();jQuery(this).addClass("jql-display-opts-close");jQuery(this).removeClass("jql-display-opts-open")}else{d.minimizeDisplayOptPanel();jQuery(this).removeClass("jql-display-opts-close");jQuery(this).addClass("jql-display-opts-open")}});i.change(function(){d.checkAutoSelectColumns();d.validateMaxIssues()});a.bind("click",function(){var j=AJS.$(this);if(j.prop("checked")){e.prop("checked","checked")}else{e.removeAttr("checked")}d.validate()});e.change(function(){var j=AJS.$("#my-jira-search input:checkbox[name=jira-issue]:not(:checked)").length;if(j>0){a.removeAttr("checked")}else{a.prop("checked","checked")}d.validate()});d.validate(f,h)},changeInsertOptionStatus:function(q,n,f){var r=this;var g=AJS.$("#opt-single");var d=AJS.$("#opt-total");var m=AJS.$("#opt-table");var j=AJS.$("#my-jira-search input:checkbox[name=jira-issue]:checked");var i=AJS.$("#my-jira-search input:checkbox[name=jira-issue-all]").attr("checked")==="checked";var l=j.length===1;var p=j.length>1;var h=j.length===0;var b=AJS.JQLHelper.isSingleKeyJQLExp(AJS.$("#my-jira-search input[name=jiraSearch]").val());var c=function(){if(f&&f.isJqlQuery){m.click()}else{g.click()}};var k=function(){d.attr("disabled","disabled");m.removeAttr("disabled");g.removeAttr("disabled");c();setTimeout(function(){c()},100)};var e=function(){g.attr("disabled","disabled");d.removeAttr("disabled");if(AJS.$("input[name=insert-advanced]:checked").val()==="insert-single"){setTimeout(function(){m.removeAttr("disabled").click()},100)}};var o=function(){m.removeAttr("disabled","disabled");d.removeAttr("disabled","disabled");g.removeAttr("disabled","disabled");var s=AJS.$("input:radio[name=insert-advanced]:checked").val();if(s==="insert-single"){setTimeout(function(){m.click()},100)}};var a=function(){g.attr("disabled","disabled");d.attr("disabled","disabled");m.attr("disabled","disabled");AJS.$(".jql-display-opts-close").click();AJS.$(".jql-display-opts-open").addClass("disabled")};AJS.$(".jql-display-opts-open").removeClass("disabled");g.removeAttr("disabled");d.removeAttr("disabled");m.removeAttr("disabled");if(i&&l&&b){k()}else{if(i&&l&&!b){o()}else{if(p){e()}else{if(l&&!i){k()}else{if(n){e()}else{if(h){a()}}}}}}},isInsertTableType:function(){return AJS.$("input:radio[name=insert-advanced]:checked").val()==="insert-table"},setInsertButtonState:function(){var a=AJS.$(".jql-display-opts-close, .jql-display-opts-open");var b=AJS.$("#jira-maximum-issues");if(!a.length||(a.length&&this.isInsertTableType()&&!this.isValidMaxIssues(b.val()))){this.disableInsert()}else{this.enableInsert()}},analyticPanelActionName:"confluence.jira.plugin.searchadded"});AJS.Editor.JiraConnector.Panels.push(new AJS.Editor.JiraConnector.Panel.Search());
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.extra.jira:dialogsJs', location = '/jira/jip_createissuepanel.js' */
AJS.Editor.JiraConnector.Panel.Create=function(){};AJS.Editor.JiraConnector.Panel.Create.prototype=AJS.$.extend(AJS.Editor.JiraConnector.Panel.Create.prototype,AJS.Editor.JiraConnector.Panel.prototype);AJS.Editor.JiraConnector.Panel.Create.prototype=AJS.$.extend(AJS.Editor.JiraConnector.Panel.Create.prototype,{DEFAULT_PROJECT_VALUE:"-1",SHOW_MESSAGE_ON_TOP:true,EXCLUDED_FIELDS:["project","issuetype","summary","description"],PROJECTS_META:{},setSummary:function(b){var a=AJS.$('.field-group [name="summary"]',this.jipForm.formEl);a.length&&a.val(b)},resetIssue:function(){AJS.$(".issue-summary",this.container).empty();AJS.$(".issue-description",this.container).empty()},focusForm:function(){var a=AJS.$("select.server-select",this.container);if(a.length){a.focus()}else{var b=AJS.$(".project-select",this.container);b.length&&b.focus()}},authCheck:function(){this.selectedServer=this.jipForm.getCurrentServer();if(this.selectedServer.authUrl){this.showOauthChallenge()}else{this.serverSelect()}},ajaxAuthCheck:function(b){var a=this;this.endLoading();this.ajaxError(b,function(){a.authCheck(a.jipForm.getCurrentServer())})},showOauthChallenge:function(){AJS.$("div.field-group",this.container).not(".servers").hide();AJS.$(".jira-oauth-message-marker",this.container).remove();var a=this;var b=this.createOauthForm(function(){a.serverSelect()});this.container.append(b)},projectOk:function(){var a=AJS.$(".project-select option:selected",this.container).val();return a&&a.length&&a!=this.DEFAULT_PROJECT_VALUE},setInsertButtonState:function(){if(this.formHasError===false&&this.projectOk()){this.enableInsert();return true}else{this.disableInsert();return false}},startLoading:function(){this.removeError(this.container);AJS.$(".loading-blanket",this.container).removeClass("hidden");AJS.$("input,select,textarea",this.container).disable();this.disableInsert();this.handleInsertWaiting(true)},endLoading:function(){AJS.$(".loading-blanket",this.container).addClass("hidden");AJS.$("input,select,textarea",this.container).enable();if(AJS.$(".project-select",this.container).val()===this.DEFAULT_PROJECT_VALUE){AJS.$(".issuetype-select",this.container).disable()}this.setInsertButtonState();this.handleInsertWaiting(false)},bindEvent:function(){var b=this;var a=AJS.$('.field-group [name="summary"]',this.jipForm.formEl);a.keyup(function(){b.setInsertButtonState()});this.container.on("focus","input[data-aui-dp-uuid]",function(){var c=AJS.$(this).attr("data-aui-dp-uuid");setTimeout(function(){AJS.$("[data-aui-dp-popup-uuid="+c+"]").parents(".aui-inline-dialog").addClass("datepicker-patch")},0)})},title:function(){return "Create New Issue"},init:function(b){var c=this;b.html('<div class="create-issue-container"></div>');this.container=AJS.$("div.create-issue-container");var a=this.container;var d=AJS.Editor.JiraConnector.servers;this.selectedServer=d[0];this.jipForm=new jiraIntegration.JiraCreateIssueForm({container:".create-issue-container",renderSummaryAndDescription:true,onError:function(){AJS.$(".field-group .error",this.container).remove();c.formHasError=true;c.disableInsert()},onServerChanged:function(){AJS.$(".field-group .error",this.container).remove();c.setInsertButtonState();c.selectedServer=this.getCurrentServer()},onRequiredFieldsRendered:function(f,e){AJS.$(".field-group .error",this.container).remove();c.formHasError=!!e.length;c.setInsertButtonState()}});b.onselect=function(){c.onselect()};this.bindEvent()},convertFormToJSON:function(b){if(!jiraIntegration){AJS.logError("Jira integration plugin is missing!");return""}var c={};c.issues=[];var a={};a.fields={project:{id:AJS.$(".project-select option:selected",b).val()},issuetype:{id:AJS.$(".issuetype-select option:selected",b).val()},summary:AJS.$('.field-group [name="summary"]',b).val(),description:AJS.$('.field-group [name="description"]',b).val()};b.children(".create-issue-required-fields").children(".jira-field").children("input,select,textarea").not(".select2-input").each(function(d,e){var f=AJS.$(e);a.fields[f.attr("name")]=jiraIntegration.fields.getJSON(f)});c.issues.push(a);return JSON.stringify(c)},validateRequiredFieldInForm:function(b){var d=true;var a="placeholder" in document.createElement("input");var c=b.find(".field-group .icon-required, .field-group .aui-icon-required");c.each(function(h,l){var k=AJS.$(l).parent();var g=k.text();var i=k.nextAll("input,select,textarea");var j=AJS.$.trim(i.val());if(!j||(!a&&j==i.attr("placeholder"))){d=false;var f=k.parent();var e=AJS.format("{0} is required",g);f.append(aui.form.fieldError({message:e}))}});return d},clearFieldErrors:function(){AJS.$("form div.error",this.container).remove()},insertLink:function(){var b=this;var c=Confluence.getContextPath()+"/rest/jira-integration/1.0/issues";var a=AJS.$("div.create-issue-container form");var d=this.jipForm.getCurrentServer();b.clearFieldErrors();if(!b.validateRequiredFieldInForm(a)){return}this.startLoading();AJS.$.ajax({type:"POST",contentType:"application/json",url:c+"?applicationId="+this.selectedServer.id,data:this.convertFormToJSON(a),success:function(h){var f=h&&h.issues&&h.issues[0]&&h.issues[0].issue&&h.issues[0].issue.key;if(!f){if(!_.isEmpty(h.errors[0].elementErrors.errorMessages)){var g=h.errors[0].elementErrors.errorMessages;var i=Confluence.Templates.ConfluenceJiraPlugin.renderCreateErrorPanel({errors:g,serverUrl:d.displayUrl});b.errorMsg(AJS.$("div.create-issue-container"),i)}var e=h.errors[0].elementErrors.errors;_.each(e,function(l,k){var j=aui.form.fieldError({message:l});AJS.$(AJS.format(".field-group [name={0}]",k),a).after(j)})}else{b.insertIssueLink(f,d.displayUrl+"/browse/"+f);b.resetIssue()}b.endLoading()},error:function(f,e){b.ajaxAuthCheck(f)}})},onselect:function(){var a=!!AJS.$(".aui-message > .oauth-init",this.container).length;if(this.selectedServer&&!this.selectedServer.authUrl&&a){this.jipForm.defaultFields.server.trigger("change")}else{this.setInsertButtonState()}},analyticPanelActionName:"confluence.jira.plugin.issuecreated"});AJS.Editor.JiraConnector.Panels.push(new AJS.Editor.JiraConnector.Panel.Create());
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.extra.jira:dialogsJs', location = '/jira/recentlyviewedpanel.js' */
AJS.Editor.JiraConnector.Panel.Recent=function(){};AJS.Editor.JiraConnector.Panel.Recent.prototype=AJS.$.extend(AJS.Editor.JiraConnector.Panel.Recent.prototype,AJS.Editor.JiraConnector.Panel.prototype);AJS.Editor.JiraConnector.Panel.Recent.prototype=AJS.$.extend(AJS.Editor.JiraConnector.Panel.Recent.prototype,{title:function(){return "Recently Viewed"},init:function(a){var d=AJS.Editor.JiraConnector.servers;a.html('<div id="my-recent-issues" '+(d.length>1?'class="multi-server" ':"")+"></div>");var c=this;this.selectedServer=d[0];if(d.length>1){var b=AJS.$('<div class="jira-server-select"><form action="#" method="post" class="aui"><div class="field-group"><label>Server</label><select class="select" ></select></div></form></div>').appendTo("div#my-recent-issues");this.applinkServerSelect(AJS.$(".select",b),function(e){c.selectedServer=e;c.onselect()})}a.onselect=function(){c.onselect()}},insertLink:function(){this.insertSelected()},onselect:function(){var c=this;var b=AJS.$("div#my-recent-issues");this.container=b;var d=function(){b.children().not(".jira-server-select").remove()};var e;var a=function(){if(c.selectedServer.authUrl){d();var f=c.createOauthForm(function(){e()});b.append(f)}else{e()}};e=function(){if(c.currentXhr&&c.currentXhr.readyState!=4){return}var f=AJS.$(".select",b);f.disable();d();var g="key+in+issueHistory()+ORDER+BY+lastViewed+DESC";c.createIssueTableFromUrl(b,c.selectedServer.id,"/sr/jira.issueviews:searchrequest-xml/temp/SearchRequest.xml?jqlQuery="+g+"&field=summary&field=type&field=link&tempMax=50&returnMax=true",c.setSelectedIssue,c.insertLink,c.disableInsert,function(){f.length&&f.focus()},function(h){AJS.$("div.data-table",b).remove();c.ajaxError(h,a)},false)};a()},analyticPanelActionName:"confluence.jira.plugin.recentlyviewadded"});AJS.Editor.JiraConnector.Panels.push(new AJS.Editor.JiraConnector.Panel.Recent());
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.extra.jira:dialogsJs', location = 'templates/soy/dialog.soy' */
// This file was automatically generated from dialog.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.ConfluenceJiraPlugin == 'undefined') { Confluence.Templates.ConfluenceJiraPlugin = {}; }


Confluence.Templates.ConfluenceJiraPlugin.displayOptsHtml = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class=\'jql-display-opts-bar data-table\'><a href=\'#\' class=\'jql-display-opts-open\' data-title="', soy.$$escapeHtml("Display options panel is not available without a selection."), '"><span></span><strong>', soy.$$escapeHtml("Display options"), '</strong></a></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.ConfluenceJiraPlugin.displayOptsOverlayHtml = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class=\'jql-display-opts-overlay data-table\'><form id="jiraMacroDlg" class="aui" action="#"><div class=\'jql-display-opts-inner\'><a href=\'#\' class=\'jql-display-opts-open\' data-title="', soy.$$escapeHtml("Display options panel is not available without a selection."), '"><span></span><strong>', soy.$$escapeHtml("Display options"), '</strong></a><fieldset class="group"><legend><span>', soy.$$escapeHtml("Display as"), '</span></legend><div class="radio"><input type=\'radio\' class=\'radio\' name=\'insert-advanced\' id=\'opt-single\' value=\'insert-single\'><label for=\'opt-single\'>', soy.$$escapeHtml("Single issue"), '</label><div class=\'description\'>', soy.$$escapeHtml("Display the macro as a single issue."), '</div></div><div class="radio"><input type=\'radio\' class=\'radio\' name=\'insert-advanced\' id=\'opt-total\' value=\'insert-count\'><label for=\'opt-total\'>', soy.$$escapeHtml("Total issue count"), '</label><div class=\'description\'>', soy.$$escapeHtml("Display total number of issues as a link. E.g."), '<a class=\'total-issues-link\' target=\'_blank\' href=\'#\'><span class=\'total-issues-text\'>', soy.$$escapeHtml(AJS.format("{0} issues",12)), '</span></a></div></div><div class="radio"><input type=\'radio\' class=\'radio\' checked=\'checked\' name=\'insert-advanced\' id=\'opt-table\' value=\'insert-table\'><label for=\'opt-table\'>', soy.$$escapeHtml("Table"), '</label><div class=\'description\'>', soy.$$escapeHtml("Customise your columns below."), '</div></div></fieldset><fieldset><div class="field-group"><label>', soy.$$escapeHtml("Maximum issues"), '</label><input type="text" name="jira-maximum-issues" id="jira-maximum-issues" class="text short-field" /><div class="description">', soy.$$escapeHtml("Leave empty to get all issues."), '</div></div></fieldset><fieldset><div class="field-group"><label>', soy.$$escapeHtml("Columns to display"), '</label><select id="jiraIssueColumnSelector" data-placeholder="', soy.$$escapeHtml("Start typing to see possible columns"), '" multiple="true" class="select long-field"></select></div></fieldset></div></form></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.ConfluenceJiraPlugin.searchForm = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class=\'jira-search-form\'><form class=\'aui\'><fieldset class=\'inline\'>', (opt_data.isMultiServer == true) ? '<div class=\'search-input\'><input type=\'text\' class=\'text search-text\' name=\'jiraSearch\' placeholder="' + soy.$$escapeHtml("e.g. filter \x3d \x22My JIRA filter\x22") + '"/></div>' : '<div class=\'search-input one-server\'><input type=\'text\' class=\'text one-server long-field\' name=\'jiraSearch\' placeholder="' + soy.$$escapeHtml("e.g. filter \x3d \x22My JIRA filter\x22") + '"/></div>', '<button type=\'button\' title="', soy.$$escapeHtml("Search"), '" class=\'button\'><span class="aui-icon aui-icon-small aui-iconfont-search"></span></button></fieldset><div class=\'search-help\'>', soy.$$escapeHtml("Search using any issue key, search URL, JIRA link, JQL, plain text or filter"), '</div></form></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.ConfluenceJiraPlugin.warningDialog = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class=\'warning-body\'><p>', soy.$$escapeHtml("If you connect Confluence to JIRA you can easily link issues..."), '</p>', (opt_data.isAdministrator == false) ? '<p>' + soy.$$escapeHtml("Your administrator can set this up.") + '</p>' : '', '</div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.ConfluenceJiraPlugin.issueCheckbox = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<input type=\'checkbox\' name=\'jira-issue\' value=\'', soy.$$escapeHtml(opt_data.issueKey), '\' checked/>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.ConfluenceJiraPlugin.issueKey = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<span><img class="icon" src="', soy.$$escapeHtml(opt_data.issueIconUrl), '"/> ', soy.$$escapeHtml(opt_data.issueKey), '</span>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.ConfluenceJiraPlugin.showMessageNoServer = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.isAdministrator == true) ? soy.$$escapeHtml("No server found match with your URL.") + '<a id="open_applinks" target="_blank" href="' + soy.$$escapeHtml(opt_data.contextPath) + '/admin/listapplicationlinks.action">' + soy.$$escapeHtml("Click here to set this up") + '</a>' : soy.$$escapeHtml("No server found match with your URL. Your administrator can set this up.") + '<a id="open_applinks" target="_blank" href="' + soy.$$escapeHtml(opt_data.contextPath) + '/wiki/contactadministrators.action">' + soy.$$escapeHtml("Click here to contact your admin") + '</a>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.ConfluenceJiraPlugin.viewAll = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class=\'view-all\'>', soy.$$escapeHtml("Displaying first 20 results."), '<a href=\'', soy.$$escapeHtml(opt_data.jiraIssuesLink), '\' target=\'_blank\'>', soy.$$escapeHtml("View all."), '</a></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.ConfluenceJiraPlugin.learnMore = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<a href="', soy.$$escapeHtml("JIRA+Issues+Macro"), '" target=\'_blank\'>', soy.$$escapeHtml("Learn More"), '</a>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.ConfluenceJiraPlugin.contentJiraChart = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div id="jira-chart-content-', soy.$$escapeHtml(opt_data.chartType), '"><div class=\'jira-chart-search\'><form class=\'aui\'><fieldset class=\'inline\'>', (opt_data.isMultiServer == true) ? '<div class=\'jira-chart-search-input\'><input type=\'text\' id="jira-chart-search-input" class=\'text search-text\' name=\'jiraSearch\' placeholder="' + soy.$$escapeHtml("e.g. filter \x3d \x22My JIRA filter\x22") + '"/></div><select id="jira-chart-servers" class="select" name="server" tabindex="0" />' : '<div class=\'jira-chart-search-input one-server\'><input type=\'text\' id="jira-chart-search-input" class=\'text one-server long-field\' name=\'jiraSearch\' placeholder="' + soy.$$escapeHtml("e.g. filter \x3d \x22My JIRA filter\x22") + '"/></div>', '<button id="jira-chart-search-button" type=\'button\' class=\'button\'>', soy.$$escapeHtml("Preview"), '</button></fieldset><div class=\'search-help\'>', soy.$$escapeHtml("Search using any issue key, search URL, JIRA link, JQL, plain text or filter"), '</div></form></div><div class="jira-chart-img"></div><div class="jira-chart-option"><form action="#" class="aui" id="jiraChartMacroOption"><div class="jiraChartOption"><a class="jirachart-display-opts-open" href="#"><span class="display-option-icon"></span><strong>', soy.$$escapeHtml("Display options"), '</strong></a>');
  if (opt_data.chartType == 'pie') {
    Confluence.Templates.ConfluenceJiraPlugin.piechartForm(null, output);
  } else if (opt_data.chartType == 'createdvsresolved') {
    Confluence.Templates.ConfluenceJiraPlugin.createdVsResolved(null, output);
  } else if (opt_data.chartType == 'twodimensional') {
    Confluence.Templates.ConfluenceJiraPlugin.twoDimensional(null, output);
  }
  output.append('</div></form></div></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.ConfluenceJiraPlugin.piechartForm = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<fieldset><div class="field-group"><label for="jira-chart-statType">', soy.$$escapeHtml("Chart by"), '</label><select name="type" id="jira-chart-statType" class="select"></select></div></fieldset><fieldset class="group"><div class="field-group"><label for="jira-chart-width">', soy.$$escapeHtml("Width"), '</label><input type="text" name="jira-chart-width" id="jira-chart-width" class="text short-field"><span class="aui-icon aui-icon-small aui-iconfont-help help-aligment widthInfo" title="', soy.$$escapeHtml("Enter pixels, percent or leave blank to auto-resize."), '"></span><div class="checkbox"><input type="checkbox" id="jira-pie-chart-show-border" class="checkbox jira-chart-show-border"><label for="jira-pie-chart-show-border">', soy.$$escapeHtml("Show border"), '</label></div><div class="checkbox"><input type="checkbox" id="jira-pie-chart-show-infor" class="checkbox jira-chart-show-infor"><label for="jira-pie-chart-show-infor">', soy.$$escapeHtml("Show chart information"), '</label></div></div></fieldset>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.ConfluenceJiraPlugin.createdVsResolved = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<fieldset><div class="field-group"><label for="created-vs-resolved-chart-periodName">', soy.$$escapeHtml("Period"), '</label><select class="select" id="created-vs-resolved-chart-periodName" name="created-vs-resolved-chart-periodName"><option value="hourly">', soy.$$escapeHtml("Hourly"), '</option><option value="daily">', soy.$$escapeHtml("Daily"), '</option><option value="weekly">', soy.$$escapeHtml("Weekly"), '</option><option value="monthly">', soy.$$escapeHtml("Monthly"), '</option><option value="quarterly">', soy.$$escapeHtml("Quarterly"), '</option><option value="yearly">', soy.$$escapeHtml("Yearly"), '</option></select><div class="error"></div></div><div class="field-group"><label for="created-vs-resolved-chart-daysprevious">', soy.$$escapeHtml("Days previously"), '<span class="aui-icon icon-required"></span></label><input type="text" class="text" id="created-vs-resolved-chart-daysprevious" value="30"><span class="aui-icon aui-icon-small aui-iconfont-help help-aligment daysPreviousInfo" title="', soy.$$escapeHtml("Number of days to include (counting back from today)."), '"></span><div class="error days-previous-error"></div></div><fieldset class="group"><div class="checkbox"><input type="checkbox" id="created-vs-resolved-chart-cumulative" name="created-vs-resolved-chart-cumulative" class="checkbox"><label for="created-vs-resolved-chart-cumulative">', soy.$$escapeHtml("Cumulative totals"), '</label><span class="aui-icon aui-icon-small aui-iconfont-help help-aligment cumulativeInfo" title="', soy.$$escapeHtml("Progressively add totals (1, 2, 3) or show individual values (1,1,1)."), '"></span></div><div class="checkbox"><input type="checkbox" id="created-vs-resolved-chart-showunresolvedtrend" name="created-vs-resolved-chart-showunresolvedtrend" class="checkbox"><label for="created-vs-resolved-chart-showunresolvedtrend">', soy.$$escapeHtml("Show unresolved trend"), '</label><span class="aui-icon aui-icon-small aui-iconfont-help help-aligment showunresolvedtrendInfo" title="', soy.$$escapeHtml("Include a subplot showing unresolved issues."), '"></span></div></fieldset><div class="field-group"><label for="created-vs-resolved-chart-versionLabel">', soy.$$escapeHtml("Show versions"), '</label><select class="select" id="created-vs-resolved-chart-versionLabel" name="created-vs-resolved-chart-versionLabel"><option value="all">', soy.$$escapeHtml("All versions"), '</option><option value="major">', soy.$$escapeHtml("Only major versions"), '</option><option value="none">', soy.$$escapeHtml("None"), '</option></select><span class="aui-icon aui-icon-small aui-iconfont-help help-aligment versionLabelInfo" title="', soy.$$escapeHtml("Mark version release dates in the chart."), '"></span><div class="error"></div></div></fieldset><fieldset class="group"><div class="field-group"><label for="jira-chart-width">', soy.$$escapeHtml("Width"), '</label><input type="text" name="jira-chart-width" id="jira-chart-width" class="text short-field"><span class="aui-icon aui-icon-small aui-iconfont-help help-aligment widthInfo" title="', soy.$$escapeHtml("Enter pixels, percent or leave blank to auto-resize."), '"></span><div class="checkbox"><input type="checkbox" id="jira-createdvsresolved-chart-show-border" class="checkbox jira-chart-show-border"><label for="jira-createdvsresolved-chart-show-border">', soy.$$escapeHtml("Show border"), '</label></div><div class="checkbox"><input type="checkbox" id="jira-createdvsresolved-chart-show-infor" class="checkbox jira-chart-show-infor"><label for="jira-createdvsresolved-chart-show-infor">', soy.$$escapeHtml("Show chart information"), '</label></div></div></fieldset>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.ConfluenceJiraPlugin.twoDimensional = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<fieldset><div id="jira-chart-support-all-version" class="hidden"/><div class="field-group"><label for="twodimensional-xaxis">', soy.$$escapeHtml("XAxis"), '</label><select class="select" id="twodimensional-xaxis"><option value="statuses">', soy.$$escapeHtml("Status"), '</option><option value="priorities">', soy.$$escapeHtml("Priority"), '</option><option value="assignees">', soy.$$escapeHtml("Assignee"), '</option><option value="allFixfor">', soy.$$escapeHtml("Fix For Versions (all)"), '</option><option value="components">', soy.$$escapeHtml("Component"), '</option><option value="issuetype">', soy.$$escapeHtml("Issue Type"), '</option></select></div><div class="field-group"><label for="twodimensional-yaxis">', soy.$$escapeHtml("YAxis"), '</label><select class="select" id="twodimensional-yaxis"><option value="statuses">', soy.$$escapeHtml("Status"), '</option><option value="priorities">', soy.$$escapeHtml("Priority"), '</option><option value="assignees">', soy.$$escapeHtml("Assignee"), '</option><option value="allFixfor">', soy.$$escapeHtml("Fix For Versions (all)"), '</option><option value="components">', soy.$$escapeHtml("Component"), '</option><option value="issuetype">', soy.$$escapeHtml("Issue Type"), '</option></select></div><div class="field-group"><label for="twodimensional-number-of-result">', soy.$$escapeHtml("Rows to display"), '</label><input type="text" name="twodimensional-number-of-result" id="twodimensional-number-of-result" class="text short-field"><div class="error twodimensional-number-of-result-error"></div></div></fieldset>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.ConfluenceJiraPlugin.jiraChartErrorMessage = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="aui-message-container"><div class="aui-message error closeable shadowed"><p class="title"><span class="aui-icon icon-error"></span><strong></strong></p><span class=\'message\'>', soy.$$escapeHtml(opt_data.message), '</span><span class="aui-icon icon-close" role="button" tabindex="0"></span></div></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.ConfluenceJiraPlugin.noServerWarning = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="aui-message-container"><div class="aui-message warning">', (opt_data.isAdministrator == true) ? soy.$$escapeHtml("No server found match with your URL.") + '<a id="open_applinks" target="_blank" href="' + soy.$$escapeHtml(opt_data.contextPath) + '/admin/listapplicationlinks.action">' + soy.$$escapeHtml("Click here to set this up") + '</a>' : soy.$$escapeHtml("No server found match with your URL. Your administrator can set this up.") + '<a id="open_applinks" target="_blank" href="' + soy.$$escapeHtml(opt_data.contextPath) + '/wiki/contactadministrators.action">' + soy.$$escapeHtml("Click here to contact your admin") + '</a>', '<span class="aui-icon icon-warning"></span></div></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.ConfluenceJiraPlugin.addMoreToComeLink = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<li class="page-menu-item"><button class="item-button moreToCome"><a target="_blank" href="http://go.atlassian.com/confluencejiracharts">', soy.$$escapeHtml("More to come..."), '</a></button></li>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.ConfluenceJiraPlugin.addCrossMacroLink = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<li class="page-menu-item"><hr><span class="aui-nav-heading jira-padding-left-10px"><strong>', soy.$$escapeHtml("OTHER JIRA CONTENT"), '</strong></span><nav class="aui-navgroup aui-navgroup-vertical"><div class="aui-navgroup-inner"><ul class="aui-nav"><li><button class="item-button jira-left-panel-link" id="', soy.$$escapeHtml(opt_data.id), '">', soy.$$escapeHtml(opt_data.label), '</button></li></ul></div></nav></li>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.ConfluenceJiraPlugin.jqlInvalid = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="aui-message-container"><div class="aui-message warning">', soy.$$escapeHtml("The JIRA server didn\x27t understand your search query. If you entered JQL, please ensure that it\x27s correctly formed. If you entered an issue key, ensure that it exists and you have permission to view it."), '<span class="aui-icon icon-warning"></span></div></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.ConfluenceJiraPlugin.warningValWidthColumn = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="error width-error">', (opt_data.error == 'wrongFormat') ? soy.$$escapeHtml("The width must be in correct format") : (opt_data.error == 'wrongNumber') ? soy.$$escapeHtml("The width must be a number between 100 and 9000") : '', '</div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.ConfluenceJiraPlugin.warningValMaxiumIssues = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div id="jira-max-number-error" class="error">', soy.$$escapeHtml("Must be a number between 1 and 1000."), '</div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.ConfluenceJiraPlugin.showJiraUnsupportedVersion = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="jira-unsupported-version aui-message-container"><div class="aui-message warning">', soy.$$escapeHtml("JIRA Charts are not available for your version of JIRA. Upgrade to JIRA 6.1.1 or later to use this macro."), '<span class="aui-icon icon-warning"></span></div></div>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.extra.jira:dialogsJs', location = 'templates/soy/create_issues.soy' */
// This file was automatically generated from create_issues.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.ConfluenceJiraPlugin == 'undefined') { Confluence.Templates.ConfluenceJiraPlugin = {}; }


Confluence.Templates.ConfluenceJiraPlugin.createIssuesForm = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<form action="#" method="post" class="aui" id="create-issues-form"><div class="loading-blanket hidden"><div class="loading-data"/></div><div class="field-group servers"><label>', soy.$$escapeHtml("Server"), '</label><select class="select server-select"></select></div><div class="field-group project-select-parent" ><label>', soy.$$escapeHtml("Project"), '</label><select class="select project-select" name="pid"></select></div><div class="field-group type-select-parent issues-type-group" ><label>', soy.$$escapeHtml("Issue Type"), '</label><select class="select type-select" name="issuetype"></select></div><div class="field-group"><label>', soy.$$escapeHtml("Summary"), '<span class="aui-icon icon-required"/></label><input class="text issue-summary" type="text" name="summary"/></div><div id="jira-required-fields-panel"></div><div class="field-group"><label>', soy.$$escapeHtml("Description"), '</label><textarea class="issue-description textarea" rows="5" name="description"/></div></form>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.ConfluenceJiraPlugin.renderOptions = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  var optionList15 = opt_data.options;
  var optionListLen15 = optionList15.length;
  for (var optionIndex15 = 0; optionIndex15 < optionListLen15; optionIndex15++) {
    var optionData15 = optionList15[optionIndex15];
    output.append('<option value="', soy.$$escapeHtml(optionData15.id), '">', soy.$$escapeHtml(optionData15.name), '</option>');
  }
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.ConfluenceJiraPlugin.renderOption = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<option value="', soy.$$escapeHtml(opt_data.option.id), '" data-jira-option-key="', soy.$$escapeHtml(opt_data.option.key), '">', soy.$$escapeHtml(opt_data.option.name), '</option>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.ConfluenceJiraPlugin.renderCreateErrorPanel = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div>', soy.$$escapeHtml("There were errors creating an issue in"), '<a target="_blank" href=', soy.$$escapeHtml(opt_data.serverUrl), '>JIRA</a></div><ul>');
  var errorList36 = opt_data.errors;
  var errorListLen36 = errorList36.length;
  for (var errorIndex36 = 0; errorIndex36 < errorListLen36; errorIndex36++) {
    var errorData36 = errorList36[errorIndex36];
    output.append('<li>', soy.$$escapeHtml(errorData36), '</li>');
  }
  output.append('</ul>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-paste:autoconvert-core', location = 'js/autoconvert/tinymce-autoconvert.js' */
(function(e){function h(a){for(var c=h.options,a=c.parser[c.strictMode?"strict":"loose"].exec(a),d={},b=14;b--;)d[c.key[b]]=a[b]||"";d[c.q.name]={};d[c.key[12]].replace(c.q.parser,function(a,b,e){b&&(d[c.q.name][b]=e)});return d}tinymce.plugins.Autoconvert=function(a){a.onUndo.add(this.cleanLinks);this.editor=a;this.weightedHandlers=[];this.handlers=[]};tinymce.plugins.Autoconvert.prototype.addHandler=function(a,c){this.weightedHandlers.push({handler:a,weight:c||0});this.weightedHandlers.sort(function(a,
b){return a.weight-b.weight});this.handlers=[];for(var d=this.weightedHandlers.length,b=0;b<d;b++)this.handlers.push(this.weightedHandlers[b].handler)};tinymce.plugins.Autoconvert.prototype.cleanLinks=function(a){e("a.atlassian-autoconvert",a.getDoc()).removeClass("atlassian-autoconvert");return!0};tinymce.plugins.Autoconvert.prototype.callHandlers=function(a){function c(c){if(c&&(1!==c.length||!c.attr("href")))return b(c);if(c)a=c,g=0,j=h(a.attr("href")),d(f.handlers[g],j,a);else if(g++,g<f.handlers.length)d(f.handlers[g],
j,a);else return b(a)}function d(a,b,d){var e=c,i;i=setTimeout(function(){AJS.log("Autoconvert: Callback #"+g+" failed to call continuation in time. If there is no subsequent log, the handler is improperly implemented and should be uninstalled.");e=function(){AJS.log("Autoconvert: Callback #"+g+" did eventualy return. Probably a slow async call.")};c()},tinymce.plugins.Autoconvert.callbackTimeout);a(b,d,function(){var a=g;clearTimeout(i);e.apply(f,arguments);e=function(){AJS.log("Autoconvert: Callback #"+
a+" called the continuation multiple times.")}})}function b(a){f.editor.undoManager.beforeChange();var b=f.editor.selection,c=f.editor.selection.getBookmark();i.replaceWith(a);b.moveToBookmark(c);f.editor.undoManager.add()}var g=0,f=this,i=e(a),a=e(a).clone(),k=a.attr("href"),j=h(k.replace(/^(.*?\/\/[^/]*?\/.*?)(@)/,"$1%40"));0!==this.handlers.length&&d(this.handlers[0],j,a)};tinymce.plugins.Autoconvert.callbackTimeout=5E3;tinymce.plugins.Autoconvert.convertMacroToDom=function(a,c,d){a={macro:a,contentId:AJS.Meta.get("content-id")};
e.ajax({type:"POST",contentType:"application/json; charset=utf-8",url:AJS.params.contextPath+"/rest/tinymce/1/macro/placeholder",data:e.toJSON(a),dataType:"text",success:c,error:d,timeout:45E3})};tinymce.plugins.Autoconvert.convertMacroToDomViaWikiText=function(a,c,d){var b=["{",a.name],g=!0;a.defaultParameterValue&&(b.push(":",a.defaultParameterValue),g=!1);for(var f in a.params)g?(b.push(":"),g=!1):b.push("|"),b.push(f,"=",a.params[f]);b.push("}");tinymce.plugins.Autoconvert.getHtmlFromWikiMarkup(b.join(""),
function(a){c(e(a)[0])},function(){d()})};tinymce.plugins.Autoconvert.getHtmlFromWikiMarkup=function(a,c,d){a={wiki:a,entityId:AJS.Meta.get("content-id"),spaceKey:AJS.Meta.get("space-key")};e.ajax({type:"POST",contentType:"application/json; charset=utf-8",url:AJS.params.contextPath+"/rest/tinymce/1/wikixhtmlconverter",data:e.toJSON(a),dataType:"text",success:c,error:d,timeout:45E3})};h.options={strictMode:!1,key:"source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),
q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};tinymce.create("tinymce.plugins.AutoconvertPlugin",{init:function(a){function c(b,c,f){b=e(f.node).children("a");
1===b.length&&("A"===b[0].tagName&&b.text()===b.attr("href"))&&(b.attr("class","atlassian-autoconvert"),setTimeout(function(){var b=e("a.atlassian-autoconvert",e(a.selection.getNode().ownerDocument)).removeClass("atlassian-autoconvert");d.callHandlers(b)},0))}var d=tinymce.plugins.Autoconvert.autoConvert=new tinymce.plugins.Autoconvert(a);a.onInit.add(function(){AJS.$(document).bind("postPaste",c);a.addCommand("addAutoconverter",function(a,c){d.addHandler(c)})});a.onRemove.add(function(){AJS.$(document).unbind("postPaste",
c)})},getInfo:function(){return{longname:"Atlassian Autoconvert",author:"Atlassian",authorurl:"http://www.atlassian.com",infourl:"http://www.atlassian.com",version:"1.0"}}});tinymce.PluginManager.add("autoconvert",tinymce.plugins.AutoconvertPlugin)})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.extra.jira:autoconvert-jira', location = '/jira/jirapaste.js' */
(function(){AJS.bind("init.rte",function(){AJS.Editor.JiraConnector.Paste={issueKeyOnlyRegEx:/\/(i#)?browse\/([\x00-\x19\x21-\x22\x24\x27-\x3E\x40-\x7F]+-[0-9]+$)/,singleTicketXMLEx:/\/jira\.issueviews:issue-xml\/([\x00-\x19\x21-\x22\x24\x27-\x3E\x40-\x7F]+-[0-9]+)\//,issueKeyWithinRegex:/\/(i#)?browse\/([\x00-\x19\x21-\x22\x24\x27-\x3E\x40-\x7F]+-[0-9]+)(?:\?|#)/,jqlRegEx:/jqlQuery\=([^&]+)/,jqlRegExAlternateFormat:/jql\=([^&]+)/,pasteHandler:function(e,g,k){var n=AJS.Editor.JiraConnector.servers;var m=AJS.Editor.JiraAnalytics;var d={};var o;if(!n){k();return}for(var l in n){var h=n[l];if(e.source.indexOf(h.url)==0){o=h;break}}var f;if(o){var b=AJS.Editor.JiraConnector.Paste.jqlRegEx.exec(e.source)||AJS.Editor.JiraConnector.Paste.jqlRegExAlternateFormat.exec(e.source);var a=AJS.JQLHelper.isFilterUrl(e.source);var j=AJS.Editor.JiraConnector.Paste.issueKeyOnlyRegEx.exec(e.source)||AJS.Editor.JiraConnector.Paste.issueKeyWithinRegex.exec(e.source);if(j){j=j[2];if(m){d.type=m.linkTypes.jql}}else{j=AJS.Editor.JiraConnector.Paste.singleTicketXMLEx.exec(e.source);if(j){j=j[1];if(m){d.type=m.linkTypes.xml}}}if(b){d.is_single_issue=false;d.type=AJS.JQLHelper.checkQueryType(e.source);f={name:"jira",params:{server:o.name,serverId:o.id,jqlQuery:decodeURIComponent(b[1].replace(/\+/g,"%20"))}}}else{if(a){var c=e.source;d.is_single_issue=false;d.type=AJS.JQLHelper.checkQueryType(c);f={name:"jira",params:{server:o.name,serverId:o.id,jqlQuery:AJS.JQLHelper.getFilterFromFilterUrl(c)}}}else{if(j){d.is_single_issue=true;f={name:"jira",params:{server:o.name,serverId:o.id,key:j}}}}}}if(f){tinymce.plugins.Autoconvert.convertMacroToDom(f,k,k);if(m){m.triggerPasteEvent(d)}}else{k()}}};tinymce.plugins.Autoconvert.autoConvert.addHandler(AJS.Editor.JiraConnector.Paste.pasteHandler)})})();
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.extra.jira:text-placeholders-jira', location = '/jira/placeholder.js' */
(function(){AJS.bind("init.rte",function(){AJS.bind("editor.text-placeholder.activated",function(b,a){if(a&&a.placeholderType==="jira"){AJS.Editor.JiraConnector.open(AJS.Editor.JiraConnector.source.instructionalText)}});if(AJS.Rte.Placeholder&&AJS.Rte.Placeholder.addPlaceholderType){AJS.Rte.Placeholder.addPlaceholderType({type:"jira",label:"JIRA Macro",tooltip:"Instructional text is replaced with a JIRA Macro on click.",activation:{click:true,keypress:false}})}})})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.extra.jira:jirachart-macro', location = '/jirachart/jirachart-dialog.js' */
AJS.Editor.JiraChart=(function(j){var m=-1;var A=6109;var e=6155;var d="Insert";var q="Cancel";var x="Insert JIRA Chart";var c;var g;var E=function(H){if(!c){c=new AJS.ConfluenceDialog({width:840,height:590,id:"jira-chart"});c.addHeader(x);g=AJS.Editor.JiraChart.Panels;for(var G=0;G<g.length;G++){if(typeof(g[G].title)==="function"){c.addPanel(g[G].title())}else{if(g[G].title!==undefined){c.addPanel(g[G].title)}}var J=c.getCurrentPanel();g[G].init(J)}j("#jira-chart ul.dialog-page-menu").show().append(Confluence.Templates.ConfluenceJiraPlugin.addCrossMacroLink({id:"open-jira-issue-dialog",label:"JIRA Issue/Filter"}));c.addButton(d,function(){var K=g[c.getCurrentPanel().id];if(b(K.chartType)&&K.isImageChartExisted()){var L=K.getMacroParamsFromDialog();C(L);AJS.Editor.JiraChart.close()}else{y(j("#jira-chart-content-"+K.chartType))}},"insert-jira-chart-macro-button");c.addLink("Select Macro",function(){c.hide();AJS.MacroBrowser.open(false)},"dialog-back-link");c.addCancel(q,function(){AJS.Editor.JiraChart.close()})}AJS.$("#jira-chart .dialog-page-menu button").click(function(){var M=g[c.getCurrentPanel().id];var L=c.getCurrentPanel().body;var K=AJS.Editor.JiraChart.Helper.getSelectedServer(L);n(L,K);p(L);M.handleInsertButton();M.focusForm();M.resetDisplayOption()});var I=c.getCurrentPanel().body;p(I);var F=F||function(L){var K={};_.each(L,function(M,N){K[M.chartType]=N});return K}(g);f(F,H);a();c.gotoPanel(r(F,H));c.overrideLastTab();c.show();i()};var r=function(F,G){if(G&&G.params){return F[G.params.chartType]}return 0};var s=function(){_.each(AJS.Editor.JiraChart.Panels,function(F){F.preBinding&&typeof F.preBinding==="function"&&F.preBinding()})};var i=function(){j("#open-jira-issue-dialog").click(function(){AJS.Editor.JiraChart.close();if(AJS.Editor.JiraConnector){AJS.Editor.JiraConnector.openCleanDialog(false)}})};var D=function(F){if(AJS.Editor.JiraConnector.servers.length>0){AJS.Editor.JiraConnector.Panel.prototype.applinkServerSelect(F.find("#jira-chart-servers"),function(G){l(F);if(p(F)){n(F,G);B(F)}})}};var b=function(G){var F=c.getCurrentPanel().body;return F.find("#jira-chart-content-"+G).length>0};var k=function(F){F(g[c.getCurrentPanel().id])};var y=function(F){if(AJS.Editor.JiraChart.Helper.convertSearchTextToJQL(F)===undefined){return}k(function(G){G.renderChart()})};var p=function(F){if(F.find("#jira-chart-support-all-version").length){return true}var G=AJS.Editor.JiraChart.Helper.getSelectedServer(F);if(w(G)){t(F);z(F);return false}return true};var C=function(F){var G=function(H){tinymce.confluence.macrobrowser.macroBrowserComplete(H)};if(AJS.Editor.inRichTextMode()){G({name:"jirachart",params:F})}};var f=function(F,H){for(var G=0;G<g.length;G++){g[G].resetDialogValue()}s();if(H&&H.params){var I=g[F[H.params.chartType]];I.bindingDataFromMacroToForm(H.params)}};var v=function(){if(AJS.Editor.JiraConnector.servers===undefined||AJS.Editor.JiraConnector.servers.length===0){AJS.Editor.JiraConnector.warningPopup(AJS.Meta.get("is-admin"));return false}return true};var l=function(F){F.find(".jira-oauth-message-marker").remove();F.find(".jira-chart-img").empty();F.find("#jira-chart-search-input").empty()};var a=function(){j("#jira-chart").find(".insert-jira-chart-macro-button").disable()};var h=function(){var F=AJS.$("#jira-chart").find(".insert-jira-chart-macro-button");if(F.is(":disabled")){F.enable()}};var o=function(F){F.find("#jira-chart-search-button").disable()};var u=function(F){if(F.find("#jira-chart-search-button").is(":disabled")){F.find("#jira-chart-search-button").enable()}};var n=function(H,G){j(".jira-oauth-message-marker",H).remove();var I={selectedServer:G,msg:AJS.Editor.JiraConnector.Panel.prototype.msg};if(G&&G.authUrl){var F=AJS.Editor.JiraConnector.Panel.prototype.createOauthForm.call(I,function(){j(".jira-oauth-message-marker",H).remove();AJS.Editor.JiraChart.search(H)});H.find("div.jira-chart-search").append(F)}};var t=function(F){F.find(".jira-chart-img").html(Confluence.Templates.ConfluenceJiraPlugin.showJiraUnsupportedVersion())};var z=function(G){G.find("#jira-chart-search-input").attr("disabled","disabled");G.find("#jira-chart-search-button").attr("disabled","disabled");var F=G.find(".jirachart-display-opts-close, .jirachart-display-opts-open");if(F.hasClass("jirachart-display-opts-close")){F.click()}F.addClass("disabled");a()};var B=function(F){F.find("#jira-chart-search-input").removeAttr("disabled");F.find("#jira-chart-search-button").removeAttr("disabled");F.find(".jirachart-display-opts-open").removeClass("disabled")};var w=function(G){var F=G.buildNumber;return F==m||(F>=A&&F<e)};return{close:function(){c.hide();tinymce.confluence.macrobrowser.macroBrowserCancel()},edit:function(F){if(!v()){return}E(F);var H=c.getCurrentPanel().body;if(!p(H)){return}B(H);if(F.params!==undefined&&F.params.serverId!==undefined){y(H)}var G=AJS.Editor.JiraChart.Helper.getSelectedServer(H);n(H,G)},search:y,disableInsert:a,enableInsert:h,disableSearch:o,enableSearch:u,insertJiraChartMacroWithParams:C,open:E,clearChartContent:l,loadServers:D,validateServerSupportedChart:p}})(AJS.$);AJS.Editor.JiraChart.Panels=[];AJS.MacroBrowser.setMacroJsOverride("jirachart",{opener:AJS.Editor.JiraChart.edit});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.extra.jira:jirachart-macro', location = '/jirachart/jirachart-helper.js' */
AJS.Editor.JiraChart.Helper=(function(g){var a=/^\d+$/;var m={};var f=function(o){o=(o&&typeof o==="string")?o.replace("px",""):"";if(o==="auto"){o=""}if(o.indexOf("%")>0){o=o.replace("%","")*4}return o};var n=function(o){return a.test(o)};var k=function(o){var p=AJS.Editor.JiraConnector.servers;if(p.length>1){return o.find("#jira-chart-servers option:selected").data("jiraapplink")}return p[0]};var h=function(p){var u=AJS.Editor.JiraConnector.servers;var r;var q=p.find("#jira-chart-search-input").val();if(q.indexOf("http")===0){var t=AJS.JQLHelper.findServerIndexFromUrl(q,u);if(t!==-1){r=u[t].id;p.find("#jira-chart-servers").val(r)}else{var s=Confluence.Templates.ConfluenceJiraPlugin.noServerWarning({isAdministrator:AJS.Meta.get("is-admin"),contextPath:Confluence.getContextPath()});p.find(".jira-chart-img").html(s);AJS.Editor.JiraChart.disableInsert();return}}var o=AJS.JQLHelper.convertToJQL(q,r);if(o){p.find("#jira-chart-search-input").val(o)}else{p.find(".jira-chart-img").html(Confluence.Templates.ConfluenceJiraPlugin.jqlInvalid());AJS.Editor.JiraChart.disableInsert()}return o};var d=function(o,q){var s=k(o);if(q){var p=s.id;var t=m[p];if(!t){AppLinks.makeRequest({appId:s.id,type:"GET",url:"/rest/gadget/1.0/statTypes",dataType:"json",async:false,success:function(u){if(u){m[s.id]=u;t=u}},error:function(u){if(u){m[s.id]=JSON.parse(u.responseText);t=JSON.parse(u.responseText)}AJS.log("Jira Chart Macro: unable to retrieve statTypes from AppLink: "+s.id)}}).fail(function(u){if(u){m[s.id]=JSON.parse(u.responseText);t=JSON.parse(u.responseText)}})}var r="";_.each(t.stats,function(u){r+="<option value = '"+u.value+"'>"+AJS.escapeHtml(u.label)+" </option>"});q.html(r)}};var l=function(o){o.next().next(".width-error").remove();var p=f(o.val());var q;if(p){if(n(p)){if(p<100||p>9000){q="wrongNumber"}}else{q="wrongFormat"}}if(q){o.next().after(Confluence.Templates.ConfluenceJiraPlugin.warningValWidthColumn({error:q}));AJS.Editor.JiraChart.disableInsert();return false}return true};var j=function(o){return{jql:o.find("#jira-chart-search-input"),width:o.find("#jira-chart-width"),border:o.find(".jira-chart-show-border"),showinfor:o.find(".jira-chart-show-infor"),displayOption:o.find(".jirachart-display-opts-close, .jirachart-display-opts-open"),server:o.find("#jira-chart-servers")}};var c=function(p,o){p.jql.val(decodeURIComponent(o.jql));p.width.val(o.width);p.border.attr("checked",(o.border==="true"));p.showinfor.attr("checked",(o.showinfor==="true"));if(AJS.Editor.JiraConnector.servers.length>1){p.server.val(o.serverId)}};var b=function(q,o){var p=k(o);return{jql:encodeURIComponent(q.jql.val()),width:f(q.width.val()),border:q.border.prop("checked"),showinfor:q.showinfor.prop("checked"),serverId:p.id,server:p.name,isAuthenticated:!p.authUrl}};var i=function(p,o){return{contentId:AJS.Meta.get("page-id"),macro:{name:"jirachart",params:{jql:p.jql,serverId:p.serverId,width:p.width,border:p.border,showinfor:p.showinfor,chartType:o}}}};var e=function(o){if(o){return AJS.$.trim(o.val())!==""&&o.val()!==o.attr("placeholder")}return false};return{getSelectedServer:k,bindingCommonChartElements:j,bindingCommonDataFromMacroToForm:c,getCommonMacroParamsFromDialog:b,getCommonChartParamsRequest:i,convertSearchTextToJQL:h,convertFormatWidth:f,isChartWidthValid:l,isNumber:n,isJqlNotEmpty:e,populateStatType:d}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.extra.jira:jirachart-macro', location = '/jirachart/jirachart-panel.js' */
AJS.Editor.JiraChart.Panel=function(){};AJS.Editor.JiraChart.Panel.prototype={init:function(a){var b=this.chartType;var c=Confluence.Templates.ConfluenceJiraPlugin.contentJiraChart({isMultiServer:AJS.Editor.JiraConnector.servers.length>1,chartType:b});a.html(c);this.container=AJS.$(this.containerId);AJS.Editor.JiraChart.clearChartContent(this.container);AJS.Editor.JiraChart.loadServers(this.container);this.bindingChartElements();this.bindingActions()},bindingActions:function(){var e=this;var d=function(){if(e.isFormValid()){AJS.Editor.JiraChart.search(e.container)}else{AJS.Editor.JiraChart.disableInsert()}};var b=e.container.find(e.clickableElements);b.click(d);var f=e.container.find(e.onChangeElements);f.change(d);e.chartElements.jql.change(function(){if(this.value!==e.jqlWhenEnterKeyPress){e.container.find(".jira-chart-img").empty();AJS.Editor.JiraChart.disableInsert()}e.jqlWhenEnterKeyPress=""}).bind("paste",function(){setTimeout(function(){if(e.isFormValid()){e.jqlWhenEnterKeyPress=e.chartElements.jql.val();AJS.Editor.JiraChart.search(e.container)}},100)});var a=e.container.find("input[type='text']");var c=function(g){if(g.attr("id")==="jira-chart-search-input"){e.jqlWhenEnterKeyPress=g.val()}};a.unbind("keydown").keydown(function(g){if(g.which==13){var h=function(i){a.unbind("keyup",h);if(e.isFormValid()){AJS.Editor.JiraChart.search(e.container)}c(a);return AJS.stopEvent(i)};a.keyup(h);return AJS.stopEvent(g)}});e.bindSelectOption();e.bindingServerChange()},bindingServerChange:function(){var a=this;a.chartElements.server.change(function(){if(a.isFormValid()&&AJS.Editor.JiraChart.validateServerSupportedChart(a.container)){AJS.Editor.JiraChart.search(a.container)}else{AJS.Editor.JiraChart.disableInsert()}})},renderChart:function(){var e=this;var b=this.getChartParamsRequest();var a=Confluence.getContextPath()+"/rest/tinymce/1/macro/preview";var d=this.container.find(".jira-chart-img");d.html('<div class="loading-data"></div>');var c=d.find(".loading-data")[0];AJS.$.data(c,"spinner",Raphael.spinner(c,50,"#666"));if(e.request){e.request.abort()}e.request=AJS.$.ajax({url:a,type:"POST",contentType:"application/json",data:JSON.stringify(b)}).done(function(f){d.html("").hide();var i=AJS.$('<iframe frameborder="0" id="chart-preview-iframe"></iframe>');i.appendTo(d);var h=i[0].contentWindow,g=h.document;i.on("load",function(){h.AJS.$("#main").addClass("chart-preview-main");d.show();e.handleInsertButton()});f=f.replace("window.onload","var chartTest");g.open();g.write(f);g.close()}).error(function(f){if(f.statusText!="abort"){AJS.log("Jira Chart Macro - Fail to get data from macro preview");d.html(Confluence.Templates.ConfluenceJiraPlugin.jiraChartErrorMessage({message:"Unable to render JIRA chart macro due to an execution error."}))}AJS.Editor.JiraChart.disableInsert()})},resetDialogValue:function(){var a=AJS.$("input",this.container);a.filter(":text").val("");a.filter(":checked").removeAttr("checked");this.container.find("#jira-chart-search-input").val();this.container.find(".jira-chart-img").empty();this.resetDisplayOption()},resetDisplayOption:function(){var b=this;var a=this.chartElements.displayOption;a.addClass("jirachart-display-opts-open");a.removeClass("jirachart-display-opts-close");setTimeout(function(){var c=b.container.find(".jira-chart-option");c.scrollTop(0);c.css({overflow:"hidden",top:"430px"})},0)},bindSelectOption:function(){var c=this;var b=c.container.find(".jira-chart-option");var d=function(g){var f=40;var i=b.position().top+"px";var e="";var h={top:430};if(g){i="";e=f-b.find("#jiraChartMacroOption").height()+"px";h={bottom:0};b.css("overflow","auto")}else{b.css("overflow","hidden")}b.css("top",i);b.css("bottom",e);b.animate(h,500)};b.css("top","430px");var a=this.chartElements.displayOption;a.click(function(g){var f=AJS.$(this);g.preventDefault();if(f.hasClass("disabled")){return}var h=f.hasClass("jirachart-display-opts-open");if(h){d(true);f.addClass("jirachart-display-opts-close");f.removeClass("jirachart-display-opts-open")}else{d();f.removeClass("jirachart-display-opts-close");f.addClass("jirachart-display-opts-open")}})},isImageChartExisted:function(){return this.container.find("#chart-preview-iframe").contents().find(".jira-chart-macro-img").length>0},focusForm:function(){this.container.find("#jira-chart-search-input").focus()},handleInsertButton:function(){if(this.isFormValid()&&this.isResultValid()){AJS.Editor.JiraChart.enableInsert()}else{AJS.Editor.JiraChart.disableInsert()}}};
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.extra.jira:jirachart-macro', location = '/jirachart/piechart-panel.js' */
AJS.Editor.JiraChart.Panel.PieChart=function(d){AJS.Editor.JiraChart.Panel.call(this);var a="Pie Chart";var c="pie";var b=this;this.title=a;this.chartType=c;this.containerId="#jira-chart-content-pie";this.clickableElements=".jira-chart-search button, .jira-chart-show-border, .jira-chart-show-infor";this.onChangeElements="#jira-chart-statType, #jira-chart-width";this.isFormValid=function(){return AJS.Editor.JiraChart.Helper.isChartWidthValid(b.chartElements.width)&&AJS.Editor.JiraChart.Helper.isJqlNotEmpty(b.chartElements.jql)};this.isResultValid=function(){return this.container.find("#chart-preview-iframe").contents().find(".jira-chart-macro-wrapper").length};this.bindingActions=function(){var e=this;AJS.Editor.JiraChart.Panel.prototype.bindingActions.call(e);e.container.find(".widthInfo").tooltip({gravity:"w"})};this.bindingServerChange=function(){b.chartElements.server.change(function(){AJS.Editor.JiraChart.Helper.populateStatType(b.container,b.chartElements.statType);if(b.isFormValid()){AJS.Editor.JiraChart.search(b.container)}else{AJS.Editor.JiraChart.disableInsert()}})};this.bindingChartElements=function(){this.chartElements=AJS.Editor.JiraChart.Helper.bindingCommonChartElements(this.container);this.chartElements.statType=this.container.find("#jira-chart-statType")};this.getChartParamsRequest=function(){var f=this.getMacroParamsFromDialog();var e=AJS.Editor.JiraChart.Helper.getCommonChartParamsRequest(f,this.chartType);e.macro.params.statType=f.statType;return e};this.getMacroParamsFromDialog=function(){var e=AJS.Editor.JiraChart.Helper.getCommonMacroParamsFromDialog(this.chartElements,this.container);e.chartType=c;e.statType=this.chartElements.statType.val();return e};this.bindingDataFromMacroToForm=function(e){if(e){AJS.Editor.JiraChart.Helper.bindingCommonDataFromMacroToForm(this.chartElements,e);this.chartElements.statType.val(e.statType)}};this.preBinding=function(){AJS.Editor.JiraChart.Helper.populateStatType(this.container,this.container.find("#jira-chart-statType"))}};AJS.Editor.JiraChart.Panel.PieChart.prototype=AJS.Editor.JiraChart.Panel.prototype;AJS.Editor.JiraChart.Panel.PieChart.prototype.constructor=AJS.Editor.JiraChart.Panel.PieChart;AJS.Editor.JiraChart.Panels.push(new AJS.Editor.JiraChart.Panel.PieChart(AJS.$));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.extra.jira:jirachart-macro', location = '/jirachart/createdvsresolvedchart-panel.js' */
AJS.Editor.JiraChart.Panel.CreatedVsResolvedChart=function(e){AJS.Editor.JiraChart.Panel.call(this);var d="createdvsresolved";var c=this;var a=function(){c.container.find("#created-vs-resolved-chart-periodName").val("daily");c.container.find("#created-vs-resolved-chart-daysprevious").val("30")};var b=function(){var h=c.chartElements.periodName.val();var g=e.trim(c.chartElements.daysprevious.val());var f=c.container.find(".days-previous-error");if(g===""){c.container.find(".days-previous-error").html("Days Previously is required field.");return false}if(!AJS.Editor.JiraChart.Helper.isNumber(g)||g<0){f.html("Days Previously must be a number and positive.");return false}switch(h){case"hourly":isValid=g<=10;if(!isValid){f.html(AJS.format("Days must not exceed {0} for {1} period",10,h))}break;case"daily":isValid=g<=300;if(!isValid){f.html(AJS.format("Days must not exceed {0} for {1} period",300,h))}break;case"weekly":isValid=g<=1750;if(!isValid){f.html(AJS.format("Days must not exceed {0} for {1} period",1750,h))}break;case"monthly":isValid=g<=7500;if(!isValid){f.html(AJS.format("Days must not exceed {0} for {1} period",7500,h))}break;case"quarterly":isValid=g<=22500;if(!isValid){f.html(AJS.format("Days must not exceed {0} for {1} period",22500,h))}break;case"yearly":isValid=g<=36500;if(!isValid){f.html(AJS.format("Days must not exceed {0} for {1} period",36500,h))}break;default:isValid=false}if(isValid){f.empty()}return isValid};this.title="Created vs Resolved";this.chartType=d;this.containerId="#jira-chart-content-createdvsresolved";this.clickableElements=".jira-chart-search button, .jira-chart-show-border, .jira-chart-show-infor, #created-vs-resolved-chart-cumulative, #created-vs-resolved-chart-showunresolvedtrend";this.onChangeElements="#created-vs-resolved-chart-periodName, #created-vs-resolved-chart-daysprevious, #created-vs-resolved-chart-versionLabel, #jira-chart-width";this.isFormValid=function(){var f=AJS.Editor.JiraChart.Helper.isChartWidthValid(c.chartElements.width);return b()&&f&&AJS.Editor.JiraChart.Helper.isJqlNotEmpty(c.chartElements.jql)};this.isResultValid=function(){return this.container.find("#chart-preview-iframe").contents().find(".jira-chart-macro-wrapper").length};this.init=function(f){AJS.Editor.JiraChart.Panel.prototype.init.call(this,f);a()};this.bindingChartElements=function(){this.chartElements=AJS.Editor.JiraChart.Helper.bindingCommonChartElements(this.container);this.chartElements.periodName=this.container.find("#created-vs-resolved-chart-periodName");this.chartElements.daysprevious=this.container.find("#created-vs-resolved-chart-daysprevious");this.chartElements.isCumulative=this.container.find("#created-vs-resolved-chart-cumulative");this.chartElements.showUnresolvedTrend=this.container.find("#created-vs-resolved-chart-showunresolvedtrend");this.chartElements.versionLabel=this.container.find("#created-vs-resolved-chart-versionLabel")};this.bindingActions=function(){AJS.Editor.JiraChart.Panel.prototype.bindingActions.call(this);this.container.find(".widthInfo").tooltip({gravity:"w"});this.container.find(".showunresolvedtrendInfo").tooltip({gravity:"w"});this.container.find(".cumulativeInfo").tooltip({gravity:"w"});this.container.find(".versionLabelInfo").tooltip({gravity:"w"});this.container.find(".daysPreviousInfo").tooltip({gravity:"w"})};this.getChartParamsRequest=function(){var g=this.getMacroParamsFromDialog();var f=AJS.Editor.JiraChart.Helper.getCommonChartParamsRequest(g,this.chartType);f.macro.params.periodName=g.periodName;f.macro.params.daysprevious=g.daysprevious;f.macro.params.isCumulative=g.isCumulative;f.macro.params.showUnresolvedTrend=g.showUnresolvedTrend;f.macro.params.versionLabel=g.versionLabel;return f};this.getMacroParamsFromDialog=function(){var f=AJS.Editor.JiraChart.Helper.getCommonMacroParamsFromDialog(this.chartElements,this.container);f.chartType=d;f.periodName=this.chartElements.periodName.val();f.daysprevious=e.trim(this.chartElements.daysprevious.val());f.isCumulative=this.chartElements.isCumulative.prop("checked");f.showUnresolvedTrend=this.chartElements.showUnresolvedTrend.prop("checked");f.versionLabel=this.chartElements.versionLabel.val();return f};this.resetDialogValue=function(){AJS.Editor.JiraChart.Panel.prototype.resetDialogValue.call(this);a()};this.bindingDataFromMacroToForm=function(f){if(f){AJS.Editor.JiraChart.Helper.bindingCommonDataFromMacroToForm(c.chartElements,f);c.chartElements.isCumulative.attr("checked",(f.isCumulative!=="false"));c.chartElements.showUnresolvedTrend.attr("checked",(f.showUnresolvedTrend==="true"));c.chartElements.periodName.val(f.periodName===""?"daily":f.periodName);c.chartElements.versionLabel.val(f.versionLabel);c.chartElements.daysprevious.val(f.daysprevious===""?"30":f.daysprevious)}}};AJS.Editor.JiraChart.Panel.CreatedVsResolvedChart.prototype=AJS.Editor.JiraChart.Panel.prototype;AJS.Editor.JiraChart.Panel.CreatedVsResolvedChart.prototype.constructor=AJS.Editor.JiraChart.Panels.CreatedVsResolvedChart;AJS.Editor.JiraChart.Panels.push(new AJS.Editor.JiraChart.Panel.CreatedVsResolvedChart(AJS.$));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.extra.jira:jirachart-macro', location = '/jirachart/twodimensionalchart-panel.js' */
AJS.Editor.JiraChart.Panel.TwoDimensionalChart=function(d){AJS.Editor.JiraChart.Panel.call(this);var c="twodimensional";var f=5;var b=this;var e=function(){var h=d(".twodimensional-number-of-result-error");var g=b.chartElements.numberToShow.val();if(AJS.Editor.JiraChart.Helper.isNumber(g)&&g>0){h.empty();return true}h.html("The number of rows should be a positive integer");return false};var a=function(){b.chartElements.numberToShow.val(f);b.chartElements.xstattype.val("statuses");b.chartElements.ystattype.val("assignees")};this.title="Two Dimensional";this.chartType=c;this.containerId="#jira-chart-content-twodimensional";this.clickableElements=".jira-chart-search button, .jira-chart-show-border, .jira-chart-show-infor, #twodimensional-show-total";this.onChangeElements="#twodimensional-xaxis, #twodimensional-yaxis, #twodimensional-number-of-result";this.isFormValid=function(){var g=e();return g&&AJS.Editor.JiraChart.Helper.isJqlNotEmpty(b.chartElements.jql)};this.isResultValid=function(){return this.container.find("#chart-preview-iframe").contents().find(".two-dimensional-chart-table").length};this.init=function(g){AJS.Editor.JiraChart.Panel.prototype.init.call(this,g);a()};this.bindingChartElements=function(){this.chartElements=AJS.Editor.JiraChart.Helper.bindingCommonChartElements(this.container);this.chartElements.xstattype=this.container.find("#twodimensional-xaxis");this.chartElements.ystattype=this.container.find("#twodimensional-yaxis");this.chartElements.sortBy=this.container.find("#twodimensional-sortby");this.chartElements.sortDirection=this.container.find("#twodimensional-sort-direction");this.chartElements.showTotals=this.container.find("#twodimensional-show-total");this.chartElements.numberToShow=this.container.find("#twodimensional-number-of-result")};this.getChartParamsRequest=function(){var h=this.getMacroParamsFromDialog();var g=AJS.Editor.JiraChart.Helper.getCommonChartParamsRequest(h,this.chartType);g.macro.params.xstattype=h.xstattype;g.macro.params.ystattype=h.ystattype;g.macro.params.sortBy=h.sortBy;g.macro.params.sortDirection=h.sortDirection;g.macro.params.showTotals=h.showTotals;g.macro.params.numberToShow=h.numberToShow;return g};this.getMacroParamsFromDialog=function(){var g=AJS.Editor.JiraChart.Helper.getCommonMacroParamsFromDialog(this.chartElements,this.container);g.chartType=c;g.xstattype=this.chartElements.xstattype.val();g.ystattype=d.trim(this.chartElements.ystattype.val());g.sortBy=d.trim(this.chartElements.sortBy.val());g.sortDirection=d.trim(this.chartElements.sortDirection.val());g.showTotals=this.chartElements.showTotals.prop("checked");g.numberToShow=this.chartElements.numberToShow.val();return g};this.bindingDataFromMacroToForm=function(g){if(g){AJS.Editor.JiraChart.Helper.bindingCommonDataFromMacroToForm(b.chartElements,g);b.chartElements.xstattype.val(g.xstattype);b.chartElements.ystattype.val(g.ystattype);b.chartElements.sortBy.val(g.sortBy);b.chartElements.sortDirection.val(g.sortDirection);b.chartElements.showTotals.attr("checked",g.showTotals==="true");b.chartElements.numberToShow.val(g.numberToShow)}};this.resetDialogValue=function(){AJS.Editor.JiraChart.Panel.prototype.resetDialogValue.call(this);a()};this.isImageChartExisted=function(){return this.container.find("#chart-preview-iframe").contents().find(".two-dimensional-chart-table").length>0};this.preBinding=function(){AJS.Editor.JiraChart.Helper.populateStatType(this.container,this.container.find("#twodimensional-xaxis"));AJS.Editor.JiraChart.Helper.populateStatType(this.container,this.container.find("#twodimensional-yaxis"));b.chartElements.xstattype.val("statuses");b.chartElements.ystattype.val("assignees")};this.bindingServerChange=function(){b.chartElements.server.change(function(){AJS.Editor.JiraChart.Helper.populateStatType(b.container,b.chartElements.xstattype);AJS.Editor.JiraChart.Helper.populateStatType(b.container,b.chartElements.ystattype);b.chartElements.xstattype.val("statuses");b.chartElements.ystattype.val("assignees");if(b.isFormValid()){AJS.Editor.JiraChart.search(b.container)}else{AJS.Editor.JiraChart.disableInsert()}})}};AJS.Editor.JiraChart.Panel.TwoDimensionalChart.prototype=AJS.Editor.JiraChart.Panel.prototype;AJS.Editor.JiraChart.Panel.TwoDimensionalChart.prototype.constructor=AJS.Editor.JiraChart.Panel.TwoDimensionalChart;AJS.Editor.JiraChart.Panels.push(new AJS.Editor.JiraChart.Panel.TwoDimensionalChart(AJS.$));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.officeconnector:officeconnector-editor-resources', location = 'javascript/property-panel.js' */
(function(){AJS.Confluence.PropertyPanel.Macro.registerButtonHandler("office-connector-download-file-button",function(L,G){var C=AJS.$(G).attr("data-macro-parameters");
var J=C.split("|");
var D={};
var H;
for(H=0;
H<J.length;
H++){var N=J[H];
var F=N.split("=");
if(F.length>1){D[F[0]]=F[1]
}}var B=AJS.Meta.get("page-id");
var O=AJS.Meta.get("content-type");
if(!D.space){D.space=AJS.Meta.get("space-key")
}addToUrlIfDefined=function(Q,R,P){if(Q&&R){if(P.charAt(P.length-1)!="?"){P+="&"
}P=P+Q+"="+encodeURI(R)
}return P
};
var K=AJS.Meta.get("context-path");
var E="/plugins/servlet/oc/getattachment?";
var A=K+E;
A=addToUrlIfDefined("title",D.page,A);
A=addToUrlIfDefined("date",D.date,A);
A=addToUrlIfDefined("space",D.space,A);
A=addToUrlIfDefined("filename",D.name,A);
A=addToUrlIfDefined("contextid",B,A);
A=addToUrlIfDefined("contexttype",O,A);
var M=(AJS.$.browser&&AJS.$.browser.msie)?"_blank":"download-office-attachment";
var I=window.open(A,M)
})
})();
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.web.resources:jira-controls', location = '/includes/js/ajs/class/class.js' */
(function(){var i=function(d){var a=function(){};a.prototype=d;return new a},h=!1,j=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;this.Class=function(){};Class.extend=function(){function d(){!h&&this.init&&this.init.apply(this,arguments)}var a,f=this.prototype;if(1<arguments.length){var c=AJS.$.makeArray(arguments);a=c.pop();var g;AJS.$.each(c,function(b,a){g=g?g.extend(a):a});return g.extend(this.prototype).extend(a)}a=arguments[0];h=!0;c=new this;h=!1;for(var b in a)if(c[b]="function"==typeof a[b]&&
"function"==typeof f[b]&&j.test(a[b]))c[b]=function(a,b){return function(){var c=this._super;this._super=f[a];var d=b.apply(this,arguments);this._super=c;return d}}(b,a[b]);else if("object"===typeof f[b]){var e=i(a[b]);AJS.$.each(f[b],function(a,b){if(e[a]){if("object"===typeof e[a]){var c=i(e[a]);AJS.$.each(b,function(a,b){c[a]||(c[a]=b)});e[a]=c}}else e[a]=b});c[b]=e}else c[b]=a[b];d.prototype=c;d.constructor=d;d.extend=arguments.callee;return d}})();
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.web.resources:jira-controls', location = '/includes/js/ajs/control/control.js' */
AJS.jiraTrigger=function(a,b){a=new jQuery.Event(a);jQuery(b||window.top.document).trigger(a);return!a.isDefaultPrevented()};
AJS.Control=Class.extend({INVALID:"INVALID",_throwReadOnlyError:function(a){Error(this.CLASS_SIGNATURE+": Sorry ["+a+"] is a read-only property")},_assignEvents:function(a,b){this._unassignEvents(a,b);if("string"===typeof b)for(var c in this._events[a])AJS.$(document).delegate(b,c,this._getDispatcher(a,c));else for(c in b=jQuery(b),this._events[a])b.bind(c,this._getDispatcher(a,c)),AJS.debug("AJS.Control bound eventType '"+c+"' for group '"+a+"' on target '"+(b[0].type||b[0])+"'")},_unassignEvents:function(a,
b){if("string"===typeof b)for(var c in this._events[a])AJS.$(document).undelegate(b,c,this._getDispatcher(a,c));else{b=jQuery(b);try{for(c in this._events[a])b.unbind(c,this._getDispatcher(a,c))}catch(g){var d=b.data("events");if(d)for(c in d)if(c in this._events[a]){for(var h=this._getDispatcher(a,c),f=d[c],e=0;e<f.length;e++)if(f[e]===h){f.splice(e,1);break}AJS.debug("AJS.Control unbound eventType '"+c+"' for group '"+a+"' on target '"+(b[0].type||b[0])+"'")}}}},_getDispatcher:function(a,b){var c=
a+"/"+b;this._dispatchers||(this._dispatchers={});if(!this._dispatchers[c]){var g=this._events[a][b],d=this;this._dispatchers[c]=function(c){AJS.debug("AJS.Control dispatching eventType '"+b+"' for group '"+a+"' on instance '"+d.type+"'");return g.call(d,c,AJS.$(this))}}return this._dispatchers[c]},_isValidInput:function(){return!0},_handleKeyEvent:function(a){if(this._isValidInput(a)){var b=AJS.Keyboard.SpecialKey,c=AJS.Keyboard.shortcutEntered(a);if(c){if(this.keys[c]){this.keys[c].call(this,a);
return}if((c===b.BACKSPACE||c===b.DELETE)&&this.keys.onEdit){this.keys.onEdit.call(this,a);return}}(b=AJS.Keyboard.characterEntered(a))&&this.keys.onEdit&&this.keys.onEdit.call(this,a,b)}},getCustomEventName:function(a){return(this.CLASS_SIGNATURE||"")+"_"+a},_getCustomEventArgs:function(){return[this]},trigger:function(a){return AJS.jiraTrigger(a,this)},_supportsBoxShadow:function(){var a=document.body.style;return void 0!==a.WebkitBoxShadow||void 0!==a.MozBoxShadow||void 0!==a.boxShadow},_setOptions:function(a){var b,
c,a=a||{};if(a instanceof AJS.$||"string"===typeof a||"object"===typeof a&&a.nodeName)a={element:a};b=AJS.$(a.element);c=b.getOptionsFromAttributes();this.options=AJS.$.extend(!0,this._getDefaultOptions(a),c,a);if(0===b.length)return this.INVALID},getCaret:function(a){var b=a.selectionStart;if(0<=b)return a.selectionEnd>b?-1:b;if(document.selection&&(b=document.selection.createRange(),0===b.text.length)){var c=b.duplicate();c.moveToElementText(a);c.setEndPoint("EndToStart",b);return c.text.length}return-1},
_render:function(){var a,b=arguments[0],c=[];for(a=1;a<arguments.length;a++)c.push(arguments[a]);return this._renders[b].apply(this,c)}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.web.resources:jira-controls', location = '/includes/js/ajs/input/keyboard.js' */
AJS.Keyboard={};
(function(e){function b(a,b,c){g[b]=a;h[a]=b;c&&(i[b]=!0);return a}function f(a){a=a.originalEvent||a;return null==a.which?a.keyCode:0!=a.which&&0!=a.charCode?a.which:null}function j(a){var a=a.originalEvent||a,b=AJS.Keyboard.specialKeyEntered(a);if(b)return b;if(e.browser.mozilla){if("keypress"===a.type&&(a=f(a),null!==a))return String.fromCharCode(a).toLowerCase()}else if("keypress"!==a.type)return String.fromCharCode(a.keyCode).toLowerCase()}var g={},h={},i={},c=AJS.Keyboard.SpecialKey={BACKSPACE:b("backspace",
8,!0),TAB:b("tab",9,!0),RETURN:b("return",13,!0),SHIFT:b("shift",16),CTRL:b("ctrl",17),ALT:b("alt",18),PAUSE:b("pause",19),CAPS_LOCK:b("capslock",20),ESC:b("esc",27,!0),SPACE:b("space",32,!0),PAGE_UP:b("pageup",33),PAGE_DOWN:b("pagedown",34),END:b("end",35),HOME:b("home",36),LEFT:b("left",37),UP:b("up",38),RIGHT:b("right",39),DOWN:b("down",40),INSERT:b("insert",45),DELETE:b("del",46),F1:b("f1",112),F2:b("f2",113),F3:b("f3",114),F4:b("f4",115),F5:b("f5",116),F6:b("f6",117),F7:b("f7",118),F8:b("f8",
119),F9:b("f9",120),F10:b("f10",121),F11:b("f11",122),F12:b("f12",123),NUMLOCK:b("numlock",144),SCROLL:b("scroll",145),META:b("meta",224)};c.eventType=function(){return e.browser.mozilla?"keypress":"keydown"};c.fromKeyCode=function(a){return g[a]};c.toKeyCode=function(a){return h[a]};c.isAscii=function(a){return!!i[a]};c.isSpecialKey=function(a){return!!c.toKeyCode(a)};AJS.Keyboard.characterEntered=function(a){a=a.originalEvent||a;if("keypress"===a.type&&(a=f(a),null!==a&&(!c.isAscii(a)||c.fromKeyCode(a)===
c.SPACE)))return String.fromCharCode(a)};AJS.Keyboard.specialKeyEntered=function(a){a=a.originalEvent||a;if(e.browser.mozilla){if("keypress"===a.type){var b=f(a);if(null===b)return c.fromKeyCode(a.keyCode);if(c.isAscii(b))return c.fromKeyCode(b)}}else if("keypress"!==a.type)return c.fromKeyCode(a.keyCode)};AJS.Keyboard.shortcutEntered=function(a){a=a.originalEvent||a;if(a.type===AJS.Keyboard.SpecialKey.eventType()){var b=AJS.Keyboard.specialKeyEntered(a),d="";a.altKey&&b!==c.ALT&&(d+=c.ALT+"+");a.ctrlKey&&
b!==c.CTRL&&(d+=c.CTRL+"+");a.metaKey&&(!a.ctrlKey&&b!==c.META)&&(d+=c.META+"+");a.shiftKey&&b!==c.SHIFT&&(d+=c.SHIFT+"+");if(b)return d+b;if(0<d.length&&"shift+"!==d&&(a=j(a)))return d+a}}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.web.resources:jira-controls', location = '/includes/js/ajs/input/mouse.js' */
(function(d){AJS.Mouse={};var b=AJS.Mouse.MotionDetector=function(){this.reset()};b.prototype.reset=function(){this._y=this._x=this._handler=null;this.moved=!1};b.prototype.wait=function(b){var a=this;a._handler||(this.reset(),d(window.top.document).bind("mousemove",a._handler=function(c){!a._x&&!a._y?(a._x=c.pageX,a._y=c.pageY):c.pageX===a._x&&c.pageY===a._y||(a.unbind(),a.moved=!0,b&&b.call(this,c))}))};b.prototype.unbind=function(){this._handler&&(d(window.top.document).unbind("mousemove",this._handler),
this.reset())}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.web.resources:jira-controls', location = '/includes/js/ajs/group/group.js' */
AJS.Group=AJS.Control.extend({init:function(){this.type=this.type||"Group";this.items=[];this.index=-1;this._assignEvents("instance",this)},addItem:function(a){this.items.push(a);this._assignEvents("item",a)},removeItem:function(a){var b=AJS.$.inArray(a,this.items);if(0>b)throw Error("AJS.Group: item ["+a+"] is not a member of this group");a.trigger("blur");b<this.index&&this.index--;this.items.splice(b,1);this._unassignEvents("item",a)},removeAllItems:function(){for(var a=0;a<this.items.length;a++)this._unassignEvents("item",
this.items[a]),this.items[a].trigger("blur");this.index=-1;this.items.length=0;this._unassignEvents("keys",document)},shiftFocus:function(a){AJS.debug("Group.shiftFocus called with offset: "+a);-1===this.index&&1===a&&(a=0);0<this.items.length&&(a=(Math.max(0,this.index)+this.items.length+a)%this.items.length,this.items[a].trigger("focus"))},prepareForInput:function(){this._assignEvents("keys",document)},_events:{instance:{focus:function(){0!==this.items.length&&(0>this.index?this.items[0].trigger("focus"):
this._assignEvents("keys",document))},blur:function(){0<=this.index?this.items[this.index].trigger("blur"):this._unassignEvents("keys",document)}},keys:{"keydown keypress":function(a){this._handleKeyEvent(a)}},item:{focus:function(a){var b=this.index;this.index=AJS.$.inArray(a.target,this.items);0>b?this.trigger("focus"):b!==this.index&&this.items[b].trigger("blur")},blur:function(a){this.index===AJS.$.inArray(a.target,this.items)&&(this.index=-1,this.trigger("blur"))},remove:function(a){this.removeItem(a.target)}}},
keys:{}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.web.resources:jira-controls', location = '/includes/js/components/select-grid.js' */
(function(e){AJS.SelectGrid=AJS.Group.extend({init:function(a){this.type=this.type||"SelectGrid";this._super();var b=e(Confluence.Templates.SelectGrid.gridOutline()),c=b.find("thead tr");e(a.columns).each(function(a,b){var d=AJS("th").addClass(b.getClassName()).text(b.heading);c.append(d)});this.gridContainer=e(a.gridContainer).append(b);this.getRowId=a.getRowId;this.table=b;this.columns=a.columns;this.selectionCallback=a.selectionCallback;this.body=b.find("tbody");this.body.delegate("a","click",
function(a){a.preventDefault()});this.dontShiftFocus=a.dontShiftFocus||function(){}},keys:{up:function(a){this.table.is(":visible")&&!this.dontShiftFocus()&&(this.shiftFocus(-1),a.preventDefault())},down:function(a){this.table.is(":visible")&&!this.dontShiftFocus()&&(this.shiftFocus(1),a.preventDefault())}},_addRow:function(a,b,c,f){e.isFunction(c)&&(f=c,c=!1);c?this.body.prepend(a):this.body.append(a);a=new h({row:a,data:b,callback:f,getRowId:this.getRowId,selectionCallback:f});this.addItem(a);return a},
clear:function(){this.removeAllItems();this.body.children().remove()},_addRows:function(a,b){var c=this,f=[];e(a).each(function(a,d){var h=c.columns,g,i,j,k;g=AJS("tr");e(h).each(function(a,b){i={outerClass:b.getClassName(d)||"",href:b.getHref&&b.getHref(d)||"",innerClass:b.getInnerClass&&b.getInnerClass(d)||"",title:b.getTitle&&b.getTitle(d)||"",text:b.getText(d)||""};j=i.href?"cellWithLink":"cellWithoutLink";k=Confluence.Templates.SelectGrid[j](i);g.append(k)});g.attr("data-id",c.getRowId(d));f.push(c._addRow(g,
d,b,c.selectionCallback))});return f},update:function(a){this.clear();!a||!a.length?AJS.debug("SelectGrid.update called with no data, returning."):(this._addRows(a),this.prepareForInput())},prependAndSelect:function(a,b){!a||!a.length?AJS.debug("SelectGrid.prependAndSelect called with no data, returning."):this._addRows(a,!0)[b||0].selectRow()},findItem:function(a){for(var b=0;b<this.items.length;b++)if(this.items[b].getRowId()==a)return this.items[b];AJS.debug("SelectGrid.findItem didn't find item, returning null.");
return null},select:function(a){(a=this.findItem(a))&&a.selectRow()},selectIndex:function(a){a=a||0;this.items[a]?this.items[a].selectRow():AJS.debug("SelectGrid.selectIndex couldn't select row with index "+a+", not found")},show:function(){this.gridContainer.removeClass("hidden")},hide:function(){this.gridContainer.addClass("hidden")},isVisible:function(){return!this.gridContainer.hasClass("hidden")}});var h=AJS.Control.extend({init:function(a){this.type="SelectableRow";this.$row=AJS.$(a.row);this.$row.data("properties",
a.data);this.getRowId=function(){return a.getRowId(a.data)};this.selectionCallback=a.selectionCallback;this._assignEvents("element",this.$row);this._assignEvents("instance",this);AJS.debug("SelectableRow initialized")},_events:{instance:{focus:function(){var a=this.$row;a.addClass("selected");this.selectionCallback(a,a.data("properties"))},blur:function(){this.$row.removeClass("selected")}},element:{click:function(){this.trigger("focus")}}},selectRow:function(){this.trigger("focus")}});AJS.SelectGrid.Column=
function(a){var b=function(b){return b[a.key]};return{key:a.key,heading:a.heading,getClassName:a.getClassName||function(){return a.className||a.key+"-field"},getHref:a.getHref,getInnerClass:a.getInnerClass,getTitle:a.getTitle,getText:a.getText||b}}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.web.resources:jira-controls', location = '/includes/js/components/select-grid.soy' */
// This file was automatically generated from select-grid.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.SelectGrid == 'undefined') { Confluence.Templates.SelectGrid = {}; }


Confluence.Templates.SelectGrid.gridOutline = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<table class="select-grid aui"><thead><tr class="data-table-header"></tr></thead><tbody></tbody></table>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.SelectGrid.cellWithLink = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<td class="', soy.$$escapeHtml(opt_data.outerClass), '"><a class="', soy.$$escapeHtml(opt_data.innerClass), '" href="', soy.$$escapeHtml(opt_data.href), '" title="', soy.$$escapeHtml(opt_data.title), '"><span>', soy.$$escapeHtml(opt_data.text), '</span></a></td>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.SelectGrid.cellWithoutLink = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<td class="', soy.$$escapeHtml(opt_data.outerClass), '"><span class="', soy.$$escapeHtml(opt_data.innerClass), '" title="', soy.$$escapeHtml(opt_data.title), '">', soy.$$escapeHtml(opt_data.text), '</span></td>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.web.resources:jira-controls', location = '/includes/js/components/result-grid.js' */
(function(e){AJS.ResultGrid=AJS.Control.extend({init:function(a){this.type=this.type||"ResultGrid";var c,f,j,g,i,d,h;f=a.gridContainer||e(a.baseElement).find(".data-table");f.length||AJS.debug("gridContainer for AJS.ResultGrid not found!");j=function(b){return b.id};c=new AJS.SelectGrid({gridContainer:f,columns:a.columns,selectionCallback:a.selectionCallback,getRowId:a.getRowId||j,dontShiftFocus:a.dontShiftFocus});d=a.messageHandler||AJS.MessageHandler({baseElement:e(a.baseElement).find(".message-panel")});
h=a.noResultMessage||"There are no results.";e.extend(this,{update:function(b,a){d.clearMessages();g&&(g(),i.remove(),g=null);c.clear();if(!b||!b.length){c.hide();var k=e.isFunction(h)?h(a):h;d.displayMessages(k);return!1}c.update(b);c.show();return!0},updateAndSelect:function(b,c,a){this.update(b,c)&&this.selectIndex(a)},prependAndSelect:function(b,a){!b||!b.length?AJS.debug("ResultGrid.prependAndSelect called with no data, returning."):(d.clearMessages(),c.prependAndSelect(b,
a),c.show())},select:function(b){c.select(b)},selectIndex:function(b){c.selectIndex(b)},clear:function(){d.clearMessages();c.hide()},loading:function(){c.show();var b=f.width(),a=f.height();this.clear();if(!g){var d,e;d=b/2-73;e=a/2-73;i=AJS("div").addClass("spinner-container").width(b-d).height(a-e).css({"padding-left":d,"padding-top":e}).insertAfter(f);g=Raphael.spinner(i[0],60,"#666")}},isVisible:function(){return c.isVisible()}})}})})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.web.resources:dialog-breadcrumbs', location = '/includes/js/dialog-breadcrumbs.js' */
jQuery.fn.renderBreadcrumbs=function(e){var h=jQuery,i=this,b=[],a=0,g=e.length-1,c=e[a];c.url.indexOf("~");var f=i.closest(".breadcrumbs-container").width(),j=function(){return i.width()<f};for(b.push(Confluence.Templates.Dialog.breadcrumbItem({text:c.title,title:c.title,className:a==g?"last":""}));a++<g;)c=e[a],b.push(Confluence.Templates.Dialog.breadcrumbItem({text:c.title,title:c.title,className:a==g?"last":""}));this.html(b.join(""));e=h("li a span",this);e.each(function(a){0!=a&&a!=g&&h(this).shortenUntil(j)});
h(e.get(0)).shortenUntil(j);h(e.get(g)).shortenUntil(j);return this};
AJS.toInit(function(e){var h=e("#confluence-context-path").attr("content");AJS.MoveDialog||(AJS.MoveDialog={});var i={};AJS.MoveDialog.getBreadcrumbs=function(a,g,c){var f=a.userName?a.userName:a.pageId?a.pageId+":"+a.fileName:a.spaceKey+":"+a.title+":"+a.postingDay+":"+a.fileName;f in i?g(i[f],"success"):e.ajax({type:"GET",dataType:"json",data:a,url:h+"/pages/breadcrumb.action",error:c||function(){},success:function(a,b){if(!a||!a.breadcrumbs)c(a,b);else{for(var d=e.makeArray(a.breadcrumbs);d[0]&&
a.type!="userinfo"&&/peopledirectory\.action$/.test(d[0].url);)d.shift();a.type=="page"&&(d[1]&&/pages\.action/.test(d[1].url))&&d.splice(1,1);d.type=a.type;i[f]=d;g(d,b)}}})};AJS.MoveDialog.Breadcrumbs=function(a,g){var c=0;return{update:function(f,j){a.html(Confluence.Templates.Dialog.breadcrumbLoading());var b=c=c+1,d=function(){if(b!=c){AJS.debug("Breadcrumb response for ",f," is stale, ignoring.");return true}return false};(g||AJS.MoveDialog.getBreadcrumbs)(f,function(c,g){if(!d())if(g!="success"||
!c)a.html(Confluence.Templates.Dialog.breadcrumbError());else{var b=f.spaceKey;a.renderBreadcrumbs(c);if(!(b=b!=AJS.Meta.get("space-key")))a:{for(b=1;b<c.length;b++)if(c[b].title==AJS.Meta.get("page-title")){b=false;break a}b=true}if(b){j.clearErrors();e(j.moveButton).prop("disabled",false)}else{j.error("You cannot move a page to be underneath itself or its children.");e("li:last-child",a).addClass("warning")}}},function(b){if(!d()){a.html(Confluence.Templates.Dialog.breadcrumbError());b.status==404&&j.error("The specified page was not found.")}})}}};
AJS.Breadcrumbs={};AJS.Breadcrumbs.getBreadcrumbs=function(a,b,c){if(!a.id)throw Error("id is a required parameter in 'options'");if(!a.type)throw Error("type is a required parameter in 'options'");var f=a.id+":"+a.type;f in i?b(i[f],"success"):e.ajax({type:"GET",dataType:"json",data:a,url:Confluence.getContextPath()+AJS.REST.getBaseUrl()+"breadcrumb",error:c||function(){},success:function(a,h){if(!a||!a.breadcrumbs)c(a,h);else{for(var d=e.makeArray(a.breadcrumbs);d[0]&&a.type!="userinfo"&&/peopledirectory.action$/.test(d[0].url);)d.shift();
d.type=a.type;i[f]=d;b(d,h)}}})};Confluence.Dialogs||(Confluence.Dialogs={});Confluence.Dialogs.Breadcrumbs=AJS.Breadcrumbs;Confluence.Dialogs.Breadcrumbs.Controller=AJS.MoveDialog.Breadcrumbs;Confluence.Dialogs.Breadcrumbs.defaultGetBreadcrumbs=AJS.MoveDialog.getBreadcrumbs;var b=null;Confluence.PageLocation={get:function(){return b?b:{spaceName:AJS.Meta.get("space-name"),spaceKey:AJS.Meta.get("space-key"),parentPageTitle:AJS.Meta.get("parent-page-title")}},set:function(a){b=a}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.web.resources:dialog-breadcrumbs', location = '/includes/soy/dialog-breadcrumbs.soy' */
// This file was automatically generated from dialog-breadcrumbs.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.Dialog == 'undefined') { Confluence.Templates.Dialog = {}; }


Confluence.Templates.Dialog.breadcrumbItem = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<li><a class="', soy.$$escapeHtml(opt_data.className), '" title="', soy.$$escapeHtml(opt_data.title), '" tabindex="-1"><span>', soy.$$escapeHtml(opt_data.text), '</span></a></li>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Dialog.breadcrumbLoading = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<li class="loading"><span>', "Loading breadcrumbs\u2026", '</span></li>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Dialog.breadcrumbError = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<li class="warning last"><span>', soy.$$escapeHtml("Error retrieving breadcrumbs."), '</span></li>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-link-browser:link-browser-resources', location = 'js/link-object.js' */
(function(c){function i(a){return c.nodeName(a,"img")?a:a.hasChildNodes()&&1==a.childNodes.length&&c.nodeName(a,"a")&&c.nodeName(a.firstChild,"img")?a.firstChild:null}function j(a){return!a?"":c(a).attr("data-linked-resource-default-alias")||c(a).attr("src")}function g(a){var b={};"A"==a.nodeName&&c(a.attributes).each(function(){b[this.name]=this.value});return b}function h(a,b){for(var c=a;c&&c!=b;){if(3!=c.nodeType)return!1;c=c.nextSibling}return 3==b.nodeType}Confluence.Link={isLink:function(a){return a&&
!!a.fillNode}};var e=function(a){if(Confluence.Link.isLink(a))return a;var b={insert:function(){return Confluence.Editor.LinkAdapter.setLink(b)},fillNode:function(a){var b=this.attrs;b.href=b.href||"#";a.attr(b);this.classes&&this.classes.length&&a.addClass(this.classes.join(" "));a.html(this.body.html);return a},getData:function(){var a={},b;for(b in this)this.hasOwnProperty(b)&&!c.isFunction(this[b])&&(a[b]=this[b]);return a},getLinkedImage:function(){return this.body&&this.body.jquery?1==this.body.length&&
this.body.is("img")&&this.body:null},getResourceId:function(){return this.attrs["data-linked-resource-id"]||""},getResourceVersion:function(){return this.attrs["data-linked-resource-version"]||""},isToConfluenceEntity:function(){return this.attrs["data-linked-resource-id"]},isToAttachmentOnSamePage:function(a){return"attachment"==this.attrs["data-linked-resource-type"]&&this.attrs["data-linked-resource-container-id"]==a},isCustomAtlassianContentLink:function(){return this.classes&&this.classes.length?
-1!=c.inArray("confluence-link",this.classes):!1},hasAnchor:function(){return this.attrs["data-anchor"]},getResourceType:function(){return this.attrs["data-linked-resource-type"]},getDefaultAlias:function(){return this.attrs["data-linked-resource-default-alias"]},getHref:function(){return this.attrs.href},getAnchor:function(){return this.attrs["data-anchor"]},getHtml:function(){return this.body.html},getShortcut:function(){return this.attrs["data-linked-resource-shortcut"]},isHrefValid:function(){return this.attrs.href&&
"http://"!=this.attrs.href},isImage:function(){return this.body.isImage},isNewLink:function(){return c.isEmptyObject(this.attrs)},isShortcutLink:function(){return"shortcut"===this.getResourceType()},showsBreadcrumbs:function(){return!0}};if(a&&a.attrs){var e={},f=null;c.each(a.attrs,function(a,b){"class"==a?f=b:e[a]=b});a.attrs=e;if(f){var d=f.split(" ");a.classes=a.classes&&a.classes.length?a.classes.concat(d):d}}c.extend(b,a);return b};Confluence.Link.fromData=function(a){return e(a)};Confluence.Link.fromNode=
function(a,b){e({attrs:{},body:{html:b,text:b}});return e({attrs:g(a),body:{html:b,text:b}})};Confluence.Link.fromSelectedAnchor=function(a,b){var k=c(a),f=i(a),d=!f&&h(a.firstChild,a.lastChild);return e({attrs:g(a),body:{isEditable:d,isImage:!!f,html:k.html(),imgName:j(f),text:b}})};Confluence.Link.fromSelection=function(a,b,c,f){var b=i(b),d;if(d=!b)if(a.collapsed)d=!0;else if(d=a.startContainer,d==a.endContainer)d=3==d.nodeType?!0:h(d.childNodes[a.startOffset],d.childNodes[a.endOffset-1]);else{var g=
tinymce.activeEditor.dom;d=g.isBlock(a.startContainer)?a.startContainer.childNodes[a.startOffset]:a.startContainer;a=g.isBlock(a.endContainer)?a.endContainer.childNodes[a.endOffset-1]:a.endContainer;a=d&&a&&d.parentNode==a.parentNode?{start:d,end:a}:null;d=!!a&&h(a.start,a.end)}return e({attrs:{},body:{isEditable:d,isImage:!!b,html:c,imgName:j(b),text:f}})};Confluence.Link.fromREST=function(a){var b=e({attrs:{"data-base-url":AJS.Confluence.getBaseUrl(),"data-linked-resource-id":a.id,"data-linked-resource-type":a.type,
"data-linked-resource-content-type":a.contentType,href:AJS.REST.findLink(a.link),"data-linked-resource-default-alias":a.title},body:{html:AJS.escapeHtml(a.title),text:AJS.escapeHtml(a.title)},classes:["confluence-link"]});"user"==a.type&&(b.attrs["data-linked-resource-type"]="userinfo");return b};Confluence.Link.createLinkToNewPage=function(a,b){return e({attrs:{"data-space-key":b,"data-content-title":a,href:AJS.contextPath()+"/pages/createpage.action?spaceKey="+b+"&title="+a},body:{html:AJS.escapeEntities(a),
text:a},classes:["createlink","confluence-link"]})};Confluence.Link.makeExternalLink=function(a){return e({attrs:{href:a},body:{html:a,text:a}})};Confluence.Link.isExternalLink=function(a){return a&&(a.match(/^(\/\/|mailto:|file:|http:|https:)/)||0===a.indexOf("\\"))}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-link-browser:link-browser-resources', location = 'js/link-adapter.js' */
Confluence.Editor.LinkAdapter=function(d){return{setLink:function(a){var b=AJS.Rte.getEditor(),b=d(b.dom.create("a"),b.getDoc());a.fillNode(b);a=tinymce.confluence.NodeUtils.replaceSelection(b);d("#comments-section").length&&AJS.Rte.fixEditorFocus();return a},getLink:function(){var a,b,c;a=AJS.Rte.getEditor().selection;var e=a.getNode();if(c=d(e).parents().andSelf().filter("a[href]")[0])return a.select(c),b=a.getContent({format:"text"}),Confluence.Link.fromSelectedAnchor(c,b);c=a.getRng(!0);b=a.getContent({format:"text"});
a=a.getContent();return Confluence.Link.fromSelection(c,e,a,b)}}}(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-link-browser:link-browser-resources', location = 'js/link-browser.js' */
Confluence.Editor.LinkBrowser=function(i){function p(){if(!d.prop("disabled")){d.prop("disabled",!0);AJS.debug("link-browser.js: submit");g.preSubmit&&g.preSubmit();var a=e.getLink();m();a.insert();AJS.trigger("closed.link-browser")}}function m(){j.hide().remove();AJS.Rte.BookmarkManager.restoreBookmark()}function n(){m();AJS.trigger("closed.link-browser")}function q(a,d,k){var b=d.key,d=d.label,c=b+"-panel",f=Confluence.Templates.LinkBrowser[b+"Panel"]({atlToken:AJS.Meta.get("atl-token")});j.addPanel(d,
f,c,c+"-id");var a=j.get("panel:"+a),h=k.tabs[b];h.panelObj=a;h.key=b;h.createPanel({baseElement:i(a[0].body)});a[0].onblur=h.onDeselect;a[0].onselect=function(){var a=!!h.hasBreadcrumbs;AJS.debug("Link Browser: on tab select, breadcrumbs enabled: "+a);h.onSelect();e.refresh(a);g=h};return h}var j,e,d,g;return{SEARCH_PANEL:"search",ATTACHMENTS_PANEL:"attachments",WEBLINK_PANEL:"weblink",ADVANCED_PANEL:"advanced",open:function(a){if(i(".aui-dialog:visible").length)return null;a=a||{};AJS.Rte.BookmarkManager.storeBookmark();
a.linkInfo=a.linkInfo||Confluence.Editor.LinkAdapter.getLink();if(a.opener)return a.opener(a.linkInfo.alias,a.linkInfo);var o=a,a={tabs:{},setLink:function(r,a){e.setLink(r,a)},getLink:function(){return e.getLink()},getSelectedDataTableItem:function(){return i(".data-table:visible tr.selected")},linkValid:function(a){d.prop("disabled",!a)},focusLinkText:function(){e.focusLinkText()||(AJS.debug("LinkBrowser: focusing submit button"),d.focus())},getLinkText:function(){return e.getLinkText()},isLinkTextVisible:function(){return e.isLinkTextVisible()},
hasBreadcrumbs:function(a){return e.hasBreadcrumbs(a)},getLocationPresenter:function(){return e},doSearch:function(a){this.tabs.search.doSearch(a)},getSearchTextField:function(){return this.tabs.search.getSearchTextField()},moveLocationPanel:function(a){e.moveLocationPanel(a)},restoreLocationPanel:function(){e.restoreLocationPanel()},gotoPanel:function(a){this.popup.gotoPanel(a)},getCurrentPanel:function(){return this.popup.getCurrentPanel()},setWebLinkURL:function(a){var b=this.tabs.weblink;g!=b?
AJS.debug("Cannot set URL "+a+" on hidden Web Link panel"):b.setURL(a)},getWebLinkUrl:function(){var a=this.tabs.weblink;return g!=a?(AJS.debug("Cannot get URL "+url+" on hidden Web Link panel"),null):a.getURL()},getTitle:function(){return this.popup.getTitle()},getSubmitButtonText:function(){return d.text()},isSubmitButtonEnabled:function(){return d.is(":enabled")},isVisible:function(){return this.popup.isVisible()},getAdvancedTextField:function(){var a=this.tabs.advanced;return g!=a?(AJS.debug("Cannot get link text on hidden advanced panel"),
null):a.getLink()},setAdvancedTextField:function(a){var b=this.tabs.advanced;g!=b?AJS.debug("Cannot set link text on hidden advanced panel"):b.setLink(a)},submit:p,cancel:n},k=o.linkInfo,b=k.isNewLink(),c,f;c=new AJS.ConfluenceDialog({width:840,height:590,id:"insert-link-dialog",onCancel:n,onSubmit:p});f=b?"Insert link":"Edit link";b=b?"Insert":"Save";c.addHeader(f);
c.addButton(b,p);c.addCancel("Cancel",n);c.addHelpText("Hint: type \"[\" in the editor to see a list of suggested pages and insert a link.");f=i("#insert-link-dialog .dialog-tip");f.attr("title",f.text());i("#insert-link-dialog .dialog-components .dialog-title").prepend(Confluence.Templates.LinkBrowser.helpLink());d=c.get("button:0")[0].item;d.attr("id","link-browser-insert");d.prop("disabled",!0);j=c;a.popup=j;AJS.trigger("dialog-created.link-browser",[a]);e=Confluence.Editor.LinkBrowser.LinkInfoPresenter(a);
e.setLinkBody(k.body);o=o.panelKey;c=i("#link-browser-tab-items").find("div").map(function(){var a=i(this);return{key:a.text(),weight:a.attr("data-weight"),label:this.title}}).sort(function(a,b){return a.weight-b.weight});var h="template"!==AJS.Meta.get("content-type");c=i.grep(c,function(a){return h||"attachments"!==a.key});var m;f=null;for(var b=0,s=c.length;b<s;b++){var l=q(b,c[b],a);0==b&&(m=l);!k.isNewLink()&&i.isFunction(l.handlesLink)&&l.handlesLink(k)?(f=l,l.openedLink=k):o==l.key&&(f=l)}f?
a.popup.overrideLastTab():f=m;g=f;j.popup.element.find(".dialog-page-body:first").append(e.getContainer());g.panelObj.select();g.openedLink=null;j.show();AJS.trigger("dialog-shown.link-browser",j);return a},cancel:n}}(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-link-browser:link-browser-resources', location = 'js/link-browser-location.js' */
(function(t){Confluence.Editor.LinkBrowser.LinkInfoPresenter=function(u){function i(){return AJS.escapeHtml(n())}function n(){return d.val()}function o(a){f.closest(".row").toggleClass("hidden",!a);b.toggleClass("has-breadcrumbs",!!a)}function p(){return d.is(":visible")}var b,f,j,e,d,k,q,r,l,g,m,c,h;b=t(Confluence.Templates.LinkBrowser.locationPanel());f=b.find("#breadcrumbs-container");j=Confluence.Dialogs.Breadcrumbs.Controller(f,AJS.Breadcrumbs.getBreadcrumbs);q=b.find(".link-image");r=b.find(".link-mixed");
g=b.find("#link-image-filename");l=b.find("#link-mixed-content");k=b.find(".link-text");d=k.find("input");d.change(function(a){a.keyCode=a.keyCode||a.which;a.keyCode&&13!=a.keyCode&&d.removeClass("default-alias")});return{setLink:function(a,b){AJS.debug("Link Browser: setting link : "+a);var c=a.attrs["data-linked-resource-default-alias"]||a.getHtml();if(""==i()||d.hasClass("default-alias"))d.addClass("default-alias"),d.val(c);if(b&&a.getResourceId()&&a.getResourceType()){var s={clearErrors:function(){},
error:function(){},select:function(a){j.update(a,s)}},c={id:a.getResourceId(),type:a.getResourceType()};j.update(c,s)}o(b);e=a;u.linkValid(e&&e.isHrefValid())},getLink:function(){if(!e)return null;var a=m;a||((a=i())||(a=e.getDefaultAlias()||e.getHref()),a={html:a});e.body=a;return e},refresh:function(a){e&&o(a)},setLinkBody:function(a){m||(a.isEditable?d.val(a.text):a.isImage?g.text(a.imgName):l.text(a.text),m=a.isEditable?null:a,k.toggleClass("hidden",!a.isEditable),q.toggleClass("hidden",!a.isImage),
r.toggleClass("hidden",a.isEditable||a.isImage))},getContainer:function(){return b},isLinkTextVisible:p,isLinkImageVisible:function(){return g.is(":visible")},isLinkMixedContentVisible:function(){return l.is(":visible")},focusLinkText:function(){return p()?(AJS.debug("LinkInfoPresenter.focusLinkText focusing alias"),d.select(),!0):!1},getLinkText:i,getRawLinkText:n,getLinkImageName:function(){return g.text()},moveLocationPanel:function(a){c||(c=b.find(".row:not(.hidden) .field-group"),h=c.parent());
a.append(c);b.hide()},restoreLocationPanel:function(){h&&(h.append(c),b.show(),h=c=null)},hasBreadcrumbs:function(a){if(!f.is(":visible"))return!1;var b=a.length,d=f.find("li");if(d.length!=b)return!1;for(var c=0;c<b;c++)if(d.eq(c).text()!=a[c])return!1;return!0}}}})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-link-browser:link-browser-resources', location = 'js/link-browser-tab-search.js' */
"undefined"===typeof jQuery.expr[":"].focus&&(jQuery.expr[":"].focus=function(c){return c===document.activeElement&&(c.type||c.href)});
(function(c){AJS.bind("dialog-created.link-browser",function(m,h){var b,e,f,k,l=AJS.REST.getBaseUrl()+"search.json",i=function(a,c){Confluence.Link.isLink(a)||(a=Confluence.Link.fromREST(a));c&&b.val(a.attrs["data-linked-resource-default-alias"]);h.setLink(a,true);h.focusLinkText()},j=function(a){AJS.debug("link-browser-tab-search.js: doing search");b.trigger("hide.autocomplete");var d=c.trim(b.val());if(d){f.loading();AJS.getJSONWrap({url:l,data:{search:"site",query:d,spaceKey:e.val()},successCallback:function(d){if(c.isFunction(a)){f.update(d.result);
a()}else f.updateAndSelect(d.result);b.trigger("hide.autocomplete")},messageHandler:k})}else c.isFunction(a)&&a()};h.tabs.search={hasBreadcrumbs:true,createPanel:function(a){var d=a.baseElement;b=d.find("#link-search-text");e=d.find("#search-panel-space");var g=Confluence.PageLocation.get();e.find("option:eq(1)").text(g.spaceName).val(g.spaceKey);e.change(function(){b.attr("data-spacekey",e.val());b.trigger("clearCache.autocomplete")});Confluence.Binder.autocompleteSearch(b.parent());b.bind("selected.autocomplete-content",
function(a,b){if(b.searchFor)j();else{f.clear();i(b.content,false)}});g=[AJS.SelectGrid.Column({key:"title",heading:"Title",getHref:function(a){return AJS.REST.findLink(a.link)},getInnerClass:function(a){return a.iconClass||"content-type-"+a.type}}),AJS.SelectGrid.Column({key:"space",heading:"Space",getText:function(a){return a.space&&a.space.title||""}}),AJS.SelectGrid.Column({key:"last-modified",heading:"Last Modified",
getText:function(a){return a.lastModifiedDate&&a.lastModifiedDate.friendly||""},getTitle:function(a){return a.lastModifiedDate&&a.lastModifiedDate.date||""}})];k=AJS.MessageHandler({baseElement:a.baseElement.find(".message-panel")});f=new AJS.ResultGrid({baseElement:a.baseElement,columns:g,selectionCallback:function(a,b){i(b)},noResultMessage:"No search results found.",dontShiftFocus:function(){return c(b).add(e).is(":focus")}});d.find(".search-form").submit(function(){j();
return false}).keydown(function(a){if(a.keyCode===13&&!c(".aui-dropdown:visible .active",this).length){c("#search-panel-button").focus();a.stopPropagation()}})},onSelect:function(){AJS.debug("Link Browser Search panel selected");var a=this.openedLink;if(a){AJS.debug("Link Browser Search panel setting link info");i(a,true)}else b.focus()},handlesLink:function(a){return a.isCustomAtlassianContentLink()&&!a.hasAnchor()&&!a.isShortcutLink()&&!a.isToAttachmentOnSamePage(AJS.Meta.get("content-id"))},doSearch:function(a,
c){b.val(a);j(c)},isResultGridVisible:function(){return f.isVisible()},getSearchTextField:function(){return b}}})})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-link-browser:link-browser-resources', location = 'js/link-browser-tab-history.js' */
(function(){AJS.bind("dialog-created.link-browser",function(g,d){var c=AJS.REST.makeUrl("session/history.json?max-results=20"),e,f;d.tabs.recentlyviewed={createPanel:function(b){var c=[AJS.SelectGrid.Column({key:"title",heading:"Title",getHref:function(a){return AJS.REST.findLink(a.link)},getInnerClass:function(a){return a.iconClass||"content-type-"+a.type}}),AJS.SelectGrid.Column({key:"space",heading:"Space",
getText:function(a){return a.space&&a.space.title||""}}),AJS.SelectGrid.Column({key:"last-modified",heading:"Last Modified",getText:function(a){return a.lastModifiedDate&&a.lastModifiedDate.friendly||""},getTitle:function(a){return a.lastModifiedDate&&a.lastModifiedDate.date||""}})];f=AJS.MessageHandler({baseElement:b.baseElement.find(".message-panel")});e=new AJS.ResultGrid({baseElement:b.baseElement,columns:c,getRowId:function(a){return a.attachmentId},
selectionCallback:function(a,b){var c=Confluence.Link.fromREST(b);d.setLink(c);d.focusLinkText()},messageHandler:f,noResultMessage:"You have no recently viewed content."})},onSelect:function(){e.loading();AJS.getJSONWrap({url:c,messageHandler:f,successCallback:function(b){e.update(b.content);AJS.trigger("updated.link-browser-recently-viewed")}})}}})})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-link-browser:link-browser-resources', location = 'js/link-browser-tab-attachment.js' */
(function(k){"template"!==AJS.Meta.get("content-type")&&AJS.bind("dialog-created.link-browser",function(l,g){var e=AJS.REST.makeUrl("content/"+AJS.Meta.get("attachment-source-content-id")+"/attachments.json"),f,i,j,c;g.tabs.attachments={hasBreadcrumbs:!1,createPanel:function(a,b){var d=a.baseElement.find(".attach-file-form");f=k.extend({getUploaderController:function(){return Confluence.AttachmentUploader({baseElement:d},function(){return{onUploadSuccess:function(h){for(var a=0,b=h.length;a<b;a++)h[a].type=
"attachment";c.prependAndSelect(h)}}})}},b&&b(a));i=f.getUploaderController(a);j=i.getMessageHandler();var e=[AJS.SelectGrid.Column({key:"title",heading:"Name",getHref:function(a){return a.link?AJS.REST.findLink(a.link):a.url},getInnerClass:function(a){return a.iconClass}}),AJS.SelectGrid.Column({key:"size",heading:"Size",getText:function(a){return a.niceFileSize}}),AJS.SelectGrid.Column({key:"comment",heading:"Comment"})];
c=new AJS.ResultGrid({baseElement:a.baseElement,columns:e,selectionCallback:function(a,b){var c=Confluence.Link.fromREST(b);c.attrs["data-linked-resource-container-id"]=AJS.Meta.get("content-id");if(AJS.$.isArray(b.link))for(var d=0,e=b.link.length;d<e;d++){var f=b.link[d];"download"==f.rel&&(c.attrs.href=f.href)}g.setLink(c);g.focusLinkText()},noResultMessage:"There are no files on this page."})},onSelect:function(){var a=this.openedLink,b=g.getLink();c.loading();AJS.getJSONWrap({url:e,
messageHandler:j,successCallback:function(d){c.update(d.attachment);b?"attachment"==b.getResourceType()&&c.select(b.getResourceId()):a?c.select(a.getResourceId()):d.attachment.length&&c.select(d.attachment[0].id);AJS.debug("Loaded attachments")}})},handlesLink:function(a){return a.isToAttachmentOnSamePage(AJS.Meta.get("content-id"))}}})})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-link-browser:link-browser-resources', location = 'js/link-browser-tab-weblink.js' */
(function(h){AJS.bind("dialog-created.link-browser",function(j,c){function d(){return h.trim(b.val())}function e(){var a=d();if(!(AJS.Validate.url(a)||0==a.indexOf("mailto:"))){if(AJS.Validate.email(a))a="mailto:"+a;else{if(i.test(a))return;a="http://"+a}AJS.debug("Updating Link Browser Web Link URL to: "+a);b.val(a);a=Confluence.Link.makeExternalLink(a);c.setLink(a)}}var b,f,g,i=/[:/]/;g=c.tabs.weblink={createPanel:function(a){f=a.baseElement;b=f.find("input[name='destination']");b.keyup(function(){var a=
d();(a=a?Confluence.Link.makeExternalLink(a):null)&&c.setLink(a)});b.change(e);b.bind("paste",function(){AJS.debug("Link Browser web link url pasted");setTimeout(e,0)})},onSelect:function(){c.moveLocationPanel(f.find("form"));this.openedLink&&(g.setURL(this.openedLink.attrs.href),c.setLink(this.openedLink));setTimeout(function(){b.focus()})},onDeselect:c.restoreLocationPanel,preSubmit:e,handlesLink:function(a){return!a.isCustomAtlassianContentLink()},setURL:function(a){b.val(a);b.keyup();b.change()},
getURL:d}})})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-link-browser:link-browser-resources', location = 'js/link-browser-tab-advanced.js' */
(function(h){AJS.bind("dialog-created.link-browser",function(k,d){var b,e,f,g,i=function(a){a=h(a);if(a.length){var c=a.find("a:first");c.length?c.hasClass("unresolved")?(a=c.attr("shortcut-key"),c=c.attr("data-space-key"),a?e.text(AJS.format("{0} is not a recognised shortcut",a)):c&&e.text(AJS.format("{0} is not a recognised space",c))):(a=Confluence.Link.fromNode(c[0],b.val()),d.setLink(a)):e.text("The markup provided is not valid link markup")}},j=
function(a,c,b){AJS.debug("Error during conversion: textStatus = "+c+", errorThrown = "+b);e.text("An internal server error occurred")};tab=d.tabs.advanced={createPanel:function(a){f=a.baseElement;b=f.find("input[name='advanced-link']");e=f.find("div[name='advanced-error']");f.find("form").keydown(function(a){13==a.keyCode&&!d.isSubmitButtonEnabled()&&a.preventDefault()});b.keyup(function(){clearTimeout(g);e.text("");b.val()&&(g=setTimeout(function(){var a={wiki:"["+b.val()+
"]",entityId:AJS.Meta.get("content-id"),spaceKey:AJS.Meta.get("space-key")};AJS.$.ajax({type:"POST",contentType:"application/json; charset=utf-8",url:AJS.params.contextPath+"/rest/tinymce/1/wikixhtmlconverter",data:AJS.$.toJSON(a),dataType:"text",success:i,error:j,timeout:1E4})},200))})},setLink:function(a){b.val(a);b.keyup();b.change()},getLink:function(){return b.val()},onSelect:function(){d.moveLocationPanel(f.find("form"));this.openedLink&&(this.openedLink.isShortcutLink()?tab.setLink(this.openedLink.getShortcut()):
this.openedLink.getResourceId()?tab.setLink(this.openedLink.getDefaultAlias()):tab.setLink("#"+this.openedLink.getAnchor()),d.setLink(this.openedLink));setTimeout(function(){b.focus()})},onDeselect:function(){d.restoreLocationPanel()},handlesLink:function(a){return a.isShortcutLink()||a.hasAnchor()}}})})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-link-browser:link-browser-resources', location = 'templates/link-browser.soy' */
// This file was automatically generated from link-browser.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.LinkBrowser == 'undefined') { Confluence.Templates.LinkBrowser = {}; }


Confluence.Templates.LinkBrowser.searchPanel = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<form class="aui search-form" onsubmit="return false;"><fieldset class="inline"><div class="search-input"><label for="link-search-text" id="linkSearch-label" class="assistive">', soy.$$escapeHtml("Search"), '</label><input id="link-search-text" type="text" tabindex="0" class="text autocomplete-search" name="linkSearch" autocomplete="off" data-search-link-message="', soy.$$escapeHtml("Search for \x26lsquo;{0}\x26rsquo;"), '"></div><select tabindex="0" class="search-space select" id="search-panel-space"><option value="">', soy.$$escapeHtml("All content"), '</option><option value=""> </option></select><button type="submit" tabindex="0" class="aui-button" id="search-panel-button">', soy.$$escapeHtml("Search"), '</button></fieldset></form><div class="message-panel hidden"></div><div id="search-results-table" class="data-table hidden"></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.LinkBrowser.recentlyviewedPanel = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="recently-viewed-panel"><div class="message-panel hidden"></div><div class="data-table"></div></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.LinkBrowser.attachmentsPanel = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="attach-file-form"><form method="post" enctype="multipart/form-data" id="attachments-attachfile-form" action="', soy.$$escapeHtml(""), '/pages/attachfile.action" class="aui"><p>', soy.$$escapeHtml("Link to a file that is attached to this page or attach a new one."), '</p><div class="upload-field field-group"><label for="file_0">', soy.$$escapeHtml("Upload file"), '</label> <input type="file" name="file_0" class="upfile" id="file_0"> <input type="hidden" name="minorEdit_0" value="true"></div><input type="hidden" name="atl_token" value="', soy.$$escapeHtml(opt_data.atlToken), '" /></form><div class="upload-in-progress upload-field hidden">', soy.$$escapeHtml("Upload in progress\u2026"), '</div><div class="warning"><ul class="hidden message-panel"></ul></div></div><div class="message-panel hidden"></div><div id="attachments-table" class="attachment-list data-table"></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.LinkBrowser.weblinkPanel = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<form class="aui" onsubmit="return false;"><div class="field-group"><label id="destination-label" for="weblink-destination">', soy.$$escapeHtml("Address"), '</label><input type="text" tabindex="0" class="text" id="weblink-destination" name="destination"><div class="web-link-desc description">', soy.$$escapeHtml("Web, email or any other internet address"), '</div></div></form>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.LinkBrowser.advancedPanel = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<form class="aui" onsubmit="return false;"><div class="advanced-desc title">', AJS.format("Here you can insert a link into the page using \x3ca href\x3d\x22{0}\x22 target\x3d\x22_blank\x22\x3ewiki markup\x3c/a\x3e.","https://docs.atlassian.com/confluence/docs-58/Working+with+Links"), '</div><div class="field-group"><label id="advanced-label" for="advanced-link">', soy.$$escapeHtml("Link"), '</label><input type="text" tabindex="0" class="text" id="advanced-link" name="advanced-link"><div class="advanced-desc description">', soy.$$escapeHtml("To insert a link to a new page, type in the desired page title."), '<br/>', soy.$$escapeHtml("To insert an anchor link, type #anchorname."), '</div><div name="advanced-error" class="advanced-error error"></div></div></form>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.LinkBrowser.locationPanel = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div id="link-browser-location" class="location-info"><form class="aui"><div class="row hidden field-group"><label class="link-location-label" for="breadcrumbs-link">', soy.$$escapeHtml("Link location"), '</label><div class="breadcrumbs-container" id="breadcrumbs-link"><div class="breadcrumbs-line"><ol id="breadcrumbs-container" class="breadcrumbs"></ol></div></div></div></form><div class="row link-text"><form class="aui" onsubmit="return false;"><div class="field-group"><label for="alias" id="alias-label">', soy.$$escapeHtml("Link text"), '</label><input type="text" tabindex="0" class="text" name="alias" id="alias"></div></form></div><div class="row link-image hidden"><div class="readonly"><label for="link-image-filename">', soy.$$escapeHtml("Link image"), '</label><span id="link-image-filename" class="content-type-attachment-image"></span></div></div><div class="row link-mixed hidden"><div class="readonly"><label for="link-mixed-content">', soy.$$escapeHtml("Link text"), '</label><span id="link-mixed-content"></span></div></div></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.LinkBrowser.helpLink = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="dialog-help-link"><a href="', soy.$$escapeHtml("https://docs.atlassian.com/confluence/docs-58/Working+with+Links"), '" target="_blank">', soy.$$escapeHtml("Help"), '</a></div>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-link-browser:link-browser-editor-resources', location = 'tinymce/editor_plugin_src.js' */
tinymce.create("tinymce.plugins.LinkBrowser",{init:function(a){var b=Confluence.Editor.LinkBrowser;a.addButton("linkbrowserButton",{title:"confluence.conflink_desc",cmd:"mceConflink","class":"mce_conflink"});a.addCommand("mceConflink",b.open);a.addCommand("mceConfAttachments",function(){return b.open({panelKey:b.ATTACHMENTS_PANEL})})},getInfo:function(){return{longname:"Confluence Link Browser",author:"Atlassian",authorurl:"http://www.atlassian.com",version:tinymce.majorVersion+"."+tinymce.minorVersion}}});
tinymce.PluginManager.add("linkbrowser",tinymce.plugins.LinkBrowser);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-create-content-plugin:editor-resources', location = 'com/atlassian/confluence/plugins/createcontent/js/move-hidden-fields-hack.js' */
AJS.toInit(function(a){a("fieldset.create-content-template-fields > input").appendTo("form.editor")});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-create-content-plugin:create-from-template-macro-browser-resources', location = 'com/atlassian/confluence/plugins/createcontent/js/create-from-template-macro-fields.js' */
AJS.toInit(function(f){function b(h,i){h=h||AJS.Meta.get("space-key");Confluence.Blueprint.Dialog.requestWebItems(h,false).done(function(j){var k=Confluence.Blueprint.Dialog.loadedWebitems[h];if(_.isEmpty(k)){AJS.log("create-from-template-macro-fields: No Create dialog web items found for spaceKey >"+h+"<");return}i(j,k)}).fail(function(){AJS.log("create-from-template-macro-fields: requestWebItems call for spaceKey >"+h+"< failed")})}function c(h,i){b(i,function(k,l){var j=h.val();h.empty();_.each(l,function(m){var o=m.itemModuleCompleteKey;if((o=="com.atlassian.confluence.plugins.confluence-create-content-plugin:create-blank-page"||o=="com.atlassian.confluence.plugins.confluence-create-content-plugin:create-blog-post")){return}if(!(m.templateId||m.contentBlueprintId)){return}var n=f("<option></option>").text(m.name);n.attr("data-template-id",m.templateId);n.attr("data-blueprint-module-complete-key",m.blueprintModuleCompleteKey);n.attr("data-content-blueprint-id",m.contentBlueprintId);n.attr("data-create-result",m.createResult);n.val(m.templateId||m.contentBlueprintId);h.append(n)});h.val(j)})}var g={fields:{spacekey:{spaceKey:function e(k){var j=AJS.MacroBrowser.ParameterFields.spacekey(k),h=j.input.val();var i=function(){var l=j.input.val();if(l!=h){c(AJS.MacroBrowser.fields.templateName.input,l)}h=l};j.input.bind("selected.autocomplete-content",i);j.input.blur(i);return j}}},beforeParamsSet:function a(i,h){i.buttonLabel=i.buttonLabel||i.createButtonLabel||"Create from template";c(f("#macro-param-templateName"),i.spaceKey);return i},beforeParamsRetrieved:function d(j,k,h){var i=AJS.MacroBrowser.fields.templateName.input.find("option:selected");j.blueprintModuleCompleteKey=i.data("blueprint-module-complete-key");j.contentBlueprintId=i.data("content-blueprint-id");j.templateId=i.data("template-id");j.createResult=i.data("create-result");return j}};AJS.MacroBrowser.setMacroJsOverride("create-from-template",g)});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-autocomplete-resources-only', location = 'tinymce3/plugins/autocomplete/tinyMce-autocomplete-settings.js' */
Confluence.Editor.Autocompleter={Settings:{},log:function(c){return function(d,e,a){var b=null!=a&&"object"!=typeof a;AJS.debug(c+" - "+d+" : "+(e||null)+(null!=a?b?" = "+a:" >":""));a&&!b&&AJS.debug(a)}}};
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-autocomplete-resources-only', location = 'tinymce3/plugins/autocomplete/tinyMce-autocomplete-util.js' */
Confluence.Editor.Autocompleter.Util=function(k){var g=function(a,c,f,b,d){var e;a.statusMessage?e=[[{html:a.statusMessage,className:"error"}]]:(a=c?AJS.REST.makeRestMatrixFromSearchData(a):AJS.REST.makeRestMatrixFromData(a,b),e=AJS.REST.convertFromRest(a));f(e,c,function(a,b){d&&typeof d=="function"&&d(e,a,b)})};return{dropdownLink:function(a,c,f){return"<a href='#' class='"+(c||"")+"'><span class='icon "+(f||"")+"'></span><span>"+a+"</span></a>"},getRestData:function(a,c,f,b,d,e,h){var i=c(b),j=
a.settings.cacheManager,c=j.get(b);i?(a=k.ajax({type:"GET",url:i,data:f(a,b),dataType:"json",global:!1,timeout:5E3}),a.done(function(a){j.put(b,a)}),c?g(c,b,d,e,h):(a.done(function(a){g(a,b,d,e,h)}),a.fail(function(a,c){"timeout"==c&&g({statusMessage:"Timeout",query:b},b,d,e)}))):d([],b)}}}(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-autocomplete-resources-only', location = 'tinymce3/plugins/autocomplete/tinyMce-autocomplete-control.js' */
(function(i){Confluence.Editor.Autocompleter.Control=function(c,k){var a,d,g=Confluence.Editor.Autocompleter.log("Autocompleter.Control"),b={},p=c.selection,r=p.getRng(!0),n=r.startOffset,q=r.startContainer;d=q.nodeValue;var l=k.leadingChar,t=c.getDoc(),m=k.backWords||0,f=Confluence.Editor.Autocompleter.Settings[l||"["];a=!f||"undefined"===typeof f.preventStartNodes?"div.code, a[href], img, pre":f.preventStartNodes;if(i("#autocomplete",t).length)return AJS.debug("init","Autocomplete already exists, returning null."),
null;b.backWords=m;b.maxResults=k.maxResults||10;null==d&&(r.collapsed&&n&&q.childNodes[n-1])&&(q=q.childNodes[n-1],n=(d=q.nodeValue)&&d.length||0);var o="";if(null!=d)for(var o=(d+"").substring(0,n),j=q.previousSibling;j&&3==j.nodeType;)o=j.nodeValue+o,j=j.previousSibling;var j=[/([("'<\(\u201c\u2018]\[|[\ufeff\u200b\u2014\s\xa0].)$/,/(\([^!])$/,/(\/\/)$/],e;if(e=!m)if(e=o){a:{o+=l;e=0;for(var z=j.length;e<z;e++)if(j[e].test(o)){j=!0;break a}j=!1}e=!j}if(e)return g("init","Cursor is in wrong word location to start autocomplete, returning null."),
null;if(AJS.$(q).closest(a).length)return g("init","Cursor is in wrong node to start autocomplete, returning null."),null;Confluence.PropertyPanel&&Confluence.PropertyPanel.current&&(Confluence.PropertyPanel.shouldCreate=!1,Confluence.PropertyPanel.destroy());!l&&null==d&&(AJS.debug("init","No text available for suggestion, range is",r),d="");b.getContainer=function(){return i("#autocomplete",t)};a="";if(r.collapsed&&m&&d){a=q;d=n;j=function(b,h,a){!h.global&&(h=RegExp(h.source,"g"+"i".slice(0,h.ignoreCase)+
"m".slice(0,h.multiLine)));a==null?a=b.length:a<0&&(a=0);for(var b=b.substring(0,a+1),a=-1,c=0;(result=h.exec(b))!=null;){a=result.index;h.lastIndex=++c}return a};for(o=0;o<m;o++){e=a.nodeValue.substring(0,d);for(d=j(e,/\s+/,d);-1==d;)if((e=a.previousSibling)&&3==e.nodeType)a=e,(e=e.nodeValue)&&(d=j(e,/\s+/,e.length));else{o=m;break}}d+=1;tinymce.isIE&&1==m?(m=p.getRng(),m.moveStart("character",d-n),m.select()):(m=p.getRng(!0),m.setStart(a,d),m.setEnd(q,n),p.setRng(m))}a=p.getContent({format:"text"}).replace("\n",
"");g("init","suggestionHtml",a);n=AJS("span").attr("id","autocomplete");l&&n.append(AJS("span").attr("id","autocomplete-trigger").text(l));l=AJS("span").attr("id","autocomplete-search-text");l.text(AJS.Rte.HIDDEN_CHAR);n.append(l);p.setNode(n[0]);var s=b.getContainer();b.previousSearchText="";b.settings=f;!1!==f.cache&&!f.cacheManager?f.cacheManager=new AJS.Confluence.localStorageCacheManager(f.ch):!1===f.cache&&!f.cacheManager&&(f.cacheManager={get:i.noop,put:i.noop});f=i("#autocomplete-search-text",
b.getContainer());l=i(t.createElement("span")).text(a||AJS.Rte.HIDDEN_CHAR);f.empty().append(l);p.select(l[0],!0);p.collapse();var v=function(a,h){if(b.onBeforeKey&&!b.onBeforeKey(h,b.text())){tinymce.dom.Event.cancel(h);g("before","blocked by onBeforeKey: "+h.keyCode);return false}},w=function(a,h){var c=p.getRng(true),d=b.getContainer(),e=c.startContainer,c=e.parentNode;e.nodeType===3&&(c=c.parentNode);var f=(e=c?c.parentNode:null)?e.parentNode:null,d=c!==d[0]&&e!==d[0]&&f!==d[0];if(h.keyCode==
27||d){g("after","dying because of: "+(d?"outside search span":"escape pressed"));b.die()}else if(b.onAfterKey&&!b.onAfterKey(h,b.text())){tinymce.dom.Event.cancel(h);g("after","blocked by onAfterKey: "+h.keyCode);return false}},x=function(a,c){if(b.onKeyPress&&!b.onKeyPress(c,b.text())){tinymce.dom.Event.cancel(c);g("press","blocked by onKeyPress: "+c.keyCode);return false}},y=function(c,a){if(b.getContainer()[0]!=a.target.parentNode){g("click","Clicked outside of autocomplete, closing.");b.die()}};
c.onKeyDown.addToTop(v);c.onKeyUp.addToTop(w);c.onKeyPress.addToTop(x);c.onClick.addToTop(y);b.word="";k.keepAlias?g("init","No suggestion based on previous or selected text"):b.word=a;AJS.Rte.showElement(s[0]);f=tinymce.DOM.getPos(s[0]);l=s.height();b.left=f.x;b.top=f.y+l;b.text=function(a){var c=i("#autocomplete-search-text",b.getContainer());if(a!=null){c.html(a);return this}a=AJS.escapeEntities(c.text());return a.replace(AJS.Rte.HIDDEN_CHAR,"")};b.plainText=function(a){var c=i("#autocomplete-search-text",
b.getContainer());if(a!=null){c.text(a);return this}a=c.text();return a.replace(AJS.Rte.HIDDEN_CHAR,"")};var u=function(a,c){var d=b.getContainer();return Confluence.Editor.Autocompleter.Control.replaceWithTextAndGetRange(d,a,c)};b.replaceWithSelectedSearchText=function(){var a=b.text();g("replaceWithSelectedSearchText",a);u(a,false);return a};b.die=function(a){if(b.dying)AJS.debug("die","Already dying, returning.");else{b.dying=true;if(Confluence.PropertyPanel)Confluence.PropertyPanel.shouldCreate=
true;if(b.getContainer().length){g("die","Tearing down autocomplete, cleaning up autocompleter");a=(a||k.backWords?"":b.settings.ch)+b.text();r=u(a,true)}setTimeout(function(){g("die","Removing autocomplete-control keyboard listeners.");c.onKeyDown.remove(v);c.onKeyUp.remove(w);c.onClick.remove(y);c.onKeyPress.remove(x)},1);AJS.Rte.unbindScroll("autocomplete");i(document).unbind("click.autocomplete-outside");this.onDeath&&this.onDeath()}};AJS.Rte.bindScroll("autocomplete",function(a){AJS.debug("scrolling:",
a);if(AJS.Rte.isAnyPartShown(s))b.onScroll();else b.die()});i(document).bind("click.autocomplete-outside",function(a){i(a.target).closest("#autocomplete-dropdown, .aui-datepicker-dialog, .ui-datepicker-header").length||b.die()});AJS.Rte.getEditor().onBeforeExecCommand.add(function(a,c){c=="mceConfSavePage"&&b.die()});b.update=function(a){AJS.Rte.BookmarkManager.storeBookmark();u("",true);this.settings.update(this,a)};b.removeSpan=function(){b.getContainer().remove()};return b};Confluence.Editor.Autocompleter.Control.removeOrphanedControl=
function(){var c=i(AJS.Rte.getEditor().getDoc()),k=c.find("#autocomplete"),a;if(!k.length)return null;a=c.find("#autocomplete-trigger").text();c=c.find("#autocomplete-search-text").text();Confluence.Editor.Autocompleter.Control.replaceWithTextAndGetRange(k,c,!1);return{leadingChar:a,content:c}};Confluence.Editor.Autocompleter.Control.replaceWithTextAndGetRange=function(c,k,a){if(c.length){var k=k||"",a=a||!k,d=AJS.Rte.getEditor(),g=c[0].parentNode,b=AJS.Rte.Content.getChildIndex(g,c[0]),i=a?1:0,a=
d.selection.getRng(!0);a.setStart(g,b+i);a.setEnd(g,b+1);c.before(k||AJS.Rte.HIDDEN_CHAR).remove();d.selection.setRng(a);return a}AJS.log("replaceWithTextAndGetRange Error: attempting to replace a non-existent element")}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-autocomplete-resources-only', location = 'tinymce3/plugins/autocomplete/tinyMce-autocomplete-manager.js' */
Confluence.Editor.Autocompleter.Manager=function(k){Confluence.Editor.Autocompleter.log("Autocompleter.Manager");var c,a,g=function(i){c=Confluence.Editor.Autocompleter.Control(AJS.Rte.getEditor(),i);if(!c)return!1;var h=AJS.$(window).width(),e,g=function(b){var f=k("#autocomplete-dropdown"),d=c.getContainer(),a,i,g,l,j;f.length||(f=AJS("div").addClass("aui-dd-parent quick-nav-drop-down").attr("id","autocomplete-dropdown").appendTo("body"));a=AJS.Position.spaceAboveBelow(AJS.Rte.getEditorFrame(),
d);b.find("ol:has(a.menu-header)").addClass("top-menu-item");b.find("ol:empty").hide();f.append(b);g=AJS.Rte.Content.offset(d);l=Math.max(f.width()+g.left-h+10,0);i=g.left-l-0;b=b.outerHeight(!0);j=b+10;if(e){var m;m=1==e?a.above>=j:a.below>=j;m||(e=null)}e||(e=a.below>=j?2:a.above>=j?1:a.below>a.above?2:1);a=f.find(".autocomplete-dropdown-arrow");a.length||(a=k('<div class="autocomplete-dropdown-arrow"></div>'));1===e?(a.addClass("autocomplete-dropdown-bottom-arrow").css({top:b-1}),d=g.top-b-10):
(a.removeClass("autocomplete-dropdown-bottom-arrow").css("top",""),d=g.top+d.height()+10);a.css({left:l}).appendTo(f);f.css({position:"absolute",top:d,left:i})};a=AJS.inputDrivenDropdown({onShow:function(b){AJS.trigger("rte-autocomplete-on-show",{triggerChar:c.settings.ch});var a=AJS.Rte.getEditorFrame();a&&a.shim&&a.shim.hide();b.find("a.menu-header").unbind().click(function(b){b.preventDefault();c.die()});this.reset();c.settings.selectFirstItem&&b.find("a:not('.menu-header')").length&&AJS.dropDown.current.moveDown()},
dropdownPlacement:g,onDeath:function(){k("#autocomplete-dropdown").remove()},ajsDropDownOptions:{selectionHandler:function(b,a){b.preventDefault();var d=AJS.$.data(a[0],"properties");d&&"function"==typeof d.callback?d.callback(c):"menu-header"!=d.className&&c.update(d);c.die()},moveHandler:function(b,a){var c=AJS.dropDown.current;b&&b.find("a").is(".menu-header")&&("up"==a?c.moveUp():c.moveDown())},className:"autocomplete "+c.settings.dropDownClassName},getDataAndRunCallback:function(b){c&&c.settings.getDataAndRunCallback&&
c.settings.getDataAndRunCallback(c,b,function(f,d,e){f.unshift([{className:"menu-header dropdown-prevent-highlight",href:"#",name:c.settings.getHeaderText(c,b)}]);f.push(c.settings.getAdditionalLinks(c,b,e));a&&a.show(f,d,[d])})},dropDownDelay:c.settings.dropDownDelay});c.onBeforeKey=function(b,a){return 40==b.keyCode||38==b.keyCode||13==b.keyCode?(tinymce.dom.Event.cancel(b),!1):27==b.keyCode||9==b.keyCode||8==b.keyCode&&!a?(this.die(8==b.keyCode),!1):!0};c.onKeyPress=function(b){var a=String.fromCharCode(AJS.$.browser.msie?
b.keyCode:b.which);if(13==b.keyCode)return tinymce.dom.Event.cancel(b),!1;-1!=AJS.indexOf(this.settings.endChars,a)&&c.die();return!0};var n=/\S{2,}/;c.onAfterKey=function(b,e){if(40==b.keyCode||38==b.keyCode||13==b.keyCode){var d=AJS.dropDown.current;if(!d)return!1;if(-1==d.getFocusIndex()&&13==b.keyCode)return c.die(),c=null,!0;b.which||(b.which=b.keyCode);return d.moveFocus(b)}((d=8==b.keyCode&&!e)||n.test(e))&&a.change(e,d);return!0};c.onDeath=function(){a&&(a.remove(),a.closing=!0)};c.onScroll=
function(){a.dd&&g(a.dd.$)};a.change(c.text(),"force");return!0};return{getInputDrivenDropdown:function(){return a},triggerListener:function(c,h){if(h.metaKey)return!0;var e=AJS.$.browser.msie?h.keyCode:h.which;a&&a.closing&&(a=null);e=String.fromCharCode(e);!a&&e in Confluence.Editor.Autocompleter.Settings&&g({leadingChar:e})&&tinymce.dom.Event.cancel(h);return!0},shortcutFired:function(i,h){var e=h?0:1;a&&a.closing&&(a=null);a&&(e=h?0:c.backWords+1,c.die(),c=null);return g({leadingChar:i,backWords:e})},
reattach:function(){var a=Confluence.Editor.Autocompleter.Control.removeOrphanedControl();a&&Confluence.Editor.Autocompleter.Manager.shortcutFired(a.leadingChar)}}}(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-autocomplete-resources-only', location = 'tinymce3/plugins/autocomplete/editor_plugin_src.js' */
(function(){tinymce.create("tinymce.plugins.AutoComplete",{init:function(a){Confluence.Editor.Autocompleter.Settings={};a.onPostRender.add(function(){AJS.debug("Autocomplete enabled, adding keyPress listener");a.onKeyPress.addToTop(Confluence.Editor.Autocompleter.Manager.triggerListener);AJS.trigger("ready-editor-autocomplete")});a.onUndo.add(Confluence.Editor.Autocompleter.Manager.reattach);a.onRedo.add(Confluence.Editor.Autocompleter.Manager.reattach)},getInfo:function(){return{longname:"Auto Complete",
author:"Atlassian",authorurl:"http://www.atlassian.com",version:tinymce.majorVersion+"."+tinymce.minorVersion}}});tinymce.PluginManager.add("autocomplete",tinymce.plugins.AutoComplete)})();
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-autocomplete-resources-only', location = 'tinymce3/plugins/autocomplete-link/tinyMce-autocomplete-settings-links.js' */
define("confluence-editor/tinymce3/plugins/autocomplete-link/tinyMce-autocomplete-settings-links",["jquery","ajs"],function(j,d){return function(){var g=Confluence.Editor.Autocompleter,h=function(a){return a?Confluence.getContextPath()+"/rest/prototype/1/search.json":d.Meta.get("remote-user")?Confluence.getContextPath()+"/rest/prototype/1/session/history.json":null},i=function(a,b){var c={"max-results":a.maxResults};b&&(c.query=Confluence.unescapeEntities(b),c.search="name",c.preferredSpaceKey=d.Meta.get("space-key"));
return c};Confluence.Editor.Autocompleter.Settings["["]={ch:"[",cache:!1,endChars:["]"],dropDownClassName:"autocomplete-links",selectFirstItem:!0,getHeaderText:function(){return "Link suggestions"},getAdditionalLinks:function(a,b,c){b?(a="Search for &lsquo;{0}&rsquo;",a=d.format(a,b)):a="Search";var e=Confluence.Editor.LinkBrowser,a=[{className:"search-for",name:a,href:"#",callback:function(a){a.replaceWithSelectedSearchText();
a=e.open({panelKey:e.SEARCH_PANEL});a.doSearch(a.getLocationPresenter().getRawLinkText())}},{className:"dropdown-insert-link",html:g.Util.dropdownLink("Insert web link","dropdown-prevent-highlight","editor-icon"),callback:function(a){a.replaceWithSelectedSearchText();e.open({panelKey:e.WEBLINK_PANEL})}}];c&&c(b,a);return a},getDataAndRunCallback:function(a,b,c){Confluence.Editor.Autocompleter.Util.getRestData(a,h,i,b,c,"content",function(a,b,c){if(b){var f;if(!(f=
2>a.length))a=a[1][0].restObj,a="page"==a.type?a.space.key==d.Meta.get("space-key")&&a.title.toLowerCase()==b.toLowerCase():!1,f=!a;f&&c.push({className:"insert-create-page-link",html:g.Util.dropdownLink("Insert link to create page","dropdown-prevent-highlight","editor-icon"),callback:function(a){var c=Confluence.unescapeEntities(b),c=Confluence.Link.createLinkToNewPage(c,d.Meta.get("space-key"));a.update(c)}})}})},update:function(a,b){b.restObj&&(b=Confluence.Link.fromREST(b.restObj));
b.insert()}}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-autocomplete-resources-only', location = 'tinymce3/plugins/autocomplete-link/editor_plugin_src.js' */
(function(){tinymce.create("tinymce.plugins.AutoCompleteLink",{init:function(a){require(["confluence-editor/tinymce3/plugins/autocomplete-link/tinyMce-autocomplete-settings-links"],function(b){a.addCommand("mceConfAutocompleteLink",function(){Confluence.Editor.Autocompleter.Manager.shortcutFired("[")});a.addShortcut("ctrl+shift+k",a.getLang("AutoComplete"),"mceConfAutocompleteLink");b()})},getInfo:function(){return{longname:"Auto Complete Link",author:"Atlassian",authorurl:"http://www.atlassian.com",
version:tinymce.majorVersion+"."+tinymce.minorVersion}}});tinymce.PluginManager.add("autocompletelink",tinymce.plugins.AutoCompleteLink)})();
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-autocomplete-resources-only', location = 'tinymce3/plugins/autocomplete-media/tinyMce-autocomplete-settings-media.js' */
define("confluence-editor/tinymce3/plugins/autocomplete-media/tinyMce-autocomplete-settings-media",["jquery","ajs","confluence-editor/utils/attachments-insert"],function(g,d,h){return function(){var i=function(c){var b=d.params.attachmentSourceContentId||d.Meta.get("content-id");return c?Confluence.getContextPath()+"/rest/prototype/1/search.json":+b?Confluence.getContextPath()+"/rest/prototype/1/content/"+b+"/attachments.json":null},j=function(c,b){var a=d.MacroBrowser.getMacroMetadata("view-file")?
[]:"image word excel pdf powerpoint multimedia".split(" ");return b?{type:"attachment",attachmentType:a,search:"name","max-results":c.maxResults,query:b}:{attachmentType:a,"max-results":c.maxResults}};Confluence.Editor.Autocompleter.Settings["!"]={ch:"!",cache:!1,endChars:["!"],dropDownClassName:"autocomplete-media",selectFirstItem:!0,getHeaderText:function(){return d.MacroBrowser.getMacroMetadata("view-file")?"File suggestions":"Media suggestions"},
getAdditionalLinks:function(){var c="Open file library";return[{className:"dropdown-insert-image",html:Confluence.Editor.Autocompleter.Util.dropdownLink(c,"dropdown-prevent-highlight","editor-icon"),callback:function(b){b.replaceWithSelectedSearchText();Confluence.Editor.defaultInsertImageDialog()}},{className:"dropdown-insert-macro",html:Confluence.Editor.Autocompleter.Util.dropdownLink("Insert other media","dropdown-prevent-highlight",
"editor-icon"),callback:function(b){b.replaceWithSelectedSearchText();tinymce.confluence.macrobrowser.macroBrowserToolbarButtonClicked({selectedCategory:"media"})}}]},getDataAndRunCallback:function(c,b,a){Confluence.Editor.Autocompleter.Util.getRestData(c,i,j,b,a,"attachment")},update:function(c,b){d.trigger("rte-autocomplete-on-insert",{triggerChar:"!",selectedFile:b});var a=b.restObj,e=d.REST.wikiLink(a),f=a&&a.title||b.name;"Image"==a.niceType?(e.destination&&e.destination.replace(/^\^/,""),a=
g.extend({filename:f,contentId:b.ownerId||a.ownerId},e.params),tinymce.confluence.ImageUtils.insertFromProperties(a)):d.MacroBrowser.getMacroMetadata("view-file")&&"Multimedia"!==a.niceType?h.insertFilePlaceholder({name:f,page:a.parentTitle,space:a.space?a.space.key:"",date:a.datePath,ownerId:a.ownerId}):this._insertFile(f,b,e)},_insertFile:function(c,b,a){var e;switch(b.restObj.niceType){case "PDF Document":e="viewpdf";break;case "Word Document":e="viewdoc";break;case "Excel Spreadsheet":e="viewxls";
break;case "PowerPoint Presentation":e="viewppt";break;case "Multimedia":e="multimedia"}c={page:a.destination.substring(0,a.destination.indexOf("^")),name:c};d.MacroBrowser.getMacroJsOverride("viewdoc").beforeParamsRetrieved(c);c.page||delete c.page;e={contentId:d.Meta.get("content-id")||"0",macro:{name:e,params:c,body:""}};tinymce.confluence.MacroUtils.insertMacro(e)}}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-autocomplete-resources-only', location = 'tinymce3/plugins/autocomplete-media/editor_plugin_src.js' */
(function(){tinymce.create("tinymce.plugins.AutoCompleteMedia",{init:function(a){require(["confluence-editor/tinymce3/plugins/autocomplete-media/tinyMce-autocomplete-settings-media"],function(b){a.addCommand("mceConfAutocompleteImage",function(){Confluence.Editor.Autocompleter.Manager.shortcutFired("!")});a.addShortcut("ctrl+shift+m",a.getLang("AutoComplete"),"mceConfAutocompleteImage");b()})},getInfo:function(){return{longname:"Auto Complete Media",author:"Atlassian",authorurl:"http://www.atlassian.com",
version:tinymce.majorVersion+"."+tinymce.minorVersion}}});tinymce.PluginManager.add("autocompletemedia",tinymce.plugins.AutoCompleteMedia)})();
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-autocomplete-resources-only', location = 'tinymce3/plugins/autocomplete-media/tinyMce-autocomplete-analytics-media.js' */
require(["ajs"],function(a){a.bind("init.rte",function(){a.bind("rte-autocomplete-on-show",function(d,c){"!"===c.triggerChar&&a.trigger("analytics",{name:"confluence.editor.autocomplete.trigger",data:{type:"media"}})});a.bind("rte-autocomplete-on-insert",function(d,c){if("!"===c.triggerChar){var b=c.selectedFile;b&&b.name&&(b={extension:b.name.split(".").pop(),type:"media"},a.trigger("analytics",{name:"confluence.editor.autocomplete.insert",data:b}))}})});a.bind("rte-destroyed",function(){a.unbind("rte-autocomplete-on-insert");
a.unbind("rte-autocomplete-on-show")})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-autocomplete-resources-only', location = 'tinymce3/plugins/autocomplete-macro/tinyMce-autocomplete-settings-macros.js' */
define("confluence-editor/tinymce3/plugins/autocomplete-macro/tinyMce-autocomplete-settings-macros",["jquery","underscore","ajs"],function(g,o,b){return function(){function k(c){g("#autocomplete-dropdown .top-menu-item").spin(c)}var d=function(c,a){var e=a.presetMacroMetadata;c.replaceWithSelectedSearchText();e?b.MacroBrowser.hasRequiredParameters(e)||e.alwaysShowConfig?tinymce.confluence.macrobrowser.macroBrowserToolbarButtonClicked(a):(b.Rte.BookmarkManager.storeBookmark(),tinymce.confluence.MacroUtils.insertMacro({contentId:b.Meta.get("content-id")||
"0",macro:{name:e.macroName,body:""}})):tinymce.confluence.macrobrowser.macroBrowserToolbarButtonClicked(a)},l=function(c){if(c.hidden&&!b.MacroBrowser.isHiddenMacroShown(c))return null;var a={className:"autocomplete-macro-"+c.macroName,callback:function(b){d(b,{ignoreEditorSelection:!0,presetMacroMetadata:c})}};c.icon?(a.name=c.title,a.href="#",a.icon=(c.icon.relative?b.params.staticResourceUrlPrefix:"")+c.icon.location):a.html=Confluence.Editor.Autocompleter.Util.dropdownLink(c.title);return a};
Confluence.Editor.Autocompleter.Settings["{"]={ch:"{",cache:!1,endChars:["}",":","{"],dropDownClassName:"autocomplete-macros",dropDownDelay:0,selectFirstItem:!0,getHeaderText:function(){return "Macro suggestions"},getAdditionalLinks:function(){return[{className:"dropdown-insert-macro",html:Confluence.Editor.Autocompleter.Util.dropdownLink("Open macro browser","dropdown-prevent-highlight","editor-icon"),callback:function(b){var a=
b.text();d(b,{searchText:a})}}]},getDataAndRunCallback:function(c,a,e){function d(a){a.preventDefault();a.stopPropagation();b.trigger("analytics",{name:"autocomplete-macrobrowser.load-retry"});b.MacroBrowser.reset();b.MacroBrowser.preLoadMacro();h.getDataAndRunCallback.apply(h,i)}var f=b.MacroBrowser.getMetadataPromise(),h=this,i=arguments;h.alreadyBinded||(h.alreadyBinded=!0,f.always(function(){var d;if(a){d=[];for(var f=b.MacroBrowser.searchSummaries(a,{keywordsField:"keywordsNoDesc"}),j=0,i=f.length;j<
i;j++){var m=l(f[j]);if(m&&d.push(m)==c.maxResults)break}}else{var p=b.MacroBrowser.metadataList,n=[];g("#macro-insert-list li").each(function(){var b=g(this),a=o.find(p,function(a){return a.macroName===b.attr("data-macro-name")});a&&(a=l(a))&&n.push(a)});d=n}k(!1);e([d],a);h.alreadyBinded=!1}),f.fail(function(){b.trigger("analytics",{name:"autocomplete-macrobrowser.fail-to-load"});b.messages.warning("#autocomplete-dropdown ol:nth(1)",{title:"Failed to get macro details",
body:'<p><a id="macro-retry-link" href="#">'+"Try again"+"</a></p>"});g("#macro-retry-link").click(d);g("#autocomplete-dropdown ol:nth(1)").show()}));"pending"===f.state()&&(e([],a),k(!0))},update:function(){throw Error("All items in the Macro Autocomplete dropdown must have a callback function");}}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-autocomplete-resources-only', location = 'tinymce3/plugins/autocomplete-macro/editor_plugin_src.js' */
(function(){tinymce.create("tinymce.plugins.AutoCompleteMacro",{init:function(){require(["confluence-editor/tinymce3/plugins/autocomplete-macro/tinyMce-autocomplete-settings-macros"],function(a){a()})},getInfo:function(){return{longname:"Auto Complete Macro",author:"Atlassian",authorurl:"http://www.atlassian.com",version:tinymce.majorVersion+"."+tinymce.minorVersion}}});tinymce.PluginManager.add("autocompletemacro",tinymce.plugins.AutoCompleteMacro)})();
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-autocomplete-resources-only', location = 'tinymce3/plugins/searchreplace/editor_plugin_src.js' */
(function(d){var f=null,g=!1,e=function(b,c){c.preventDefault();c.stopPropagation()},i=function(b,c){e(b,c);var a=c.which;a||(a=c.charCode?c.charCode:c.keyCode);48>a||f.push(a)},h=function(b){var c=d("#rte-button-searchreplace a");c.length&&(b?c.unbind("click",!1):c.bind("click",!1))};tinymce.create("tinymce.plugins.AtlassianSearchReplacePlugin",{init:function(b){b.addCommand("mceSearchReplaceToolbar",function(){if(!g){g=!0;var c=d("#rte-button-searchreplace"),a=!c.hasClass("active"),b=d("body"),
b=!b.hasClass("no-tools")||b.hasClass("no-tools-toolbars-visible");a?(c.addClass("active"),Confluence.Editor.searchManager||(Confluence.Editor.searchManager=new Confluence.Editor.SearchManager("searchreplace")),d(document).trigger("createContextToolbarRow.Toolbar",{id:"searchreplace",buttons:Confluence.Editor.searchToolbar.Buttons,topToolbar:!0,editorAdjacent:!0,animate:b,onVisible:function(){var a;a=AJS.Rte.getEditor();a.onKeyDown.remove(i);a.onKeyPress.remove(e);a.onKeyUp.remove(e);var c="";for(a=
0;a<f.length;a++){var b;b=f[a];if(b>65535){b=b-65536;b=String.fromCharCode(55296+(b>>10),56320+(b&1023))}else b=String.fromCharCode(b);c=c+b}a=c.toLowerCase();Confluence.Editor.searchManager.onVisible(a);h(true);g=false;Confluence.Editor.searchManager.initialised=true}}).trigger("enableContextToolbarRow.Toolbar"),c=AJS.Rte.getEditor(),f=[],c.onKeyDown.add(i),c.onKeyPress.add(e),c.onKeyUp.add(e),Confluence.Editor.searchManager.init(),h(!1)):(c.removeClass("active"),Confluence.Editor.searchManager.onHide(),
d(document).trigger("removeContextToolbarRow.Toolbar",{id:"searchreplace",animate:b,onHide:function(){d(document).trigger("contextToolbarRowRemoved.Toolbar");h(!0);g=!1;Confluence.Editor.searchManager.initialised=!1}}),h(!1),tinymce.isGecko||frames.wysiwygTextarea_ifr.focus(),tinyMCE.activeEditor.focus())}});b.addCommand("mceConfSearch",function(b,a){Confluence.Editor.searchManager&&(a=a||{},a.backwards&&!tinyMCE.activeEditor.plugins.customtoolbar.isToolbarButtonEnabled("search-toolbar-find-previous-button")?
Confluence.Editor.searchManager.focus():!a.backwards&&!tinyMCE.activeEditor.plugins.customtoolbar.isToolbarButtonEnabled("search-toolbar-find-next-button")?Confluence.Editor.searchManager.focus():Confluence.Editor.searchManager.find(a.backwards,a.onFound,a.onNotFound))});b.addCommand("mceConfReplace",function(b,a){Confluence.Editor.searchManager&&(a=a||{},tinyMCE.activeEditor.plugins.customtoolbar.isToolbarButtonEnabled("search-toolbar-replace-button")?Confluence.Editor.searchManager.replace(a.onFound,
a.onNotFound):a.onInactive&&a.onInactive())});b.addCommand("mceConfReplaceAll",function(b,a){Confluence.Editor.searchManager&&(a=a||{},tinyMCE.activeEditor.plugins.customtoolbar.isToolbarButtonEnabled("search-toolbar-replaceall-button")&&Confluence.Editor.searchManager.replaceAll(a.onReplaced,a.onNotReplaced))});b.addCommand("mceConfSearchClose",function(){Confluence.Editor.searchManager&&b.execCommand("mceSearchReplaceToolbar",!1,null)});b.addButton("searchreplace",{title:"searchreplace.search_desc",
cmd:"mceSearchReplaceToolbar"});tinyMCE.isIE8||b.addShortcut("ctrl+f","searchreplace.search_desc",function(){Confluence.Editor.searchManager&&Confluence.Editor.searchManager.isVisible()?Confluence.Editor.searchManager.focus():b.execCommand("mceSearchReplaceToolbar",!1,!1,{skip_undo:!0})})},getInfo:function(){return{longname:"Search/Replace",author:"Atlassian",authorurl:"http://www.atlassian.com",infourl:"http://www.atlassian.com",version:tinymce.majorVersion+"."+tinymce.minorVersion}}});tinymce.PluginManager.add("searchreplace",
tinymce.plugins.AtlassianSearchReplacePlugin)})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-autocomplete-resources-only', location = 'tinymce3/plugins/searchreplace/searchreplace.js' */
(function(){"undefined"==typeof Confluence&&(Confluence={});Confluence.Editor||(Confluence.Editor={});Confluence.Editor.SearchManager=function(a){var b=null,c=null,d=null,j=null,k=null,n=function(i,a){a.content=a.content.replace(RegExp('<mark class="find-current">',"g"),"");a.content=a.content.replace(RegExp("</mark>","g"),"")};this.initialised=false;this.find=function(i,a,g){var c=b.getFindInput().val();(i=d.findText(c,true,i))&&a?a():!i&&g&&g()};this.replace=function(a,c){var g=b.getFindInput(),
l=b.getReplaceInput(),h="";l&&(h=l.val());(g=d.replaceText(g.val(),h,true))&&a?a():!g&&c&&c()};this.replaceAll=function(a,c){var g=b.getFindInput(),l=b.getReplaceInput(),h="";l&&(h=l.val());(g=d.replaceAll(g.val(),h))&&a?a():!g&&c&&c()};this.focus=function(){b.focusFindTextBox()};this.isVisible=function(){return b!=null};this.init=function(){b=new Confluence.Editor.SearchManager.UI(a,j,k);c=new Confluence.Editor.SearchManager.MarkManager;c.addListener(b);d=null;d=tinyMCE.isIE?new Confluence.Editor.SearchManager.implIE(b):
new Confluence.Editor.SearchManager.impl(b,c);tinyMCE.activeEditor.undoManager.onAdd.add(n)};this.onVisible=function(a){if(a!=null&&a.length>0){var c=b.getFindInput(),g=c.val();c.val(g+a)}b.onVisible()};this.onHide=function(){j=b.getFindInput().val();k=b.getReplaceInput().val();d.destroy();d=null;b.destroy();b=null;c.destroy();c=null;tinyMCE.activeEditor.undoManager.onAdd.remove(n)};this._clearSavedValues=function(){k=j=null}};Confluence.Editor.SearchManager.utils={moveCursorToEnd:function(a){if(tinyMCE.isIE){a=
a.createTextRange();a.execCommand("SelectAll");a.move("textedit");a.select()}else if(tinyMCE.isGecko){var b=AJS.$(a).val().length;a.setSelectionRange(b,b)}},createTextRange:function(a,b){return a.selection?a.selection.createRange():b.getBody().createTextRange()}};Confluence.Editor.SearchManager.impl=function(a,b){var c=new tinymce.html.Writer,d=b,j=function(a,c,b){function o(){d.markCurrentlySelectedRange();return true}function g(){d.removeCurrentMark(true);tinyMCE.activeEditor.selection.isCollapsed()||
tinyMCE.activeEditor.selection.collapse();return false}if(!a)return false;var l=tinyMCE.activeEditor,h=l.selection,f=l.getWin();d.isCursorAtCurrentMark()&&(h=d.selectCurrentMark());h.isCollapsed()||h.collapse(b);if(tinymce.isGecko){if(f.find(a,false,b))return o();if(c){h.select(l.getBody(),false);h.collapse(!b);return j(a,false,b)}return g()}return f.find(a,false,b,true,false,false,false)?o():g()};this.findText=j;this.replaceText=function(a,c,b){if(!d.hasCurrentMark())return j(a,b);(c=d.replaceCurrentMark(c))&&
tinyMCE.activeEditor.selection.select(c);return j(a,b)};this.replaceAll=function(a,b){var i=tinyMCE.activeEditor,j=i.getWin();d.removeCurrentMark(false);i.execCommand("selectAll");i.selection.collapse(true);for(var g=0;j.find(a,false,false,false,false,false,false);){var l=tinyMCE.activeEditor;c.text(b);l.selection.setContent(c.getContent(),{format:"raw"});c.reset();l.selection.collapse(true);g++}i.undoManager.add();if(g==0)AJS.Confluence.EditorNotification.notify("info",i.getLang("searchreplace_dlg.notfound"));
else if(g==1)AJS.Confluence.EditorNotification.notify("success",i.getLang("searchreplace_dlg.allreplacedsingular"));else if(g>1){i=i.getLang("searchreplace_dlg.allreplacedplural");AJS.Confluence.EditorNotification.notify("success",i.replace("{0}",g))}return g};this.destroy=function(){c=d=null}};Confluence.Editor.SearchManager.implIE=function(a){var b=a,c=null,d=new tinymce.html.Writer,j=Confluence.Editor.SearchManager.utils.createTextRange,k=function(a,d,h){if(!a)return false;var f=tinyMCE.activeEditor,
m=f.getDoc(),e=this.storedRange=this.storedRange||j(m,f);f.focus();c&&c.select();f.selection.collapse(!h);i();if(h&&c){m=j(m,f);m.moveToElementText(AJS.$("p:first",f.getBody())[0]);e.setEndPoint("StartToStart",m);m=c.text;if(m.length){m=m.replace(/s+$/,"");m.length&&e.moveEnd("character",-m.length)}m=e.text.length;e.moveEnd("word",-1);e.text.length>=m&&e.moveEnd("character",-1);e.select();e.collapse(false)}c=null;if(e.findText(a,h?-1:1,0)){e.scrollIntoView();a=e;a.pasteHTML('<mark class="find-current">'+
a.htmlText+"</mark>");b.marked();d=tinyMCE.activeEditor;d.onChange.add(n);d.onBeforeSetContent.add(n);e=a;e.select();c=e;return true}if(d){f.selection.select(tinyMCE.activeEditor.getBody(),true);f.selection.collapse(!h);return k(a,false,h)}this.storedRange=null},n=function(){i()},i=function(){var a=tinyMCE.activeEditor;a.onChange.remove(n);a.onBeforeSetContent.remove(n);var a=tinyMCE.activeEditor,c=AJS.$("mark",a.getDoc());if(c.length){var h=false,f=a.selection.getRng(true).commonAncestorContainer;
AJS.$(f).closest("mark").length&&(h=true);c.each(function(a,e){$markElement=AJS.$(e);$markElement.contents().each(function(a,e){$markElement.before(e)})}).remove();h&&a.execCommand("RemoveFormat")}b.markRemoved()},o=function(){i()};this.findText=k;this.replaceText=function(a,b,h){var f=tinyMCE.activeEditor;if(c){var d=f.getDoc().createTextNode(b),e=AJS.$("mark",f.getDoc());e.parent()[0].replaceChild(d,e[0]);f.undoManager.add();e=f.getDoc().createElement("mark");e.setAttribute("class","current");d.parentNode.insertBefore(e,
d);e.appendChild(f.getDoc().createTextNode(b));e.parentNode.removeChild(d)}return k(a,h)};this.replaceAll=function(a,c){var b=tinyMCE.activeEditor,f=b.selection;b.getWin();var m=b.undoManager,e=b.getDoc();i();f.select(b.getBody(),false);f.collapse(true);b.focus();e=j(e,b);for(f=0;e.findText(a,1,0);){e.scrollIntoView();e.select();d.text(c);b.selection.setContent(d.getContent(),{format:"raw"});d.reset();f++;e.moveStart("character",c.length)}m.add();if(f==0)AJS.Confluence.EditorNotification.notify("info",
b.getLang("searchreplace_dlg.notfound"));else if(f==1)AJS.Confluence.EditorNotification.notify("success",b.getLang("searchreplace_dlg.allreplacedsingular"));else if(f>1){b=b.getLang("searchreplace_dlg.allreplacedplural");AJS.Confluence.EditorNotification.notify("success",b.replace("{0}",f))}return f};this.destroy=function(){tinyMCE.activeEditor.onBeforeGetContent.remove(o);i();d=c=b=null};tinyMCE.activeEditor.onBeforeGetContent.add(o)};Confluence.Editor.SearchManager.UI=function(a,b,c){var d=null,
j=Confluence.Editor.SearchManager.utils.moveCursorToEnd;tinyMCE.activeEditor&&(tinyMCE.activeEditor.plugins&&tinyMCE.activeEditor.plugins.customtoolbar)&&(d=tinyMCE.activeEditor.plugins.customtoolbar.getToolbarRow(a));var k=function(){var a=AJS.$(".toolbar-find-input",d);return!a.length?null:a},n=function(){var a=AJS.$(".toolbar-replace-input",d);return!a.length?null:a},i=function(a){if(a){tinyMCE.activeEditor.plugins.customtoolbar.enableToolbarButton("search-toolbar-find-next-button");tinyMCE.activeEditor.plugins.customtoolbar.enableToolbarButton("search-toolbar-find-previous-button")}else{tinyMCE.activeEditor.plugins.customtoolbar.disableToolbarButton("search-toolbar-find-next-button");
tinyMCE.activeEditor.plugins.customtoolbar.disableToolbarButton("search-toolbar-find-previous-button")}},o=function(a){var b=k(),e;e=AJS.$(".search-toolbar-find-next-button",d).closest(".aui-button");e=e.length?e:null;e.toggleClass("default-action",a&&b.val().length>0)},g=function(a){var b=tinyMCE.activeEditor.plugins.customtoolbar;a?b.enableToolbarButton("search-toolbar-replace-button"):b.disableToolbarButton("search-toolbar-replace-button")},l=function(a){var b=tinyMCE.activeEditor.plugins.customtoolbar;
a?b.enableToolbarButton("search-toolbar-replaceall-button"):b.disableToolbarButton("search-toolbar-replaceall-button")};this.getFindInput=k;this.getReplaceInput=n;this.focusFindTextBox=function(){top.focus();k().focus()};this.onVisible=function(){var a=k();a.focus();if(a.val().length>0){j(a[0]);i(true);l(true)}};this.destroy=function(){};this.marked=function(){g(true)};this.markRemoved=function(){g(false)};var h=k(),a=false;if(b&&b.length){h.val(b);a=true}c&&c.length&&n().val(c);b=function(a,b){a&&
(tinymce.isIE9?a[0].attachEvent("onpropertychange",b):a.bind(tinymce.isIE8?"propertychange":"input",b))};c=k();b(c,function(a){if(a.type=="input"||a.type=="propertychange"){a=k();a=a!=null&&a.val().length>0;i(a);o(a)}});b(c,function(){var a=k();l(a&&a.val())});AJS.$(d).focusin(function(){o(true)}).focusout(function(){o(false)});c.focus(function(){o(true)});i(a);l(a);g(false);return this};Confluence.Editor.SearchManager.MarkManager=function(){var a=null,b=new tinymce.html.Writer,c=null,d=[],j=function(){i()},
k=function(){if(!a)return null;var e=tinyMCE.activeEditor;e.selection.select(a[0]);return e.selection},n=function(e){m();if(o(a,e)||c&&tinyMCE.activeEditor.selection.getRng(true).toString()==c){c=a=null;AJS.$.each(d,function(a,e){e.markRemoved()})}},i=function(){m();AJS.$("mark",tinyMCE.activeEditor.getDoc()).each(function(a,b){o(AJS.$(b),false)});c=a=null;AJS.$.each(d,function(a,b){b.markRemoved()})},o=function(a,b){var c=tinyMCE.activeEditor.selection.getRng(true);if(!a)return false;var d=a[0];
if(c.intersectsNode)c=c.intersectsNode(d);else{var f=tinyMCE.activeEditor.getDoc().createRange();f.selectNodeContents(d);c=c.compareBoundaryPoints(Range.START_TO_END,f)<=0||c.compareBoundaryPoints(Range.END_TO_START,f)>=0?false:true}var g=null,h=null;a.contents().each(function(b,c){a.before(c);g||(g=c);h=c});if(c||b){c=tinyMCE.activeEditor.selection.getRng(true);c.setStartBefore(g);c.setEndAfter(h);b||c.collapse(false);tinyMCE.activeEditor.selection.setRng(c)}a.remove();return true},g=function(){if(a)return true;
if(c)return tinyMCE.activeEditor.selection.getRng(true).toString()==c},l=function(){i()},h=function(){m();AJS.$.each(d,function(a,b){b.markRemoved()})},f=function(a){var b=tinyMCE.activeEditor;b.onChange.add(j);b.onBeforeSetContent.add(j);if(a){b.onClick.add(h);b.onDblClick.add(h)}},m=function(){var a=tinyMCE.activeEditor;a.onChange.remove(j);a.onBeforeSetContent.remove(j);a.onClick.remove(h);a.onDblClick.remove(h)};this.markCurrentlySelectedRange=function(){var b=tinyMCE.activeEditor;if(a){var g=
b.selection.getBookmark();n(false);b.selection.moveToBookmark(g)}c=null;g=b.selection.getRng(true);a=AJS.$('<mark class="find-current"></mark>',b.getDoc());try{g.surroundContents(a[0]);f(false)}catch(h){if(h.code==1){c=g.toString();a=null;f(true)}}AJS.$.each(d,function(a,b){b.marked()});c||k().collapse()};this.removeCurrentMark=n;this.removeAllMarks=i;this.selectCurrentMark=k;this.isCursorAtCurrentMark=function(){if(!a)return false;var b=tinyMCE.activeEditor.selection;b.isCollapsed()||b.collapse();
var c=b.getRng(true);if(c.startContainer.nodeType==3){c.startContainer.parentNode.normalize();return c.startContainer.nextSibling===a[0]||c.startContainer.previousSibling===a[0]}if(c.startContainer.nodeType==1){b=c.startContainer.childNodes;c=c.startOffset;return c>0&&b[c-1]===a[0]||c+1<b.length&&b[c+1===a[0]]?true:false}};this.hasCurrentMark=g;this.replaceCurrentMark=function(c){var d;if(a||!g())d=false;else{d=tinyMCE.activeEditor;b.text(c);d.selection.setContent(b.getContent(),{format:"raw"});b.reset();
d.undoManager.add();n(false);d=true}if(d||!a)return null;var f=[];a.contents().each(function(a,b){f.push(b)});n(false);d=tinyMCE.activeEditor;for(var c=AJS.$(f[0]).before(d.getDoc().createTextNode(c))[0].previousSibling,h=f.length-1;h>=0;h--)AJS.$(f[h]).remove();d.undoManager.add();return c};this.addListener=function(a){d.push(a)};this.destroy=function(){n(true);tinyMCE.activeEditor.onBeforeGetContent.remove(l)};tinyMCE.activeEditor.onBeforeGetContent.add(l)}})();
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-autocomplete-resources-only', location = 'tinymce3/plugins/searchreplace/tinyMce-search-toolbar.js' */
AJS.$(document).bind("initContextToolbars.Toolbar",function(o,b){var f=function(a){if(tinyMCE.isIE)a=a.createTextRange(),a.execCommand("SelectAll"),a.move("textedit"),a.select();else if(tinyMCE.isGecko){var b=AJS.$(a).val().length;a.setSelectionRange(b,b)}},d=function(a){top.focus();tinyMCE.activeEditor.plugins.customtoolbar.focusToolbarButton(a)},c=function(){top.focus();var a=AJS.$("#search-toolbar-find-text");a.focus();f(a[0])},g=function(){top.focus();var a=AJS.$("#search-toolbar-replace-text");
a.focus();f(a[0])},i=function(){tinyMCE.isIE&&frames.wysiwygTextarea_ifr.focus();if(tinyMCE.isIE||tinyMCE.isGecko){var a=tinyMCE.activeEditor;a.focus();a.selection.select(a.getBody());a.selection.collapse(!1);a.focus()}},e=new Confluence.Editor.Toolbar.Components.TextBox({id:"search-toolbar-find-text",text:b.getLang("searchreplace_dlg.findlabel"),name:"find",keydown:function(a){!tinyMCE.isIE8&&(a.ctrlKey||tinymce.isMac&&a.metaKey)&&"70"==a.which?a.preventDefault():"13"==a.which?(a.preventDefault(),
tinyMCE.activeEditor.execCommand("mceConfSearch",!1,{backwards:!1,onFound:c,onNotFound:c},{skip_undo:!0})):"27"==a.which&&(a.preventDefault(),tinyMCE.activeEditor.execCommand("mceSearchReplaceToolbar",!1,!1,{skip_undo:!0}))},cssClass:"toolbar-find-input"}),j=new Confluence.Editor.Toolbar.Components.TextBox({id:"search-toolbar-replace-text",text:b.getLang("searchreplace_dlg.replacelabel"),name:"replace",keydown:function(a){!tinyMCE.isIE8&&(a.ctrlKey||tinymce.isMac&&a.metaKey)&&"70"==a.which?a.preventDefault():
"13"==a.which?(a.preventDefault(),tinyMCE.activeEditor.execCommand("mceConfReplace",!1,{onFound:g,onNotFound:c,onInactive:function(){tinyMCE.activeEditor.execCommand("mceConfSearch",false,{backwards:false,onFound:g,onNotFound:c},{skip_undo:true})}},{skip_undo:!0})):"27"==a.which&&(a.preventDefault(),tinyMCE.activeEditor.execCommand("mceSearchReplaceToolbar",!1,!1,{skip_undo:!0}))},cssClass:"toolbar-replace-input"}),k=new Confluence.Editor.Toolbar.Components.TextButton({text:b.getLang("searchreplace_dlg.findprevious"),
click:function(){b.execCommand("mceConfSearch",!1,{backwards:!0,onFound:function(){top.focus();d("search-toolbar-find-previous-button")},onNotFound:c},{skip_undo:!0})},textClass:"search-toolbar-find-previous-button"}),h=new Confluence.Editor.Toolbar.Components.TextButton({text:tinyMCE.isIE?b.getLang("searchreplace_dlg.findlabel"):b.getLang("searchreplace_dlg.findnext"),click:function(){b.execCommand("mceConfSearch",!1,{backwards:!1,onFound:function(){top.focus();d("search-toolbar-find-next-button")},
onNotFound:c},{skip_undo:!0})},textClass:"search-toolbar-find-next-button"}),l=new Confluence.Editor.Toolbar.Components.TextButton({text:b.getLang("searchreplace_dlg.replace"),click:function(){b.execCommand("mceConfReplace",!1,{onFound:function(){top.focus();d("search-toolbar-replace-button")},onNotFound:c},{skip_undo:!0})},textClass:"search-toolbar-replace-button"}),m=new Confluence.Editor.Toolbar.Components.TextButton({text:b.getLang("searchreplace_dlg.replaceall"),click:function(){b.execCommand("mceConfReplaceAll",
!1,{onReplaced:i,onNotReplaced:c})},textClass:"search-toolbar-replaceall-button"}),n=new Confluence.Editor.Toolbar.Components.Button({text:b.getLang("searchreplace_dlg.close"),iconClass:"icon-close",click:function(){b.execCommand("mceConfSearchClose",!1,null)}}),e=[new Confluence.Editor.Toolbar.Components.Group([n],{groupClass:"close"}),new Confluence.Editor.Toolbar.Components.Group([e,j],{groupClass:"no-separator"}),new Confluence.Editor.Toolbar.Components.Group(tinyMCE.isIE?[h]:[k,h]),new Confluence.Editor.Toolbar.Components.Group([l,
m])];Confluence.Editor.searchToolbar={Buttons:e}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:editor-insert-files', location = 'tinymce3/plugins/insert-files/insert-files-plugin.js' */
require(["ajs","jquery","confluence-editor/utils/environment"],function(a,d,b){tinymce.create("tinymce.plugins.InsertFiles",{init:function(c){c.addButton("confluence-insert-files",{title:"Files",tooltip:"Insert files and images"+" ("+b.transformCmdKeyTextBasingOnOS("Ctrl+M")+")",cmd:"mceConfimage",className:"insert-files",locationGroup:"rte-toolbar-group-files",weight:0})},getInfo:function(){return{longname:"Insert Files",
author:"Atlassian",authorurl:"http://www.atlassian.com",infourl:"http://www.atlassian.com/",version:"1.0"}}});tinymce.PluginManager.add("insertfiles",tinymce.plugins.InsertFiles)},void 0,!0);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-templates:template-editor-variables-resources', location = 'js/variable-manager.js' */
(function(e){function g(c,a){var b=c.toLocaleLowerCase(),d=a.toLocaleLowerCase(),b=b.localeCompare(d);0==b&&(b=c.localCompare(a));return b}function f(c){return e.extend(!0,{},Confluence.VariableManager.defaults[c]||Confluence.VariableManager.defaults.string)}"template"===AJS.Meta.get("content-type")&&(Confluence.VariableManager=function(){var c={};return{find:function(a){var a=a.toLocaleLowerCase(),b={},d;for(d in c)if(c.hasOwnProperty(d)&&(!a.length||0===d.toLocaleLowerCase().indexOf(a)))b[d]=c[d];
return b},contains:function(a){return!!c[a]},get:function(a){return c[a]},getAll:function(){return e.extend(!0,{},c)},getSortedNames:function(){var a=[],b;for(b in c)a.push(b);return a.sort(g)},add:function(a,b){c[a]=b||f();AJS.trigger("add.confluence-variable",{name:a,details:e.extend(!0,{},b)})},del:function(a){var b=c[a];delete c[a];AJS.trigger("delete.confluence-variable",{name:a,details:e.extend(!0,{},b)})},rename:function(a,b){var d=c[a];delete c[a];d&&(c[b]=d,AJS.trigger("rename.confluence-variable",
{oldName:a,newName:b,details:e.extend(!0,{},details)}))},createDefault:f}},Confluence.VariableManager.defaultVariableManager=Confluence.VariableManager(),Confluence.VariableManager.defaults={textarea:{type:"textarea",rows:5,columns:100},list:{type:"list",options:[]},string:{type:"string"}})})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-templates:template-editor-variables-resources', location = 'js/variable-placeholder.js' */
(function(c){"template"===AJS.Meta.get("content-type")&&(Confluence.VariablePlaceHolder={insertPlaceholder:function(b,d){var a;a="$"+b;var e=AJS.Rte.getEditor();AJS.Rte.BookmarkManager.storeBookmark();a={title:a,src:AJS.Meta.get("context-path")+"/plugins/servlet/confluence/placeholder/template-variable?name="+encodeURIComponent(b),"data-variable-name":b,"class":"template-variable",alt:"$"+b};d&&c.extend(a,d);a=c("<img/>").attr(a);e.selection.setNode(a[0])}},AJS.bind("init.rte",function(){c(AJS.Rte.getEditor().getBody()).delegate("img.template-variable",
"dragstart",function(b){b.preventDefault()})}))})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-templates:template-editor-variables-resources', location = 'js/variable-toolbar.js' */
(function(f){AJS.bind("init.rte",function(){if("template"===AJS.Meta.get("content-type")){var e=Confluence.VariableManager.defaultVariableManager,a=f("#template-menu"),g=a.find(".variables-list");AJS.bind("add.confluence-variable,delete.confluence-variable,rename.confluence-variable",function(){var b=e.getSortedNames(),d=b.length,c="";g.toggleClass("hidden",!d);for(var a=0;a<d;a++)c+=Confluence.Templates.Variables.renderVariableItem({variableName:"$"+b[a],tooltip:AJS.format("Insert the \'\'{0}\'\' field into the page for the template user to fill out.",
b[a])});g.html(c)});a.delegate(".variables-list a","click",function(){var b=f(this).attr("data-variable-name");!e.contains(b)&&e.add(b);Confluence.VariablePlaceHolder.insertPlaceholder(b)});a.delegate(".variables-add","click",function(b){var a=Confluence.Editor.Autocompleter.Manager.getInputDrivenDropdown();AJS.Rte.getEditor().focus();(!a||a.inactive)&&Confluence.Editor.Autocompleter.Manager.shortcutFired("$",!0);b.stopPropagation()});AJS.$(document).bind("showLayer",function(b,d,c){"dropdown"===
d&&c.$.closest(a).length&&c.reset()})}})})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-templates:template-editor-variables-resources', location = 'js/tinyMce-autocomplete-settings-variables.js' */
AJS.bind("init.rte",function(){function j(a,b){return{callback:function(e){e.replaceWithSelectedSearchText();!c.contains(a)&&c.add(a);Confluence.VariablePlaceHolder.insertPlaceholder(a,b)},name:AJS.escapeHtml(a),href:"#"}}function k(a,b){return!a&&!b?0:!a?-1:!b?1:a.toLocaleLowerCase().localeCompare(b.toLocaleLowerCase())}if("template"===AJS.Meta.get("content-type")){Confluence.Editor.Autocompleter||(Confluence.Editor.Autocompleter=tinymce.confluence.Autocompleter);var c=Confluence.VariableManager.defaultVariableManager;
Confluence.Editor.Autocompleter.Settings.$={ch:"$",cache:!1,endChars:[],dropDownDelay:0,preventStartNodes:"",dropDownClassName:"autocomplete-variables",selectFirstItem:!0,getHeaderText:function(a,b){return b?"Variable suggestions":"Variable suggestions"},getAdditionalLinks:function(a,b){var e=Confluence.unescapeEntities(b);return c.get(e)||b.length==0?[]:[{className:"dropdown-create-variable",href:"#",callback:function(a){var b=
a.plainText();a.replaceWithSelectedSearchText();!c.contains(b)&&c.add(b);Confluence.VariablePlaceHolder.insertPlaceholder(b,void 0)},name:AJS.format("Create variable \'\'{0}\'\'",b)}]},getDataAndRunCallback:function(a,b,e){var d,h,a=Confluence.unescapeEntities(b),g=c.find(a),f=[],i=[];for(d in g)g.hasOwnProperty(d)&&f.push(d);f.sort(k);a=0;for(h=f.length;a<h;a++){d=f[a];i.push(j(d,g[d]))}e([i],b)},update:function(){}}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-templates:template-editor-variables-resources', location = 'js/tinyMce-property-panel-variables.js' */
(function(c){AJS.Confluence.PropertyPanel.Variable={name:"variable",canHandleElement:function(c){return c.hasClass("template-variable")},handle:function(e){function j(a){AJS.debug("clicked type: "+a);var b=c("#property-panel");b.find(".panel-buttons").toggleClass("no-inputs","string"===a);b.find(".textarea-section,.list-section,.string-section").addClass("hidden");b.find("."+a+"-section").removeClass("hidden");"textarea"===a?(c("#variable-property-panel-textarea-rows").val(d.rows),c("#variable-property-panel-textarea-columns").val(d.columns)):
"list"===a&&c("#variable-property-panel-list-values").val(d.options.join(","))}function g(a,b,e){return{className:"variable-property-panel-type-item variable-property-panel-type-"+a,text:b,tooltip:e,selected:k===a,click:function(){d.type=a;d=h.createDefault(a);h.add(i,d);c(".variable-property-panel-type-item").removeClass("selected");c(".variable-property-panel-type-"+a).addClass("selected");j(a)}}}function f(a){return k===a?"":" hidden"}if(!("click"!=e.e.type&&"mouseup"!=e.e.type)){var e=e.containerEl,
l=c(e),i,b=[],m={originalHeight:l.height(),anchorIframe:AJS.Rte.getEditorFrame()};i=l.attr("data-variable-name");var h=Confluence.VariableManager.defaultVariableManager,d=h.get(i),k=d&&d.type||"string";b.push(g("string","Text","Single line text input field."));b.push(g("textarea","Multi-line Text","Multi-line text input field."));b.push(g("list",
"List","Drop down list."));b.push(null);b.push({className:"editable textarea-section"+f("textarea"),tooltip:"Number of rows to display for the field.",html:'<input id="variable-property-panel-textarea-rows"/>'});b.push({className:"variable-property-panel-textarea-split textarea-section"+f("textarea"),tooltip:"",html:"<span>x</span>"});b.push({className:"editable textarea-section"+
f("textarea"),tooltip:"Number of columns to display for the field.",html:'<input id="variable-property-panel-textarea-columns"/>'});b.push(null);b.push({className:"editable list-section"+f("list"),tooltip:"Enter each item for the list, separating each with a comma.",html:"<input id=\"variable-property-panel-list-values\" size='50'/>"});AJS.Confluence.PropertyPanel.createFromButtonModel("variable",e,b,m);j(d.type);c("#variable-property-panel-textarea-rows").change(function(){d.rows=
+c(this).val()||Confluence.VariableManager.defaults.textarea.rows});c("#variable-property-panel-textarea-columns").change(function(){d.columns=+c(this).val()||Confluence.VariableManager.defaults.textarea.columns});c("#variable-property-panel-list-values").change(function(){var a,b,e,f=c(this).val().split(",");d.options=[];a=0;for(b=f.length;a<b;a++)(e=c.trim(f[a]))&&d.options.push(e)});c("#variable-property-panel-textarea-rows,#variable-property-panel-textarea-columns,#variable-property-panel-list-values").keypress(function(a){13===
a.which&&c(this).blur()})}}}})(AJS.$);AJS.bind("init.rte",function(){AJS.trigger("add-handler.property-panel",AJS.Confluence.PropertyPanel.Variable)});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-templates:template-editor-variables-resources', location = 'js/variable-marshaller.js' */
(function(c){function q(a){var b=a.attr("data-variable-type");return"textarea"===b?{type:b,rows:+a.attr("data-variable-rows")||h,columns:+a.attr("data-variable-columns")||r}:"list"===b?{type:b,options:a.find("li").map(function(){return c(this).attr("data-variable-option")}).toArray()}:{type:"string"}}function l(){var a=c(AJS.Rte.getEditor().getBody()).find("img[data-variable-name]"),b={};c.map(a,function(a){var e={};c(a).attr("data-variable-raw-xhtml")&&(e={"data-variable-raw-xhtml":!0});b[c(a).attr("data-variable-name")]=
e});return b}if("template"===AJS.Meta.get("content-type")){var h=5,r=100;AJS.bind("init.rte",function(){function a(b){for(var a in b)b.hasOwnProperty(a)&&!e.contains(a)&&(AJS.debug("adding: ",a),e.add(a,b[a]))}var b=AJS.Rte.getEditor(),h=c(b.getBody()),e=Confluence.VariableManager.defaultVariableManager;b.onGetContent.add(function(b,h){var m=c("<div></div>"),n=c("<ul></ul>").attr("data-variable-declarations","true"),d;m.append(n);var o=l();a(o);var p=e.getAll(),k;for(k in p)if(o.hasOwnProperty(k)){var i=
k;d=p[k];var f=void 0,j=void 0,f=d.type,g=AJS.$("<li></li>");g.attr("data-variable-name",i);g.attr("data-variable-type",f);g.text(i);if("textarea"===f)g.attr("data-variable-rows",d.rows),g.attr("data-variable-columns",d.columns);else if("list"===f){f=c("<ul></ul>");i=void 0;for(i in d.options)j=d.options[i],j=c("<li></li>").text(j).attr("data-variable-option",j),f.append(j);g.append(f)}d=g;n.append(d)}h.content=m.html()+h.content});b=h.find("ul[data-variable-declarations]");b.remove();b.find("li[data-variable-name]").each(function(){var a=
c(this);e.add(a.attr("data-variable-name"),q(a))});a(l())})}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-templates:template-editor-variables-template-resources', location = 'js/variable-templates.soy' */
// This file was automatically generated from variable-templates.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.Variables == 'undefined') { Confluence.Templates.Variables = {}; }


Confluence.Templates.Variables.renderVariableItem = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<li class="dropdown-item" data-tooltip="', soy.$$escapeHtml(opt_data.tooltip), '"><a href="#" class="item-link variable-item" title="', soy.$$escapeHtml(opt_data.variableName), '" data-variable-name="', soy.$$escapeHtml(opt_data.variableName), '">', soy.$$escapeHtml(opt_data.variableName), '</a></li>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.status-macro:editor_status', location = 'js/status-editor.js' */
(function(d){var v="macro-placeholder-property-panel-edit-button";var n="status-macro-title first last editable";var r=13;var f=27;var o="status";var q=["Grey","Red","Yellow","Green","Blue"];var k=q[0];var t;var u,m,a;function s(){e();var z=Confluence.MacroParameterSerializer.deserialize(d(u).attr("data-macro-parameters")),A=false,y=false;if(z&&m){A=z.title!==m.title;y=z.colour!==m.colour}return A||y}function e(){if(a){var y=(b(m)==a.val());var z=(a.val()==="");if(y||z){delete m.title}else{m.title=a.val()}}}function p(){if(t&&t.state&&t.state()==="pending"){AJS.log("Macro update already in progress.");return}e();var z={contentId:Confluence.Editor.getContentId(),macro:{name:o,params:m,defaultParameterValue:"",body:""}};t=tinymce.confluence.MacroUtils.insertMacro(z,u);function y(A){AJS.Rte.getEditor().selection.select(A);AJS.Rte.BookmarkManager.storeBookmark();AJS.Rte.getEditor().selection.collapse()}t.done(function(A,B){u=A;y(u)}).fail(function(A){AJS.logError("Failed to load status macro - "+A)})}function b(y){return((y.colour||y.color)||k)}function j(){a=null;return true}function c(y){var z=d("<input/>");z.attr("class",n);z.keyup(function(A){if(A.keyCode===r){AJS.Confluence.PropertyPanel.destroy();return false}return true});z.keydown(function(A){if(A.keyCode===f){return j()}return true});return z}function x(y){a=c(m);a.val(y.find("span.panel-button-text").text());y.replaceWith(a);a.select().focus()}function h(){d.each(q,function(y,A){var z=function(C,B){m.colour=A;AJS.Confluence.PropertyPanel.destroy()};AJS.Confluence.PropertyPanel.Macro.registerButtonHandler(A,z,o)})}function i(y){return y.title||b(y)}function g(y){return{className:n,text:AJS.escapeHtml(y),click:x}}function l(z){for(var y=0;y<z.length;y++){if(z[y].className.indexOf(v)>-1){return z[y]}}return null}function w(y){var z=l(y);var A=function(B){tinymce.confluence.macrobrowser.editMacro(d(B))};z.click=function(){AJS.Confluence.PropertyPanel.destroy();if(!s()){A(u)}else{t.always(A)}}}AJS.Confluence.PropertyPanel.Macro.registerInitHandler(function(A,z,y){u=A;w(z);m=Confluence.MacroParameterSerializer.deserialize(d(u).attr("data-macro-parameters"));a=null;z.splice(1,0,g(i(m)))},"status");h();AJS.bind("destroyed.property-panel",function(y){if(s()){p()}})})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-mentions-plugin:editor-autocomplete-mentions', location = 'js/editor_plugin_src.js' */
(function(b){AJS.EventQueue=AJS.EventQueue||[];function c(){AJS.EventQueue.push({name:"confluencementioninsert"});Confluence.Editor.Autocompleter.Manager.shortcutFired("@",true)}function a(d){return d&&d.shiftKey&&!d.ctrlKey&&!d.altKey&&!d.altGraphKey&&!d.metaKey&&d.which===64}tinymce.create("tinymce.plugins.InsertMention",{init:function(d){b("#insertmention-button").click(function(e){e.stopPropagation();e.preventDefault();var f=Confluence.Editor.Autocompleter.Manager.getInputDrivenDropdown();if(!f||f.inactive){tinymce.execCommand("mceFocus",false,d.id);c()}});AJS.bind("editor.text-placeholder.activated",function(g,f){if(f&&f.placeholderType==="mention"){if(a(f.triggerEvent)){tinymce.dom.Event.cancel(f.triggerEvent)}c()}});if(AJS.Rte.Placeholder&&AJS.Rte.Placeholder.addPlaceholderType){AJS.Rte.Placeholder.addPlaceholderType({type:"mention",label:"User mention",tooltip:"Instructional text is replaced with suggested people when a person types."})}},getInfo:function(){return{longname:"Insert Mention",author:"Atlassian",authorurl:"http://www.atlassian.com",version:tinymce.majorVersion+"."+tinymce.minorVersion}}});tinymce.PluginManager.add("insertmention",tinymce.plugins.InsertMention)})(AJS.$);AJS.Rte.BootstrapManager.addTinyMcePluginInit(function(a){a.plugins+=",insertmention"});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-mentions-plugin:editor-autocomplete-mentions', location = 'js/tinyMce-autocomplete-settings-mentions.js' */
AJS.Rte.BootstrapManager.addOnInitCallback(function(){if(!Confluence.Editor.Autocompleter){Confluence.Editor.Autocompleter=tinymce.confluence.Autocompleter}var b=function(e){if(e){return AJS.params.contextPath+"/rest/prototype/1/search.json"}else{if(AJS.Meta.get("remote-user")){return AJS.params.contextPath+"/rest/mentions/1/network.json"}}return null},c=function(g,f){var e={"max-results":g.maxResults||10};if(f){e.query=Confluence.unescapeEntities(f);e.search="user"}return e},a=function(m,f,l,h,g){var k=m.statusMessage;var i;if(k){i=[[{html:m.statusMessage,className:"error"}]]}else{var e=[];i=[e];if(m.result){AJS.$.each(m.result,function(n,p){var o=AJS.$.extend({},p);o.key=o.username;o.linkAlias=o.title;o.title=o.title+" ("+o.username+")";e.push(o)})}i=AJS.REST.convertFromRest(i)}function j(o,n){if(g&&typeof g=="function"){g(i,o,n)}}l(i,f,j)},d=function(g,i,m,f,l,o,j){var e=i(f),k=g.settings.cacheManager,h=k.get(f),n;if(e){n=$.ajax({type:"GET",url:e,data:m(g,f),dataType:"json",global:false,timeout:10000});n.done(function(p){k.put(f,p)});if(h){a(h,f,l,o,j)}else{n.done(function(p){a(p,f,l,o,j)});n.fail(function(q,p){if(p=="timeout"){a({statusMessage:"Timeout",query:f},f,l,o)}})}}else{l([],f)}};Confluence.Editor.Autocompleter.Settings["@"]={ch:"@",endChars:[],dropDownClassName:"autocomplete-mentions",selectFirstItem:true,getHeaderText:function(f,e){if(e){return "User suggestions"}else{return "Mention someone by typing their name..."}},getAdditionalLinks:function(h,f,g){var e=[];g(f,e);return e},getDataAndRunCallback:function(g,e,f){d(g,b,c,e,f,"content",function(h,j,i){if(j!==""&&h.length<2){if(i.length==0){i.push({html:'<span class="no-result">'+"No user found"+"</span>"})}}else{i.length=0}})},update:function(g,e){if(e.restObj){var f=AJS.$.extend(e.restObj,{title:e.restObj.linkAlias});e=Confluence.Link.fromREST(f)}e.insert()}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.keyboardshortcuts:confluence-tinymce-keyboard-shortcuts', location = 'js/tinymce-plugin.js' */
(function(){tinymce.create("tinymce.plugins.KeyboardShortcutsPlugin",{init:function(a){AJS.debug("Init Editor Keyboard shortcuts plugin");for(var b=function(b){return function(){a.execCommand("FormatBlock",!1,b)}},c=1;7>c;c++)a.addCommand("FormatBlock-h"+c,b("h"+c));a.addCommand("FormatBlock-p",b("p"));a.addCommand("FormatBlock-pre",b("pre"));a.addCommand("FormatBlock-blockquote",b("blockquote"));a.addCommand("mceConfShortcutDialog",Confluence.KeyboardShortcuts.openDialog);a.addButton("help",{title:"confluence.conf_shortcuts_help_desc",
cmd:"mceConfShortcutDialog"})},getInfo:function(){return{longname:"Atlassian Editor Keyboard Shortcuts Plugin",author:"Atlassian",authorurl:"http://www.atlassian.com",version:tinymce.majorVersion+"."+tinymce.minorVersion}}});tinymce.PluginManager.add("keyboardshortcuts",tinymce.plugins.KeyboardShortcutsPlugin)})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.web.components:editor-notifications', location = '/includes/js/components/editor-notifications.js' */
AJS.bind("init.rte",function(){var a;AJS.Confluence.EditorNotification={notify:function(b,c){var d=require("aui/flag");void 0!==a&&"true"!==a.getAttribute("aria-hidden")&&a.close();a=d({type:b,body:c,close:"error"===b?"manual":"auto"})}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.reliablesave:reliable-save', location = 'js/reliable-save.js' */
(function(g){AJS.bind("rte.init.ui",function(){function d(){Confluence.Editor.UI.toggleSavebarBusy(!1)}function i(a){if(403===a.status&&(AJS.trigger("rte.safe-save.invalid-xsrf-token"),!e)){var a=AJS.Meta.get("content-id"),b=function(a,b){e=!0;a?(Confluence.Editor.addErrorMessage(f,"There was an error processing the request."),AJS.logError(a)):(AJS.debug("xsrf token updated"),g("input[name=atl_token]",c).val(b),AJS.Meta.set("atl-token",b),AJS.trigger("analyticsEvent",{name:"reliable-save-xsrf-token-expired"}),
d(),Confluence.Editor.UI.saveButton.click())},a=Confluence.getContextPath()+"/rest/tinymce/1/content/"+a+".json",a=g.ajax({url:a,cache:!1});a.success(function(a){b(null,a.atlToken)});a.error(function(){b("error accessing the rest endpoint")});return}e=!1;AJS.trigger("rte.safe-save.error");Confluence.Editor.addErrorMessage(f,"Unable to communicate with server. Saving is not possible at the moment.");Confluence.Editor.heartbeatType.recovery();d()}function j(){return Confluence.Editor.UI.isFormEnabled()}if(AJS.DarkFeatures.isEnabled("editor.ajax.save")){var f=
"rte_safe_save_offline_error_container";Confluence.Editor=Confluence.Editor||{};Confluence.Editor.SafeSave=Confluence.Editor.SafeSave||{};Confluence.Editor.SafeSave._internal=Confluence.Editor.SafeSave._internal||{};Confluence.Editor.SafeSave._internal.onSuccessfulResponse=function(a){AJS.trigger("rte.safe-save.success",a);(a=a.redirectUrl)?window.location=0!=a.indexOf("/")?a:AJS.params.contextPath+a:AJS.logError("expected redirectUrl field not found in response")};var e=!1,c=g("form.editor");if(c.length){var b=
c.attr("action"),b=b.replace("docreatepage.action","docreatepage_ajax.action"),b=b.replace("doeditpage.action","doeditpage_ajax.action"),b=b.replace("docreateblogpost.action","docreateblogpost_ajax.action"),b=b.replace("doeditblogpost.action","doeditblogpost_ajax.action");if(-1==b.indexOf("_ajax"))AJS.logError("no ajaxified action found on safe-save plugin");else{c.attr("action",b);c.ajaxForm({beforeSubmit:j,error:i,success:function(a){e=!1;Confluence.Editor.heartbeatType.normal();if(a.actionErrors){a=
a.actionErrors;AJS.trigger("rte.safe-save.invalid",a);for(var b=0;b<a.length;b++)Confluence.Editor.addErrorMessage("validation",a[b]);d()}else Confluence.Editor.SafeSave._internal.onSuccessfulResponse(a)}});AJS.debug("reliable save ready!");var h=!1;AJS.bind("rte.heartbeat-error",function(){AJS.debug("reliable-save: heartbeat - error");Confluence.Editor.addErrorMessage(f,"Unable to communicate with server. Saving is not possible at the moment.");h=!0;Confluence.Editor.UI.toggleSavebarBusy(!0)});AJS.bind("rte.heartbeat",function(){h&&
(AJS.debug("reliable-save: heartbeat - back to business!"),AJS.$("#"+f).fadeOut().remove(),h=!1,d())})}}}})})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.reliablesave:reliable-save', location = 'js/ajax-login.js' */
AJS.toInit(function(f){function t(j,e){var a=o.call(f,j,e),h=j&&j.url;if(p&&(!e||e&&!e.preventAjaxLogin)&&h&&(i&&0===h.indexOf(i)||q&&0===h.indexOf(q))){var s=function(a,u,v,h){function i(){b.readyState=a.readyState;b.status=a.status;b.statusText=a.statusText;a.responseXML?b.responseXML=a.responseXML:b.responseText=a.responseText;u.apply(v,h)}var l=a.getResponseHeader("X-AUSERNAME");p===l?i():(k.push({deferred:d,url:j,settings:e,defaultCallback:i}),m||(n=!1,g||(g=new AJS.Dialog(840,700),g.addPanel("ajax-login",
"ajax-login-content","ajax-login-panel",1),l=f(".ajax-login-panel"),c=f("<iframe></iframe>"),c.bind("load",function(){var a=c[0].contentDocument.location.pathname;a&&0<=a.indexOf("/"+r)&&(m=!1,n=!0,g.hide(),c.attr("src","about:blank"))}),l.append(c),f(document).bind("hideLayer",function(a,b,d){if("popup"===b&&d===g.popup){AJS.debug("hiding login dialog");if(n){a=k;b=0;for(d=a.length;b<d;b++){var c=a[b];AJS.debug("Rerunning ajax query to: "+c.url,c);o.call(f,c.url,c.settings).done(function(){AJS.debug("Rerunning done");
c.deferred.resolve(arguments)}).fail(function(){AJS.debug("Rerunning failed");c.deferred.reject(arguments)})}}else{a=k;b=0;for(d=a.length;b<d;b++){var e=a[b];AJS.debug("Executing with original response for: "+e.url,e);e.defaultCallback&&e.defaultCallback()}}k=[]}})),c.attr("src",w),g.show(),m=!0))};AJS.debug("Using authenticatingPromise");var b={abort:function(){a.abort.apply(a,arguments)},getAllResponseHeaders:function(){a.getAllResponseHeaders.apply(a,arguments)},getResponseHeader:function(){a.getResponseHeader.apply(a,
arguments)},overrideMimeType:function(){a.overrideMimeType.apply(a,arguments)},readyState:a.readyState,setRequestHeader:function(b,c){a.setRequestHeader.apply(a,arguments)},state:function(){a.state.apply(a,arguments)},status:a.status,statusCode:function(){a.statusCode.apply(a,arguments)},statusText:a.statusText},d=f.Deferred();d.promise(b);b.success=b.done;b.error=b.fail;a.done(function(a,b,c){s(c,d.resolve,d,arguments)});a.fail(function(a,b,c){s(a,d.reject,d,arguments)});return b}return a}if(AJS.DarkFeatures.isEnabled("ajax.login")){AJS.debug("AJAX login support enabled");
var m=!1,g,c,n,k=[],o=f.ajax,p=AJS.Meta.get("remote-user"),i=AJS.Meta.get("base-url"),q=AJS.Meta.get("context-path"),r="ajaxlogincomplete.action",w=AJS.Meta.get("context-path")+"/login.action?os_destination=%2F"+r;f.ajax=t}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.sticky-table-headers:stickytableheaders-resources', location = '/js/vendor/jquery.stickytableheaders.js' */
/*! Modified by Atlassian | Copyright (c) 2011 by Jonas Mosbech - https://github.com/jmosbech/StickyTableHeaders
	MIT license info: https://github.com/jmosbech/StickyTableHeaders/blob/master/license.txt */

;(function ($, window, undefined) {
	'use strict';

	var name = 'stickyTableHeaders',
		id = 0,
		defaults = {
			fixedOffset: 0,
			leftOffset: 0,
			marginTop: 0,
			objDocument: document,
			objHead: 'head',
			objWindow: window,
			scrollableArea: window,
			cacheHeaderHeight: false
		};

	function Plugin (el, options) {
		// To avoid scope issues, use 'base' instead of 'this'
		// to reference this class from internal events and functions.
		var base = this;

		// Access to jQuery and DOM versions of element
		base.$el = $(el);
		base.el = el;
		base.id = id++;

		// Listen for destroyed, call teardown
		base.$el.bind('destroyed',
			$.proxy(base.teardown, base));

		// Cache DOM refs for performance reasons
		base.$clonedHeader = null;
		base.$originalHeader = null;

		// Cache header height for performance reasons
		base.cachedHeaderHeight = null;

		// Keep track of state
		base.isSticky = false;
		base.hasBeenSticky = false;
		base.leftOffset = null;
		base.topOffset = null;

		base.init = function () {
			base.setOptions(options);

			base.$el.each(function () {
				var $this = $(this);

				// remove padding on <table> to fix issue #7
				$this.css('padding', 0);

				base.$originalHeader = $('thead:first', this);
				base.$clonedHeader = base.$originalHeader.clone();
				$this.trigger('clonedHeader.' + name, [base.$clonedHeader]);

				base.$clonedHeader.addClass('tableFloatingHeader');
				base.$clonedHeader.css('display', 'none');

				base.$originalHeader.addClass('tableFloatingHeaderOriginal');

				base.$originalHeader.after(base.$clonedHeader);

				base.$printStyle = $('<style type="text/css" media="print">' +
					'.tableFloatingHeader{display:none !important;}' +
					'.tableFloatingHeaderOriginal{position:static !important;}' +
					'</style>');
				base.$head.append(base.$printStyle);
			});

			base.updateWidth();
			base.toggleHeaders();
			base.bind();
		};

		base.destroy = function (){
			base.$el.unbind('destroyed', base.teardown);
			base.teardown();
		};

		base.teardown = function(){
			if (base.isSticky) {
				base.$originalHeader.css('position', 'static');
			}
			$.removeData(base.el, 'plugin_' + name);
			base.unbind();

			base.$clonedHeader.remove();
			base.$originalHeader.removeClass('tableFloatingHeaderOriginal');
			base.$originalHeader.css('visibility', 'visible');
			base.$printStyle.remove();

			base.el = null;
			base.$el = null;
		};

		base.bind = function(){
			base.$scrollableArea.on('scroll.' + name, base.toggleHeaders);
			if (!base.isWindowScrolling) {
				base.$window.on('scroll.' + name + base.id, base.setPositionValues);
				base.$window.on('resize.' + name + base.id, base.toggleHeaders);
			}
			base.$scrollableArea.on('resize.' + name, base.toggleHeaders);
			base.$scrollableArea.on('resize.' + name, base.updateWidth);
		};

		base.unbind = function(){
			// unbind window events by specifying handle so we don't remove too much
			base.$scrollableArea.off('.' + name, base.toggleHeaders);
			if (!base.isWindowScrolling) {
				base.$window.off('.' + name + base.id, base.setPositionValues);
				base.$window.off('.' + name + base.id, base.toggleHeaders);
			}
			base.$scrollableArea.off('.' + name, base.updateWidth);
		};

		// We debounce the functions bound to the scroll and resize events
		base.debounce = function (fn, delay) {
			var timer = null;
			return function () {
				var context = this, args = arguments;
				clearTimeout(timer);
				timer = setTimeout(function () {
					fn.apply(context, args);
				}, delay);
			};
		};

		base.toggleHeaders = base.debounce(function () {
			if (base.$el) {
				base.$el.each(function () {
					var $this = $(this),
						newLeft,
						newTopOffset = base.isWindowScrolling ? (
									isNaN(base.options.fixedOffset) ?
									base.options.fixedOffset.outerHeight() :
									base.options.fixedOffset
								) :
								base.$scrollableArea.offset().top + (!isNaN(base.options.fixedOffset) ? base.options.fixedOffset : 0),
						offset = $this.offset(),

						scrollTop = base.$scrollableArea.scrollTop() + newTopOffset,
						scrollLeft = base.$scrollableArea.scrollLeft(),

						headerHeight = base.options.cacheHeaderHeight ? base.cachedHeaderHeight : base.$clonedHeader.height(),

						scrolledPastTop = base.isWindowScrolling ?
								scrollTop > offset.top :
								newTopOffset > offset.top,
						notScrolledPastBottom = (base.isWindowScrolling ? scrollTop : 0) <
								(offset.top + $this.height() - headerHeight - (base.isWindowScrolling ? 0 : newTopOffset));

					if (scrolledPastTop && notScrolledPastBottom) {
						newLeft = offset.left - scrollLeft + base.options.leftOffset;
						base.$originalHeader.css({
							'position': 'fixed',
							'margin-top': base.options.marginTop,
							'left': newLeft,
							'z-index': 3 // #18: opacity bug
						});
						base.leftOffset = newLeft;
						base.topOffset = newTopOffset;
						base.$clonedHeader.css('display', '');
						if (!base.isSticky) {
							base.isSticky = true;
							// make sure the width is correct: the user might have resized the browser while in static mode
							base.updateWidth();
							$this.trigger('enabledStickiness.' + name);
						}
						base.setPositionValues();
					} else if (base.isSticky) {
						base.$originalHeader.css('position', 'static');
						base.$clonedHeader.css('display', 'none');
						base.isSticky = false;
						base.resetWidth($('td,th', base.$clonedHeader), $('td,th', base.$originalHeader));
						$this.trigger('disabledStickiness.' + name);
					}
				});
			}
		}, 0);

		base.setPositionValues = base.debounce(function () {
			var winScrollTop = base.$window.scrollTop(),
				winScrollLeft = base.$window.scrollLeft();
			if (!base.isSticky ||
					winScrollTop < 0 || winScrollTop + base.$window.height() > base.$document.height() ||
					winScrollLeft < 0 || winScrollLeft + base.$window.width() > base.$document.width()) {
				return;
			}
			base.$originalHeader.css({
				'top': base.topOffset - (base.isWindowScrolling ? 0 : winScrollTop),
				'left': base.leftOffset - (base.isWindowScrolling ? 0 : winScrollLeft)
			});
		}, 0);

		base.updateWidth = base.debounce(function () {
			if (!base.isSticky) {
				return;
			}
			// Copy cell widths from clone
			if (!base.$originalHeaderCells) {
				base.$originalHeaderCells = $('th,td', base.$originalHeader);
			}
			if (!base.$clonedHeaderCells) {
				base.$clonedHeaderCells = $('th,td', base.$clonedHeader);
			}
			var cellWidths = base.getWidth(base.$clonedHeaderCells);
			base.setWidth(cellWidths, base.$clonedHeaderCells, base.$originalHeaderCells);

			// Copy row width from whole table
			base.$originalHeader.css('width', base.$clonedHeader.width());

			// If we're caching the height, we need to update the cached value when the width changes
			if (base.options.cacheHeaderHeight) {
				base.cachedHeaderHeight = base.$clonedHeader.height();
			}
		}, 0);

		base.getWidth = function ($clonedHeaders) {
			var widths = [];
			$clonedHeaders.each(function (index) {
				var width, $this = $(this);

				if ($this.css('box-sizing') === 'border-box') {
					var boundingClientRect = $this[0].getBoundingClientRect();
					if(boundingClientRect.width) {
						width = boundingClientRect.width; // #39: border-box bug
					} else {
						width = boundingClientRect.right - boundingClientRect.left; // ie8 bug: getBoundingClientRect() does not have a width property
					}
				} else {
					var $origTh = $('th', base.$originalHeader);
					if ($origTh.css('border-collapse') === 'collapse') {
						if (window.getComputedStyle) {
							width = parseFloat(window.getComputedStyle(this, null).width);
						} else {
							// ie8 only
							var leftPadding = parseFloat($this.css('padding-left'));
							var rightPadding = parseFloat($this.css('padding-right'));
							// Needs more investigation - this is assuming constant border around this cell and it's neighbours.
							var border = parseFloat($this.css('border-width'));
							width = $this.outerWidth() - leftPadding - rightPadding - border;
						}
					} else {
						width = $this.width();
					}
				}

				widths[index] = width;
			});
			return widths;
		};

		base.setWidth = function (widths, $clonedHeaders, $origHeaders) {
			$clonedHeaders.each(function (index) {
				var width = widths[index];
				$origHeaders.eq(index).css({
					'min-width': width,
					'max-width': width
				});
			});
		};

		base.resetWidth = function ($clonedHeaders, $origHeaders) {
			$clonedHeaders.each(function (index) {
				var $this = $(this);
				$origHeaders.eq(index).css({
					'min-width': $this.css('min-width'),
					'max-width': $this.css('max-width')
				});
			});
		};

		base.setOptions = function (options) {
			base.options = $.extend({}, defaults, options);
			base.$window = $(base.options.objWindow);
			base.$head = $(base.options.objHead);
			base.$document = $(base.options.objDocument);
			base.$scrollableArea = $(base.options.scrollableArea);
			base.isWindowScrolling = base.$scrollableArea[0] === base.$window[0];
		};

		base.updateOptions = function (options) {
			base.setOptions(options);
			// scrollableArea might have changed
			base.unbind();
			base.bind();
			base.updateWidth();
			base.toggleHeaders();
		};

		// Run initializer
		base.init();
	}

	// A plugin wrapper around the constructor,
	// preventing against multiple instantiations
	$.fn[name] = function ( options ) {
		return this.each(function () {
			var instance = $.data(this, 'plugin_' + name);
			if (instance) {
				if (typeof options === 'string') {
					instance[options].apply(instance);
				} else {
					instance.updateOptions(options);
				}
			} else if(options !== 'destroy') {
				$.data(this, 'plugin_' + name, new Plugin( this, options ));
			}
		});
	};

})(jQuery, window);

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.sticky-table-headers:stickytableheaders-resources', location = '/js/lib/utils.js' */
/**
 * Stickytable headers for confluence
 */
define("sticky-table-headers/utils", [
    "jquery"
], function(
    $
) {
    "use strict";

    /**
     * isNotAlreadyEnabled - is table already enabled
     *
     * @param {JqueryHTMLElement} table jquery table element
     * @return {Boolean}
     */
    var isNotAlreadyEnabled = function($table) {
        return !$table.hasClass("stickyTableHeaders");
    };

    /**
     * isNotNestedTable - is table inside a nested table
     *
     * @param {JqueryHTMLElement} table jquery table element
     * @return {Boolean}
     */
    var isNotNestedTable = function($table) {
        return !$table.parents("table").length > 0;
    };

    /**
     * isTheadTheFirstChild - is thead present as the first element of a table
     *
     * @param {JqueryHTMLElement} table jquery table element
     * @return {Boolean}
     */
    var isTheadTheFirstChild = function($table) {
        return $table.find("> :first-child").is("thead");
    };

    /**
     * hasTheadGotOnlyOneChild - Do we have only a single row inside the thead
     *
     * This will fix problems when people copy tables from the viewpage inside the editor and
     * add extra rows after the header. We should not enable sticky headers on tables that have more than
     * one TR inside the Thead
     *
     * @param {JqueryHTMLElement} table jquery table element
     * @return {Boolean}
     */
    var hasTheadGotOnlyOneChild = function($table) {
        return $table.find("thead").children().length === 1;
    };

    /**
     * isNotInsidePageLayout - is table inside a page layouts
     *
     * @param {JqueryHTMLElement} table jquery table element
     * @return {Boolean}
     */
    var isNotInsidePageLayout = function($table) {
        return !$table.closest(".columnLayout").length > 0;
    };

    /**
     * isNotDocumentationTheme
     *
     * Documentation theme is incompatible with stickyheaders
     *
     * @param {JqueryHTMLElement} table jquery table element
     * @return {Boolean}
     */
    var isNotDocumentationTheme = function() {
        return !$("body").hasClass("theme-documentation");
    };

    /**
     * areAllConfluenceThInTheSameRow - confluenceTh on different rows should be disabled
     *
     * We don't support vertical headers
     *
     * @param {JqueryHTMLElement} table jquery table element
     * @return {Boolean}
     */
    var areAllConfluenceThInTheSameRow = function($table) {
        return $table.find(".confluenceTh").parent().length === 1;
    };

    /**
     * areAllAdjacentCellsConfluenceTh - All cells in the same row needs to be confluenceTh
     *
     * Stickyheaders should only be applied if all cells are headers to avoid scrolling without
     * background problems
     *
     * @param {JqueryHTMLElement} table jquery table element
     * @return {Boolean}
     */
    var areAllAdjacentCellsConfluenceTh = function($table) {
        return $table.find(".confluenceTh").siblings().hasClass("confluenceTh");
    };

    /**
     * isAValidTable - Check if an html table can be used for sticky headers
     *
     * @param {HTMLElement} table HTMLElement
     * @return {Boolean} is a valid table element for stickyheaders
     */
    var isAValidTable = function(table) {
        var $table = $(table);

        return isNotDocumentationTheme() &&
               isNotAlreadyEnabled($table) &&
               isNotInsidePageLayout($table) &&
               isNotNestedTable($table) &&
               isTheadTheFirstChild($table) &&
               hasTheadGotOnlyOneChild($table) &&
               areAllConfluenceThInTheSameRow($table) &&
               areAllAdjacentCellsConfluenceTh($table);
    };

    /**
     * CONFDEV-33100 - The sticky headers library re-renders the sticky header if the window scrolls but not if you scroll
     * inside the table-wrap div, which is required for horizontal scrolling
     *
     * @param {JqueryHTMLTableElement} $tables tables to bind the scroll event to
     * @param {JqueryHTMLWindowElement} $win window to trigger the scroll event
     */
    var bindHorizontalScrolling = function($tables, $win) {
        var $window = $win || $(window);

        $tables.closest('.table-wrap').scroll(function() {
            $window.trigger('scroll.stickyTableHeaders');
        });
    };

    /**
     * moveHeaderRowsToTHead - Moves first row confluence th to a thead
     *
     * @param {HTMLTableElement|JqueryHTMLTableElement} table Html table element
     */
    var moveHeaderRowsToTHead = function(table) {
        $(table).each(function() {
            var $thisTable = $(this);
            var hasMergedColumns = $thisTable.find(".confluenceTh[rowspan]").length > 0;
            var $th = $thisTable.find("> :first-child > :first-child .confluenceTh");
            var alredyWrappedOnAThead = $th.length && $th.closest('thead').length > 0;
            var isFirstRow = $th.length && $th.parent().index() === 0;

            // we don't have a thead, so lets create one, but only if the confluenceTh are the first tr
            if (isNotNestedTable($thisTable) && isNotInsidePageLayout($thisTable) && !alredyWrappedOnAThead && isFirstRow && !hasMergedColumns) {
                // move to a thead
                var $headerElement = $("<thead />").append($th.parent());

                $thisTable.prepend($headerElement);
            }
        });
    };

    return {
        isAValidTable: isAValidTable,
        bindHorizontalScrolling: bindHorizontalScrolling,
        moveHeaderRowsToTHead: moveHeaderRowsToTHead,
        isNotDocumentationTheme: isNotDocumentationTheme
    };
});

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.sticky-table-headers:stickytableheaders-resources', location = '/js/lib/viewpage.js' */
/**
 * Stickytable headers for confluence
 */
define("sticky-table-headers/viewpage", [
    "jquery",
    "sticky-table-headers/utils"
], function(
    $,
    Utils
) {
    "use strict";

    /**
     * setupTable - Enable sticky tables for a group of table elements
     *
     * @param {HTMLElement|JqueryHtmlElement} table Setup stickyheaders for tables with a defined parameter for valid tables
     * @param {Object} options StickyTableHeaders jquery plugin options
     */
    var setupTable = function(table, options) {
        // setup stalky table headers
        var $validTables = $(table).filter(function() {
            return Utils.isAValidTable(this);
        });

        $validTables.stickyTableHeaders(options).addClass('stickyTableHeaders');

        Utils.bindHorizontalScrolling($validTables);
    };

    /**
     * initialize stickyheaders for all confluence tables
     *
     */
    var initialize = function() {
        var $table = $(".confluenceTable");
        var $win = $(window);

        // We need to abort ASAP if we're in the documentation space
        if (!Utils.isNotDocumentationTheme()) {
            return;
        }

        // the editor structure by default does not have a thead
        Utils.moveHeaderRowsToTHead($table);

        // We use mutation observer in order to trigger resizing
        if (window.MutationObserver) {

            // we need to listen to all outer container that could cause reflow
            var target = document.querySelector("#page");

            // we need to exclude stickyheaders own mutations
            var stickyHeadersMutationTarget = /sticky|tableFloating|confluenceTh/;

            // listen for changes in order to make sure tableHeaders are repositioned upon reflow
            var observer = new MutationObserver(
                $.debounce(function(mutations) {
                    var validtriggerFlag = false;
                    var className;

                    for(var i=0, len=mutations.length; i<len; i++) {
                        className=mutations[i].target.className;

                        if (!stickyHeadersMutationTarget.test(className)) {
                            validtriggerFlag = true;
                            break;
                        }
                    }

                    if (validtriggerFlag) {
                        $win.trigger('resize.stickyTableHeaders');
                    }
                }, 0)
            );

            // start observing
            observer.observe(target, {
                subtree: true,
                attributes: true,
                childList: true
            });
        }

        // enable all confluence tables
        setupTable($table, {
            cacheHeaderHeight: true
        });
    };

    return {
        initialize: initialize,
        setupTable: setupTable
    };
});

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.sticky-table-headers:stickytableheaders-resources', location = '/js/lib/editor.js' */
/**
 * Stickytable headers for confluence
 */
define("sticky-table-headers/editor", [
    "ajs",
    "jquery",
    "sticky-table-headers/utils",
], function(
    AJS,
    $,
    Utils
) {
    "use strict";

    /**
     * getDefaultConfig - Get default configuration to enable sticky headers in the editor
     *
     * @param {TinymceActiveEditor} editor tinymce active editor instance
     * @return {Object} default configuration for sticky headers to work on the editor
     */
    var getDefaultConfig = function(editor) {
        var defaults = {};
        defaults.objWindow = $(editor.getWin());
        defaults.scrollableArea = defaults.objWindow;
        defaults.objDocument = $(editor.getDoc());
        defaults.objHead = defaults.objDocument.find('head');

        return defaults;
    };

    /**
     * setupTable - Enable sticky tables for a group of table elements
     *
     * @param {HTMLElement|JqueryHtmlElement} table Setup stickyheaders for tables with a defined parameter for valid tables
     * @param {Object} options StickyTableHeaders jquery plugin options
     */
    var setupTable = function(table, options) {
        var editor = AJS.Rte.getEditor();

        if (editor) {
            var defaults = getDefaultConfig(editor);
            var settings = $.extend({}, defaults, options);
            var $validTables = $(table).filter(function() {
                return Utils.isAValidTable(this);
            });

            $validTables.stickyTableHeaders(settings).addClass('stickyTableHeaders');

            Utils.bindHorizontalScrolling($validTables, settings.objWindow);
        }
    };

    /**
     * initialize stickyheaders for all confluence tables
     *
     */
    var initialize = function() {
        var editor = AJS.Rte.getEditor();

        if (editor) {
            var $table = $(editor.getBody()).find(".confluenceTable");

            // the editor structure by default does not have a thead
            Utils.moveHeaderRowsToTHead($table);

            // enable all confluence tables
            setupTable($table);
        }
    };

    return {
        initialize: initialize,
        setupTable: setupTable
    };
});

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.sticky-table-headers:stickytableheaders-resources', location = '/js/stickytableheaders.js' */
/**
 * Stickytable headers for confluence
 *
 * Adds stalking headers for viewpage and editor dependeds on a modified version of stalky headers
 * that allow extra options to be passed
 */
define("sticky-table-headers", [
    "ajs",
    "sticky-table-headers/viewpage",
    "sticky-table-headers/editor"
], function(
    AJS,
    StickyViewpage,
    StickyEditor
) {
    "use strict";

    return {
        initialize: function() {
            if (!AJS.DarkFeatures.isEnabled("confluence-table-enhancements.sticky-headers.disabled")) {
                // auto initialize for the viewpage
                AJS.toInit(StickyViewpage.initialize);
            }

            if (AJS.DarkFeatures.isEnabled("confluence-table-enhancements.sticky-headers-editor")) {
                // auto initialize for the editor
                AJS.bind("rte-ready", StickyEditor.initialize);

                // this is to make stickyheaders works with quick-edit
                AJS.bind("rte-quick-edit-push-state", StickyEditor.initialize);
                AJS.bind("rte-quick-edit-push-hash", StickyEditor.initialize);
            }
        }
    };
});

// auto start
require("sticky-table-headers").initialize();

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.image.effects.ImageEffectsPlugin:propertiespanel', location = 'com/atlassian/confluence/image/effects/property-panel.js' */
AJS.toInit(function(e){var p,i=/(\?|\&)(effects\=[^&]+)($|&)/,t=/(^|\&)(effects\=([^&]+))($|&)/,s=null,j=[],h=2000;q();if(Confluence.Editor.ImageProps){f()}else{l()}function f(){AJS.bind("dialog-created.image-properties",function(x,y){p=y.img;var z="image-effects",w="image-effects-panel";if(!a()){Confluence.Editor.ImageProps.registerPanel(z,c("Image effects can\'t be applied to web images"),w,null)}else{if(!n()){Confluence.Editor.ImageProps.registerPanel(z,c("The image\'s pixel count is too large to apply effects."),w,null)}else{Confluence.Editor.ImageProps.registerPanel("image-effects",c(),"image-effects-panel",r)}}});AJS.bind("dialog-before-show.image-properties",function(){b();o(m(e(p)))})}function l(){var w=new AJS.Dialog({width:600,height:500,id:"image-effects-dialog"});w.addHeader("Add Image Effect");w.addPanel("",c(),"");b();w.addSubmit("Save",function(){var x=v();x.done(function(){w.hide()})});w.addCancel("Close",function(){w.hide()});AJS.Confluence.PropertyPanel.Image.pluginButtons.push(null,{create:function(x){p=x[0];var z=m(x),y=!a();return{className:"image-effects",text:"Effects...",tooltip:y?"Image effects can\'t be applied to web images":"Add an image effect like drop shadow or picture frame",click:function(){if(!n()){alert("The image\'s pixel count is too large to apply effects.");return false}o(m(e(p)));AJS.Confluence.PropertyPanel.destroy();w.show()},disabled:y,selected:!!z}}})}function g(y,A){var B=y.attr("src");var x=i.exec(B);var w=A?"effects="+A:"";if(x){B=B.replace(x[2],w)}else{if(A){B=B+(B.indexOf("?")!=-1?"&":"?")+w}}y.attr("src",B);y.attr("data-mce-src",B);var z=y.attr("confluence-query-params");if(z){var x=t.exec(z);if(x){z=z.replace(x[2],w)}else{z=z+"&"+w}}else{z=w}y.attr("confluence-query-params",z)}function m(x){var y=x.attr("confluence-query-params");var w=t.exec(y);if(w){return w[3]}}function o(w){e(".image-effect-preview.selected").removeClass("selected");if(w){e(j).each(function(x,y){if(y.effects==w){e(e(".image-effect-preview")[x]).addClass("selected");return false}})}else{e(".image-effect-preview.image-effect-none").addClass("selected")}s=w}function q(){j.push({name:"None",effects:null});j.push({name:"Taped",effects:"border-simple,blur-border,tape"});j.push({name:"Instant Camera",effects:"border-polaroid,blur-border"});j.push({name:"Curl Shadow",effects:"border-simple,shadow-kn"});j.push({name:"Snapshot",effects:"border-simple,blur-border"});j.push({name:"Drop Shadow",effects:"drop-shadow"})}function c(w){if(w){return'<div class="aui-message warning"><span class="aui-icon icon-warning"></span>'+w+"</div>"}return'<div class="image-effects"><ul class="image-list"></ul></div>'}function b(){var x=e("div.image-effects ul.image-list");var z=Math.floor(Math.random()*22)+1;for(var y=0;y<j.length;y++){var w=e('<li class="attached-image image-effect-preview'+(!j[y].effects?" image-effect-none":"")+'"><div class="image-container"><img class="thumbnail" src="'+AJS.contextPath()+"/plugins/servlet/imgFilter.png?preview=true&id="+z+"&effects="+j[y].effects+'" title="'+j[y].name+'" style="margin-top: 5px"></div><span class="caption filename" title="'+j[y].name+'">'+j[y].name+"</span></li>");w.hover(function(){e(this).addClass("hover")},function(){e(this).removeClass("hover")});x.append(w);var A=j[y];w.click(A,function(B){e(".image-effect-preview.selected").removeClass("selected");e(this).addClass("selected");s=B.data.effects})}}function a(){return !e(p).hasClass("confluence-external-resource")}function n(){return !(p.naturalHeight&&p.naturalWidth&&(p.naturalHeight*p.naturalWidth)>(h*h))}function r(){return u()}function v(){return u(d,k)}function u(w,z){var y=e.Deferred();w&&w();p.onload=A;var x=p.src;g(e(p),s);if(p.src==x){A()}function A(){z&&z();y.resolve();p.onload=null;tinyMCE.activeEditor.undoManager.add()}return y}function d(){var C=dialog.popup.element,x=50,z=x*13/60,D=x*30/60,w=x-D,y=e('<div class="image-properties-loading-blanket"><div class="loading-data"></div></div>').appendTo(C.find(".dialog-page-body")),B=y.find(".loading-data");y.css({width:y.parent().width(),height:C.height()});B.css({marginTop:-x*1.2,marginLeft:-x*1.2});var A={color:"#666",width:z,radius:D,length:w,top:0,left:0,zIndex:0,speed:1.042};B.spin(A)}function k(){var w=dialog.popup.element.find(".image-properties-loading-blanket .loading-data");w.css({marginTop:"",marginLeft:""});w.spinStop();w.closest(".image-properties-loading-blanket").remove()}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-browser-metrics:editor', location = '/js/editor.js' */
require(["internal/browser-metrics","jquery"],function(b,c){function a(){var e=AJS.Meta.get("content-type");var d=AJS.Meta.getBoolean("new-page")?"create":"edit";if(e&&d){b.start({key:"confluence."+e+"."+d+".view",ready:".active-richtext",isInitial:true})}}c(a)});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-image-attributes:soy-resources', location = 'soy/image-attributes-panel.soy' */
// This file was automatically generated from image-attributes-panel.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.Editor == 'undefined') { Confluence.Templates.Editor = {}; }
if (typeof Confluence.Templates.Editor.ImageAttributes == 'undefined') { Confluence.Templates.Editor.ImageAttributes = {}; }


Confluence.Templates.Editor.ImageAttributes.content = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<form class="aui" onsubmit="return false;"><div class="field-group"><label for="image-title-attribute">', soy.$$escapeHtml("Title text"), '</label><input class="text" type="text" id="image-title-attribute" name="image-title-attribute" value="', (opt_data.imgTitle) ? soy.$$escapeHtml(opt_data.imgTitle) : '', '"><div class="description">', soy.$$escapeHtml("Appears when the cursor hovers over the image"), '</div></div><div class="field-group"><label for="image-alt-attribute">', soy.$$escapeHtml("Alt text"), '</label><input class="text" type="text" id="image-alt-attribute" name="image-alt-attribute" value="', (opt_data.imgAlt) ? soy.$$escapeHtml(opt_data.imgAlt) : '', '"><div class="description">', soy.$$escapeHtml("Used by screen readers and when the image cannot be shown"), '</div></div></form>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-image-attributes:image-attributes', location = 'js/image-attributes-panel.js' */
AJS.toInit(function(g){function h(){var a=c.val();d.attr({"data-element-title":a,title:i(d.attr("data-location"),a),alt:e.val()})}function i(a,b){return a&&0<a.length&&b&&0<b.length?a+" ("+b+")":a&&0<a.length?a:b&&0<b.length?"("+b+")":""}AJS.bind("dialog-created.image-properties",function(a,b){d=g(b.img);var f=g(Confluence.Templates.Editor.ImageAttributes.content({imgTitle:d.attr("data-element-title"),imgAlt:d.attr("alt")}));c=f.find("#image-title-attribute");e=f.find("#image-alt-attribute");c.val()===
e.val()&&(c.bind("input.chained",function(){e.val(c.val())}),e.on("change",function(){c.unbind("input.chained")}));Confluence.Editor.ImageProps.registerPanel(j,f,k,h)});var j="image-attributes",k="image-attributes-panel",d,c,e});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.ext.newcode-macro-plugin:editor-scripts', location = 'scripts/paste-cleanup.js' */
AJS.$(document).bind("postPaste",function(b,a,c){AJS.$(c.node).find('span[class|="code"]').contents().unwrap();AJS.$(c.node).find('pre[class|="code"]').each(function(d,f){f.className=f.className.replace(/\bcode-.[^\s]*\b/gi,"")})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-roadmap-plugin:roadmap-utilities-resources', location = 'utils/roadmap-helper.js' */
(function(b,a){var c=Confluence.Roadmap=Confluence.Roadmap||{};c.Helper={getPosXOnMonthTimeline:function(g,e){var j=moment(g.startDate).startOf("month");var f=moment(e).startOf("month");var d=c.DateUtilities.getNumberOfMonths(j,f);var i=d*Roadmap.MONTH_WIDTH;var h=c.DateUtilities.getMilisecondsFromStartMonth(e)*Roadmap.MONTH_WIDTH/c.DateUtilities.getMilisecondsInMonth(e);return Math.round(i+h)},getPosXOnWeekTimeline:function(g,d){var e=moment(g.startDate).startOf("isoWeek");var f=moment(d).diff(e,"weeks",true);var h=f*Roadmap.WEEK_WIDTH;return Math.round(h)},getWidthTimeline:function(f,e){var d=e.duration;if(f.displayOption===Roadmap.TIMELINE_DISPLAY_OPTION.MONTH){d*=Roadmap.MONTH_WIDTH}else{d*=Roadmap.WEEK_WIDTH}return d<Roadmap.EXTRA_SPACE_AROUND?0:Math.round(d-Roadmap.EXTRA_SPACE_AROUND)},getMonthStartDateByPosition:function(i,h){var d=Math.floor(h/Roadmap.MONTH_WIDTH);var g=moment(i.startDate).startOf("month");var e=g.add(d,"months").toDate();var f=Math.abs(h)%Roadmap.MONTH_WIDTH;if(f!==0&&d<0){f=Roadmap.MONTH_WIDTH-f}var j=c.DateUtilities.getMilisecondsInMonth(e)*f/Roadmap.MONTH_WIDTH;return new Date(e.getTime()+j)},getWeekStartDateByPosition:function(f,e){var h=moment(f.startDate).startOf("isoWeek");var d=e/Roadmap.WEEK_WIDTH;var g=d*c.DateUtilities.MILLISECONDS_A_WEEK;return new Date(h.valueOf()+g)},guid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(f){var e=Math.random()*16|0,d=f=="x"?e:(e&3|8);return d.toString(16)})}};c.ColorHelper={resetColorCounts:function(){a.each(Roadmap.COLORS,function(d){d.count=0})},findColor:function(d){return a.find(Roadmap.COLORS,function(e){return e.lane===d.lane})},adjustColorCount:function(e,f){var d=c.ColorHelper.findColor(e);if(d){d.count=d.count+f}},getColor:function(){return a.min(Roadmap.COLORS,function(d){return d.count})}}}(AJS.$,window._));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-roadmap-plugin:roadmap-utilities-resources', location = 'utils/roadmap-utilities.js' */
(function(b,a){var c=Confluence.Roadmap=Confluence.Roadmap||{};c.DateUtilities={MILLISECONDS_A_DAY:86400000,MILLISECONDS_A_WEEK:604800000,parseDate:function(e){var d=moment(e,Roadmap.SHORT_DATE_FORMAT,true);if(d.isValid()){return d}d=moment(e,Roadmap.TWO_YY_SHORT_DATE_FORMAT,true);return d.isValid()?d:null},getDateStringFromDate:function(e,d){if(d){return moment(e).format(d)}return moment(e).format(Roadmap.DATE_FORMAT)},getDateFromDateString:function(e,d){return moment(e,d||Roadmap.DATE_FORMAT).toDate()},getNumberOfMonths:function(e,d){var g=moment(e),f=moment(d);return f.diff(g,"months")},getMilisecondsInMonth:function(d){return moment(d).daysInMonth()*c.DateUtilities.MILLISECONDS_A_DAY},getMilisecondsFromStartMonth:function(d){return d.getTime()-moment(d).startOf("month").valueOf()},calculateDurationInformation:function(d){var g=c.DateUtilities.getMilisecondsInMonth(d.toDate());var e=c.DateUtilities.getMilisecondsFromStartMonth(d.toDate());var f=g-e;return{totalMillisOfMonth:g,millisFromStartMonth:e,millisRemainingOfMonth:f,durationOfMonth:e/g,remainingDurationOfMonth:f/g}},convertToWeekDuration:function(e,g){var l=moment(e);var j=l.clone();var m=c.DateUtilities.calculateDurationInformation(l);if(g<=m.remainingDurationOfMonth){var f=g*m.totalMillisOfMonth;j=j.add(f,"ms")}else{j=j.add(m.millisRemainingOfMonth,"ms");g=g-m.remainingDurationOfMonth;var h=Math.floor(g);if(h>0){j=j.add(h,"months")}var k=g%1;var i=c.DateUtilities.getMilisecondsInMonth(j.toDate());var d=k*i;j.add(d,"ms")}return j.diff(l,"weeks",true)},convertToMonthDuration:function(e,j){var k=moment(e);var f=j*c.DateUtilities.MILLISECONDS_A_WEEK;var i=k.clone().add(f,"ms");var h=i.get("year")*12+i.get("month");h=h-(k.get("year")*12+k.get("month"));var l=c.DateUtilities.calculateDurationInformation(k);if(h===0){return f/l.totalMillisOfMonth}else{var g=l.remainingDurationOfMonth;var d=c.DateUtilities.calculateDurationInformation(i);g=g+d.durationOfMonth;g=g+(h-1);return g}}};c.FieldUtilities={fixDatePickerFields:function(d){var e=d.find("input[data-aui-dp-uuid]");e.each(function(f,g){var i=b(g),h=i.attr("data-aui-dp-uuid");i.on("click focus",function(){var j=b("[data-aui-dp-popup-uuid="+h+"]");if(AJS.version<="5.4.5"){var k=j.datepicker("option","onSelect");j.datepicker("option","onSelect",function(m,l){k(m,l);i.change()})}j.parents(".aui-inline-dialog").addClass("datepicker-roadmap-patch")})})}}}(AJS.$,window._));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-roadmap-plugin:roadmap-models', location = '/models/model.js' */
(function(){window.Roadmap=window.Roadmap||{};Roadmap.Bar=Backbone.Model.extend({defaults:function(){return{id:Confluence.Roadmap.Helper.guid(),title:"New Bar",description:"",startDate:new Date(),duration:1,rowIndex:0,pageLink:{}}}});Roadmap.Lane=Backbone.Model.extend({defaults:function(){return{title:"New Lane",color:Confluence.Roadmap.ColorHelper.getColor(),bars:[]}},initialize:function(){var a=new Roadmap.Bars(this.get("bars"));this.set("bars",a)},getNumberOfRows:function(){var a=this.get("bars");if(a.length===0){return 0}var b=0;a.each(function(c){b=Math.max(c.get("rowIndex"),b)});return b+1}});Roadmap.Marker=Backbone.Model.extend({defaults:function(){return{title:"Marker"}}});Roadmap.Timeline=Backbone.Model.extend({defaults:function(){return{displayOption:Roadmap.TIMELINE_DISPLAY_OPTION.MONTH}},validate:function(a){var d=[];var c=Confluence.Roadmap.DateUtilities.parseDate(a.startDateString);var b=Confluence.Roadmap.DateUtilities.parseDate(a.endDateString);if(!c||!b){d.push({name:"date",message:"Enter dates in yy-mm-dd"})}else{if(c.diff(b)>=0){d.push({name:"endDate",message:"Start date needs to be before the end date"})}else{if(b.diff(c,"years",true)>Roadmap.TIMELINE_YEARS_LIMIT){d.push({name:"endDate",message:AJS.format("You cannot plan more than {0} years ahead.",Roadmap.TIMELINE_YEARS_LIMIT)})}}}return d.length>0?d:false},calculateTimelineColumns:function(){var d=this.get("startDate");var f=this.get("endDate");var c=[];var e;if(this.get("displayOption")===Roadmap.TIMELINE_DISPLAY_OPTION.MONTH){e=moment(d).clone().startOf("month");var b=moment(f).clone().endOf("month");do{c.push({month:Confluence.Roadmap.DateUtilities.getDateStringFromDate(e,Roadmap.MONTH_FORMAT),year:e.get("year")});e.add(1,"months")}while(e.diff(b)<0)}else{e=moment(d).clone().startOf("isoWeek");var a=moment(f).clone().endOf("isoWeek");do{c.push({month:Confluence.Roadmap.DateUtilities.getDateStringFromDate(e,Roadmap.WEEK_FORMAT),year:e.get("year")});e.add(1,"weeks")}while(e.diff(a)<0)}this.attributes.displayTimelineColumns=c}});Roadmap.Roadmap=Backbone.Model.extend({defaults:function(){return{title:"Roadmap Planner",lanes:[],markers:[]}},initialize:function(){var a=new Roadmap.Lanes(this.get("lanes"));this.set("lanes",a);var c=new Roadmap.Markers(this.get("markers"));this.set("markers",c);var b=new Roadmap.Timeline(this.get("timeline"));this.set("timeline",b)},parse:function(a){if(!a.timeline){return Roadmap.getDefaultRoadmapData()}return this.fromMacroData(a)},fromMacroData:function(c){var b=c.timeline;b.startDate=Confluence.Roadmap.DateUtilities.getDateFromDateString(b.startDate);b.endDate=Confluence.Roadmap.DateUtilities.getDateFromDateString(b.endDate);var a=c.lanes;_.each(a,function(e){var f=e.bars;_.each(f,function(g){g.startDate=Confluence.Roadmap.DateUtilities.getDateFromDateString(g.startDate);if(!g.id){g.id=Confluence.Roadmap.Helper.guid()}});e.bars=f});c.lanes=a;var d=c.markers;_.each(d,function(e){e.markerDate=Confluence.Roadmap.DateUtilities.getDateFromDateString(e.markerDate)});c.markers=d;return c},toMacroData:function(){var c=this.toJSON();var b=c.timeline.toJSON();b.startDate=Confluence.Roadmap.DateUtilities.getDateStringFromDate(b.startDate);b.endDate=Confluence.Roadmap.DateUtilities.getDateStringFromDate(b.endDate);delete b.displayTimelineColumns;c.timeline=b;var a=c.lanes.toJSON();_.each(a,function(e){var f=e.bars.toJSON();_.each(f,function(g){g.startDate=Confluence.Roadmap.DateUtilities.getDateStringFromDate(g.startDate)});e.bars=f});c.lanes=a;var d=c.markers.toJSON();_.each(d,function(e){e.markerDate=Confluence.Roadmap.DateUtilities.getDateStringFromDate(e.markerDate)});c.markers=d;return c},updateDurationUnit:function(a){this.get("lanes").each(function(b){b.get("bars").each(function(c){var d;d=a===Roadmap.TIMELINE_DISPLAY_OPTION.MONTH?Confluence.Roadmap.DateUtilities.convertToMonthDuration(c.get("startDate"),c.get("duration")):Confluence.Roadmap.DateUtilities.convertToWeekDuration(c.get("startDate"),c.get("duration"));c.attributes.duration=d})})}})})();
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-roadmap-plugin:roadmap-models', location = '/models/collection.js' */
(function(){window.Roadmap=window.Roadmap||{};Roadmap.Bars=Backbone.Collection.extend({model:Roadmap.Bar});Roadmap.Lanes=Backbone.Collection.extend({model:Roadmap.Lane});Roadmap.Markers=Backbone.Collection.extend({model:Roadmap.Marker})})();
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-roadmap-plugin:roadmap-editor-toolbar-view-resources', location = 'view/roadmap-editor/toolbar/toolbar-templates.soy' */
// This file was automatically generated from toolbar-templates.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.Roadmap == 'undefined') { Confluence.Templates.Roadmap = {}; }


Confluence.Templates.Roadmap.toolbar = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div id="roadmap-editor-toolbar" class="aui-toolbar2"><div class="aui-toolbar2-inner"><div class="aui-toolbar2-group"><div class="aui-toolbar2-primary">');
  var param4 = new soy.StringBuilder();
  aui.buttons.button({id: 'toolbar-button-add-lane', text: ' ' + soy.$$escapeHtml("Add lane"), iconType: 'aui', iconClass: 'aui-icon-small aui-iconfont-add', iconText: 'Add'}, param4);
  aui.buttons.button({id: 'toolbar-button-add-bar', text: ' ' + soy.$$escapeHtml("Add bar"), iconType: 'aui', iconClass: 'aui-icon-small aui-iconfont-add', iconText: 'Add'}, param4);
  aui.buttons.button({id: 'toolbar-button-add-marker', text: ' ' + soy.$$escapeHtml("Add marker"), iconType: 'aui', iconClass: 'aui-icon-small aui-iconfont-add', iconText: 'Add'}, param4);
  aui.buttons.buttons({content: param4.toString()}, output);
  output.append('</div><div class="aui-toolbar2-secondary">');
  Confluence.Templates.Roadmap.timelineOptionsForm(null, output);
  output.append('</div></div></div></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Roadmap.timelineOptionsForm = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  var param36 = new soy.StringBuilder('<fieldset>');
  aui.form.selectField({id: 'timeline-display-options-select', labelContent: soy.$$escapeHtml("View by"), options: [{'text': "Months", 'value': 'MONTH'}, {'text': "Weeks", 'value': 'WEEK'}], extraClasses: 'view-by'}, param36);
  aui.form.textField({id: 'timeline-startdate-input', name: 'startDate', isRequired: true, extraClasses: 'roadmap-toolbar-date start-date aui-date-picker'}, param36);
  param36.append(' - ');
  aui.form.textField({id: 'timeline-enddate-input', name: 'endDate', isRequired: true, extraClasses: 'roadmap-toolbar-date end-date aui-date-picker'}, param36);
  param36.append('<div class="field-group timeline-field-group-error"><div id="roadmap-timeline-error" class="error" /></div></fieldset>');
  aui.form.form({id: 'timeline-options-form', action: '#', content: param36.toString()}, output);
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-roadmap-plugin:roadmap-editor-toolbar-view-resources', location = 'view/roadmap-editor/toolbar/toolbar.js' */
(function(b,a){window.Roadmap=window.Roadmap||{};Roadmap.ToolbarView=Backbone.View.extend({className:"roadmap-toolbar",events:{"click #toolbar-button-add-bar":"onAddBarClick","click #toolbar-button-add-lane":"onAddLaneClick","click #toolbar-button-add-marker":"onAddMarkerClick","change #timeline-display-options-select":"onTimelineOptionChange"},initialize:function(){a.bindAll(this,"render")},render:function(){b(this.$el).html(Confluence.Templates.Roadmap.toolbar());this._initVariables();this._setupTimelineOptionsForm();return this},onAddBarClick:function(i){i.preventDefault();var d=this.model.get("lanes").at(0);var c=d.get("bars");var g=this.model.get("timeline");var f=this.model.get("timeline").get("startDate");var h=g.get("displayOption")===Roadmap.TIMELINE_DISPLAY_OPTION.MONTH?moment(f).startOf("month"):moment(f).startOf("isoWeek");c.add(new Roadmap.Bar({rowIndex:d.getNumberOfRows(),startDate:h.toDate()}))},onAddLaneClick:function(d){d.preventDefault();var c=this.model.get("lanes");c.add(new Roadmap.Lane())},onAddMarkerClick:function(f){var g=this.model.get("markers");var d=this.model.get("timeline");var h=moment(d.get("startDate"));var c=d.get("displayOption")===Roadmap.TIMELINE_DISPLAY_OPTION.MONTH?h.date(15):h.isoWeekday(4);g.add(new Roadmap.Marker({markerDate:c.toDate()}))},onTimelineOptionChange:function(d){var c=this.model.get("timeline");c.set({displayOption:this.$timelineSelect.val()})},_initVariables:function(){this.$timelineForm=this.$el.find("#timeline-options-form");this.$startDateInput=this.$timelineForm.find("#timeline-startdate-input");this.$endDateInput=this.$timelineForm.find("#timeline-enddate-input");this.$timelineSelect=this.$timelineForm.find("#timeline-display-options-select");this.$timelineError=this.$timelineForm.find("#roadmap-timeline-error");this.newTimeline=new Roadmap.Timeline()},_clearTimelineErrors:function(){this.$timelineError.empty()},_showTimelineErrors:function(){var c=this;a.each(c.newTimeline.validationError,function(d){c.$timelineError.append(d.message)})},_applyNewTimeline:function(){var c=this.model.get("timeline");var e=Confluence.Roadmap.DateUtilities.parseDate(this.$startDateInput.val());var d=Confluence.Roadmap.DateUtilities.parseDate(this.$endDateInput.val());c.set({startDate:e.toDate(),endDate:d.toDate()});this._showTimeLineFormat()},_showTimeLineFormat:function(){var c=this.model.get("timeline");this.$startDateInput.val(Confluence.Roadmap.DateUtilities.getDateStringFromDate(c.get("startDate"),Roadmap.SHORT_DATE_FORMAT));this.$endDateInput.val(Confluence.Roadmap.DateUtilities.getDateStringFromDate(c.get("endDate"),Roadmap.SHORT_DATE_FORMAT))},_validate:function(){this._clearTimelineErrors();if(this.newTimeline.isValid()){this._applyNewTimeline()}else{this._showTimelineErrors()}},_setupTimelineOptionsForm:function(){var e=this.model.get("timeline");var g=Confluence.Roadmap.DateUtilities.getDateStringFromDate(e.get("startDate"),Roadmap.SHORT_DATE_FORMAT),c=Confluence.Roadmap.DateUtilities.getDateStringFromDate(e.get("endDate"),Roadmap.SHORT_DATE_FORMAT);this.$startDateInput.val(g);this.$endDateInput.val(c);this.newTimeline.set({startDateString:g,endDateString:c});this.$timelineSelect.val(e.get("displayOption"));var f={overrideBrowserDefault:true,firstDay:1};this.$startDateInput.datePicker(f);this.$endDateInput.datePicker(f);Confluence.Roadmap.FieldUtilities.fixDatePickerFields(this.$timelineForm);var d=this;this.$startDateInput.on("change",function(){d.newTimeline.set({startDateString:d.$startDateInput.val()});d._validate()});this.$endDateInput.on("change",function(){d.newTimeline.set({endDateString:d.$endDateInput.val()});d._validate()})}})})(AJS.$,window._);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-roadmap-plugin:roadmap-editor-timeline-view-resources', location = 'view/roadmap-editor/timeline/timeline-templates.soy' */
// This file was automatically generated from timeline-templates.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.Roadmap == 'undefined') { Confluence.Templates.Roadmap = {}; }


Confluence.Templates.Roadmap.timeline = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  var displayTimelineList3 = opt_data.displayTimelines;
  var displayTimelineListLen3 = displayTimelineList3.length;
  for (var displayTimelineIndex3 = 0; displayTimelineIndex3 < displayTimelineListLen3; displayTimelineIndex3++) {
    var displayTimelineData3 = displayTimelineList3[displayTimelineIndex3];
    output.append('<div class="roadmap-column-title">', (displayTimelineIndex3 == 0 || displayTimelineData3.year != opt_data.displayTimelines[displayTimelineIndex3 - 1].year) ? '<span class="roadmap-column-year">' + soy.$$escapeHtml(displayTimelineData3.year) + '</span><br/>' : '', soy.$$escapeHtml(displayTimelineData3.month), '</div>');
  }
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Roadmap.timelineColumn = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  var iLimit14 = opt_data.numberOfColumns;
  for (var i14 = 0; i14 < iLimit14; i14++) {
    output.append('<div class="roadmap-column-item">&nbsp;</div>');
  }
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-roadmap-plugin:roadmap-editor-timeline-view-resources', location = 'view/roadmap-editor/timeline/timeline.js' */
(function(b,a){window.Roadmap=window.Roadmap||{};var c={};c.Helper=Confluence.Roadmap.Helper;Roadmap.TimelineView=Backbone.View.extend({className:"roadmap-frame-title",initialize:function(){a.bindAll(this,"render")},render:function(){this.model.calculateTimelineColumns();this.$el.html(Confluence.Templates.Roadmap.timeline({displayTimelines:this.model.get("displayTimelineColumns")}));return this},update:function(){this.render()},getBarPosition:function(d){if(this.model.get("displayOption")===Roadmap.TIMELINE_DISPLAY_OPTION.MONTH){return{left:c.Helper.getPosXOnMonthTimeline(this.model.attributes,d.startDate),width:c.Helper.getWidthTimeline(this.model.attributes,d)}}return{left:c.Helper.getPosXOnWeekTimeline(this.model.attributes,d.startDate),width:c.Helper.getWidthTimeline(this.model.attributes,d)}},getBarDuration:function(d){return(this.model.get("displayOption")===Roadmap.TIMELINE_DISPLAY_OPTION.MONTH)?(d/Roadmap.MONTH_WIDTH):(d/Roadmap.WEEK_WIDTH)},getBarStartDate:function(d){return(this.model.get("displayOption")===Roadmap.TIMELINE_DISPLAY_OPTION.MONTH)?c.Helper.getMonthStartDateByPosition(this.model.attributes,d):c.Helper.getWeekStartDateByPosition(this.model.attributes,d)}})})(AJS.$,window._);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-roadmap-plugin:roadmap-editor-timeline-view-resources', location = 'view/roadmap-editor/timeline/timeline-column.js' */
(function(b,a){window.Roadmap=window.Roadmap||{};Roadmap.TimelineColumnView=Backbone.View.extend({className:"roadmap-frame-content",initialize:function(){a.bindAll(this,"render")},render:function(){var c=this.model.get("displayTimelineColumns").length;this.$el.html(Confluence.Templates.Roadmap.timelineColumn({numberOfColumns:c}));return this},updateHeight:function(c){this.$el.height(c)},update:function(){this.render()},getSizeAndPosition:function(){return{width:this.$el.width(),height:this.$el.height(),left:this.$el.position().left,top:this.$el.position().top}}})})(AJS.$,window._);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-roadmap-plugin:roadmap-dialog-resources', location = 'view/dialog-view.js' */
(function(b,a){window.Roadmap=window.Roadmap||{};Roadmap.InlineDialogView=Backbone.View.extend({initialize:function(c){a.bindAll(this,"_onDocumentClick","_onKeyDown","_shouldHide","_onHide");this._trigger=c.trigger;this._dialogOptions=c.dialogOptions;this._reset();var d=this;b(".roadmap-editor-popup, .roadmap-macro-view").scroll(function(){d.hide()})},_shouldHideWhenClick:function(c){return !b.contains(this._inlineDialog[0],c.target)},_createInlineDialog:function(d,f){var e,g=this;function h(l,k,j){g._getContent(l);j()}function c(){g._onBeforeShow();a.delay(function(){AJS.InlineDialog.current=null;g._onShow();b(document).on({click:g._onDocumentClick,keydown:g._onKeyDown})},g._inlineDialog.getOptions().fadeTime)}var i={hideCallback:this._onHide,initCallback:c,noBind:true,persistent:true,preHideCallback:this._shouldHide};if(f&&f.isSideInlineDialog){a.extend(i,{calculatePositions:a.compose(this._calculateSidePositions,this._getSideDimensions),offsetX:8,offsetY:0});if(Raphael.version){a.extend(i,{getArrowPath:this._getSideArrowPath})}}e=new AJS.InlineDialog(d,"roadmap-dialog",h,a.extend({},i,f));return e},_onHide:function(){b(document).off({click:this._onDocumentClick,keydown:this._onKeyDown})},hide:function(){this._inlineDialog.remove()},_onDocumentClick:function(c){this._shouldHideWhenClick(c)&&this.hide()},_onBeforeShow:b.noop,_onKeyDown:function(f){var c=f.which===b.ui.keyCode.ESCAPE,d=b(f.target).is(":input");if(c&&!d){this.hide()}},_onShow:b.noop,_reset:function(){this._inlineDialog=this._createInlineDialog(this._trigger,this._dialogOptions);this.setElement(this._inlineDialog)},_shouldHide:function(){return true},show:function(){this._inlineDialog.show()},disable:function(){this.$el.find(":input").attr("disabled","disabled")},enable:function(){this.$el.find(":input").removeAttr("disabled")},_onSubmit:function(){throw new Error("DialogView subclasses must implement _onSubmit().")},_getSideDimensions:function(e,i,p,c){var k=c.container.toLowerCase()!=="body";var d=AJS.$(c.container);var l=k?AJS.$(c.container).parent():AJS.$(window);var n=k?d.offset():{left:0,top:0};var j=k?l.offset():{left:0,top:0};var g=i.target;var q=g.offset();var m=g[0].getBoundingClientRect&&g[0].getBoundingClientRect();var f=m?m.width:g.outerWidth();if(c.timelineWidth){var h=g.position();if(h.left+f>c.timelineWidth){f=c.timelineWidth-h.left-1}}var o={screenPadding:10,arrowMargin:5,window:{top:j.top,left:j.left,scrollTop:l.scrollTop(),scrollLeft:l.scrollLeft(),width:l.width(),height:l.height()},scrollContainer:{width:d.width(),height:d.height()},trigger:{top:q.top-n.top,left:q.left-n.left,width:f,height:m?m.height:g.outerHeight()},dialog:{width:e.width(),height:e.height(),offset:{top:c.offsetY,left:c.offsetX}},arrow:{height:e.find(".arrow").outerHeight()}};return o},_calculateSidePositions:function(i){var g=i.screenPadding;var h=i.window;var o=i.trigger;var y=i.dialog;var f=i.arrow;var s=i.scrollContainer;var A={top:o.top-h.scrollTop,left:o.left-h.scrollLeft};var t=Math.floor(o.height/2);var q=Math.floor(y.height/2);var p=Math.floor(f.height/2);var x=A.left-y.offset.left-g;var B=s.width-A.left-o.width-y.offset.left-g;var u=x>=y.width;var e=B>=y.width;var w=!e&&u?"left":"right";var k=A.top+t-p;var m=h.height-k-f.height;g=Math.min(g,k-i.arrowMargin);g=Math.min(g,m-i.arrowMargin);var l=Math.max(A.top-g,0);var c=Math.max(h.height-A.top-o.height-g,0);var d=Math.max(q-t-y.offset.top-l,0);var v=Math.max(q-t+y.offset.top-c,0);var j=d||-v||0;var r={top:o.top+t-q+y.offset.top+j,left:w==="right"?o.left+o.width+y.offset.left:o.left-y.width-y.offset.left};var z="w";var n={position:"absolute",top:q-p-j};if(w==="right"){n.right="auto";n.left=Raphael.version?"-7px":"0px"}else{n.right="-7px";n.left="auto";z="e"}return{dialogLocation:w,popupCss:r,arrowCss:n,gravity:z}},_getSideArrowPath:function(c){return c.dialogLocation==="right"?"M8,0L0,8,8,16":"M8,0L16,8,8,16"},refresh:function(){this._inlineDialog&&this._inlineDialog.refresh()}})})(AJS.$,window._);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-roadmap-plugin:roadmap-bar-dialog-resources', location = 'view/roadmap-editor/bar-dialog/bar-dialog-templates.soy' */
// This file was automatically generated from bar-dialog-templates.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.Roadmap == 'undefined') { Confluence.Templates.Roadmap = {}; }


Confluence.Templates.Roadmap.barDialog = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  var hasPageLink__soy3 = opt_data.bar.pageLink != null && opt_data.bar.pageLink.id != null;
  output.append('<h3 id="bar-title" class="editable-field">', soy.$$escapeHtml(opt_data.bar.title), '</h3><div class="information"><div class="bar-page-link-wrapper">', (opt_data.linkPageEditable) ? '<div class="link-update-page ' + ((hasPageLink__soy3) ? 'hidden-field' : '') + '"><a href="#">' + soy.$$escapeHtml("Link page") + '</a></div>' : '', '<div class="bar-page-link editable-field ', (! hasPageLink__soy3) ? 'hidden-field' : '', '">');
  if (hasPageLink__soy3) {
    Confluence.Templates.Roadmap.buildPageLink({pageLink: opt_data.bar.pageLink, isEditMode: opt_data.renderOption.isEditMode}, output);
  }
  output.append('</div>', (opt_data.linkPageEditable) ? '<div class="link-new-page' + ((hasPageLink__soy3) ? ' hidden-field' : '') + '"><span class=\'page-link-separator\'>•</span><a href="#">' + soy.$$escapeHtml("Create page") + '</a></div>' : '', '</div><div class="clear" /><div class="bar-description editable-field">', opt_data.bar.description, '</div></div>');
  if (opt_data.renderOption.isEditMode) {
    output.append('<div class="inner">');
    aui.buttons.button({id: 'delete-button', text: "Delete bar", type: 'link'}, output);
    output.append('</div>');
  }
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Roadmap.buildPageLink = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<a href=', soy.$$escapeHtml(""), '/pages/viewpage.action?pageId=', soy.$$escapeHtml(opt_data.pageLink.id), ' ', (opt_data.isEditMode) ? 'target=\'_blank\'' : '', ' class=\'confluence-link content-type-', soy.$$escapeHtml(opt_data.pageLink.type), '\'><span class="link-page-title">', soy.$$escapeHtml(opt_data.pageLink.title), '</span></a>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Roadmap.inlineEditSaveButton = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  aui.buttons.button({id: 'inline-edit-save', iconType: 'aui', extraClasses: 'aui-button-compact', text: '', extraAttributes: {'title': "Save"}, iconClass: 'aui-icon-small aui-iconfont-success'}, output);
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Roadmap.inlineEditCancelButton = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  aui.buttons.button({id: 'inline-edit-cancel', iconType: 'aui', extraClasses: 'aui-button-compact', text: '', extraAttributes: {'title': "Cancel"}, iconClass: 'aui-icon-small aui-iconfont-close-dialog'}, output);
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-roadmap-plugin:roadmap-bar-dialog-resources', location = 'view/roadmap-editor/bar-dialog/roadmap-editinplace.js' */
(function(g){g.fn.editInPlace=function(h){var i=g.extend({},g.fn.editInPlace.defaults,h);d(i);e(i.saving_image);return this.each(function(){var j=g(this);if(j.data("editInPlace")){return}j.data("editInPlace",true);new f(i,j).init()})};g.fn.editInPlace.defaults={url:"",bg_over:"#ffc",bg_out:"transparent",hover_class:"",form_extra_classes:[],show_buttons:false,save_button:'<button class="inplace_save">Save</button>',cancel_button:'<button class="inplace_cancel">Cancel</button>',params:"",field_type:"text",field_extra_classes:[],default_text:"(Click here to add text)",use_html:false,textarea_rows:10,textarea_cols:25,select_text:"Choose new value",select_options:"",text_size:null,saving_text:undefined,saving_image:"",saving_animation_color:"transparent",value_required:false,disable_submit_when_empty:false,element_id:"element_id",update_value:"update_value",original_value:"original_value",original_html:"original_html",save_if_nothing_changed:false,on_blur:"save",cancel:"",callback:null,callback_skip_dom_reset:false,success:null,error:null,error_sink:function(h,i){alert(i)},preinit:null,postclose:null,delegate:null,isAutoCompleteField:false};var c={shouldOpenEditInPlace:function(j,i,h){},willOpenEditInPlace:function(i,h){},didOpenEditInPlace:function(i,h){},shouldCloseEditInPlace:function(j,i,h){},willCloseEditInPlace:function(i,h){},didCloseEditInPlace:function(i,h){},missingCommaErrorPreventer:""};function f(h,i){this.settings=h;this.dom=i;this.originalValue=null;this.didInsertDefaultText=false;this.shouldDelayReinit=false}g.extend(f.prototype,{init:function(){this.setDefaultTextIfNeccessary();this.connectOpeningEvents()},reinit:function(){if(this.shouldDelayReinit){return}this.triggerCallback(this.settings.postclose,this.dom);this.triggerDelegateCall("didCloseEditInPlace");this.markEditorAsInactive();this.connectOpeningEvents()},setDefaultTextIfNeccessary:function(){if(""!==this.dom.html()){return}this.dom.html(this.settings.default_text);this.didInsertDefaultText=true},connectOpeningEvents:function(){var h=this;this.dom.bind("mouseenter.editInPlace",function(){h.addHoverEffect()}).bind("mouseleave.editInPlace",function(){h.removeHoverEffect()}).bind("click.editInPlace",function(i){h.openEditor(i)})},disconnectOpeningEvents:function(){this.dom.unbind(".editInPlace")},addHoverEffect:function(){if(this.settings.hover_class){this.dom.addClass(this.settings.hover_class)}else{this.dom.css("background-color",this.settings.bg_over)}},removeHoverEffect:function(){if(this.settings.hover_class){this.dom.removeClass(this.settings.hover_class)}else{this.dom.css("background-color",this.settings.bg_out)}},openEditor:function(h){if(!this.shouldOpenEditor(h)){return}this.disconnectOpeningEvents();this.removeHoverEffect();this.removeInsertedDefaultTextIfNeccessary();this.saveOriginalValue();this.markEditorAsActive();this.replaceContentWithEditor();this.setInitialValue();this.workAroundMissingBlurBug();this.connectClosingEventsToEditor();this.triggerDelegateCall("didOpenEditInPlace")},shouldOpenEditor:function(h){if(this.isClickedObjectCancelled(h.target)){return false}if(false===this.triggerCallback(this.settings.preinit,this.dom)){return false}if(false===this.triggerDelegateCall("shouldOpenEditInPlace",true,h)){return false}if(this.settings.isAutoCompleteField&&g(h.target).hasClass("link-page-title")){return false}return true},removeInsertedDefaultTextIfNeccessary:function(){if(!this.didInsertDefaultText||this.dom.html()!==this.settings.default_text){return}this.dom.html("");this.didInsertDefaultText=false},isClickedObjectCancelled:function(j){if(!this.settings.cancel){return false}var h=g(j).parents().andSelf();var i=h.filter(this.settings.cancel);return 0!==i.length},saveOriginalValue:function(){if(this.settings.use_html){this.originalValue=this.dom.html()}else{this.originalValue=a(this.dom.text())}},restoreOriginalValue:function(){this.setClosedEditorContent(this.originalValue)},setClosedEditorContent:function(h){h=h||this.settings.default_text;if(this.settings.use_html){this.dom.html(h)}else{this.dom.text(h)}},workAroundMissingBlurBug:function(){var h=this.dom.find(":input");this.dom.parents(":last").find(".editInPlace-active :input").not(h).blur()},replaceContentWithEditor:function(){var m=this.createEditorElement();var h="inplace_form";if(this.settings.form_extra_classes instanceof Array){h=h+" "+this.settings.form_extra_classes.join(" ")}this.dom.html('<form class="'+h+'" style="display: inline; margin: 0; padding: 0;"></form>');var j=this.dom.find("form");j.append(m);if(this.settings.show_buttons){var i=g('<div class="inline-edit-buttons"></div>');var k=g(this.settings.save_button);k.addClass("inplace_save");i.append(k);var l=g(this.settings.cancel_button);l.addClass("inplace_cancel");i.append(l);j.append(i)}},createEditorElement:function(){if(-1===g.inArray(this.settings.field_type,["text","textarea","select"])){throw"Unknown field_type <fnord>, supported are 'text', 'textarea' and 'select'"}var h=null;if("select"===this.settings.field_type){h=this.createSelectEditor()}else{if("text"===this.settings.field_type){h=g('<input type="text" '+this.inputNameAndClass()+' size="'+this.settings.text_size+'" />')}else{if("textarea"===this.settings.field_type){h=g("<textarea "+this.inputNameAndClass()+' rows="'+this.settings.textarea_rows+'"  cols="'+this.settings.textarea_cols+'" />')}}}return h},setInitialValue:function(){var h=this.triggerDelegateCall("willOpenEditInPlace",this.originalValue);var i=this.dom.find(":input");i.val(h);if(i.val()!==h){i.val("")}},inputNameAndClass:function(){var h="inplace_field";if(this.settings.field_extra_classes instanceof Array){h=h+" "+this.settings.field_extra_classes.join(" ")}return' name="inplace_value" class="'+h+'"'},createSelectEditor:function(){var m=g("<select"+this.inputNameAndClass()+'><option disabled="true" value="">'+this.settings.select_text+"</option></select>");var j=this.settings.select_options;if(!g.isArray(j)){j=j.split(",")}for(var k=0;k<j.length;k++){var h=j[k];if(!g.isArray(h)){h=h.split(":")}var n=a(h[1]||h[0]);var o=a(h[0]);var l=g("<option>").val(n).text(o);m.append(l)}return m},connectClosingEventsToEditor:function(){var k=this;function j(l){if(!k.settings.isAutoCompleteField){k.handleCancelEditor(l)}return false}function h(l){k.handleSaveEditor(l);return false}var i=this.dom.find("form");i.find(".inplace_field").focus().select();i.find(".inplace_cancel").click(j);i.find(".inplace_save").click(h);if(!this.settings.show_buttons){if("save"===this.settings.on_blur){i.find(".inplace_field").blur(h)}else{i.find(".inplace_field").blur(j)}}i.keyup(function(l){var m=27;if(m===l.which){return j()}});this.bindInputKeyup();i.submit(h)},bindSubmitOnEnterInInput:function(){if("textarea"===this.settings.field_type){return}var h=this;this.dom.find(":input").keyup(function(i){var j=13;if(j===i.which){return h.dom.find("form").submit()}})},bindInputKeyup:function(){if("textarea"===this.settings.field_type){return}var i=this;var h=this.dom.find(":input");var j=this.dom.find(".inplace_save");h.keyup(function(k){var l=13;if(l===k.which){return i.dom.find("form").submit()}else{if(i.settings.disable_submit_when_empty){if(g.trim(h.val()).length){j.removeAttr("disabled")}else{j.attr("disabled","disabled")}}}})},handleCancelEditor:function(h){if(false===this.triggerDelegateCall("shouldCloseEditInPlace",true,h)){return}var i=this.dom.find(":input").val();i=this.triggerDelegateCall("willCloseEditInPlace",i);this.restoreOriginalValue();this.reinit()},handleSaveEditor:function(h){if(false===this.triggerDelegateCall("shouldCloseEditInPlace",true,h)){return}var i=g.trim(this.dom.find(":input").val());i=this.triggerDelegateCall("willCloseEditInPlace",i);if(this.isDisabledDefaultSelectChoice()||this.isUnchangedInput(i)){this.handleCancelEditor(h);return}if(this.didForgetRequiredText(i)){if(this.settings.disable_submit_when_empty){return}this.handleCancelEditor(h);this.reportError("Error: You must enter a value to save this field");return}this.showSaving(i);if(this.settings.callback){this.handleSubmitToCallback(i)}else{this.handleSubmitToServer(i)}},didForgetRequiredText:function(h){return this.settings.value_required&&(""===h||undefined===h||null===h)},isDisabledDefaultSelectChoice:function(){return this.dom.find("option").eq(0).is(":selected:disabled")},isUnchangedInput:function(h){return !this.settings.save_if_nothing_changed&&this.originalValue===h},showSaving:function(i){if(this.settings.callback&&this.settings.callback_skip_dom_reset){return}var h=i;if(b(this.settings.saving_text)){h=this.settings.saving_text}if(b(this.settings.saving_image)){h=g("<img />").attr("src",this.settings.saving_image).attr("alt",h)}this.dom.html(encodeURIComponent(h))},handleSubmitToCallback:function(h){this.enableOrDisableAnimationCallbacks(true,false);var i=this.triggerCallback(this.settings.callback,this.id(),h,this.originalValue,this.settings.params,this.savingAnimationCallbacks());if(this.settings.callback_skip_dom_reset){}else{if(undefined===i){this.reportError("Error: Failed to save value: "+h);this.restoreOriginalValue()}else{this.dom.html(i)}}if(this.didCallNoCallbacks()){this.enableOrDisableAnimationCallbacks(false,false);this.reinit()}},handleSubmitToServer:function(h){var j=this.settings.update_value+"="+encodeURIComponent(h)+"&"+this.settings.element_id+"="+this.dom.attr("id")+((this.settings.params)?"&"+this.settings.params:"")+"&"+this.settings.original_html+"="+encodeURIComponent(this.originalValue)+"&"+this.settings.original_value+"="+encodeURIComponent(this.originalValue);this.enableOrDisableAnimationCallbacks(true,false);this.didStartSaving();var i=this;g.ajax({url:i.settings.url,type:"POST",data:j,dataType:"html",complete:function(k){i.didEndSaving()},success:function(l){var k=l||i.settings.default_text;i.dom.html(k);i.triggerCallback(i.settings.success,l)},error:function(k){i.dom.html(i.originalHTML);if(i.settings.error){i.triggerCallback(i.settings.error,k)}else{i.reportError("Failed to save value: "+k.responseText||"Unspecified Error")}}})},triggerCallback:function(i){if(!i){return}var h=Array.prototype.slice.call(arguments,1);return i.apply(this.dom[0],h)},triggerDelegateCall:function(j,i,h){if(!this.settings.delegate||!g.isFunction(this.settings.delegate[j])){return i}var k=this.settings.delegate[j](this.dom,this.settings,h);return(undefined===k)?i:k},reportError:function(h){this.triggerCallback(this.settings.error_sink,this.id(),h)},id:function(){return this.dom.attr("id")},markEditorAsActive:function(){this.dom.addClass("editInPlace-active")},markEditorAsInactive:function(){this.dom.removeClass("editInPlace-active")},savingAnimationCallbacks:function(){var h=this;return{didStartSaving:function(){h.didStartSaving()},didEndSaving:function(){h.didEndSaving()}}},enableOrDisableAnimationCallbacks:function(i,h){this.didStartSaving.enabled=i;this.didEndSaving.enabled=h},didCallNoCallbacks:function(){return this.didStartSaving.enabled&&!this.didEndSaving.enabled},assertCanCall:function(h){if(!this[h].enabled){throw new Error("Cannot call "+h+" now. See documentation for details.")}},didStartSaving:function(){this.assertCanCall("didStartSaving");this.shouldDelayReinit=true;this.enableOrDisableAnimationCallbacks(false,true);this.startSavingAnimation()},didEndSaving:function(){this.assertCanCall("didEndSaving");this.shouldDelayReinit=false;this.enableOrDisableAnimationCallbacks(false,false);this.reinit();this.stopSavingAnimation()},startSavingAnimation:function(){var h=this;this.dom.animate({backgroundColor:this.settings.saving_animation_color},400).animate({backgroundColor:"transparent"},400,"swing",function(){setTimeout(function(){h.startSavingAnimation()},10)})},stopSavingAnimation:function(){this.dom.stop(true).css({backgroundColor:""})},missingCommaErrorPreventer:""});function d(h){if(h.url||h.callback){return}throw new Error("Need to set either url: or callback: option for the inline editor to work.")}function e(i){if(""===i){return}var h=new Image();h.src=i}function a(h){return h.replace(/^\s+/,"").replace(/\s+$/,"")}function b(h){if(undefined===h||null===h){return false}if(0===h.length){return false}return true}})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-roadmap-plugin:roadmap-bar-dialog-resources', location = 'view/roadmap-editor/bar-dialog/bar-dialog.js' */
(function(c,a){var b=Roadmap.InlineDialogView;Roadmap.BarDialogView=b.extend({events:{"click #delete-button":"_onDeleteClick","click .link-new-page":"_goToCreateLinkPage","click .link-update-page":"_goToUpdateLinkPage"},initialize:function(){a.bindAll(this,"_onPageLinkOpen","_onPageLinkSelectCompleted","_onPageLinkCallback","_onPageLinkBlur","_goToCreateLinkPage");this.options.dialogOptions={width:260,timelineWidth:this.options.timelineWidth,isSideInlineDialog:true,renderOption:this.options.renderOption,linkPageEditable:this.options.linkPageEditable,createLinkPageCallback:this.options.createLinkPageCallback};b.prototype.initialize.call(this,this.options)},_getContent:function(d){d.html(Confluence.Templates.Roadmap.barDialog({bar:a.extend({},this.model.attributes,{description:AJS.escapeHtml(this.model.attributes.description).replace(/\r?\n/g,"<br />")}),renderOption:this.options.dialogOptions.renderOption,linkPageEditable:this.options.dialogOptions.linkPageEditable}))},_onBeforeShow:function(){this.fields=this._getFields();this._setupInlineEdit();this._addEvents()},_getFields:function(){return{$title:this.$el.find("#bar-title"),$description:this.$el.find(".bar-description"),$pageLink:this.$el.find(".bar-page-link"),$pageLinkNew:this.$el.find(".link-new-page"),$pageLinkUpdate:this.$el.find(".link-update-page")}},_setupInlineEdit:function(){var f=this;var d=this.fields;var i=this.options.dialogOptions.renderOption.editInplace;var e={form_extra_classes:["aui"],hover_class:"editable-field-hover aui-icon-small aui-iconfont-edit",field_extra_classes:["text"],show_buttons:true,save_button:Confluence.Templates.Roadmap.inlineEditSaveButton(),cancel_button:Confluence.Templates.Roadmap.inlineEditCancelButton(),error_sink:null,use_html:true,default_text:"Click to add description.",delegate:{shouldOpenEditInPlace:function(){f.$el.find(".inplace_cancel").trigger("click")},didCloseEditInPlace:function(){setTimeout(function(){f.refresh()},0)}}};i.title&&d.$title.editInPlace(c.extend(true,{},e,{callback:function(j,k){f.options.updateTitle(k);return AJS.escapeHtml(k)},value_required:true,disable_submit_when_empty:true,delegate:{willOpenEditInPlace:function(){f.refresh();d.$title.find(".text").attr("maxlength",Roadmap.BarDialog.MAX_LENGTH_TITLE)}}}));(c.trim(d.$description.text())==="")?d.$description.addClass("empty-field"):d.$description.removeClass("empty-field");var g=c.extend(true,{},e,{field_type:"textarea",field_extra_classes:["textarea"],value_required:false,save_if_nothing_changed:true,callback:function(j,k){k=c.trim(k);f.options.updateDescription(k);if(k===""){k="Click to add description.";c(this).addClass("empty-field")}else{c(this).removeClass("empty-field");Confluence.Roadmap.Analytics.addDescription()}return AJS.escapeHtml(k).replace(/\r?\n/g,"<br />")},delegate:{willOpenEditInPlace:function(){f.refresh();d.$description.find(".textarea").attr("maxlength",Roadmap.BarDialog.MAX_LENGTH_DESCRIPTION);return f.model.attributes.description.replace(/<br\s*[\/]?>/gi,"\n")}}});i.description&&d.$description.editInPlace(g);var h=c.extend(true,{},e,{isAutoCompleteField:true,show_buttons:false,default_text:"",field_extra_classes:["text","autocomplete-confluence-content"],delegate:{willOpenEditInPlace:f._onPageLinkOpen,didCloseEditInPlace:function(){if(a.isEmpty(d.$pageLink.data("linkData"))){d.$pageLink.hide();d.$pageLinkNew.show();d.$pageLinkUpdate.show()}}},on_blur:null,callback:f._onPageLinkCallback});i.pageLink&&this.options.dialogOptions.linkPageEditable&&this.fields.$pageLink.editInPlace(h)},_onPageLinkOpen:function(e){var f=this;e.append('<div class="link-page-dropdown" />');var g=e.find(".autocomplete-confluence-content");g.attr({placeholder:"Search page","data-dropdown-target":"#inline-dialog-roadmap-dialog .link-page-dropdown","data-none-message":"No matches found"});Confluence.Binder.autocompleteConfluenceContent(e);g.bind("selected.autocomplete-content",this._onPageLinkSelectCompleted);g.on("blur",function(){setTimeout(f._onPageLinkBlur,150)});var d=this.model.attributes.pageLink;this.fields.$pageLink.data("linkData",d);if(!a.isEmpty(d)){return d.title}return true},_onPageLinkSelectCompleted:function(d,g){d.stopPropagation();var f=this.fields.$pageLink.find(".autocomplete-confluence-content");var e=g.content;f.val(e.title);this.fields.$pageLink.data("linkData",g.content);a.defer(this._onPageLinkBlur)},_onPageLinkBlur:function(){var d=this.fields.$pageLink.find(".autocomplete-confluence-content");var f=c.Event("keyup");f.which=AJS.keyCode.ENTER;d.trigger(f)},_onPageLinkCallback:function(e,f){var d=(f==="")?{}:this.fields.$pageLink.data("linkData");return this._updatePageLink(d)},_updatePageLink:function(e){if(e.id===this.model.attributes.pageLink.id){return}var d=this.fields;if(a.isEmpty(e)){this.options.updatePageLink({});d.$pageLink.hide();d.$pageLinkNew.show();d.$pageLinkUpdate.show();return "No linked page"}else{var f=a.pick(e,"id","title","type","spaceKey","wikiLink");if(!e.spaceKey){f.spaceKey=e.space.key}this.options.updatePageLink(f);d.$pageLink.show();d.$pageLinkNew.hide();d.$pageLinkUpdate.hide();if(this.options.renderOption.isEditMode){Confluence.Roadmap.Analytics.addPageLinkEditMode({linkedPageId:e.id,pageId:AJS.Meta.get("page-id")>0?AJS.Meta.get("page-id"):AJS.Meta.get("draft-id"),isDraft:AJS.Meta.get("page-id")<=0})}else{Confluence.Roadmap.Analytics.addPageLinkViewMode({linkedPageId:e.id,pageId:AJS.Meta.get("page-id")})}return Confluence.Templates.Roadmap.buildPageLink({pageLink:e,isEditMode:this.options.renderOption.isEditMode})}},_addEvents:function(){if(c.browser.msie&&parseInt(c.browser.version,10)<=9){var d=function(h,f){if(h.ctrlKey||h.altKey||h.metaKey||h.keyCode===AJS.keyCode.BACKSPACE||h.keyCode===AJS.keyCode.DELETE){return true}var g=c.trim(this.value);return g.length<=f};this.fields.$description.on("keypress",".textarea",function(f){return d.call(this,f,Roadmap.BarDialog.MAX_LENGTH_DESCRIPTION)});this.fields.$description.on("paste",".textarea",function(g){var f=this;setTimeout(function(){if(d.call(f,g,Roadmap.BarDialog.MAX_LENGTH_DESCRIPTION)){f.value=f.value.substr(0,Roadmap.BarDialog.MAX_LENGTH_DESCRIPTION)}},0)})}},_onDeleteClick:function(){this.options.deleteBar();this.remove()},_goToCreateLinkPage:function(f){var e=this.options.dialogOptions;if(e.createLinkPageCallback){var d=a.bind(e.createLinkPageCallback,{me:this},f);d()}},_goToUpdateLinkPage:function(d){d.preventDefault();this.fields.$pageLink.show();this.fields.$pageLinkNew.hide();this.fields.$pageLinkUpdate.hide();this.fields.$pageLink.click()}})})(AJS.$,window._);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-roadmap-plugin:roadmap-bar-dialog-resources', location = 'view/roadmap-editor/bar-dialog/bar-link-new-page.js' */
Confluence.RoadmapLink=(function(f,a){Roadmap.trackingBars=[];function c(i,j){var g={};if(parseInt(i.pageId)<=0){i.parentPageId=AJS.Meta.get("parent-page-id")}var h=f.param(i);window.open(AJS.contextPath()+"/plugins/roadmap/create-page.action?"+h,"_blank");b(i.roadmapBarId).done(function(k){Roadmap.trackingBars.push(i.roadmapBarId)});f(window).off("focus");f(window).on("focus",function(){if(!Roadmap.trackingBars.length){f(window).off("focus")}a.each(Roadmap.trackingBars,function(k){d(k).done(function(m){var l=m.status;if(l=="REDEEM"){e(k);j({barId:k,pageLink:f.parseJSON(m.pageLink)})}else{if(l=="UNKNOWN"){e(k)}}})})})}function e(g){Roadmap.trackingBars.splice(Roadmap.trackingBars.indexOf(g),1)}function b(g){return f.ajax({contentType:"application/json",type:"PUT",url:AJS.contextPath()+"/rest/roadmap/1.0/bar/"+g+"/PENDING"})}function d(g){return f.ajax({contentType:"application/json",type:"GET",url:AJS.contextPath()+"/rest/roadmap/1.0/bar/"+g+"/status"})}return{addCreateLinkPageListener:c}})(AJS.$,window._);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-roadmap-plugin:roadmap-editor-view-resources', location = 'view/roadmap-editor/templates.soy' */
// This file was automatically generated from templates.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.Roadmap == 'undefined') { Confluence.Templates.Roadmap = {}; }


Confluence.Templates.Roadmap.roadmapPopupPanel = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div id=\'', soy.$$escapeHtml(opt_data.roadmapPopupPanelId), '\'></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Roadmap.roadmapEditor = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div id="roadmap-editor-edit-area"><div id="roadmap-editor-edit-content"><!-- START GENERATE ROADMAP --><div id="roadmap-container"><div class="roadmap-drag-area"></div><div class="roadmap-frame"><div class="roadmap-marker"></div></div><div class="roadmap-content"></div></div><!-- END GENERATE ROADMAP --></div></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Roadmap.lane = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="roadmap-lane-title" style="background-color: ', soy.$$escapeHtml(opt_data.color.lane), '; color: ', soy.$$escapeHtml(opt_data.color.text), '" title="', soy.$$escapeHtml(opt_data.title), '"><div class="title-outer"><div class="title-inner">', soy.$$escapeHtml(opt_data.title), '</div></div></div><div class="roadmap-separate-content">&nbsp;</div><div class="roadmap-lane-content"></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Roadmap.marker = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="marker-drag-placeholder" /><div class="marker-title-wrapper"><span class="marker-title" title="', soy.$$escapeHtml(opt_data.title), '">', soy.$$escapeHtml(opt_data.title), '</span></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Roadmap.bar = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<p class="roadmap-bar-title">', soy.$$escapeHtml(opt_data.title), '</p>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Roadmap.newRowLine = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<hr class="new-row-line" />');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Roadmap.deprecationDialog = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<section role="dialog" id="', soy.$$escapeHtml(opt_data.id), '" class="aui-layer aui-dialog2 aui-dialog2-medium" aria-hidden="true"><header class="aui-dialog2-header"><h1 class="aui-dialog2-header-main">', soy.$$escapeHtml("Macro unavailable"), '</h1></header><div class="aui-dialog2-content">', "\x3cp\x3eThe roadmap macro has been deprecated as of version 12. You can still view your existing roadmap macros but you will no longer be able to edit them or create new ones.\x3c/p\x3e\x3cp\x3ePlease use our new Roadmap Planner macro to plan your roadmap.\x3c/p\x3e", '<div class="new-roadmap-thumb"></div></div><footer class="aui-dialog2-footer"><div class="aui-dialog2-footer-actions"><button id="dialog-close-button" class="aui-button aui-button-link">', soy.$$escapeHtml("Close"), '</button></div></footer></section>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Roadmap.newRowPlaceholder = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<hr class= "new-row-placeholder" />');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Roadmap.laneDialog = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  aui.buttons.button({id: 'add-bar-button', type: 'subtle', iconType: 'aui', extraClasses: 'aui-button-compact', text: '', extraAttributes: {'title': "Add bar"}, iconClass: 'aui-icon-small aui-iconfont-add'}, output);
  aui.buttons.button({id: 'rename-button', type: 'subtle', iconType: 'aui', extraClasses: 'aui-button-compact', text: '', extraAttributes: {'title': "Rename lane"}, iconClass: 'aui-icon-small aui-iconfont-edit'}, output);
  Confluence.Templates.Roadmap.laneColorSelect(opt_data, output);
  if (opt_data.canDelete) {
    aui.buttons.button({id: 'delete-button', type: 'subtle', iconType: 'aui', extraClasses: 'aui-button-compact', text: '', extraAttributes: {'title': "Delete lane"}, iconClass: 'aui-icon-small delete-icon'}, output);
  }
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Roadmap.markerDialog = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  aui.buttons.button({id: 'rename-button', type: 'subtle', iconType: 'aui', extraClasses: 'aui-button-compact', text: '', extraAttributes: {'title': "Rename marker"}, iconClass: 'aui-icon-small aui-iconfont-edit'}, output);
  aui.buttons.button({id: 'delete-button', type: 'subtle', iconType: 'aui', extraClasses: 'aui-button-compact', text: '', extraAttributes: {'title': "Delete marker"}, iconClass: 'aui-icon-small delete-icon'}, output);
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Roadmap.markerRenameDialog = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  var param92 = new soy.StringBuilder();
  aui.form.input({extraClasses: 'marker-title', name: 'marker-title', type: 'text', value: opt_data.markerTitle}, param92);
  aui.buttons.button({extraClasses: 'rename-button', text: "Save"}, param92);
  aui.form.form({action: '', content: param92.toString()}, output);
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Roadmap.laneRenameDialog = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  var param104 = new soy.StringBuilder();
  aui.form.input({extraClasses: 'lane-title', name: 'lane-title', type: 'text', value: opt_data.laneTitle}, param104);
  aui.buttons.button({extraClasses: 'rename-button', text: "Save"}, param104);
  aui.form.form({action: '', content: param104.toString()}, output);
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Roadmap.laneColorSelect = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<a id="lane-color-select" href="#" aria-owns="lane-color-picker" aria-haspopup="true" class="aui-button aui-button-subtle aui-button-compact aui-dropdown2-trigger aui-style-default" title="', soy.$$escapeHtml("Lane color"), '"><span class="color-item" style="background-color: ', soy.$$escapeHtml(opt_data.laneColor), ';">&nbsp;</span></a></a><div id="lane-color-picker" class="aui-dropdown2"><ul class="aui-list-truncate">');
  var colorList120 = opt_data.colors;
  var colorListLen120 = colorList120.length;
  for (var colorIndex120 = 0; colorIndex120 < colorListLen120; colorIndex120++) {
    var colorData120 = colorList120[colorIndex120];
    output.append('<li class="color-display-item"><a href="#" ><span class="color-item ', (colorData120.lane == opt_data.laneColor) ? 'aui-icon aui-icon-small aui-iconfont-success' : '', '" style="background-color: ', soy.$$escapeHtml(colorData120.lane), ';"></span></a></li>');
  }
  output.append('</ul></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Roadmap.linkPageTitle = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<span class="link-page-title" />');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-roadmap-plugin:roadmap-editor-view-resources', location = 'view/roadmap-editor/bar/bar.js' */
(function(b,a){Roadmap.BarView=Backbone.View.extend({className:"roadmap-bar",events:{click:"_showDialog",dragstart:"_onDragstart",dragstop:"_onDragStop",dropover:"_onDropOver",dropout:"_onDropOut"},attributes:function(){return{cid:this.cid}},initialize:function(){a.bindAll(this,"render","_updateBar","_beforeResize","updateMaxWidth","_deleteBar","_updateTitle");this._addEvents()},_addEvents:function(){var c=this;this.$el.draggable({opacity:0.3,cursor:"move",appendTo:".roadmap-drag-area",snap:".roadmap-bar-row, .new-bar-row",snapMode:"inner",snapTolerance:17,scroll:true,zIndex:4020,helper:function(){return c.$el.clone().addClass("roadmap-bar-clone").data("View",c)}});this.$el.droppable({accept:".roadmap-bar",tolerance:"touch",hoverClass:"bar-hover-bar"});this.$el.data("View",this)},render:function(){this.updateColor(this.options.color);var c=this.options.timelineView.getBarPosition(this.model.attributes);this.$el.css({left:c.left+"px",width:c.width+"px"});this.$el.attr("title",this.model.get("title"));this.$el.append(Confluence.Templates.Roadmap.bar({title:this.model.get("title")}));this.$el.resizable({handles:"e, w",minWidth:Roadmap.barMinWidth,start:this._beforeResize,stop:this._updateBar});return this},updateMaxWidth:function(d){this.$el.resizable("option","maxWidth",d);var c=this.$el.resizable("option","minWidth");if(d<c){this.$el.resizable("option","minWidth",d)}},_beforeResize:function(d,c){this._barDialog&&this._barDialog.remove();this.trigger("beforeResize",this,this._checkHandleDirection(d))},_checkHandleDirection:function(c){var d=b(c.toElement?c.toElement:c.originalEvent.target);if(d.hasClass("ui-resizable-w")){return"left"}else{if(d.hasClass("ui-resizable-e")){return"right"}}throw"Unsupport resize direction handling = "+d},_updateBar:function(d,c){if(c.originalPosition.left!=c.position.left){this.model.set({startDate:this.options.timelineView.getBarStartDate(c.position.left),duration:this.options.timelineView.getBarDuration(c.element.outerWidth())})}else{if(c.originalSize.width!=c.size.width){this.model.set("duration",this.options.timelineView.getBarDuration(c.element.outerWidth()))}}},appendTo:function(c){this.$el.appendTo(c)},updateColor:function(c){this.$el.css({"background-color":c.bar,"border-color":c.lane,color:c.text})},updatePositionLeft:function(c){this.$el.css("left",c)},_onDragStop:function(d,c){this.options.lane.cleanLaneAfterDrop();this.$el.trigger("BarView.dragstop")},updateDeleteBar:function(c){this.options.deleteBar=c},_showDialog:function(c){if(!b(c.target).is(".ui-resizable-handle")){this._barDialog&&this._barDialog.remove();this._barDialog=this._createDialog();this._barDialog.show();Confluence.Roadmap.Analytics.openBarDialogInEdit()}},_createDialog:function(){return new Roadmap.BarDialogView({trigger:this.$el,model:this.model,timelineWidth:this.options.timelineView.$el.width(),renderOption:{isEditMode:true,editInplace:{title:true,pageLink:true,description:true}},linkPageEditable:true,deleteBar:this._deleteBar,updateTitle:this._updateTitle,updateDescription:this._updateDescription,updatePageLink:this._updatePageLink,createLinkPageCallback:this._goToCreateLinkPage})},_deleteBar:function(){this.options.deleteBar(this)},_updateTitle:function(c){this.model.set("title",c);this.$el.attr("title",c);this.$el.find(".roadmap-bar-title").html(AJS.escapeHtml(c))},_updateDescription:function(c){this.model.set("description",c)},_updatePageLink:function(c){this.model.set("pageLink",c)},_onDragstart:function(d,c){Roadmap.DragDrop.barDraggingOver={};this.$el.trigger("BarView.dragstart",[c])},_onDropOver:function(d,c){Roadmap.DragDrop.barDraggingOver[this.cid]=this.cid;if(Roadmap.DragDrop.barDraggingOver&&c.helper.data("isAddingNewRow")!==true){c.helper.addClass("roadmap-bar-overlapped")}},_onDropOut:function(f,d){var c=this;delete Roadmap.DragDrop.barDraggingOver[c.cid];d.helper.removeClass("roadmap-bar-overlapped");a.each(Roadmap.DragDrop.barDraggingOver,function(g){var e=d.helper.data("isAddingNewRow")!==true;if(e){if(typeof g==="string"){d.helper.addClass("roadmap-bar-overlapped")}else{if(g.className==="roadmap-bar-row"){g.$el.addClass("roadmap-bar-drag-hover")}}}})},_goToCreateLinkPage:function(f){f.preventDefault();var e=this.me;var c=parseInt(AJS.Meta.get("page-id"));var d=c>0?c:AJS.Meta.get("parent-page-id");var g={roadmapBarId:e.model.id,roadmapContentId:d,updateRoadmap:false};Confluence.RoadmapLink.addCreateLinkPageListener(g,function(i){var h=e._updatePageLink(i.pageLink);e.fields.$pageLink.html(h)})}})})(AJS.$,window._);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-roadmap-plugin:roadmap-editor-view-resources', location = 'view/roadmap-editor/bar/bar-row.js' */
(function(b,a){Roadmap.BarRowView=Backbone.View.extend({className:"roadmap-bar-row",initialize:function(){a.bindAll(this,"_addEvents");this._addEvents();return this},attributes:function(){return{cid:this.cid}},_addEvents:function(){var c=this;this.$el.droppable({greedy:true,tolerance:"pointer",hoverClass:"roadmap-bar-drag-hover",activeClass:"roadmap-bar-drag-active",accept:".roadmap-bar",over:function(f,d){Roadmap.DragDrop.barDraggingOver[c.cid]=c;if(d.helper.data("isAddingNewRow")!==true){var g=b(this);g.closest(".roadmap-content").find(".new-row-placeholder").remove()}else{c.$el.removeClass("roadmap-bar-drag-hover")}},out:function(){var d=b(this);delete Roadmap.DragDrop.barDraggingOver[c.cid];d.closest(".roadmap-content").find(".new-row-placeholder").remove()},drop:function(g,f){var d=a.reject(Roadmap.DragDrop.barDraggingOver,function(e){return(typeof e==="object")}).length>0;if(!f.helper.hasClass("roadmap-bar-overlapped")&&!d){b(this).trigger("BarView.drop",[{$barViewHelper:f.helper,$barViewOriginal:f.draggable,$barRow:b(this)},f])}}})},isEmptyRow:function(){return this.$el.is(":empty")}})})(AJS.$,window._);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-roadmap-plugin:roadmap-editor-view-resources', location = 'view/roadmap-editor/bar/bar-row-new.js' */
(function(b,a){Roadmap.BarRowNewView=Backbone.View.extend({className:"new-bar-row",overlayTop:3,margin:5,events:{drop:"_onDrop",dropover:"_onDropOver",dropout:"_onDropOut"},initialize:function(){a.bindAll(this,"render","_addEvent");return this},render:function(){this.$el.append(Confluence.Templates.Roadmap.newRowLine());this._addEvent();this._setSizePosition();return this},_addEvent:function(){this.$el.droppable({accept:".roadmap-bar",tolerance:"pointer",hoverClass:"new-bar-row-hover"})},_setSizePosition:function(){var f=this.options.$barRow;var c=this.options.renderBottom===false?(this.margin*-1):f.height();var e=f.index()===0;var d=(e)?this.overlayTop+this.margin:this.overlayTop;this.$el.css({top:f.position().top+c-d,width:f.width()})},_onDrop:function(d,c){this.$el.trigger("BarView.drop",[{barRowNewView:this},c])},_onDropOver:function(d,c){this.$el.trigger("BarRowNew.dropover",[this,c])},_onDropOut:function(d,c){this.$el.trigger("BarRowNew.dropout",[this,c])}})})(AJS.$,window._);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-roadmap-plugin:roadmap-editor-view-resources', location = 'view/roadmap-editor/lane-dialog/lane-dialog.js' */
(function(c,a){var b=Roadmap.InlineDialogView;Roadmap.LaneDialogView=b.extend({events:{"click #delete-button":"_onDeleteClick","click #rename-button":"_onRenameClick","click #add-bar-button":"_onAddBarClick"},initialize:function(){a.bindAll(this,"_onHide");this.options.dialogOptions={width:this._getDialogWidth(),hideCallback:this._onHide};b.prototype.initialize.call(this,this.options)},_getContent:function(d){var g=this.options.lane.model.get("color").lane;d.html(Confluence.Templates.Roadmap.laneDialog({canDelete:this.options.canDelete,colors:Roadmap.COLORS,laneColor:g}));this.$el.find(".aui-button").tooltip({gravity:"s"});var e=this;var f=this.$el.find("#lane-color-picker .color-item");f.click(function(i){i.preventDefault();var h=Roadmap.COLORS[f.index(this)];if(h.lane!=g){e.options.changeColor(h)}})},_getDialogWidth:function(){var e=29;var f=51;var d=2;if(this.options.canDelete){d++}return d*e+f},_onDeleteClick:function(){this.options.deleteLane();this.remove()},_onRenameClick:function(){if(!this._laneRenameDialog){this._laneRenameDialog=new Roadmap.LaneRenameDialogView({trigger:this.options.trigger,lane:this.options.lane})}this._laneRenameDialog.show();this.hide()},_onAddBarClick:function(){this.options.addBar();this.remove()},_onHide:function(){c("#lane-color-picker").hide();b.prototype._onHide.call(this)}})})(AJS.$,window._);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-roadmap-plugin:roadmap-editor-view-resources', location = 'view/roadmap-editor/lane-dialog/lane-rename-dialog.js' */
(function(c,a){var b=Roadmap.InlineDialogView;Roadmap.LaneRenameDialogView=b.extend({events:{"click .rename-button":"_onRenameButtonClick","keyup .lane-title":"_onChangeLaneTitle"},initialize:function(){this.options.dialogOptions={width:this._getDialogWidth()};b.prototype.initialize.call(this,this.options)},_getContent:function(d){d.html(Confluence.Templates.Roadmap.laneRenameDialog({laneTitle:this.options.trigger.text()}));this.controls={$renameButton:this.$el.find(".rename-button"),$laneTitle:this.$el.find(".lane-title")}},_getDialogWidth:function(){return 315},_onChangeLaneTitle:function(d){var f=c.trim(this.controls.$laneTitle.val());if(!f){this.controls.$renameButton.disable()}else{this.controls.$renameButton.enable();if(d.which==AJS.$.ui.keyCode.ENTER){this.controls.$renameButton.click()}}},_onShow:function(d){this.controls.$laneTitle.select()},_onRenameButtonClick:function(d){d.preventDefault();this.hide();var e=this.controls.$laneTitle.val();this.options.lane.renameTitle(e)}})})(AJS.$,window._);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-roadmap-plugin:roadmap-editor-view-resources', location = 'view/roadmap-editor/marker-dialog/marker-dialog.js' */
(function(c,a){var b=Roadmap.InlineDialogView;Roadmap.MarkerDialogView=b.extend({events:{"click #rename-button":"_onRenameButtonClick","click #delete-button":"_onDeleteButtonClick"},initialize:function(){this.options.dialogOptions={width:60};b.prototype.initialize.call(this,this.options)},_getContent:function(d){d.html(Confluence.Templates.Roadmap.markerDialog());this.$el.find(".aui-button.aui-button-compact").tooltip({gravity:"s"})},_onRenameButtonClick:function(){if(!this._markerRenameDialog){this._markerRenameDialog=new Roadmap.MarkerRenameDialogView({trigger:this.options.trigger,marker:this.options.marker})}this._markerRenameDialog.show();this.hide()},_onDeleteButtonClick:function(){this.options.marker.removeMarker();this.hide()}})})(AJS.$,window._);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-roadmap-plugin:roadmap-editor-view-resources', location = 'view/roadmap-editor/marker-dialog/marker-rename-dialog.js' */
(function(c,a){var b=Roadmap.InlineDialogView;Roadmap.MarkerRenameDialogView=b.extend({events:{"click .rename-button":"_onSaveButtonClick","keyup .marker-title":"_onChangeMarkerTitle"},initialize:function(){this.options.dialogOptions={width:315};b.prototype.initialize.call(this,this.options)},_getContent:function(d){d.html(Confluence.Templates.Roadmap.markerRenameDialog({markerTitle:this.options.marker.model.get("title")}));this.controls={$renameButton:this.$el.find(".rename-button"),$title:this.$el.find(".marker-title")}},_onChangeMarkerTitle:function(d){var f=c.trim(this.controls.$title.val());if(!f){this.controls.$renameButton.disable()}else{this.controls.$renameButton.enable();if(d.which==AJS.$.ui.keyCode.ENTER){this.controls.$renameButton.click()}}},_onShow:function(d){this.controls.$title.select()},_onSaveButtonClick:function(d){d.preventDefault();this.hide();this.options.marker.renameTitle(this.controls.$title.val())}})})(AJS.$,window._);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-roadmap-plugin:roadmap-editor-view-resources', location = 'view/roadmap-editor/lane.js' */
(function(b,a){window.Roadmap=window.Roadmap||{};Roadmap.LaneView=Backbone.View.extend({tagName:"div",className:"roadmap-lane",events:{"click .roadmap-lane-title":"_showDialog","BarView.drop":"_onBarDropped","BarRowNew.dropover":"_onBarRowNewDropover","BarRowNew.dropout":"_onBarRowNewDropout"},attributes:function(){return{cid:this.cid}},initialize:function(){a.bindAll(this,"render","renameTitle","updateRowIndex","removeEmptyRow","cleanLaneAfterDrop","_deleteLane","_updateLaneHeight","_renderComplete","_deleteBar","_addBar","_changeColor","addDefaultBarRow");this._barViews=[];this._barRowViews=[];this.listenTo(this.model.get("bars"),"add",function(d){var c=this._newBarRowView();var e=this._newBarView(d);c.$el.append(e.render().$el);this._$laneContent.append(c.$el);this._barViews.push(e);this.$el.trigger("BarView.add",e);a.defer(this._updateLaneHeight)})},render:function(){var c=this;this.$el.append(Confluence.Templates.Roadmap.lane({title:this.model.get("title"),color:this.model.get("color")}));Confluence.Roadmap.ColorHelper.adjustColorCount(this.model.get("color"),1);var d=this.model.get("bars").models;d=a.sortBy(d,function(e){return e.attributes.rowIndex});a.each(d,function(e){var f=c._newBarView(e);c._barViews.push(f)});this._renderBars();a.defer(this._renderComplete);return this},_renderComplete:function(){this._updateLaneHeight()},renameTitle:function(c){this.model.set("title",c);this.$el.find(".roadmap-lane-title").attr("title",c);this.$el.find(".title-inner").html(AJS.escapeHtml(c));this._updateLaneHeight()},_updateLaneHeight:function(){var d=this.$el.find(".title-inner");d.hide();var c=this._$laneContent.outerHeight();d.width(c-2*Roadmap.LANE_PADDING);d.show()},_barBeforeResize:function(e,k){var l=e.$el;var g=Math.ceil(l.outerWidth()-l.width());var j;if(k=="left"){var f=this._getNearestBarView(e,k);var c=f==null?0:f.position().left+f.width()+g;var d=l.position().left-c;j=l.width()+d}else{var i=this._getNearestBarView(e,k);var h=i==null?this._getLaneContentWidth()-g:i.position().left-g;j=h-l.position().left}e.updateMaxWidth(j-Roadmap.BAR_MARGIN)},_renderBars:function(){var c=this;this._$laneContent=this.$el.find(".roadmap-lane-content");var d={};a.each(this._barViews,function(f){var g="row-"+f.model.get("rowIndex");var e=d[g];if(!e){e=c._newBarRowView(f.model.get("rowIndex"));d[g]=e}e.$el.append(f.render().$el);c._$laneContent.append(e.$el)})},_newBarRowView:function(){var c=new Roadmap.BarRowView();this._barRowViews.push(c);return c},_newBarView:function(c){var d=new Roadmap.BarView({model:c,lane:this,color:this.model.get("color"),timelineView:this.options.timelineView,deleteBar:this._deleteBar});d.on("beforeResize",a.bind(this._barBeforeResize,this));return d},_getNearestBarView:function(d,e){var f=a.filter(d.options.lane._barViews,function(g){return g.model.get("rowIndex")===d.model.get("rowIndex")});var c=null;if(e=="left"){a.each(f,function(g){if(g.$el.position().left<d.$el.position().left&&(c==null||g.$el.position().left>c.$el.position().left)){c=g}})}else{a.each(f,function(g){if(g.$el.position().left>d.$el.position().left&&(c==null||g.$el.position().left<c.$el.position().left)){c=g}})}return c!=null?c.$el:null},_getLaneContentWidth:function(){return this.$el.find(".roadmap-lane-content").width()},_showDialog:function(){this._laneDialog&&this._laneDialog.remove();this._laneDialog=this._createLaneDialog();this._laneDialog.show()},_createLaneDialog:function(){return new Roadmap.LaneDialogView({trigger:this.$el.find(".title-outer"),canDelete:this.options.canDelete,deleteLane:this._deleteLane,addBar:this._addBar,changeColor:this._changeColor,lane:this})},_onBarDropped:function(i,k,l){var n=!!k.barRowNewView;var f=l.draggable.data("View");var m=f.model;var h=f.options.lane;var j=(h.cid===this.cid);var g=this.model.get("bars");var o=l.position.left;var d=this.options.timelineView.getBarStartDate(o);if(j&&g.models.length===1&&n){return}f.updatePositionLeft(o);f.updateColor(this.model.get("color"));m.attributes.startDate=d;if(n){var c=this._newBarRowView();k.barRowNewView.$el.replaceWith(c.$el);f.appendTo(c.$el)}else{f.appendTo(k.$barRow)}l.helper.remove();if(!j){f.options.lane.removeEmptyRow();g._byId[m.id]=m;this._barViews.push(f);f.updateDeleteBar(this._deleteBar);h.model.get("bars").remove(m);g.models.push(m);h._barViews.splice(a.indexOf(h._barViews,f),1);this.updateRowIndex(h.$el);f.options=a.extend(f.options,{color:this.model.get("color"),lane:this});h._updateLaneHeight()}this.removeEmptyRow();this.updateRowIndex(this.$el);this._updateLaneHeight()},updateRowIndex:function(c){c.find(".roadmap-bar-row").each(function(e,d){b(d).find('.roadmap-bar:not(".roadmap-bar-clone")').each(function(h,f){var g=b(f).data("View");if(g){g.model.attributes.rowIndex=e}})})},removeEmptyRow:function(){var c=0;a.each(this._barRowViews,function(d){if(d.isEmptyRow()){d.remove();c++}});return !!c},cleanLaneAfterDrop:function(){this._$laneContent.find(".roadmap-bar-drag-active").removeClass("roadmap-bar-drag-active");this._$laneContent.find(".new-row-placeholder").remove()},_deleteLane:function(){Confluence.Roadmap.ColorHelper.adjustColorCount(this.model.get("color"),-1);this.$el.trigger("Lane.delete",this)},updateDeleteStatus:function(c){if(this._laneDialog){this._laneDialog.remove();delete this._laneDialog}this.options.canDelete=c},_deleteBar:function(c){this.model.get("bars").remove(c.model);this._barViews.splice(a.indexOf(this._barViews,c),1);c.remove();if(this.removeEmptyRow()){this.updateRowIndex(this.$el);this._updateLaneHeight();this.$el.trigger("BarRowView.remove")}},_addBar:function(){var c=this.model.get("bars");var e=this.options.timelineView.model;var f=moment(e.get("startDate"));var d=e.get("displayOption")===Roadmap.TIMELINE_DISPLAY_OPTION.MONTH?f.startOf("month"):f.startOf("isoWeek");c.add(new Roadmap.Bar({rowIndex:this.model.getNumberOfRows(),startDate:d.toDate()}))},_changeColor:function(c){Confluence.Roadmap.ColorHelper.adjustColorCount(this.model.get("color"),-1);this.model.set("color",c);Confluence.Roadmap.ColorHelper.adjustColorCount(c,1);this.$el.find(".roadmap-lane-title").css({"background-color":c.lane,color:c.text});a.each(this._barViews,function(d){d.updateColor(c)})},addNewBarRow:function(h){var g=this._$laneContent.find(".roadmap-bar-row");var c=[];var d=function(){g.each(function(){var k=b(this);var j=k.index()===0;if(j){var l=new Roadmap.BarRowNewView({$barRow:k,renderBottom:false});k.before(l.render().$el);c.push(l)}var i=new Roadmap.BarRowNewView({$barRow:k});k.after(i.render().$el);c.push(i)})};if(g.length==0){this.addDefaultBarRow()}else{var e=g.find(".roadmap-bar");if(e.length>0){var f=(e.length>0)&&(e.length==1)&&(e.attr("cid")===h.attr("cid"));if(!f){d()}}}return c},addDefaultBarRow:function(){var c=this._newBarRowView();this._$laneContent.append(c.$el)},_onBarRowNewDropover:function(f,d,c){if(!a.isEmpty(Roadmap.DragDrop.barDraggingOver)){a.each(Roadmap.DragDrop.barDraggingOver,function(e){e.$el&&e.$el.removeClass("new-bar-row-hover roadmap-bar-drag-hover")})}Roadmap.DragDrop.barDraggingOver[d.cid]=d;c.helper.removeClass("roadmap-bar-overlapped");c.helper.data("isAddingNewRow",true)},_onBarRowNewDropout:function(f,d,c){c.helper.data("isAddingNewRow",false);delete Roadmap.DragDrop.barDraggingOver[d.cid];a.each(Roadmap.DragDrop.barDraggingOver,function(e){if(typeof e==="string"){c.helper.addClass("roadmap-bar-overlapped")}else{if(e.className==="roadmap-bar-row"&&c.helper.data("isAddingNewRow")!==true){e.$el.addClass("roadmap-bar-drag-hover")}}})}})})(AJS.$,window._);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-roadmap-plugin:roadmap-editor-view-resources', location = 'view/roadmap-editor/marker.js' */
(function(b,a){window.Roadmap=window.Roadmap||{};Roadmap.MarkerView=Backbone.View.extend({className:"vertical-line",events:{dragstop:"_onDragStop",dragstart:"_onDragStart"},initialize:function(){a.bindAll(this,"render","updateHeight","renameTitle","_renderComplete","_onMarkerClick")},render:function(){var d=this.options.roadmap._timelineView.model;var c;if(d.get("displayOption")===Roadmap.TIMELINE_DISPLAY_OPTION.MONTH){c=Confluence.Roadmap.Helper.getPosXOnMonthTimeline(d.attributes,this.model.get("markerDate"))}else{c=Confluence.Roadmap.Helper.getPosXOnWeekTimeline(d.attributes,this.model.get("markerDate"))}if(c<0||c>this.options.roadmap._timelineView.$el.width()){return false}this.$el.css({left:(c+Roadmap.LANE_TITLE_WIDTH)+"px"});this.$el.append(Confluence.Templates.Roadmap.marker({title:this.model.get("title")}));this.updateHeight(this.options.roadmap._getLaneHeight());a.defer(this._renderComplete);return this},_renderComplete:function(){this._setupMarkerDragging();this.$el.click(this._onMarkerClick);this.$el.find(".marker-title").ellipsis({row:Roadmap.MARKER_TITLE_LINE})},_setupMarkerDragging:function(){this.$el.draggable({axis:"x",zIndex:4013,containment:".roadmap-frame-content",cursor:"move"})},_onDragStop:function(g,f){var c=f.position.left-Roadmap.LANE_TITLE_WIDTH;var d=this.options.roadmap._timelineView.model.attributes;var h;if(d.displayOption===Roadmap.TIMELINE_DISPLAY_OPTION.MONTH){h=Confluence.Roadmap.Helper.getMonthStartDateByPosition(d,c)}else{h=Confluence.Roadmap.Helper.getWeekStartDateByPosition(d,c)}this.model.set("markerDate",h)},_onDragStart:function(d,c){this.options.roadmap.hideDialog()},_onMarkerClick:function(c){if(!b(c.target).hasClass("marker-title")){return}this._markerDialog&&this._markerDialog.remove();this._markerDialog=this._createMarkerDialog();this._markerDialog.show()},_createMarkerDialog:function(){return new Roadmap.MarkerDialogView({trigger:this.$el.find(".marker-title"),marker:this})},updateHeight:function(c){this.$el.height(c+Roadmap.MARKER_HEIGHT_PADDING)},renameTitle:function(d){this.model.set("title",d);var c=this.$el.find(".marker-title");c.attr("title",d);c.html(AJS.escapeHtml(d)).ellipsis({row:Roadmap.MARKER_TITLE_LINE})},removeMarker:function(){this.model.collection.remove(this.model);this.remove()}})})(AJS.$,window._);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-roadmap-plugin:roadmap-editor-view-resources', location = 'view/roadmap-editor/roadmap.js' */
(function(b,a){window.Roadmap=window.Roadmap||{};Roadmap.RoadmapEditorView=Backbone.View.extend({className:"roadmap-editor-container",events:{"BarView.add":"_onAddBar","BarView.dragstart":"_onBarDragstart","BarView.dragstop":"_onBarDragstop","BarView.drop":"_onBarDropped","LaneView.drop":"_onBarDropped","Lane.delete":"_onDeleteLane","BarRowView.remove":"_onBarRowViewRemove","sortstart .roadmap-content":"_onSortStart","sortstop .roadmap-content":"_onSortStop",remove:"_onRemove"},initialize:function(){a.bindAll(this,"render");this.listenTo(this.model.get("lanes"),"add",function(c){var d=new Roadmap.LaneView({model:c,timelineView:this._timelineView,canDelete:true});if(this._laneViews.length===1){this._laneViews[0].updateDeleteStatus(true)}this._laneViews.push(d);this.$roadmapContent.append(d.render().$el);this._updateTimelineColumnHeight();this._scrollToBottom()});this.listenTo(this.model.get("markers"),"add",function(c){var d=new Roadmap.MarkerView({model:c,roadmap:this});this.$roadmapMarker.append(d.render().$el);this._markerViews.push(d)});this.listenTo(this.model.get("timeline"),"change",function(){if(this._isTimelineChanged()){this._calculateMinWidthOfABar();this._timelineView.update();this._timelineColumnView.update();this.$roadmapContent.empty();a.each(this._laneViews,function(c){c.remove()});this._laneViews=[];this._renderLanes();this.$roadmapMarker.empty();this._markerViews=[];this._renderMarkers();this._updateDragArea()}})},render:function(){this.$el.html(Confluence.Templates.Roadmap.roadmapEditor());this._calculateMinWidthOfABar();this._initVariables();this._renderToolbar();this._renderTimeline();this._renderLanes();this._renderMarkers();this._renderTimelineColumn();this._updateDragArea();return this},_calculateMinWidthOfABar:function(){Roadmap.barMinWidth=this.model.get("timeline").get("displayOption")===Roadmap.TIMELINE_DISPLAY_OPTION.MONTH?Roadmap.MONTH_BAR_MIN_WIDTH:Roadmap.WEEK_BAR_MIN_WIDTH},_initVariables:function(){this.$roadmapContainer=this.$el.find("#roadmap-container");this.$roadmapTimeline=this.$roadmapContainer.find(".roadmap-frame");this.$roadmapContent=this.$roadmapContainer.find(".roadmap-content");this.$roadmapMarker=this.$roadmapContainer.find(".roadmap-marker");this._timelineView=new Roadmap.TimelineView({model:this.model.get("timeline")});this._timelineColumnView=new Roadmap.TimelineColumnView({model:this.model.get("timeline")});this._laneViews=[];this._markerViews=[]},_renderTimeline:function(){this.$roadmapTimeline.prepend(this._timelineView.render().$el)},_renderTimelineColumn:function(){this._updateTimelineColumnHeight();this.$roadmapTimeline.append(this._timelineColumnView.render().$el)},_renderMarkers:function(){var c=this;this.model.get("markers").each(function(d){var e=new Roadmap.MarkerView({model:d,roadmap:c});c.$roadmapMarker.append(e.render().$el);c._markerViews.push(e)})},_renderLanes:function(){Confluence.Roadmap.ColorHelper.resetColorCounts();var d=this;this._updateLaneWidth();var c=this.model.get("lanes").models.length>1;this.model.get("lanes").each(function(e){var f=new Roadmap.LaneView({model:e,timelineView:d._timelineView,canDelete:c});d._laneViews.push(f);d.$roadmapContent.append(f.render().$el)});this._setupLaneReordering()},_onAddBar:function(d,c){this._updateTimelineColumnHeight();var e=c.$el;if(!this._isInViewScreen(e)){this._scrollToBar(e)}},_renderToolbar:function(){var d=b("#"+this.options.dialogId+" .dialog-page-body");d.find(".roadmap-toolbar").remove();var c=new Roadmap.ToolbarView({model:this.model,timelineView:this._timelineView});d.prepend(c.render().$el)},_getTimelineWidth:function(){return this.$roadmapTimeline.find(".roadmap-frame-title").width()},_getLaneHeight:function(){return this.$roadmapContent.height()},_updateLaneWidth:function(){this.$roadmapContent.width(this._getTimelineWidth()+Roadmap.LANE_TITLE_WIDTH)},_scrollToBottom:function(){this.options.roadmapPopup.scrollTop(this._getLaneHeight())},_isInViewScreen:function(c){return b.inviewport(c,{threshold:-100})},_scrollToBar:function(c){this.options.roadmapPopup.scrollTop(c.parent().position().top);this.options.roadmapPopup.scrollLeft(0)},_onBarDropped:function(){this._updateTimelineColumnHeight()},_onDeleteLane:function(d,c){this.model.get("lanes").remove(c.model);this._laneViews.splice(a.indexOf(this._laneViews,c),1);c.remove();this._updateTimelineColumnHeight();if(this._laneViews.length===1){this._laneViews[0].updateDeleteStatus(false)}},_onBarRowViewRemove:function(){this._updateTimelineColumnHeight()},_updateTimelineColumnHeight:function(){var c=this._getLaneHeight();this._timelineColumnView.updateHeight(c);a.each(this._markerViews,function(d){d.updateHeight(c)})},hideDialog:function(){b("#inline-dialog-roadmap-dialog, #inline-dialog-timeline-options").hide()},removeDialog:function(){b("#inline-dialog-roadmap-dialog, #inline-dialog-timeline-options").remove()},_onBarDragstart:function(f,d){var c=this;this.hideDialog();this._updateDragArea();this._barRowNewViewList=[];a.each(this._laneViews,function(e){c._barRowNewViewList.push(e.addNewBarRow(d.helper))})},_updateDragArea:function(){var c=this.$roadmapContainer.find(".roadmap-drag-area");c.css(this._timelineColumnView.getSizeAndPosition())},_onBarDragstop:function(){a.each(a.flatten(this._barRowNewViewList),function(c){c.remove()});delete this._barRowNewViewList;a.each(this._laneViews,function(c){c.removeEmptyRow()})},_setupLaneReordering:function(){this.$roadmapContent.sortable({axis:"y",cursor:"move",handle:".roadmap-lane-title",opacity:0.3,placeholder:"roadmap-lane lane-sorting-placeholder",helper:function(d,c){return b(c).clone().addClass("lane-sorting-hepler")}})},_onSortStart:function(d,c){this.hideDialog();this._timelineColumnView.$el.hide();c.placeholder.css({height:Math.min(c.helper.height(),100),width:c.helper.width()}).html(Confluence.Templates.Roadmap.lane(Roadmap.TRANSPARENT_LANE));c.helper.find(".roadmap-lane-content").css({width:c.helper.width()-(c.helper.find(".roadmap-lane-title").outerWidth()+c.helper.find(".roadmap-separate-content").outerWidth())})},_onSortStop:function(h,g){this._timelineColumnView.$el.show();var d=g.item.attr("cid");var f=a.find(this._laneViews,function(e){return e.cid===d});var c=f.model;var i=this.model.get("lanes");i.remove(c);i.models.splice(g.item.index(),0,c);i._byId[c.cid]=c},_onRemove:function(){this.$roadmapTimeline.remove()},_isMonthYearChanged:function(){var d=function(f,e){if(f.getMonth()!==e.getMonth()||f.getYear()!==e.getYear()){return true}return false};var c=this.model.get("timeline");return d(c._previousAttributes.startDate,c.attributes.startDate)||d(c._previousAttributes.endDate,c.attributes.endDate)},_isWeekChanged:function(){var c=function(l,k){var j=moment(l);var i=moment(k);return j.get("year")===i.get("year")&&j.isoWeek()===i.isoWeek()};var d=this.model.get("timeline");var g=d._previousAttributes.startDate;var h=d.attributes.startDate;var f=d._previousAttributes.endDate;var e=d.attributes.endDate;return !(c(g,h)&&c(f,e))},_isTimelineChanged:function(){var d=this.model.get("timeline");var c=d.changed.displayOption;if(c){this.model.updateDurationUnit(d.get("displayOption"))}else{c=d.get("displayOption")===Roadmap.TIMELINE_DISPLAY_OPTION.MONTH?this._isMonthYearChanged():this._isWeekChanged()}return c},resize:function(){this._updateLaneWidth();this._updateTimelineColumnHeight();this.$roadmapContent.css({top:this.$roadmapTimeline.find(".roadmap-column-title:first").innerHeight()})}})})(AJS.$,window._);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-roadmap-plugin:roadmap-analytics-resources', location = 'analytics/roadmap-analytics.js' */
Confluence.Roadmap=Confluence.Roadmap||{};Confluence.Roadmap.Analytics=(function(f,j){var c={INSERT:"confluence.roadmap.insert",CREATE:"confluence.roadmap.create",EDIT:"confluence.roadmap.edit",EDIT_ACTIONS:{OPEN_BAR_DIALOG:"confluence.roadmap.editmode.open_bar_dialog",ADD_DESCRIPTION:"confluence.roadmap.editmode.add_description",ADD_PAGE_LINK:"confluence.roadmap.editmode.add_page_link"},VIEW_ACTIONS:{OPEN_BAR_DIALOG:"confluence.roadmap.viewmode.open_bar_dialog",CLICK_PAGE_LINK:"confluence.roadmap.viewmode.click_page_link",ADD_PAGE_LINK:"confluence.roadmap.viewmode.add_page_link"}};function h(o,p){AJS.trigger("analytics",{name:o,data:p})}function m(p){var o=0;j.each(p.lanes,function(q){o=o+q.bars.length});return{lanes:p.lanes.length,bars:o,markers:p.markers.length,months:Confluence.Roadmap.DateUtilities.getNumberOfMonths(p.timeline.startDate,p.timeline.endDate)+1}}function k(){h(c.INSERT)}function d(p){var o=m(p);h(c.CREATE,o)}function e(p){var o=m(p);h(c.EDIT,o)}function a(){h(c.EDIT_ACTIONS.OPEN_BAR_DIALOG)}function n(){h(c.VIEW_ACTIONS.OPEN_BAR_DIALOG)}function b(){h(c.VIEW_ACTIONS.CLICK_PAGE_LINK)}function l(){h(c.EDIT_ACTIONS.ADD_DESCRIPTION)}function g(o){h(c.EDIT_ACTIONS.ADD_PAGE_LINK,o)}function i(o){h(c.VIEW_ACTIONS.ADD_PAGE_LINK,o)}return{insertRoadmap:k,createRoadmap:d,editRoadmap:e,openBarDialogInEdit:a,addDescription:l,addPageLinkEditMode:g,addPageLinkViewMode:i,openBarDialogInView:n,clickPageLink:b}})(AJS.$,window._);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-roadmap-plugin:roadmap-editor-resources', location = 'lib/jquery.viewport.js' */
(function(a){a.belowthefold=function(c,d){var b=a(window).height()+a(window).scrollTop();return b<=a(c).offset().top-d.threshold};a.abovethetop=function(b,c){var d=a(window).scrollTop();return d>=a(b).offset().top+a(b).height()-c.threshold};a.rightofscreen=function(c,d){var b=a(window).width()+a(window).scrollLeft();return(b<=a(c).offset().left-d.threshold)||a(c).offset().left<0};a.leftofscreen=function(b,c){var d=a(window).scrollLeft();return d>=a(b).offset().left+a(b).width()-c.threshold};a.inviewport=function(b,c){return !a.rightofscreen(b,c)&&!a.leftofscreen(b,c)&&!a.belowthefold(b,c)&&!a.abovethetop(b,c)};a.extend(a.expr[":"],{"below-the-fold":function(c,d,b){return a.belowthefold(c,{threshold:0})},"above-the-top":function(c,d,b){return a.abovethetop(c,{threshold:0})},"left-of-screen":function(c,d,b){return a.leftofscreen(c,{threshold:0})},"right-of-screen":function(c,d,b){return a.rightofscreen(c,{threshold:0})},"in-viewport":function(c,d,b){return a.inviewport(c,{threshold:0})}})})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-roadmap-plugin:roadmap-editor-resources', location = 'lib/jquery.ellipsis.min.js' */
/*! jQuery ellipsis - v1.1.1 - 2014-02-23
* https://github.com/STAR-ZERO/jquery-ellipsis
* Copyright (c) 2014 Kenji Abe; Licensed MIT */
!function(a){a.fn.ellipsis=function(b){var c={row:1,onlyFullWords:!1,"char":"...",callback:function(){},position:"tail"};return b=a.extend(c,b),this.each(function(){var c=a(this),d=c.text(),e=d,f=e.length,g=c.height();c.text("a");var h=parseFloat(c.css("lineHeight"),10),i=c.height(),j=h>i?h-i:0,k=j*(b.row-1)+i*b.row;if(k>=g)return c.text(d),void b.callback.call(this);var l=1,m=0,n=d.length;if("tail"===b.position){for(;n>l;)m=Math.ceil((l+n)/2),c.text(d.slice(0,m)+b["char"]),c.height()<=k?l=m:n=m-1;d=d.slice(0,l),b.onlyFullWords&&(d=d.replace(/[\u00AD\w\uac00-\ud7af]+$/,"")),d+=b["char"]}else if("middle"===b.position){for(var o=0;n>l;)m=Math.ceil((l+n)/2),o=Math.max(f-m,0),c.text(e.slice(0,Math.floor((f-o)/2))+b["char"]+e.slice(Math.floor((f+o)/2),f)),c.height()<=k?l=m:n=m-1;o=Math.max(f-l,0);var p=e.slice(0,Math.floor((f-o)/2)),q=e.slice(Math.floor((f+o)/2),f);b.onlyFullWords&&(p=p.replace(/[\u00AD\w\uac00-\ud7af]+$/,"")),d=p+b["char"]+q}c.text(d),b.callback.call(this)}),this}}(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-roadmap-plugin:roadmap-editor-resources', location = 'editor/md5.js' */
var hexcase=0;var b64pad="";function hex_md5(a){return rstr2hex(rstr_md5(str2rstr_utf8(a)))}function b64_md5(a){return rstr2b64(rstr_md5(str2rstr_utf8(a)))}function any_md5(a,b){return rstr2any(rstr_md5(str2rstr_utf8(a)),b)}function hex_hmac_md5(a,b){return rstr2hex(rstr_hmac_md5(str2rstr_utf8(a),str2rstr_utf8(b)))}function b64_hmac_md5(a,b){return rstr2b64(rstr_hmac_md5(str2rstr_utf8(a),str2rstr_utf8(b)))}function any_hmac_md5(a,c,b){return rstr2any(rstr_hmac_md5(str2rstr_utf8(a),str2rstr_utf8(c)),b)}function md5_vm_test(){return hex_md5("abc").toLowerCase()=="900150983cd24fb0d6963f7d28e17f72"}function rstr_md5(a){return binl2rstr(binl_md5(rstr2binl(a),a.length*8))}function rstr_hmac_md5(c,f){var e=rstr2binl(c);if(e.length>16){e=binl_md5(e,c.length*8)}var a=Array(16),d=Array(16);for(var b=0;b<16;b++){a[b]=e[b]^909522486;d[b]=e[b]^1549556828}var g=binl_md5(a.concat(rstr2binl(f)),512+f.length*8);return binl2rstr(binl_md5(d.concat(g),512+128))}function rstr2hex(c){try{hexcase}catch(g){hexcase=0}var f=hexcase?"0123456789ABCDEF":"0123456789abcdef";var b="";var a;for(var d=0;d<c.length;d++){a=c.charCodeAt(d);b+=f.charAt((a>>>4)&15)+f.charAt(a&15)}return b}function rstr2b64(c){try{b64pad}catch(h){b64pad=""}var g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var b="";var a=c.length;for(var f=0;f<a;f+=3){var k=(c.charCodeAt(f)<<16)|(f+1<a?c.charCodeAt(f+1)<<8:0)|(f+2<a?c.charCodeAt(f+2):0);for(var d=0;d<4;d++){if(f*8+d*6>c.length*8){b+=b64pad}else{b+=g.charAt((k>>>6*(3-d))&63)}}}return b}function rstr2any(m,c){var b=c.length;var l,f,a,n,e;var k=Array(Math.ceil(m.length/2));for(l=0;l<k.length;l++){k[l]=(m.charCodeAt(l*2)<<8)|m.charCodeAt(l*2+1)}var h=Math.ceil(m.length*8/(Math.log(c.length)/Math.log(2)));var g=Array(h);for(f=0;f<h;f++){e=Array();n=0;for(l=0;l<k.length;l++){n=(n<<16)+k[l];a=Math.floor(n/b);n-=a*b;if(e.length>0||a>0){e[e.length]=a}}g[f]=n;k=e}var d="";for(l=g.length-1;l>=0;l--){d+=c.charAt(g[l])}return d}function str2rstr_utf8(c){var b="";var d=-1;var a,e;while(++d<c.length){a=c.charCodeAt(d);e=d+1<c.length?c.charCodeAt(d+1):0;if(55296<=a&&a<=56319&&56320<=e&&e<=57343){a=65536+((a&1023)<<10)+(e&1023);d++}if(a<=127){b+=String.fromCharCode(a)}else{if(a<=2047){b+=String.fromCharCode(192|((a>>>6)&31),128|(a&63))}else{if(a<=65535){b+=String.fromCharCode(224|((a>>>12)&15),128|((a>>>6)&63),128|(a&63))}else{if(a<=2097151){b+=String.fromCharCode(240|((a>>>18)&7),128|((a>>>12)&63),128|((a>>>6)&63),128|(a&63))}}}}}return b}function str2rstr_utf16le(b){var a="";for(var c=0;c<b.length;c++){a+=String.fromCharCode(b.charCodeAt(c)&255,(b.charCodeAt(c)>>>8)&255)}return a}function str2rstr_utf16be(b){var a="";for(var c=0;c<b.length;c++){a+=String.fromCharCode((b.charCodeAt(c)>>>8)&255,b.charCodeAt(c)&255)}return a}function rstr2binl(b){var a=Array(b.length>>2);for(var c=0;c<a.length;c++){a[c]=0}for(var c=0;c<b.length*8;c+=8){a[c>>5]|=(b.charCodeAt(c/8)&255)<<(c%32)}return a}function binl2rstr(b){var a="";for(var c=0;c<b.length*32;c+=8){a+=String.fromCharCode((b[c>>5]>>>(c%32))&255)}return a}function binl_md5(p,k){p[k>>5]|=128<<((k)%32);p[(((k+64)>>>9)<<4)+14]=k;var o=1732584193;var n=-271733879;var m=-1732584194;var l=271733878;for(var g=0;g<p.length;g+=16){var j=o;var h=n;var f=m;var e=l;o=md5_ff(o,n,m,l,p[g+0],7,-680876936);l=md5_ff(l,o,n,m,p[g+1],12,-389564586);m=md5_ff(m,l,o,n,p[g+2],17,606105819);n=md5_ff(n,m,l,o,p[g+3],22,-1044525330);o=md5_ff(o,n,m,l,p[g+4],7,-176418897);l=md5_ff(l,o,n,m,p[g+5],12,1200080426);m=md5_ff(m,l,o,n,p[g+6],17,-1473231341);n=md5_ff(n,m,l,o,p[g+7],22,-45705983);o=md5_ff(o,n,m,l,p[g+8],7,1770035416);l=md5_ff(l,o,n,m,p[g+9],12,-1958414417);m=md5_ff(m,l,o,n,p[g+10],17,-42063);n=md5_ff(n,m,l,o,p[g+11],22,-1990404162);o=md5_ff(o,n,m,l,p[g+12],7,1804603682);l=md5_ff(l,o,n,m,p[g+13],12,-40341101);m=md5_ff(m,l,o,n,p[g+14],17,-1502002290);n=md5_ff(n,m,l,o,p[g+15],22,1236535329);o=md5_gg(o,n,m,l,p[g+1],5,-165796510);l=md5_gg(l,o,n,m,p[g+6],9,-1069501632);m=md5_gg(m,l,o,n,p[g+11],14,643717713);n=md5_gg(n,m,l,o,p[g+0],20,-373897302);o=md5_gg(o,n,m,l,p[g+5],5,-701558691);l=md5_gg(l,o,n,m,p[g+10],9,38016083);m=md5_gg(m,l,o,n,p[g+15],14,-660478335);n=md5_gg(n,m,l,o,p[g+4],20,-405537848);o=md5_gg(o,n,m,l,p[g+9],5,568446438);l=md5_gg(l,o,n,m,p[g+14],9,-1019803690);m=md5_gg(m,l,o,n,p[g+3],14,-187363961);n=md5_gg(n,m,l,o,p[g+8],20,1163531501);o=md5_gg(o,n,m,l,p[g+13],5,-1444681467);l=md5_gg(l,o,n,m,p[g+2],9,-51403784);m=md5_gg(m,l,o,n,p[g+7],14,1735328473);n=md5_gg(n,m,l,o,p[g+12],20,-1926607734);o=md5_hh(o,n,m,l,p[g+5],4,-378558);l=md5_hh(l,o,n,m,p[g+8],11,-2022574463);m=md5_hh(m,l,o,n,p[g+11],16,1839030562);n=md5_hh(n,m,l,o,p[g+14],23,-35309556);o=md5_hh(o,n,m,l,p[g+1],4,-1530992060);l=md5_hh(l,o,n,m,p[g+4],11,1272893353);m=md5_hh(m,l,o,n,p[g+7],16,-155497632);n=md5_hh(n,m,l,o,p[g+10],23,-1094730640);o=md5_hh(o,n,m,l,p[g+13],4,681279174);l=md5_hh(l,o,n,m,p[g+0],11,-358537222);m=md5_hh(m,l,o,n,p[g+3],16,-722521979);n=md5_hh(n,m,l,o,p[g+6],23,76029189);o=md5_hh(o,n,m,l,p[g+9],4,-640364487);l=md5_hh(l,o,n,m,p[g+12],11,-421815835);m=md5_hh(m,l,o,n,p[g+15],16,530742520);n=md5_hh(n,m,l,o,p[g+2],23,-995338651);o=md5_ii(o,n,m,l,p[g+0],6,-198630844);l=md5_ii(l,o,n,m,p[g+7],10,1126891415);m=md5_ii(m,l,o,n,p[g+14],15,-1416354905);n=md5_ii(n,m,l,o,p[g+5],21,-57434055);o=md5_ii(o,n,m,l,p[g+12],6,1700485571);l=md5_ii(l,o,n,m,p[g+3],10,-1894986606);m=md5_ii(m,l,o,n,p[g+10],15,-1051523);n=md5_ii(n,m,l,o,p[g+1],21,-2054922799);o=md5_ii(o,n,m,l,p[g+8],6,1873313359);l=md5_ii(l,o,n,m,p[g+15],10,-30611744);m=md5_ii(m,l,o,n,p[g+6],15,-1560198380);n=md5_ii(n,m,l,o,p[g+13],21,1309151649);o=md5_ii(o,n,m,l,p[g+4],6,-145523070);l=md5_ii(l,o,n,m,p[g+11],10,-1120210379);m=md5_ii(m,l,o,n,p[g+2],15,718787259);n=md5_ii(n,m,l,o,p[g+9],21,-343485551);o=safe_add(o,j);n=safe_add(n,h);m=safe_add(m,f);l=safe_add(l,e)}return Array(o,n,m,l)}function md5_cmn(h,e,d,c,g,f){return safe_add(bit_rol(safe_add(safe_add(e,h),safe_add(c,f)),g),d)}function md5_ff(g,f,k,j,e,i,h){return md5_cmn((f&k)|((~f)&j),g,f,e,i,h)}function md5_gg(g,f,k,j,e,i,h){return md5_cmn((f&j)|(k&(~j)),g,f,e,i,h)}function md5_hh(g,f,k,j,e,i,h){return md5_cmn(f^k^j,g,f,e,i,h)}function md5_ii(g,f,k,j,e,i,h){return md5_cmn(k^(f|(~j)),g,f,e,i,h)}function safe_add(a,d){var c=(a&65535)+(d&65535);var b=(a>>16)+(d>>16)+(c>>16);return(b<<16)|(c&65535)}function bit_rol(a,b){return(a<<b)|(a>>>(32-b))};
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-roadmap-plugin:roadmap-editor-resources', location = 'editor/roadmap-editor.js' */
AJS.toInit(function(h){var e,d,a,c,f;var g="~~~~~";AJS.MacroBrowser.setMacroJsOverride("roadmap",{opener:function(m){var o=function(t,r,s,u){var q=s?s.split(g):[];var p=r?r.split(g):[];if(!_.isEmpty(q)){h.ajax({type:"POST",contentType:"application/json",url:AJS.contextPath()+"/rest/roadmap/1.0/extractPageLinks",data:JSON.stringify({wikiLinks:_.object(q,p),roadmapSpace:AJS.Meta.get("space-key")}),success:function(v){_.each(t.lanes,function(w){_.chain(w.bars).filter(function(x){return _.contains(q,x.id)}).each(function(x){if(v[x.id]){x.pageLink=v[x.id]}})});u&&u()},error:function(v){AJS.log(v);u&&u()}})}else{u&&u()}},n=function(q){var r=[];var p=[];q.lanes.forEach(function(s){s.bars.forEach(function(t){if(!_.isEmpty(t.pageLink)){var u=t.pageLink.wikiLink.replace(/[\][]/g,"");r.push(_.escape(u));p.push(t.id)}})});return{pageLinks:r.join(g),mapLinks:p.join(g)}};if(m.params&&m.params.timeline!=="true"){var j="roadmap-deprecation-dialog";var k=h(Confluence.Templates.Roadmap.deprecationDialog({id:j}));AJS.dialog2(k).on("hide",function(){h("#"+j).remove()}).on("show",function(){h("#dialog-close-button",k).click(function(p){p.preventDefault();AJS.dialog2("#"+j).hide()})}).show();return false}var i;var l=function(){var u=function(w){var v=w.target||w.srcElement;if(w.keyCode===AJS.keyCode.ENTER&&h.browser.msie&&v.nodeName==="INPUT"){return false}else{if(w.keyCode===AJS.keyCode.ESCAPE&&e.isVisible()){w.preventDefault()}else{if(w.keyCode===AJS.keyCode.BACKSPACE&&e.isVisible()&&!(v.nodeName==="INPUT"||v.nodeName==="TEXTAREA")){w.preventDefault()}}}};var q="confluence-roadmap-dialog";var t="roadmap-popup-panel";if(typeof e=="undefined"){e=new AJS.Dialog({width:"90%",height:"90%",closeOnOutsideClick:false,id:q,keypressListener:u});d=h("#"+q);d.css({marginTop:"",marginLeft:"",top:"5%",left:"5%"});e.addHeader("Insert Roadmap Planner");e.addPanel("Roadmap Planner",Confluence.Templates.Roadmap.roadmapPopupPanel({roadmapPopupPanelId:t}),"roadmap-editor-popup",1);a=d.find(".roadmap-editor-popup");e.scrollTop=function(v){a.scrollTop(v)};e.scrollLeft=function(v){a.scrollLeft(v)};e.addSubmit("Insert",function(){c.removeDialog();var w=c.model.toMacroData();var x=encodeURIComponent(JSON.stringify(w));var y=hex_md5(x);var z=n(w);var v={timeline:"true",source:x,hash:y,title:encodeURIComponent(w.title),pagelinks:z.pageLinks,maplinks:z.mapLinks};tinymce.confluence.macrobrowser.macroBrowserComplete({name:"roadmap",params:v});c.remove();e.hide();if(f){Confluence.Roadmap.Analytics.createRoadmap(w)}else{Confluence.Roadmap.Analytics.editRoadmap(w)}});e.addCancel("Cancel",function(){c.removeDialog();c.remove();e.hide()})}e.show();var p=h("#"+t);var r=p.find(".roadmap-view");if(!r.length){r=h('<div class="roadmap-view"/>');p.append(r)}var s=new Roadmap.Roadmap(i,{parse:true});c=new Roadmap.RoadmapEditorView({model:s,dialogId:q,el:r,roadmapPopup:e});c.render();b();window.roadmapEditor=e};if(m.params&&m.params.source){f=false;i=JSON.parse(decodeURIComponent(m.params.source));o(i,m.params.pagelinks,m.params.maplinks,l)}else{f=true;Confluence.Roadmap.Analytics.insertRoadmap();l()}}});function b(){setTimeout(function(){if(d&&d.is(":visible")){var k=d.height(),j=d.find(".dialog-title").outerHeight(),l=d.find(".dialog-button-panel").outerHeight(),i=d.find("#roadmap-editor-toolbar").outerHeight(),m=d.find(".dialog-panel-body");m.css("height",k-j-l-i)}},0)}h(window).resize(function(){b();c&&c.resize()})})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-roadmap-plugin:roadmap-editor-resources', location = 'editor/roadmap-editor-config.js' */
(function(){window.Roadmap=window.Roadmap||{};Roadmap.COLORS=[{lane:"#f6c342",bar:"#fadb8e",text:"#594300"},{lane:"#3b7fc4",bar:"#6c9fd3",text:"#ffffff"},{lane:"#d04437",bar:"#dc7369",text:"#ffffff"},{lane:"#8eb021",bar:"#aac459",text:"#ffffff"},{lane:"#ea632b",bar:"#ef8a60",text:"#ffffff"},{lane:"#654982",bar:"#8c77a1",text:"#ffffff"},{lane:"#f15c75",bar:"#f58598",text:"#ffffff"},{lane:"#815b3a",bar:"#a1846b",text:"#ffffff"}];Roadmap.TIMELINE_DISPLAY_OPTION={MONTH:"MONTH",WEEK:"WEEK"};Roadmap.SHORT_DATE_FORMAT="YYYY-MM-DD";Roadmap.TWO_YY_SHORT_DATE_FORMAT="YY-MM-DD";Roadmap.DATE_FORMAT="YYYY-MM-DD HH:mm:ss";Roadmap.WEEK_FORMAT="DD-MMM";Roadmap.MONTH_FORMAT="MMM";Roadmap.TIMELINE_YEARS_LIMIT=5;Roadmap.LANE_TITLE_WIDTH=45;Roadmap.MARKER_HEIGHT_PADDING=10;Roadmap.MARKER_TITLE_LINE=2;Roadmap.LANE_PADDING=11;Roadmap.BAR_PADDING=8;Roadmap.BAR_MARGIN=1;Roadmap.BAR_BORDER=1;Roadmap.MONTH_WIDTH=101;Roadmap.WEEK_WIDTH=101;Roadmap.EXTRA_SPACE_AROUND=Roadmap.BAR_PADDING*2+Roadmap.BAR_BORDER*2;Roadmap.MONTH_BAR_MIN_WIDTH=Roadmap.MONTH_WIDTH/4-Roadmap.EXTRA_SPACE_AROUND;Roadmap.WEEK_BAR_MIN_WIDTH=Roadmap.WEEK_WIDTH-Roadmap.EXTRA_SPACE_AROUND;Roadmap.barMinWidth=Roadmap.MONTH_BAR_MIN_WIDTH;Roadmap.TRANSPARENT_LANE={title:"",color:{lane:"#ffffff",bar:"#ffffff",text:"#ffffff"}};Roadmap.DragDrop={};Roadmap.BarDialog={MAX_LENGTH_TITLE:100,MAX_LENGTH_DESCRIPTION:150};Roadmap.getDefaultRoadmapData=function(){var a=moment(new Date()).hours(0).minutes(0).seconds(0).milliseconds(0).toDate();var b=moment(a).add(11,"months").toDate();return{title:"Roadmap Planner",timeline:{startDate:new Date(a),endDate:b,displayOption:Roadmap.TIMELINE_DISPLAY_OPTION.MONTH},lanes:[{title:"Lane 1",color:Roadmap.COLORS[0],bars:[{title:"Bar 1",description:"This is the first bar.",startDate:new Date(a.setDate(1)),duration:2,rowIndex:0},{title:"Bar 2",description:"This is the second bar.",startDate:new Date(a),duration:1,rowIndex:1}]},{title:"Lane 2",color:Roadmap.COLORS[1],bars:[{title:"Bar 3",description:"This is the third bar.",startDate:a,duration:2.5,rowIndex:0}]}],markers:[{title:"Marker 1",markerDate:moment(a).date(15).toDate()}]}}})();
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-paste:paste-resources', location = 'js/clipboard-access.js' */
(function(){AJS.toInit(function(f){var d={initializeEditor:function(){AJS&&AJS.Rte&&AJS.Rte.BootstrapManager?AJS.Rte.BootstrapManager.addOnInitCallback(function(){var a=AJS.Rte.getEditor();a?window.MutationObserver&&!f.browser.webkit?(new MutationObserver(function(a){for(var b=0;b<a.length;b++){var c=a[b];if(c.addedNodes.length)for(var e=0;e<c.addedNodes.length;e++)if("img"===c.addedNodes[e].localName){setTimeout(d.pasteFromDataURL,0);return}}})).observe(a.getDoc(),{childList:!0,subtree:!0}):a.onPaste.add(function(a,
b){if(d.onPaste(b))return!0;tinymce.dom.Event.cancel(b);return!1}):AJS.log("Could not getEditor from adapter")}):AJS.log("Could not initialize pasteHandler on Confluence.Editor")},pasteFromDataURL:function(){var a=f('img[src^="data:image"]:not(".editor-inline-macro")',tinymce.activeEditor.getDoc());f.each(a,function(){for(var a=this.src.substring(22,this.src.length),b=3*a.length/4,c=0,e=a.length-1;"="==a[e];e--)c++;AJS.Confluence.Uploader.upload([d.createUploadFile(a,b-c,"base64")])});a.remove()},
onPaste:function(a){return a&&a.clipboardData?d.pasteFromEvent(a):!0},showClipboardAccessError:function(){(new AJS.Dialog({width:400,closeOnOutsideClick:!0})).addPanel("alert",f("<div />",{text:"Your browser does not support pasting images from the clipboard."})).addButton("OK",function(a){a.remove()}).show().updateHeight()},pasteFromEvent:function(a){if(a&&a.clipboardData){if(a.clipboardData.items){a=a.clipboardData.items[0];if(!a||"file"!=a.kind)return!0;a=a.getAsFile();
a=d.createUploadFile(a,a.size);AJS.Confluence.Uploader.upload([a]);return!1}setTimeout(function(a){var b=f("img[src^='webkit-fake-url://']",tinymce.activeEditor.getDoc());b.length&&(b.remove(),a.showClipboardAccessError())},0,this)}return!0},createUploadFile:function(a,d,b){var c=new Date,e=c.getMonth()+1;return{fileName:"image"+c.getFullYear()+"-"+e+"-"+c.getDate()+" "+c.getHours()+":"+c.getMinutes()+":"+c.getSeconds()+".png",fileSize:d,slice:function(b,c){return a.slice(b,b+c)},getAsBinary:function(){return a},
getData:function(){return a},encoding:b}}};d.initializeEditor(f);return d})})();
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-paste:autoconvert-confluence', location = 'js/autoconvert/transformers/confluencepaste.js' */
(function(){AJS.bind("init.rte",function(){tinymce.plugins.Autoconvert.autoConvert.addHandler(function(c,a,d){if(a=(a=c.authority===document.location.host)&&(!AJS.contextPath()||0===c.path.indexOf(AJS.contextPath()))){var a=AJS.contextPath()?c.path.substring(AJS.contextPath().length+1):c.path.substring(1),a=decodeURIComponent(a).split("/"),b;c.queryKey=c.queryKey||{};var e=function(a,b){return!b.anchor||0===b.anchor.indexOf("comment-")?a:a+"#"+b.anchor.substring(b.anchor.indexOf("-")+1)};c.queryKey.focusedCommentId?
(b="$"+c.queryKey.focusedCommentId,b=e(b,c)):c.queryKey.pageId?(b="$"+c.queryKey.pageId,b=e(b,c)):"display"===a[0]?2===a.length&&0===a[1].indexOf("~")?b=a[1]:3===a.length?(b=a[1]+":"+a[2].replace(/\+/g," "),b=e(b,c)):4===a.length&&"status"===a[1]?b="$"+a[3]:6===a.length&&(b=a[1]+":/"+a[2]+"/"+a[3]+"/"+a[4]+"/"+a[5].replace(/\+/g," "),b=e(b,c)):"users"==a[0]&&(2==a.length&&"viewuserprofile.action"==a[1]?b="~"+c.queryKey.username:2==a.length&&"viewmyprofile.action"==a[1]&&(b="~"+AJS.Meta.get("remote-user")));
b?tinymce.plugins.Autoconvert.getHtmlFromWikiMarkup("["+b+"]",function(a){d(AJS.$(a).children()[0])},function(){d()}):d()}else d()})})})();
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-paste:autoconvert-youtu.be-rewrite', location = 'js/autoconvert/transformers/youtube.js' */
(function(){AJS.bind("init.rte",function(){tinymce.plugins.Autoconvert.autoConvert.addHandler(function(a,c,b){a.host.match(".*youtu.be.*")?(a="http://youtube.com/watch?v="+a.path.substr(1),b(AJS.$(c).attr("href",a).html(a))):b()})})})();
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-paste:autoconvert-skitch', location = 'js/autoconvert/transformers/skitchpaste.js' */
(function(){AJS.bind("init.rte",function(){AJS.Editor.SkitchPaste={pasteHandler:function(b,d,c){"www.skitch.com"==b.host||"skitch.com"==b.host?AJS.$.get(AJS.params.contextPath+"/rest/autoconvert/1.0/skitchembed?url="+b.source,function(a){a&&a.url?c(AJS.$('<img class="confluence-embedded-image confluence-external-resource" src="'+a.url+'" data-image-src="'+a.url+'"/>')[0]):c()}):c()}};tinymce.plugins.Autoconvert.autoConvert.addHandler(AJS.Editor.SkitchPaste.pasteHandler)})})();
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-paste:autoconvert-cloudapp', location = 'js/autoconvert/transformers/cloudapppaste.js' */
(function(){AJS.bind("init.rte",function(){AJS.Editor.CloudAppPaste={pasteHandler:function(d,c,b){"cl.ly"==d.host?AJS.$.get(AJS.params.contextPath+"/rest/autoconvert/1.0/cloudappembed?resource="+d.path.substr(1),function(a){if(a)switch(a.item_type){case "image":a=AJS.escapeHtml(a.content_url);b(AJS.$('<img class="confluence-embedded-image confluence-external-resource" src="'+a+'" data-image-src="'+a+'"/>')[0]);break;case "bookmark":c.text(a.name),c.attr("href",AJS.escapeHtml(a.redirect_url)),b(c)}else b()}):
b()}};tinymce.plugins.Autoconvert.autoConvert.addHandler(AJS.Editor.CloudAppPaste.pasteHandler)})})();
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-paste:autoconvert-widget-connector', location = 'js/autoconvert/transformers/widgetpaste.js' */
AJS.bind("init.rte",function(){var d=[/youtube.com\/watch\?/,/vimeo.com\/[0-9]+/,/maps.google(.[a-z]+)+\/maps/,/[^\.]\.wufoo\.com\/(?:forms|reports)/];tinymce.plugins.Autoconvert.autoConvert.addHandler(function(a,b,c){a=decodeURI(a.source);for(b=0;b<d.length;b++)if(a.match(d[b])){tinymce.plugins.Autoconvert.convertMacroToDom({name:"widget",params:{url:a}},c,c);return}c()})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-paste:autoconvert-widget-connector', location = 'js/autoconvert/transformers/flickrpaste.js' */
(function(){AJS.bind("init.rte",function(){var d=/^\/photos\/tags\/[^/]+/,e=/^\/photos\/[^/]+\/sets\/[0-9]+/,f=/^\/photos\/[^/]+\/[0-9]+/;tinymce.plugins.Autoconvert.autoConvert.addHandler(function(c,a,b){c.host.match(/flickr.com/)?(a=decodeURIComponent(c.path),a.match(d)||a.match(e)||a.match(f)?(macro={name:"widget",params:{url:decodeURI(c.source)}},tinymce.plugins.Autoconvert.convertMacroToDom(macro,b,b)):b()):b()})})})();
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-paste:autoconvert-shortcut-links', location = 'js/autoconvert/transformers/shortcutlinks.js' */
(function(){AJS.bind("init.rte",function(){var e=[],h;h=AJS.contextPath()?AJS.contextPath():"";tinymce.plugins.Autoconvert.autoConvert.addHandler(function(a,c,f){if(a.source===c.text())for(var g=0;g<e.length;g++){var b=e[g],d=a.source.match(b.regex);if(d){a=d[1];if(b.defaultAlias){b=b.defaultAlias.replace(/%s/,a);f(AJS.$(c).text(b));return}f(AJS.$(c).text(a));return}}f()});setTimeout(function(){AJS.$.ajax({url:h+"/rest/autoconvert/latest/shortcutlinkconfigurations",type:"GET",dataType:"json",success:function(a){e=
a.configurations;for(a=0;a<e.length;a++){var c=e[a];try{var f=c,g=RegExp,b;var d=c.expandedValue;b=0<=d.indexOf("%s")?d.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&").replace("%s","(.*)"):d.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")+"(.*)";f.regex=new g(b)}catch(h){console.log("Failed to generated regex for "+c)}}},error:function(a){console.log("Failed to load shortcut link configurations "+a.statusText)}})},0)})})();
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-paste:autoconvert-google-redirect', location = 'js/autoconvert/transformers/google-redirect-convert.js' */
(function(){AJS.bind("init.rte",function(){tinymce.plugins.Autoconvert.autoConvert.addHandler(function(a,b,c){a.host.match(/google.*/)&&"/url"===a.path&&a.queryKey&&a.queryKey.url?(a=decodeURIComponent(a.queryKey.url),b=AJS.$(b),b.attr("href",a),b.attr("data-mce-href",a),b.text(a),c(b)):c()})})})();
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.browser.metrics.browser-metrics-plugin:browser-metrics', location = 'browser-metrics-legacy.js' */
(function(){var a=window.BrowserMetrics||{};var b=window.WRM||{};a.isFunction=function(c){return !!(c&&c.constructor&&c.call&&c.apply)};a.isEnabled=function(){if(a.enabled===undefined){var c="com.atlassian.plugins.browser.metrics.browser-metrics-plugin:browser-metrics.feature-data-provider-legacy";a.enabled=a.isFunction(b.data)?b.data(c):b.data.claim(c)}return a.enabled};window.BrowserMetrics=a}());(function(){var b=window.BrowserMetrics||{};if(b.isEnabled()){var f=5;var e=12000;var c=function(g){return Math.round(g)};var a=function(g){return Math.round(g*100)/100};var d=function(k){var h=(function(){var n=/^(\w+):\/\/([^\/]*)(.*)$/;return function(p){var o=p.match(n);if(!o){return{path:p}}return{scheme:o[1],host:o[2],path:o[3]}}}());var i=(function(){var n=["secureConnectionStart","requestStart","responseStart","responseEnd","domContentLoadedEventStart","domContentLoadedEventEnd","loadEventEnd"];return function(o){if(k.performance){var s=k.performance.timing;var p=s.navigationStart;if(p){for(var r=0;r<n.length;++r){var q=n[r];var t=s[q];if(t){o(q,t-p)}}}}}}());var g=(function(){var o=[{key:"LOGIN",pattern:/^\/login.*/i},{key:"J-DASH",pattern:/^\/secure\/dashboard\.jspa.*/i},{key:"J-ISSUE",pattern:/^\/browse\/\w+\-\w+.*/i},{key:"J-NAV",pattern:/^\/issues.*/i},{key:"J-RAPID",pattern:/secure\/rapidboard\.jspa/i},{key:"SD-AGENT",pattern:/^(\/\w+)?\/servicedesk\/agent\/.*/i},{key:"SD-CUSTOMER",pattern:/^(\/\w+)?\/servicedesk\/customer\/.*/i},{key:"C-DASH",pattern:/^\/wiki(\/)?(\?.*|#.*)?$/i},{key:"C-DASH",pattern:/^\/wiki\/dashboard\.action.*$/i},{key:"C-SPACE",pattern:/^\/wiki\/display\/\w+(\?.*|#.*)?$/i},{key:"C-PAGE",pattern:/^\/wiki\/display\/\w+\/.*/i},{key:"C-PAGE",pattern:/^\/wiki\/pages\/viewpage\.action.*/i},{key:"C-BLOG",pattern:/^\/wiki\/display\/~\w+\/\d+\/\d+\/\d+\/.*/i},{key:"C-EDITOR",pattern:/^\/wiki\/pages\/editpage\.action.*/i},{key:"C-CREATE",pattern:/^\/wiki\/pages\/createpage\.action.*/i}];return function n(){var r=h(k.location.href).path;for(var p=0;p<o.length;++p){var q=o[p];if(r.match(q.pattern)){return q.key}}return null}}());function j(){var n=g();if(n){i(function(p,r){var o="browser.metrics."+p,q={version:f,page:n,value:r>e?"x":Math.ceil((r)/100),rawValue:c(r)};AJS.Analytics?AJS.Analytics.triggerPrivacyPolicySafeEvent(o,q):AJS.trigger("analyticsEvent",{name:o,data:q})})}}function m(){try{j()}catch(n){if(window.console){window.console.log("Error reporting browser metrics: "+n)}}}function l(){if(k.performance.timing.loadEventEnd){m()}else{setTimeout(l,1000)}}if(k.performance&&k.performance.timing){l()}};if(!window.ATL_PERF){window.ATL_PERF={}}window.ATL_PERF.initPageLoad=d}}());(function(){var b=window.BrowserMetrics||{};if(b.isEnabled()){var e=5;var d=12000;var a=function(f){return Math.round(f*100)/100};var c=function(g){var l={};function h(){return g.performance&&g.performance.now?g.performance.now():new Date().getTime()}function n(o){return o===Object(o)}function k(o){if(n(o)){return o.eventName+"."+o.eventType}else{return o}}function m(o){if(n(o)){return o.eventName}else{return o}}function j(o){if(n(o)){return o.eventType}else{return""}}function f(o){var p=k(o);l[p]=h()}function i(r,u){var v=k(r);if(!l[v]){throw ("Error logging browser metrics event end: no start event for key '"+v+"'")}var t=h()-l[v];l[v]=null;var o=m(r),q=j(r);var p="browser.metrics.e."+o+(u?"."+u:""),s={version:e,value:t>d?"x":Math.ceil((t)/100),rawValue:a(t),eventType:q};g.AJS.Analytics?g.AJS.Analytics.triggerPrivacyPolicySafeEvent(p,s):g.AJS.trigger("analyticsEvent",{name:p,data:s})}return{start:f,end:i}};if(!window.ATL_PERF){window.ATL_PERF={}}window.ATL_PERF.initEvents=c}}());(function(){var a=window.BrowserMetrics||{};if(a.isEnabled()){if(Math.random()<0.1){window.ATL_PERF&&window.ATL_PERF.initPageLoad&&window.ATL_PERF.initPageLoad(window)}window.ATL_PERF&&window.ATL_PERF.initEvents&&(function(){window.BrowserMetrics=window.ATL_PERF.initEvents(window)}())}}());
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:jira-resources', location = 'com/atlassian/confluence/extra/calendar3/lib/jira/globals.js' */
if(!window.JIRA){window.JIRA={}}if(!window.JIRA.begetObject){window.JIRA.begetObject=function(b){var a=function(){};a.prototype=b;return new a()}};
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:jira-resources', location = 'com/atlassian/confluence/extra/calendar3/lib/jira/Dropdown.js' */
JIRA.Dropdown=function(){var a=[];return{addInstance:function(){a.push(this)},hideInstances:function(){var b=this;jQuery(a).each(function(){if(b!==this){this.hideDropdown()}})},getHash:function(){if(!this.hash){this.hash={container:this.dropdown,hide:this.hideDropdown,show:this.displayDropdown}}return this.hash},displayDropdown:function(){if(JIRA.Dropdown.current===this){return}this.hideInstances();JIRA.Dropdown.current=this;this.dropdown.css({display:"block"});this.displayed=true;var b=this.dropdown;setTimeout(function(){var d=jQuery(window);var c=b.offset().top+b.attr("offsetHeight")-d.height()+10;if(d.scrollTop()<c){jQuery("html,body").animate({scrollTop:c},300,"linear")}},100)},hideDropdown:function(){if(this.displayed===false){return}JIRA.Dropdown.current=null;this.dropdown.css({display:"none"});this.displayed=false},init:function(b,d){var c=this;this.addInstance(this);this.dropdown=jQuery(d);this.dropdown.css({display:"none"});jQuery(document).keydown(function(f){if(f.keyCode===9){c.hideDropdown()}});if(b.target){jQuery.aop.before(b,function(){if(!c.displayed){c.displayDropdown()}})}else{c.dropdown.css("top",jQuery(b).outerHeight()+"px");b.click(function(f){if(!c.displayed){c.displayDropdown();f.stopPropagation()}else{c.hideDropdown()}f.preventDefault()})}jQuery(document.body).click(function(){if(c.displayed){c.hideDropdown()}})}}}();JIRA.Dropdown.Standard=function(a,c){var b=JIRA.begetObject(JIRA.Dropdown);b.init(a,c);return b};JIRA.Dropdown.AutoComplete=function(a,c){var b=JIRA.begetObject(JIRA.Dropdown);b.init=function(d,e){this.addInstance(this);this.dropdown=jQuery(e).click(function(f){f.stopPropagation()});this.dropdown.css({display:"none"});if(d.target){jQuery.aop.before(d,function(){if(!b.displayed){b.displayDropdown()}})}else{d.click(function(f){if(!b.displayed){b.displayDropdown();f.stopPropagation()}})}jQuery(document.body).click(function(){if(b.displayed){b.hideDropdown()}})};b.init(a,c);return b};
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:jira-resources', location = 'com/atlassian/confluence/extra/calendar3/lib/jira/JiraAutoComplete.js' */
JIRA.AutoComplete=function(){var c;var b=function(e,d){if(b.t){clearTimeout(b.t);b.t=undefined}b.t=setTimeout(e,d*1000)};var a={9:true,13:true,14:true,25:true,27:true,38:true,40:true,224:true};return{dispatcher:function(){},getSavedResponse:function(){},saveResponse:function(){},renderSuggestions:function(){},disable:function(){this.disabled=true},enable:function(){this.disabled=false},set:function(e){for(var d in e){if(e.hasOwnProperty(d)){this[d]=e[d]}}},completeField:function(d){if(d){this.field.val(d).focus()}},textToSuggestionCursorPosition:function(){return this.field.val()},_makeRequest:function(d){var e=this,f=AJS.$.extend({},d);if(this.pendingRequest){this.pendingRequest.abort()}f.complete=function(){e.pendingRequest=null};f.error=function(g){if(!g.aborted&&g.status!==0&&d.error){d.error.apply(this,arguments)}};f.timeout=Confluence.TeamCalendars.ajaxTimeout;return this.pendingRequest=AJS.$.ajax(f)},addSuggestionControls:function(h){var m=this;var l=function(q,i){var r=(m.autoSelectFirst===false)?-1:0;if(m.allowArrowCarousel){if(q>i){return r}else{if(q<r){return i}else{return q}}}else{if(q>i){return i}else{if(q<r){m.responseContainer.scrollTop(0);return r}else{return q}}}};var d=function(i){if(m.selectedIndex!==undefined&&m.selectedIndex>-1){m.suggestionNodes[m.selectedIndex][0].removeClass("active")}m.selectedIndex=l(i,m.suggestionNodes.length-1);if(m.selectedIndex>-1){m.suggestionNodes[m.selectedIndex][0].addClass("active")}};var p=function(){return m.suggestionNodes&&m.suggestionNodes[m.selectedIndex]&&m.suggestionNodes[m.selectedIndex][0].hasClass("active")};var n=function(i){if(m.responseContainer.is(":visible")){if(i.keyCode===13){if(p()&&!m.pendingRequest){m.completeField(m.suggestionNodes[m.selectedIndex][1])}i.preventDefault()}}};var g=function(s){if(m.responseContainer.is(":visible")){if(m.field[0]!==document.activeElement){m.field.focus()}if(s.keyCode===40){d(m.selectedIndex+1);if(m.selectedIndex>=0){var q=m.responseContainer.height();var i=m.suggestionNodes[m.selectedIndex][0].position().top+m.suggestionNodes[m.selectedIndex][0].outerHeight();if(i-q>0){m.responseContainer.scrollTop(m.responseContainer.scrollTop()+i-q+2)}}else{m.responseContainer.scrollTop(0)}s.preventDefault()}else{if(s.keyCode===38){d(m.selectedIndex-1);if(m.selectedIndex>=0){var r=m.suggestionNodes[m.selectedIndex][0].position().top;if(r<0){m.responseContainer.scrollTop(m.responseContainer.scrollTop()+r-2)}}s.preventDefault()}else{if(s.keyCode===9){if(p()){m.completeField(m.suggestionNodes[m.selectedIndex][1]);s.preventDefault()}else{m.dropdownController.hideDropdown()}}}}}};if(h.length){this.selectedIndex=0;this.suggestionNodes=h;for(var k=0;k<m.suggestionNodes.length;k++){var o={instance:this,index:k};this.suggestionNodes[k][0].bind("mouseover",o,j).bind("mouseout",o,f).bind("click",o,e)}if(!this.keyboardHandlerBinded){jQuery(this.field).keypress(n);if(jQuery.browser.mozilla){jQuery(this.field).keypress(g)}else{jQuery(this.field).keydown(g)}this.keyboardHandlerBinded=true}if(m.autoSelectFirst===false){d(-1)}else{d(0)}c=this}function j(i){if(m.dropdownController.displayed){d(i.data.index)}}function f(i){if(i.data.index===0){m.selectedIndex=-1}jQuery(this).removeClass("active")}function e(i){m.completeField(m.suggestionNodes[i.data.index][1])}},clearResponseContainer:function(){this.responseContainer.empty();this.suggestionNodes=undefined},delay:b,buildResponseContainer:function(){var d=this.field.parent().addClass("atlassian-autocomplete");this.responseContainer=jQuery(document.createElement("div"));this.responseContainer.addClass("suggestions").css({top:this.field.outerHeight()+"px"}).appendTo(d)},keyUpHandler:(function(){var d=jQuery.browser.msie&&jQuery.browser.version==8;function e(){if(!this.responseContainer){this.buildResponseContainer()}this.dispatcher(this.field.val())}return function(f){if(this.field.val().length>=this.minQueryLength){if(!(f.keyCode in a)||(this.responseContainer&&!this.responseContainer.is(":visible")&&(f.keyCode==38||f.keyCode==40))){if(d){b(jQuery.proxy(e,this),0.2)}else{e.call(this)}}}return f}})(),addMultiSelectAdvice:function(f){var e=this;var d=function(h){if(!d.isAlerting){d.isAlerting=true;var g=jQuery(document.createElement("div")).css({"float":"left",display:"none"}).addClass("warningBox").html("Oops! You have already entered the value <em>"+h+"</em>").appendTo(e.field.parent()).show("fast",function(){e.delay(function(){g.hide("fast",function(){g.remove();d.isAlerting=false})},4)})}};jQuery.aop.before({target:this,method:"dispatcher"},function(h){var g=this.field.val();h[0]=jQuery.trim(g.slice(g.lastIndexOf(f)+1));return h});jQuery.aop.before({target:this,method:"completeField"},function(h){var j=h[0],i=this.field.val().split(f);var g=jQuery(i).map(function(){return jQuery.trim(this)}).get();if(!this.allowDuplicates&&new RegExp("(?:^|[\\s"+f+"])"+j+"\\s*"+f).test(this.field.val())){d(j);g[g.length-1]=""}else{g[g.length-1]=j;g[g.length]=""}h[0]=g.join(f.replace(/([^\s]$)/,"$1 "));return h})},addDropdownAdvice:function(){var d=this;jQuery.aop.after({target:this,method:"buildResponseContainer"},function(e){this.dropdownController=JIRA.Dropdown.AutoComplete({target:this,method:"renderSuggestions"},this.responseContainer);if(AJS.$.browser.msie){jQuery.aop.before({target:this.dropdownController,method:"displayDropdown"},function(){d.field.parent().addClass("atlassian-autocomplete")});jQuery.aop.after({target:this.dropdownController,method:"hideDropdown"},function(){d.field.parent().removeClass("atlassian-autocomplete")})}jQuery.aop.after({target:this.dropdownController,method:"hideDropdown"},function(){this.dropdown.removeClass("dropdown-ready")});return e});jQuery.aop.after({target:this,method:"renderSuggestions"},function(e){if(e&&e.length>0){this.dropdownController.displayDropdown();if(this.maxHeight&&this.dropdownController.dropdown.attr("scrollHeight")>this.maxHeight){this.dropdownController.dropdown.css({height:this.maxHeight,overflowX:"visible",overflowY:"scroll"})}else{if(this.maxHeight){this.dropdownController.dropdown.css({height:"",overflowX:"",overflowY:""})}}this.dropdownController.dropdown.addClass("dropdown-ready")}else{this.dropdownController.hideDropdown()}return e});jQuery.aop.after({target:this,method:"completeField"},function(e){this.dropdownController.hideDropdown();return e});jQuery.aop.after({target:this,method:"keyUpHandler"},function(f){if((!(this.field.val().length>=this.minQueryLength)||f.keyCode===27)&&this.dropdownController&&this.dropdownController.displayed){this.dropdownController.hideDropdown();if(f.keyCode===27){f.stopPropagation()}}return f})},init:function(d){var e=this;this.set(d);this.field=this.field||jQuery("#"+this.fieldID);this.field.attr("autocomplete","off").keyup(function(f){if(!e.disabled){e.keyUpHandler(f)}}).keydown(function(g){var f=27;if(g.keyCode===f&&e.responseContainer&&e.responseContainer.is(":visible")){g.preventDefault()}}).click(function(f){if(c===e){f.stopPropagation()}}).blur(function(){if(e.pendingRequest){e.pendingRequest.abort()}});this.addDropdownAdvice();if(d.delimChar){this.addMultiSelectAdvice(d.delimChar)}}}}();
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:jira-resources', location = 'com/atlassian/confluence/extra/calendar3/lib/jira/JQLAutoComplete.js' */
(function(){var F=[{value:"=",displayName:"="},{value:"!=",displayName:"!="},{value:"~",displayName:"~"},{value:"<=",displayName:"&lt;="},{value:">=",displayName:"&gt;="},{value:">",displayName:"&gt;"},{value:"<",displayName:"&lt;"},{value:"!~",displayName:"!~"},{value:"is not",displayName:"is not"},{value:"is",displayName:"is"},{value:"not in",displayName:"not in"},{value:"in",displayName:"in"},{value:"was",displayName:"was"},{value:"was not",displayName:"was not"},{value:"was in",displayName:"was in"},{value:"was not in",displayName:"was not in"},{value:"changed",displayName:"changed"}];var o=[{value:"AND",displayName:"AND"},{value:"OR",displayName:"OR"}];var x=[{value:"AND",displayName:"AND"},{value:"OR",displayName:"OR"},{value:"ORDER BY",displayName:"ORDER BY"}];var s=[{value:"ASC",displayName:"ASC"},{value:"DESC",displayName:"DESC"}];var t=[{value:"EMPTY",displayName:"EMPTY",types:["java.lang.Object"]}];var E=[{value:"NOT",displayName:"NOT"}];var i=[{value:"AFTER",displayName:"AFTER",type:"java.util.Date",supportsList:"false"},{value:"BEFORE",displayName:"BEFORE",type:"java.util.Date",supportsList:"false"},{value:"BY",displayName:"BY",type:"com.opensymphony.user.User",supportsList:"false",auto:"true"},{value:"DURING",displayName:"DURING",type:"java.util.Date",supportsList:"true"},{value:"ON",displayName:"ON",type:"java.util.Date",supportsList:"false"}];var n=i.concat([{value:"FROM",displayName:"FROM",type:"java.lang.String",supportsList:"true",auto:"true"},{value:"TO",displayName:"TO",type:"java.lang.String",supportsList:"true",auto:"true"}]);var y=i.concat(x);var k=i.concat(o);var v=n.concat(x);var p=n.concat(o);var h=/^AND\s/i;var A=/^OR\s/i;var e=/^NOT\s/i;var w=/^\s+not/i;var d=/^\s+in/i;var m=/^\s+(not\s+in|not|in)/i;var u=/^\s*,/;var r=/^\s+asc/i;var H=/^\s+desc/i;var l=/^order\s+by/i;var D=/^\s/;var g=/^u[a-fA-F0-9]{4}/;var z=/^\s-\scf\[\d\d\d\d\d\]/;var c=/[\r\n]/;var a=/\d/;var G=/[^=!~<>(),\s&|]/;var f=/[{}*\/%+$#@?.;\][]/;var b=/[\s(]/;var C=/[^trn"'\\\s]/;var q=/^NO?$/i;var B=/^IN?$/i;var j=/^(after|before|by|during|from|on|to)/i;JIRA.JQLAutoComplete=function(T){var N=JIRA.begetObject(JIRA.AutoComplete);var I=T.parser;var U;var J=jQuery.grep(T.jqlFieldNames,function(V){return V.searchable});var P=jQuery.grep(T.jqlFieldNames,function(V){return V.orderable});var R=T.jqlFunctionNames;var M=jQuery("#"+T.errorID);var Q=0;var K=jQuery("#jqlcolumnnum");var S=jQuery("#jqlrownum");var L=T.jiraApplicationId;var O=T.baseUrl;N.textToSuggestionCursorPosition=function(){return this.field.selectionRange().textBefore};N.pushSuggestionsOnHtmlStack=function(ab,Z,ac,Y,V){var X=Math.min(15,ab.length);for(var aa=0;aa<X;aa++){var W;var ae;if(ab[aa].value){var ad=ab[aa];if(U&&V){W=((U.getNeedsOpenParen())?"(":"")+ad.value}else{W=ad.value}ae=ad.displayName}else{ae=ab[aa];W=displayName}Z.push(W);ac.push('<li id="',Y,aa,'">',ae,"</li>")}};N.renderSuggestions=function(W,Y,V){var Z=[];if(W instanceof Array){if(W.length<1&&(Y&&Y.length<1)&&(V&&V.length<1)){return Z}var X=["<ul>"];if(V&&V.length>0){N.pushSuggestionsOnHtmlStack(V,Z,X,"jql_operator_suggest_",false)}N.pushSuggestionsOnHtmlStack(W,Z,X,"jql_value_suggest_",true);if(Y&&Y.length>0){N.pushSuggestionsOnHtmlStack(Y,Z,X,"jql_function_suggest_",false)}X.push("</ul>");N.responseContainer.html(X.join("")).find("li").each(function(aa){Z[aa]=[jQuery(this),Z[aa]]});N.addSuggestionControls(Z)}return Z};N.completeField=function(X){var Y=N.getReplacementStartIndex(U,X);var V=N.getReplacementEndIndex(U,Y);N.replaceValue(Y,V,X);var W=I.parse(this.field.val());N.updateParseIndicator(W)};N.prepareOperandSuggestions=function(aa,ad,ac,Y,Z){if(aa){var W=Q;var V=(Z==null)?((U.getLastOperand()===null)?"":N.stripEscapeCharacters(U.getLastOperand())):Z;var ab=ad+":"+V;var X={fieldName:N.stripEscapeCharacters(ad)};if(U.getLastOperand()!==null||Z!==null){X.fieldValue=V}if(!N.getSavedResponse(ab)){N.dropdownController.dropdown.removeClass("dropdown-ready");this.delay(function(){N._makeRequest({url:O+"/rest/calendar-services/1.0/jira/"+encodeURIComponent(L)+"/jql/autocomplete.json",dataType:"json",data:X,success:function(ae){var af;if(ae!==null&&ae.results!==null){af=ae.results}else{af=[]}N.saveResponse(ab,af);N.renderSuggestionsForOperands(V,af,ac,Y,W)},error:function(){N.renderSuggestionsForOperands(V,[],ac,Y,W)}})},N.queryDelay)}else{N.renderSuggestionsForOperands(V,N.getSavedResponse(ab),ac,Y,W)}}else{N.renderSuggestionsForOperands(N.stripEscapeCharacters(U.getLastOperand()),[],ac,Y,Q)}};N.preparePredicateSuggestions=function(ab,V){var Z=Q;if(typeof V=="undefined"){V=null}var Y=N.slimListForPredicates(V,R,ab);N.boldMatchingString(V,Y);var W=(V==null)?((U.getLastOperand()===null)?"":N.stripEscapeCharacters(U.getLastOperand())):V;var aa=ab+":"+W;var X={predicateName:N.stripEscapeCharacters(ab)};if(U.getLastOperand()!==null||V!==null){X.predicateValue=W}if(U.getLastFieldName()!==null){X.fieldName=U.getLastFieldName();aa=U.getLastFieldName()+":"+aa}if(N.predicateSupportsAutoComplete(ab)){if(!N.getSavedResponse(aa)){N.dropdownController.dropdown.removeClass("dropdown-ready");this.delay(function(){N._makeRequest({url:O+"/rest/calendar-services/1.0/jira/"+encodeURIComponent(L)+"/jql/autocomplete.json",dataType:"json",data:X,success:function(ac){var ad;if(ac!==null&&ac.results!==null){ad=ac.results}else{ad=[]}N.saveResponse(aa,ad);N.renderSuggestions(ad,Y)},error:function(){N.renderSuggestionsForOperands(W,[])}})},N.queryDelay)}else{N.renderSuggestions(N.getSavedResponse(aa),Y)}}else{N.renderSuggestions([],Y)}};N.incompleteOperator=function(){var V=U.getTokens();if(V==null||V.length<2){return""}else{var V=N.textToSuggestionCursorPosition().split(" ");if(V.length>2){return V[V.length-1]}}return""};N.incompletePredicateValue=function(){var V=U.getTokens();if(V==null||V.length<3){return""}else{var V=N.textToSuggestionCursorPosition().split(/[\s(,]+/);if(V.length>3){return V[V.length-1]}}return""};N.dispatcher=function(X){var af=this;var V=jQuery(af.field).selectionRange();var ad=X.substring(0,V.start);U=I.parse(ad).getResult();Q++;if(U.getNeedsField()){af.renderSuggestionsFromMap(af.stripEscapeCharacters(U.getLastFieldName()),J,E,true)}else{if(U.getNeedsOperatorOrOperand()){var W=U.getLastOperator();var Z=W.length;var Y=(W.length>0)?ad.substr(U.getLastOperatorStartIndex()):null;var ai=(af.isEmptyOnlyOperator(U.getLastOperator()))?t:R;var ac=af.getSuggestionsForOperators(Y,F);if(Z>0){var ab=W.length-(W.replace(/\s+/g,"")).length;U.setLastOperandStartIndex(U.getLastOperatorStartIndex()+Z+ab+1)}if(ac&&ac.length>0){var ag=U.getTokens();var ah=af.incompleteOperator();af.prepareOperandSuggestions(true,U.getLastFieldName(),ai,ac,ah)}}else{if(U.getNeedsOperator()){af.renderSuggestionsForOperators(U.getLastOperator(),F)}else{if(U.getNeedsPredicateOperand()){var ak=U.getLastWasPredicate();af.preparePredicateSuggestions(ak,af.stripEscapeCharacters(U.getLastOperand()))}else{if(U.getNeedsLogicalOperator()){if(U.getNeedsWasPredicate()){if(U.getNeedsOrderBy()){var aj=(U.getLastOrderBy()===null)?U.getLastWasPredicate():U.getLastOrderBy();if(U.getLastOperator()=="was"){af.renderSuggestionsFromMap(aj,y,false)}else{af.renderSuggestionsFromMap(aj,v,false)}}else{if(U.getLastOperator()=="was"){af.renderSuggestionsFromMap(U.getLastWasPredicate(),k,false)}else{af.renderSuggestionsFromMap(U.getLastWasPredicate(),p,false)}}}else{if(U.getNeedsOrderBy()){var aj=(U.getLastOrderBy()===null)?U.getLastLogicalOperator():U.getLastOrderBy();af.renderSuggestionsFromMap(aj,x,false)}else{af.renderSuggestionsFromMap(U.getLastLogicalOperator(),o,false)}}}else{if(U.getNeedsOrderByField()){af.renderSuggestionsFromMap(af.stripEscapeCharacters(U.getLastOrderByFieldName()),P,true)}else{if(U.getNeedsOrderByDirection()){af.renderSuggestionsFromMap(U.getLastOrderByDirection(),s,false)}else{if(U.getNeedsOperand()){var al=U.getLastFieldName();var ae=false;if(!af.isEmptyOnlyOperator(U.getLastOperator())){for(var aa=0;aa<J.length;aa++){if(af.equalsIgnoreCase(U.getUnquotedString(J[aa].value),al)||(J[aa].cfid&&af.equalsIgnoreCase(J[aa].cfid,al))){ae=J[aa].auto;break}}}var ai=(af.isEmptyOnlyOperator(U.getLastOperator()))?t:R;af.prepareOperandSuggestions(ae,al,ai,{})}else{af.dropdownController.hideDropdown()}}}}}}}}af.parse(X)};N.stripEscapeCharacters=function(Y){if(Y==null){return Y}var V="";var X=Y.split("");for(var W=0;W<X.length;W++){if(X[W]=="\\"){if(!g.test(Y.substring(W,Y.length))){W++;if(W>=Y.length){break}}}V+=X[W]}return V};N.parse=function(W){var V=I.parse(W);N.updateParseIndicator(V);N.updateColumnLineCount();return V.getResult()};N.renderSuggestionsFromMap=function(W,Y,X,Z){if(!X){X={}}var V=N.slimListForMapResults(W,Y,Z);var aa=N.slimListForMapResults(W,X,Z);N.boldMatchingString(W,aa);N.boldMatchingString(W,V);N.renderSuggestions(V,aa);if(V.length===0&&aa.length===0){N.dropdownController.hideDropdown()}};N.getSuggestionsForOperators=function(W,Z){var V=N.slimListForMapResults(W,Z,false);var aa=U.getLastFieldName();var Y;for(var X=0;X<J.length;X++){if(N.equalsIgnoreCase(U.getUnquotedString(J[X].value),aa)||(J[X].cfid&&N.equalsIgnoreCase(J[X].cfid,aa))){Y=J[X].operators;break}}if(Y){V=jQuery.grep(V,function(ab){return jQuery.inArray(ab.value,Y)>-1})}N.boldMatchingString(W,V);return V};N.renderSuggestionsForOperators=function(W,X){var V=N.getSuggestionsForOperators(W,X);N.renderSuggestions(V);if(V.length===0){N.dropdownController.hideDropdown()}};N.renderSuggestionsForOperands=function(W,X,Z,V,aa){if(aa===Q){var Y=N.slimListForFunctionResults(W,Z,U.getLastOperator());N.boldMatchingString(W,Y);N.renderSuggestions(X,Y,V);if(X.length===0&&Y.length===0&&V.length==0){N.dropdownController.hideDropdown()}}};N.boldMatchingString=function(W,Z){if(W==null||Z.length===0){return}var aa=W.length;for(var X=0,ab=aa;X<ab;X++){switch(W.charAt(X)){case"<":case">":aa+=3;break;case"&":aa+=4;break;case'"':aa+=5;break}}for(var Y=0;Y<Z.length;Y++){if(Z[Y].displayName){var V=Z[Y].displayName;Z[Y]={value:Z[Y].value,displayName:"<b>"+V.substring(0,aa)+"</b>"+V.substring(aa)}}else{Z[Y]={value:Z[Y],displayName:"<b>"+Z[Y].substring(0,aa)+"</b>"+Z[Y].substring(aa)}}}};N.htmlEscape=function(W){if(W==null){return null}var V="";var Y=W.split("");for(var X=0;X<Y.length;X++){if(Y[X]==="<"){V+="&lt;"}else{if(Y[X]===">"){V+="&gt;"}else{if(Y[X]==="&"){V+="&amp;"}else{if(Y[X]==='"'){V+="&quot;"}else{V+=Y[X]}}}}}return V},N.getReplacementStartIndex=function(V,W){var X=jQuery(this.field);var Y;if(V.getNeedsField()){Y=V.getLastFieldNameStartIndex()}else{if(V.getNeedsOperatorOrOperand()){if(V.getNeedsOperator()&&N.isWasOperator(W)){Y=V.getLastOperatorStartIndex()}else{Y=V.getLastOperandStartIndex()}}else{if(V.getNeedsOperand()){Y=V.getLastOperandStartIndex()}else{if(V.getNeedsOperator()){Y=V.getLastOperatorStartIndex()}else{if(V.getNeedsOrderByField()){Y=V.getLastOrderByFieldNameStartIndex()}else{if(V.getNeedsOrderByDirection()){Y=V.getLastOrderByDirectionStartIndex()}else{if(V.getNeedsPredicateOperand()){Y=V.getLastOperandStartIndex()}else{if(V.getNeedsLogicalOperator()){if(V.getLastLogicalOperatorStartIndex()!==null&&V.getLastLogicalOperatorStartIndex()!==0){Y=V.getLastLogicalOperatorStartIndex()}else{if(V.getLastOrderBy()!==null&&V.getLastOrderByStartIndex()!==0){Y=V.getLastOrderByStartIndex()}else{if(V.getLastWasPredicate()!=null&&V.getLastWasPredicateStartIndex()!==0){Y=V.getLastWasPredicateStartIndex()}else{if(V.getMustBeOperatorOrPredicate()===true){Y=X.selectionRange().start}else{Y=X.selectionRange().start-1}}}}}else{if(V.getNeedsWasPredicate()){Y=V.getLastWasPredicateStartIndex()}else{Y=X.selectionRange().start-1}}}}}}}}}return Y!=null?Y:X.selectionRange().start};N.getReplacementEndIndex=function(ah,V){var ag=jQuery(this.field);var W=ag.selectionRange();var Z=null;if(W.start===W.end&&W.end!==this.field.val().length){var aa=ah.getTokens().length-1;var Y=I.parse(this.field.val());if(!Y.getParseError()){var X=Y.getResult().getTokens()[aa];if(X!==null&&X!=="("&&X!==")"){var af=this.field.val();var ac=af.substring(V,af.length);var ae=ac.split("");var ad=0;for(var ab=0;ab<ae.length;ab++){if(D.test(ae[ab])){ad++}else{break}}Z=V+X.length+ad}}}if(Z===null){Z=W.end}if(Z<V){N.replaceValue(V,Z," ");Z=V}return Z};N.replaceValue=function(Z,V,Y){var X=jQuery(this.field);X.selectionRange(Z,V);X.selection(Y);var W=X.selectionRange().end;X.selectionRange(W,W)};N.slimListForMapResults=function(V,Y,Z){var X=N.htmlEscape(V);var W=jQuery.grep(Y,function(aa){return N.startsWithIgnoreCaseNullsMeanAll(X,aa.displayName)});if(!Z){if(W.length===1&&!N.startsWithNotEqualsIgnoreCaseNullMeansAll(X,W[0].displayName)){return{}}}return W};N.slimListForFunctionResults=function(V,aa,X){var ab=U.getLastFieldName();var Z;for(var Y=0;Y<J.length;Y++){if(N.equalsIgnoreCase(U.getUnquotedString(J[Y].value),ab)||(J[Y].cfid&&N.equalsIgnoreCase(J[Y].cfid,ab))){Z=J[Y].types;break}}var W=jQuery.grep(aa,function(ac){if((ac.isList&&!N.isListSupportingOperator(X))||(!ac.isList&&N.isListSupportingOperator(X))){return false}if(Z){var ae=jQuery.inArray("java.lang.Object",ac.types)>-1||jQuery.inArray("java.lang.Object",Z)>-1;for(var ad=0;ad<Z.length&&!ae;ad++){ae=jQuery.inArray(Z[ad],ac.types)!==-1}if(!ae){return false}}else{return false}return N.startsWithIgnoreCaseNullsMeanAll(V,ac.value)||N.startsWithIgnoreCaseNullsMeanAll(V,ac.displayName)});if(W.length===1&&!N.startsWithNotEqualsIgnoreCaseNullMeansAll(V,W[0].displayName)){return{}}return W};N.slimListForPredicates=function(Y,ab,W){var V;var X;for(var aa=0;aa<n.length;aa++){if(N.equalsIgnoreCase(U.getUnquotedString(n[aa].value),W)){V=n[aa].type;X=n[aa].supportsList;break}}var Z=jQuery.grep(ab,function(ac){if(typeof ac.isList!="undefined"){if((ac.isList&&!!X)||(!ac.isList&&X)){return false}}var ad=jQuery.inArray(V,ac.types)!==-1;return ad?N.startsWithIgnoreCaseNullsMeanAll(Y,ac.value)||N.startsWithIgnoreCaseNullsMeanAll(Y,ac.displayName):false});if(Z.length===1&&!N.startsWithNotEqualsIgnoreCaseNullMeansAll(Y,Z[0].displayName)){return{}}return Z};N.predicateSupportsAutoComplete=function(V){var X;for(var W=0;W<n.length;W++){if(N.equalsIgnoreCase(U.getUnquotedString(n[W].value),V)){X=n[W].auto;break}}return X};N.isListSupportingOperator=function(V){return V==="in"||V==="not in"||V=="was not in"||V=="was in"};N.isEmptyOnlyOperator=function(V){return V==="is"||V==="is not"};N.isWasOperator=function(V){return V==="was"||V==="was in"||V=="was not in"||V=="was not"};N.isChangedOperator=function(V){return V==="changed"};N.startsWithIgnoreCaseNullsMeanAll=function(V,W){if(W===null||V===null){return true}if(W.length<V.length){return false}else{return V.toLowerCase()==W.substr(0,V.length).toLowerCase()}};N.startsWithNotEqualsIgnoreCaseNullMeansAll=function(V,Y){if(Y===null||V===null){return true}if(Y.length<V.length){return false}else{var W=V.toLowerCase()==Y.substr(0,V.length).toLowerCase();if(W){var X=null;if(z.test(Y.substr(V.length,Y.length))){X=Y.substr(0,V.length)}else{X=Y}return V.toLowerCase()!=X.toLowerCase()}return false}};N.equalsIgnoreCase=function(W,V){if(W===null&&V===null){return true}else{if(W===null||W===null){return false}else{return W.toLowerCase()===V.toLowerCase()}}};N.getSavedResponse=function(V){if(!this.requested){this.requested={}}return this.requested[V]};N.saveResponse=function(W,V){if(typeof W==="string"&&typeof V==="object"){if(!this.requested){this.requested={}}this.requested[W]=V}};N.startsWithIgnoreCase=function(V,W){if(W===null||V===null||W.length<V.length){return false}else{return V.toLowerCase()==W.substr(0,V.length).toLowerCase()}};N.updateParseIndicator=function(V){if(V.getParseError()){M.attr("title",V.getResult().getParseErrorMsg()).removeClass("jqlgood").addClass("jqlerror")}else{M.attr("title","").removeClass("jqlerror").addClass("jqlgood")}};N.updateColumnLineCount=function(){var aa=jQuery(N.field);var Z=0;if(N.field[0]===document.activeElement){var ab=aa.selectionRange();Z=ab.start}else{Z=N.field[0].value.length}var V=1;var X=1;var Y=N.field.val();for(var W=0;W<Z;W++){if(c.test(Y.charAt(W))){V++;X=1}else{X++}}K.text(X);S.text(V)};N.init(T);return N};JIRA.JQLAutoComplete.MyParser=function(J){var I=J;return{parse:function(K){var L=JIRA.JQLAutoComplete.Token();L.init(K);this.jql(L);return L},orderByClause:function(L){var M=L.remainingString();var N=M.match(l);if(N){var K=M.substring(0,N[0].length);L.consumeCharacters(K.length);L.getResult().setLastOrderBy(K,L);if(!L.isComplete()){M=L.remainingString();if(D.test(M)){this.chewWhitespace(L);this.orderByFields(L)}else{L.getResult().resetLogicalOperators();L.setParseError()}}else{L.getResult().resetLogicalOperators();L.setParseError()}}else{L.consumeCharacters(M.length);L.getResult().setLastOrderBy(M,L);L.setParseError()}},orderByFields:function(K){this.orderByField(K);this.chewWhitespace(K);if(K.isComplete()){if(!K.getResult().getNeedsOrderByField()){K.getResult().setLastOrderByDirection("",K)}}else{var L=K.remainingString();if(this.startsWithIgnoreCase(",",L)){K.consumeCharacter();this.orderByFields(K);this.chewWhitespace(K)}else{L=K.remainingString();if(L!==null){K.consumeCharacters(L.length)}K.getResult().setNeedsOrderByDirection();K.getResult().setLastOrderByDirection(L,K);K.setParseError()}}},orderByField:function(K){this.chewWhitespace(K);var M=this.fieldName(K);if(M.length!==0){K.getResult().setLastOrderByFieldName(M,K);var L=K.remainingString();if(!K.isComplete()&&!u.test(L)){if(r.test(L)){this.chewWhitespace(K);K.consumeCharacters(3);K.getResult().setLastOrderByDirection("asc",K);K.getResult().setNeedsOrderByComma()}else{if(H.test(L)){this.chewWhitespace(K);K.consumeCharacters(4);K.getResult().setLastOrderByDirection("desc",K);K.getResult().setNeedsOrderByComma()}else{K.getResult().setNeedsOrderByDirection()}}}else{K.getResult().setNeedsOrderByField();this.chewWhitespace(K)}}else{K.getResult().setLastOrderByFieldName("",K);K.getResult().setNeedsOrderByField();K.setParseError()}},jql:function(K){this.orClause(K);var L=K.remainingString();if(this.startsWithIgnoreCase("ord",L)){this.orderByClause(K)}},orClause:function(K){while(!K.isComplete()&&!this.startsWithIgnoreCase(")",K.remainingString())){this.chewWhitespace(K);var L=K.remainingString();if(this.startsWithIgnoreCase("ord",L)){break}if(K.getResult().getMustBeOperatorOrPredicate()){K.getResult().resetLastPredicates()}else{K.getResult().resetLogicalOperators();this.andClause(K)}if(!K.isComplete()&&K.getResult().getLastLogicalOperator()===null){if(K.getResult().getNeedsWasPredicate()){this.predicateClause(K)}if(K.isComplete()){return}L=K.remainingString();if(this.startsWithIgnoreCase("ord",L)){break}else{if(L!==null&&(A.test(L)||this.startsWithIgnoreCase("|",L)||this.startsWithIgnoreCase("||",L))){if(this.startsWithIgnoreCase("||",L)){K.getResult().setLastLogicalOperator("||",K.getTokenStringIdx());K.consumeCharacters(2)}else{if(A.test(L)){K.getResult().setLastLogicalOperator("OR",K.getTokenStringIdx());K.consumeCharacters(3)}else{K.getResult().setLastLogicalOperator("|",K.getTokenStringIdx());K.consumeCharacters(1)}}K.getResult().resetTerminalClause();if(K.isComplete()){K.setParseError()}K.getResult().setNeedsField()}else{if(!this.startsWithIgnoreCase(")",L)||!K.getInParens()){this.chewWhitespace(K);var N=(L===null)?K.getMaxTokenStringIdx():K.getMaxTokenStringIdx()-L.length;var M;if(L!=null){M=L.split(" ");K.getResult().setLastLogicalOperator(M[0],N);K.getResult().setLastWasPredicate(M[0],K);K.getResult().setNeedsLogicalOperator(K)}if(K.getResult().getLastWasOperator()==null){K.setParseError()}else{if(M!=null){if(j.test(M[0])){K.getResult().setLastLogicalOperator(null);K.getResult().resetNeedsPredicateOperand()}else{if(h.test(L)){K.consumeCharacters(4);K.getResult().resetTerminalClause();K.getResult().setNeedsField()}if(K.isComplete()||M.length==1){K.setParseError()}}}}}}}}}},andClause:function(K){this.chewWhitespace(K);this.notClause(K);if(!K.isComplete()&&K.getResult().getLastLogicalOperator()===null){this.chewWhitespace(K);var L=K.remainingString();if(L!==null&&(h.test(L)||this.startsWithIgnoreCase("&",L)||this.startsWithIgnoreCase("&&",L))){if(this.startsWithIgnoreCase("&&",L)){K.getResult().setLastLogicalOperator("&&",K.getTokenStringIdx());K.consumeCharacters(2)}else{if(this.startsWithIgnoreCase("&",L)){K.getResult().setLastLogicalOperator("&",K.getTokenStringIdx());K.consumeCharacters(1)}else{K.getResult().setLastLogicalOperator("AND",K.getTokenStringIdx());K.consumeCharacters(4)}}K.getResult().resetTerminalClause();if(K.isComplete()){K.setParseError()}K.getResult().setNeedsField()}else{K.getResult().setNeedsLogicalOperator(K);if(K.isComplete()){K.getResult().setLastLogicalOperator(null,K.getMaxTokenStringIdx())}}}},notClause:function(K){this.chewWhitespace(K);if(!K.isComplete()){this.chewWhitespace(K);var L=K.remainingString();if(L!==null&&(e.test(L)||this.startsWithIgnoreCase("!",L))){K.getResult().needsField=false;if(this.startsWithIgnoreCase("!",L)){K.getResult().setLastLogicalOperator("!",K.getTokenStringIdx());K.consumeCharacters(1)}else{K.getResult().setLastLogicalOperator("NOT",K.getTokenStringIdx());K.consumeCharacters(4)}K.getResult().resetTerminalClause();if(K.isComplete()){K.setParseError()}K.getResult().setNeedsField()}else{this.terminalClause(K)}}else{this.terminalClause(K);K.setParseError()}},predicateClause:function(K){this.chewWhitespace(K);if(!K.isComplete()){var L=K.remainingString();var M=L.split(/[\s(]+/);if(L!==null){K.getResult().setMustBeOperatorOrPredicate(false);if(this.startsWithLogicalOperator(L)){if(M.length==1){K.setParseError();K.getResult().resetLogicalOperators();return}return}K.getResult().resetNeedsPredicateOperand();K.consumeCharacters(M[0].length);K.getResult().setLastWasPredicate(M[0],K);if(M.length==1){K.setParseError();return}if(this.wasPredicateComplete(M[0])){K.getResult().setNeedsPredicateOperand();this.predicateOperand(K)}else{K.setParseError()}}}else{K.setParseError()}},predicateOperand:function(L){this.chewWhitespace(L);var K=this.collectPredicateOperands(L);if(K==null||K==""){L.getResult().setLastOperandStartIndex(L.getTokenStringIdx());L.setParseError()}if(L.remainingString()!=null){L.getResult().resetNeedsPredicateOperand();L.getResult().resetLastPredicates();L.getResult().setMustBeOperatorOrPredicate(true);L.getResult().setNeedsLogicalOperator(L);this.chewWhitespace(L)}},collectPredicateOperands:function(L){if(L.getResult().getLastWasPredicate()==="DURING"){L.getResult().setNeedsOpenParen(true)}var K=this.listOperand(L,true);if(K.length===0){K=this.functionOperand(L);if(K.length===0){K=this.singleValueOperand(L)}else{L.getResult().setNeedsOpenParen(false)}}else{L.getResult().setNeedsOpenParen(false)}return L.getResult().getUnquotedString(K)},terminalClause:function(M){M.getResult().resetTerminalClause();this.chewWhitespace(M);var N=M.remainingString();if(this.startsWithIgnoreCase("(",N)){M.getResult().addToken("(");M.setInParens();M.consumeCharacter();this.orClause(M);this.chewWhitespace(M);N=M.remainingString();if(this.startsWithIgnoreCase(")",N)){M.getResult().addToken(")");M.consumeCharacter();M.setOutOfParens();if(M.isComplete()){M.getResult().resetLogicalOperators();M.getResult().resetLastPredicates()}}else{M.setParseError()}}else{this.field(M);if(!M.isComplete()){this.oper(M);if(!M.isComplete()){if(M.getResult().getLastWasOperator()==="changed"){M.getResult().setNeedsLogicalOperator(M);return}this.operand(M);if(M.getResult().getOperandComplete()){var K=M.getResult().getLastWasOperator();M.getResult().setNeedsNothing();if(K){M.getResult().setLastWasOperator(K)}}else{if(M.isComplete()&&!M.getResult().getNeedsListComma()){M.getResult().setNeedsOperand()}}}else{if(M.getResult().getLastOperator()=="was"||M.getResult().getLastOperator()=="was not"){M.getResult().setNeedsOperandOrOperator()}else{if(M.getResult().getLastWasOperator()==="changed"){var L=M.currentCharacter();if(L!==null&&b.test(L)){M.getResult().setNeedsLogicalOperator(M)}else{M.getResult().resetLogicalOperators()}return}else{M.getResult().setNeedsOperator()}}M.setParseError()}}else{M.getResult().setNeedsField();M.setParseError()}}},field:function(K){var L=this.fieldName(K);if(L.length!==0){K.getResult().setLastFieldName(L,K)}else{if(K.getResult().getLastFieldName()===null){remainingString=K.remainingString();K.getResult().setNeedsField();K.getResult().setLastFieldName(remainingString,K);K.setParseError()}}},fieldName:function(M){this.chewWhitespace(M);var O=M.remainingString();if(this.startsWithIgnoreCase("cf",O)){var L=M.getTokenStringIdx();var K=M.remainingString();M.consumeCharacters(2);this.chewWhitespace(M);O=M.remainingString();if(this.startsWithIgnoreCase("[",O)){M.consumeCharacter();O=M.remainingString();var N=this.numberValue(M);if(N.length!==0){this.chewWhitespace(M);O=M.remainingString();if(this.startsWithIgnoreCase("]",O)){M.consumeCharacter();return K.substring(0,M.getTokenStringIdx()-L)}}}M.setParseError();return K}else{return this.fieldOrFunctionName(M)}},oper:function(M){this.chewWhitespace(M);var N=M.remainingString();var L=this.getLongestOperatorMatch(N,F);if(L!==null){M.getResult().setLastOperator(L,M.getTokenStringIdx());if(this.isWasOperator(L)||this.isChangedOperator(L)){M.getResult().setLastWasOperator(L)}M.consumeCharacters(L.length);if(L=="in"||L=="is"||L=="is not"||L=="not in"||L=="was"||L=="was not"||L=="was in"||L=="was not in"){var K=M.currentCharacter();if(K!==null&&!b.test(K)){M.setParseError()}}if(L=="was"){M.getResult().setNeedsOperandOrOperator();this.chewWhitespace(M);var N=M.remainingString();if(N!=null&&(q.test(N)||B.test(N))){M.setParseError()}}else{if(L=="was not"){M.getResult().setNeedsOperandOrOperator();this.chewWhitespace(M);var N=M.remainingString();if(N!=null&&(B.test(N))){M.setParseError()}}else{if(L=="changed"){M.getResult().setNeedsLogicalOperator(M)}else{M.getResult().setNeedsOperand()}}}}else{if(M.getResult().getLastOperator()===null){var O=(N===null)?M.getMaxTokenStringIdx():M.getMaxTokenStringIdx()-N.length;M.getResult().setLastOperator(N,O);M.getResult().setNeedsOperator();M.setParseError()}}},operand:function(L){this.chewWhitespace(L);if(L.getResult().getLastOperator()==="in"||L.getResult().getLastOperator()==="not in"||L.getResult().getLastOperator()==="was not in"||L.getResult().getLastOperator()==="was in"){L.getResult().setNeedsOpenParen(true)}var K=this.listOperand(L,true);if(K.length===0){K=this.functionOperand(L);if(K.length===0){K=this.singleValueOperand(L)}else{L.getResult().setNeedsOpenParen(false)}}else{L.getResult().setNeedsOpenParen(false)}if(K===null||K.length===0){var M=L.remainingString();L.getResult().setLastOperand(M,L);L.getResult().setNeedsOperand();L.setParseError()}if(K.length!==0){return K}return""},singleValueOperand:function(L){var K=this.stringValue(L);if(K.length!==0){L.getResult().setLastOperand(K,L);if(K.toLowerCase()!="empty"&&K.toLowerCase()!="null"&&this.isReservedWord(K.toLowerCase())){L.setParseError()}return K}return""},functionOperand:function(N){var M=N.getTokenStringIdx();var O=this.fieldOrFunctionName(N);this.chewWhitespace(N);var L=this.listOperand(N,false);if(O.length!==0&&L.length!==0){var K=O+L;N.getResult().setLastOperand(K,N);return K}else{N.backTrackToIdx(M);return""}},listOperand:function(L,M){if(L.currentCharacter()=="("){L.consumeCharacter();var K=this.collectListValues(L,M);var N="("+K;this.chewWhitespace(L);if(L.currentCharacter()==")"){L.consumeCharacter();N+=")";if(N=="()"&&M){L.getResult().setLastOperand(N,L)}if(M){L.getResult().setOperandComplete();L.getResult().resetNeedsPredicateOperand()}}else{L.setParseError()}return N}else{return""}},collectListValues:function(M,N){if(N){M.getResult().setNeedsOperand()}this.chewWhitespace(M);var K=(N)?this.operand(M):this.stringValue(M);if(K.length!==0){if(this.chewWhitespace(M)&&N){M.getResult().setNeedsListComma()}if(M.currentCharacter()==","){M.consumeCharacter();var L=this.collectListValues(M,N);if(L.length===0){M.setParseError()}return K+", "+L}else{return K}}else{return""}},startsWithIgnoreCase:function(K,L){if(L===null||K===null||L.length<K.length){return false}else{return K.toLowerCase()==L.substr(0,K.length).toLowerCase()}},startsWithLogicalOperator:function(K){if(K===null){return false}else{return this.startsWithOr(K)||this.startsWithAnd(K)||this.startsWithNot(K)||this.startsWithBraces(K)}},startsWithOr:function(K){return this.startsWithIgnoreCase("|",K)||this.startsWithIgnoreCase("||",K)||this.startsWithIgnoreCase("or",K)},startsWithAnd:function(K){return this.startsWithIgnoreCase("&",K)||this.startsWithIgnoreCase("&&",K)||this.startsWithIgnoreCase("and",K)},startsWithNot:function(K){return this.startsWithIgnoreCase("!",K)||this.startsWithIgnoreCase("not",K)},startsWithBraces:function(K){return this.startsWithIgnoreCase("(",K)||this.startsWithIgnoreCase(")",K)},chewWhitespace:function(M){var L=false;var K=M.currentCharacter();while(K!==null&&D.test(K)){M.consumeCharacter();K=M.currentCharacter();L=true}return L},getLongestOperatorMatch:function(O,K){var L=null;if(this.startsWithIgnoreCase("is",O)){var N=O.substring(2).match(w);if(N){L=O.substring(0,N[0].length+2)}else{L="is"}}if(this.startsWithIgnoreCase("was",O)){var N=O.substring(3).match(m);if(N){L=O.substring(0,N[0].length+3)}else{L="was"}}else{if(this.startsWithIgnoreCase("not",O)){var P=O.substring(3).match(d);if(P){L=O.substring(0,P[0].length+3)}}else{for(var M=0;M<K.length;M++){if(this.startsWithIgnoreCase(K[M].value,O)){if(L===null||F[M].value.length>L){L=F[M].value}}}}}return L},getValueMinusExtraWhitespace:function(N){if(N===null){return null}var O="";var P=true;var L=N.split("");for(var M=0;M<L.length;M++){var K=L[M];if(D.test(K)){if(P){P=false;O=O+K}}else{P=true;O=O+K}}return O},fieldOrFunctionName:function(L){var K=this.stringValue(L);if(K==='""'||K==="''"){L.setParseError()}if(this.isReservedWord(K.toLowerCase())){L.setParseError()}return K},isReservedWord:function(K){return jQuery.inArray(K,I)!==-1},isWasOperator:function(K){return K==="was"||K==="was in"||K=="was not in"||K=="was not"},isChangedOperator:function(K){return K==="changed"},stringValue:function(M){var K="";var P=false;var N=false;var L=M.currentCharacter();while(L!==null&&(P||N||G.test(L))){K=K+L;M.consumeCharacter();if(L=="\\"){L=M.currentCharacter();if(L===null){M.setParseError();break}else{if(C.test(L)){var O=M.remainingString();if(!g.test(O)){M.setParseError();break}}}K=K+L;M.consumeCharacter()}else{if(f.test(L)&&!(P||N)){M.setParseError();break}else{if(L=='"'&&!N){P=!P}else{if(L=="'"&&!P){N=!N}}}}L=M.currentCharacter()}if(M.isComplete()&&(P||N)){M.setParseError()}return K},numberValue:function(L){var M="";this.chewWhitespace(L);var K=L.currentCharacter();while(K!==null){if(a.test(K)){M=M+K;L.consumeCharacter()}else{break}K=L.currentCharacter()}return M},wasPredicateComplete:function(L){var O=false;var N=n.length;for(var M=0,K=N;M<K;++M){if(L.toLowerCase()==n[M].value.toLowerCase()){O=true;break}}return O}}};JIRA.JQLAutoComplete.ParseResult=function(){var J=[];var I=0;return{getTokens:function(){return J},addToken:function(K){J[I++]=K},setLastFieldName:function(L,K){this.fieldNameStartIndex=(L===null)?K.getMaxTokenStringIdx():(K.getTokenStringIdx()-L.length);this.lastFieldName=this.getUnquotedString(L);J[I++]=L},getLastFieldName:function(){return this.lastFieldName},getLastFieldNameStartIndex:function(){return this.fieldNameStartIndex},setLastOrderByFieldName:function(L,K){this.orderByFieldNameStartIndex=(L===null)?K.getMaxTokenStringIdx():(K.getTokenStringIdx()-L.length);this.lastOrderByFieldName=this.getUnquotedString(L);this.lastOrderByDirection=null;J[I++]=L},getLastOrderByFieldName:function(){return this.lastOrderByFieldName},getLastOrderByFieldNameStartIndex:function(){return this.orderByFieldNameStartIndex},setLastOrderByDirection:function(L,K){this.orderByDirectionStartIndex=(L===null)?K.getMaxTokenStringIdx():(K.getTokenStringIdx()-L.length);this.lastOrderByDirection=L;J[I++]=L},getLastOrderByDirection:function(){return this.lastOrderByDirection},getLastOrderByDirectionStartIndex:function(){return this.orderByDirectionStartIndex},setNeedsField:function(){this.needsOperator=false;this.needsOperand=false;this.needsLogicalOperator=false;this.needsOrderBy=false;this.needsField=true;this.needsOrderByField=false;this.needsOrderByDirection=false;this.needsListComma=false;this.needsWasPredicate=false;this.lastWasOperator=null},getNeedsField:function(){return this.needsField},setNeedsOrderByField:function(){this.needsOperator=false;this.needsOperand=false;this.needsLogicalOperator=false;this.needsOrderBy=false;this.needsField=false;this.needsOrderByField=true;this.needsOrderByDirection=false;this.lastOrderByDirection=null;this.needsListComma=false},getNeedsOrderByField:function(){return this.needsOrderByField},setNeedsOrderByDirection:function(){this.needsOperator=false;this.needsOperand=false;this.needsLogicalOperator=false;this.needsOrderBy=false;this.needsField=false;this.needsOrderByField=false;this.needsOrderByDirection=true;this.needsListComma=false},getNeedsOrderByDirection:function(){return this.needsOrderByDirection},setNeedsOrderByComma:function(){this.needsOperator=false;this.needsOperand=false;this.needsLogicalOperator=false;this.needsOrderBy=false;this.needsField=false;this.needsOrderByField=false;this.needsOrderByDirection=false;this.needsListComma=false},setNeedsListComma:function(){this.needsOperator=false;this.needsOperand=false;this.needsLogicalOperator=false;this.needsOrderBy=false;this.needsField=false;this.needsOrderByField=false;this.needsOrderByDirection=false;this.needsListComma=true},getNeedsListComma:function(){return this.needsListComma},setLastOperator:function(K,L){this.lastOperator=K;this.operatorStartIndex=L;J[I++]=K},setLastWasOperator:function(K){this.lastWasOperator=K},getLastWasOperator:function(){return this.lastWasOperator},getLastOperator:function(){return this.lastOperator},getLastOperatorStartIndex:function(){return this.operatorStartIndex},setLastOperand:function(L,K){this.operandStartIndex=(L===null)?K.getMaxTokenStringIdx():(K.getTokenStringIdx()-L.length);this.lastOperand=this.getUnquotedString(L);J[I++]=L},getLastOperand:function(){return this.lastOperand},setNeedsOperand:function(){this.needsField=false;this.needsOperator=false;this.needsLogicalOperator=false;this.needsOperand=true;this.needsOrderBy=false;this.needsOrderByField=false;this.needsOrderByDirection=false;this.needsListComma=false},setNeedsOperandOrOperator:function(){this.needsField=false;this.needsOperator=true;this.needsLogicalOperator=false;this.needsOperand=true;this.needsOrderBy=false;this.needsOrderByField=false;this.needsOrderByDirection=false;this.needsListComma=false},getNeedsOperand:function(){return this.needsOperand},setNeedsPredicateOperand:function(){this.needsPredicateOperand=true},resetNeedsPredicateOperand:function(){this.needsPredicateOperand=false;this.needsOperand=false},getNeedsPredicateOperand:function(){return this.needsPredicateOperand},getLastOperandStartIndex:function(){return this.operandStartIndex},setLastOperandStartIndex:function(K){this.operandStartIndex=K},setLastLogicalOperator:function(K,L){this.lastLogicalOperator=K;this.logicalOperatorStartIndex=L;J[I++]=K},setNeedsOperator:function(){this.needsField=false;this.needsOperand=false;this.needsLogicalOperator=false;this.needsOrderBy=false;this.needsOperator=true;this.needsOrderByField=false;this.needsOrderByDirection=false;this.needsListComma=false},getNeedsOperatorOrOperand:function(){return this.needsOperator&&this.needsOperand},getNeedsOperator:function(){return this.needsOperator},getLastLogicalOperator:function(){return this.lastLogicalOperator},getLastLogicalOperatorStartIndex:function(){return this.logicalOperatorStartIndex},setNeedsLogicalOperator:function(K){this.needsLogicalOperator=true;this.needsOperator=false;this.needsOperand=false;this.needsField=false;this.needsOrderByField=false;this.needsOrderByDirection=false;this.needsListComma=false;this.needsOrderBy=!K.getInParens();if(this.lastWasOperator!=null){this.needsWasPredicate=true}},setNeedsOpenParen:function(K){this.needsOpenParen=K},getNeedsOpenParen:function(){return this.needsOpenParen},getNeedsLogicalOperator:function(){return this.needsLogicalOperator},getNeedsOrderBy:function(){return this.needsOrderBy},getNeedsWasPredicate:function(){return this.needsWasPredicate},setLastWasPredicate:function(K,L){this.wasPredicateStartIndex=(K===null)?L.getMaxTokenStringIdx():(L.getTokenStringIdx()-K.length);this.lastWasPredicate=K;J[I++]=K},getLastWasPredicate:function(){return this.lastWasPredicate},resetLastPredicates:function(){this.lastLogicalOperator=null;this.lastWasPredicate=null;this.lastOperand=null;this.wasPredicateStartIndex=null;this.operandStartIndex=null},getLastWasPredicateStartIndex:function(){return this.wasPredicateStartIndex},setLastOrderBy:function(L,K){this.orderByStartIndex=(L===null)?K.getMaxTokenStringIdx():(K.getTokenStringIdx()-L.length);this.lastOrderBy=L;J[I++]=L},getLastOrderBy:function(){return this.lastOrderBy},getLastOrderByStartIndex:function(){return this.orderByStartIndex},resetLogicalOperators:function(){this.lastLogicalOperator=null;this.logicalOperatorStartIndex=null;this.needsLogicalOperator=null},getUnquotedString:function(K){var L=K!=null&&K.length>=3&&K.charAt(K.length-2)!="\\";if(K!=null&&K.charAt(0)=='"'){K=K.substring(1,K.length);if(K.charAt(K.length-1)=='"'&&L){K=K.substring(0,K.length-1)}}else{if(K!=null&&K.charAt(0)=="'"){K=K.substring(1,K.length);if(K.charAt(K.length-1)=="'"&&L){K=K.substring(0,K.length-1)}}}return K},setParseError:function(K){this.parseError=true;this.parseErrorMsg=K},getParseError:function(){return this.parseError},getParseErrorMsg:function(){return this.parseErrorMsg},setNeedsNothing:function(){this.needsOperator=false;this.needsOperand=false;this.needsLogicalOperator=false;this.needsOrderBy=false;this.needsField=false;this.needsOrderByField=false;this.needsOrderByDirection=false;this.needsOpenParen=false;this.needsListComma=false;this.needsWasPredicate=null;this.needsPredicateOperand=null;this.mustBeOperatorOrPredicate=null;this.lastWasOperator=null},setOperandComplete:function(){this.operandComplete=true},getOperandComplete:function(){return this.operandComplete},setMustBeOperatorOrPredicate:function(K){this.mustBeOperatorOrPredicate=K},getMustBeOperatorOrPredicate:function(){return this.mustBeOperatorOrPredicate},resetTerminalClause:function(){this.lastFieldName=null;this.fieldNameStartIndex=null;this.needsField=null;this.lastOperator=null;this.operatorStartIndex=null;this.needsOperator=null;this.lastOperand=null;this.operandStartIndex=null;this.needsOperand=null;this.operandComplete=null;this.needsOpenParen=null;this.needsListComma=false;this.mustBeOperatorOrPredicate=null},init:function(){this.lastFieldName=null;this.fieldNameStartIndex=null;this.needsField=null;this.lastOperator=null;this.operatorStartIndex=null;this.needsOperator=null;this.lastOperand=null;this.operandStartIndex=null;this.needsOperand=null;this.lastLogicalOperator=null;this.logicalOperatorStartIndex=null;this.lastOrderByFieldName=null;this.lastOrderByFieldNameStartIndex=null;this.lastOrderByDirection=null;this.lastOrderByDirectionStartIndex=null;this.orderByStartIndex=null;this.lastOrderBy=null;this.needsOrderBy=null;this.needsOrderByField=null;this.needsOrderByDirection=null;this.operandComplete=null;this.needsOpenParen=null;this.needsListComma=null;this.wasPredicateStartIndex=null;this.lastWasPredicate=null;this.needsWasPredicate=null;this.needsPredicateOperand=null;this.mustBeOperatorOrPredicate=null;this.lastWasOperator=null}}};JIRA.JQLAutoComplete.Token=function(){return{init:function(I){this.tokenStringIdx=0;this.tokenString=I;this.parseError=false;this.parseErrorMsg=null;this.result=JIRA.JQLAutoComplete.ParseResult();this.result.init();this.inParens=0},consumeCharacter:function(){this.tokenStringIdx++},consumeCharacters:function(I){this.tokenStringIdx=this.tokenStringIdx+I},backTrackToIdx:function(I){this.tokenStringIdx=I;this.parseError=false;this.parseErrorMsg=null;this.result.parseError=false;this.result.parseErrorMsg=null},getTokenStringIdx:function(){return this.tokenStringIdx},currentCharacter:function(){if(this.tokenStringIdx>=this.tokenString.length){return null}return this.tokenString.charAt(this.tokenStringIdx)},remainingString:function(){if(this.tokenStringIdx>=this.tokenString.length){return null}return this.tokenString.substr(this.tokenStringIdx,this.tokenString.length)},getMaxTokenStringIdx:function(){return this.tokenString.length},isComplete:function(){if(this.parseError){return true}return this.tokenStringIdx>=this.tokenString.length},setInParens:function(){this.inParens++},setOutOfParens:function(){if(this.inParens!==0){this.inParens--}},getInParens:function(){return this.inParens!==0},setParseError:function(){this.parseError=true;var J=((this.tokenStringIdx-9)<0)?0:this.tokenStringIdx-9;var I=this.tokenString.substring(J,this.tokenStringIdx-1);this.result.setParseError("..."+I+"^"+this.tokenString.substring(this.tokenStringIdx,this.tokenString.length))},getParseError:function(){return this.parseError},getResult:function(){return this.result}}};jQuery(function(){jQuery(".jql-autocomplete-params").each(function(){var N={};jQuery(this).find("input").each(function(){var O=jQuery(this);N[O.attr("id")]=O.val()});var K=JSON.parse(jQuery("#jqlFieldz").text());var L=JSON.parse(jQuery("#jqlFunctionNamez").text());var M=JSON.parse(jQuery("#jqlReservedWordz").text());var J=JIRA.JQLAutoComplete({fieldID:"jqltext",parser:JIRA.JQLAutoComplete.MyParser(M),queryDelay:0.65,jqlFieldNames:K,jqlFunctionNames:L,minQueryLength:0,allowArrowCarousel:true,autoSelectFirst:false,errorID:"jqlerrormsg"});var I=jQuery("#jqltext");I.unbind("keypress",submitOnEnter).keypress(function(O){if(J.dropdownController===null||!J.dropdownController.displayed||J.selectedIndex<0){if(O.keyCode==13&&!O.ctrlKey&&!O.shiftKey){jQuery("#jqlform").submit();return false}else{return true}}});J.buildResponseContainer();J.parse(I.text());J.updateColumnLineCount();I.click(function(){J.dropdownController.hideDropdown()})})})})();
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:timeline-resources', location = 'com/atlassian/confluence/extra/calendar3/lib/timeline.js' */
if(typeof links==="undefined"){links={}}if(typeof google==="undefined"){google=undefined}links.Timeline=function(a){if(!a){return}this.dom={};this.conversion={};this.eventParams={};this.groups=[];this.groupIndexes={};this.items=[];this.renderQueue={show:[],hide:[],update:[]};this.renderedItems=[];this.clusterGenerator=new links.Timeline.ClusterGenerator(this);this.currentClusters=[];this.selection=undefined;this.listeners={};this.size={actualHeight:0,axis:{characterMajorHeight:0,characterMajorWidth:0,characterMinorHeight:0,characterMinorWidth:0,height:0,labelMajorTop:0,labelMinorTop:0,line:0,lineMajorWidth:0,lineMinorHeight:0,lineMinorTop:0,lineMinorWidth:0,top:0},contentHeight:0,contentLeft:0,contentWidth:0,frameHeight:0,frameWidth:0,groupsLeft:0,groupsWidth:0,items:{top:0}};this.dom.container=a;this.options={width:"100%",height:"auto",minHeight:0,autoHeight:true,eventMargin:10,eventMarginAxis:20,dragAreaWidth:10,min:undefined,max:undefined,zoomMin:10,zoomMax:1000*60*60*24*365*10000,moveable:true,zoomable:true,selectable:true,editable:false,snapEvents:true,groupChangeable:true,showCurrentTime:true,showCustomTime:false,showMajorLabels:true,showMinorLabels:true,showNavigation:false,showButtonNew:false,groupsOnRight:false,axisOnTop:false,stackEvents:true,animate:true,animateZoom:true,cluster:false,style:"box",customStackOrder:false,locale:"en",MONTHS:new Array("January","February","March","April","May","June","July","August","September","October","November","December"),DAYS:new Array("Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"),MONTHS_SHORT:new Array("Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"),DAYS_SHORT:new Array("Sun","Mon","Tue","Wed","Thu","Fri","Sat"),ZOOM_IN:"Zoom in",ZOOM_OUT:"Zoom out",MOVE_LEFT:"Move left",MOVE_RIGHT:"Move right",NEW:"New",CREATE_NEW_EVENT:"Create new event"};this.clientTimeOffset=0;var c=this.dom;while(c.container.hasChildNodes()){c.container.removeChild(c.container.firstChild)}this.step=new links.Timeline.StepDate();this.itemTypes={box:links.Timeline.ItemBox,range:links.Timeline.ItemRange,dot:links.Timeline.ItemDot};this.data=[];this.firstDraw=true;this.setVisibleChartRange(undefined,undefined,false);this.render();var b=this;setTimeout(function(){b.trigger("ready")},0)};links.Timeline.prototype.draw=function(b,a){this.setOptions(a);this.setData(b);if(a&&(a.start||a.end)){this.setVisibleChartRange(a.start,a.end)}else{if(this.firstDraw){this.setVisibleChartRangeAuto()}}this.firstDraw=false};links.Timeline.prototype.setOptions=function(b){if(b){for(var d in b){if(b.hasOwnProperty(d)){this.options[d]=b[d]}}if(typeof links.locales!=="undefined"&&this.options.locale!=="en"){var c=links.locales[this.options.locale];if(c){for(var a in c){if(c.hasOwnProperty(a)){this.options[a]=c[a]}}}}if(b.showButtonAdd!=undefined){this.options.showButtonNew=b.showButtonAdd;console.log("WARNING: Option showButtonAdd is deprecated. Use showButtonNew instead")}if(b.intervalMin!=undefined){this.options.zoomMin=b.intervalMin;console.log("WARNING: Option intervalMin is deprecated. Use zoomMin instead")}if(b.intervalMax!=undefined){this.options.zoomMax=b.intervalMax;console.log("WARNING: Option intervalMax is deprecated. Use zoomMax instead")}if(b.scale&&b.step){this.step.setScale(b.scale,b.step)}}this.options.autoHeight=(this.options.height==="auto")};links.Timeline.prototype.addItemType=function(a,b){this.itemTypes[a]=b};links.Timeline.mapColumnIds=function(b){var c={},f=b.getNumberOfColumns(),e=true;for(var a=0;a<f;a++){var d=b.getColumnId(a)||b.getColumnLabel(a);c[d]=a;if(d=="start"||d=="end"||d=="content"||d=="group"||d=="className"||d=="editable"){e=false}}if(e){c.start=0;c.end=1;c.content=2}return c};links.Timeline.prototype.setData=function(e){this.unselectItem();if(!e){e=[]}this.stackCancelAnimation();this.clearItems();this.data=e;var b=this.items;this.deleteGroups();if(google&&google.visualization&&e instanceof google.visualization.DataTable){var f=links.Timeline.mapColumnIds(e);for(var g=0,d=e.getNumberOfRows();g<d;g++){b.push(this.createItem({start:((f.start!=undefined)?e.getValue(g,f.start):undefined),end:((f.end!=undefined)?e.getValue(g,f.end):undefined),content:((f.content!=undefined)?e.getValue(g,f.content):undefined),group:((f.group!=undefined)?e.getValue(g,f.group):undefined),className:((f.className!=undefined)?e.getValue(g,f.className):undefined),editable:((f.editable!=undefined)?e.getValue(g,f.editable):undefined)}))}}else{if(links.Timeline.isArray(e)){for(var g=0,d=e.length;g<d;g++){var a=e[g];var c=this.createItem(a);b.push(c)}}else{throw"Unknown data type. DataTable or Array expected."}}if(this.options.cluster){this.clusterGenerator.setData(this.items)}this.render({animate:false})};links.Timeline.prototype.getData=function(){return this.data};links.Timeline.prototype.updateData=function(e,j){var d=this.data,a;if(google&&google.visualization&&d instanceof google.visualization.DataTable){var g=(e+1)-d.getNumberOfRows();if(g>0){d.addRows(g)}var f=links.Timeline.mapColumnIds(d);for(a in j){if(j.hasOwnProperty(a)){var b=f[a];if(b==undefined){var h=j[a];var c="string";if(typeof(h)=="number"){c="number"}else{if(typeof(h)=="boolean"){c="boolean"}else{if(h instanceof Date){c="datetime"}}}b=d.addColumn(c,a)}d.setValue(e,b,j[a])}}}else{if(links.Timeline.isArray(d)){var k=d[e];if(k==undefined){k={};d[e]=k}for(a in j){if(j.hasOwnProperty(a)){k[a]=j[a]}}}else{throw"Cannot update data, unknown type of data"}}};links.Timeline.prototype.getItemIndex=function(f){var g=f,j=this.dom,h=j.items.frame,b=this.items,c=undefined;while(g.parentNode&&g.parentNode!==h){g=g.parentNode}if(g.parentNode===h){for(var d=0,a=b.length;d<a;d++){if(b[d].dom===g){c=d;break}}}return c};links.Timeline.prototype.setSize=function(b,a){if(b){this.options.width=b;this.dom.frame.style.width=b}if(a){this.options.height=a;this.options.autoHeight=(this.options.height==="auto");if(a!=="auto"){this.dom.frame.style.height=a}}this.render({animate:false})};links.Timeline.prototype.setVisibleChartRange=function(f,b,e){var c={};if(!f||!b){c=this.getDataRange(true)}if(!f){if(b){if(c.min&&c.min.valueOf()<b.valueOf()){f=c.min}else{f=new Date(b.valueOf());f.setDate(f.getDate()-7)}}else{f=new Date();f.setDate(f.getDate()-3)}}if(!b){if(c.max){b=c.max}else{b=new Date(f.valueOf());b.setDate(b.getDate()+7)}}if(b<=f){b=new Date(f.valueOf());b.setDate(b.getDate()+7)}var d=this.options.min?this.options.min:undefined;if(d!=undefined&&f.valueOf()<d.valueOf()){f=new Date(d.valueOf())}var a=this.options.max?this.options.max:undefined;if(a!=undefined&&b.valueOf()>a.valueOf()){b=new Date(a.valueOf())}this.applyRange(f,b);if(e==undefined||e==true){this.render({animate:false})}else{this.recalcConversion()}};links.Timeline.prototype.setVisibleChartRangeAuto=function(){var a=this.getDataRange(true);this.setVisibleChartRange(a.min,a.max)};links.Timeline.prototype.setVisibleChartRangeNow=function(){var a=new Date();var b=(this.end.valueOf()-this.start.valueOf());var d=new Date(a.valueOf()-b/2);var c=new Date(d.valueOf()+b);this.setVisibleChartRange(d,c)};links.Timeline.prototype.getVisibleChartRange=function(){return{start:new Date(this.start.valueOf()),end:new Date(this.end.valueOf())}};links.Timeline.prototype.getDataRange=function(b){var g=this.items,d=undefined,h=undefined;if(g){for(var f=0,e=g.length;f<e;f++){var k=g[f],a=k.start!=undefined?k.start.valueOf():undefined,c=k.end!=undefined?k.end.valueOf():a;if(d!=undefined&&a!=undefined){d=Math.min(d.valueOf(),a.valueOf())}else{d=a}if(h!=undefined&&c!=undefined){h=Math.max(h,c)}else{h=c}}}if(d&&h&&b){var j=(h-d);d=d-j*0.05;h=h+j*0.05}return{min:d!=undefined?new Date(d):undefined,max:h!=undefined?new Date(h):undefined}};links.Timeline.prototype.render=function(j){var e=this.reflowFrame();var h=this.reflowAxis();var d=this.reflowGroups();var g=this.reflowItems();var f=(e||h||d||g);var a=this.options.animate;if(j&&j.animate!=undefined){a=j.animate}this.recalcConversion();this.clusterItems();this.filterItems();this.stackItems(a);this.recalcItems();var b=this.repaint();if(b){var c=j?j.renderTimesLeft:undefined;if(c==undefined){c=5}if(c>0){this.render({animate:j?j.animate:undefined,renderTimesLeft:(c-1)})}}};links.Timeline.prototype.repaint=function(){var b=this.repaintFrame();var a=this.repaintAxis();var d=this.repaintGroups();var c=this.repaintItems();this.repaintCurrentTime();this.repaintCustomTime();return(b||a||d||c)};links.Timeline.prototype.reflowFrame=function(){var f=this.dom,d=this.options,e=this.size,b=false;var a=f.frame?f.frame.offsetWidth:0,c=f.frame?f.frame.children[0].clientHeight:0;b=b||(e.frameWidth!==a);b=b||(e.frameHeight!==c);e.frameWidth=a;e.frameHeight=c;return b};links.Timeline.prototype.repaintFrame=function(){var b=false,d=this.dom,j=this.options,h=this.size;if(!d.frame){d.frame=document.createElement("DIV");d.frame.className="timeline-frame";d.frame.style.position="relative";d.frame.style.overflowX="hidden";d.frame.style.overflowY="auto";d.container.appendChild(d.frame);b=true}var g=j.autoHeight?(h.actualHeight+"px"):(j.height||"100%");var a=j.width||"100%";b=b||(d.frame.style.height!=g);b=b||(d.frame.style.width!=a);d.frame.style.height=j.viewHeight?j.viewHeight:g;d.frame.style.width=a;if(!d.content){d.content=document.createElement("DIV");d.content.style.position="relative";d.content.style.overflow="hidden";d.frame.appendChild(d.content);var e=document.createElement("DIV");e.style.position="absolute";e.style.left="0px";e.style.top="0px";e.style.height="100%";e.style.width="0px";d.content.appendChild(e);d.contentTimelines=e;var c=this.eventParams,f=this;if(!c.onMouseDown){c.onMouseDown=function(k){f.onMouseDown(k)};links.Timeline.addEventListener(d.content,"mousedown",c.onMouseDown)}if(!c.onTouchStart){c.onTouchStart=function(k){f.onTouchStart(k)};links.Timeline.addEventListener(d.content,"touchstart",c.onTouchStart)}if(!c.onDblClick){c.onDblClick=function(k){f.onDblClick(k)};links.Timeline.addEventListener(d.content,"dblclick",c.onDblClick)}b=true}d.content.style.left=h.contentLeft+"px";d.content.style.top="0px";d.content.style.width=h.contentWidth+"px";d.content.style.height=g;this.repaintNavigation();this.reflowAxis();this.repaintAxis();return b};links.Timeline.prototype.reflowAxis=function(){var j=false,h=this.dom,o=this.options,n=this.size,l=h.axis;var k=(l&&l.characterMinor)?l.characterMinor.clientWidth:0,g=(l&&l.characterMinor)?l.characterMinor.clientHeight:0,b=(l&&l.characterMajor)?l.characterMajor.clientWidth:0,e=(l&&l.characterMajor)?l.characterMajor.clientHeight:0,d=(o.showMinorLabels?g:0)+(o.showMajorLabels?e:0);var f=h.frame?h.frame.children[0].clientHeight:n.frameHeight;var a=o.axisOnTop?0:f-d,c=o.axisOnTop?d:a;j=j||(n.axis.top!==a);j=j||(n.axis.line!==c);j=j||(n.axis.height!==d);n.axis.top=a;n.axis.line=c;n.axis.height=d;n.axis.labelMajorTop=o.axisOnTop?0:c+(o.showMinorLabels?g:0);n.axis.labelMinorTop=o.axisOnTop?(o.showMajorLabels?e:0):c;n.axis.lineMinorTop=o.axisOnTop?n.axis.labelMinorTop:0;n.axis.lineMinorHeight=o.showMajorLabels?n.frameHeight-e:n.frameHeight;if(l&&l.minorLines&&l.minorLines.length){n.axis.lineMinorWidth=l.minorLines[0].offsetWidth}else{n.axis.lineMinorWidth=1}if(l&&l.majorLines&&l.majorLines.length){n.axis.lineMajorWidth=l.majorLines[0].offsetWidth}else{n.axis.lineMajorWidth=1}j=j||(n.axis.characterMinorWidth!==k);j=j||(n.axis.characterMinorHeight!==g);j=j||(n.axis.characterMajorWidth!==b);j=j||(n.axis.characterMajorHeight!==e);n.axis.characterMinorWidth=k;n.axis.characterMinorHeight=g;n.axis.characterMajorWidth=b;n.axis.characterMajorHeight=e;var m=Math.max(n.frameHeight-d,0);n.contentLeft=o.groupsOnRight?0:n.groupsWidth;n.contentWidth=Math.max(n.frameWidth-n.groupsWidth,0);n.contentHeight=m;n.axis.lineMinorHeight=m;return j};links.Timeline.prototype.repaintAxis=function(){var f=false,j=this.dom,r=this.options,q=this.size,e=this.step;var g=j.axis;if(!g){g={};j.axis=g}if(!q.axis.properties){q.axis.properties={}}if(!g.minorTexts){g.minorTexts=[]}if(!g.minorLines){g.minorLines=[]}if(!g.majorTexts){g.majorTexts=[]}if(!g.majorLines){g.majorLines=[]}if(!g.frame){g.frame=document.createElement("DIV");g.frame.style.position="absolute";g.frame.style.left="0px";g.frame.style.top="0px";j.content.appendChild(g.frame)}j.content.removeChild(g.frame);g.frame.style.width=(q.contentWidth)+"px";g.frame.style.height=(q.axis.height)+"px";var d=this.screenToTime(0);var h=this.screenToTime(q.contentWidth);if(q.axis.characterMinorWidth){this.minimumStep=this.screenToTime(q.axis.characterMinorWidth*6)-this.screenToTime(0);e.setRange(d,h,this.minimumStep)}var o=this.repaintAxisCharacters();f=f||o;this.repaintAxisStartOverwriting();e.start();var a=undefined;var l=0;while(!e.end()&&l<1000){l++;var p=e.getCurrent(),n=this.timeToScreen(p),k=e.isMajor();if(r.showMinorLabels){this.repaintAxisMinorText(n,e.getLabelMinor(r))}if(k&&r.showMajorLabels){if(n>0){if(a==undefined){a=n}this.repaintAxisMajorText(n,e.getLabelMajor(r))}this.repaintAxisMajorLine(n)}else{this.repaintAxisMinorLine(n)}e.next()}if(r.showMajorLabels){var c=this.screenToTime(0),m=this.step.getLabelMajor(r,c),b=m.length*q.axis.characterMajorWidth+10;if(a==undefined||b<a){this.repaintAxisMajorText(0,m,c)}}this.repaintAxisEndOverwriting();this.repaintAxisHorizontal();j.content.insertBefore(g.frame,j.content.firstChild);return f};links.Timeline.prototype.repaintAxisCharacters=function(){var c=false,f=this.dom,b=f.axis,e;if(!b.characterMinor){e=document.createTextNode("0");var a=document.createElement("DIV");a.className="timeline-axis-text timeline-axis-text-minor";a.appendChild(e);a.style.position="absolute";a.style.visibility="hidden";a.style.paddingLeft="0px";a.style.paddingRight="0px";b.frame.appendChild(a);b.characterMinor=a;c=true}if(!b.characterMajor){e=document.createTextNode("0");var d=document.createElement("DIV");d.className="timeline-axis-text timeline-axis-text-major";d.appendChild(e);d.style.position="absolute";d.style.visibility="hidden";d.style.paddingLeft="0px";d.style.paddingRight="0px";b.frame.appendChild(d);b.characterMajor=d;c=true}return c};links.Timeline.prototype.repaintAxisStartOverwriting=function(){var a=this.size.axis.properties;a.minorTextNum=0;a.minorLineNum=0;a.majorTextNum=0;a.majorLineNum=0};links.Timeline.prototype.repaintAxisEndOverwriting=function(){var b=this.dom,j=this.size.axis.properties,a=this.dom.axis.frame,e;var l=b.axis.minorTexts;e=j.minorTextNum;while(l.length>e){var c=l[e];a.removeChild(c);l.splice(e,1)}var d=b.axis.minorLines;e=j.minorLineNum;while(d.length>e){var f=d[e];a.removeChild(f);d.splice(e,1)}var m=b.axis.majorTexts;e=j.majorTextNum;while(m.length>e){var h=m[e];a.removeChild(h);m.splice(e,1)}var g=b.axis.majorLines;e=j.majorLineNum;while(g.length>e){var k=g[e];a.removeChild(k);g.splice(e,1)}};links.Timeline.prototype.repaintAxisHorizontal=function(){var e=this.dom.axis,d=this.size,c=this.options;var a=(c.showMinorLabels||c.showMajorLabels);if(a){if(!e.backgroundLine){var f=document.createElement("DIV");f.className="timeline-axis";f.style.position="absolute";f.style.left="0px";f.style.width="100%";f.style.border="none";e.frame.insertBefore(f,e.frame.firstChild);e.backgroundLine=f}if(e.backgroundLine){e.backgroundLine.style.top=d.axis.top+"px";e.backgroundLine.style.height=d.axis.height+"px"}}else{if(e.backgroundLine){e.frame.removeChild(e.backgroundLine);delete e.backgroundLine}}if(a){if(e.line){var b=e.frame.removeChild(e.line);e.frame.appendChild(b)}else{var b=document.createElement("DIV");b.className="timeline-axis";b.style.position="absolute";b.style.left="0px";b.style.width="100%";b.style.height="0px";e.frame.appendChild(b);e.line=b}e.line.style.top=d.axis.line+"px"}else{if(e.line&&e.line.parentElement){e.frame.removeChild(e.line);delete e.line}}};links.Timeline.prototype.repaintAxisMinorText=function(h,j){var k=this.size,b=this.dom,e=k.axis.properties,a=b.axis.frame,g=b.axis.minorTexts,c=e.minorTextNum,f;if(c<g.length){f=g[c]}else{var d=document.createTextNode("");f=document.createElement("DIV");f.appendChild(d);f.className="timeline-axis-text timeline-axis-text-minor";f.style.position="absolute";a.appendChild(f);g.push(f)}f.childNodes[0].nodeValue=j;f.style.left=(h-8)+"px";f.style.top=k.axis.labelMinorTop+"px";e.minorTextNum++};links.Timeline.prototype.repaintAxisMinorLine=function(a){var e=this.size.axis,h=this.dom,d=e.properties,g=h.axis.frame,f=h.axis.minorLines,c=d.minorLineNum,b;if(c<f.length){b=f[c]}else{b=document.createElement("DIV");b.className="timeline-axis-grid timeline-axis-grid-minor";b.style.position="absolute";b.style.width="0px";g.appendChild(b);f.push(b)}b.style.top=e.lineMinorTop+"px";b.style.height=e.lineMinorHeight+"px";b.style.left=(a-e.lineMinorWidth/2)+"px";d.minorLineNum++};links.Timeline.prototype.repaintAxisMajorText=function(f,h){var j=this.size,d=j.axis.properties,a=this.dom.axis.frame,g=this.dom.axis.majorTexts,b=d.majorTextNum,e;if(b<g.length){e=g[b]}else{var c=document.createTextNode(h);e=document.createElement("DIV");e.className="timeline-axis-text timeline-axis-text-major";e.appendChild(c);e.style.position="absolute";e.style.top="0px";a.appendChild(e);g.push(e)}e.childNodes[0].nodeValue=h;e.style.top=j.axis.labelMajorTop+"px";e.style.left=f+"px";d.majorTextNum++};links.Timeline.prototype.repaintAxisMajorLine=function(a){var e=this.size,g=e.axis.properties,f=this.size.axis,h=this.dom.axis.frame,d=this.dom.axis.majorLines,c=g.majorLineNum,b;if(c<d.length){b=d[c]}else{b=document.createElement("DIV");b.className="timeline-axis-grid timeline-axis-grid-major";b.style.position="absolute";b.style.top="0px";b.style.width="0px";h.appendChild(b);d.push(b)}b.style.left=(a-f.lineMajorWidth/2)+"px";b.style.height=e.contentHeight+"px";g.majorLineNum++};links.Timeline.prototype.reflowItems=function(){var g=false,f,e,h,d=this.groups,c=this.renderedItems;if(d){AJS.$.each(d,function(m,l){l.itemsHeight=0})}for(f=0,e=c.length;f<e;f++){var k=c[f],a=k.dom;h=k.group;if(a){var b=a?a.clientWidth:0;var j=a?a.clientHeight:0;g=g||(k.width!=b);g=g||(k.height!=j);k.width=b;k.height=j;k.reflow()}if(h){h.itemsHeight=h.itemsHeight?Math.max(h.itemsHeight,k.height):k.height}}return g};links.Timeline.prototype.recalcItems=function(){var q=false,p,l,r,t,f,d,s=this.groups,k=this.size,b=this.options,n=this.renderedItems;var a=0;if(s.length==0){if(b.autoHeight||b.cluster){var m=0,o=0;if(this.stack&&this.stack.finalItems){f=this.stack.finalItems;t=f[0];if(t&&t.top){m=t.top;o=t.top+t.height}for(p=1,l=f.length;p<l;p++){t=f[p];m=Math.min(m,t.top);o=Math.max(o,t.top+t.height)}}else{r=n[0];if(r&&r.top){m=r.top;o=r.top+r.height}for(p=1,l=n.length;p<l;p++){r=n[p];if(r.top){m=Math.min(m,r.top);o=Math.max(o,(r.top+r.height))}}}a=(o-m)+2*b.eventMarginAxis+k.axis.height;if(a<b.minHeight){a=b.minHeight}if(k.actualHeight!=a&&b.autoHeight&&!b.axisOnTop){var g=a-k.actualHeight;if(this.stack&&this.stack.finalItems){f=this.stack.finalItems;for(p=0,l=f.length;p<l;p++){f[p].top+=g;f[p].item.top+=g}}else{for(p=0,l=n.length;p<l;p++){n[p].top+=g}}}}}else{a=k.axis.height+2*b.eventMarginAxis;for(p=0,l=s.length;p<l;p++){d=s[p];var j=Math.max(d.labelHeight||0,d.itemsHeight||0);q=q||(j!=d.height);d.height=j;a+=s[p].height+b.eventMargin}var c=b.eventMargin,h=b.axisOnTop?b.eventMarginAxis+c/2:k.contentHeight-b.eventMarginAxis+c/2,e=k.axis.height;for(p=0,l=s.length;p<l;p++){d=s[p];if(b.axisOnTop){d.top=h+e;d.labelTop=h+e+(d.height-d.labelHeight)/2;d.lineTop=h+e+d.height+c/2;h+=d.height+c}else{h-=d.height+c;d.top=h;d.labelTop=h+(d.height-d.labelHeight)/2;d.lineTop=h-c/2}}for(p=0,l=n.length;p<l;p++){r=n[p];d=r.group;if(d){r.top=d.top}}q=true}if(a<b.minHeight){a=b.minHeight}q=q||(a!=k.actualHeight);k.actualHeight=a;return q};links.Timeline.prototype.clearItems=function(){var a=this.renderQueue.hide;AJS.$.each(this.renderedItems,function(c,b){a.push(b)});this.clusterGenerator.clear();this.items=[]};links.Timeline.prototype.repaintItems=function(){var h,g,n,k;var d=false,f=this.dom,o=this.size,m=this,b=this.renderedItems;if(!f.items){f.items={}}var a=f.items.frame;if(!a){a=document.createElement("DIV");a.style.position="relative";f.content.appendChild(a);f.items.frame=a}a.style.left="0px";a.style.top=o.items.top+"px";a.style.height="0px";f.content.removeChild(a);var j=this.renderQueue;var c=[];d=d||(j.show.length>0)||(j.update.length>0)||(j.hide.length>0);while(n=j.show.shift()){n.showDOM(a);n.getImageUrls(c);b.push(n)}while(n=j.update.shift()){n.updateDOM(a);n.getImageUrls(c);k=AJS.$.inArray(n,this.renderedItems);if(k==-1){b.push(n)}}while(n=j.hide.shift()){n.hideDOM(a);k=AJS.$.inArray(n,this.renderedItems);if(k!=-1){b.splice(k,1)}}AJS.$.each(b,function(q,p){p.updatePosition(m)});this.repaintDeleteButton();this.repaintDragAreas();f.content.appendChild(a);if(c.length){var l=function(){m.render()};var e=false;links.imageloader.loadAll(c,l,e)}return d};links.Timeline.prototype.reflowGroups=function(){var f=false,m=this.options,l=this.size,d=this.dom;var j=0;var b=this.groups;var g=this.dom.groups?this.dom.groups.labels:[];for(var e=0,c=b.length;e<c;e++){var k=b[e];var h=g[e];k.labelWidth=h?h.clientWidth:0;k.labelHeight=h?h.clientHeight:0;k.width=k.labelWidth;j=Math.max(j,k.width)}if(m.groupsWidth!==undefined){j=d.groups.frame?d.groups.frame.clientWidth:0}j+=1;var a=m.groupsOnRight?l.frameWidth-j:0;f=f||(l.groupsWidth!==j);f=f||(l.groupsLeft!==a);l.groupsWidth=j;l.groupsLeft=a;return f};links.Timeline.prototype.repaintGroups=function(){var u=this.dom,f=this,b=this.options,n=this.size,w=this.groups;if(u.groups===undefined){u.groups={}}var v=u.groups.labels;if(!v){v=[];u.groups.labels=v}var g=u.groups.labelLines;if(!g){g=[];u.groups.labelLines=g}var o=u.groups.itemLines;if(!o){o=[];u.groups.itemLines=o}var m=u.groups.frame;if(!m){m=document.createElement("DIV");m.className="timeline-groups-axis";m.style.position="absolute";m.style.overflow="hidden";m.style.top="0px";m.style.height="100%";u.frame.appendChild(m);u.groups.frame=m}m.style.left=n.groupsLeft+"px";m.style.width=(b.groupsWidth!==undefined)?b.groupsWidth:n.groupsWidth+"px";if(w.length==0){m.style.display="none"}else{m.style.display=""}var q=v.length,k=w.length;for(var s=0,r=Math.min(q,k);s<r;s++){var h=w[s];var j=v[s];j.innerHTML=this.getGroupName(h);j.style.display=""}for(var s=q;s<k;s++){var h=w[s];var j=document.createElement("DIV");j.className="timeline-groups-text";j.style.position="absolute";if(b.groupsWidth===undefined){j.style.whiteSpace="nowrap"}j.innerHTML=this.getGroupName(h);m.appendChild(j);v[s]=j;var e=document.createElement("DIV");e.className="timeline-axis-grid timeline-axis-grid-minor";e.style.position="absolute";e.style.left="0px";e.style.width="100%";e.style.height="0px";e.style.borderTopStyle="solid";m.appendChild(e);g[s]=e;var d=document.createElement("DIV");d.className="timeline-axis-grid timeline-axis-grid-minor";d.style.position="absolute";d.style.left="0px";d.style.width="100%";d.style.height="0px";d.style.borderTopStyle="solid";u.content.insertBefore(d,u.content.firstChild);o[s]=d}for(var s=k;s<q;s++){var j=v[s],e=g[s],d=o[s];m.removeChild(j);m.removeChild(e);u.content.removeChild(d)}v.splice(k,q-k);g.splice(k,q-k);o.splice(k,q-k);m.style.borderStyle=b.groupsOnRight?"none none none solid":"none solid none none";for(var s=0,r=w.length;s<r;s++){var h=w[s],j=v[s],e=g[s],d=o[s];j.style.top=h.labelTop+"px";e.style.top=h.lineTop+"px";d.style.top=h.lineTop+"px";d.style.width=n.contentWidth+"px"}if(!u.groups.background){var t=document.createElement("DIV");t.className="timeline-axis";t.style.position="absolute";t.style.left="0px";t.style.width="100%";t.style.border="none";m.appendChild(t);u.groups.background=t}u.groups.background.style.top=n.axis.top+"px";u.groups.background.style.height=n.axis.height+"px";if(!u.groups.line){var l=document.createElement("DIV");l.className="timeline-axis";l.style.position="absolute";l.style.left="0px";l.style.width="100%";l.style.height="0px";m.appendChild(l);u.groups.line=l}u.groups.line.style.top=n.axis.line+"px";if(u.groups.frame&&w.length){var p=[];links.imageloader.filterImageUrls(u.groups.frame,p);if(p.length){var c=function(){f.render()};var a=false;links.imageloader.loadAll(p,c,a)}}};links.Timeline.prototype.repaintCurrentTime=function(){var l=this.options,e=this.dom,k=this.size;if(!l.showCurrentTime){if(e.currentTime){e.contentTimelines.removeChild(e.currentTime);delete e.currentTime}return}if(!e.currentTime){var a=document.createElement("DIV");a.className="timeline-currenttime";a.style.position="absolute";a.style.top="0px";a.style.height="100%";e.contentTimelines.appendChild(a);e.currentTime=a}else{e.currentTime.style.height=k.contentHeight+"px"}var b=new Date();var f=new Date(b.valueOf()+this.clientTimeOffset);var h=this.timeToScreen(f);var d=(h>-k.contentWidth&&h<2*k.contentWidth);e.currentTime.style.display=d?"":"none";e.currentTime.style.left=h+"px";e.currentTime.title="Current time: "+f;if(this.currentTimeTimer!=undefined){clearTimeout(this.currentTimeTimer);delete this.currentTimeTimer}var j=this;var g=function(){j.repaintCurrentTime()};var c=1/this.conversion.factor/2;if(c<30){c=30}this.currentTimeTimer=setTimeout(g,c)};links.Timeline.prototype.repaintCustomTime=function(){var c=this.options,g=this.dom,d=this.size;if(!c.showCustomTime){if(g.customTime){g.contentTimelines.removeChild(g.customTime);delete g.customTime}return}if(!g.customTime){var b=document.createElement("DIV");b.className="timeline-customtime";b.style.position="absolute";b.style.top="0px";b.style.height="100%";var e=document.createElement("DIV");e.style.position="relative";e.style.top="0px";e.style.left="-10px";e.style.height="100%";e.style.width="20px";b.appendChild(e);g.contentTimelines.appendChild(b);g.customTime=b;this.customTime=new Date()}var a=this.timeToScreen(this.customTime),f=(a>-d.contentWidth&&a<2*d.contentWidth);g.customTime.style.display=f?"":"none";g.customTime.style.left=a+"px";g.customTime.title="Time: "+this.customTime};links.Timeline.prototype.repaintDeleteButton=function(){var d=this,g=this.dom,f=g.items.frame;var h=g.items.deleteButton;if(!h){h=document.createElement("DIV");h.className="timeline-navigation-delete";h.style.position="absolute";f.appendChild(h);g.items.deleteButton=h}var a=this.selection?this.selection.index:-1,c=this.selection?this.items[a]:undefined;if(c&&c.rendered&&this.isEditable(c)){var b=c.getRight(this),e=c.top;h.style.left=b+"px";h.style.top=e+"px";h.style.display="";f.removeChild(h);f.appendChild(h)}else{h.style.display="none"}};links.Timeline.prototype.repaintDragAreas=function(){var k=this,m=this.options,d=this.dom,a=this.dom.items.frame;var c=d.items.dragLeft;if(!c){c=document.createElement("DIV");c.className="timeline-event-range-drag-left";c.style.position="absolute";a.appendChild(c);d.items.dragLeft=c}var e=d.items.dragRight;if(!e){e=document.createElement("DIV");e.className="timeline-event-range-drag-right";e.style.position="absolute";a.appendChild(e);d.items.dragRight=e}var f=this.selection?this.selection.index:-1,l=this.selection?this.items[f]:undefined;if(l&&l.rendered&&this.isEditable(l)&&(l instanceof links.Timeline.ItemRange)){var b=this.timeToScreen(l.start),h=this.timeToScreen(l.end),g=l.top,j=l.height;c.style.left=b+"px";c.style.top=g+"px";c.style.width=m.dragAreaWidth+"px";c.style.height=j+"px";c.style.display="";a.removeChild(c);a.appendChild(c);e.style.left=(h-m.dragAreaWidth)+"px";e.style.top=g+"px";e.style.width=m.dragAreaWidth+"px";e.style.height=j+"px";e.style.display="";a.removeChild(e);a.appendChild(e)}else{c.style.display="none";e.style.display="none"}};links.Timeline.prototype.repaintNavigation=function(){var l=this,m=this.options,g=this.dom,e=g.frame,f=g.navBar;if(!f){var a=m.showButtonNew&&m.editable;var d=m.showNavigation&&(m.zoomable||m.moveable);if(d||a){f=document.createElement("DIV");f.style.position="absolute";f.className="timeline-navigation";if(m.groupsOnRight){f.style.left="10px"}else{f.style.right="32px"}if(m.axisOnTop){f.style.bottom="10px"}else{f.style.top="10px"}g.navBar=f;g.container.appendChild(f)}if(a){f.addButton=document.createElement("DIV");f.addButton.className="timeline-navigation-new";f.addButton.title=m.CREATE_NEW_EVENT;var j=function(o){links.Timeline.preventDefault(o);links.Timeline.stopPropagation(o);var t=l.size.contentWidth;var s=t/2;var v=l.screenToTime(s-t/10);var n=l.screenToTime(s+t/10);if(m.snapEvents){l.step.snap(v);l.step.snap(n)}var q=m.NEW;var u=l.groups.length?l.groups[0].content:undefined;var r=true;l.addItem({start:v,end:n,content:q,group:u},r);var p=(l.items.length-1);l.selectItem(p);l.applyAdd=true;l.trigger("add");if(l.applyAdd){l.render({animate:false});l.selectItem(p)}else{l.deleteItem(p)}};links.Timeline.addEventListener(f.addButton,"mousedown",j);f.appendChild(f.addButton)}if(a&&d){f.addButton.style.borderRightWidth="1px";f.addButton.style.borderRightStyle="solid"}if(d){if(m.zoomable){f.zoomInButton=document.createElement("DIV");f.zoomInButton.className="timeline-navigation-zoom-in";f.zoomInButton.title=this.options.ZOOM_IN;var c=function(n){links.Timeline.preventDefault(n);links.Timeline.stopPropagation(n);l.zoom(0.4);l.trigger("rangechange");l.trigger("rangechanged")};links.Timeline.addEventListener(f.zoomInButton,"mousedown",c);f.appendChild(f.zoomInButton);f.zoomOutButton=document.createElement("DIV");f.zoomOutButton.className="timeline-navigation-zoom-out";f.zoomOutButton.title=this.options.ZOOM_OUT;var h=function(n){links.Timeline.preventDefault(n);links.Timeline.stopPropagation(n);l.zoom(-0.4);l.trigger("rangechange");l.trigger("rangechanged")};links.Timeline.addEventListener(f.zoomOutButton,"mousedown",h);f.appendChild(f.zoomOutButton)}if(m.moveable){f.moveLeftButton=document.createElement("DIV");f.moveLeftButton.className="timeline-navigation-move-left";f.moveLeftButton.title=this.options.MOVE_LEFT;var k=function(n){links.Timeline.preventDefault(n);links.Timeline.stopPropagation(n);l.move(-0.2);l.trigger("rangechange");l.trigger("rangechanged")};links.Timeline.addEventListener(f.moveLeftButton,"mousedown",k);f.appendChild(f.moveLeftButton);f.moveRightButton=document.createElement("DIV");f.moveRightButton.className="timeline-navigation-move-right";f.moveRightButton.title=this.options.MOVE_RIGHT;var b=function(n){links.Timeline.preventDefault(n);links.Timeline.stopPropagation(n);l.move(0.2);l.trigger("rangechange");l.trigger("rangechanged")};links.Timeline.addEventListener(f.moveRightButton,"mousedown",b);f.appendChild(f.moveRightButton)}}}};links.Timeline.prototype.setCurrentTime=function(b){var a=new Date();this.clientTimeOffset=(b.valueOf()-a.valueOf());this.repaintCurrentTime()};links.Timeline.prototype.getCurrentTime=function(){var a=new Date();return new Date(a.valueOf()+this.clientTimeOffset)};links.Timeline.prototype.setCustomTime=function(a){this.customTime=new Date(a.valueOf());this.repaintCustomTime()};links.Timeline.prototype.getCustomTime=function(){return new Date(this.customTime.valueOf())};links.Timeline.prototype.setScale=function(b,a){this.step.setScale(b,a);this.render()};links.Timeline.prototype.setAutoScale=function(a){this.step.setAutoScale(a);this.render()};links.Timeline.prototype.redraw=function(){this.setData(this.data)};links.Timeline.prototype.checkResize=function(){this.render()};links.Timeline.prototype.isEditable=function(a){if(a){if(a.editable!=undefined){return a.editable}else{return this.options.editable}}return false};links.Timeline.prototype.recalcConversion=function(){this.conversion.offset=this.start.valueOf();this.conversion.factor=this.size.contentWidth/(this.end.valueOf()-this.start.valueOf())};links.Timeline.prototype.screenToTime=function(a){var b=this.conversion;return new Date(a/b.factor+b.offset)};links.Timeline.prototype.timeToScreen=function(b){var a=this.conversion;return(b.valueOf()-a.offset)*a.factor};links.Timeline.prototype.onTouchStart=function(c){var e=this.eventParams,b=this;if(e.touchDown){return}e.touchDown=true;e.zoomed=false;this.onMouseDown(c);if(!e.onTouchMove){e.onTouchMove=function(f){b.onTouchMove(f)};links.Timeline.addEventListener(document,"touchmove",e.onTouchMove)}if(!e.onTouchEnd){e.onTouchEnd=function(f){b.onTouchEnd(f)};links.Timeline.addEventListener(document,"touchend",e.onTouchEnd)}var d=links.Timeline.getTarget(c);var a=this.getItemIndex(d);e.doubleTapStartPrev=e.doubleTapStart;e.doubleTapStart=(new Date()).valueOf();e.doubleTapItemPrev=e.doubleTapItem;e.doubleTapItem=a;links.Timeline.preventDefault(c)};links.Timeline.prototype.onTouchMove=function(d){var g=this.eventParams;if(d.scale&&d.scale!==1){g.zoomed=true}if(!g.zoomed){this.onMouseMove(d)}else{if(this.options.zoomable){g.zoomed=true;var f=d.scale,b=(g.end.valueOf()-g.start.valueOf()),c=b/f,e=c-b,h=new Date(parseInt(g.start.valueOf()-e/2)),a=new Date(parseInt(g.end.valueOf()+e/2));this.setVisibleChartRange(h,a);this.trigger("rangechange")}}links.Timeline.preventDefault(d)};links.Timeline.prototype.onTouchEnd=function(d){var f=this.eventParams;var c=this;f.touchDown=false;if(f.zoomed){this.trigger("rangechanged")}if(f.onTouchMove){links.Timeline.removeEventListener(document,"touchmove",f.onTouchMove);delete f.onTouchMove}if(f.onTouchEnd){links.Timeline.removeEventListener(document,"touchend",f.onTouchEnd);delete f.onTouchEnd}this.onMouseUp(d);var g=500;var a=(new Date()).valueOf();var e=links.Timeline.getTarget(d);var b=this.getItemIndex(e);if(f.doubleTapStartPrev&&(a-f.doubleTapStartPrev)<g&&f.doubleTapItem==f.doubleTapItemPrev){f.touchDown=true;c.onDblClick(d);f.touchDown=false}links.Timeline.preventDefault(d)};links.Timeline.prototype.onMouseDown=function(b){b=b||window.event;var e=this.eventParams,q=this.options,f=this.dom;var p=b.which?(b.which==1):(b.button==1);if(!p&&!e.touchDown){return}e.mouseX=links.Timeline.getPageX(b);e.mouseY=links.Timeline.getPageY(b);e.frameLeft=links.Timeline.getAbsoluteLeft(this.dom.content);e.frameTop=links.Timeline.getAbsoluteTop(this.dom.content);e.previousLeft=0;e.previousOffset=0;e.moved=false;e.start=new Date(this.start.valueOf());e.end=new Date(this.end.valueOf());e.target=links.Timeline.getTarget(b);var d=(f.items&&f.items.dragLeft)?f.items.dragLeft:undefined;var g=(f.items&&f.items.dragRight)?f.items.dragRight:undefined;e.itemDragLeft=(e.target===d);e.itemDragRight=(e.target===g);if(e.itemDragLeft||e.itemDragRight){e.itemIndex=this.selection?this.selection.index:undefined}else{e.itemIndex=this.getItemIndex(e.target)}e.customTime=(e.target===f.customTime||e.target.parentNode===f.customTime)?this.customTime:undefined;e.addItem=(q.editable&&b.ctrlKey);if(e.addItem){var l=e.mouseX-e.frameLeft;var k=e.mouseY-e.frameTop;var n=this.screenToTime(l);if(q.snapEvents){this.step.snap(n)}var a=new Date(n.valueOf());var h=q.NEW;var m=this.getGroupFromHeight(k);this.addItem({start:n,end:a,content:h,group:this.getGroupName(m)});e.itemIndex=(this.items.length-1);this.selectItem(e.itemIndex);e.itemDragRight=true}var o=this.items[e.itemIndex];var c=this.isSelected(e.itemIndex);e.editItem=c&&this.isEditable(o);if(e.editItem){e.itemStart=o.start;e.itemEnd=o.end;e.itemGroup=o.group;e.itemLeft=o.start?this.timeToScreen(o.start):undefined;e.itemRight=o.end?this.timeToScreen(o.end):undefined}else{this.dom.frame.style.cursor="move"}if(!e.touchDown){var j=this;if(!e.onMouseMove){e.onMouseMove=function(r){j.onMouseMove(r)};links.Timeline.addEventListener(document,"mousemove",e.onMouseMove)}if(!e.onMouseUp){e.onMouseUp=function(r){j.onMouseUp(r)};links.Timeline.addEventListener(document,"mouseup",e.onMouseUp)}links.Timeline.preventDefault(b)}};links.Timeline.prototype.onMouseMove=function(w){w=w||window.event;var D=this.eventParams,r=this.size,z=this.dom,e=this.options;var m=links.Timeline.getPageX(w);var k=links.Timeline.getPageY(w);if(D.mouseX==undefined){D.mouseX=m}if(D.mouseY==undefined){D.mouseY=k}var t=m-D.mouseX;var s=k-D.mouseY;if(Math.abs(t)>=1){D.moved=true}if(D.customTime){var o=this.timeToScreen(D.customTime);var q=o+t;this.customTime=this.screenToTime(q);this.repaintCustomTime();this.trigger("timechange")}else{if(D.editItem){this.trigger("moved");var B=this.items[D.itemIndex],f,C;if(D.itemDragLeft){f=D.itemLeft+t;C=D.itemRight;B.start=this.screenToTime(f);if(e.snapEvents){this.step.snap(B.start);f=this.timeToScreen(B.start)}if(f>C){f=C;B.start=this.screenToTime(f)}}else{if(D.itemDragRight){f=D.itemLeft;C=D.itemRight+t;B.end=this.screenToTime(C);if(e.snapEvents){this.step.snap(B.end);C=this.timeToScreen(B.end)}if(C<f){C=f;B.end=this.screenToTime(C)}}else{f=D.itemLeft+t;B.start=this.screenToTime(f);if(e.snapEvents){this.step.snap(B.start);f=this.timeToScreen(B.start)}if(B.end){C=f+(D.itemRight-D.itemLeft);B.end=this.screenToTime(C)}}}B.setPosition(f,C);var u=D.itemDragLeft||D.itemDragRight;if(this.groups.length&&!u){var n=k-D.frameTop;var j=this.getGroupFromHeight(n);if(e.groupsChangeable&&B.group!==j){var g=AJS.$.inArray(B,this.items);this.changeItem(g,{group:this.getGroupName(j)})}else{this.repaintDeleteButton();this.repaintDragAreas()}}else{this.render()}}else{if(e.moveable){var A=(D.end.valueOf()-D.start.valueOf());var E=Math.round((-t)/r.contentWidth*A);var b=new Date(D.start.valueOf()+E);var a=new Date(D.end.valueOf()+E);this.applyRange(b,a);var l=(this.start.valueOf()-b.valueOf());if(l){E+=l}this.recalcConversion();var d=D.previousLeft||0;var v=parseFloat(z.items.frame.style.left)||0;var p=D.previousOffset||0;var c=p+(v-d);var h=-E/A*r.contentWidth+c;z.items.frame.style.left=(h)+"px";D.previousOffset=c;D.previousLeft=parseFloat(z.items.frame.style.left)||h;this.repaintCurrentTime();this.repaintCustomTime();this.repaintAxis();this.trigger("rangechange")}}}links.Timeline.preventDefault(w)};links.Timeline.prototype.onMouseUp=function(d){var e=this.eventParams,a=this.options;d=d||window.event;this.dom.frame.style.cursor="auto";if(e.onMouseMove){links.Timeline.removeEventListener(document,"mousemove",e.onMouseMove);delete e.onMouseMove}if(e.onMouseUp){links.Timeline.removeEventListener(document,"mouseup",e.onMouseUp);delete e.onMouseUp}if(e.customTime){this.trigger("timechanged")}else{if(e.editItem){var c=this.items[e.itemIndex];if(e.moved||e.addItem){this.applyChange=true;this.applyAdd=true;this.updateData(e.itemIndex,{start:c.start,end:c.end});this.trigger(e.addItem?"add":"change");if(e.addItem){if(this.applyAdd){this.updateData(e.itemIndex,{start:c.start,end:c.end,content:c.content,group:this.getGroupName(c.group)})}else{this.deleteItem(e.itemIndex)}}else{if(this.applyChange){this.updateData(e.itemIndex,{start:c.start,end:c.end})}else{delete this.applyChange;delete this.applyAdd;var c=this.items[e.itemIndex],b=c.dom;c.start=e.itemStart;c.end=e.itemEnd;c.group=e.itemGroup;c.setPosition(e.itemLeft,e.itemRight)}}if(this.options.cluster){this.clusterGenerator.updateData()}this.render()}}else{if(!e.moved&&!e.zoomed){if(e.target===this.dom.items.deleteButton){if(this.selection){this.confirmDeleteItem(this.selection.index)}}else{if(a.selectable){if(e.itemIndex!=undefined){if(!this.isSelected(e.itemIndex)){this.selectItem(e.itemIndex);this.trigger("select")}}else{this.unselectItem();this.trigger("select")}}}}else{this.render();if((e.moved&&a.moveable)||(e.zoomed&&a.zoomable)){this.trigger("rangechanged")}}}}};links.Timeline.prototype.onDblClick=function(d){var f=this.eventParams,a=this.options,e=this.dom,b=this.size;d=d||window.event;if(f.itemIndex!=undefined){var c=this.items[f.itemIndex];if(c&&this.isEditable(c)){this.trigger("edit")}}else{if(a.editable){this.trigger("add")}}links.Timeline.preventDefault(d)};links.Timeline.prototype.onMouseWheel=function(c){if(!this.options.zoomable){return}if(!c){c=window.event}var d=0;if(c.wheelDelta){d=c.wheelDelta/120}else{if(c.detail){d=-c.detail/3}}if(d){var b=this;var a=function(){var g=d/5;var f=links.Timeline.getAbsoluteLeft(b.dom.content);var e=links.Timeline.getPageX(c);var h=(e!=undefined&&f!=undefined)?b.screenToTime(e-f):undefined;b.zoom(g,h);b.trigger("rangechange");b.trigger("rangechanged")};a()}links.Timeline.preventDefault(c)};links.Timeline.prototype.zoom=function(g,h){if(h==undefined){h=new Date((this.start.valueOf()+this.end.valueOf())/2)}if(g>=1){g=0.9}if(g<=-1){g=-0.9}if(g<0){g=g/(1+g)}var e=(this.start.valueOf()-h);var d=(this.end.valueOf()-h);var a=new Date(this.start.valueOf()-e*g);var f=new Date(this.end.valueOf()-d*g);var c=(f.valueOf()-a.valueOf());var b=Number(this.options.zoomMin)||10;if(b<10){b=10}if(c>=b){this.applyRange(a,f,h);this.render({animate:this.options.animate&&this.options.animateZoom})}};links.Timeline.prototype.move=function(b){var d=(this.end.valueOf()-this.start.valueOf());var a=new Date(this.start.valueOf()+d*b);var c=new Date(this.end.valueOf()+d*b);this.applyRange(a,c);this.render()};links.Timeline.prototype.applyRange=function(b,e,a){var c=b.valueOf();var n=e.valueOf();var d=(n-c);var q=this.options;var k=1000*60*60*24*365;var h=Number(q.zoomMin)||10;if(h<10){h=10}var p=Number(q.zoomMax)||10000*k;if(p>10000*k){p=10000*k}if(p<h){p=h}var g=q.min?q.min.valueOf():undefined;var m=q.max?q.max.valueOf():undefined;if(g!=undefined&&m!=undefined){if(g>=m){var l=1000*60*60*24;m=g+l}if(p>(m-g)){p=(m-g)}if(h>(m-g)){h=(m-g)}}if(c>=n){n+=1000*60*60*24}if(d<h){var o=(h-d);var j=a?(a.valueOf()-c)/d:0.5;c-=Math.round(o*j);n+=Math.round(o*(1-j))}if(d>p){var o=(d-p);var j=a?(a.valueOf()-c)/d:0.5;c+=Math.round(o*j);n-=Math.round(o*(1-j))}if(g!=undefined){var o=(c-g);if(o<0){c-=o;n-=o}}if(m!=undefined){var o=(m-n);if(o<0){c+=o;n+=o}}this.start=new Date(c);this.end=new Date(n)};links.Timeline.prototype.confirmDeleteItem=function(a){this.applyDelete=true;if(!this.isSelected(a)){this.selectItem(a)}this.trigger("delete");if(this.applyDelete){this.deleteItem(a)}delete this.applyDelete};links.Timeline.prototype.deleteItem=function(a,c){if(a>=this.items.length){throw"Cannot delete row, index out of range"}if(this.selection){if(this.selection.index==a){this.unselectItem()}else{if(this.selection.index>a){this.selection.index--}}}var b=this.items.splice(a,1)[0];this.renderQueue.hide.push(b);if(this.data){if(google&&google.visualization&&this.data instanceof google.visualization.DataTable){this.data.removeRow(a)}else{if(links.Timeline.isArray(this.data)){this.data.splice(a,1)}else{throw"Cannot delete row from data, unknown data type"}}}if(this.options.cluster){this.clusterGenerator.updateData()}if(!c){this.render()}};links.Timeline.prototype.deleteAllItems=function(){this.unselectItem();this.clearItems();this.deleteGroups();if(this.data){if(google&&google.visualization&&this.data instanceof google.visualization.DataTable){this.data.removeRows(0,this.data.getNumberOfRows())}else{if(links.Timeline.isArray(this.data)){this.data.splice(0,this.data.length)}else{throw"Cannot delete row from data, unknown data type"}}}if(this.options.cluster){this.clusterGenerator.updateData()}this.render()};links.Timeline.prototype.getGroupFromHeight=function(b){var c,d,a=this.groups;if(a.length){if(this.options.axisOnTop){for(c=a.length-1;c>=0;c--){d=a[c];if(b>d.top){return d}}}else{for(c=0;c<a.length;c++){d=a[c];if(b>d.top){return d}}}return d}return undefined};links.Timeline.Item=function(c,a){if(c){this.start=c.start;this.end=c.end;this.content=c.content;this.className=c.className;this.editable=c.editable;this.group=c.group}this.top=0;this.left=0;this.width=0;this.height=0;this.lineWidth=0;this.dotWidth=0;this.dotHeight=0;this.rendered=false;if(a){for(var b in a){if(a.hasOwnProperty(b)){this[b]=a[b]}}}};links.Timeline.Item.prototype.reflow=function(){return false};links.Timeline.Item.prototype.getImageUrls=function(a){if(this.dom){links.imageloader.filterImageUrls(this.dom,a)}};links.Timeline.Item.prototype.select=function(){};links.Timeline.Item.prototype.unselect=function(){};links.Timeline.Item.prototype.createDOM=function(){};links.Timeline.Item.prototype.showDOM=function(a){};links.Timeline.Item.prototype.hideDOM=function(a){};links.Timeline.Item.prototype.updateDOM=function(){};links.Timeline.Item.prototype.updatePosition=function(a){};links.Timeline.Item.prototype.isRendered=function(){return this.rendered};links.Timeline.Item.prototype.isVisible=function(b,a){return false};links.Timeline.Item.prototype.setPosition=function(b,a){};links.Timeline.Item.prototype.getRight=function(a){return 0};links.Timeline.Item.prototype.getWidth=function(a){return this.width||0};links.Timeline.ItemBox=function(b,a){links.Timeline.Item.call(this,b,a)};links.Timeline.ItemBox.prototype=new links.Timeline.Item();links.Timeline.ItemBox.prototype.reflow=function(){var e=this.dom,c=e.dot.offsetHeight,d=e.dot.offsetWidth,a=e.line.offsetWidth,b=((this.dotHeight!=c)||(this.dotWidth!=d)||(this.lineWidth!=a));this.dotHeight=c;this.dotWidth=d;this.lineWidth=a;return b};links.Timeline.ItemBox.prototype.select=function(){var a=this.dom;links.Timeline.addClassName(a,"timeline-event-selected");links.Timeline.addClassName(a.line,"timeline-event-selected");links.Timeline.addClassName(a.dot,"timeline-event-selected")};links.Timeline.ItemBox.prototype.unselect=function(){var a=this.dom;links.Timeline.removeClassName(a,"timeline-event-selected");links.Timeline.removeClassName(a.line,"timeline-event-selected");links.Timeline.removeClassName(a.dot,"timeline-event-selected")};links.Timeline.ItemBox.prototype.createDOM=function(){var c=document.createElement("DIV");c.style.position="absolute";c.style.left=this.left+"px";c.style.top=this.top+"px";var b=document.createElement("DIV");b.className="timeline-event-content";b.innerHTML=this.content;c.appendChild(b);var d=document.createElement("DIV");d.style.position="absolute";d.style.width="0px";c.line=d;var a=document.createElement("DIV");a.style.position="absolute";a.style.width="0px";a.style.height="0px";c.dot=a;this.dom=c;this.updateDOM();return c};links.Timeline.ItemBox.prototype.showDOM=function(a){var b=this.dom;if(!b){b=this.createDOM()}if(b.parentNode!=a){if(b.parentNode){this.hideDOM()}a.appendChild(b);a.insertBefore(b.line,a.firstChild);a.appendChild(b.dot);this.rendered=true}};links.Timeline.ItemBox.prototype.hideDOM=function(){var c=this.dom;if(c){var b=c.parentNode;if(b){var a=function(d){if(d&&d.parentNode){d.parentNode.removeChild(d)}};a(c.line);a(c.dot);a(c);this.rendered=false}}};links.Timeline.ItemBox.prototype.updateDOM=function(){var b=this.dom;if(b){var c=b.line;var a=b.dot;b.firstChild.innerHTML=this.content;b.className="timeline-event timeline-event-box";c.className="timeline-event timeline-event-line";a.className="timeline-event timeline-event-dot";if(this.isCluster){links.Timeline.addClassName(b,"timeline-event-cluster");links.Timeline.addClassName(c,"timeline-event-cluster");links.Timeline.addClassName(a,"timeline-event-cluster")}if(this.className){links.Timeline.addClassName(b,this.className);links.Timeline.addClassName(c,this.className);links.Timeline.addClassName(a,this.className)}}};links.Timeline.ItemBox.prototype.updatePosition=function(g){var e=this.dom;if(e){var c=g.timeToScreen(this.start),f=g.options.axisOnTop,a=g.size.axis.top,d=g.size.axis.height,h=(g.options.box&&g.options.box.align)?g.options.box.align:undefined;e.style.top=this.top+"px";if(h=="right"){e.style.left=(c-this.width)+"px"}else{if(h=="left"){e.style.left=(c)+"px"}else{e.style.left=(c-this.width/2)+"px"}}var j=e.line;var b=e.dot;j.style.left=(c-this.lineWidth/2)+"px";b.style.left=(c-this.dotWidth/2)+"px";if(f){j.style.top=d+"px";j.style.height=Math.max(this.top-d,0)+"px";b.style.top=(d-this.dotHeight/2)+"px"}else{j.style.top=(this.top+this.height)+"px";j.style.height=Math.max(a-this.top-this.height,0)+"px";b.style.top=(a-this.dotHeight/2)+"px"}}};links.Timeline.ItemBox.prototype.isVisible=function(b,a){if(this.cluster){return false}return(this.start>b)&&(this.start<a)};links.Timeline.ItemBox.prototype.setPosition=function(b,a){var c=this.dom;c.style.left=(b-this.width/2)+"px";c.line.style.left=(b-this.lineWidth/2)+"px";c.dot.style.left=(b-this.dotWidth/2)+"px";if(this.group){this.top=this.group.top;c.style.top=this.top+"px"}};links.Timeline.ItemBox.prototype.getRight=function(c){var a=(c.options.box&&c.options.box.align)?c.options.box.align:undefined;var d=c.timeToScreen(this.start);var b;if(a=="right"){b=d}else{if(a=="left"){b=(d+this.width)}else{b=(d+this.width/2)}}return b};links.Timeline.ItemRange=function(b,a){links.Timeline.Item.call(this,b,a)};links.Timeline.ItemRange.prototype=new links.Timeline.Item();links.Timeline.ItemRange.prototype.select=function(){var a=this.dom;links.Timeline.addClassName(a,"timeline-event-selected")};links.Timeline.ItemRange.prototype.unselect=function(){var a=this.dom;links.Timeline.removeClassName(a,"timeline-event-selected")};links.Timeline.ItemRange.prototype.createDOM=function(){var b=document.createElement("DIV");b.style.position="absolute";var a=document.createElement("DIV");a.className="timeline-event-content";b.appendChild(a);this.dom=b;this.updateDOM();return b};links.Timeline.ItemRange.prototype.showDOM=function(a){var b=this.dom;if(!b){b=this.createDOM()}if(b.parentNode!=a){if(b.parentNode){this.hideDOM()}a.appendChild(b);this.rendered=true}};links.Timeline.ItemRange.prototype.hideDOM=function(){var a=this.dom;if(a){if(a.parentNode){a.parentNode.removeChild(a)}this.rendered=false}};links.Timeline.ItemRange.prototype.updateDOM=function(){var a=this.dom;if(a){a.firstChild.innerHTML=this.content;a.className="timeline-event timeline-event-range";if(this.isCluster){links.Timeline.addClassName(a,"timeline-event-cluster")}if(this.className){links.Timeline.addClassName(a,this.className)}}};links.Timeline.ItemRange.prototype.updatePosition=function(c){var e=this.dom;if(e){var a=c.size.contentWidth,d=c.timeToScreen(this.start),b=c.timeToScreen(this.end);if(d<-a){d=-a}if(b>2*a){b=2*a}e.style.top=this.top+"px";e.style.left=d+"px";e.style.width=Math.max(b-d,1)+"px"}};links.Timeline.ItemRange.prototype.isVisible=function(b,a){if(this.cluster){return false}return(this.end>b)&&(this.start<a)};links.Timeline.ItemRange.prototype.setPosition=function(b,a){var c=this.dom;c.style.left=b+"px";c.style.width=(a-b)+"px";if(this.group){this.top=this.group.top;c.style.top=this.top+"px"}};links.Timeline.ItemRange.prototype.getRight=function(a){return a.timeToScreen(this.end)};links.Timeline.ItemRange.prototype.getWidth=function(a){return a.timeToScreen(this.end)-a.timeToScreen(this.start)};links.Timeline.ItemDot=function(b,a){links.Timeline.Item.call(this,b,a)};links.Timeline.ItemDot.prototype=new links.Timeline.Item();links.Timeline.ItemDot.prototype.reflow=function(){var e=this.dom,c=e.dot.offsetHeight,d=e.dot.offsetWidth,b=e.content.offsetHeight,a=((this.dotHeight!=c)||(this.dotWidth!=d)||(this.contentHeight!=b));this.dotHeight=c;this.dotWidth=d;this.contentHeight=b;return a};links.Timeline.ItemDot.prototype.select=function(){var a=this.dom;links.Timeline.addClassName(a,"timeline-event-selected")};links.Timeline.ItemDot.prototype.unselect=function(){var a=this.dom;links.Timeline.removeClassName(a,"timeline-event-selected")};links.Timeline.ItemDot.prototype.createDOM=function(){var c=document.createElement("DIV");c.style.position="absolute";var b=document.createElement("DIV");b.className="timeline-event-content";c.appendChild(b);var a=document.createElement("DIV");a.style.position="absolute";a.style.width="0px";a.style.height="0px";c.appendChild(a);c.content=b;c.dot=a;this.dom=c;this.updateDOM();return c};links.Timeline.ItemDot.prototype.showDOM=function(a){var b=this.dom;if(!b){b=this.createDOM()}if(b.parentNode!=a){if(b.parentNode){this.hideDOM()}a.appendChild(b);this.rendered=true}};links.Timeline.ItemDot.prototype.hideDOM=function(){var a=this.dom;if(a){if(a.parentNode){a.parentNode.removeChild(a)}this.rendered=false}};links.Timeline.ItemDot.prototype.updateDOM=function(){if(this.dom){var b=this.dom;var a=b.dot;b.firstChild.innerHTML=this.content;a.className="timeline-event timeline-event-dot";if(this.isCluster){links.Timeline.addClassName(b,"timeline-event-cluster");links.Timeline.addClassName(a,"timeline-event-cluster")}if(this.className){links.Timeline.addClassName(b,this.className);links.Timeline.addClassName(a,this.className)}}};links.Timeline.ItemDot.prototype.updatePosition=function(a){var c=this.dom;if(c){var b=a.timeToScreen(this.start);c.style.top=this.top+"px";c.style.left=(b-this.dotWidth/2)+"px";c.content.style.marginLeft=(1.5*this.dotWidth)+"px";c.dot.style.top=((this.height-this.dotHeight)/2)+"px"}};links.Timeline.ItemDot.prototype.isVisible=function(b,a){if(this.cluster){return false}return(this.start>b)&&(this.start<a)};links.Timeline.ItemDot.prototype.setPosition=function(b,a){var c=this.dom;c.style.left=(b-this.dotWidth/2)+"px";if(this.group){this.top=this.group.top;c.style.top=this.top+"px"}};links.Timeline.ItemDot.prototype.getRight=function(a){return a.timeToScreen(this.start)+this.width};links.Timeline.prototype.getItem=function(a){if(a>=this.items.length){throw"Cannot get item, index out of range"}var c=this.items[a];var b={};b.start=new Date(c.start.valueOf());if(c.end){b.end=new Date(c.end.valueOf())}b.content=c.content;if(c.group){b.group=this.getGroupName(c.group)}if("className" in c){b.className=this.getGroupName(c.className)}if(c.hasOwnProperty("editable")&&(typeof c.editable!="undefined")){b.editable=c.editable}return b};links.Timeline.prototype.addItem=function(a,b){var c=[a];this.addItems(c,b)};links.Timeline.prototype.addItems=function(d,c){var b=this,a=this.items;AJS.$.each(d,function(g,e){var f=a.length;a.push(b.createItem(e));b.updateData(f,e)});if(this.options.cluster){this.clusterGenerator.updateData()}if(!c){this.render({animate:false})}};links.Timeline.prototype.createItem=function(a){var c=a.end?"range":this.options.style;var e={start:a.start,end:a.end,content:a.content,className:a.className,editable:a.editable,group:this.getGroup(a.group)};var d,b=this.options;if(b.axisOnTop){d=this.size.axis.height+b.eventMarginAxis+b.eventMargin/2}else{d=this.size.contentHeight-b.eventMarginAxis-b.eventMargin/2}if(c in this.itemTypes){return new this.itemTypes[c](e,{top:d})}console.log('ERROR: Unknown event style "'+c+'"');return new links.Timeline.Item(e,{top:d})};links.Timeline.prototype.changeItem=function(b,a,d){var e=this.items[b];if(!e){throw"Cannot change item, index out of range"}var c=this.createItem({start:a.hasOwnProperty("start")?a.start:e.start,end:a.hasOwnProperty("end")?a.end:e.end,content:a.hasOwnProperty("content")?a.content:e.content,group:a.hasOwnProperty("group")?a.group:this.getGroupName(e.group),className:a.hasOwnProperty("className")?a.className:e.className,editable:a.hasOwnProperty("editable")?a.editable:e.editable});this.items[b]=c;this.renderQueue.hide.push(e);this.renderQueue.show.push(c);this.updateData(b,a);if(this.options.cluster){this.clusterGenerator.updateData()}if(!d){this.render({animate:false});c.select()}};links.Timeline.prototype.deleteGroups=function(){this.groups=[];this.groupIndexes={}};links.Timeline.prototype.getGroup=function(g){var b=this.groups,c=this.groupIndexes,e=undefined;var f=c[g];if(f==undefined&&g!=undefined){e={content:g,labelTop:0,lineTop:0};b.push(e);b=b.sort(function(j,h){if(j.content>h.content){return 1}if(j.content<h.content){return -1}return 0});for(var d=0,a=b.length;d<a;d++){c[b[d].content]=d}}else{e=b[f]}return e};links.Timeline.prototype.getGroupName=function(a){return a?a.content:undefined};links.Timeline.prototype.cancelChange=function(){this.applyChange=false};links.Timeline.prototype.cancelDelete=function(){this.applyDelete=false};links.Timeline.prototype.cancelAdd=function(){this.applyAdd=false};links.Timeline.prototype.setSelection=function(g,h){if(g!=undefined&&g.length>0){if(g[0].row!=undefined){var e=g[0].row;if(this.items[e]){var j=this.items[e];this.selectItem(e);var a=j.start;var c=j.end;var k;if(c!=undefined){k=(c.valueOf()+a.valueOf())/2}else{k=a.valueOf()}var f=(this.end.valueOf()-this.start.valueOf()),d=new Date(k-f/2),b=new Date(k+f/2);if(!h){this.setVisibleChartRange(d,b)}return true}}}else{this.unselectItem()}return false};links.Timeline.prototype.getSelection=function(){var a=[];if(this.selection){a.push({row:this.selection.index})}return a};links.Timeline.prototype.selectItem=function(a){this.unselectItem();this.selection=undefined;if(this.items[a]!=undefined){var c=this.items[a],b=c.dom;this.selection={index:a};if(c&&c.dom){if(this.isEditable(c)){c.dom.style.cursor="move"}c.select()}this.repaintDeleteButton();this.repaintDragAreas()}};links.Timeline.prototype.isSelected=function(a){return(this.selection&&this.selection.index==a)};links.Timeline.prototype.unselectItem=function(){if(this.selection){var b=this.items[this.selection.index];if(b&&b.dom){var a=b.dom;a.style.cursor="";b.unselect()}this.selection=undefined;this.repaintDeleteButton();this.repaintDragAreas()}};links.Timeline.prototype.stackItems=function(b){if(this.groups.length>0){return}if(b==undefined){b=false}var a=this.stack;if(!a){a={};this.stack=a}a.sortedItems=this.stackOrder(this.renderedItems);a.finalItems=this.stackCalculateFinal(a.sortedItems);if(b||a.timer){var d=this;var c=function(){var e=d.stackMoveOneStep(a.sortedItems,a.finalItems);d.repaint();if(!e){a.timer=setTimeout(c,30)}else{delete a.timer}};if(!a.timer){a.timer=setTimeout(c,30)}}else{this.stackMoveToFinal(a.sortedItems,a.finalItems)}};links.Timeline.prototype.stackCancelAnimation=function(){if(this.stack&&this.stack.timer){clearTimeout(this.stack.timer);delete this.stack.timer}};links.Timeline.prototype.stackOrder=function(a){var c=a.concat([]);var b=this.options.customStackOrder&&(typeof this.options.customStackOrder==="function")?this.options.customStackOrder:function(e,d){if((e instanceof links.Timeline.ItemRange)&&!(d instanceof links.Timeline.ItemRange)){return -1}if(!(e instanceof links.Timeline.ItemRange)&&(d instanceof links.Timeline.ItemRange)){return 1}result=(e.start-d.start);if(!result){result=(d.width-e.width)}if(!result){result=(d.bottom-e.bottom)}return result};c.sort(b);return c};links.Timeline.prototype.stackCalculateFinal=function(l){var p,o,j=this.size,d=j.axis.top,g=j.axis.height,a=this.options,t=a.axisOnTop,c=a.eventMargin,n=a.eventMarginAxis,f=[];for(p=0,o=l.length;p<o;p++){var r=l[p],h,e,k=r.height,m=r.getWidth(this),s=r.getRight(this),b=s-m;if(t){h=g+n+c/2}else{h=d-k-n-c/2}e=h+k;f[p]={left:b,top:h,right:s,bottom:e,height:k,item:r}}if(this.options.stackEvents){for(p=0,o=f.length;p<o;p++){var u=f[p];var q=null;do{q=this.stackItemsCheckOverlap(f,p,0,p-1);if(q!=null){if(t){u.top=q.top+q.height+c}else{u.top=q.top-u.height-c}u.bottom=u.top+u.height}}while(q)}}return f};links.Timeline.prototype.stackMoveOneStep=function(e,j){var c=true;for(i=0,iMax=j.length;i<iMax;i++){var d=j[i],k=d.item;var h=parseInt(k.top);var f=parseInt(d.top);var g=(f-h);if(g){var a=(f==h)?0:((f>h)?1:-1);if(Math.abs(g)>4){a=g/4}var b=parseInt(h+a);if(b!=f){c=false}k.top=b;k.bottom=k.top+k.height}else{k.top=d.top;k.bottom=d.bottom}k.left=d.left;k.right=d.right}return c};links.Timeline.prototype.stackMoveToFinal=function(a,b){for(i=0,iMax=b.length;i<iMax;i++){var d=b[i],c=d.item;c.left=d.left;c.top=d.top;c.right=d.right;c.bottom=d.bottom}};links.Timeline.prototype.stackItemsCheckOverlap=function(h,a,g,f){var b=this.options.eventMargin,j=this.collision;var e=h[a];for(var c=f;c>=g;c--){var d=h[c];if(j(e,d,b)){if(c!=a){return d}}}return undefined};links.Timeline.prototype.collision=function(b,a,c){if(c==undefined){c=0}return(b.left-c<a.right&&b.right+c>a.left&&b.top-c<a.bottom&&b.bottom+c>a.top)};links.Timeline.prototype.trigger=function(d){var c=null,b,a;switch(d){case"rangechange":case"rangechanged":c={start:new Date(this.start.valueOf()),end:new Date(this.end.valueOf())};break;case"timechange":case"timechanged":c={time:new Date(this.customTime.valueOf())};break;case"add":b=this.eventParams.mouseX-links.Timeline.getAbsoluteLeft(this.dom.content);a=this.screenToTime(b);c={start:a};break}links.events.trigger(this,d,c);if(google&&google.visualization){google.visualization.events.trigger(this,d,c)}};links.Timeline.prototype.clusterItems=function(){if(!this.options.cluster){return}var b=this.clusterGenerator.getClusters(this.conversion.factor);if(this.clusters!=b){var a=this.renderQueue;if(this.clusters){AJS.$.each(this.clusters,function(d,c){a.hide.push(c);AJS.$.each(c.items,function(f,e){e.cluster=undefined})})}AJS.$.each(b,function(d,c){AJS.$.each(c.items,function(f,e){e.cluster=c})});this.clusters=b}};links.Timeline.prototype.filterItems=function(){var a=this.renderQueue,d=(this.end-this.start),e=new Date(this.start.valueOf()-d),b=new Date(this.end.valueOf()+d);function c(f){AJS.$.each(f,function(h,g){var k=g.rendered;var j=g.isVisible(e,b);if(k!=j){if(k){a.hide.push(g)}if(j&&AJS.$.inArray(g,a.show)==-1){a.show.push(g)}}})}c(this.items);if(this.clusters){c(this.clusters)}};links.Timeline.ClusterGenerator=function(a){this.timeline=a;this.clear()};links.Timeline.ClusterGenerator.prototype.clear=function(){this.items=[];this.groups={};this.clearCache()};links.Timeline.ClusterGenerator.prototype.clearCache=function(){this.cache={};this.cacheLevel=-1;this.cache[this.cacheLevel]=[]};links.Timeline.ClusterGenerator.prototype.setData=function(a,b){this.items=a||[];this.dataChanged=true;this.applyOnChangedLevel=true;if(b&&b.applyOnChangedLevel){this.applyOnChangedLevel=b.applyOnChangedLevel}};links.Timeline.ClusterGenerator.prototype.updateData=function(){this.dataChanged=true;this.applyOnChangedLevel=false};links.Timeline.ClusterGenerator.prototype.filterData=function(){var b=this.items||[];var a={};this.groups=a;AJS.$.each(b,function(e,d){var g=d.group?d.group.content:"";var f=a[g];if(!f){f=[];a[g]=f}f.push(d);if(d.start){if(d.end){d.center=(d.start.valueOf()+d.end.valueOf())/2}else{d.center=d.start.valueOf()}}});for(var c in a){if(a.hasOwnProperty(c)){a[c].sort(function(e,d){return(e.center-d.center)})}}this.dataChanged=false};links.Timeline.ClusterGenerator.prototype.getClusters=function(K){var a=-1,b=2,x=0,H=5;if(K>0){a=Math.round(Math.log(100/K)/Math.log(b));x=Math.pow(b,a);if(this.timeline.groups&&this.timeline.groups.length){x*=4}}if(this.dataChanged){var w=(a!=this.cacheLevel);var D=this.applyOnChangedLevel?w:true;if(D){this.clearCache();this.filterData()}}this.cacheLevel=a;var h=this.cache[a];if(!h){h=[];for(var q in this.groups){if(this.groups.hasOwnProperty(q)){var r=this.groups[q];var z=r.length;var G=0;while(G<z){var J=r[G];var v=1;var E=G-1;while(E>=0&&(J.center-r[E].center)<x/2){if(!r[E].cluster){v++}E--}var C=G+1;while(C<r.length&&(r[C].center-J.center)<x/2){v++;C++}var A=h.length-1;while(A>=0&&(J.center-h[A].center)<x/2){if(J.group==h[A].group){v++}A--}if(v>H){var n=v-H+1;var d=[];var t=undefined;var y=undefined;var F=undefined;var f=false;var g=0;var u=G;while(d.length<n&&u<r.length){var s=r[u];var e=s.start.valueOf();var c=s.end?s.end.valueOf():s.start.valueOf();d.push(s);if(g){t=(g/(g+1))*t+(1/(g+1))*s.center}else{t=s.center}y=(y!=undefined)?Math.min(y,e):e;F=(F!=undefined)?Math.max(F,c):c;f=f||(s instanceof links.Timeline.ItemRange);g++;u++}var I;var L="Cluster containing "+g+" events. Zoom in to see the individual events.";var B='<div title="'+L+'">'+g+" events</div>";var o=J.group?J.group.content:undefined;if(f){I=this.timeline.createItem({start:new Date(y),end:new Date(F),content:B,group:o})}else{I=this.timeline.createItem({start:new Date(t),content:B,group:o})}I.isCluster=true;I.items=d;AJS.$.each(I.items,function(k,j){j.cluster=I});h.push(I);G+=n}else{delete J.cluster;G+=1}}}}this.cache[a]=h}return h};links.events=links.events||{listeners:[],indexOf:function(b){var d=this.listeners;for(var c=0,a=this.listeners.length;c<a;c++){var e=d[c];if(e&&e.object==b){return c}}return -1},addListener:function(b,d,f){var a=this.indexOf(b);var e=this.listeners[a];if(!e){e={object:b,events:{}};this.listeners.push(e)}var c=e.events[d];if(!c){c=[];e.events[d]=c}if(AJS.$.inArray(f,c)==-1){c.push(f)}},removeListener:function(c,a,j){var f=this.indexOf(c);var b=this.listeners[f];if(b){var h=b.events[a];if(h){var f=AJS.$.inArray(j,h);if(f!=-1){h.splice(f,1)}if(h.length==0){delete b.events[a]}}var d=0;var k=b.events;for(var g in k){if(k.hasOwnProperty(g)){d++}}if(d==0){delete this.listeners[f]}}},removeAllListeners:function(){this.listeners=[]},trigger:function(c,g,e){var b=this.indexOf(c);var h=this.listeners[b];if(h){var f=h.events[g];if(f){for(var d=0,a=f.length;d<a;d++){f[d](e)}}}}};links.Timeline.StepDate=function(c,a,b){this.current=new Date();this._start=new Date();this._end=new Date();this.autoScale=true;this.scale=links.Timeline.StepDate.SCALE.DAY;this.step=1;this.setRange(c,a,b)};links.Timeline.StepDate.SCALE={MILLISECOND:1,SECOND:2,MINUTE:3,HOUR:4,DAY:5,WEEKDAY:6,MONTH:7,YEAR:8};links.Timeline.StepDate.prototype.setRange=function(c,a,b){if(!(c instanceof Date)||!(a instanceof Date)){return}this._start=(c!=undefined)?new Date(c.valueOf()):new Date();this._end=(a!=undefined)?new Date(a.valueOf()):new Date();if(this.autoScale){this.setMinimumStep(b)}};links.Timeline.StepDate.prototype.start=function(){this.current=new Date(this._start.valueOf());this.roundToMinor()};links.Timeline.StepDate.prototype.roundToMinor=function(){switch(this.scale){case links.Timeline.StepDate.SCALE.YEAR:this.current.setFullYear(this.step*Math.floor(this.current.getFullYear()/this.step));this.current.setMonth(0);case links.Timeline.StepDate.SCALE.MONTH:this.current.setDate(1);case links.Timeline.StepDate.SCALE.DAY:case links.Timeline.StepDate.SCALE.WEEKDAY:this.current.setHours(0);case links.Timeline.StepDate.SCALE.HOUR:this.current.setMinutes(0);case links.Timeline.StepDate.SCALE.MINUTE:this.current.setSeconds(0);case links.Timeline.StepDate.SCALE.SECOND:this.current.setMilliseconds(0)}if(this.step!=1){switch(this.scale){case links.Timeline.StepDate.SCALE.MILLISECOND:this.current.setMilliseconds(this.current.getMilliseconds()-this.current.getMilliseconds()%this.step);break;case links.Timeline.StepDate.SCALE.SECOND:this.current.setSeconds(this.current.getSeconds()-this.current.getSeconds()%this.step);break;case links.Timeline.StepDate.SCALE.MINUTE:this.current.setMinutes(this.current.getMinutes()-this.current.getMinutes()%this.step);break;case links.Timeline.StepDate.SCALE.HOUR:this.current.setHours(this.current.getHours()-this.current.getHours()%this.step);break;case links.Timeline.StepDate.SCALE.WEEKDAY:case links.Timeline.StepDate.SCALE.DAY:this.current.setDate((this.current.getDate()-1)-(this.current.getDate()-1)%this.step+1);break;case links.Timeline.StepDate.SCALE.MONTH:this.current.setMonth(this.current.getMonth()-this.current.getMonth()%this.step);break;case links.Timeline.StepDate.SCALE.YEAR:this.current.setFullYear(this.current.getFullYear()-this.current.getFullYear()%this.step);break;default:break}}};links.Timeline.StepDate.prototype.end=function(){return(this.current.valueOf()>this._end.valueOf())};links.Timeline.StepDate.prototype.next=function(){var b=this.current.valueOf();if(this.current.getMonth()<6){switch(this.scale){case links.Timeline.StepDate.SCALE.MILLISECOND:this.current=new Date(this.current.valueOf()+this.step);break;case links.Timeline.StepDate.SCALE.SECOND:this.current=new Date(this.current.valueOf()+this.step*1000);break;case links.Timeline.StepDate.SCALE.MINUTE:this.current=new Date(this.current.valueOf()+this.step*1000*60);break;case links.Timeline.StepDate.SCALE.HOUR:this.current=new Date(this.current.valueOf()+this.step*1000*60*60);var a=this.current.getHours();this.current.setHours(a-(a%this.step));break;case links.Timeline.StepDate.SCALE.WEEKDAY:case links.Timeline.StepDate.SCALE.DAY:this.current.setDate(this.current.getDate()+this.step);break;case links.Timeline.StepDate.SCALE.MONTH:this.current.setMonth(this.current.getMonth()+this.step);break;case links.Timeline.StepDate.SCALE.YEAR:this.current.setFullYear(this.current.getFullYear()+this.step);break;default:break}}else{switch(this.scale){case links.Timeline.StepDate.SCALE.MILLISECOND:this.current=new Date(this.current.valueOf()+this.step);break;case links.Timeline.StepDate.SCALE.SECOND:this.current.setSeconds(this.current.getSeconds()+this.step);break;case links.Timeline.StepDate.SCALE.MINUTE:this.current.setMinutes(this.current.getMinutes()+this.step);break;case links.Timeline.StepDate.SCALE.HOUR:this.current.setHours(this.current.getHours()+this.step);break;case links.Timeline.StepDate.SCALE.WEEKDAY:case links.Timeline.StepDate.SCALE.DAY:this.current.setDate(this.current.getDate()+this.step);break;case links.Timeline.StepDate.SCALE.MONTH:this.current.setMonth(this.current.getMonth()+this.step);break;case links.Timeline.StepDate.SCALE.YEAR:this.current.setFullYear(this.current.getFullYear()+this.step);break;default:break}}if(this.step!=1){switch(this.scale){case links.Timeline.StepDate.SCALE.MILLISECOND:if(this.current.getMilliseconds()<this.step){this.current.setMilliseconds(0)}break;case links.Timeline.StepDate.SCALE.SECOND:if(this.current.getSeconds()<this.step){this.current.setSeconds(0)}break;case links.Timeline.StepDate.SCALE.MINUTE:if(this.current.getMinutes()<this.step){this.current.setMinutes(0)}break;case links.Timeline.StepDate.SCALE.HOUR:if(this.current.getHours()<this.step){this.current.setHours(0)}break;case links.Timeline.StepDate.SCALE.WEEKDAY:case links.Timeline.StepDate.SCALE.DAY:if(this.current.getDate()<this.step+1){this.current.setDate(1)}break;case links.Timeline.StepDate.SCALE.MONTH:if(this.current.getMonth()<this.step){this.current.setMonth(0)}break;case links.Timeline.StepDate.SCALE.YEAR:break;default:break}}if(this.current.valueOf()==b){this.current=new Date(this._end.valueOf())}};links.Timeline.StepDate.prototype.getCurrent=function(){return this.current};links.Timeline.StepDate.prototype.setScale=function(b,a){this.scale=b;if(a>0){this.step=a}this.autoScale=false};links.Timeline.StepDate.prototype.setAutoScale=function(a){this.autoScale=a};links.Timeline.StepDate.prototype.setMinimumStep=function(f){if(f==undefined){return}var b=(1000*60*60*24*30*12);var a=(1000*60*60*24*30);var e=(1000*60*60*24);var g=(1000*60*60);var d=(1000*60);var h=(1000);var c=(1);if(b*1000>f){this.scale=links.Timeline.StepDate.SCALE.YEAR;this.step=1000}if(b*500>f){this.scale=links.Timeline.StepDate.SCALE.YEAR;this.step=500}if(b*100>f){this.scale=links.Timeline.StepDate.SCALE.YEAR;this.step=100}if(b*50>f){this.scale=links.Timeline.StepDate.SCALE.YEAR;this.step=50}if(b*10>f){this.scale=links.Timeline.StepDate.SCALE.YEAR;this.step=10}if(b*5>f){this.scale=links.Timeline.StepDate.SCALE.YEAR;this.step=5}if(b>f){this.scale=links.Timeline.StepDate.SCALE.YEAR;this.step=1}if(a*3>f){this.scale=links.Timeline.StepDate.SCALE.MONTH;this.step=3}if(a>f){this.scale=links.Timeline.StepDate.SCALE.MONTH;this.step=1}if(e*5>f){this.scale=links.Timeline.StepDate.SCALE.DAY;this.step=5}if(e*2>f){this.scale=links.Timeline.StepDate.SCALE.DAY;this.step=2}if(e>f){this.scale=links.Timeline.StepDate.SCALE.DAY;this.step=1}if(e/2>f){this.scale=links.Timeline.StepDate.SCALE.WEEKDAY;this.step=1}if(g*4>f){this.scale=links.Timeline.StepDate.SCALE.HOUR;this.step=4}if(g>f){this.scale=links.Timeline.StepDate.SCALE.HOUR;this.step=1}if(d*15>f){this.scale=links.Timeline.StepDate.SCALE.MINUTE;this.step=15}if(d*10>f){this.scale=links.Timeline.StepDate.SCALE.MINUTE;this.step=10}if(d*5>f){this.scale=links.Timeline.StepDate.SCALE.MINUTE;this.step=5}if(d>f){this.scale=links.Timeline.StepDate.SCALE.MINUTE;this.step=1}if(h*15>f){this.scale=links.Timeline.StepDate.SCALE.SECOND;this.step=15}if(h*10>f){this.scale=links.Timeline.StepDate.SCALE.SECOND;this.step=10}if(h*5>f){this.scale=links.Timeline.StepDate.SCALE.SECOND;this.step=5}if(h>f){this.scale=links.Timeline.StepDate.SCALE.SECOND;this.step=1}if(c*200>f){this.scale=links.Timeline.StepDate.SCALE.MILLISECOND;this.step=200}if(c*100>f){this.scale=links.Timeline.StepDate.SCALE.MILLISECOND;this.step=100}if(c*50>f){this.scale=links.Timeline.StepDate.SCALE.MILLISECOND;this.step=50}if(c*10>f){this.scale=links.Timeline.StepDate.SCALE.MILLISECOND;this.step=10}if(c*5>f){this.scale=links.Timeline.StepDate.SCALE.MILLISECOND;this.step=5}if(c>f){this.scale=links.Timeline.StepDate.SCALE.MILLISECOND;this.step=1}};links.Timeline.StepDate.prototype.snap=function(a){if(this.scale==links.Timeline.StepDate.SCALE.YEAR){var b=a.getFullYear()+Math.round(a.getMonth()/12);a.setFullYear(Math.round(b/this.step)*this.step);a.setMonth(0);a.setDate(0);a.setHours(0);a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0)}else{if(this.scale==links.Timeline.StepDate.SCALE.MONTH){if(a.getDate()>15){a.setDate(1);a.setMonth(a.getMonth()+1)}else{a.setDate(1)}a.setHours(0);a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0)}else{if(this.scale==links.Timeline.StepDate.SCALE.DAY||this.scale==links.Timeline.StepDate.SCALE.WEEKDAY){switch(this.step){case 5:case 2:a.setHours(Math.round(a.getHours()/24)*24);break;default:a.setHours(Math.round(a.getHours()/12)*12);break}a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0)}else{if(this.scale==links.Timeline.StepDate.SCALE.HOUR){switch(this.step){case 4:a.setMinutes(Math.round(a.getMinutes()/60)*60);break;default:a.setMinutes(Math.round(a.getMinutes()/30)*30);break}a.setSeconds(0);a.setMilliseconds(0)}else{if(this.scale==links.Timeline.StepDate.SCALE.MINUTE){switch(this.step){case 15:case 10:a.setMinutes(Math.round(a.getMinutes()/5)*5);a.setSeconds(0);break;case 5:a.setSeconds(Math.round(a.getSeconds()/60)*60);break;default:a.setSeconds(Math.round(a.getSeconds()/30)*30);break}a.setMilliseconds(0)}else{if(this.scale==links.Timeline.StepDate.SCALE.SECOND){switch(this.step){case 15:case 10:a.setSeconds(Math.round(a.getSeconds()/5)*5);a.setMilliseconds(0);break;case 5:a.setMilliseconds(Math.round(a.getMilliseconds()/1000)*1000);break;default:a.setMilliseconds(Math.round(a.getMilliseconds()/500)*500);break}}else{if(this.scale==links.Timeline.StepDate.SCALE.MILLISECOND){var c=this.step>5?this.step/2:1;a.setMilliseconds(Math.round(a.getMilliseconds()/c)*c)}}}}}}}};links.Timeline.StepDate.prototype.isMajor=function(){switch(this.scale){case links.Timeline.StepDate.SCALE.MILLISECOND:return(this.current.getMilliseconds()==0);case links.Timeline.StepDate.SCALE.SECOND:return(this.current.getSeconds()==0);case links.Timeline.StepDate.SCALE.MINUTE:return(this.current.getHours()==0)&&(this.current.getMinutes()==0);case links.Timeline.StepDate.SCALE.HOUR:return(this.current.getHours()==0);case links.Timeline.StepDate.SCALE.WEEKDAY:case links.Timeline.StepDate.SCALE.DAY:return(this.current.getDate()==1);case links.Timeline.StepDate.SCALE.MONTH:return(this.current.getMonth()==0);case links.Timeline.StepDate.SCALE.YEAR:return false;default:return false}};links.Timeline.StepDate.prototype.getLabelMinor=function(b,a){if(a==undefined){a=this.current}switch(this.scale){case links.Timeline.StepDate.SCALE.MILLISECOND:return String(a.getMilliseconds());case links.Timeline.StepDate.SCALE.SECOND:return String(a.getSeconds());case links.Timeline.StepDate.SCALE.MINUTE:return this.addZeros(a.getHours(),2)+":"+this.addZeros(a.getMinutes(),2);case links.Timeline.StepDate.SCALE.HOUR:return this.addZeros(a.getHours(),2)+":"+this.addZeros(a.getMinutes(),2);case links.Timeline.StepDate.SCALE.WEEKDAY:return b.DAYS_SHORT[a.getDay()]+" "+a.getDate();case links.Timeline.StepDate.SCALE.DAY:return String(a.getDate());case links.Timeline.StepDate.SCALE.MONTH:return b.MONTHS_SHORT[a.getMonth()];case links.Timeline.StepDate.SCALE.YEAR:return String(a.getFullYear());default:return""}};links.Timeline.StepDate.prototype.getLabelMajor=function(b,a){if(a==undefined){a=this.current}switch(this.scale){case links.Timeline.StepDate.SCALE.MILLISECOND:return this.addZeros(a.getHours(),2)+":"+this.addZeros(a.getMinutes(),2)+":"+this.addZeros(a.getSeconds(),2);case links.Timeline.StepDate.SCALE.SECOND:return a.getDate()+" "+b.MONTHS[a.getMonth()]+" "+this.addZeros(a.getHours(),2)+":"+this.addZeros(a.getMinutes(),2);case links.Timeline.StepDate.SCALE.MINUTE:return b.DAYS[a.getDay()]+" "+a.getDate()+" "+b.MONTHS[a.getMonth()]+" "+a.getFullYear();case links.Timeline.StepDate.SCALE.HOUR:return b.DAYS[a.getDay()]+" "+a.getDate()+" "+b.MONTHS[a.getMonth()]+" "+a.getFullYear();case links.Timeline.StepDate.SCALE.WEEKDAY:case links.Timeline.StepDate.SCALE.DAY:return b.MONTHS[a.getMonth()]+" "+a.getFullYear();case links.Timeline.StepDate.SCALE.MONTH:return String(a.getFullYear());default:return""}};links.Timeline.StepDate.prototype.addZeros=function(b,a){var c=""+b;while(c.length<a){c="0"+c}return c};links.imageloader=(function(){var g={};var c={};function a(h){if(g[h]==true){return true}var j=new Image();j.src=h;if(j.complete){return true}return false}function b(h){return(c[h]!=undefined)}function f(h,m,j){if(j==undefined){j=true}if(a(h)){if(j){m(h)}return}if(b(h)&&!j){return}var l=c[h];if(!l){var k=new Image();k.src=h;l=[];c[h]=l;k.onload=function(o){g[h]=true;delete c[h];for(var n=0;n<l.length;n++){l[n](h)}}}if(AJS.$.inArray(m,l)==-1){l.push(m)}}function e(k,m,j){var l=[];AJS.$.each(k,function(o,n){if(!a(n)){l.push(n)}});if(l.length){var h=l.length;AJS.$.each(l,function(o,n){f(n,function(){h--;if(h==0){m()}},j)})}else{if(j){m()}}}function d(j,k){var l=j.firstChild;while(l){if(l.tagName=="IMG"){var h=l.src;if(AJS.$.inArray(h,k)==-1){k.push(h)}}d(l,k);l=l.nextSibling}}return{isLoaded:a,isLoading:b,load:f,loadAll:e,filterImageUrls:d}})();links.Timeline.addEventListener=function(b,d,c,a){if(b.addEventListener){if(a===undefined){a=false}if(d==="mousewheel"&&navigator.userAgent.indexOf("Firefox")>=0){d="DOMMouseScroll"}b.addEventListener(d,c,a)}else{b.attachEvent("on"+d,c)}};links.Timeline.removeEventListener=function(b,d,c,a){if(b.removeEventListener){if(a===undefined){a=false}if(d==="mousewheel"&&navigator.userAgent.indexOf("Firefox")>=0){d="DOMMouseScroll"}b.removeEventListener(d,c,a)}else{b.detachEvent("on"+d,c)}};links.Timeline.getTarget=function(a){if(!a){a=window.event}var b;if(a.target){b=a.target}else{if(a.srcElement){b=a.srcElement}}if(b.nodeType!=undefined&&b.nodeType==3){b=b.parentNode}return b};links.Timeline.stopPropagation=function(a){if(!a){a=window.event}if(a.stopPropagation){a.stopPropagation()}else{a.cancelBubble=true}};links.Timeline.preventDefault=function(a){if(!a){a=window.event}if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}};links.Timeline.getAbsoluteLeft=function(b){var f=document.documentElement;var a=document.body;var d=b.offsetLeft;var c=b.offsetParent;while(c!=null&&c!=a&&c!=f){d+=c.offsetLeft;d-=c.scrollLeft;c=c.offsetParent}return d};links.Timeline.getAbsoluteTop=function(b){var f=document.documentElement;var a=document.body;var d=b.offsetTop;var c=b.offsetParent;while(c!=null&&c!=a&&c!=f){d+=c.offsetTop;d-=c.scrollTop;c=c.offsetParent}return d};links.Timeline.getPageY=function(c){if("pageY" in c){return c.pageY}else{var b;if(("targetTouches" in c)&&c.targetTouches.length){b=c.targetTouches[0].clientY}else{b=c.clientY}var d=document.documentElement;var a=document.body;return b+(d&&d.scrollTop||a&&a.scrollTop||0)-(d&&d.clientTop||a&&a.clientTop||0)}};links.Timeline.getPageX=function(c){if("pageY" in c){return c.pageX}else{var b;if(("targetTouches" in c)&&c.targetTouches.length){b=c.targetTouches[0].clientX}else{b=c.clientX}var d=document.documentElement;var a=document.body;return b+(d&&d.scrollLeft||a&&a.scrollLeft||0)-(d&&d.clientLeft||a&&a.clientLeft||0)}};links.Timeline.addClassName=function(c,b){var a=c.className.split(" ");if(AJS.$.inArray(b,a)==-1){a.push(b);c.className=a.join(" ")}};links.Timeline.removeClassName=function(d,c){var b=d.className.split(" ");var a=AJS.$.inArray(c,b);if(a!=-1){b.splice(a,1);d.className=b.join(" ")}};links.Timeline.isArray=function(a){if(a instanceof Array){return true}return(Object.prototype.toString.call(a)==="[object Array]")};links.Timeline.parseJSONDate=function(b){if(b==undefined){return undefined}if(b instanceof Date){return b}var a=b.match(/\/Date\((-?\d+)([-\+]?\d{2})?(\d{2})?\)\//i);if(a){var c=a[2]?(3600000*a[2])+(60000*a[3]*(a[2]/Math.abs(a[2]))):0;return new Date((1*a[1])+c)}return Date.parse(b)};
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:almond', location = '/com/atlassian/confluence/extra/calendar3/lib/amd/almond-noconflict-pre.js' */

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:almond', location = '/com/atlassian/confluence/extra/calendar3/lib/amd/almond/almond.js' */

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:almond', location = '/com/atlassian/confluence/extra/calendar3/lib/amd/almond-noconflict-post.js' */

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:amd-for-confluence-lt-5.7', location = '/com/atlassian/confluence/extra/calendar3/lib/amd/shim/ajs-amd.js' */

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:amd-for-confluence-lt-5.7', location = '/com/atlassian/confluence/extra/calendar3/lib/amd/shim/jquery-amd.js' */

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:amd-for-confluence-lt-5.7', location = '/com/atlassian/confluence/extra/calendar3/lib/amd/shim/underscore-amd.js' */

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:amd', location = '/com/atlassian/confluence/extra/calendar3/amd/shim/templates-amd.js' */
define("tc/templates",function(){return Confluence.TeamCalendars.Templates});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:amd', location = '/com/atlassian/confluence/extra/calendar3/amd/shim/dialogs-amd.js' */
define("tc/dialogs",function(){return Confluence.TeamCalendars.Dialogs});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:amd', location = '/com/atlassian/confluence/extra/calendar3/lib/amd/shim/backbone-amd.js' */
(function(a,b){if(typeof define==="function"&&define.amd){define(["underscore","jquery","exports"],function(e,f,d){a.Backbone=b(a,d,e,f)})}else{if(typeof exports!=="undefined"){var c=require("underscore");b(a,exports,c)}else{a.Backbone=b(a,{},a._,(a.jQuery||a.Zepto||a.ender||a.$))}}}(this,function(t,c,G,h){var r=t.Backbone;var j=[];var s=j.slice;c.VERSION="1.1.2";c.$=h;c.noConflict=function(){t.Backbone=r;return this};c.emulateHTTP=false;c.emulateJSON=false;var p=c.Events={on:function(J,M,L){if(!I(this,"on",J,[M,L])||!M){return this}this._events||(this._events={});var K=this._events[J]||(this._events[J]=[]);K.push({callback:M,context:L,ctx:L||this});return this},once:function(K,N,L){if(!I(this,"once",K,[N,L])||!N){return this}var J=this;var M=G.once(function(){J.off(K,M);N.apply(this,arguments)});M._callback=N;return this.on(K,M,L)},off:function(K,S,L){if(!this._events||!I(this,"off",K,[S,L])){return this}if(!K&&!S&&!L){this._events=void 0;return this}var R=K?[K]:G.keys(this._events);for(var Q=0,M=R.length;Q<M;Q++){K=R[Q];var T=this._events[K];if(!T){continue}if(!S&&!L){delete this._events[K];continue}var O=[];for(var P=0,N=T.length;P<N;P++){var J=T[P];if(S&&S!==J.callback&&S!==J.callback._callback||L&&L!==J.context){O.push(J)}}if(O.length){this._events[K]=O}else{delete this._events[K]}}return this},trigger:function(L){if(!this._events){return this}var K=s.call(arguments,1);if(!I(this,"trigger",L,K)){return this}var M=this._events[L];var J=this._events.all;if(M){d(M,K)}if(J){d(J,arguments)}return this},stopListening:function(M,K,O){var L=this._listeningTo;if(!L){return this}var J=!K&&!O;if(!O&&typeof K==="object"){O=this}if(M){(L={})[M._listenId]=M}for(var N in L){M=L[N];M.off(K,O,this);if(J||G.isEmpty(M._events)){delete this._listeningTo[N]}}return this}};var a=/\s+/;var I=function(Q,O,J,M){if(!J){return true}if(typeof J==="object"){for(var L in J){Q[O].apply(Q,[L,J[L]].concat(M))}return false}if(a.test(J)){var P=J.split(a);for(var K=0,N=P.length;K<N;K++){Q[O].apply(Q,[P[K]].concat(M))}return false}return true};var d=function(O,M){var P,N=-1,L=O.length,K=M[0],J=M[1],Q=M[2];switch(M.length){case 0:while(++N<L){(P=O[N]).callback.call(P.ctx)}return;case 1:while(++N<L){(P=O[N]).callback.call(P.ctx,K)}return;case 2:while(++N<L){(P=O[N]).callback.call(P.ctx,K,J)}return;case 3:while(++N<L){(P=O[N]).callback.call(P.ctx,K,J,Q)}return;default:while(++N<L){(P=O[N]).callback.apply(P.ctx,M)}return}};var q={listenTo:"on",listenToOnce:"once"};G.each(q,function(J,K){p[K]=function(N,L,P){var M=this._listeningTo||(this._listeningTo={});var O=N._listenId||(N._listenId=G.uniqueId("l"));M[O]=N;if(!P&&typeof L==="object"){P=this}N[J](L,P,this);return this}});p.bind=p.on;p.unbind=p.off;G.extend(c,p);var m=c.Model=function(J,L){var K=J||{};L||(L={});this.cid=G.uniqueId("c");this.attributes={};if(L.collection){this.collection=L.collection}if(L.parse){K=this.parse(K,L)||{}}K=G.defaults({},K,G.result(this,"defaults"));this.set(K,L);this.changed={};this.initialize.apply(this,arguments)};G.extend(m.prototype,p,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(J){return G.clone(this.attributes)},sync:function(){return c.sync.apply(this,arguments)},get:function(J){return this.attributes[J]},escape:function(J){return G.escape(this.get(J))},has:function(J){return this.get(J)!=null},set:function(R,K,V){var P,S,T,Q,O,U,L,N;if(R==null){return this}if(typeof R==="object"){S=R;V=K}else{(S={})[R]=K}V||(V={});if(!this._validate(S,V)){return false}T=V.unset;O=V.silent;Q=[];U=this._changing;this._changing=true;if(!U){this._previousAttributes=G.clone(this.attributes);this.changed={}}N=this.attributes,L=this._previousAttributes;if(this.idAttribute in S){this.id=S[this.idAttribute]}for(P in S){K=S[P];if(!G.isEqual(N[P],K)){Q.push(P)}if(!G.isEqual(L[P],K)){this.changed[P]=K}else{delete this.changed[P]}T?delete N[P]:N[P]=K}if(!O){if(Q.length){this._pending=V}for(var M=0,J=Q.length;M<J;M++){this.trigger("change:"+Q[M],this,N[Q[M]],V)}}if(U){return this}if(!O){while(this._pending){V=this._pending;this._pending=false;this.trigger("change",this,V)}}this._pending=false;this._changing=false;return this},unset:function(J,K){return this.set(J,void 0,G.extend({},K,{unset:true}))},clear:function(K){var J={};for(var L in this.attributes){J[L]=void 0}return this.set(J,G.extend({},K,{unset:true}))},hasChanged:function(J){if(J==null){return !G.isEmpty(this.changed)}return G.has(this.changed,J)},changedAttributes:function(L){if(!L){return this.hasChanged()?G.clone(this.changed):false}var N,M=false;var K=this._changing?this._previousAttributes:this.attributes;for(var J in L){if(G.isEqual(K[J],(N=L[J]))){continue}(M||(M={}))[J]=N}return M},previous:function(J){if(J==null||!this._previousAttributes){return null}return this._previousAttributes[J]},previousAttributes:function(){return G.clone(this._previousAttributes)},fetch:function(K){K=K?G.clone(K):{};if(K.parse===void 0){K.parse=true}var J=this;var L=K.success;K.success=function(M){if(!J.set(J.parse(M,K),K)){return false}if(L){L(J,M,K)}J.trigger("sync",J,M,K)};e(this,K);return this.sync("read",this,K)},save:function(N,K,R){var O,J,Q,L=this.attributes;if(N==null||typeof N==="object"){O=N;R=K}else{(O={})[N]=K}R=G.extend({validate:true},R);if(O&&!R.wait){if(!this.set(O,R)){return false}}else{if(!this._validate(O,R)){return false}}if(O&&R.wait){this.attributes=G.extend({},L,O)}if(R.parse===void 0){R.parse=true}var M=this;var P=R.success;R.success=function(T){M.attributes=L;var S=M.parse(T,R);if(R.wait){S=G.extend(O||{},S)}if(G.isObject(S)&&!M.set(S,R)){return false}if(P){P(M,T,R)}M.trigger("sync",M,T,R)};e(this,R);J=this.isNew()?"create":(R.patch?"patch":"update");if(J==="patch"){R.attrs=O}Q=this.sync(J,this,R);if(O&&R.wait){this.attributes=L}return Q},destroy:function(K){K=K?G.clone(K):{};var J=this;var N=K.success;var L=function(){J.trigger("destroy",J,J.collection,K)};K.success=function(O){if(K.wait||J.isNew()){L()}if(N){N(J,O,K)}if(!J.isNew()){J.trigger("sync",J,O,K)}};if(this.isNew()){K.success();return false}e(this,K);var M=this.sync("delete",this,K);if(!K.wait){L()}return M},url:function(){var J=G.result(this,"urlRoot")||G.result(this.collection,"url")||x();if(this.isNew()){return J}return J.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(K,J){return K},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return !this.has(this.idAttribute)},isValid:function(J){return this._validate({},G.extend(J||{},{validate:true}))},_validate:function(L,K){if(!K.validate||!this.validate){return true}L=G.extend({},this.attributes,L);var J=this.validationError=this.validate(L,K)||null;if(!J){return true}this.trigger("invalid",this,J,G.extend(K,{validationError:J}));return false}});var C=["keys","values","pairs","invert","pick","omit","chain"];G.each(C,function(J){if(!G[J]){return}m.prototype[J]=function(){var K=s.call(arguments);K.unshift(this.attributes);return G[J].apply(G,K)}});var H=c.Collection=function(K,J){J||(J={});if(J.model){this.model=J.model}if(J.comparator!==void 0){this.comparator=J.comparator}this._reset();this.initialize.apply(this,arguments);if(K){this.reset(K,G.extend({silent:true},J))}};var z={add:true,remove:true,merge:true};var n={add:true,remove:false};G.extend(H.prototype,p,{model:m,initialize:function(){},toJSON:function(J){return this.map(function(K){return K.toJSON(J)})},sync:function(){return c.sync.apply(this,arguments)},add:function(K,J){return this.set(K,G.extend({merge:false},J,n))},remove:function(Q,L){var N=!G.isArray(Q);Q=N?[Q]:G.clone(Q);L||(L={});for(var M=0,O=Q.length;M<O;M++){var K=Q[M]=this.get(Q[M]);if(!K){continue}var P=this.modelId(K.attributes);if(P!=null){delete this._byId[P]}delete this._byId[K.cid];var J=this.indexOf(K);this.models.splice(J,1);this.length--;if(!L.silent){L.index=J;K.trigger("remove",K,this,L)}this._removeReference(K,L)}return N?Q[0]:Q},set:function(ab,L){L=G.defaults({},L,z);if(L.parse){ab=this.parse(ab,L)}var O=!G.isArray(ab);ab=O?(ab?[ab]:[]):ab.slice();var T,M,V,S,aa;var Q=L.at;var J=this.comparator&&(Q==null)&&L.sort!==false;var Z=G.isString(this.comparator)?this.comparator:null;var ac=[],W=[],U={};var R=L.add,N=L.merge,ad=L.remove;var X=!J&&R&&ad?[]:false;for(var Y=0,K=ab.length;Y<K;Y++){V=ab[Y];if(S=this.get(V)){if(ad){U[S.cid]=true}if(N&&V!==S){V=this._isModel(V)?V.attributes:V;if(L.parse){V=S.parse(V,L)}S.set(V,L);if(J&&!aa&&S.hasChanged(Z)){aa=true}}ab[Y]=S}else{if(R){M=ab[Y]=this._prepareModel(V,L);if(!M){continue}ac.push(M);this._addReference(M,L)}}M=S||M;if(!M){continue}T=this.modelId(M.attributes);if(X&&(M.isNew()||!U[T])){X.push(M)}U[T]=true}if(ad){for(var Y=0,K=this.length;Y<K;Y++){if(!U[(M=this.models[Y]).cid]){W.push(M)}}if(W.length){this.remove(W,L)}}if(ac.length||(X&&X.length)){if(J){aa=true}this.length+=ac.length;if(Q!=null){for(var Y=0,K=ac.length;Y<K;Y++){this.models.splice(Q+Y,0,ac[Y])}}else{if(X){this.models.length=0}var P=X||ac;for(var Y=0,K=P.length;Y<K;Y++){this.models.push(P[Y])}}}if(aa){this.sort({silent:true})}if(!L.silent){for(var Y=0,K=ac.length;Y<K;Y++){(M=ac[Y]).trigger("add",M,this,L)}if(aa||(X&&X.length)){this.trigger("sort",this,L)}}return O?ab[0]:ab},reset:function(M,J){J||(J={});for(var K=0,L=this.models.length;K<L;K++){this._removeReference(this.models[K],J)}J.previousModels=this.models;this._reset();M=this.add(M,G.extend({silent:true},J));if(!J.silent){this.trigger("reset",this,J)}return M},push:function(K,J){return this.add(K,G.extend({at:this.length},J))},pop:function(K){var J=this.at(this.length-1);this.remove(J,K);return J},unshift:function(K,J){return this.add(K,G.extend({at:0},J))},shift:function(K){var J=this.at(0);this.remove(J,K);return J},slice:function(){return s.apply(this.models,arguments)},get:function(J){if(J==null){return void 0}var K=this.modelId(this._isModel(J)?J.attributes:J);return this._byId[J]||this._byId[K]||this._byId[J.cid]},at:function(J){return this.models[J]},where:function(J,K){if(G.isEmpty(J)){return K?void 0:[]}return this[K?"find":"filter"](function(L){for(var M in J){if(J[M]!==L.get(M)){return false}}return true})},findWhere:function(J){return this.where(J,true)},sort:function(J){if(!this.comparator){throw new Error("Cannot sort a set without a comparator")}J||(J={});if(G.isString(this.comparator)||this.comparator.length===1){this.models=this.sortBy(this.comparator,this)}else{this.models.sort(G.bind(this.comparator,this))}if(!J.silent){this.trigger("sort",this,J)}return this},pluck:function(J){return G.invoke(this.models,"get",J)},fetch:function(J){J=J?G.clone(J):{};if(J.parse===void 0){J.parse=true}var L=J.success;var K=this;J.success=function(M){var N=J.reset?"reset":"set";K[N](M,J);if(L){L(K,M,J)}K.trigger("sync",K,M,J)};e(this,J);return this.sync("read",this,J)},create:function(K,J){J=J?G.clone(J):{};if(!(K=this._prepareModel(K,J))){return false}if(!J.wait){this.add(K,J)}var M=this;var L=J.success;J.success=function(N,O){if(J.wait){M.add(N,J)}if(L){L(N,O,J)}};K.save(null,J);return K},parse:function(K,J){return K},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(J){return J[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0;this.models=[];this._byId={}},_prepareModel:function(L,K){if(this._isModel(L)){if(!L.collection){L.collection=this}return L}K=K?G.clone(K):{};K.collection=this;var J=new this.model(L,K);if(!J.validationError){return J}this.trigger("invalid",this,J.validationError,K);return false},_isModel:function(J){return J instanceof m},_addReference:function(K,J){this._byId[K.cid]=K;var L=this.modelId(K.attributes);if(L!=null){this._byId[L]=K}K.on("all",this._onModelEvent,this)},_removeReference:function(K,J){if(this===K.collection){delete K.collection}K.off("all",this._onModelEvent,this)},_onModelEvent:function(L,K,N,J){if((L==="add"||L==="remove")&&N!==this){return}if(L==="destroy"){this.remove(K,J)}if(L==="change"){var M=this.modelId(K.previousAttributes());var O=this.modelId(K.attributes);if(M!==O){if(M!=null){delete this._byId[M]}if(O!=null){this._byId[O]=K}}}this.trigger.apply(this,arguments)}});var D=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample","partition"];G.each(D,function(J){if(!G[J]){return}H.prototype[J]=function(){var K=s.call(arguments);K.unshift(this.models);return G[J].apply(G,K)}});var i=["groupBy","countBy","sortBy","indexBy"];G.each(i,function(J){if(!G[J]){return}H.prototype[J]=function(M,K){var L=G.isFunction(M)?M:function(N){return N.get(M)};return G[J](this.models,L,K)}});var w=c.View=function(J){this.cid=G.uniqueId("view");J||(J={});G.extend(this,G.pick(J,y));this._ensureElement();this.initialize.apply(this,arguments)};var g=/^(\S+)\s*(.*)$/;var y=["model","collection","el","id","attributes","className","tagName","events"];G.extend(w.prototype,p,{tagName:"div",$:function(J){return this.$el.find(J)},initialize:function(){},render:function(){return this},remove:function(){this._removeElement();this.stopListening();return this},_removeElement:function(){this.$el.remove()},setElement:function(J){this.undelegateEvents();this._setElement(J);this.delegateEvents();return this},_setElement:function(J){this.$el=J instanceof c.$?J:c.$(J);this.el=this.$el[0]},delegateEvents:function(L){if(!(L||(L=G.result(this,"events")))){return this}this.undelegateEvents();for(var K in L){var M=L[K];if(!G.isFunction(M)){M=this[L[K]]}if(!M){continue}var J=K.match(g);this.delegate(J[1],J[2],G.bind(M,this))}return this},delegate:function(K,J,L){this.$el.on(K+".delegateEvents"+this.cid,J,L)},undelegateEvents:function(){if(this.$el){this.$el.off(".delegateEvents"+this.cid)}return this},undelegate:function(K,J,L){this.$el.off(K+".delegateEvents"+this.cid,J,L)},_createElement:function(J){return document.createElement(J)},_ensureElement:function(){if(!this.el){var J=G.extend({},G.result(this,"attributes"));if(this.id){J.id=G.result(this,"id")}if(this.className){J["class"]=G.result(this,"className")}this.setElement(this._createElement(G.result(this,"tagName")));this._setAttributes(J)}else{this.setElement(G.result(this,"el"))}},_setAttributes:function(J){this.$el.attr(J)}});c.sync=function(Q,L,K){var N=u[Q];G.defaults(K||(K={}),{emulateHTTP:c.emulateHTTP,emulateJSON:c.emulateJSON});var P={type:N,dataType:"json"};if(!K.url){P.url=G.result(L,"url")||x()}if(K.data==null&&L&&(Q==="create"||Q==="update"||Q==="patch")){P.contentType="application/json";P.data=JSON.stringify(K.attrs||L.toJSON(K))}if(K.emulateJSON){P.contentType="application/x-www-form-urlencoded";P.data=P.data?{model:P.data}:{}}if(K.emulateHTTP&&(N==="PUT"||N==="DELETE"||N==="PATCH")){P.type="POST";if(K.emulateJSON){P.data._method=N}var M=K.beforeSend;K.beforeSend=function(R){R.setRequestHeader("X-HTTP-Method-Override",N);if(M){return M.apply(this,arguments)}}}if(P.type!=="GET"&&!K.emulateJSON){P.processData=false}var J=K.error;K.error=function(S,T,R){K.textStatus=T;K.errorThrown=R;if(J){J.apply(this,arguments)}};var O=K.xhr=c.ajax(G.extend(P,K));L.trigger("request",L,O,K);return O};var u={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};c.ajax=function(){return c.$.ajax.apply(c.$,arguments)};var F=c.Router=function(J){J||(J={});if(J.routes){this.routes=J.routes}this._bindRoutes();this.initialize.apply(this,arguments)};var l=/\((.*?)\)/g;var k=/(\(\?)?:\w+/g;var E=/\*\w+/g;var f=/[\-{}\[\]+?.,\\\^$|#\s]/g;G.extend(F.prototype,p,{initialize:function(){},route:function(K,L,M){if(!G.isRegExp(K)){K=this._routeToRegExp(K)}if(G.isFunction(L)){M=L;L=""}if(!M){M=this[L]}var J=this;c.history.route(K,function(O){var N=J._extractParameters(K,O);if(J.execute(M,N,L)!==false){J.trigger.apply(J,["route:"+L].concat(N));J.trigger("route",L,N);c.history.trigger("route",J,L,N)}});return this},execute:function(L,K,J){if(L){L.apply(this,K)}},navigate:function(K,J){c.history.navigate(K,J);return this},_bindRoutes:function(){if(!this.routes){return}this.routes=G.result(this,"routes");var K,J=G.keys(this.routes);while((K=J.pop())!=null){this.route(K,this.routes[K])}},_routeToRegExp:function(J){J=J.replace(f,"\\$&").replace(l,"(?:$1)?").replace(k,function(L,K){return K?L:"([^/?]+)"}).replace(E,"([^?]*?)");return new RegExp("^"+J+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(J,K){var L=J.exec(K).slice(1);return G.map(L,function(N,M){if(M===L.length-1){return N||null}return N?decodeURIComponent(N):null})}});var b=c.History=function(){this.handlers=[];G.bindAll(this,"checkUrl");if(typeof window!=="undefined"){this.location=window.location;this.history=window.history}};var o=/^[#\/]|\s+$/g;var B=/^\/+|\/+$/g;var v=/#.*$/;b.started=false;G.extend(b.prototype,p,{interval:50,atRoot:function(){var J=this.location.pathname.replace(/[^\/]$/,"$&/");return J===this.root&&!this.location.search},getHash:function(K){var J=(K||this).location.href.match(/#(.*)$/);return J?J[1]:""},getPath:function(){var K=decodeURI(this.location.pathname+this.location.search);var J=this.root.slice(0,-1);if(!K.indexOf(J)){K=K.slice(J.length)}return K.slice(1)},getFragment:function(J){if(J==null){if(this._hasPushState||!this._wantsHashChange){J=this.getPath()}else{J=this.getHash()}}return J.replace(o,"")},start:function(K){if(b.started){throw new Error("Backbone.history has already been started")}b.started=true;this.options=G.extend({root:"/"},this.options,K);this.root=this.options.root;this._wantsHashChange=this.options.hashChange!==false;this._hasHashChange="onhashchange" in window;this._wantsPushState=!!this.options.pushState;this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);this.fragment=this.getFragment();var M=window.addEventListener||function(N,O){return attachEvent("on"+N,O)};this.root=("/"+this.root+"/").replace(B,"/");if(!this._hasHashChange&&this._wantsHashChange&&(!this._wantsPushState||!this._hasPushState)){var L=document.createElement("iframe");L.src="javascript:0";L.style.display="none";L.tabIndex=-1;var J=document.body;this.iframe=J.insertBefore(L,J.firstChild).contentWindow;this.navigate(this.fragment)}if(this._hasPushState){M("popstate",this.checkUrl,false)}else{if(this._wantsHashChange&&this._hasHashChange&&!this.iframe){M("hashchange",this.checkUrl,false)}else{if(this._wantsHashChange){this._checkUrlInterval=setInterval(this.checkUrl,this.interval)}}}if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){this.location.replace(this.root+"#"+this.getPath());return true}else{if(this._hasPushState&&this.atRoot()){this.navigate(this.getHash(),{replace:true})}}}if(!this.options.silent){return this.loadUrl()}},stop:function(){var J=window.removeEventListener||function(K,L){return detachEvent("on"+K,L)};if(this._hasPushState){J("popstate",this.checkUrl,false)}else{if(this._wantsHashChange&&this._hasHashChange&&!this.iframe){J("hashchange",this.checkUrl,false)}}if(this.iframe){document.body.removeChild(this.iframe.frameElement);this.iframe=null}if(this._checkUrlInterval){clearInterval(this._checkUrlInterval)}b.started=false},route:function(J,K){this.handlers.unshift({route:J,callback:K})},checkUrl:function(K){var J=this.getFragment();if(J===this.fragment&&this.iframe){J=this.getHash(this.iframe)}if(J===this.fragment){return false}if(this.iframe){this.navigate(J)}this.loadUrl()},loadUrl:function(J){J=this.fragment=this.getFragment(J);return G.any(this.handlers,function(K){if(K.route.test(J)){K.callback(J);return true}})},navigate:function(L,K){if(!b.started){return false}if(!K||K===true){K={trigger:!!K}}var J=this.root+(L=this.getFragment(L||""));L=decodeURI(L.replace(v,""));if(this.fragment===L){return}this.fragment=L;if(L===""&&J!=="/"){J=J.slice(0,-1)}if(this._hasPushState){this.history[K.replace?"replaceState":"pushState"]({},document.title,J)}else{if(this._wantsHashChange){this._updateHash(this.location,L,K.replace);if(this.iframe&&(L!==this.getHash(this.iframe))){if(!K.replace){this.iframe.document.open().close()}this._updateHash(this.iframe.location,L,K.replace)}}else{return this.location.assign(J)}}if(K.trigger){return this.loadUrl(L)}},_updateHash:function(J,L,M){if(M){var K=J.href.replace(/(javascript:|#).*$/,"");J.replace(K+"#"+L)}else{J.hash="#"+L}}});c.history=new b;var A=function(J,L){var K=this;var N;if(J&&G.has(J,"constructor")){N=J.constructor}else{N=function(){return K.apply(this,arguments)}}G.extend(N,K,L);var M=function(){this.constructor=N};M.prototype=K.prototype;N.prototype=new M;if(J){G.extend(N.prototype,J)}N.__super__=K.prototype;return N};m.extend=H.extend=F.extend=w.extend=b.extend=A;var x=function(){throw new Error('A "url" property or function must be specified')};var e=function(L,K){var J=K.error;K.error=function(M){if(J){J(L,M,K)}L.trigger("error",L,M,K)}};return c}));if(typeof Backbone!=="undefined"){var backboneTCVersion=Backbone.noConflict();define("tc-backbone",["underscore"],function(){return backboneTCVersion})};
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:util', location = '/com/atlassian/confluence/extra/calendar3/util/util.js' */
define("tc/util",["jquery"],function(b){var a={};a.showDialogInUpdatedHeight=function(c){if(!c.getCurrentPanel().body.is(":visible")){c.show()}c.updateHeight();c.popup.element.css("height","");c.popup.element.find("div.dialog-panel-body").css("height","");c.popup.element.find("form, div.buttons-container").css("margin-bottom","0");c.popup.changeSize(undefined,c.popup.element.outerHeight());c.hide();c.show()};a.getRestBaseUrl=function(){return Confluence.getContextPath()+"/rest/calendar-services/1.0"};return a});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-util', location = 'com/atlassian/confluence/extra/calendar3/components/calendar-util/calendar-util-component.js' */
define("tc/calendar-util",["jquery","ajs","tc-backbone","tc/templates"],function($,AJS,Backbone,Templates){function removeDuplicatedErrorMessages(infoMessagesList){var uniqueMessageItems={};$("li",infoMessagesList).each(function(){var item=$(this).text();if(uniqueMessageItems[item]){$(this).remove()}else{uniqueMessageItems[item]=true}})}var calendarUtils={panelEditCalendar:{GENERAL_PANEL:0,EVENT_TYPE_PANEL:1,RESTRICTION_PANEL:2,SHARE_EMBEDDED_PANEL:3,SUBSCRIBE_PANEL:4},ajaxTimeout:120000,isCalendarSearchDisabled:$("#team-calendars-search-disabled").length,hasJiraLink:$("#team-calendars-has-jira-link").length,getParameter:function(calendarDiv,configKey){return this.getParameters(calendarDiv)[configKey]},getParameters:function(calendarDiv){if(!calendarDiv.data("parameters")){var parameters={};$("fieldset.parameters input",calendarDiv).each(function(){if(parameters[this.name]){if($.isArray(parameters[this.name])){parameters[this.name].push(this.value)}else{parameters[this.name]=[parameters[this.name],this.value]}}else{parameters[this.name]=this.value}});calendarDiv.data("parameters",parameters)}return calendarDiv.data("parameters")},setParameter:function(calendarDiv,configKey,value){calendarDiv.removeData("parameters");var paramsFieldset=$("fieldset.parameters",calendarDiv);$("input[name='"+configKey+"']",paramsFieldset).remove();if($.isArray(value)){$.each(value,function(idx,aValue){$("<input type='hidden'/>").attr("name",configKey).val(aValue).appendTo(paramsFieldset)})}else{$("<input type='hidden'/>").attr("name",configKey).val(value).appendTo(paramsFieldset)}},getSortedSubCalendarsByTypeAndName:function(subCalendars){if(!subCalendars){return[]}var subCalendarsByTypes={};$.each(subCalendars,function(subCalendarIdx,subCalendar){var subCalendarType=subCalendar.subscriptionType||subCalendar.type,subCalendarsOfType;if(!subCalendarsByTypes[subCalendarType]){subCalendarsOfType=[];subCalendarsByTypes[subCalendarType]=subCalendarsOfType}else{subCalendarsOfType=subCalendarsByTypes[subCalendarType]}subCalendarsOfType.push(subCalendar)});$.each(subCalendarsByTypes,function(subCalendarType,subCalendarsOfType){subCalendarsOfType.sort(function(leftSubCalendar,rightSubCalendar){var leftName=(leftSubCalendar.name||"").toLowerCase(),rightName=(rightSubCalendar.name||"").toLowerCase();return leftName>rightName?-1:(rightName>leftName?1:0)})});var sortedSubCalendars=[];$.each($.grep((function(){var theOrder=[];$.each(Confluence.TeamCalendars.subcalendar,function(handleType,handler){theOrder.push(handleType)});theOrder.sort(function(leftType,rightType){return Confluence.TeamCalendars.subcalendar[leftType].weight-Confluence.TeamCalendars.subcalendar[rightType].weight});return theOrder})(),function(subCalendarType){return subCalendarsByTypes[subCalendarType]}),function(typeIdx,subCalendarType){$.each(subCalendarsByTypes[subCalendarType],function(subCalendarIdx,subCalendar){sortedSubCalendars.push(subCalendar)})});$.each(sortedSubCalendars,function(subCalendarIdx,subCalendar){if($.isArray(subCalendar.childSubCalendars)&&subCalendar.childSubCalendars.length){subCalendar.childSubCalendars.sort(function(leftChild,rightChild){var leftChildWeight=window.Confluence.TeamCalendars.subcalendar[leftChild.subscriptionType||leftChild.type].weight,rightChildWeight=window.Confluence.TeamCalendars.subcalendar[rightChild.subscriptionType||rightChild.type].weight;return leftChildWeight<rightChildWeight?-1:(leftChildWeight>rightChildWeight?1:0)})}});return sortedSubCalendars},getAsArray:function(){var theArray=[];$.each(arguments,function(argIdx,argument){if($.isArray(argument)){$.each(argument,function(argIdx,argElem){if(typeof argElem==="string"){theArray.push(argElem)}else{if($.isPlainObject(argElem)&&argElem.id&&typeof argElem.id==="string"){theArray.push(argElem.id)}else{theArray.push(argElem.toString())}}})}else{theArray.push(argument.toString())}});return theArray},populateTimeZoneDropDown:function(timeZoneSelect,timeZoneToSelect,onSuccess,onError){var spinner=$(".spinner",timeZoneSelect.parent());spinner.removeClass("hidden");$.ajax({type:"GET",timeout:this.ajaxTimeout,url:this.getRestBaseUrl()+"/timezones/calendar",success:function(timeZones){timeZoneSelect.html(Templates.timeZoneDropDown(timeZones)).val(timeZoneToSelect);spinner.addClass("hidden");onSuccess()},error:function(XMLHttpRequest,textStatus,errorThrown){spinner.addClass("hidden");onError(XMLHttpRequest,textStatus,errorThrown)}})},getRestBaseUrl:function(){return Confluence.getContextPath()+"/rest/calendar-services/1.0"},getCalendarServiceBaseUrl:function(relativePath){return this.getRestBaseUrl()+"/calendar"+relativePath},mergeSubCalendarObjectsToArray:function(arrayWithSubCalendarObject){var that=this;if(arrayWithSubCalendarObject&&$.isArray(arrayWithSubCalendarObject)){var mergeSubCalendarIntoContainingObject=function(objectContainingSubCalendar){$.extend(objectContainingSubCalendar,objectContainingSubCalendar.subCalendar);delete objectContainingSubCalendar.subCalendar};$.each(arrayWithSubCalendarObject,function(idx,arrayElement){mergeSubCalendarIntoContainingObject(arrayElement);$.each(arrayElement.childSubCalendars||[],function(childIdx,objectContainingChildSubCalendar){mergeSubCalendarIntoContainingObject(objectContainingChildSubCalendar)})})}var rearrangeSubCalendars=function(subCalendars){if(!(subCalendars&&subCalendars.length)){return}var subscriptionsParent={name:"Subscriptions",type:"subscription",dummy:true,id:"dummy"},subscriptionChildSubCalendars=[],rearrangedSubCalendars=[];$.each(subCalendars,function(idx,subCalendar){if(that.isSubscriptionSubCalendar(subCalendar)){subscriptionChildSubCalendars.push(subCalendar)}else{rearrangedSubCalendars.push(subCalendar)}});if(subscriptionChildSubCalendars.length){subscriptionsParent.childSubCalendars=subscriptionChildSubCalendars;rearrangedSubCalendars.push(subscriptionsParent)}subCalendars.length=0;$.merge(subCalendars,rearrangedSubCalendars)};rearrangeSubCalendars(arrayWithSubCalendarObject);return arrayWithSubCalendarObject},isRequireOauth:function(XMLHttpRequest){var authHeader=XMLHttpRequest.getResponseHeader("WWW-Authenticate")||"";var realmRegEx=/OAuth realm\=\"([^\"]+)\"/;var matches=realmRegEx.exec(authHeader);if(matches){return matches[1]}else{return null}},setFieldErrors:function(container,fieldErrors){$("div.error",container).empty();if(!fieldErrors){return}var _fieldErrors=$.isArray(fieldErrors)?fieldErrors:[fieldErrors];if($.isArray(fieldErrors)){for(var fieldErrorIndex=0;fieldErrorIndex<_fieldErrors.length;++fieldErrorIndex){var fieldName=_fieldErrors[fieldErrorIndex].field;var _errorMessages=$.isArray(_fieldErrors[fieldErrorIndex].errorMessages)?_fieldErrors[fieldErrorIndex].errorMessages:[_fieldErrors[fieldErrorIndex].errorMessages];if(fieldName&&_errorMessages){var errorDiv=$("div."+fieldName+"-error");for(var errorMsgIndex=0;errorMsgIndex<_errorMessages.length;++errorMsgIndex){$(document.createElement("div")).html(_errorMessages[errorMsgIndex]).appendTo(errorDiv)}}}}},showHTMLGenericError:function(container,message,errorClass,subcalendar){var isError=message[0]==="html-error-type"||message[0]==="error-jql-wrong";var infoHTMLPanel=isError===true?$(".calendar-error",container):$(".calendar-warning",container);var _infoHTMLClass=errorClass||"general";var infoMessagesList=isError===true?$("ul.error-messages",infoHTMLPanel):$("ul.warning-messages",infoHTMLPanel);var infoMessageItem=$("li."+errorClass,infoMessagesList);if(!infoMessageItem.length){infoMessageItem=$(document.createElement("li")).addClass(_infoHTMLClass).appendTo(infoMessagesList)}if(message[0]==="error-jql-wrong"){infoMessageItem.text(message[1]);if(subcalendar&&subcalendar.eventsEditable){infoMessageItem.data("jiraCalendarId",subcalendar.id);infoMessageItem.append("Try \u003ca href=\"#\" id=\"calendar-change-jql\"\u003echanging the query.\u003c/a\u003e")}}else{infoMessageItem.html(message[1])}removeDuplicatedErrorMessages(infoMessagesList);if(infoMessagesList.children().length){infoMessagesList.removeClass("hidden");infoHTMLPanel.removeClass("hidden")}else{infoMessagesList.addClass("hidden");infoHTMLPanel.addClass("hidden")}},setGenericErrors:function(container,message,errorClass){var errorPanel=$(".calendar-error",container);var _errorClass=errorClass||"general";var errorMessagesList=$("ul.error-messages",errorPanel);var errorMessageItem=$("li."+errorClass,errorMessagesList);if(message){if(!errorMessageItem.length){errorMessageItem=$(document.createElement("li")).addClass(_errorClass).appendTo(errorMessagesList)}if($.isArray(message)){if(message.length>1){var subMessagesList=$(document.createElement("ul"));$.each(message,function(index,value){$(document.createElement("li")).text(value).appendTo(subMessagesList)});subMessagesList.appendTo(errorMessageItem)}else{errorMessageItem.text(message[0])}}else{if($.isPlainObject(message)){var theMessage=message.message||"";if(message["status-code"]){errorMessageItem.text(message["status-code"]+" - "+theMessage)}else{errorMessageItem.text(theMessage)}}else{errorMessageItem.text(message)}}removeDuplicatedErrorMessages(errorMessagesList);if(message.length>1&&$("ul",errorMessageItem).children().length===0){errorMessageItem.remove()}}else{errorMessageItem.remove()}if(errorMessagesList.children().length){errorMessagesList.removeClass("hidden");errorPanel.removeClass("hidden")}else{errorMessagesList.addClass("hidden");errorPanel.addClass("hidden")}},showAjaxError:function(container,XMLHttpRequest,textStatus,errorThrown,errorClass,subCalendar){var messageResponse=eval("("+XMLHttpRequest.responseText+")");if("application/json"===XMLHttpRequest.getResponseHeader("Content-Type")&&$.isArray(messageResponse)&&messageResponse.length===2&&(messageResponse[0]==="warning-type"||messageResponse[0]==="html-error-type"||messageResponse[0]==="error-jql-wrong")){this.showHTMLGenericError(container,messageResponse,errorClass,subCalendar)}else{this.setGenericErrors(container,("application/json"===XMLHttpRequest.getResponseHeader("Content-Type")?messageResponse:(errorThrown||textStatus||XMLHttpRequest.responseText||"Uh oh. Looks like something unexpectedly went wrong. Please check the Confluence log file.")),errorClass)}},getUserTimeZone:function(){return $("input[name='userTimeZoneId']").val()||$("#team-calendars-user-timezone").attr("content")},shouldShowTimezoneSetup:function(){var hasMessageKey=!$("#team-calendars-timezone-setup-dialog").length&&$("#team-calendars-show-timezone-setup").length;if(AJS.Meta.get("space-key")){var isSpaceCalendarPage=$(".plugin-calendar-container.spaceCalendars").length;return hasMessageKey&&isSpaceCalendarPage}return hasMessageKey},suppressMessage:function(errorContainer,messageKey,successCallback){var that=this;$.ajax({cache:false,data:{messageKey:messageKey},error:function(XMLHttpRequest,textStatus,errorThrown){that.showAjaxError(errorContainer,XMLHttpRequest,textStatus,errorThrown,"error-config-update")},success:function(){that.setGenericErrors(errorContainer,null,"error-config-update");if(successCallback&&$.isFunction(successCallback)){successCallback()}},type:"DELETE",url:this.getCalendarServiceBaseUrl("/preferences/messagekey.json")})},fireEventForAnalytics:function(eventName,properties){AJS.EventQueue=AJS.EventQueue||[];AJS.EventQueue.push({name:"teamcalendars."+eventName,properties:properties||{}})},isPDLEnabled:function(){return AJS.Meta.getNumber("build-number")>=4000},isJiraSubCalendar:function(subCalendar){return subCalendar.type==="jira"||subCalendar.subscriptionType==="jira"||subCalendar.type==="jira-agile-sprint"||subCalendar.subscriptionType==="jira-agile-sprint"||subCalendar.type==="jira-project-releases"||subCalendar.subscriptionType==="jira-project-releases"},isSubscriptionSubCalendar:function(subCalendar){return subCalendar.type==="subscription"||subCalendar.subscriptionType==="subscription"},isInternalSubscriptionSubCalendar:function(subCalendar){return subCalendar.type==="internal-subscription"},isDummySubscriptionParentSubCalendar:function(subCalendar){return subCalendar.dummy&&this.isSubscriptionSubCalendar(subCalendar)},hasRestriction:function(subCalendar){return subCalendar.usersPermittedToView.length>0||subCalendar.usersPermittedToEdit.length>0||subCalendar.groupsPermittedToView.length>0||subCalendar.groupsPermittedToEdit.length>0},updateDateDisplay:function(calendarDiv,displayHtml){$(".date-display",calendarDiv).html(displayHtml||"")},showCalendarPopupHaveAnEmptySubcalendar:function(showPopularDialog,showCalendarDialog){$.ajax({dataType:"json",success:function(responseEntity){if(responseEntity){showPopularDialog()}else{showCalendarDialog()}},type:"GET",timeout:this.ajaxTimeout,url:this.getCalendarServiceBaseUrl("/haspopular.json")})},disableButton:function(elButton,label){elButton.text(label).attr("disabled","disabled").addClass("ui-state-disabled")},enableButton:function(elButton,label){elButton.text(label).removeAttr("disabled").removeClass("ui-state-disabled")},isJiraEventStream:function(type){return type==="jira-calendar"||type==="jira-agile-sprint-calendar"||type==="jira-project-releases-calendar"},isCustomEventType:function(type){return !this.isJiraEventStream(type)&&!this.isJiraType(type)&&!this.isEventTypeSanbox(type)},isEventTypeSanbox:function(type){return type==="other"||type==="leaves"||type==="birthdays"||type==="travel"},isJiraEvent:function(event){var type=event.eventType;return this.isJiraType(type)},isJiraType:function(type){return type==="jira"||type==="jira-agile-sprint"||type==="jira-project-releases"},showInforReminder:function(periodInMins){var inforReminder=null,intPeriodInMins=periodInMins!==""?parseInt(periodInMins):0;if(intPeriodInMins===0){inforReminder="None"}else{if(intPeriodInMins<60){inforReminder=AJS.format("{0} minutes",intPeriodInMins)}else{var periodInHours=Math.floor(intPeriodInMins/60);if(periodInHours<24){inforReminder=AJS.format(periodInHours===1?"{0} hour":"{0} hours",periodInHours)}else{var periodInDays=Math.floor(periodInHours/24);if(periodInDays<7){inforReminder=AJS.format(periodInDays===1?"{0} day":"{0} days",periodInDays)}else{var periodInWeek=Math.floor(periodInDays/7);inforReminder=AJS.format(periodInWeek===1?"{0} week":"{0} weeks",periodInWeek)}}}}return inforReminder},getPeriodReminderEventTypeSanboxOrJira:function(subCalendar,eventType){var sanboxEventTypeReminders=subCalendar.sanboxEventTypeReminders;if(sanboxEventTypeReminders!=undefined&&sanboxEventTypeReminders.length>0){if(this.isJiraType(eventType)){eventType+="-calendar"}for(var item in sanboxEventTypeReminders){if(eventType===sanboxEventTypeReminders[item].eventTypeId){return sanboxEventTypeReminders[item].periodInMins}}}},getCalendarContext:function(calendarDiv){var context;if(calendarDiv){context=this.getParameter(calendarDiv,"calendarContext")}return context||(AJS.Meta.get("space-key")?"spaceCalendars":"myCalendars")},isSingleCalendarView:function(calendarDiv){return"singleCalendar"===this.getParameter(calendarDiv,"calendarContext")},isSpaceCalendarView:function(calendarDiv){return"spaceCalendars"===this.getParameter(calendarDiv,"calendarContext")},isEmbeddedCalendarView:function(calendarDiv){return"page"===this.getParameter(calendarDiv,"calendarContext")},isMyCalendarView:function(calendarDiv){return"myCalendars"===this.getParameter(calendarDiv,"calendarContext")},putCalendarContextParams:function(data){data.calendarContext=this.getCalendarContext();data.viewingSpaceKey=AJS.Meta.get("space-key")||""},toggleNoCalendarPage:function(show){if(show){$(".no-calendar-page").removeClass("hidden");$(".space-calendar-wrapper").addClass("hidden");$(".space-calendar-buttons").addClass("hidden")}else{$(".no-calendar-page").addClass("hidden");$(".space-calendar-buttons").removeClass("hidden");$(".space-calendar-wrapper").removeClass("hidden")}},isValidLicense:function(){var licencseMessages=$(".aui-message.error.license-invalid");return licencseMessages.size()===0},getParamsFromUrl:function(){var vars=[],hash;var q=window.location.href.split("?")[1];if(q!=undefined){q=q.split("&");for(var i=0;i<q.length;i++){hash=q[i].split("=");vars.push(hash[1]);vars[hash[0]]=hash[1]}}return vars},isCalendarNameTruncated:function($element){var isTruncated=false;var $c=$element.clone().css({display:"inline",width:"auto",visibility:"hidden"}).appendTo("body");if($c.width()>$element.width()){isTruncated=true}$c.remove();return isTruncated}};return calendarUtils});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-util', location = 'com/atlassian/confluence/extra/calendar3/components/calendar-util/calendar-util-component-compat.js' */
(function(a){if(!Confluence.TeamCalendars){Confluence.TeamCalendars={}}if(!Confluence.TeamCalendars.Dialogs){Confluence.TeamCalendars.Dialogs={}}if(!Confluence.TeamCalendars.hasJiraLink){Confluence.TeamCalendars.hasJiraLink=a("#team-calendars-has-jira-link").length}if(!Confluence.TeamCalendars.getRestBaseUrl){Confluence.TeamCalendars.getRestBaseUrl=function(){return Confluence.getContextPath()+"/rest/calendar-services/1.0"}}})(AJS.$);require(["tc/calendar-util"],function(a){if(!Confluence.TeamCalendars.Dialogs){Confluence.TeamCalendars.Dialogs={}}for(var b in a){if(a.hasOwnProperty(b)){Confluence.TeamCalendars[b]=a[b]}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:auto-complete-search-helper', location = 'com/atlassian/confluence/extra/calendar3/components/auto-complete-search-helper/auto-complete-search-helper.js' */
define("tc/auto-complete-search-helper",["jquery","tc/calendar-util"],function(b,a){return{makeAutoCompleteSearch:function(f,e,d,h,c,g){e.keydown(function(j){var i=b("li.active",h);if(27==j.keyCode){if(!h.hasClass("hidden")){h.addClass("hidden");return false}}if(38==j.keyCode){if(!h.hasClass("hidden")){if(i.length){if(i.prev().length){i.removeClass("active").prev().addClass("active")}}else{b(".aui-dropdown li:last",h).addClass("active")}return false}}if(40==j.keyCode){if(!h.hasClass("hidden")){if(i.length){if(i.next().length){i.removeClass("active").next().addClass("active")}}else{b(".aui-dropdown li:first",h).addClass("active")}return false}return false}if(13==j.keyCode){if(!h.hasClass("hidden")){b(".aui-dropdown li.active a",h).trigger("click");return false}}if(b.trim(e.val())){setTimeout(function(){if(!b.trim(e.val())){h.addClass("hidden");return}b.ajax({cache:false,data:b.extend({search:"name",query:e.val()},d),dataType:"json",error:function(k,m,l){if(k.status!==400){a.showAjaxError(f,k,m,l)}},success:function(m){var n=b(document.createElement("ol"));var p=function(s){return k.id?a.getParameter(f,"baseUrl")+"/pages/viewpage.action?pageId="+encodeURIComponent(s.id):"#"};for(var r=0;r<m.group.length;++r){var l=m.group[r];if(l.result){for(var q=0;q<l.result.length;++q){var k=l.result[q];if(g&&!g(k)){continue}var o=b(document.createElement("li")).mouseover(function(){b("li.active",h).removeClass("active");b(this).addClass("active")});if(k.thumbnailLink){b(document.createElement("img")).attr("src",k.thumbnailLink.href).appendTo(o)}if(k.link&&k.link.length){b(document.createElement("span")).attr("title",k.title||(k.space?" "+k.space.name:"")).text(k.title).appendTo(b(document.createElement("a")).data("result",k).attr("href",p(k)||"").addClass(k.type?"content-type-"+k.type:"").click(function(){if(c){c(e,b(this))}h.addClass("hidden");return false}).appendTo(o))}o.appendTo(n)}}}if(n.children().length){b("li",n).each(function(s){if(s>4){b(this).remove()}});b(".aui-dropdown",h).empty().append(n);h.removeClass("hidden").dropDown("Standard")}else{h.addClass("hidden")}},timeout:a.ajaxTimeout,url:a.getParameter(f,"baseUrl")+"/rest/prototype/1/search.json"})},300)}}).focus(function(){if(e.hasClass("with-hint")){e.removeClass("with-hint").val("")}}).blur(function(){if(!b.trim(e.val())){e.addClass("with-hint").val("Confluence page or URL")}})}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:event-delete-dialog', location = 'com/atlassian/confluence/extra/calendar3/components/event-delete-dialog/event-delete-dialog.js' */
define("tc/event-delete-dialog",["jquery"],function(a){return function(f,c,e){var i;var h=function(k,j){if(!e.isProcessingEvent(f)){e.setProcessingEvent(f,true,j);e.deleteEvent(f,k,function(l,n,m){e.showAjaxError(f,l,n,m,e.ERROR_CLASS_EVENT_DELETE);j.hide();e.setProcessingEvent(f,false,j)},function(l){if(l.success){var o=e.getSubCalendar(f,c.subCalendarId);var m=c.eventType;var n;if(m==="custom"&&o&&o.customEventTypes&&o.customEventTypes.length){a.each(o.customEventTypes,function(p,q){if(q.customEventTypeId===c.customEventTypeId){n={customEventTypeName:q.title}}})}Confluence.TeamCalendars.fireEventForAnalytics("event.delete.default."+m+".context."+e.getParameter(f,"calendarContext"),n);e.setGenericErrors(f,null,e.ERROR_CLASS_EVENT_DELETE);if(k.singleInstance){e.getCalendarPanel(f).fullCalendar("removeEvents",[c.id])}else{e.reloadSubCalendar(f,o.id||o.parentId)}}else{e.setGenericErrors(f,"Uh oh. Looks like something unexpectedly went wrong. Please check the Confluence log file.",e.ERROR_CLASS_EVENT_DELETE)}j.hide();e.setProcessingEvent(f,false,j)});return false}};if(c.recur){i=new AJS.Dialog({width:550,height:270,id:"tc-confirm-event-delete"});i.addHeader("Delete Recurring Event");i.addPanel("",Confluence.TeamCalendars.Templates.confirmRecurringEventDelete({elementIdSuffix:e.getParameter(f,"elementIdSuffix")}),"tc-delete-event-confirmation-panel");var d=i.getCurrentPanel().body;var g=a("<span class='spinner hidden aui-icon aui-icon-wait'></span>");var b=function(k){var j=k.getPage(0).buttonpanel;g.prependTo(j)};i.enableOkButton=function(){a(":button",d).each(function(j,k){a(k).removeAttr("disabled").removeClass("ui-state-disabled")});g.addClass("hidden")};i.disableOkButton=function(){a(":button",d).each(function(j,k){a(k).attr("disabled","disabled").addClass("ui-state-disabled")});g.removeClass("hidden")};a(".tc-delete-this-instance-only",d).click(function(){h({subCalendarId:c.subCalendarId,uid:c.id,recurrenceId:c.recurId||"",originalStart:c.originalStart||"",singleInstance:true},i);return false});a(".tc-delete-future-instances-only",d).click(function(){h({subCalendarId:c.subCalendarId,uid:c.id,recurUntil:a.fullCalendar.formatDate(c.start,"yyyyMMdd")},i);return false});a(".tc-delete-all-instances",d).click(function(){h({subCalendarId:c.subCalendarId,uid:c.id},i);return false});i.addLink("Cancel",function(){i.hide();return false});b(i)}else{i=new AJS.Dialog(280,170);i.addHeader("Delete Event");i.addPanel("",Confluence.TeamCalendars.Templates.confirmEventDelete(),"tc-delete-event-confirmation-panel");i.addButton("Yes",function(){h({subCalendarId:c.subCalendarId,uid:c.id},i)});i.addLink("Cancel",function(){i.hide();return false})}return i}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:event-delete-dialog', location = '/com/atlassian/confluence/extra/calendar3/components/event-delete-dialog/event-delete-dialog.soy' */
// This file was automatically generated from event-delete-dialog.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.confirmEventDelete = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<p>', soy.$$escapeHtml("Are you sure? This cannot be undone"), '</p>');
  return opt_sb ? '' : output.toString();
};


Confluence.TeamCalendars.Templates.confirmRecurringEventDelete = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<ul class="tc-delete-recurring-event-options"><li><input type="button" value="', soy.$$escapeHtml("This instance only"), '" class="tc-delete-this-instance-only tc-delete-button aui-button"><span class="tc-delete-description">', soy.$$escapeHtml("All other events in this series will remain unchanged."), '</span></li><li><input type="button" value="', soy.$$escapeHtml("All future instances"), '" class="tc-delete-future-instances-only tc-delete-button aui-button"><span class="tc-delete-description">', soy.$$escapeHtml("This and all future instances will be removed."), '</span></li><li class="tc-last-delete-option"><input type="button" value="', soy.$$escapeHtml("All in the series"), '" class="tc-delete-all-instances tc-delete-button aui-button"><span class="tc-delete-description">', soy.$$escapeHtml("The entire series will be removed."), '</span></li></ul>');
  return opt_sb ? '' : output.toString();
};


Confluence.TeamCalendars.Templates.confirmCustomEventNameDelete = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<p>', soy.$$escapeHtml("This will delete all"), ' <strong>', soy.$$escapeHtml(opt_data.customEventName), '</strong> ', soy.$$escapeHtml("events and remove this type of event from the calendar. This cannot be undone. Are you sure?"), '</p>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:user-timezone-setup', location = 'com/atlassian/confluence/extra/calendar3/components/user-timezone-setup/user-timezone-setup.soy' */
// This file was automatically generated from user-timezone-setup.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.userTimezoneSetup = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="user-time-zone-desc"></div><div class="user-time-zone-select hidden"><select name="userTimeZoneSetupSelect" id="userTimeZoneSetupSelect" disabled="disabled"></select>&nbsp;<span class="spinner aui-icon aui-icon-wait"></span></div>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:user-timezone-setup', location = 'com/atlassian/confluence/extra/calendar3/components/user-timezone-setup/user-timezone-setup.js' */
define("tc/user-timezone-setup",["jquery","tc/util","tc-backbone","tc/templates"],function(b,d,e,a){var c=e.View.extend({dialog:null,options:null,$userTimeZoneSelectContainer:null,userTimeZone:"",isPDLEnabled:false,baseUrlRest:"",baseUrlCalendarService:"",ajaxTimeout:120000,template:a.userTimezoneSetup(),defaults:{callbackHandler:null,textTitleDialog:"Setup Team Calendars",textDescTimeZoneSetup:"Your time zone is currently set to {0}. If that is not your time zone, please select the right one.",textBtnOk:"OK"},initialize:function(f){this.options=b.extend({},this.defaults,f);if(!this.options.callbackHandler){AJS.debug("tc/user-timezone-setup: requires 'callbackHandler' object")}var g=Confluence.TeamCalendars;this.userTimeZone=g.getUserTimeZone();this.isPDLEnabled=g.isPDLEnabled();this.baseUrlRest=g.getRestBaseUrl();this.baseUrlCalendarService=g.getCalendarServiceBaseUrl("/preferences/timezone.json");this.ajaxTimeout=g.ajaxTimeout;this.options.textDescTimeZoneSetup=AJS.format(this.options.textDescTimeZoneSetup,this.userTimeZone)},render:function(){this._createDialog();this._populateTimeZoneDropDown();return this.dialog},_createDialog:function(){var f=this;this.dialog=new AJS.Dialog({width:512,height:this.isPDLEnabled?220:200,id:"team-calendars-timezone-setup-dialog"});this.dialog.addHeader(this.options.textTitleDialog);this.dialog.addPanel("",this.template,"setup-calendar-panel");this.dialog.addButton(this.options.textBtnOk,function(){f.dialog.hide();f.dialog.remove();f.options.callbackHandler.showCalendarWizard()},"set-timezone-button");this.el=this.dialog.getCurrentPanel().body;this.$el=b(this.el);this.$el.find(".user-time-zone-desc").text(this.options.textDescTimeZoneSetup);this.$userTimeZoneSelectContainer=this.$el.find(".user-time-zone-select");this.$userTimeZoneSelectContainer.removeClass("hidden");this.$userTimeZoneSelectContainer.find("select").change(_.bind(this._changeSelectionTimeZone,this));this.options.callbackHandler.suppressMessage("MESSAGE_KEY_TIMEZONE_SETUP");return this.dialog},_populateTimeZoneDropDown:function(){var g=this,f=this.$el.find("#userTimeZoneSetupSelect"),h=this.dialog.popup.element.find(".set-timezone-button");h.disable();g.$userTimeZoneSelectContainer.addClass("loading");b.ajax({type:"GET",url:this.baseUrlRest+"/timezones/user",success:function(i){f.html(a.timeZoneDropDown(i)).val(g.userTimeZone).removeAttr("disabled");g.$userTimeZoneSelectContainer.removeClass("loading");h.enable()},error:function(i,k,j){g.options.callbackHandler.showAjaxError(i,k,j);g.$userTimeZoneSelectContainer.removeClass("loading")},timeout:this.ajaxTimeout})},_changeSelectionTimeZone:function(){var h=this;this.$userTimeZoneSelectContainer.addClass("loading");var g=this.dialog.popup.element.find(".set-timezone-button").attr("disabled","disabled");var f=this.$userTimeZoneSelectContainer.find("option:selected");b.ajax({url:this.baseUrlCalendarService,cache:false,data:{timeZoneId:f.val()},error:function(i,k,j){h.options.callbackHandler.showAjaxError(i,k,j,"error-config-update");g.removeAttr("disabled");h.$userTimeZoneSelectContainer.removeClass("loading")},success:function(){h.options.callbackHandler.setGenericErrors(null,"error-config-update");h.options.callbackHandler.setParameter("userTimeZoneId",f.val());h.$el.find(".user-time-zone-desc").text(h.options.textDescTimeZoneSetup);g.removeAttr("disabled");h.$userTimeZoneSelectContainer.removeClass("loading")},type:"PUT",timeout:this.ajaxTimeout})}});return c});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:user-timezone-setup', location = 'com/atlassian/confluence/extra/calendar3/components/user-timezone-setup/user-timezone-setup-combat.js' */
require(["tc/user-timezone-setup"],function(a){if(!Confluence.TeamCalendars.Dialogs){Confluence.TeamCalendars.Dialogs={}}Confluence.TeamCalendars.Dialogs.getTimeZoneSetupDialog=function(b){return new a({callbackHandler:b}).render()}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:import-subcalendar', location = 'com/atlassian/confluence/extra/calendar3/components/import-subcalendar/import-subcalendar.soy' */
// This file was automatically generated from import-subcalendar.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.importSubcalendar = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="aui-message error calendar-error hidden"><p class="title"><span class="aui-icon icon-error"></span><strong>', soy.$$escapeHtml("Error(s) occurred."), '</strong></p><div class="error-content"><ul class="error-messages hidden"></ul></div></div><div class="aui-message warning tc-need-timezone hidden"><p class="title"><span class="aui-icon icon-warning"></span><strong>', soy.$$escapeHtml("Unable to determine calendar timezone"), '</strong></p><p>', soy.$$escapeHtml("The timezone for this calendar could not be determined. Please set the timezone below."), '</p></div><form name="importSubCalendarForm" class="sub-calendar-import-form aui" method="POST" action="', soy.$$escapeHtml(""), '/plugins/calendar/importsubcalendar.action" enctype="multipart/form-data" target="import-iframe-sink"><input type="hidden" name="calendarId" value=""><input type="hidden" name="decorator" value="none"><input type="hidden" name="color" value=""><input type="hidden" name="spaceKey" value=""><div class="field-group"><label for="import-name">', soy.$$escapeHtml("Name"), '<span class="aui-icon icon-required"></span></label><input name="name" id="import-name"  type="text" class="text" value="" autocomplete="off"><div class="description">', soy.$$escapeHtml("Leave this blank to use the calendar\x27s name from the ICS file."), '</div><div class="error name-error"></div></div><div class="field-group"><label for="import-description">', soy.$$escapeHtml("Description"), '</label><textarea name="description" id="import-description" rows="4" class="textarea"></textarea></div><div class="field-group field-group-space-permission"><label for="spaceKeyAutocomplete">', soy.$$escapeHtml("Linked space"), '<span class="aui-icon icon-required"></span></label><input name="spaceKeyAutocomplete" id="spaceKeyAutocomplete" type="text" class="autocomplete-space text" data-max="5" data-none-message="', soy.$$escapeHtml("No spaces found"), '"><div class="description">', soy.$$escapeHtml("Link this calendar to a space."), '</div><div class="error spaceKeyAutocomplete-error"></div></div><div class="field-group"><label for="ical-file">', soy.$$escapeHtml("Upload iCal"), '<span class="aui-icon icon-required"></span></label><input type="file" class="file upfile" name="file_0" size="25"><div class="error file_0-error"></div></div><div class="field-group tc-field-group-timezone hidden"><label for="timeZone">', soy.$$escapeHtml("Time zone"), '<span class="aui-icon icon-required"></span></label><select name="timeZoneId" class="select timeZone"></select><span class="spinner aui-icon aui-icon-wait"></span><div class="error timeZoneId-error"></div></div><iframe class="subcalendar-import-result hidden" name="import-iframe-sink" src="', soy.$$escapeHtml(""), '/fourohfour.action"></iframe></form>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:import-subcalendar', location = 'com/atlassian/confluence/extra/calendar3/components/import-subcalendar/import-subcalendar.js' */
define("tc/import-subcalendar",["jquery","underscore","tc/util","tc-backbone","tc/templates","tc/calendar-util"],function(e,a,f,g,c,b){var d=g.View.extend({dialog:null,$uploadIframe:null,$submitButton:null,options:null,template:c.importSubcalendar(),events:{"selected.autocomplete-content input[name='spaceKeyAutocomplete']":"_selectSpace","submit .sub-calendar-import-form":"_submit"},defaults:{callbackHandler:null,textTitleDialog:"Import calendar",textBtnImport:"Import",textLinkCancel:"Cancel"},initialize:function(h){this.options=e.extend({},this.defaults,h);if(!this.options.callbackHandler){AJS.debug("tc/import-subcalendar: requires 'callbackHandler' object")}},render:function(){this._createSubCalendarImportDialog();this._populateSubCalendarImportForm();this.$submitButton=this.dialog.popup.element.find(".submit");return this.dialog},_createSubCalendarImportDialog:function(){var h=this,i=function(){var j=h.$el.find("form.sub-calendar-import-form");j.submit();return false};if(this.dialog){return}this.dialog=new AJS.ConfluenceDialog({height:429,width:512,onSubmit:i,id:"import-calendar-dialog"});this.dialog.addHeader(this.options.textTitleDialog);this.dialog.addPanel("",this.template,"calendar-dialog-panel");this.dialog.addButton(this.options.textBtnImport,i,"submit");this.dialog.addLink(this.options.textLinkCancel,a.bind(this._cancelDialog,this));this.el=this.dialog.getCurrentPanel().body;this.$el=e(this.el);this.$uploadIframe=this.$el.find(".subcalendar-import-result");this.delegateEvents();this.$el.find(".subcalendar-import-result").load(a.bind(this._loadedResultImport,this))},_populateSubCalendarImportForm:function(){this.$el.find("input[name='name'], textarea[name='description'], input[name='spaceKey'], input[name='spaceKeyAutocomplete']").val("");this.$el.find("input[name='color']").val(this.options.callbackHandler.getNextCalendarColor());this.$el.find(".field-group .error").empty();if(AJS.Meta.get("space-key")){this.$el.find("input[name='spaceKey']").val(AJS.Meta.get("space-key"));var h=e(".field-group-space-permission",this.$el);h.css("display","none")}},_submit:function(){this.options.callbackHandler.setProcessingSubCalendar(true);this.options.callbackHandler.setSubCalendarSpinnerIconVisible(true);this.$uploadIframe.data("activated",true);b.disableButton(this.$submitButton,"Importing...")},_selectSpace:function(i,h){this.$el.find("input[name='spaceKey']").val(h.content.key);this.$el.find("input[name='spaceKeyAutocomplete']").val(h.content.name)},_cancelDialog:function(){this.dialog.remove();this.dialog=null;return false},_loadedResultImport:function(){var j=this;if(!this.$uploadIframe.data("activated")){return}var l=this.$uploadIframe[0].contentWindow||this.$uploadIframe[0].contentDocument;l=l.document?l.document:l;var i=e(l).find(".subcalendar-id").text();if(e(".import-timezone-required",l).length){b.disableButton(this.$submitButton);j.$el.find(".tc-need-timezone").show();j.$el.find(".tc-field-group-timezone").show();Confluence.TeamCalendars.populateTimeZoneDropDown(j.$el.find(".tc-field-group-timezone .timeZone"),Confluence.TeamCalendars.getUserTimeZone(),function(){b.enableButton(j.$submitButton,"Import")},function(m,o,n){j.options.callbackHandler.showAjaxError(m,o,n)});j.dialog.updateHeight()}else{if(!e(".import-successful",l).length){var h=[];e(".field-errors input",l).each(function(){h.push({field:this.name,errorMessages:[this.value]})});if(h.length){Confluence.TeamCalendars.setFieldErrors(j.$el.find(".sub-calendar-import-form")[0],h);j.dialog.updateHeight()}var k=[];e(".action-error",l).each(function(){k.push(e(this).text())});if(k.length){Confluence.TeamCalendars.setGenericErrors(j.el,k,"error-subcalendar-update")}}else{j.dialog.remove();j.options.callbackHandler.handleImport(i)}}b.enableButton(this.$submitButton,"Import");j.options.callbackHandler.setSubCalendarSpinnerIconVisible(false);j.options.callbackHandler.setProcessingSubCalendar(false)}});return d});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:import-subcalendar', location = 'com/atlassian/confluence/extra/calendar3/components/import-subcalendar/import-subcalendar-compat.js' */
require(["tc/import-subcalendar"],function(a){if(!Confluence.TeamCalendars.Dialogs){Confluence.TeamCalendars.Dialogs={}}Confluence.TeamCalendars.Dialogs.getSubCalendarImportDialog=function(b){return new a({callbackHandler:b}).render()}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:customeventtype-edit', location = 'com/atlassian/confluence/extra/calendar3/components/customeventype/customeventtype-model.js' */
define("tc/customeventtype-model",["jquery","tc-backbone"],function(b,c){var a=c.Model.extend({defaults:function(){return{title:"",icon:"",subCalendar:"",disable:false,isCustomEvent:false,id:"",created:"",periodInMins:""}},validate:function(d){if(!d.isCustomEvent){return false}var e=[];if(!d.title){e.push({field:"title",message:"Event name is required"})}d.title=b.trim(d.title);if(d.title.length<=0){e.push({field:"title",message:"Event name is required"})}else{if(d.title.length>256){e.push({field:"title",message:"Event name should be less than or equal to 256 characters"})}}if(!d.icon){e.push({field:"icon",message:"Event icon is required"})}return e.length>0?e:false},toggle:function(){this.set({disable:!this.get("disable")})}});return a});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:customeventtype-edit', location = 'com/atlassian/confluence/extra/calendar3/components/customeventype/customeventtype-edit/customeventtype-edit.soy' */
// This file was automatically generated from customeventtype-edit.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.editCustomEventType = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<tr id="edit-custom-event-type-form"><td colspan="3"><div class="aui-message warning tooltip-warning hidden"><span class="title"><span class="aui-icon icon-warning"></span>', soy.$$escapeHtml("Save or cancel your custom event type before continuing."), '</span></div><form class="aui form-add-custom">', (opt_data.isCustomEventType) ? '<fieldset class="field-group custom-event-title"><label for="event-title">' + soy.$$escapeHtml("Event Name") + '<span class="aui-icon icon-required">required</span></label><input class="text medium-field" type="text" id="custom-eventtype-title" name="event-title" title="Event Title" value="' + soy.$$escapeHtml(opt_data.title) + '"/><p class="hidden error custom_event_type_field_error" data-field-name="title"></p></fieldset><fieldset class="field-group select-avatar tc-event-type-item"><label for="event-title">' + soy.$$escapeHtml("Event Icon") + '<span class="aui-icon icon-required">required</span></label><div class = "custom-eventtype-icons"><button class="' + ((opt_data.icon == 'campaign') ? 'selected' : '') + '"><span class="aui-icon icon-teamcals campaign" data-icon = "campaign"></span></button><button class="' + ((opt_data.icon == 'conference') ? 'selected' : '') + '"><span class="aui-icon icon-teamcals conference" data-icon = "conference"></span></button><button class="' + ((opt_data.icon == 'deployment') ? 'selected' : '') + '"><span class="aui-icon icon-teamcals deployment" data-icon = "deployment" ></span></button><button class="' + ((opt_data.icon == 'home') ? 'selected' : '') + '"><span class="aui-icon icon-teamcals home" data-icon = "home"></span></button><button class="' + ((opt_data.icon == 'marketing_email') ? 'selected' : '') + '"><span class="aui-icon icon-teamcals marketing_email" data-icon = "marketing_email"></span></button><button class="' + ((opt_data.icon == 'meeting') ? 'selected' : '') + '"><span class="aui-icon icon-teamcals meeting" data-icon = "meeting"></span></button><button class="' + ((opt_data.icon == 'milestone') ? 'selected' : '') + '"><span class="aui-icon icon-teamcals milestone" data-icon = "milestone"></span></button><button class="' + ((opt_data.icon == 'outage') ? 'selected' : '') + '"><span class="aui-icon icon-teamcals outage" data-icon = "outage"></span></button><button class="' + ((opt_data.icon == 'party') ? 'selected' : '') + '"><span class="aui-icon icon-teamcals party" data-icon = "party"></span></button><button class="' + ((opt_data.icon == 'sporting_event') ? 'selected' : '') + '"><span class="aui-icon icon-teamcals sporting_event" data-icon = "sporting_event"></span></button><button class="' + ((opt_data.icon == 'testing') ? 'selected' : '') + '"><span class="aui-icon icon-teamcals testing" data-icon = "testing"></span></button><button class="' + ((opt_data.icon == 'training') ? 'selected' : '') + '"><span class="aui-icon icon-teamcals training" data-icon = "training"></span></button><button class="' + ((opt_data.icon == 'workshop') ? 'selected' : '') + '"><span class="aui-icon icon-teamcals workshop" data-icon = "workshop"></span></button><button class="' + ((opt_data.icon == 'events') ? 'selected' : '') + '"><span class="aui-icon icon-teamcals events" data-icon = "events"></span></button><button class="' + ((opt_data.icon == 'travel') ? 'selected' : '') + '"><span class="aui-icon icon-teamcals travel" data-icon = "travel"></span></button><!--<button class="' + ((opt_data.icon == 'birthdays') ? 'selected' : '') + '"><span class="aui-icon icon-teamcals birthdays" data-icon = "birthdays"></span></button>--><button class="' + ((opt_data.icon == 'leaves') ? 'selected' : '') + '"><span class="aui-icon icon-teamcals leaves" data-icon = "leaves"></span></button><button class="' + ((opt_data.icon == 'jira_box') ? 'selected' : '') + '"><span class="aui-icon icon-teamcals jira_box" data-icon = "jira_box"></span></button><button class="' + ((opt_data.icon == 'sprints') ? 'selected' : '') + '"><span class="aui-icon icon-teamcals sprints" data-icon = "sprints"></span></button></div><p class="hidden error custom_event_type_field_error" data-field-name="icon"></p></fieldset>' : '<fieldset class="field-group"><span class="event-type-link" title="' + soy.$$escapeHtml(opt_data.title) + '"><span class="' + soy.$$escapeHtml(opt_data.icon) + '"></span><span class="event-type-label">' + soy.$$escapeHtml(opt_data.title) + '</span></span></fieldset>', '<fieldset><div class="field-group"><label for="dBase">', soy.$$escapeHtml("Reminder"), '</label><select class="select" id="period-reminder" name="period" title="database select"><option value="0" ', (opt_data.periodInMins == 0) ? 'selected' : '', '>', soy.$$escapeHtml("None"), '</option><option value="5" ', (opt_data.periodInMins == 5) ? 'selected' : '', '>', soy.$$escapeHtml(AJS.format("{0} minutes",'5')), ' ', soy.$$escapeHtml("before"), '</option><option value="10" ', (opt_data.periodInMins == 10) ? 'selected' : '', '>', soy.$$escapeHtml(AJS.format("{0} minutes",'10')), ' ', soy.$$escapeHtml("before"), '</option><option value="20" ', (opt_data.periodInMins == 20) ? 'selected' : '', '>', soy.$$escapeHtml(AJS.format("{0} minutes",'20')), ' ', soy.$$escapeHtml("before"), '</option><option value="30" ', (opt_data.periodInMins == 30) ? 'selected' : '', '>', soy.$$escapeHtml(AJS.format("{0} minutes",'30')), ' ', soy.$$escapeHtml("before"), '</option><option value="60" ', (opt_data.periodInMins == 60) ? 'selected' : '', '>', soy.$$escapeHtml(AJS.format("{0} hour",'1')), ' ', soy.$$escapeHtml("before"), '</option><option value="120" ', (opt_data.periodInMins == 120) ? 'selected' : '', '>', soy.$$escapeHtml(AJS.format("{0} hours",'2')), ' ', soy.$$escapeHtml("before"), '</option><option value="240" ', (opt_data.periodInMins == 240) ? 'selected' : '', '>', soy.$$escapeHtml(AJS.format("{0} hours",'4')), ' ', soy.$$escapeHtml("before"), '</option><option value="480" ', (opt_data.periodInMins == 480) ? 'selected' : '', '>', soy.$$escapeHtml(AJS.format("{0} hours",'8')), ' ', soy.$$escapeHtml("before"), '</option><option value="1440" ', (opt_data.periodInMins == 1440) ? 'selected' : '', '>', soy.$$escapeHtml(AJS.format("{0} day",'1')), ' ', soy.$$escapeHtml("before"), '</option><option value="2880" ', (opt_data.periodInMins == 2880) ? 'selected' : '', '>', soy.$$escapeHtml(AJS.format("{0} days",'2')), ' ', soy.$$escapeHtml("before"), '</option><option value="4320" ', (opt_data.periodInMins == 4320) ? 'selected' : '', '>', soy.$$escapeHtml(AJS.format("{0} days",'3')), ' ', soy.$$escapeHtml("before"), '</option><option value="10080" ', (opt_data.periodInMins == 10080) ? 'selected' : '', '>', soy.$$escapeHtml(AJS.format("{0} week",'1')), ' ', soy.$$escapeHtml("before"), '</option><option value="20160" ', (opt_data.periodInMins == 20160) ? 'selected' : '', '>', soy.$$escapeHtml(AJS.format("{0} weeks",'2')), ' ', soy.$$escapeHtml("before"), '</option><option value="30240" ', (opt_data.periodInMins == 30240) ? 'selected' : '', '>', soy.$$escapeHtml(AJS.format("{0} weeks",'3')), ' ', soy.$$escapeHtml("before"), '</option><option value="40320" ', (opt_data.periodInMins == 40320) ? 'selected' : '', '>', soy.$$escapeHtml(AJS.format("{0} weeks",'4')), ' ', soy.$$escapeHtml("before"), '</option></select></div></fieldset><div class="event-type-info"><div class="tc-aui-help-content"><div class="event-type-info-text"><span>', soy.$$escapeHtml("Changes will affect everyone that uses this calendar; including reminder times."), '</span></div></div></div><span class="buttons-container"><span class="buttons"><input class="button button-panel-button save" tabindex="30" type="button" value="', soy.$$escapeHtml("Save"), '" id="save-custom-event-type"><a class="cancel" tabindex="31"  href="#">Cancel</a></span></span></form></td></tr>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:customeventtype-edit', location = 'com/atlassian/confluence/extra/calendar3/components/customeventype/customeventtype-edit/customeventtype-edit.js' */
define("tc/customeventtype-edit",["jquery","underscore","tc-backbone"],function(c,a,d){var b=d.View.extend({parentCustomEventTypeDiv:null,mediator:null,isOpen:null,events:{"click input.save":"_updateCustomEventType","click a.cancel":"_closeInlineDialog","click .select-avatar button":"_selectIconCustomEventType",keydown:"handleKey"},initialize:function(e){if(!e){return}this.mediator=e.mediator;this.parentCustomEventTypeDiv=e.parentCustomEventTypeDiv;this.model.on("invalid",a.bind(this._handleError,this));this.mediator.on("Custom-Event-Type.edit.open",a.bind(this.shouldRemoveMe,this));this.mediator.trigger("Custom-Event-Type.edit.open",this)},render:function(){var e=this;var f=e.model.get("isCustomEvent")===true;c(".custom-event-type-items-instructional").addClass("hidden");c(e.parentCustomEventTypeDiv).addClass("hidden");c(e.parentCustomEventTypeDiv).after(Confluence.TeamCalendars.Templates.editCustomEventType({title:e.model.get("title"),icon:e.model.get("icon"),periodInMins:e.model.get("periodInMins"),isCustomEventType:f}));e.$editCustomEventTypeForm=c("#edit-custom-event-type-form");e.el=e.$editCustomEventTypeForm;e.$el=c(e.el);e.delegateEvents();e.$editCustomEventTypeForm.find(".custom-event-title input").focus();this.isOpen=true},shouldRemoveMe:function(){if(this.isOpen){this.remove()}},remove:function(){this._closeInlineDialog()},handleKey:function(f){if(f.which===13){f.preventDefault();f.stopPropagation();this._updateCustomEventType()}if(f.which===27){f.preventDefault();f.stopPropagation();this._closeInlineDialog()}},_closeInlineDialog:function(){c(this.parentCustomEventTypeDiv).removeClass("hidden");if(this.model.collection&&this.model.collection.customEventTypes().length===0){c(".custom-event-type-items-instructional").removeClass("hidden")}this.$editCustomEventTypeForm.remove()},_updateCustomEventType:function(){this.$editCustomEventTypeForm.find(".custom_event_type_field_error").each(function(l,m){var k=c(m);if(!k.hasClass("hidden")){k.addClass("hidden")}});var j=this.$editCustomEventTypeForm.find(".custom-event-title input").val();var f=this.$editCustomEventTypeForm.find(".select-avatar button.selected span").data("icon");var e=this.$editCustomEventTypeForm.find("#period-reminder").val();var h=this.model.get("title");var g=this.model.get("icon");var i=this.model.get("periodInMins");this.model.set({title:j!==undefined?j:h,icon:f!==undefined?f:g,periodInMins:e});if(!this.model.isValid()){this.model.set({title:h,icon:g,periodInMins:i});return}this.mediator.trigger("Custom-Event-Type.save",this.model);this._closeInlineDialog()},_handleError:function(f,h){var g=this;var e=function(j){var i=a.where(h,{field:j});if(i.length>0){return i[0].message}return""};this.$editCustomEventTypeForm.find(".custom_event_type_field_error").each(function(j,k){var i=c(k);var l=i.data("field-name");i.html(e(l));if(i.hasClass("hidden")){i.removeClass("hidden")}if(l==="title"){g.$editCustomEventTypeForm.find("#custom-eventtype-title").focus()}})},_selectIconCustomEventType:function(e){if(!e){e=window.event}e.preventDefault();c(".select-avatar.tc-event-type-item button").removeClass("selected");var f=e.target||e.srcElement;if(f.nodeName==="SPAN"){c(f).parent().addClass("selected")}else{c(f).addClass("selected")}}});return b});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:customeventtype-edit', location = 'com/atlassian/confluence/extra/calendar3/components/customeventype/customeventtype-edit/customeventtype-edit-compat.js' */
require(["tc/customeventtype-edit","tc/customeventtype-model"],function(a,b){if(!Confluence.TeamCalendars.Dialogs){Confluence.TeamCalendars.Dialogs={}}Confluence.TeamCalendars.Dialogs.getCustomEventTypeEdit=function(f,c){var e=$(f).parent().parent();var g=$(e).find("span.custom-event-type").data();var d=new b({title:g.title,icon:g.icon,subCalendar:c,periodInMins:g.periodInMins});return new a({parentCustomEventTypeDiv:e,dataCustomEventType:g,model:d}).render()}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:eventtypes-edit', location = 'com/atlassian/confluence/extra/calendar3/components/customeventype/customeventtype-list.js' */
define("tc/customeventtype-list",["jquery","tc-backbone","tc/customeventtype-model","underscore"],function(c,e,d,a){var b=e.Collection.extend({model:d,select:function(g){this.selectedId=g;var f=this.selectedItem();this.trigger("selected",this);return f},selectedItem:function(){if(this.selectedId){return this.findWhere({id:this.selectedId})}return undefined},defaultEventTypes:function(){return this.where({isCustomEvent:false})},customEventTypes:function(){return this.where({isCustomEvent:true})},initialize:function(){this.sortField="name";this.sortDirection="ASC"},setSortField:function(g,f){this.sortField=g;this.sortDirection=f},comparator:function(f){return f.get(this.sortField)},sortBy:function(g,f){var i=this.models,h=this.sortDirection;return a.pluck(a.map(i,function(l,j,k){return{value:l,index:j,criteria:g.call(f,l,j,k)}}).sort(function(m,j){var l=h==="ASC"?m.criteria:j.criteria,k=h==="ASC"?j.criteria:m.criteria;if(l!==k){if(l>k||l===void 0){return 1}if(l<k||k===void 0){return -1}}return m.index<j.index?-1:1}),"value")}});return b});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:eventtypes-edit', location = 'com/atlassian/confluence/extra/calendar3/components/customeventype/customeventtype-model.js' */
define("tc/customeventtype-model",["jquery","tc-backbone"],function(b,c){var a=c.Model.extend({defaults:function(){return{title:"",icon:"",subCalendar:"",disable:false,isCustomEvent:false,id:"",created:"",periodInMins:""}},validate:function(d){if(!d.isCustomEvent){return false}var e=[];if(!d.title){e.push({field:"title",message:"Event name is required"})}d.title=b.trim(d.title);if(d.title.length<=0){e.push({field:"title",message:"Event name is required"})}else{if(d.title.length>256){e.push({field:"title",message:"Event name should be less than or equal to 256 characters"})}}if(!d.icon){e.push({field:"icon",message:"Event icon is required"})}return e.length>0?e:false},toggle:function(){this.set({disable:!this.get("disable")})}});return a});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:eventtypes-edit', location = 'com/atlassian/confluence/extra/calendar3/components/customeventype/customeventtype-view/customeventtype-view.js' */
define("tc/customeventtype-view",["jquery","tc-backbone","tc/dialogs","tc/templates","tc/customeventtype-edit","tc/calendar-util"],function(f,g,b,d,e,c){var a=g.View.extend({tagName:"tr",mediator:null,confirmDialog:null,events:{"click .hidden-link":"_toggle","click .edit-eventtypes-link":"_edit","click .remove-eventtypes-link":"_removeFromCollection"},initialize:function(h){this.mediator=h.mediator;this.listenTo(this.model,"change",this.render);this.listenTo(this.model,"destroy",this.remove);this.listenTo(this.model.collection,"selected",this.selected)},render:function(){if(!this.$el.hasClass("event-type-item")){this.$el.addClass("event-type-item")}if(this.model.get("disable")){this.$el.addClass("event-type-item-hidden")}else{this.$el.removeClass("event-type-item-hidden")}this.$el.find(".eventtypes-icon-link a").each(function(j,k){var l=f(k).data("tipsy");if(l){l.disable();l.hide()}});var h=f.extend({},this.model,{showInforReminder:c.showInforReminder(this.model.attributes.periodInMins)});this.$el.html(Confluence.TeamCalendars.Templates.viewCustomEventType({eventTypeModel:h}));var i=this.$el.find(".eventtypes-icon-link a");if(i.tooltip){i.tooltip({aria:true})}return this},removeEventListener:function(){this.$el.off("click",".hide-eventtypes-link")},remove:function(){this.$el.remove()},selected:function(i){var h=i.selectedItem();if(h.id===this.model.id){this._edit()}},_toggle:function(){this.model.toggle()},_edit:function(){var h=new e({model:this.model,parentCustomEventTypeDiv:this.$el,mediator:this.mediator});h.render();f("#edit-calendar-dialog").find(".eventtypes-edit-dialog-panel").scrollTop(h.$el.position().top)},_removeFromCollection:function(){var h=this;h.mediator.trigger("close-edit-custom-event-dialog");h._showConfirmCustomEventTypeDeleteDialog(h.model)},_getCustomEventTypeData:function(h){return{subCalendarId:h.get("subCalendar").id,customEventTypeId:h.get("id")}},_showConfirmCustomEventTypeDeleteDialog:function(h){var j=this;function i(l){if(l.keyCode===27){j._calltrigerOpenEditCustomEventTypeDialog(i)}}f(document).keyup(i);var k=new AJS.Dialog(450,"auto","confirm-delete-custom-event-type");k.addHeader("Delete Event Type");k.addPanel("",Confluence.TeamCalendars.Templates.confirmCustomEventNameDelete({customEventName:h.get("title")}),"tc-confirm-delete-custom-event-type-dialog");k.addButton("Yes",function(){j._removeCustomEventType(h,k,i)});k.addLink("Cancel",function(){k.hide();j._calltrigerOpenEditCustomEventTypeDialog(i);return false});j.confirmDialog=k;j.confirmDialog.show();j.confirmDialog.updateHeight();return k},_removeCustomEventType:function(i,l,j){var k=this;var h=k._getCustomEventTypeData(i);f.ajax({cache:false,data:h,dataType:"json",error:function(m,o,n){l.hide()},success:function(){i.collection.remove(i);l.hide();k._calltrigerOpenEditCustomEventTypeDialog(j);var m={customEventTypeName:i.get("title")};Confluence.TeamCalendars.fireEventForAnalytics("customeventtype.delete",m)},type:"DELETE",timeout:Confluence.TeamCalendars.ajaxTimeout,url:Confluence.TeamCalendars.getCalendarServiceBaseUrl("/customeventtypes.json")})},_calltrigerOpenEditCustomEventTypeDialog:function(h){this.mediator.trigger("open-edit-custom-event-dialog");if(this.confirmDialog){this.confirmDialog.hide();this.confirmDialog.remove()}f(document).unbind("keyup",h)}});return a});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:eventtypes-edit', location = 'com/atlassian/confluence/extra/calendar3/components/customeventype/customeventtype-view/customeventtype-view.soy' */
// This file was automatically generated from customeventtype-view.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.viewCustomEventType = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<td class="custom-event-type-title" data-id="', soy.$$escapeHtml(opt_data.eventTypeModel.attributes.id), '" data-title="', soy.$$escapeHtml(opt_data.eventTypeModel.attributes.title), '"><span class="event-type-link" title="', soy.$$escapeHtml(opt_data.eventTypeModel.attributes.title), '"><span class="', soy.$$escapeHtml(opt_data.eventTypeModel.attributes.icon), '"></span><span class="event-type-label">', soy.$$escapeHtml(opt_data.eventTypeModel.attributes.title), '</span></span></td><td class="event-type-reminder-title"><span class="event-type-reminder-info" title="', soy.$$escapeHtml(opt_data.eventTypeModel.showInforReminder), '">', soy.$$escapeHtml(opt_data.eventTypeModel.showInforReminder), '</span></td><td class="eventtypes-icon-link">', (opt_data.eventTypeModel.attributes.isCustomEvent) ? '<a href="#" class="aui-icon edit-eventtypes-link" title="' + soy.$$escapeHtml("Edit Event") + '"></a><a href="#" class="aui-icon hidden-link ' + ((opt_data.eventTypeModel.attributes.disable) ? ' show-eventtypes-link ' : ' hide-eventtypes-link ') + '" title="' + ((opt_data.eventTypeModel.attributes.disable) ? ' ' + soy.$$escapeHtml("Show Event") + ' ' : ' ' + soy.$$escapeHtml("Hide Event") + ' ') + '"/><a href="#" class="aui-icon remove-eventtypes-link" title="' + soy.$$escapeHtml("Delete Event") + '"></a>' : '<a href="#" class="aui-icon edit-eventtypes-link" title="' + soy.$$escapeHtml("Edit Event") + '"></a><a href="#" class="aui-icon hidden-link ' + ((opt_data.eventTypeModel.attributes.disable) ? ' show-eventtypes-link ' : ' hide-eventtypes-link ') + '" title="' + ((opt_data.eventTypeModel.attributes.disable) ? ' ' + soy.$$escapeHtml("Show Event") + ' ' : ' ' + soy.$$escapeHtml("Hide Event") + ' ') + '"/>', '</td>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:eventtypes-edit', location = 'com/atlassian/confluence/extra/calendar3/components/customeventype/customeventtypes-edit-dialog/customeventtypes-edit-dialog.js' */
define("tc/eventtypes-edit-dialog",["jquery","underscore","tc-backbone","tc/dialogs","tc/templates","tc/customeventtype-view","tc/customeventtype-edit","tc/customeventtype-model","tc/customeventtype-list","tc/event-types"],function(e,i,h,g,k,d,a,f,c,j){var b=h.View.extend({editDialog:null,subCalendar:null,callbackHandler:null,mediator:null,events:{"click .add-custom-event-type-item span":"_showAddEventypeForm"},initialize:function(l){this.options=e.extend({},this.defaults,l);this.mediator=i.extend({},h.Events);this.subCalendar=this.options.subCalendar;this.callbackHandler=this.options.callbackHandler;this.collection=this._buildCustomEventTypeCollection();this.editDialog=this.options.editDialog;this.listenTo(this.collection,"reset add remove",this.render);this.mediator.on("Custom-Event-Type.save",i.bind(this._updateEventType,this,this.callbackHandler));this.mediator.on("close-edit-custom-event-dialog",i.bind(this._closeEditCustomEventTypeDialog,this));this.mediator.on("open-edit-custom-event-dialog",i.bind(this._openEditCustomEventTypeDialog,this));this.$el.html(k.editCalendarEventTypes({subCalendarId:this.subCalendar.id,eventTypes:this.collection}));this.editDialog.addPanel("Event Types",this.$el,"eventtypes-edit-dialog-panel")},render:function(){if(this.collection.customEventTypes().length===0){this.$el.find(".custom-event-type-items-instructional").removeClass("hidden")}else{this.$el.find(".custom-event-type-items-instructional").addClass("hidden")}this.$el.find(".event-type-item").remove();this._renderCustomeEventTypes(this.$el.find(".default-event-type-items"),this.collection.defaultEventTypes());this.collection.setSortField("created","DESC");this.collection.sort();this._renderCustomeEventTypes(this.$el.find(".custom-event-type-items"),this.collection.customEventTypes());this.editDialog.getCurrentPanel().onselect=function(){e("#edit-calendar-dialog").find(".button-panel-button.submit").removeClass("hidden")};return this.editDialog},selectCustomEvent:function(l){this.collection.select(l)},getDisableEventTypes:function(){var l=this.collection.chain().filter(function(m){return m.get("disable")===true}).map(function(m){return m.id}).value();return l},showAddEventypeForm:function(){e(".add-custom-event-type-item span").click()},_renderCustomeEventTypes:function(l,n){var m=this;e(n).each(function(o,q){var p=new d({model:q,mediator:m.mediator});l.after(p.render().el)})},_buildCustomEventTypeCollection:function(){var o=this;var t=o.subCalendar.disableEventTypes;var s=o.subCalendar.customEventTypes;var m=o.subCalendar.sanboxEventTypeReminders;var l=j.DefaultEventType;var n=new c();var q=function(u){for(var v in t){if(u===t[v]){return true}}return false};var r=function(u){for(var v in m){if(u===m[v].eventTypeId){return m[v].periodInMins}}};var p=new Array();e.each(l,function(u,w){if(!w.hiddenFromEventCreation){var v=new f({title:w.name,subCalendar:o.subCalendar,disable:q(w.id),id:w.id,icon:w.id,periodInMins:r(w.id)});p.push(v)}});if(s){e.each(s,function(u,w){var v=new f({title:w.title,subCalendar:o.subCalendar,disable:q(w.customEventTypeId),id:w.customEventTypeId,icon:w.icon,isCustomEvent:true,created:w.created,periodInMins:w.periodInMins});p.push(v)})}n.add(p);return n},_showAddEventypeForm:function(n){var o=e(n.target).closest(".add-custom-event-type-item");var l=new f({id:null,subCalendar:this.subCalendar,isCustomEvent:true});l.collection=this.collection;var m=new a({model:l,parentCustomEventTypeDiv:o,mediator:this.mediator});m.render();this.$el.parent().scrollTop(this.$el.find("#edit-custom-event-type-form form").position().top)},_updateEventType:function(m,l){if(l.get("isCustomEvent")===true){this._updateCustomEventType(m,l)}else{this._updateSanboxEventType(m,l)}},_updateCustomEventType:function(n,p){var o=this;var l=o._getCustomEventTypes(p);var m=this.$el.find("#save-custom-event-type");e(m).val("Saving...").attr("disabled","disabled").addClass("ui-state-disabled");e.ajax({cache:false,data:l,dataType:"json",error:function(q,s,r){n.showAjaxUpdateError(q,s,r)},success:function(r){var t=new f({subCalendar:o.subCalendar,isCustomEvent:true,title:r.title,icon:r.icon,id:r.customEventTypeId,created:r.created,periodInMins:r.periodInMins});var u={customEventTypeName:r.title};var s=true;var q=o.collection.where({id:r.customEventTypeId});if(q&&q.length>0){s=false}if(s){Confluence.TeamCalendars.fireEventForAnalytics("customeventtype.create",u)}else{Confluence.TeamCalendars.fireEventForAnalytics("customeventtype.update",u)}o.collection.add(t);o.$el.parent().scrollTop(o.$el.find(".add-custom-event-type-item").position().top)},type:"PUT",timeout:Confluence.TeamCalendars.ajaxTimeout,url:Confluence.TeamCalendars.getCalendarServiceBaseUrl("/customeventtypes.json")})},_updateSanboxEventType:function(o,n){var p=this;var l=p._getSanboxEventTypes(n);var m=this.$el.find("#save-custom-event-type");e(m).val("Saving...").attr("disabled","disabled").addClass("ui-state-disabled");e.ajax({cache:false,data:l,dataType:"json",error:function(q,s,r){o.showAjaxUpdateError(q,s,r)},success:function(q){p.collection.add(n);p.$el.parent().scrollTop(p.$el.find(".add-custom-event-type-item").position().top)},type:"PUT",timeout:Confluence.TeamCalendars.ajaxTimeout,url:Confluence.TeamCalendars.getCalendarServiceBaseUrl("/sanboxeventtypes.json")})},_selectIconCustomEventType:function(l){l.preventDefault();e(l.target).siblings(".icon-teamcals").removeClass("selected");e(l.target).addClass("selected")},_getCustomEventTypes:function(l){return{title:l.get("title"),icon:l.get("icon"),subCalendarId:l.get("subCalendar").id,customEventTypeId:l.get("id"),created:l.get("created"),periodInMins:l.get("periodInMins")}},_getSanboxEventTypes:function(l){return{title:l.get("title"),icon:l.get("icon"),subCalendarId:l.get("subCalendar").id,eventTypeId:l.get("id"),created:l.get("created"),periodInMins:l.get("periodInMins")}},_closeEditCustomEventTypeDialog:function(){this.editDialog.hide()},_openEditCustomEventTypeDialog:function(){this.editDialog.show()}});return b});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:eventtypes-edit', location = 'com/atlassian/confluence/extra/calendar3/components/customeventype/customeventtypes-edit-dialog/customeventtypes-edit-dialog.soy' */
// This file was automatically generated from customeventtypes-edit-dialog.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.editCalendarEventTypes = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<form name="editSubCalendarEventTypesForm" class="sub-calendar-edit-event-types-form aui" method="POST" action="#"><input type="hidden" name="subCalendarId" value="', soy.$$escapeHtml(opt_data.subCalendarId), '"><div class="form-mode create"><table id="eventtypes-edit-table" class="tc-event-type-item aui"><colgroup><col span="1" class="aui-restfultable-order"><col span="1"><col span="1" class="aui-restfultable-operations"></colgroup><tbody class="ui-sortable"><tr class="default-event-type-items"><td class="event-types-title">', soy.$$escapeHtml("Default Event Types"), '</td><td class="event-types-title">', soy.$$escapeHtml("Reminder"), '</td><td class="event-types-title"/></tr><tr class="custom-event-type-items"><td class="event-types-title">', soy.$$escapeHtml("Custom Event Types"), '</td><td class="event-types-title">', soy.$$escapeHtml("Reminder"), '</td><td class="event-types-title"/></tr><tr class="custom-event-type-items-instructional"><td class="custom-event-types-instructional" colspan="3">', soy.$$escapeHtml("Plan any type of event, like training, rosters, and campaigns!"), '</td></tr><tr class="add-custom-event-type-item"><td><span class="custom-event-type-link" title="', soy.$$escapeHtml("Add new event type"), '"><span class="add-event-type-icon"/><span class="add-event-type-label">', soy.$$escapeHtml("Add new event type"), '</span></span></td><td class="event-types-title"/></tr></tbody></table></div></form>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-edit', location = 'com/atlassian/confluence/extra/calendar3/components/calendar-edit-dialog/calendar-edit-dialog.js' */
define("tc/calendar-edit-dialog",["jquery","underscore","tc-backbone","tc/calendar-util","tc/util","tc/myCalendarTour","tc/eventtypes-edit-dialog","tc/calendar-restriction-dialog","tc/calendar-share-dialog","tc/calendar-ical-address-dialog"],function(d,k,j,g,i,h,b,f,a,e){var c=j.View.extend({subCalendarType:null,editForm:null,subCalendarTypeObj:null,editDialog:null,subCalendar:null,callbackHandler:null,submitButton:null,eventTypesEditDialogView:null,shareCalendarDialogView:null,calendarIcalAddressDialog:null,calendarDiv:null,calendarPlugin:null,calendarCache:null,restrictionDialog:null,initialize:function(l){this.options=d.extend({},this.defaults,l);if(!this.options.subCalendar){AJS.debug("tc/eventtypes-edit-dialog: requires 'subCalendar' object")}if(!this.options.callbackHandler){AJS.debug("tc/eventtypes-edit-dialog: requires 'callbackHandler' object")}this.callbackHandler=this.options.callbackHandler;this.subCalendar=this.options.subCalendar;this.subCalendarType=(typeof this.subCalendar==="string")?this.subCalendar:this.subCalendar.type;this.subCalendarTypeObj=Confluence.TeamCalendars.subcalendar[this.subCalendarType];this.calendarDiv=l.calendarDiv;this.calendarPlugin=l.calendarPlugin;this.calendarCache=l.calendarCache},render:function(){this._editCalendarDialog();if(g.isInternalSubscriptionSubCalendar(this.subCalendar)&&g.isJiraSubCalendar(this.subCalendar)){return this.editDialog}this.eventTypesEditDialogView=new b({editDialog:this.editDialog,subCalendar:this.subCalendar,callbackHandler:this.callbackHandler});this.eventTypesEditDialogView.render();this.restrictionDialog=new f({editDialog:this.editDialog,calendarPlugin:this.calendarPlugin,calendarDiv:this.calendarDiv,subCalendar:this.subCalendar,calendarCache:this.calendarCache});this.restrictionDialog.render();this.shareCalendarDialogView=new a({editDialog:this.editDialog,subCalendar:this.subCalendar,calendarPlugin:this.calendarPlugin,calendarDiv:this.calendarDiv});this.shareCalendarDialogView.render();this.calendarIcalAddressDialog=new e({editDialog:this.editDialog,subCalendar:this.subCalendar,calendarPlugin:this.calendarPlugin,calendarDiv:this.calendarDiv});this.calendarIcalAddressDialog.render();return this.editDialog},showRestrictionOption:function(){this.editDialog.gotoPanel(g.panelEditCalendar.RESTRICTION_PANEL)},showShareOption:function(){this.editDialog.gotoPanel(g.panelEditCalendar.SHARE_EMBEDDED_PANEL)},showSubscriptionOption:function(){this.editDialog.gotoPanel(g.panelEditCalendar.SUBSCRIBE_PANEL)},selectCustomEvent:function(l){this.editDialog.gotoPanel(g.panelEditCalendar.EVENT_TYPE_PANEL);this.eventTypesEditDialogView.selectCustomEvent(l)},showAddEventTypeForm:function(){this.editDialog.gotoPanel(g.panelEditCalendar.EVENT_TYPE_PANEL);this.eventTypesEditDialogView.showAddEventypeForm()},_editCalendarDialog:function(){var l=this;l.editDialog=new AJS.ConfluenceDialog({width:l.subCalendarTypeObj.dialogWidth||630,height:l.subCalendarTypeObj.dialogHeight||537,onSubmit:function(){l.editForm.submit();return false},onCancel:function(){l._callBackCancel(l.editDialog,l.callbackHandler);l.editDialog.remove()},id:"edit-calendar-dialog"});l.subCalendarTypeHandler=l.subCalendarTypeObj.getDialog(l.editDialog,d.isPlainObject(l.subCalendar)?l.subCalendar:null,l.callbackHandler);l.editDialog.popup.element.css("overflow","visible");l.editForm=l.subCalendarTypeHandler.initializeForm(k.bind(l._callBackCancel,l,l.editDialog,l.callbackHandler));l.submitButton=l.editDialog.popup.element.find(".submit");l.editForm.submit(function(){if(l.editDialog.getCurrentPanel()!==undefined){if(l.editDialog.getCurrentPanel().id===g.panelEditCalendar.GENERAL_PANEL){return l._submitCalendarEdit(l.callbackHandler,l.subCalendarTypeHandler,l.editDialog,l.editForm,l.subCalendarTypeObj)}else{if(l.editDialog.getCurrentPanel().id===g.panelEditCalendar.EVENT_TYPE_PANEL){var o=l.editDialog.getCurrentPanel().body;var n=d("form.sub-calendar-edit-event-types-form",o);var m=d("#edit-custom-event-type-form",n);if(d(m).length){d(m).find(".tooltip-warning").removeClass("hidden");d(o).scrollTop(d(m).find("form.form-add-custom").position().top);d(m).find(".custom-event-title input").focus();return false}return l._submitEventTypesEdit(n,l.editDialog,l.callbackHandler,l.subCalendarTypeHandler,l.submitButton)}else{if(l.editDialog.getCurrentPanel().id===g.panelEditCalendar.RESTRICTION_PANEL){return l._submitRestrictionEdit(l.editDialog)}}}}})},_submitCalendarEdit:function(m,n,q,s,v){if(m.isProcessingSubCalendar()){return false}m.setProcessingSubCalendar(true);m.setSubCalendarSpinnerIconVisible(true);n.onSubmitStart();var o=n.getFormDataAsAjaxData();if(m.getIncludedCalendars()){o.include=m.getIncludedCalendars()}var p=o.subCalendarId;var x=o.spaceKey;var r=o.viewingSpaceKey;var u=this.subCalendar.spaceKey;var l=this.calendarPlugin;var w=this.calendarDiv;var t=this.subCalendar.childSubCalendars;d.ajax({cache:false,converters:{"text json":function(y){return y}},data:o,dataFilter:function(y){var z=d.parseJSON(y);if(z.success){g.mergeSubCalendarObjectsToArray(z.payload)}return z},dataType:"json",error:function(y,A,z){m.showAjaxUpdateError(y,A,z);n.onSubmitEnd();m.setSubCalendarSpinnerIconVisible(false);m.setProcessingSubCalendar(false)},success:function(y){m.setGenericUpdateError();if(y.success){g.setFieldErrors(s,null);if((x!==u)&&(r!=="")){p=y.modifiedSubCalendarId;d("input[name='subCalendarId']",s).val(p);l.removeSubCalendarEventSource(w,p);l.removeSubCalendarEventSource(w,t);m.setSubCalendars(p,y.payload)}else{if(p){m.setSubCalendars(p,y.payload);m.reloadSubCalendar(p)}else{p=y.modifiedSubCalendarId;d("input[name='subCalendarId']",s).val(p);m.setSubCalendars(p,y.payload)}}m.refreshCalendarInfo(y.payload);m.updateAvailableSubCalendarsInSubCalendarPanel();n.onSubmitEnd();q.remove();m.setSubCalendarSpinnerIconVisible(false)}else{g.setFieldErrors(s,y.fieldErrors);n.onSubmitEnd();m.setSubCalendarSpinnerIconVisible(false);if(!v.dynamicDialogHeight){i.showDialogInUpdatedHeight(q)}}m.setProcessingSubCalendar(false)},type:"PUT",timeout:g.ajaxTimeout,url:g.getCalendarServiceBaseUrl("/subcalendars.json")});return false},_submitEventTypesEdit:function(m,q,o,l,p){var n=this._getEventTypeData(m);var r=n.subCalendarId;d(p).text("Updating...").attr("disabled","disabled").addClass("ui-state-disabled");d.ajax({cache:false,converters:{"text json":function(s){return s}},data:n,dataFilter:function(s){var t=d.parseJSON(s);if(t.success){g.mergeSubCalendarObjectsToArray(t.payload)}return t},dataType:"json",error:function(s,u,t){o.showAjaxUpdateError(s,u,t);l.onSubmitEnd();d(p).text("OK").removeAttr("disabled").removeClass("ui-state-disabled");o.setSubCalendarSpinnerIconVisible(false);AJS.trigger("remove-dialog-edit-event.teamcalendar")},success:function(s){if(s.success){if(r){o.setSubCalendar(r,s.payload);o.reloadSubCalendar(r)}o.updateAvailableSubCalendarsInSubCalendarPanel();l.onSubmitEnd();q.remove();o.setSubCalendarSpinnerIconVisible(false);AJS.trigger("show-dialog-edit-event.teamcalendar")}},type:"PUT",timeout:g.ajaxTimeout,url:g.getCalendarServiceBaseUrl("/disableeventtypes.json")});return false},_getEventTypeData:function(l){var m=this.eventTypesEditDialogView.getDisableEventTypes();return{subCalendarId:d("input[name='subCalendarId']",l).val(),disableEventTypes:m}},_callBackCancel:function(m,l){if(this.CalendarTour){this.CalendarTour.start()}var n=d("input[name='subCalendarId']",m.getCurrentPanel().body).val();d.ajax({cache:false,converters:{"text json":function(o){return o}},data:{subCalendarId:n},dataFilter:function(o){var p=d.parseJSON(o);if(p.success){g.mergeSubCalendarObjectsToArray(p.payload)}return p},dataType:"json",error:function(o,q,p){l.showAjaxUpdateError(o,q,p);l.setSubCalendarSpinnerIconVisible(false)},success:function(o){if(o.success){if(n&&o.payload&&o.payload.length){d.each(o.payload,function(p,q){if(q.id===n){l.setSubCalendar(n,q);l.reloadSubCalendar(n)}})}l.updateAvailableSubCalendarsInSubCalendarPanel();l.setSubCalendarSpinnerIconVisible(false);AJS.trigger("show-dialog-edit-event.teamcalendar")}},type:"GET",timeout:g.ajaxTimeout,url:g.getCalendarServiceBaseUrl("/subcalendars.json")})},_submitRestrictionEdit:function(l){this.restrictionDialog.submitRestrictionsDialog(l);return false}});return c});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-edit', location = 'com/atlassian/confluence/extra/calendar3/components/calendar-edit-dialog/calendar-edit-dialog-compat.js' */
require(["tc/calendar-edit-dialog"],function(a){if(!Confluence.TeamCalendars.Dialogs){Confluence.TeamCalendars.Dialogs={}}Confluence.TeamCalendars.Dialogs.getSubCalendarEditDialog=function(d,c,f,e,b){return new a({subCalendar:d,callbackHandler:c,calendarDiv:f,calendarPlugin:e,calendarCache:b})}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-share-embedded', location = 'com/atlassian/confluence/extra/calendar3/components/calendar-share-dialog/calendar-share-dialog.js' */
define("tc/calendar-share-dialog",["jquery","underscore","tc-backbone","tc/templates","tc/calendar-util"],function(e,a,f,c,b){var d=f.View.extend({calendarDiv:null,subCalendar:null,calendarPlugin:null,editDialog:null,initialize:function(g){this.calendarDiv=g.calendarDiv;this.subCalendar=g.subCalendar;this.calendarPlugin=g.calendarPlugin;this.editDialog=g.editDialog;this.$el.html(c.shareSubCalendar({elementIdSuffix:b.getParameter(this.calendarDiv,"elementIdSuffix")}));this.editDialog.addPanel("Embed",this.$el,"calendar-share-dialog-panel")},render:function(){var j=this;var k=this.calendarPlugin.doesSubCalendarHaveRestrictions(j.subCalendar),h,g;h=j.editDialog.getCurrentPanel().body;g=e(".share-restrictions-link",h);var i="";if(j.subCalendar.spaceKey){i=AJS.format("{0}/display/{1}/calendar/{2}?calendarName={3}",b.getParameter(j.calendarDiv,"baseUrl"),encodeURIComponent(j.subCalendar.spaceKey),encodeURIComponent(j.subCalendar.subscriptionId||j.subCalendar.id),encodeURIComponent(j.subCalendar.name))}else{i=AJS.format("{0}/calendar/previewcalendar.action?subCalendarId={1}",b.getParameter(j.calendarDiv,"baseUrl"),encodeURIComponent(j.subCalendar.subscriptionId||j.subCalendar.id))}e(".share-address-field",this.editDialog.getCurrentPanel().body).val(i);if(k){if(j.calendarPlugin.isSubCalendarAdministratable(j.calendarDiv,j.subCalendar)){g.click(function(){j.editDialog.hide();j.calendarPlugin.getSubCalendarRestrictionsDialog(j.calendarDiv,j.subCalendar).show()})}else{g.addClass("hidden")}}else{e(".description",h).addClass("hidden");var l=e(".autoconvert",h);if(j.calendarPlugin.isAutoConvertSupported(j.calendarDiv)){l.removeClass("hidden")}else{l.addClass("hidden")}}this.editDialog.getCurrentPanel().onselect=function(){e("#edit-calendar-dialog").find(".button-panel-button.submit").addClass("hidden");e(".share-address-field",j.editDialog.getCurrentPanel().body).focus().select()};return j.editDialog}});return d});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-share-embedded', location = 'com/atlassian/confluence/extra/calendar3/components/calendar-share-dialog/subcalendar-share-dialog.soy' */
// This file was automatically generated from subcalendar-share-dialog.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.shareSubCalendar = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div><label for="share-address-', soy.$$escapeHtml(opt_data.elementIdSuffix), '" class="share-address-label">', soy.$$escapeHtml("Calendar link:"), '</label><input type="text" name="share-address" id="share-address-', soy.$$escapeHtml(opt_data.elementIdSuffix), '" class="share-address-field"><div class="description autoconvert hidden">', soy.$$escapeHtml("Grab this link and paste it on a Confluence page to embed the calendar in your content."), '</div><div class="description icon-lock">', "Restrictions apply to this calendar. \x3ca class\x3d\x22share-restrictions-link\x22 href\x3d\x22#\x22\x3eCheck restrictions.\x3c/a\x3e", '</div></div>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-ical-address', location = 'com/atlassian/confluence/extra/calendar3/components/calendar-ical-address-dialog/calendar-ical-address-dialog.js' */
define("tc/calendar-ical-address-dialog",["jquery","underscore","tc-backbone","tc/templates","tc/calendar-util","tc/util","tc/calendar-reset-url-dialog","tc/calendar-basic-auth-ical-address-dialog"],function(b,g,f,i,d,e,a,h){var c=f.View.extend({calendarDiv:null,subCalendar:null,calendarPlugin:null,editDialog:null,$icalAddressField:null,initialize:function(j){this.calendarDiv=j.calendarDiv;this.subCalendar=j.subCalendar;this.calendarPlugin=j.calendarPlugin;this.editDialog=j.editDialog;this.$el.html(i.subCalendarPrivateUrlSubscribe({elementIdSuffix:d.getParameter(this.calendarDiv,"elementIdSuffix")}));this.editDialog.addPanel("Subscribe",this.$el,"calendar-ical-subscription-dialog-panel")},render:function(){var j=this;var k=j.calendarPlugin.getParameter(j.calendarDiv,"privateUrlsEnabled")==="true";if(k){j._renderPrivateUrlSubscription()}else{j._renderBasicUrlSubscription()}this.editDialog.getCurrentPanel().onselect=function(){b("#edit-calendar-dialog").find(".button-panel-button.submit").addClass("hidden");j.focusToIcalField()};return this.editDialog},_renderBasicUrlSubscription:function(){var j=new h({editDialog:this.editDialog,subCalendar:this.subCalendar,calendarPlugin:this.calendarPlugin,calendarDiv:this.calendarDiv,el:this.$el});j.render();this.$icalAddressField=j.$icalAddressField},_renderPrivateUrlSubscription:function(){var m=this;var j=m.calendarPlugin.isHttpsServer(m.calendarDiv),l=function(){m.editDialog.hide();m.editDialog.remove()};var k=this.$el;m.$icalAddressField=b(".ical-address-field",k);b(".reset-subscription-url",k).click(function(){l();var n=new a({calendarPlugin:m.calendarPlugin,calendarDiv:m.calendarDiv,subCalendar:m.subCalendar});n.render();return false});if(!j){b(".subscribe-or",k).remove();b(".subscribe-google-calendar",k).remove()}m.calendarPlugin.setSubCalendarSpinnerIconVisible(m.calendarDiv,true);b.ajax({cache:false,success:function(n){b(".ical-address-field",k).val(n).focus().select();if(j){b("a.subscribe-google-calendar",k).attr({href:"https://www.google.com/calendar/render?cid="+encodeURIComponent(n),title:AJS.format("Subscribe to {0} from Google Calendar",m.subCalendar.name)})}m.calendarPlugin.setSubCalendarSpinnerIconVisible(m.calendarDiv,false)},error:function(n,p,o){m.calendarPlugin.setSubCalendarSpinnerIconVisible(m.calendarDiv,false);m.calendarPlugin.showAjaxError(m.calendarDiv,n,p,o,m.calendarPlugin.ERROR_CLASS_PRIVATE_URL)},type:"GET",timeout:d.ajaxTimeout,url:m.calendarPlugin.getCalendarServiceBaseUrl(m.calendarDiv,"/subcalendar/privateurl/"+encodeURIComponent(m.subCalendar.id))})},focusToIcalField:function(){this.$icalAddressField.focus().select()}});return c});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-ical-address', location = 'com/atlassian/confluence/extra/calendar3/components/calendar-ical-address-dialog/subcalendar-privateurl-subscribe-dialog.soy' */
// This file was automatically generated from subcalendar-privateurl-subscribe-dialog.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.subCalendarPrivateUrlSubscribe = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<p>', AJS.format("Add to Outlook, iCal or other calendar applications by copying the link below and following the \x3ca href\x3d\x22{0}\x22 target\x3d\x22_blank\x22\x3einstructions\x3c/a\x3e.","http://confluence.atlassian.com/x/_wJKE"), '</p><input type="text" name="ical-address" id="ical-address-', soy.$$escapeHtml(opt_data.elementIdSuffix), '" class="ical-address-field"><div class="subscribe-or">', soy.$$escapeHtml("OR"), '</div><a class="subscribe-google-calendar" href="#" target="_blank"></a><p class="private-url-warning">', "Note: This subscription link is private. If you\x27ve accidentally shared your subscription link, \x3cb\x3e\x3ca href\x3d\x22#\x22 class\x3d\x22reset-subscription-url\x22\x3eyou should reset it\x3c/a\x3e\x3c/b\x3e.", '</p>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-ical-address', location = 'com/atlassian/confluence/extra/calendar3/components/calendar-basic-auth-ical-address-dialog/calendar-basic-auth-ical-address-dialog.js' */
define("tc/calendar-basic-auth-ical-address-dialog",["jquery","underscore","tc-backbone","tc/templates","tc/calendar-util","tc/util"],function(e,b,g,d,c,f){var a=g.View.extend({calendarBasicAuthIcalAddressDialog:null,calendarDiv:null,subCalendar:null,calendarPlugin:null,editDialog:null,$icalAddressField:null,initialize:function(h){this.calendarDiv=h.calendarDiv;this.subCalendar=h.subCalendar;this.calendarPlugin=h.calendarPlugin;this.editDialog=h.editDialog;this.$el=h.el;this.$el.html(d.subCalendarBasicAuthSubscribe({elementIdSuffix:c.getParameter(this.calendarDiv,"elementIdSuffix")}))},render:function(){var h=this;h.$icalAddressField=e(".ical-address-basic-field",this.$el);h.$icalAddressField.val(c.getParameter(h.calendarDiv,"baseUrl")+"/rest/calendar-services/1.0/calendar/export/subcalendar/"+encodeURIComponent(h.subCalendar.id)+".ics?os_authType=basic&isSubscribe=true")}});return a});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-ical-address', location = 'com/atlassian/confluence/extra/calendar3/components/calendar-basic-auth-ical-address-dialog/subcalendar-basic-subscribe-dialog.soy' */
// This file was automatically generated from subcalendar-basic-subscribe-dialog.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.subCalendarBasicAuthSubscribe = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div><label for="ical-address-', soy.$$escapeHtml(opt_data.elementIdSuffix), '" class="ical-address-label">', soy.$$escapeHtml("Calendar Address:"), '</label><input type="text" name="ical-address" id="ical-address-', soy.$$escapeHtml(opt_data.elementIdSuffix), '" class="ical-address-basic-field"></div><p>', AJS.format("You can subscribe to this Confluence calendar from your calendar application. Copy the calendar address above and \x3ca href\x3d\x22{0}\x22 target\x3d\x22_blank\x22\x3efollow the instructions for the calendar application you wish to use\x3c/a\x3e.","http://confluence.atlassian.com/x/ewn2Dg"), '</p>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-add-dialog', location = 'com/atlassian/confluence/extra/calendar3/components/calendar-add-dialog/calendar-add-dialog.js' */
define("tc/calendar-add-dialog",["jquery","tc-backbone","tc/templates","tc/dialogs","tc/util","tc/calendar-util"],function(f,h,e,d,g,c){var b;var a=h.View.extend({events:{"click .option-new":"addNewCalendar","click .option-existing":"addExistingCalendar","click .option-subscription":"subscribeByUrl","click .option-import":"importCalendar"},defaults:{title:"Add Calendar"},initialize:function(i){i=i||{};this.callbackHandler=i.callbackHandler;this.dialogOptions=f.extend({},this.defaults,i.dialogOptions)},hide:function(){b.hide()},render:function(){if(!b){b=this.dialog=new AJS.Dialog(600,320,"add-calendar-dialog");b.addHeader(this.dialogOptions.title);b.addPanel(this.dialogOptions.title,e.addDialog(),"add-calendar-panel");if(this.dialogOptions.addClass){f("#add-calendar-dialog").addClass(this.dialogOptions.addClass)}b.addCancel("Cancel",function(){b.hide();return false});this.setElement(b.getCurPanel().body)}b.show()},addNewCalendar:function(){var i=d.getSubCalendarCreateDialog("parent",this.callbackHandler);g.showDialogInUpdatedHeight(i);f("input[name='name']",i.getCurrentPanel().body).focus();c.fireEventForAnalytics("add.calendar.click.new."+c.getCalendarContext());this.hide()},addExistingCalendar:function(){var i=f("meta[name='ajs-page-id']").length>=1;var j=d.getSubCalendarSubscribeDialog(f.extend({callbackHandler:this.callbackHandler,heading:i?"Add Existing Team Calendar":"Popular Team Calendars",showSearch:i,searchParams:{showSubCalendarsInView:AJS.Meta.get("space-key")!==undefined||i},disableWatching:i,id:"internal-subscription-calendar-dialog"}));g.showDialogInUpdatedHeight(j);c.fireEventForAnalytics("add.calendar.click.existing."+c.getCalendarContext());this.hide()},subscribeByUrl:function(){var i=d.getSubCalendarCreateDialog("subscription",this.callbackHandler);g.showDialogInUpdatedHeight(i);f("input[name='name']",i.getCurrentPanel().body).focus();c.fireEventForAnalytics("add.calendar.click.subscribe."+c.getCalendarContext());this.hide()},importCalendar:function(){var i=d.getSubCalendarImportDialog(this.callbackHandler);g.showDialogInUpdatedHeight(i);f("input[name='name']",i.getCurrentPanel()).focus();c.fireEventForAnalytics("add.calendar.click.import."+c.getCalendarContext());this.hide()}});return a});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-add-dialog', location = 'com/atlassian/confluence/extra/calendar3/components/calendar-add-dialog/calendar-add-dialog-compat.js' */
require(["tc/calendar-add-dialog"],function(a){if(!Confluence.TeamCalendars.Dialogs){Confluence.TeamCalendars.Dialogs={}}Confluence.TeamCalendars.Dialogs.getAddDialog=function(b,c){return new a({callbackHandler:b,dialogOptions:c}).render()}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-add-dialog', location = 'com/atlassian/confluence/extra/calendar3/components/calendar-add-dialog/calendar-add-dialog.soy' */
// This file was automatically generated from calendar-add-dialog.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.addDialog = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="add-calendar subcalendar-wizard"><div><ul class="add-calendar-options"><li class="option-new"><div class="title">', soy.$$escapeHtml("Add New Calendar"), '</div></li><li class="option-import"><div class="title">', soy.$$escapeHtml("Import Calendar"), '</div></li></ul><ul class="add-calendar-options"><li class="option-existing"><div class="title">', soy.$$escapeHtml("Add Existing Calendar"), '</div></li><li class="option-subscription"><div class="title">', soy.$$escapeHtml("Subscribe by URL"), '</div></li></ul></div></div>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-add-inline-dialog', location = 'com/atlassian/confluence/extra/calendar3/components/calendar-add-inline-dialog/calendar-add-inline-dialog.js' */
define("tc/calendar-add-inline-dialog",["jquery","tc-backbone","tc/templates","tc/dialogs","tc/util"],function(d,f,b,a,e){var c=f.View.extend({initialize:function(g){g=g||{};this.callbackHandler=g.callbackHandler},hide:function(){this.dialog.hide()},render:function(){var g=this.callbackHandler;if(!this.dialog){this.dialog=AJS.InlineDialog(d("#inline-dialog-more"),"inline-dialog-more",function(i,h,j){i.html(b.addInlineDialog());i.find(".option-new").on("click",function(){var k=a.getSubCalendarCreateDialog("parent",g);e.showDialogInUpdatedHeight(k);d("input[name='name']",k.getCurrentPanel().body).focus();d("#inline-dialog-more").removeClass("active");d("#inline-dialog-inline-dialog-more").hide();Confluence.TeamCalendars.fireEventForAnalytics("add.calendar.click.new."+Confluence.TeamCalendars.getCalendarContext())});i.find(".option-import").on("click",function(){var k=a.getSubCalendarImportDialog(g);e.showDialogInUpdatedHeight(k);d("input[name='name']",k.getCurrentPanel()).focus();d("#inline-dialog-more").removeClass("active");d("#inline-dialog-inline-dialog-more").hide();Confluence.TeamCalendars.fireEventForAnalytics("add.calendar.click.import."+Confluence.TeamCalendars.getCalendarContext())});i.find(".option-existing").on("click",function(){var k=d("meta[name='ajs-page-id']").length>=1;var l=a.getSubCalendarSubscribeDialog(d.extend({callbackHandler:g,heading:k?"Add Existing Team Calendar":"Popular Team Calendars",showSearch:k,searchParams:{showSubCalendarsInView:AJS.Meta.get("space-key")!==undefined||k},disableWatching:k,id:"internal-subscription-calendar-dialog"}));e.showDialogInUpdatedHeight(l);d("#inline-dialog-more").removeClass("active");d("#inline-dialog-inline-dialog-more").hide();Confluence.TeamCalendars.fireEventForAnalytics("add.calendar.click.existing."+Confluence.TeamCalendars.getCalendarContext())});i.find(".option-subscription").on("click",function(){var k=a.getSubCalendarCreateDialog("subscription",g);e.showDialogInUpdatedHeight(k);d("input[name='name']",k.getCurrentPanel().body).focus();d("#inline-dialog-more").removeClass("active");d("#inline-dialog-inline-dialog-more").hide();Confluence.TeamCalendars.fireEventForAnalytics("add.calendar.click.subscribe."+Confluence.TeamCalendars.getCalendarContext())});j();return false})}}});return c});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-add-inline-dialog', location = 'com/atlassian/confluence/extra/calendar3/components/calendar-add-inline-dialog/calendar-add-inline-dialog.soy' */
// This file was automatically generated from calendar-add-inline-dialog.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.addInlineDialog = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div id="add-calendar-inline-dialog" class="add-calendar subcalendar-wizard"><ul class="add-calendar-options"><li class="option-new"><div class="title">', soy.$$escapeHtml("Add new calendar"), '</div><div class="description">', soy.$$escapeHtml("Create a brand new calendar"), '<div></li></ul><ul class="add-calendar-options"><li class="option-existing"><div class="title">', soy.$$escapeHtml("Add existing calendar"), '</div><div class="description">', soy.$$escapeHtml("Find and add a calendar from Confluence"), '<div></li></ul><ul class="add-calendar-options"><li class="option-import"><div class="title">', soy.$$escapeHtml("Import calendar"), '</div><div class="description">', soy.$$escapeHtml("Import an ICS file to create a calendar"), '<div></li></ul><ul class="add-calendar-options"><li class="option-subscription"><div class="title">', soy.$$escapeHtml("Subscribe by URL"), '</div><div class="description">', soy.$$escapeHtml("Subscribe to a calendar using its URL"), '<div></li></ul></div>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:manage-event', location = 'com/atlassian/confluence/extra/calendar3/components/manage-event/manage-event.js' */
define("tc/manage-event",["jquery","tc/event-delete-dialog","tc/calendar-util"],function(c,a,b){var d=function(g,e){var h;function f(n,l,j,i,m,k){if(!l.end&&!m){l.end=new Date(l.start.getTime()+(1000*60*60*2))}g.setProcessingEvent(n,true);g.setSuppressEventToolTip(n,true);d(g,e).updateEvent(n,(function(){var p=g.getSubCalendar(n,l.subCalendarId),o={subCalendarId:p.parentId,uid:l.id,eventType:l.eventType,originalStartDate:l.originalStart||"",what:l.title,url:l.workingUrl,dragAndDropUpdate:true,start:c.fullCalendar.formatDate(l.start,"ddMMyyyyHHmm"),end:c.fullCalendar.formatDate(l.end||l.start,"ddMMyyyyHHmm"),allDayEvent:m,where:l.where,description:l.description,freq:l.recur?l.recur.freq:"",byday:l.recur?l.recur.byDay:"",interval:l.recur?l.recur.interval:"",until:l.recur?l.recur.localizedUntil||"":"",recurrenceId:l.recurId||"",editAllInRecurrenceSeries:"false",customEventTypeId:l.customEventTypeId,childSubCalendarId:l.subCalendarId||""};if(p.eventInviteesSupported){o.person=c.map(l.invitees||[],function(q){return q.id})}return o})(),function(o,q,p){g.showAjaxError(n,o,q,p,g.ERROR_CLASS_EVENT_UPDATE);k();g.setSuppressEventToolTip(n,false);g.setProcessingEvent(n,false)},function(p){if(p.success){g.setGenericErrors(n,null,g.ERROR_CLASS_EVENT_UPDATE);var o=p.event;c.each(g.getCalendarPanel(n).fullCalendar("clientEvents",l.id),function(r,q){q.localizedStartDate=o.localizedStartDate;q.localizedStartTime=o.localizedStartTime;q.localizedEndDate=o.localizedEndDate;q.localizedEndTime=o.localizedEndTime;q.recurId=o.recurId;q.invitees=o.invitees;q.iconUrl=o.iconUrl;q.confluenceFormattedStartDate=o.confluenceFormattedStartDate;q.expandDates=o.expandDates;if(o.extraProperties){q.extraProperties=o.extraProperties}});if(l.calendarReloadRequiredOnUpdate){g.reloadSubCalendar(n,[l.subCalendarId])}}else{g.setGenericErrors(n,"Uh oh. Looks like something unexpectedly went wrong. Please check the Confluence log file.",g.ERROR_CLASS_EVENT_UPDATE);k()}g.setSuppressEventToolTip(n,false);g.setProcessingEvent(n,false)})}return{getEventDetailsDialog:function(r,j,p,i){var m=g.getSubCalendar(r,j.subCalendarId),k=g.getSubCalendar(r,m.parentId),q=(function(){return(c.inArray(g.getCalendarPanel(r).fullCalendar("getView").name,["month","agendaWeek"])!==-1)||g.getParameter(r,"showSubCalendarNameInEventPopup")!=="true"})(),o=function(){var w=null;var v=k?k:m;if(b.isCustomEventType(j.eventType)){var s=v.customEventTypes;c.each(s,function(x,y){if(y.customEventTypeId===j.customEventTypeId&&y.periodInMins>0){w=AJS.format("{0} before",b.showInforReminder(y.periodInMins));return false}})}else{var u=v.sanboxEventTypeReminders;if(u&&u.length>0){var t=j.eventType;if(b.isJiraType(t)){t+="-calendar"}c.each(u,function(y,x){if(x.eventTypeId===t&&x.periodInMins>0){w=AJS.format("{0} before",b.showInforReminder(x.periodInMins));return false}})}}return w},n=function(){return c("<div/>").html(Confluence.TeamCalendars.Templates.eventPopup({contextClass:q?"mycalendars":"",baseUrl:g.getParameter(r,"baseUrl"),event:c.extend(c.extend({},j),{colour:m.color,subCalendarDisplayName:k&&!Confluence.TeamCalendars.isSubscriptionSubCalendar(m)?k.name:m.name,subCalendarId:k?k.id:m.id,inviteesSupported:m.inviteesSupported,period:o()})}))},l=AJS.InlineDialog(p,g.dialogSequence++,function(u,s,w){var t=n();c(".field-duration",t).each(function(){var x=c(this);if(j.localizedStartDate!==j.localizedEndDate){x.empty().html("<span class='aui-icon aui-icon-wait'></span>");g.formatDate(r,[j._start,j._end],"dd MMM",function(y){if(typeof y==="string"){x.text(y);return}if(j.allDayFlipped?!j.allDay:j.allDay){x.empty().text(AJS.format("{0} - {1}",y[0],y[1]))}else{x.empty().text(AJS.format("{0}, {1} - {2}, {3}",y[0],j.localizedStartTime,j.localizedEndTime,y[1]))}})}else{if(!((j.allDayFlipped?!j.allDay:j.allDay))){x.empty().text(j.localizedStartTime+" - "+j.localizedEndTime)}}});var v=c(".edit-controls",t);if(g.isEventEditable(r,j)){v.each(function(){if(g.getParameter(r,"redirectEditInEventPopup")==="true"){c(".event-edit",this).unbind("click").attr("href",g.getParameter(r,"baseUrl").concat("/calendar/mycalendar.action","?startDayOfMonth=",c.fullCalendar.formatDate(j.start,"d"),"&startMonthOfYear=",(parseInt(c.fullCalendar.formatDate(j.start,"M"))-1),"&startYear=",c.fullCalendar.formatDate(j.start,"yyyy"),"&editSubCalendarId=",encodeURIComponent(g.getSubCalendar(r,j.subCalendarId).id),"&editEventId=",encodeURIComponent(j.id),"&editView=month"))}else{c(".event-edit",this).unbind("click").click(function(){l.hide();var z=g.getSubCalendar(r,j.subCalendarId),y=Confluence.TeamCalendars.Dialogs.getEditEventDialog(c.extend({},j,{eventType:z.subscriptionType||z.type,subCalendarId:z.parentId,originalEventSubCalendarId:z.id,childSubCalendarId:j.subCalendarId||""}),null,g,r);y.show();return false})}var x=c(".event-delete",this);if(g.isEventDeletable(r,j)&&g.getParameter(r,"hideDeleteInEventPopup")==="false"){x.click(function(){l.hide();a(r,j,g).show();return false})}else{x.remove()}})}else{v.each(function(){c(".edit-control",this).remove()})}v.each(function(){c(".event-hyperlink-separator:first-child, .event-hyperlink-separator:last-child",this).remove()});t.appendTo(u.empty());w()},(function(){var s={hideDelay:0,noBind:true,isRelativeToMouse:true,showDelay:0,width:Confluence.TeamCalendars.isPDLEnabled()&&c.inArray("jira-version",j.className)!==-1?380:360,hideCallback:function(){g.setSuppressEventToolTip(r,false);if(AJS.InlineDialog.current&&AJS.InlineDialog.current.popup){AJS.InlineDialog.current.popup.hide()}},initCallback:function(){g.setSuppressEventToolTip(r,true);c(".event-field.reminder-icon").tooltip({gravity:"s"})}};return i?c.extend(s,i):s})());l.addClass("event-display-dialog");return l},updateEvent:function(l,k,j,i){k.userTimeZoneId=Confluence.TeamCalendars.getUserTimeZone();g.setSubCalendarSpinnerIconVisible(l,true);c.ajax({cache:false,data:k,dataFilter:function(n){var m=c.parseJSON(n);if(m.success){Confluence.TeamCalendars.mergeSubCalendarObjectsToArray([m.subCalendar])}return m},dataType:"text",error:function(m,o,n){if(j){j(m,o,n)}g.setSubCalendarSpinnerIconVisible(l,false)},success:function(n){var o=k.eventType,m=g.getParameter(l,"calendarContext");var p;if(o==="custom"){if(n.subCalendar&&n.subCalendar.customEventTypes){c.each(n.subCalendar.customEventTypes,function(q,r){if(r.customEventTypeId===k.customEventTypeId){p={customEventTypeName:r.title}}})}}if(k.uid){Confluence.TeamCalendars.fireEventForAnalytics("event.update.default."+o+".context."+m,p)}else{Confluence.TeamCalendars.fireEventForAnalytics("event.create.default."+o+".context."+m,p)}e.removeCalendar(k.subCalendarId);e.removeCalendar(k.originalSubCalendarId);if(i){i(n)}g.setSubCalendarSpinnerIconVisible(l,false);g.reloadSubCalendarDisableEvent(l,k)},type:"PUT",timeout:g.ajaxTimeout,url:g.getCalendarServiceBaseUrl(l,"/events.json")})},deleteEvent:function(k,l,j,i){c.ajax({cache:false,data:l,dataType:"json",error:function(m,o,n){if(j){j(m,o,n)}},success:function(m){e.removeCalendar(l.subCalendarId);if(i){i(m)}},type:"DELETE",timeout:g.ajaxTimeout,url:g.getCalendarServiceBaseUrl(k,"/events.json")})},eventClick:function(j,i,k){g.setEventTooltipVisible(k);if(i.shiftKey){if(g.isEventEditable(k,j)){var l=g.getSubCalendar(k,j.subCalendarId);Confluence.TeamCalendars.Dialogs.getEditEventDialog(c.extend({},j,{eventType:l.subscriptionType||l.type,subCalendarId:l.parentId,originalEventSubCalendarId:l.id,childSubCalendarId:j.subCalendarId||""}),null,g,k).show()}return false}if((i.ctrlKey||i.metaKey)&&j.workingUrl){window.location=j.workingUrl;return false}g.getEventDetailsDialog(k,j,c(i.currentTarget)).show(i);return false},eventRender:function(j,m,i,k){if(j.disableResizing){c(".ui-resizable-handle",m).hide()}m.mousemove(function(n){m.data("mouseCoords",{pageX:n.pageX,pageY:n.pageY})}).hover(function(){setTimeout(function(){var n=m.data("mouseCoords");if(!g.isEventToolTipSuppressed(k)&&n){g.setEventTooltipVisible(k,j,n,true)}},5000)},function(){m.removeData("mouseCoords");g.setEventTooltipVisible(k);g.setSuppressEventToolTip(k,false)});c(".fc-event-time, .fc-event-title",m).css("color",m.css("color"));if("agendaWeek"===i.name){m.parent().addClass(j.allDay?"fc-agenda-head":"fc-agenda-body");if(!j.allDay){c(".fc-event-inner",m).css({"border-right-color":j.secondaryBorderColor||j.borderColor,"border-bottom-color":j.secondaryBorderColor||j.borderColor,"border-left-color":j.secondaryBorderColor||j.borderColor})}}if("month"===i.name||"agendaWeek"===i.name){var l;if(c.inArray("other",j.className)!==-1||j.eventType==="custom"){if(j.shortTitle){l=j.shortTitle+": "+j.title}else{if(j.invitees&&j.invitees.length){l=j.invitees[0].displayName+": "+j.title}else{l=j.title}}}else{l=j.shortTitle||j.title}c(".fc-event-title",m).text(l);if("month"===i.name||("agendaWeek"===i.name&&j.allDay)){c(".fc-event-inner",m).before(Confluence.TeamCalendars.Templates.iconEventTypePrinting({eventType:j.className,isCustom:j.eventType==="custom"?true:false}))}}},eventDrop:function(l,j,i,m,k,n){if(g.isEventEditable(n,l)&&!g.isProcessingEvent(n)){f(n,l,j,i,m,k)}else{k()}},eventResize:function(l,j,i,k,m){if(g.isEventEditable(m,l)&&!g.isProcessingEvent(m)){f(m,l,j,i,l.allDay,k)}else{k()}},eventDragStart:function(i){g.setSuppressEventToolTip(i,true);g.setEventTooltipVisible(i);g.hideInlineAuiDialogs()},eventDragEnd:function(i){g.setSuppressEventToolTip(i,false)},eventResizeStart:function(i){g.setSuppressEventToolTip(i,true);g.setEventTooltipVisible(i);g.hideInlineAuiDialogs()},eventResizeStop:function(i){g.setSuppressEventToolTip(i,false)}}};return d});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:manage-i18n-text', location = 'com/atlassian/confluence/extra/calendar3/components/manage-i18n-text/manage-i18n-text.js' */
define("tc/manage-i18n-text",["jquery"],function(b){var a=function(c){return{getEventTypeNames:function(e){var d={"calendar3.subcalendar.type.parent":"Calendars","calendar3.subcalendar.type.local":"Events Calendars","calendar3.subcalendar.type.subscription":"Subscriptions","calendar3.subcalendar.type.jira":"JIRA Calendars","calendar3.subcalendar.type.people":"People Calendars","calendar3.subcalendar.type.other":"Events","calendar3.subcalendar.type.generic-people":"People","calendar3.subcalendar.type.travel":"Travel","calendar3.subcalendar.type.leaves":"Leave","calendar3.subcalendar.type.birthdays":"Birthdays","calendar3.subcalendar.type.jira-agile-sprint":"JIRA Agile Sprints","calendar3.subcalendar.type.jira-project-releases":"JIRA Project Releases","calendar3.subcalendar.type.jira-issue-dates":"JIRA Issue Dates","calendar3.subcalendar.type.unknown":"Unknown Type"};return d[e]?d[e]:d},getMonthNames:function(){return[this.getText("calendar3.month.long.january"),this.getText("calendar3.month.long.february"),this.getText("calendar3.month.long.march"),this.getText("calendar3.month.long.april"),this.getText("calendar3.month.long.may"),this.getText("calendar3.month.long.june"),this.getText("calendar3.month.long.july"),this.getText("calendar3.month.long.august"),this.getText("calendar3.month.long.september"),this.getText("calendar3.month.long.october"),this.getText("calendar3.month.long.november"),this.getText("calendar3.month.long.december")]},getMonthNamesShort:function(){return[this.getText("calendar3.month.short.january"),this.getText("calendar3.month.short.february"),this.getText("calendar3.month.short.march"),this.getText("calendar3.month.short.april"),this.getText("calendar3.month.short.may"),this.getText("calendar3.month.short.june"),this.getText("calendar3.month.short.july"),this.getText("calendar3.month.short.august"),this.getText("calendar3.month.short.september"),this.getText("calendar3.month.short.october"),this.getText("calendar3.month.short.november"),this.getText("calendar3.month.short.december")]},getDayNames:function(){return[this.getText("calendar3.day.long.sunday"),this.getText("calendar3.day.long.monday"),this.getText("calendar3.day.long.tuesday"),this.getText("calendar3.day.long.wednesday"),this.getText("calendar3.day.long.thursday"),this.getText("calendar3.day.long.friday"),this.getText("calendar3.day.long.saturday")]},getDayNamesShort:function(){return[this.getText("calendar3.day.short.sunday"),this.getText("calendar3.day.short.monday"),this.getText("calendar3.day.short.tuesday"),this.getText("calendar3.day.short.wednesday"),this.getText("calendar3.day.short.thursday"),this.getText("calendar3.day.short.friday"),this.getText("calendar3.day.short.saturday")]},getText:function(d){return this.getI18nMessages()[d]},getI18nMessages:function(){if(!c){c={};b("fieldset input",b("<div/>",{html:b("#team-calendars-messages").html()})).each(function(){c[this.name]=this.value})}return c}}};return a});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:full-calendar-option', location = 'com/atlassian/confluence/extra/calendar3/components/full-calendar/full-calendar-option.js' */
define("tc/full-calendar-option",["jquery","tc/manage-event"],function(b,c){var a=function(f,e,d){return{calendarDiv:e,calendarPlugin:f,defaultView:f.getParameter(e,"defaultView")||"month",year:parseInt(f.getParameter(e,"startingYear")),month:parseInt(f.getParameter(e,"startingMonth")),date:parseInt(f.getParameter(e,"startingDay")),header:false,firstDay:f.getParameter(e,"firstDayOfWeek"),weekends:f.getParameter(e,"hideWeekends")==="false",viewRender:function(g){var h=function(){if(Confluence.TeamCalendars.isPDLEnabled()){b(".change-view",e).removeClass("active");b(".change-view-"+g.name,e).addClass("active")}else{b(".change-view",e).each(function(){b(this).closest("li").removeClass("active")});b(".change-view-"+g.name,e).closest("li").addClass("active")}};Confluence.TeamCalendars.updateDateDisplay(e,g.title);h();if(g.name==="basicDay"){f.getCalendarPanel(e).addClass("borderless")}else{f.getCalendarPanel(e).removeClass("borderless")}if(f.isCalendarInEditMode(e)){var i=e.data("lastSelectedView");if(!i){e.data("lastSelectedView",g.name)}else{if(g.name!==i){e.data("lastSelectedView",g.name);b.ajax({cache:false,data:{view:g.name},dataType:"json",error:function(j,l,k){f.showAjaxError(e,j,l,k,f.ERROR_CLASS_CONFIG_UPDATE)},success:function(){f.setGenericErrors(e,null,f.ERROR_CLASS_CONFIG_UPDATE)},type:"PUT",timeout:f.ajaxTimeout,url:f.getCalendarServiceBaseUrl(e,"/preferences/view.json")})}}}},allDayText:"All day",firstHour:8,columnFormat:{week:"ddd d"},titleFormat:{week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d, yyyy}"},buttonText:{today:"Today",month:"Month",week:"Week",day:"List"},monthNames:f.getMonthNames(),monthNamesShort:f.getMonthNamesShort(),dayNames:f.getDayNames(),dayNamesShort:f.getDayNamesShort(),dayClick:function(h,i,g){if(b(".event-details-popup:visible").length===0){if(f.getSubCalendarsWhichCanAddEvents(e).length){Confluence.TeamCalendars.Dialogs.getEditEventDialog({start:h,localizedStartTime:i?f.getDefaultStartTime(e):null,localizedEndTime:i?f.getDefaultEndTime(e):null,allDay:(function(){if(f.getCalendarPanel(e).fullCalendar("getView").name==="month"){return(e.data(f.PREF_LAST_ALL_DAY_USED)||i.toString())==="true"}return i})()},null,f,e).show()}}else{g.stopPropagation();f.hideInlineAuiDialogs()}},eventClick:function(h,g){return c(f).eventClick(h,g,e)},eventRender:function(h,i,g){c(f).eventRender(h,i,g,e)},eventDrop:function(j,h,g,k,i){c(f,d).eventDrop(j,h,g,k,i,e)},eventDragStart:function(){c(f,d).eventDragStart(e)},eventDragEnd:function(){c(f,d).eventDragEnd(e)},eventResize:function(j,h,g,i){c(f,d).eventResize(j,h,g,i,e)},eventResizeStart:function(){c(f,d).eventResizeStart(e)},eventResizeStop:function(){c(f,d).eventResizeStop(e)},loading:function(g){if(!g){window.isTeamCalendarsLoaded=true}f.setSubCalendarSpinnerIconVisible(e,g)},selectable:true,selectHelper:true,select:function(g,j,i,h){if(!b(".event-details-popup:visible").length&&f.getSubCalendarsWhichCanAddEvents(e).length){Confluence.TeamCalendars.Dialogs.getEditEventDialog({start:g,end:j,localizedStartTime:i?f.getDefaultStartTime(e):null,localizedEndTime:i?f.getDefaultEndTime(e):null,allDay:(function(){if(f.getCalendarPanel(e).fullCalendar("getView").name==="month"){if(j.getTime()-g.getTime()>0){return i.toString()==="true"}return(e.data(f.PREF_LAST_ALL_DAY_USED)||i.toString())==="true"}return i})()},null,f,e).show()}else{if(h){h.stopPropagation()}f.hideInlineAuiDialogs()}}}};return a});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:subcalendar-panel', location = 'com/atlassian/confluence/extra/calendar3/components/subcalendar-panel/subcalendar-panel.js' */
define("tc/subcalendar-panel",["jquery","tc/calendar-util","tc/myCalendarTour","tc/subcalendar-entry-view","tc/subcalendar-menu-builder","tc/non-space-calendars-handler"],function(g,e,b,d,f,c){var a=function(o,m,h){var i=g("div.sub-calendar-names",m);var n=function(s){var r=(function(){var t=new d({CalendarPlugin:o,subCalendar:s,calendarDiv:m,cache:h}).render();return t})();return r};var q=function(){if(o.getSubCalendarsWhichCanAddEvents(m).length){g(".add-event-button",m).removeClass("hidden");g(".toolbar-group-addevent, .add-event-button",m).removeClass("hidden")}else{g(".add-event-button",m).addClass("hidden");g(".toolbar-group-addevent, .add-event-button",m).addClass("hidden")}};var j=function(){if("true"===o.getParameter(m,"readOnly")){g("#add-calendar-menu").addClass("hidden")}else{g("#add-calendar-menu").removeClass("hidden")}};var l=function(){g("<div/>",{"class":"no-subcalendars-msg",text:"You haven\'t created or subscribed to any calendars"}).appendTo(i)};var p=function(s,v){var t=g.grep(v,function(y,x){return y.type==="parent"||y.subscriptionType==="parent"});var r=function(x){var y=g(s).find(".subcalendar-item");y.each(function(A,C){var z=g(C);var F=z.data("sub-calendar-id");var D=g.grep(x,function(G){return G.subCalendarId==F});var E=o.getParameter(m,"hideWatchMenuItem")==="true";if(D.length>0&&D[0].isWatchable&&!E){var B="not-watched";if(D[0].watchedViaContent){B="watching-via-content"}else{if(D[0].watched){B="watched"}}z.addClass(B)}z.addClass("disable-loading-watching-status");b.reposition()});AJS.trigger("calendar.watch.statuses.loaded",x)};var u={};var w=g.map(t,function(x,y){return x.id});u.include=w;g.ajax({cache:false,data:u,dataType:"json",error:function(x,z,y){o.showAjaxError(m,x,z,y,o.ERROR_CLASS_SUB_CALENDAR_LIST)},success:function(y){if(y.success){var x=y.payload;r(x);o.setGenericErrors(m,null,o.ERROR_CLASS_SUB_CALENDAR_LIST)}else{o.setGenericErrors(m,"Uh oh. Looks like something unexpectedly went wrong. Please check the Confluence log file.",o.ERROR_CLASS_SUB_CALENDAR_LIST)}},type:"GET",timeout:o.ajaxTimeout,url:Confluence.TeamCalendars.getCalendarServiceBaseUrl("/subcalendars/watching/status.json")})};var k=function(r){f.build(m,o,r)};return{initSubCalendarPanel:function(){var r=function(s){Confluence.TeamCalendars.Dialogs.getEditEventDialog({start:new Date(),localizedStartTime:o.getDefaultStartTime(s),localizedEndTime:o.getDefaultEndTime(s),allDay:(s.data(o.PREF_LAST_ALL_DAY_USED)||"true")==="true"},null,o,m).show()};g(".toolbar-group-addevent .trigger-addevent, .calendar-toolbar .add-event, .add-event-button",m).click(function(){r(m);return false});o.setSubCalendarSpinnerIconVisible(m,true);o.refreshCachedSubCalendars(m,function(t){if("true"===o.getParameter(m,"showHiddenSubCalendars")&&g.isArray(t)){g.each(t,function(v,u){u.eventsHidden=false})}o.updateAvailableSubCalendarsInSubCalendarPanel(m);o.setSubCalendarSpinnerIconVisible(m,false);if(o.isCalendarInEditMode(m)){var s=function(){m.unbind("calendar-plugin.resized",s);if("true"===o.getParameter(m,"isShowCalendarWizard")){var v=function(){Confluence.TeamCalendars.Dialogs.getSubCalendarSubscribeDialog({heading:"Welcome to Team Calendars!",callbackHandler:o.getRenderedMacroCallbackHandler(m)}).show()};var u=function(){Confluence.TeamCalendars.Dialogs.getAddDialog(o.getRenderedMacroCallbackHandler(m),{title:"Welcome to Team Calendars!",addClass:"create-calendar-first-time"})};e.showCalendarPopupHaveAnEmptySubcalendar(v,u)}};m.bind("calendar-plugin.resized",s)}},function(){o.setSubCalendarSpinnerIconVisible(m,false)})},updateAvailableSubCalendarsInSubCalendarPanel:function(){i.empty();q();j();var r=e.getSortedSubCalendarsByTypeAndName(o.getSubCalendars(m));k(r);window.isTeamCalendarsLoaded=true;if(!r.length){e.toggleNoCalendarPage(true);g(".no-calendar-page #add-button").click(function(s){Confluence.TeamCalendars.Dialogs.getAddDialog(o.getRenderedMacroCallbackHandler(m));s.preventDefault()});l()}else{e.toggleNoCalendarPage(false)}g.each(r,function(s,t){i.append(n(t))});if(!e.isSingleCalendarView(m)){b.start()}p(i,r);c.handle(o,m,h,r)}}};return a});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:subcalendar-panel', location = 'com/atlassian/confluence/extra/calendar3/components/subcalendar-panel/subcalendar-entry-view.js' */
define("tc/subcalendar-entry-view",["jquery","underscore","tc/calendar-util","tc-backbone","tc/child-subcalendar-entry-view","tc/subcalendar-menu-view","tc/subcalendar-displayer"],function(f,b,d,h,g,e,a){var c=h.View.extend({initialize:function(i){this.cache=i.cache;this.CalendarPlugin=i.CalendarPlugin;this.subCalendar=i.subCalendar;this.calendarDiv=i.calendarDiv;this.template=Confluence.TeamCalendars.Templates.subCalendarPanelEntry;this.childSubCalendarIds=[];this.childSubCalendarViews=[];AJS.trigger("calendar.loaded",this.subCalendar)},events:{"click .subcalendar-name":"_onClick"},render:function(){this.$el.html(this.template({subCalendar:this.subCalendar,autoConvertSupported:this.CalendarPlugin.isAutoConvertSupported(this.calendarDiv),subCalendarClasses:this.CalendarPlugin.getParameter(this.calendarDiv,"subCalendarColorClass")}));this.entryView=this.$(".subcalendar-item");this._ellipsisLongCalendarNames();this._renderChildSubCalendars();this._initEventsVisibility();if(!d.isSingleCalendarView(this.calendarDiv)){this.subcalendarDisplayer=new a({CalendarPlugin:this.CalendarPlugin,calendarDiv:this.calendarDiv,entryView:this.entryView,subCalendar:this.subCalendar,childSubCalendarIds:this.childSubCalendarIds,childSubCalendarViews:this.childSubCalendarViews})}if(d.isSpaceCalendarView(this.calendarDiv)&&!d.isDummySubscriptionParentSubCalendar(this.subCalendar)&&this.subCalendar.spaceKey!==undefined){this.$(".subcalendar-name").addClass("header-color")}this.menuView=new e({cache:this.cache,CalendarPlugin:this.CalendarPlugin,calendarDiv:this.calendarDiv,subCalendar:this.subCalendar,subCalendarEntryView:this.entryView,autoConvertSupported:this.CalendarPlugin.isAutoConvertSupported(this.calendarDiv),subCalendarClasses:this.CalendarPlugin.getParameter(this.calendarDiv,"subCalendarColorClass"),template:Confluence.TeamCalendars.Templates.subCalendarMenu,subcalendarDisplayer:this.subcalendarDisplayer});this.$(".subcalendar-info").append(this.menuView.render());return this.$el},_ellipsisLongCalendarNames:function(){this.$(".subcalendar-name").attr("title",this.$(".ellipsis_text").text())},_renderChildSubCalendars:function(){if(this.subCalendar.childSubCalendars){this.childSubCalendarIds=[];this.childSubCalendarViews=[];var i=this;b.each(this.subCalendar.childSubCalendars,function(k){var j=k.customEventTypes;if(j&&j.length){b.each(j,function(l){i._renderChildSubCalendar(k,l)})}else{i._renderChildSubCalendar(k)}})}},_renderChildSubCalendar:function(k,j){var l=this.$(".child-subcalendars");var i={cache:this.cache,CalendarPlugin:this.CalendarPlugin,calendarDiv:this.calendarDiv,parentView:this.entryView,parentSubCalendar:this.subCalendar,childSubCalendar:k};if(j){i.customEventType=j;i.template=Confluence.TeamCalendars.Templates.customEventTypePanelEntry}else{i.template=Confluence.TeamCalendars.Templates.childSubCalendarPanelEntry}var m=new g(i).render();l.append(m);this.childSubCalendarIds.push(k.id);this.childSubCalendarViews.push(m.find(".child-subcalendar"))},_onClick:function(){if(!d.isSpaceCalendarView(this.calendarDiv)||d.isDummySubscriptionParentSubCalendar(this.subCalendar)||this.subCalendar.spaceKey===undefined){return}Confluence.TeamCalendars.fireEventForAnalytics("view.calendar.detail.click");window.location.href=AJS.contextPath()+"/display/"+encodeURIComponent(this.subCalendar.spaceKey)+"/calendar/"+encodeURIComponent(this.subCalendar.subscriptionId||this.subCalendar.id)+"?calendarName="+encodeURIComponent(this.subCalendar.name)},_initEventsVisibility:function(){var j=[];var i=[];if(d.isSubscriptionSubCalendar(this.subCalendar)){if(this.subCalendar.eventsHidden||f.inArray(this.subCalendar.id,i)!==-1){this.entryView.addClass("subcalendar-disabled");i.push(this.subCalendar.id)}else{if(!d.isDummySubscriptionParentSubCalendar(this.subCalendar)){j.push(this.subCalendar.id)}}}b.each(this.childSubCalendarViews,function(k){var l=this.CalendarPlugin.getSubCalendar(this.calendarDiv,k.data("subCalendarId"));if(!d.isSingleCalendarView(this.calendarDiv)&&(l.eventsHidden||f.inArray(l.id,i)!==-1)){k.addClass("subcalendar-disabled");i.push(l.id)}else{j.push(l.id)}},this);if(j.length){this.CalendarPlugin.addSubCalendarEventSource(this.calendarDiv,j)}if(i.length){this.entryView.addClass("subcalendar-disabled")}if(this.childSubCalendarViews.length){this.CalendarPlugin.checkCalendarHasAllChildDisable(this.entryView)}else{if(!d.isSingleCalendarView(this.calendarDiv)&&this.subCalendar.eventsHidden){this.entryView.addClass("subcalendar-disabled")}}}});return c});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:subcalendar-panel', location = 'com/atlassian/confluence/extra/calendar3/components/subcalendar-panel/subcalendar-menu-view.js' */
define("tc/subcalendar-menu-view",["jquery","underscore","tc-backbone","tc/myCalendarTour","tc/calendar-util"],function(e,j,i,h,f){var k=i.View.extend({initialize:function(l){this.cache=l.cache;this.CalendarPlugin=l.CalendarPlugin;this.calendarDiv=l.calendarDiv;this.subCalendar=l.subCalendar;this.parentSubCalendar=l.parentSubCalendar;this.$subCalendarEntryView=l.subCalendarEntryView;this.template=l.template;this.subcalendarDisplayer=l.subcalendarDisplayer},events:{"click .subcalendar-addevent":"_onAddEventClick","click .subcalendar-watch":"_onWatchClick","click .subcalendar-unwatch":"_onUnWatchClick","click .subcalendar-edit, .subcalendar-view":"_onEditClick","click .subcalendar-restrict":"_onRestrictClick","click .subcalendar-remove":"_onRemoveClick","click .subcalendar-share, .subcalendar-share-or-embed":"_onShareClick","click .subcalendar-subscribe":"_onSubscribeClick","click .subcalendar-reload":"_onRefreshClick","click .subcalendar-reminder":"_onReminderClick","click .custom-event-type-edit, .setting-reminder-setting":"_onEditEventTypeClick","click .color-cell":"_onColorCellClick","click .subcalendar-display-hide, .subcalendar-display-show":"_onDisplayClick"},render:function(){this.$el.html(this.template({subCalendar:this.subCalendar,autoConvertSupported:this.CalendarPlugin.isAutoConvertSupported(this.calendarDiv),subCalendarClasses:this.CalendarPlugin.getParameter(this.calendarDiv,"subCalendarColorClass"),parentSubCalendar:this.parentSubCalendar}));this._initExportLink();this._initDetailLink();this._initMenuItemsDropDown();return this.$el},_initMenuItemsDropDown:function(){this.$(".subcalendar-dropdown-menu").dropDown("Standard",{alignment:"right",hideHandler:function(){h.hideLeg()}})},_initExportLink:function(){this.$(".subcalendar-icalexport").attr("href",this.CalendarPlugin.getCalendarServiceBaseUrl(this.calendarDiv,"/export/subcalendar/"+encodeURIComponent(this.subCalendar.id+".ics")+"?os_authType=basic&isSubscribe=false"))},_initDetailLink:function(){this.$(".subcalendar-page").attr("href",AJS.contextPath()+"/display/"+encodeURIComponent(this.subCalendar.spaceKey)+"/calendar/"+encodeURIComponent(this.subCalendar.subscriptionId||this.subCalendar.id)+"?calendarName="+encodeURIComponent(this.subCalendar.name))},_onAddEventClick:function(l){Confluence.TeamCalendars.Dialogs.getEditEventDialog({start:new Date(),localizedStartTime:this.CalendarPlugin.getDefaultStartTime(this.calendarDiv),localizedEndTime:this.CalendarPlugin.getDefaultEndTime(this.calendarDiv),allDay:(this.calendarDiv.data(this.CalendarPlugin.PREF_LAST_ALL_DAY_USED)||"true")==="true",subCalendarId:this.subCalendar.id},this.subCalendar,this.CalendarPlugin,this.calendarDiv).show();l.preventDefault()},_onWatchClick:function(l){d(this.CalendarPlugin,this.calendarDiv,this.subCalendar,true,j.bind(function(){this.$subCalendarEntryView.addClass("watched").removeClass("not-watched")},this));l.preventDefault()},_onUnWatchClick:function(l){d(this.CalendarPlugin,this.calendarDiv,this.subCalendar,false,j.bind(function(){this.$subCalendarEntryView.removeClass("watched").addClass("not-watched")},this));l.preventDefault()},_onEditClick:function(l){this.CalendarPlugin.showSubCalendarEdit(this.calendarDiv,this.subCalendar);e("#edit-calendar-dialog").find(".button-panel-button.submit").removeClass("hidden");l.preventDefault()},_onRestrictClick:function(l){this.CalendarPlugin.getSubCalendarRestrictionsDialog(this.calendarDiv,this.subCalendar);l.preventDefault()},_onRemoveClick:function(l){if(this.CalendarPlugin.isSubCalendarDeletable(this.calendarDiv,this.subCalendar)){if(f.isJiraSubCalendar(this.subCalendar)){this.CalendarPlugin.deleteSubCalendar(this.calendarDiv,this.subCalendar)}else{this.CalendarPlugin.removeSubCalendarDialog(this.calendarDiv,this.subCalendar)}}else{this.CalendarPlugin.unsubscribeFromSubcalendar(this.calendarDiv,this.subCalendar)}l.preventDefault()},_onShareClick:function(l){this.CalendarPlugin.getSubCalendarShareDialog(this.calendarDiv,this.subCalendar);l.preventDefault()},_onSubscribeClick:function(l){this.CalendarPlugin.getSubCalendarIcalAddressDialog(this.calendarDiv,this.subCalendar);l.preventDefault()},_onRefreshClick:function(m){if(!this.CalendarPlugin.isSubCalendarEventsUpdatable(this.calendarDiv,this.subCalendar)||g(this.subCalendar)||f.isSubscriptionSubCalendar(this.subCalendar)){var l=this;e.ajax({cache:false,data:{subCalendarId:this.subCalendar.id},dataType:"json",error:function(n,p,o){l.CalendarPlugin.showAjaxError(l.calendarDiv,n,p,o,l.CalendarPlugin.ERROR_CLASS_SUB_CALENDAR_LIST_EVENTS+l.CalendarPlugin.getStringAsHex(l.subCalendar.id))},success:function(n){l.CalendarPlugin.setGenericErrors(l.calendarDiv,null,l.CalendarPlugin.ERROR_CLASS_SUB_CALENDAR_LIST_EVENTS+l.CalendarPlugin.getStringAsHex(l.subCalendar.id));if(n.success){l.CalendarPlugin.reloadSubCalendar(l.calendarDiv,l.subCalendar.id)}},type:"PUT",timeout:this.CalendarPlugin.ajaxTimeout,url:this.CalendarPlugin.getCalendarServiceBaseUrl(this.calendarDiv,"/subcalendars/admin/refresh.json")})}else{this.CalendarPlugin.reloadSubCalendar(this.calendarDiv,this.subCalendar.id)}m.preventDefault()},_onReminderClick:function(l){b(this.CalendarPlugin,this.calendarDiv,this.subCalendar,this.subCalendar.id,j.bind(function(){this.$subCalendarEntryView.find(".reminder-me").toggleClass("hidden");this.$subCalendarEntryView.find(".unreminder-me").toggleClass("hidden")},this),this.$subCalendarEntryView.find(".reminder-me.hidden").length?false:true);l.preventDefault()},_onEditEventTypeClick:function(l){var m=this.$subCalendarEntryView.data("customEventTypeId");if(!m){m=f.isInternalSubscriptionSubCalendar(this.subCalendar)?this.subCalendar.subscriptionType:this.subCalendar.type}this.CalendarPlugin.showCustomEventEditForm(this.calendarDiv,this.parentSubCalendar,m);l.preventDefault()},_onColorCellClick:function(n){if(!this.CalendarPlugin.isProcessingSubCalendar(this.calendarDiv)){this.CalendarPlugin.setProcessingSubCalendar(this.calendarDiv,true);var o=e(n.target);var l=this.subCalendar;var m=this;a(this.CalendarPlugin,this.calendarDiv,l,o.data("colour"),function(p){if(p.success){m.cache.removeCalendar(l.id);m.CalendarPlugin.setGenericErrors(m.calendarDiv,null,m.CalendarPlugin.ERROR_CLASS_SUB_CALENDAR_UPDATE);m.CalendarPlugin.setSubCalendars(m.calendarDiv,p.payload);m.CalendarPlugin.removeSubCalendarEventSource(m.calendarDiv,l.id);m.CalendarPlugin.updateAvailableSubCalendarsInSubCalendarPanel(m.calendarDiv);m.$subCalendarEntryView.removeClass().addClass("aui-dd-parent "+o.data("colour"))}else{m.CalendarPlugin.setGenericErrors(m.calendarDiv,"Unable to change the colour of the calendar. Please authenticate first.",m.CalendarPlugin.ERROR_CLASS_SUB_CALENDAR_UPDATE)}c(m.CalendarPlugin,m.calendarDiv)},c(m.CalendarPlugin,m.calendarDiv))}n.preventDefault()},_onDisplayClick:function(l){this.subcalendarDisplayer.toggleVisibility();l.preventDefault()}});var d=function(p,o,m,n,l){e.ajax({cache:false,data:{subCalendarId:m.id},dataType:"json",error:function(q,s,r){p.showAjaxError(o,q,s,r,p.ERROR_CLASS_SUB_CALENDAR_WATCH+p.getStringAsHex(m.id))},success:function(){if(l){l()}},type:n?"PUT":"DELETE",timeout:p.ajaxTimeout,url:p.getCalendarServiceBaseUrl(o,"/preferences/subcalendars/watch.json")})};var g=function(l){return l&&(f.isJiraSubCalendar(l)||e.grep(l.childSubCalendars||[],function(m){return g(m)}).length)};var b=function(p,o,n,m,l,q){e.ajax({cache:false,data:{subCalendarId:m,isReminder:q},dataType:"json",error:function(r,t,s){p.showAjaxError(o,r,t,s,p.ERROR_CLASS_SUB_CALENDAR_WATCH+p.getStringAsHex(n.id))},success:function(){if(l){l()}},type:"PUT",timeout:p.ajaxTimeout,url:p.getCalendarServiceBaseUrl(o,"/preferences/subcalendars/setreminder.json")})};var c=function(m,l){m.setProcessingSubCalendar(l,false)};var a=function(q,p,n,o,l,m){q.setSubCalendarSpinnerIconVisible(p,true);e.ajax({cache:false,converters:{"text json":function(r){return r}},data:(function(){var r={subCalendarId:n.id,color:o};if(q.getParameter(p,"include")){r.include=q.getParameter(p,"include")}f.putCalendarContextParams(r);return r})(),dataType:"json",dataFilter:function(r){var s=e.parseJSON(r);if(s.success){q.mergeSubCalendarObjectsToArray(s.payload)}return s},error:function(r,t,s){q.showAjaxError(p,r,t,s,q.ERROR_CLASS_SUB_CALENDAR_UPDATE);if(m){m(r,t,s)}q.setSubCalendarSpinnerIconVisible(p,false)},success:function(r){if(l){l(r)}q.setSubCalendarSpinnerIconVisible(p,false)},type:"PUT",timeout:q.ajaxTimeout,url:q.getCalendarServiceBaseUrl(p,"/subcalendars/color.json")})};return k});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:subcalendar-panel', location = 'com/atlassian/confluence/extra/calendar3/components/subcalendar-panel/child-subcalendar-entry-view.js' */
define("tc/child-subcalendar-entry-view",["jquery","tc-backbone","tc/calendar-util","tc/subcalendar-menu-view","tc/subcalendar-displayer"],function(d,f,b,c,a){var e=f.View.extend({initialize:function(g){this.cache=g.cache;this.parentSubCalendar=g.parentSubCalendar;this.childSubCalendar=g.childSubCalendar;this.customEventType=g.customEventType;this.CalendarPlugin=g.CalendarPlugin;this.calendarDiv=g.calendarDiv;this.parentView=g.parentView;this.template=g.template},events:{"hover .child-subcalendar":"_onHover","click .child-subcalendar-name":"_onClick"},render:function(){this.$el.html(this.template({childSubCalendar:this.childSubCalendar,customEventType:this.customEventType}));this.entryView=this.$(".child-subcalendar");var g={cache:this.cache,CalendarPlugin:this.CalendarPlugin,calendarDiv:this.calendarDiv,subCalendar:this.childSubCalendar,parentSubCalendar:this.parentSubCalendar,subCalendarEntryView:this.entryView,autoConvertSupported:this.CalendarPlugin.isAutoConvertSupported(this.calendarDiv),subCalendarClasses:this.CalendarPlugin.getParameter(this.calendarDiv,"subCalendarColorClass")};if(this.customEventType){g.template=Confluence.TeamCalendars.Templates.customEventTypeMenu}else{g.template=Confluence.TeamCalendars.Templates.childSubCalendarMenu}this.entryView.append(new c(g).render());this._ellipsisChildSubCalendarName();this.subcalendarDisplayer=new a({CalendarPlugin:this.CalendarPlugin,calendarDiv:this.calendarDiv,entryView:this.entryView,subCalendar:this.childSubCalendar,parentView:this.parentView,parentSubCalendar:this.parentSubCalendar});return this.$el},_ellipsisChildSubCalendarName:function(){var g=this.$(".child-subcalendar-name");if(!g.attr("threedots")){g.attr("title",this.$(".ellipsis_text").text())}},_onHover:function(){this.entryView.toggleClass("active-child-subcalendar")},_onClick:function(){this.subcalendarDisplayer.toggleVisibility()}});return e});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:subcalendar-panel', location = 'com/atlassian/confluence/extra/calendar3/components/subcalendar-panel/subcalendar-menu-builder.js' */
define("tc/subcalendar-menu-builder",["jquery","underscore","tc/calendar-util"],function(c,a,b){var d=function(p,r,h){var n=r.getParameter(p,"readOnly")==="true",l=r.getParameter(p,"isNotificationsEnabled")==="true",k=r.getParameter(p,"hideEditMenuItem")==="true",m=r.getParameter(p,"hideRemoveMenuItem")==="true",i=r.getParameter(p,"hideColorGrid")==="true",g=AJS.Meta.get("remote-user");function e(s,t){if(b.isSingleCalendarView(p)){j(s,t)}else{o(s,t)}}function o(t,u){var v=b.isJiraSubCalendar(t),s=b.isSubscriptionSubCalendar(t);t.displayName=t.name;if(b.isSubscriptionSubCalendar(t)&&!u){t.menuOptions={showMenu:false}}else{t.menuOptions={showMenu:true,showAddEvent:!n&&!v&&t.eventsEditable,showNotifications:l&&!u,showEdit:q(t),showView:!k&&!n&&!t.editable,showRestrictions:!n&&t.administrable&&!v,showRemove:!m&&!n&&t.editable&&((!u||b.isSubscriptionSubCalendar(t))?true:t.eventsEditable),showShareAndSubscribe:t.eventsViewable&&!v,showSubscribe:!v,showColourGrid:!i&&(s||v)&&g.length>0,showReload:t.reloadable,showDisplayLink:true}}}function j(s,t){o(s,t);var u=s.menuOptions;u.showEdit=false;u.showRemove=false;if(b.isJiraSubCalendar(s)){u.showEdit=true;u.showRemove=true}u.showRestrictions=false;u.showDisplayLink=false;s.menuOptions=u}function q(s){return !n&&s.editable&&s.eventsEditable}function f(s,v){var t=v.subscriptionType||v.type;if(b.isEventTypeSanbox(t)||b.isJiraType(t)){var u=b.getPeriodReminderEventTypeSanboxOrJira(s,t);return u!==undefined&&u>0}else{if(b.isCustomEventType(t)){return v.customEventTypes[0].periodInMins>0}}}a.each(h,function(s){e(s,false);if(s.childSubCalendars){a.each(s.childSubCalendars,function(v){var t=v.typeKey;var u=r.getEventTypeNames(t);if(b.isSubscriptionSubCalendar(v)){e(v,true);v.menuOptions=c.extend(v.menuOptions,{showDisplayLink:false})}else{if(b.isJiraSubCalendar(v)){e(v,true);v.menuOptions=c.extend(v.menuOptions,{showReminder:g.length>0&&f(s,v),showSettingReminder:g.length>0&&!f(s,v)&&q(s),showDisplayLink:false})}else{v.menuOptions={showMenu:true,showColourGrid:g.length>0,showReload:true,showReminder:g.length>0&&f(s,v),showSettingReminder:g.length>0&&!f(s,v)&&q(s)};v.displayName=u}}})}})};return{build:d}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:subcalendar-panel', location = 'com/atlassian/confluence/extra/calendar3/components/subcalendar-panel/subcalendar-displayer.js' */
define("tc/subcalendar-displayer",["jquery","underscore","tc/calendar-util"],function(d,b,c){var a=function(n){var l=n.CalendarPlugin,k=n.calendarDiv,h=n.entryView,i=n.subCalendar,e=n.childSubCalendarIds,f=n.childSubCalendarViews,m=n.parentView,g=n.parentSubCalendar;var j=function(){var q;var r=h.hasClass("child-subcalendar");if(r){q=[i.id]}else{q=b.clone(e)}var o=!h.hasClass("subcalendar-disabled");h.toggleClass("subcalendar-disabled",o);if(!r){h.toggleClass("allchildsubcalendar-disabled",o);b.each(f,b.bind(function(s){s.toggleClass("subcalendar-disabled",o)},this))}if(!c.isDummySubscriptionParentSubCalendar(r?g:i)){q.push(i.id)}if(!c.isSingleCalendarView(k)){l.setSubCalendarEventsHidden(k,q,o,m)}if(o){l.removeSubCalendarEventSource(k,q)}else{l.addSubCalendarEventSource(k,q)}var p="";if(r){if(o){p="hide.event.click."}else{p="show.event.click."}}else{if(o){p="hide.calendar.click."}else{p="show.calendar.click."}}if(c.isSingleCalendarView(k)){p+="singleCalendar"}else{p+=Confluence.TeamCalendars.getCalendarContext()}Confluence.TeamCalendars.fireEventForAnalytics(p)};return{toggleVisibility:function(){j()}}};return a});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.share-page:mail-page-resources', location = 'templates/sharepage/share-dialog.soy' */
// This file was automatically generated from share-dialog.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.Share == 'undefined') { Confluence.Templates.Share = {}; }
if (typeof Confluence.Templates.Share.Dialog == 'undefined') { Confluence.Templates.Share.Dialog = {}; }


Confluence.Templates.Share.Dialog.shareContentPopup = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<form action="#" method="post" class="aui share-content-popup"><div class="field-group"><div class="autocomplete-user-target"><input class="text autocomplete-sharepage" id="users" data-max="10" data-dropdown-target=".autocomplete-user-target" data-none-message="', soy.$$escapeHtml("No matches"), '" placeholder="', soy.$$escapeHtml("User name, group or email"), '"/></div><ol class="recipients"></ol></div><div class="field-group"><textarea class="textarea" id="note" placeholder="', soy.$$escapeHtml("Add an optional note"), '"/></div><div class="field-group button-panel"><div class="progress-messages-icon"></div><div class="progress-messages"></div><input class="button submit" type="submit" value="', soy.$$escapeHtml("Share"), '" disabled/><a class="close-dialog" href="#">', soy.$$escapeHtml("Cancel"), '</a></div></form>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Share.Dialog.recipientUser = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<li data-userkey="', soy.$$escapeHtml(opt_data.userKey), '" style="display: none" class="recipient-user"><img src="', soy.$$escapeHtml(opt_data.thumbnailLink.href), '" title="', soy.$$escapeHtml(opt_data.title), '"/><span class="title" title="', soy.$$escapeHtml(opt_data.title), '">', soy.$$escapeHtml(opt_data.title), '</span><span class="remove-recipient"/></li>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Share.Dialog.recipientEmail = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<li data-email="', soy.$$escapeHtml(opt_data.email), '" style="display: none" class="recipient-email"><img src="', soy.$$escapeHtml(opt_data.icon), '" title="', soy.$$escapeHtml(opt_data.email), '"/><span class="title" title="', soy.$$escapeHtml(opt_data.email), '">', soy.$$escapeHtml(opt_data.email), '</span><span class="remove-recipient"/></li>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Share.Dialog.recipientGroup = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<li data-group="', soy.$$escapeHtml(opt_data.title), '" style="display: none" class="recipient-group"><span><img src="', soy.$$escapeHtml(opt_data.thumbnailLink.href), '" title="', soy.$$escapeHtml(opt_data.title), '"/><span>', soy.$$escapeHtml(opt_data.title), '</span><span class="remove-recipient"/></span></li>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.share-page:mail-page-resources', location = 'js/mailpage.js' */
AJS.Confluence.SharePage={};AJS.Confluence.SharePage.autocompleteUser=function(d){d=d||document.body;var e=AJS.$,a=/^([a-zA-Z0-9_\.\-\+\!#\$%&'\*/=\?\^_`{|}~])+\@.*/;var c=function(j){if(!j||!j.result){throw new Error("Invalid JSON format")}var f=[];for(var g=0;g<j.result.length;g++){var h=j.result[g];if(h.type=="group"){h=b(h)}}f.push(j.result);return f};function b(f){if(f.name=="confluence-users"||f.name=="confluence-administrators"){return f}f.title=f.name;f.group=f.name;f.thumbnailLink={href:Confluence.getContextPath()+"/download/resources/com.atlassian.confluence.plugins.share-page:mail-page-resources/images/group.png",type:"image/png",rel:"thumbnail"};f.link=[{href:Confluence.getContextPath(),rel:"self"}];return f}e("input.autocomplete-sharepage[data-autocomplete-user-bound!=true]",d).each(function(){var h=e(this).attr("data-autocomplete-sharepage-bound","true").attr("autocomplete","off");var g=h.attr("data-max")||10,j=h.attr("data-alignment")||"left",i=h.attr("data-dropdown-target"),f=null;if(i){f=e(i)}else{f=e("<div></div>");h.after(f)}f.addClass("aui-dd-parent autocomplete");h.quicksearch(AJS.REST.getBaseUrl()+"search/user-or-group.json",function(){h.trigger("open.autocomplete-sharepage")},{makeParams:function(k){return{"max-results":g,query:k.replace("{|}","")}},dropdownPlacement:function(k){f.append(k)},makeRestMatrixFromData:c,addDropdownData:function(l){var k=e.trim(h.val());if(a.test(k)){l.push([{name:k,email:k,href:"#",icon:Confluence.getContextPath()+"/download/resources/com.atlassian.confluence.plugins.share-page:mail-page-resources/images/envelope.png"}])}if(!l.length){var m=h.attr("data-none-message");if(m){l.push([{name:m,className:"no-results",href:"#"}])}}return l},ajsDropDownOptions:{alignment:j,displayHandler:function(k){if(k.restObj&&k.restObj.username){return k.name+" ("+k.restObj.username+")"}return k.name},selectionHandler:function(m,l){if(l.find(".search-for").length){h.trigger("selected.autocomplete-sharepage",{searchFor:h.val()});return}if(l.find(".no-results").length){this.hide();m.preventDefault();return}var k=e("span:eq(0)",l).data("properties");if(!k.email){k=k.restObj}h.trigger("selected.autocomplete-sharepage",{content:k});this.hide();m.preventDefault()}}})})};(function(a){jQuery.fn.extend({elastic:function(){var b=["paddingTop","paddingRight","paddingBottom","paddingLeft","fontSize","lineHeight","fontFamily","width","fontWeight","border-top-width","border-right-width","border-bottom-width","border-left-width","borderTopStyle","borderTopColor","borderRightStyle","borderRightColor","borderBottomStyle","borderBottomColor","borderLeftStyle","borderLeftColor"];return this.each(function(){if(this.type!=="textarea"){return false}var g=jQuery(this),c=jQuery("<div />").css({position:"absolute",display:"none","word-wrap":"break-word","white-space":"pre-wrap"}),j=parseInt(g.css("line-height"),10)||parseInt(g.css("font-size"),"10"),l=parseInt(g.css("height"),10)||j*3,k=parseInt(g.css("max-height"),10)||Number.MAX_VALUE,d=0;if(k<0){k=Number.MAX_VALUE}c.appendTo(g.parent());var f=b.length;while(f--){c.css(b[f].toString(),g.css(b[f].toString()))}function h(){var i=Math.floor(parseInt(g.width(),10));if(c.width()!==i){c.css({width:i+"px"});e(true)}}function m(i,o){var n=Math.floor(parseInt(i,10));if(g.height()!==n){g.css({height:n+"px",overflow:o})}}function e(p){var o=g.val().replace(/&/g,"&amp;").replace(/ {2}/g,"&nbsp;").replace(/<|>/g,"&gt;").replace(/\n/g,"<br />");var i=c.html().replace(/<br>/ig,"<br />");if(p||o+"&nbsp;"!==i){c.html(o+"&nbsp;");if(Math.abs(c.height()+j-g.height())>3){var n=c.height()+j;if(n>=k){m(k,"auto")}else{if(n<=l){m(l,"hidden")}else{m(n,"hidden")}}}}}g.css({overflow:"hidden"});g.bind("keyup change cut paste",function(){e()});a(window).bind("resize",h);g.bind("resize",h);g.bind("update",e);g.bind("input paste",function(i){setTimeout(e,250)});e()})}})})(AJS.$);(function(f){var e,c={hideCallback:a,width:250,hideDelay:3600000,calculatePositions:function(h,o,w,s){var p;var y;var u;var l=-7;var m;var q;var x=o.target.offset();var g=o.target.outerWidth();var j=x.left+g/2;var t=(window.pageYOffset||document.documentElement.scrollTop)+f(window).height();var k=10;u=x.top+o.target.outerHeight()+s.offsetY;p=x.left+s.offsetX;var n=x.top>h.height();var i=(u+h.height())<t;q=(!i&&n)||(s.onTop&&n);var r=f(window).width()-(p+s.width+k);if(q){u=x.top-h.height()-8;var v=s.displayShadow?(AJS.$.browser.msie?10:9):0;l=h.height()-v}m=j-p+s.arrowOffsetX;if(s.isRelativeToMouse){if(r<0){y=k;p="auto";m=w.x-(f(window).width()-s.width)}else{p=w.x-20;y="auto";m=w.x-p}}else{if(r<0){y=k;p="auto";m=j-(f(window).width()-h.outerWidth())}else{if(s.width<=g/2){m=s.width/2;p=j-s.width/2}}}return{displayAbove:q,popupCss:{left:p,right:y,top:u},arrowCss:{position:"absolute",left:m,right:"auto",top:l}}}};var a=function(){f(".dashboard-actions .explanation").hide()};var d=function(j,h,i){if(j.find("input").length){i();return}j.append(Confluence.Templates.Share.Dialog.shareContentPopup());AJS.Confluence.SharePage.autocompleteUser();var k=function(m){AJS.Confluence.SharePage.current.hide();if(m){setTimeout(function(){j.empty()},300)}return false};f(document).keyup(function(m){if(m.keyCode==27){k(true);f(document).unbind("keyup",arguments.callee);return false}return true});j.find(".close-dialog").click(function(){k(true)});j.find("#note").elastic();j.find("form").submit(function(){var r=[];j.find(".recipients li").each(function(s,t){r.push(f(t).attr("data-userKey"))});if(r.length<=0){return false}f("button,input,textarea",this).attr("disabled","disabled");j.find(".progress-messages-icon").removeClass("error");j.find(".progress-messages").text("Sending");j.find(".progress-messages").attr("title","Sending");var o=Raphael.spinner(j.find(".progress-messages-icon")[0],7,"#666");j.find(".progress-messages-icon").css("position","absolute").css("left","0").css("margin-top","3px");j.find(".progress-messages").css("padding-left",j.find(".progress-messages-icon").innerWidth()+20);var r=[];j.find(".recipients li[data-userKey]").each(function(s,t){r.push(f(t).attr("data-userKey"))});var q=[];j.find(".recipients li[data-email]").each(function(s,t){q.push(f(t).attr("data-email"))});var m=[];j.find(".recipients li[data-group]").each(function(s,t){m.push(f(t).attr("data-group"))});var n=j.find("#note");var p={users:r,emails:q,groups:m,note:n.hasClass("placeholded")?"":n.val(),entityId:AJS.params.pageId};f.ajax({type:"POST",contentType:"application/json; charset=utf-8",url:Confluence.getContextPath()+"/rest/share-page/latest/share",data:JSON.stringify(p),dataType:"text",success:function(){setTimeout(function(){o();j.find(".progress-messages-icon").addClass("done");j.find(".progress-messages").text("Sent");j.find(".progress-messages").attr("title","Sent");setTimeout(function(){j.find(".progress-messages").text("");j.find(".progress-messages-icon").removeClass("done");j.find("#note").val("");f("button,input,textarea",j).removeAttr("disabled");k(false)},1000)},500)},error:function(t,s){o();j.find(".progress-messages-icon").addClass("error");j.find(".progress-messages").text("Error sending");j.find(".progress-messages").attr("title","Error sending"+": "+s);f("button,input,textarea",j).removeAttr("disabled")}});return false});var l=j.find("#users");var g=j.find("input.submit");l.bind("selected.autocomplete-sharepage",function(n,m){var o=function(r,q,s){var u=j.find(".recipients"),t,p;t="li[data-"+r+'="'+s.content[r]+'"]';if(u.find(t).length>0){u.find(t).hide()}else{u.append(q(s.content))}p=u.find(t);p.find(".remove-recipient").click(function(){p.remove();if(u.find("li").length==0){g.attr("disabled","true")}AJS.Confluence.SharePage.current.refresh();l.focus();return false});p.fadeIn(200)};if(m.content.email){o("email",Confluence.Templates.Share.Dialog.recipientEmail,m)}else{if(m.content.type=="group"){o("group",Confluence.Templates.Share.Dialog.recipientGroup,m)}else{o("userKey",Confluence.Templates.Share.Dialog.recipientUser,m)}}AJS.Confluence.SharePage.current.refresh();g.removeAttr("disabled");l.val("");l.focus();return false});l.bind("open.autocomplete-sharepage",function(n,m){if(f("a:not(.no-results)",AJS.dropDown.current.links).length>0){AJS.dropDown.current.moveDown()}});l.keypress(function(m){return m.keyCode!=13});f(document).bind("showLayer",function(o,n,m){if(n=="inlineDialog"&&m.popup==AJS.Confluence.SharePage.current){m.popup.find("#users").focus()}});f(h).parents().filter(function(){return this.scrollTop>0}).scrollTop(0);i()};var b=function(g){var h=f("#splitter-content");if(h.length!==0){g.container=h;g.offsetY=AJS.InlineDialog.opts.offsetY-h.offset().top}return g};AJS.Confluence.SharePage.initDialog=function(g,i,h){if(g.length){var j=f.extend(false,b(c),h);AJS.Confluence.SharePage.current=AJS.InlineDialog(g,i,d,j)}};AJS.toInit(function(g){AJS.Confluence.SharePage.initDialog(g("#shareContentLink"),"shareContentPopup")})})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendars-in-space', location = 'com/atlassian/confluence/extra/calendar3/components/calendars-in-space/calendar-navigation-buttons-view.js' */
define("tc/subcalendar-navigation-buttons-view",["jquery","underscore","tc/calendar-util","tc/util","tc/calendar-add-inline-dialog","tc-backbone"],function(d,a,b,f,c,g){var e=g.View.extend({events:{"click .edit-calendar-button, #editCalendarLink":"_onEditButtonClick","click .add-calendar-button":"_onAddButtonClick"},initialize:function(h){this.calendarDiv=h.calendarDiv;this.CalendarPlugin=h.CalendarPlugin;AJS.bind("calendar.loaded",a.bind(this._onCalendarLoaded,this));AJS.bind("calendar.removed",a.bind(this._onCalendarRemoved,this));AJS.bind("calendar.watch.statuses.loaded",a.bind(this._onWatchStatusLoaded,this));this.inlineAddCalendarDialog=new c({callbackHandler:this.CalendarPlugin.getRenderedMacroCallbackHandler(this.calendarDiv)})},render:function(){this._initShareButton();if(b.isSpaceCalendarView(this.calendarDiv)){var i=!d(".no-calendar-page").is(":visible");this.$(".add-calendar-button").toggleClass("hidden",!i);this.$(".add-calendar-button-more").toggleClass("hidden",!i)}else{if(b.isSingleCalendarView(this.calendarDiv)){if(this.subCalendar){var h=this.CalendarPlugin.getParameter(this.calendarDiv,"readOnly")!=="true"&&this.subCalendar.editable&&this.subCalendar.eventsEditable;this.$(".edit-calendar-button").toggleClass("hidden",!h)}}}this.inlineAddCalendarDialog.render()},_initShareButton:function(){var i=!d(".no-calendar-page").is(":visible");var j=b.getParameter(this.calendarDiv,"enableShareCalendar");var k=true;if(this.subCalendar){k=this.subCalendar.eventsViewable}this.$(".share-calendar-button").toggleClass("hidden",!i||!j||!k);if(AJS.Confluence.SharePage&&!this.shareDialogLoaded){AJS.Confluence.SharePage.initDialog(d(".share-calendar-button"),"shareContentPopup",{offsetX:-110});this.shareDialogLoaded=true;var h="spaceCalendars";if(b.isSingleCalendarView(this.calendarDiv)){h="singleCalendar"}d(".share-calendar-button").click(function(l){Confluence.TeamCalendars.fireEventForAnalytics("share.calendar.click."+h)})}},_onEditButtonClick:function(h){this.CalendarPlugin.showSubCalendarEdit(this.calendarDiv,this.subCalendar);d("#edit-calendar-dialog").find(".button-panel-button.submit").removeClass("hidden");h.preventDefault();return false},_onCalendarLoaded:function(i,h){if(b.isSingleCalendarView(this.calendarDiv)){this.subCalendar=h}AJS.params.pageId=this.CalendarPlugin.getParameter(this.calendarDiv,"contentId");this.render()},_onCalendarRemoved:function(){this.render()},_onWatchStatusLoaded:function(i,h){},_onAddButtonClick:function(i){Confluence.TeamCalendars.fireEventForAnalytics("add.calendar.click.new."+Confluence.TeamCalendars.getCalendarContext());var h=Confluence.TeamCalendars.Dialogs.getSubCalendarCreateDialog("parent",this.CalendarPlugin.getRenderedMacroCallbackHandler(this.calendarDiv));f.showDialogInUpdatedHeight(h);d("input[name='name']",h.getCurrentPanel().body).focus();d("#inline-dialog-inline-dialog-more").hide();i.preventDefault();return false}});return e});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendars-in-space', location = 'com/atlassian/confluence/extra/calendar3/components/calendars-in-space/calendar-restriction-button-view.js' */
define("tc/subcalendar-restriction-button-view",["jquery","underscore","tc/calendar-util"],function(d,a,b){var c=Backbone.View.extend({events:{"click .restrict-calendar-button":"_onRestrictionClick"},initialize:function(e){this.calendarDiv=e.calendarDiv;this.CalendarPlugin=e.CalendarPlugin;AJS.bind("calendar.loaded",a.bind(this._onCalendarLoaded,this))},render:function(){var e=b.hasRestriction(this.subCalendar);this.$(".restrict-calendar-button.restricted").toggleClass("hidden",!e);this.$(".restrict-calendar-button.no-restricted").toggleClass("hidden",e)},_onRestrictionClick:function(){if(this.CalendarPlugin.getParameter(this.calendarDiv,"readOnly")!=="true"&&this.subCalendar.administrable&&!b.isJiraSubCalendar(this.subCalendar)){this.CalendarPlugin.getSubCalendarRestrictionsDialog(this.calendarDiv,this.subCalendar)}event.preventDefault()},_onCalendarLoaded:function(f,e){if(b.isSingleCalendarView(this.calendarDiv)){this.subCalendar=e;this.render()}}});return c});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:event-edit', location = 'com/atlassian/confluence/extra/calendar3/components/manage-event/event-edit/event-edit-dialog.soy' */
// This file was automatically generated from event-edit-dialog.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.eventEdit = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<form name="event-edit" class="aui event-edit" method="POST" action="#"><input type="hidden" name="uid" value=""><input type="hidden" name="originalStartDate" value=""><input type="hidden" name="originalSubCalendarId" value=""><input type="hidden" name="originalEventType" value=""><input type="hidden" name="originalCustomEventTypeId" value=""><input type="hidden" name="childSubCalendarId" value=""><div class="event-type subcalendar-event"><div class="aui-message error calendar-error hidden"><p class="title"><span class="aui-icon icon-error"></span><strong>', soy.$$escapeHtml("Error(s) occurred."), '</strong></p><div class="error-content"><ul class="error-messages hidden"></ul></div></div><div class="field-group field-group-calendar"><label for="calendar">', soy.$$escapeHtml("Calendar"), '<span class="aui-icon icon-required"></span></label><select name="calendar" id="calendar" class="sub-calendar-select select"></select><a href="#" id="calendar-tooltip" class="aui-icon icon-help hidden" original-title="show tooltip" title="', soy.$$escapeHtml("This field is enabled when the field \x22Edit this instance only\x22 is unchecked"), '"></a></div><div class="field-group field-group-event-type"><label for="event-type">', soy.$$escapeHtml("Event Type"), '<span class="aui-icon icon-required"></span></label><select name="event-type" id="event-type" class="event-type-select select"></select><a href="#" id="calendar-tooltip" class="aui-icon icon-help hidden" original-title="show tooltip" title="', soy.$$escapeHtml("This field is enabled when the field \x22Edit this instance only\x22 is unchecked"), '"></a><div class="error type-error"></div></div><div id="event-fields-container"></div></form>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:event-edit', location = 'com/atlassian/confluence/extra/calendar3/components/manage-event/event-edit/event-fields.soy' */
// This file was automatically generated from event-fields.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }
if (typeof Confluence.TeamCalendars.Templates.Fields == 'undefined') { Confluence.TeamCalendars.Templates.Fields = {}; }


Confluence.TeamCalendars.Templates.Fields.text = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="field-group field-', soy.$$escapeHtml(opt_data.id), '" id="field-text-', soy.$$escapeHtml(opt_data.id), '"><label for="', soy.$$escapeHtml(opt_data.id), '">', soy.$$escapeHtml(opt_data.label), (opt_data.required) ? '<span class="aui-icon icon-required"></span>' : '', '</label><input type="text" class="text" name="', soy.$$escapeHtml(opt_data.id), '" id="', soy.$$escapeHtml(opt_data.id), '-text" value="" ', (opt_data.readOnly) ? ' readonly="readonly"' : '', '><div class="error ', soy.$$escapeHtml(opt_data.id), '-error"></div></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.TeamCalendars.Templates.Fields.inforReminderLabel = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="field-group field-', soy.$$escapeHtml(opt_data.id), '" id="field-text-', soy.$$escapeHtml(opt_data.id), '"><label for="', soy.$$escapeHtml(opt_data.id), '">', soy.$$escapeHtml(opt_data.label), '</label><div class="bodyInforReminderLabel">');
  Confluence.TeamCalendars.Templates.Fields.bodyInforReminderLabel(opt_data, output);
  output.append('</div></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.TeamCalendars.Templates.Fields.bodyInforReminderLabel = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.reminderPeriod > 0) ? '<span class="span-label field-value-normal">' + opt_data.reminderPeriodText + '</span><p/><div class="reminder-info"><div class="reminder-info-icon"><span class="aui-icon aui-icon-small aui-iconfont-info">Info</span></div><div class="reminder-info-text"><span>' + "Reminders are inherited from the event type. \x3ca href\x3d\x22#\x22 id\x3d\x22calendar-reminder-setting\x22\x3eEdit event type\x3c/a\x3e" + '</span></div></div>' : '<span class="span-label field-value-normal">' + soy.$$escapeHtml(opt_data.reminderPeriodText) + ' ' + "\x3ca href\x3d\x22#\x22 id\x3d\x22calendar-reminder-setting\x22 class\x3d\x22add-reminder-setting\x22\x3eAdd reminder\x3c/a\x3e" + '</span>');
  return opt_sb ? '' : output.toString();
};


Confluence.TeamCalendars.Templates.Fields.textarea = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="field-group field-', soy.$$escapeHtml(opt_data.id), '" id="field-textarea-', soy.$$escapeHtml(opt_data.id), '"><label for="', soy.$$escapeHtml(opt_data.id), '">', soy.$$escapeHtml(opt_data.label), (opt_data.required) ? '<span class="aui-icon icon-required"></span>' : '', '</label><textarea name="', soy.$$escapeHtml(opt_data.id), '" id="', soy.$$escapeHtml(opt_data.id), '-textarea" class="textarea" rows="', soy.$$escapeHtml(opt_data.size), '" ', (opt_data.readOnly) ? ' readonly="readonly"' : '', '></textarea><div class="error ', soy.$$escapeHtml(opt_data.id), '-error"></div></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.TeamCalendars.Templates.Fields.page = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="field-group field-', soy.$$escapeHtml(opt_data.id), ' field-group-eventlink" id="field-page-', soy.$$escapeHtml(opt_data.id), '"><label for="', soy.$$escapeHtml(opt_data.id), '">', soy.$$escapeHtml(opt_data.label), (opt_data.required) ? '<span class="aui-icon icon-required"></span>' : '', '</label><input type="text" class="text" name="', soy.$$escapeHtml(opt_data.id), '" id="', soy.$$escapeHtml(opt_data.id), '-text" value="" ', (opt_data.readOnly) ? ' readonly="readonly"' : '', '><div class="', soy.$$escapeHtml(opt_data.id), '-suggestions aui-dd-parent hidden" ><div class="aui-dropdown"></div></div><div class="error ', soy.$$escapeHtml(opt_data.id), '-error"></div></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.TeamCalendars.Templates.Fields.when = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('\t<div id="field-when"><fieldset class="date-select"><legend><span>', soy.$$escapeHtml("When"), '<span class="aui-icon icon-required"></span></span></legend><div class="field-group"><label for="startDate">', soy.$$escapeHtml("Start date"), '</label><input class="datepicker-field date-field start text" type="text" name="startDate" id="', soy.$$escapeHtml(opt_data.id), '-startDate" size="10" value="" autocomplete="off" ', (opt_data.disableStartDateTime) ? ' disabled="disabled"' : '', '><label for="startTime">', soy.$$escapeHtml("Start time"), '</label><input type="text" class="time-field text" name="startTime" id="', soy.$$escapeHtml(opt_data.id), '-startTime" size="8" ', (opt_data.disableStartDateTime) ? ' disabled="disabled"' : '', '><span>', soy.$$escapeHtml("to"), '</span><label for="endTime">', soy.$$escapeHtml("End date"), '</label><input type="text" class="time-field text" name="endTime" id="', soy.$$escapeHtml(opt_data.id), '-endTime" size="8" ', (opt_data.disableEndDateTime) ? ' disabled="disabled"' : '', '><label for="endDate">', soy.$$escapeHtml("End time"), '</label><input class="datepicker-field date-field end text" type="text" name="endDate" id="', soy.$$escapeHtml(opt_data.id), '-endDate" size="10" value="" autocomplete="off" ', (opt_data.disableEndDateTime) ? ' disabled="disabled"' : '', '><div class="error when-error"></div></div></fieldset><div class="field-group field-group-allday"><label for="allDayEvent">', soy.$$escapeHtml("All day event"), '</label><input type="checkbox" class="checkbox" name="allDayEvent" id="', soy.$$escapeHtml(opt_data.id), '-allDayEvent" value="true" ', (opt_data.disableAllDay) ? ' disabled="disabled"' : '', '></div></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.TeamCalendars.Templates.Fields.repeats = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('\t<div id="field-repeats"><input type="hidden" name="freq" value=""><input type="hidden" name="byday" value=""><input type="hidden" name="recurrenceId" value=""><div class="field-group edit-this-instance-only-container hidden"><label for="editthisinstanceonly">', soy.$$escapeHtml("Edit this instance only"), '</label><input type="checkbox" class="checkbox" name="editthisinstanceonly" id="editthisinstanceonly" value="true" checked="checked"></div><div class="field-group field-group-frequency"><label for="freq-select">', soy.$$escapeHtml("Repeat"), '</label><select name="freq-select" id="', soy.$$escapeHtml(opt_data.id), '-freq-select" class="select"><option value="">', soy.$$escapeHtml("Doesn\x27t repeat"), '</option><option value="DAILY">', soy.$$escapeHtml("Daily"), '</option><option value="WEEKLY-BYDAY">', soy.$$escapeHtml("Weekdays"), '</option><option value="WEEKLY">', soy.$$escapeHtml("Weekly"), '</option><option value="MONTHLY">', soy.$$escapeHtml("Monthly"), '</option><option value="YEARLY">', soy.$$escapeHtml("Yearly"), '</option></select></div><div class="hidden field-group interval-container"><label for="interval">', soy.$$escapeHtml("Repeat every"), '</label><input type="text" class="text" name="interval" id="', soy.$$escapeHtml(opt_data.id), '-interval" maxlength="2"><span class="interval-label"></span><div class="error interval-error"></div></div><fieldset class="date-select recur-ends hidden"><legend><span>', soy.$$escapeHtml("End repeat"), '</span></legend><div class="field-group"><label for="recur-end-never">', soy.$$escapeHtml("Never"), '</label><input type="radio" class="radio recur-ends-never" name="recur-end" id="', soy.$$escapeHtml(opt_data.id), '-recur-end-never" checked="checked"><span class="label">', soy.$$escapeHtml("Never"), '</span><label for="recur-end-until">', soy.$$escapeHtml("On date"), '</label><input type="radio" class="radio recur-ends-until" name="recur-end" id="', soy.$$escapeHtml(opt_data.id), '-recur-end-until" disabled="disabled"><span class="label">', soy.$$escapeHtml("On date"), '</span><input class="datepicker-field date-field text" type="text" class="" name="until" id="', soy.$$escapeHtml(opt_data.id), '-until" value="" size="10" disabled="disabled"  autocomplete="off"><div class="error until-error"></div></div></fieldset></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.TeamCalendars.Templates.Fields.user = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="field-group field-group-', soy.$$escapeHtml(opt_data.id), '" id="field-user-', soy.$$escapeHtml(opt_data.id), '"><label for="', soy.$$escapeHtml(opt_data.id), '">', soy.$$escapeHtml(opt_data.label), (opt_data.required) ? '<span class="aui-icon icon-required"></span>' : '', '</label><input type="text" class="text autocomplete-user" name="', soy.$$escapeHtml(opt_data.id), '" id="', soy.$$escapeHtml(opt_data.id), '-user-picker" value="" data-max="10" data-none-message="', soy.$$escapeHtml("No users found."), '" data-template="{title}"><ul class="invitees hidden"></ul><div class="error ', soy.$$escapeHtml(opt_data.id), '-error"></div></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.TeamCalendars.Templates.Fields.userSelection = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<li class="invitee" title="', soy.$$escapeHtml(opt_data.fullName), ' (', soy.$$escapeHtml(opt_data.userName), ')"><div class="invitee-left" threedots="', soy.$$escapeHtml(opt_data.fullName), ' (', soy.$$escapeHtml(opt_data.userName), ')"><img src="', soy.$$escapeHtml(opt_data.imgPath), '"><span class="invitee-name-display">', soy.$$escapeHtml(opt_data.fullName), '<span class="user-name">(', soy.$$escapeHtml(opt_data.userName), ')</span></span></div><div class="invitee-right"><a class="delete-invitee" title="', soy.$$escapeHtml("Delete"), '"></a></div><div class="clear"></div></li>');
  return opt_sb ? '' : output.toString();
};


Confluence.TeamCalendars.Templates.Fields.serverSelector = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="field-group field-group-jira field-group-jira-server" id="field-serverSelector"><label for="tc-jira-server">', soy.$$escapeHtml("Server"), '<span class="aui-icon icon-required"></span></label><select name="tc-jira-server" class="select tc-jira-server"></select><span class="spinner aui-icon aui-icon-wait"></span><div class="error server-error"></div><div class="error oauth-error hidden"></div></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.TeamCalendars.Templates.Fields.projectSelector = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="field-group field-group-jira field-group-jira-project" id="field-projectSelector"><label for="tc-jira-project">', soy.$$escapeHtml("Project"), '<span class="aui-icon icon-required"></span></label><select name="tc-jira-project" class="select tc-jira-project"></select><span class="spinner aui-icon aui-icon-wait"></span><div class="error project-error"></div></div>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:event-edit', location = 'com/atlassian/confluence/extra/calendar3/components/manage-event/event-edit/event-edit-dialog.js' */
define("tc/event-edit-dialog",["jquery","tc/event-field-handlers","tc/event-types","tc-backbone","tc/calendar-util"],function(b,e,i,g,c){var j,h,d,f={};var a=g.View.extend({disableCalSelect:function(){b("select#calendar").attr("disabled",true);if(AJS.Meta.get("build-number")>=4520){b("#event-type").auiSelect2("enable",false)}else{b("#event-type").auiSelect2("disable")}},enableCalSelect:function(){b("select#calendar").attr("disabled",false);if(AJS.Meta.get("build-number")>=4520){b("#event-type").auiSelect2("enable",true)}else{b("#event-type").auiSelect2("enable")}},showToolTip:function(){b("#edit-event-dialog .subcalendar-event select.event-type-select").css("display","none");var l=window.navigator.userAgent;var k=l.indexOf("MSIE ");if(AJS.Meta.get("build-number")<4520||k>0||!!navigator.userAgent.match(/Trident.*rv\:11\./)){b("#edit-event-dialog .field-group-event-type .icon-help").css("top","-10px")}b("#calendar-tooltip.icon-help").removeClass("hidden").tooltip({aria:true})},hiddenToolTip:function(){b("#calendar-tooltip.icon-help").addClass("hidden")},getField:function(k,l){return b("input[name='"+l+"']",k)},getSelect:function(k,l){return b("select[name='"+l+"']",k)},getTextSelect:function(k,l){return b("select[name='"+l+"'] option:selected",k).text()},getTextArea:function(k,l){return b("textarea[name='"+l+"']",k)},show:function(){d.show()},hide:function(){d.hide()},remove:function(){d.remove()},getEditEventDialog:function(H,A,p,K){var C,y,o,N,u,I=[],O,J=Confluence.TeamCalendars.LocalStorage,x=H.originalEventSubCalendarId,m=this;var D=580,B=700;if(d&&d.isVisible()){return d}if(d){d.remove();d=null;AJS.log("Warning: old event edit dialog was not destroyed before creating a new one.")}j=p;h=K;u=i.DefaultEventType;function z(P){var Q={};b.each(P,function(R,S){if(S===undefined){Q[R]=""}else{Q[R]=S}});return Q}function w(X,Q){var Y,P,U,V,ac,S,W,R,ab,T,aa,Z;if(j.isProcessingEvent(h)){return false}j.setProcessingEvent(h,true,C);Y=m.getField(N,"originalSubCalendarId").val();Z=m.getField(N,"childSubCalendarId").val();P=m.getField(N,"originalStartDate").val();U=b("option:selected",m.getSelect(N,"calendar")).val();V=m.getField(N,"uid").val();W=m.getSelect(N,"event-type").val();R=c.isCustomEventType(W)?i.CustomEventType:u[W];ac=m.getField(N,"allDayEvent").is(":checked");S=m.getField(N,"until");ab=m.getField(N,"originalEventType").val();T=m.getField(N,"originalCustomEventTypeId").val();aa=c.isCustomEventType(W)?W:"";J.setItem("last-selected-calendar",U);J.setItem("last-selected-calendar-type",W);if(!V){h.data(j.PREF_LAST_ALL_DAY_USED,ac.toString());k()}if(!R){return}if(R.customHandler){R.customHandler.submitForm(X,m.getField(X,"name").val(),U,j.getRenderedMacroCallbackHandler(h),function(){d.remove();j.setProcessingEvent(h,false,C);j.updateAvailableSubCalendarsInSubCalendarPanel(h)},function(){j.setProcessingEvent(h,false,C)});return}j.updateEvent(h,(function(){var ad={originalSubCalendarId:Y,originalStartDate:P,subCalendarId:U,uid:V,eventType:c.isCustomEventType(W)?"custom":W,originalEventType:ab,customEventTypeId:aa,originalCustomEventTypeId:T,childSubCalendarId:Z};b.each(Q,function(ae,af){b.extend(ad,z(af.getData()))});return ad})(),function(ad,af,ae){j.getCalendarPanel(h).fullCalendar("unselect");j.showAjaxError(h,ad,af,ae,j.ERROR_CLASS_EVENT_UPDATE);j.setProcessingEvent(h,false,C)},function(ag){j.getCalendarPanel(h).fullCalendar("unselect");j.setGenericErrors(h,null,j.ERROR_CLASS_EVENT_UPDATE);if(ag.success){Confluence.TeamCalendars.setFieldErrors(X,null);var ah=j.getSubCalendar(h,ag.subCalendar.id);if(!ah){var af=j.getSubCalendar(h,ag.subCalendar.parentId);ah=ag.subCalendar;if(ah.type==="custom"||ah.subscriptionType==="custom"){var aj=ah.customEventTypes;var ak=af.customEventTypes;if(aj&&aj.length){if(ak&&ak.length){var ae=false;for(var ai=0;ai<ak.length;ai++){if(ak[ai].customEventTypeId===aj[0].customEventTypeId){ae=true;break}}if(!ae){ak.push(aj[0])}}else{af.customEventTypes.push(aj[0])}}}af.childSubCalendars=b.merge([ah],af.childSubCalendars||[]);j.updateAvailableSubCalendarsInSubCalendarPanel(h);j.addSubCalendarEventSource(h,ah.id);if(x&&ag.subCalendar&&(ag.subCalendar.parentId!==Y||ah.id!==x)){j.reloadSubCalendar(h,x)}}else{var ad=[ah.id];if(x&&(ah.id!==x||ag.subCalendar.parentId!==Y)){ad.push(x)}j.reloadSubCalendar(h,ad)}d.remove()}else{Confluence.TeamCalendars.setFieldErrors(X,ag.fieldErrors)}j.setProcessingEvent(h,false,C)});return false}function G(Q,R){var S=j.getSubCalendarsWhichCanAddEvents(h);S.sort(function(Y,X){var W=Y.name.toLowerCase(),V=X.name.toLowerCase();return W.localeCompare(V)});var U=m.getSelect(Q,"calendar");b.each(S,function(W,V){U.append(b("<option/>",{value:V.id,text:V.name}))});if(S.length===1){U.parent().hide()}if(R.subCalendarId){var P=j.getSubCalendar(h,R.subCalendarId);if(P){U.val(P.parentId||R.subCalendarId)}}else{var T=J.getItem("last-selected-calendar");if(T){U.val(T)}}if(R!==undefined&&(c.isJiraEvent(R)||c.isJiraEventStream(R.eventType))){U.disable()}U.change(function(){var Y=m.getField(Q,"originalSubCalendarId").val();var W=m.getField(Q,"originalEventType").val();if(S.length>1&&Y!==""&&W!==""){var X=b(this).find("option:selected");var V=m.getSelect(Q,"event-type").val();if(Y===X.val()&&V===W){b("#editthisinstanceonly").enable()}else{b("#editthisinstanceonly").disable()}}v(Q,true)})}function t(Q){var R=c.isCustomEventType(Q.id)?Q.css:Q.id;var P=b("<div/>",{"class":"tc-event-type-item",title:Q.text}).append(b("<span/>",{"class":"icon_type "+R})).append(b("<span/>",{"class":"ellipsis_text",text:Q.text}));return b("<div/>").append(P).html()}function l(R){var P=j.getSubCalendarsWhichCanAddEvents(h);for(var Q in P){if(P[Q].id===R){return P[Q].disableEventTypes}}}function q(R){var P=j.getSubCalendarsWhichCanAddEvents(h);for(var Q in P){if(P[Q].id===R){return P[Q].customEventTypes}}}function F(T,Q){var S;if(!Q){return S}var R=q(T);if(R&&R.length){for(var P=0;P<R.length;P++){if(R[P].customEventTypeId===Q){S=R[P];break}}}return S}function s(P){P.sort(function(R,Q){return R.title.toUpperCase().localeCompare(Q.title.toUpperCase())});return P}function v(R,S){var X=m.getSelect(R,"event-type");if(S){X.empty()}var Y=m.getField(R,"originalEventType").val();var Q=m.getField(R,"originalSubCalendarId").val();var V=m.getSelect(R,"calendar").find("option:selected").val();var Z=l(V);var aa=s(q(V));var U=F(Q,H.customEventTypeId);var W=function(ab){for(var ac in Z){if(ab===Z[ac]){return true}}return false};if(H.id){b.each(u,function(ab,ac){if((Y===ac.id||!W(ac.id)&&(c.isJiraEvent(H)||ac.hiddenFromEventCreation===undefined))){X.append(b("<option/>",{value:ac.id,text:ac.name}))}});b.each(aa,function(ab,ac){if(!W(ac.customEventTypeId)){X.append(b("<option/>",{value:ac.customEventTypeId,"class":ac.icon,"data-custom-id":ac.customEventTypeId,text:ac.title}))}});if(S&&U){var P=false;for(var T=0;T<aa.length;T++){if(aa[T].title===U.title){P=true;break}}if(!P){X.append(b("<option/>",{value:U.customEventTypeId,"class":U.icon,"data-custom-id":U.customEventTypeId,text:U.title}))}}}else{b.each(u,function(ab,ac){if(!W(ac.id)&&(c.isJiraEvent(H)||ac.hiddenFromEventCreation===undefined)){X.append(b("<option/>",{value:ac.id,text:ac.name}))}});b.each(aa,function(ab,ac){if(!W(ac.customEventTypeId)){X.append(b("<option/>",{value:ac.customEventTypeId,"class":ac.icon,"data-custom-id":ac.customEventTypeId,text:ac.title}))}});b.each(u,function(ab,ac){if(ac.hiddenFromEventCreation!==undefined&&ac.hiddenFromEventCreation===false&&!W(ac.id)){X.append(b("<option/>",{value:ac.id,text:ac.name}))}});if(X.children().length>0){b(".field-group-event-type .type-error",R).empty();b("#event-fields-container",R).show();m.enableOkButton()}else{X.append(b("<option/>",{value:"",text:""}));b(".field-group-event-type .type-error",R).append(b("<span/>",{text:"All event types are disabled. Please add new event type to the calendar."}));b("#event-fields-container",R).hide();C.disableOkButton({buttonText:"OK"})}X.append(b("<option/>",{value:"addNewCustomEventType","class":"addNewCustomEventType",text:"Add new event type"}))}if(AJS.$.fn.auiSelect2){b(".event-edit #event-type").auiSelect2({formatSelection:t,formatResult:t,minimumResultsForSearch:-1});if(H.id&&c.isJiraEvent(H)){if(AJS.Meta.get("build-number")>=4520){b("#event-type").auiSelect2("enable",false)}else{b("#event-type").auiSelect2("disable")}}}if(H.eventType&&H.eventType==="custom"){X.change(L).val(H.customEventTypeId).trigger("change")}else{X.change(L).val(H.eventType||J.getItem("last-selected-calendar-type")||"other").trigger("change")}}function n(){m.getField(N,"uid").val(H.id||"");m.getField(N,"originalStartDate").val(H.originalStart||"");m.getField(N,"originalSubCalendarId").val(H.subCalendarId||"");m.getField(N,"originalEventType").val(H.eventType||"");m.getField(N,"originalCustomEventTypeId").val(H.customEventTypeId||"");m.getField(N,"childSubCalendarId").val(H.childSubCalendarId||"")}function L(R){if(!d){return}var Q=R.target.value;if(Q==="addNewCustomEventType"){var T=b("option:selected",m.getSelect(N,"calendar")).val();d.remove();var P=j.getSubCalendar(h,T);var S=j.showCustomEventEditForm(h,P);return}r(Q);if(!c.isJiraEventStream(Q)){m.getSelect(N,"event-type").data("previous",Q)}M()}function M(){if(d){d.getCurrentPanel().body.css({height:"auto"});b("#"+d.id).css({height:"auto"})}}function r(Y){if(!Y){return}var U=c.isCustomEventType(Y)?i.CustomEventType.fields:u[Y].fields,Q=[],ab=b("#event-fields-container"),V=c.isJiraEventStream(Y),X=V?b("#"+Y+"-event-fields",ab):b("#tc-event-fields",ab),W=m.getSelect(N,"event-type").val(),S=m.getSelect(N,"event-type").data("previous"),P,ac=m.getField(N,"originalEventType").val();b.each(b.grep(U,function(ad){return ad.type==="repeats"&&ad.defaultRecur}),function(ad,ae){if(!H.id){H.recur=ae.defaultRecur}});if(H&&c.isJiraEventStream(H.eventType)){m.getSelect(N,"event-type").attr("disabled","disabled")}if(!V&&S){var Z=c.isCustomEventType(S)?i.CustomEventType.fields:u[S].fields;b.each(b.grep(Z,function(ad){return ad.type==="text"&&ad.copyto}),function(ae,ad){P=m.getField(X,ad.id).val()})}b(".event-fields",ab).each(function(){b(this).find(".error").empty();b(this).hide()});if(X.length&&V){X.show();Q=I[Y]}else{if(X.length){X.show();b("#tc-event-fields >div").hide()}else{if(V){X=b("<div/>",{id:Y+"-event-fields","class":"event-fields"})}else{X=b("<div/>",{id:"tc-event-fields","class":"event-fields"})}ab.append(X)}b.each(U,function(ad,ae){if(V){Q[ad]=e[ae.type](ae,X,H,j,h,m);Q[ad].add();Q[ad].init()}else{Q[ad]=e.getEventField(ae,X,H,j,h,m,P)}});I[Y]=Q}var T=function(){return f[W]!==false};if(T()){C.enableOkButton()}else{C.disableOkButton({buttonText:"OK"})}C.unbind("submit").submit(function(){w(X,Q);return false});if(ac!==undefined&&ac!==""){var R=m.getField(N,"originalSubCalendarId").val();var aa=m.getSelect(N,"calendar").val();if(ac===Y&&aa===R){b("#editthisinstanceonly").enable()}else{b("#editthisinstanceonly").disable()}}b(X).off("click.calendar-reminder-setting").on("click.calendar-reminder-setting","#calendar-reminder-setting",function(){var ad=m.getSelect(N,"calendar").val();d.hide();var ae=j.getSubCalendar(h,ad);j.showCustomEventEditForm(h,ae,W);return})}AJS.unbind("show-dialog-edit-event.teamcalendar").bind("show-dialog-edit-event.teamcalendar",function(R){var S=c.isJiraEventStream(m.getSelectedEventType())?"#"+m.getSelectedEventType()+"-event-fields":"#tc-event-fields";var Q=b("#field-text-reminder .bodyInforReminderLabel",b(S,N));var T=j.getCurrentReminderForEventType(h,m);var P=T&&T.periodInMins>0;b(Q).empty().append(Confluence.TeamCalendars.Templates.Fields.bodyInforReminderLabel({reminderPeriodText:P?AJS.format("{0} before",c.showInforReminder(T.periodInMins)):"None.",reminderPeriod:P?T.periodInMins:0}));d.show()});AJS.unbind("remove-dialog-edit-event.teamcalendar").bind("remove-dialog-edit-event.teamcalendar",function(P){if(d){d.remove()}});AJS.bind("remove.dialog",function(Q,P){if(P.dialog.id=="edit-event-dialog"){d=null}});y=function(){C.submit();AJS.unbind("show-dialog-edit-event.teamcalendar");return false};o=function(){d.remove();AJS.unbind("show-dialog-edit-event.teamcalendar");return false};d=new AJS.ConfluenceDialog({id:"edit-event-dialog",width:D,height:B,onSubmit:y,onCancel:o});d.addHeader(H.title||"Create event");d.addButton("OK",y,"submit");d.addLink("Cancel",o);O=d.popup.element.find(".submit");d.addPanel("",Confluence.TeamCalendars.Templates.eventEdit(),"calendar-dialog-panel");N=d.getCurrentPanel().body;var E=function(P){f[m.getSelect(N,"event-type").val()]=P};var k=function(){var P="myCalendars";if(AJS.Meta.get("space-key")){if(AJS.Meta.get("content-id")){P="embedded"}else{if(c.isSingleCalendarView(K)){P="singleCalendar"}else{P="spaceCalendars"}}}Confluence.TeamCalendars.fireEventForAnalytics("add.event."+P)};C=b("form[name='event-edit']",N);C.disableOkButton=function(P){var Q=b.extend({buttonText:"Adding..."},P);O.text(Q.buttonText).attr("disabled","disabled").addClass("ui-state-disabled");E(false)};C.enableOkButton=function(P){var Q=b.extend({buttonText:"OK"},P);O.removeAttr("disabled").removeClass("ui-state-disabled").text(Q.buttonText);E(true)};G(N,H);d.disableOkButton=C.disableOkButton;d.enableOkButton=C.enableOkButton;v(N);n();return d},disableOkButton:function(k){d.disableOkButton(k)},enableOkButton:function(k){d.enableOkButton(k)},getSelectedEventType:function(){return this.getSelect(d.popup.element,"event-type").val()},getSelectedSubCalendarId:function(){return this.getSelect(d.popup.element,"calendar").val()},getTextSelectedEventType:function(){return this.getTextSelect(d.popup.element,"event-type")},getTextSelectedSubCalendar:function(){return this.getTextSelect(d.popup.element,"calendar")}});return a});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:event-edit', location = 'com/atlassian/confluence/extra/calendar3/components/manage-event/event-edit/event-field-handlers.js' */
define("tc/event-field-handlers",["jquery","tc/jira-event-field-process","tc/calendar-util"],function(e,f,c){function d(i,g){var h=i instanceof e?i:e(i);h.datepicker(g)}function a(i,g,h){if(/^[1-9]\d*$/.test(g)||g==="0"){if(i==="DAILY"){h.text(parseInt(g)>1?"days":"day")}else{if(i==="WEEKLY"){h.text(parseInt(g)>1?"weeks":"week")}else{if(i==="MONTHLY"){h.text(parseInt(g)>1?"months":"month")}else{if(i==="YEARLY"){h.text(parseInt(g)>1?"years":"year")}}}}}else{h.text("")}}var b={text:function(l,g,i,k,j,h){return{add:function(){g.append(Confluence.TeamCalendars.Templates.Fields.text({id:l.id,label:l.label,required:l.required,readOnly:l.readOnly}))},init:function(){e("#"+l.id+"-text",g).val(i[l.property]||"").keydown(function(){var n=e(this),m=n.val();if(!n.data("valueChangedByUser")){setTimeout(function(){if(m!==n.val()){n.data("valueChangedByUser",true)}},300)}})},setData:function(m){h.getField(g,l.id).val(m)},getData:function(){var m={};m[l.id]=h.getField(g,l.id).val();return m},getElementId:function(){return"#field-text-"+l.id}}},textarea:function(l,g,i,k,j,h){return{add:function(){g.append(Confluence.TeamCalendars.Templates.Fields.textarea({id:l.id,size:l.size,required:l.required,label:l.label,readOnly:l.readOnly}))},init:function(){e("#"+l.id+"-textarea",g).val(i[l.property]||"")},getData:function(){var m={};m[l.id]=e("textarea[name="+l.id+"]",g).val();return m},getElementId:function(){return"#field-textarea-"+l.id}}},page:function(l,g,i,k,j,h){return{add:function(){g.append(Confluence.TeamCalendars.Templates.Fields.page({id:l.id,label:l.label,required:l.required,readOnly:l.readOnly}))},init:function(){e("#"+l.id+"-text",g).val(i[l.property]||"");k.makeAutoCompleteSearch(j,e("input[name='"+l.id+"']",g),{type:["page","blogpost"]},e("."+l.id+"-suggestions",g),function(n,m){n.val(m.attr("href"))})},getData:function(){var n={},m=h.getField(g,l.id);n[l.id]=m.hasClass("with-hint")?"":m.val();return n},getElementId:function(){return"#field-page-"+l.id}}},when:function(l,g,i,k,j,h){return{add:function(){var o,p,m,n;g.append(Confluence.TeamCalendars.Templates.Fields.when({id:l.id,disableStartDateTime:l.disableStartDateTime,disableEndDateTime:l.disableEndDateTime,disableAllDay:l.disableAllDay}));o=h.getField(g,"startTime");p=h.getField(g,"endTime");m=h.getField(g,"allDayEvent");n=k.getParameter(j,"timeSuggestion");o.autocompleteTC({source:n,minLength:2});p.autocompleteTC({source:n,minLength:2});m.click(function(){if(this.checked){o.addClass("hidden");p.addClass("hidden")}else{o.removeClass("hidden");p.removeClass("hidden");if(!o.val()){o.val(k.getDefaultStartTime(j))}if(!p.val()){p.val(k.getDefaultEndTime(j))}}})},init:function(){e(".start, .end",g).each(function(){var q=e(this);d(q,{dateFormat:"ddmmyy",dayNames:k.getDayNames(),dayNamesMin:k.getDayNamesShort(),dayNamesShort:k.getDayNamesShort(),firstDay:k.getParameter(j,"firstDayOfWeek"),monthNames:k.getMonthNames(),monthNamesShort:k.getMonthNamesShort(),beforeShow:function(){e("#ui-datepicker-div").addClass("tc-datepicker")},onClose:function(){e("#ui-datepicker-div").removeClass("tc-datepicker")},onSelect:function(v){var t=e.datepicker.parseDate("ddmmyy",v);if(q.hasClass("start")){var s=e(".end",g),u=new Date(parseInt(q.data("date"))),r=new Date(s.data("date")-(u.getTime()-t.getTime()));s.datepicker("option","defaultDate",r);s.datepicker("setDate",r);s.data("date",r.getTime()).val(function(){k.formatDate(j,r,"date",function(w){s.val(w)});return "Formatting..."})}q.datepicker("option","defaultDate",t);q.datepicker("setDate",t);q.data("date",t.getTime()).val(function(){k.formatDate(j,t,"date",function(w){q.val(w)});return "Formatting..."})},showAnim:""})});var o=h.getField(g,"startTime"),p=h.getField(g,"endTime"),m=h.getField(g,"allDayEvent"),n=function(r,q,t){var s=e("input[name="+r+"]",g);s.datepicker("option","defaultDate",q);s.datepicker("setDate",q);s.data("date",q.getTime()).val(t||function(){k.formatDate(j,q,"date",function(u){s.val(u)});return "Formatting..."})};i.start&&n("startDate",i.start,i.localizedStartDate);n("endDate",i.end||i.start,i.localizedEndDate);if(i.allDay){o.val("").addClass("hidden");p.val("").addClass("hidden");m.attr("checked","checked")}else{o.val(i.originalStartTime||i.localizedStartTime||function(){k.formatDate(j,i.start,"time",function(q){o.val(q)});return "Formatting..."}).removeClass("hidden");p.val(i.originalEndTime||i.localizedEndTime||function(){k.formatDate(j,i.end||new Date(i.start.getTime()+3600000),"time",function(q){p.val(q)});return "Formatting..."}).removeClass("hidden");m.removeAttr("checked","checked")}},getData:function(){return{startDate:h.getField(g,"startDate").val(),startTime:h.getField(g,"startTime").val(),endDate:h.getField(g,"endDate").val(),endTime:h.getField(g,"endTime").val(),allDayEvent:h.getField(g,"allDayEvent").is(":checked")}},getElementId:function(){return"#field-when"}}},repeats:function(l,g,i,k,j,h){return{add:function(){var p,t,s,n,m,o,r;g.append(Confluence.TeamCalendars.Templates.Fields.repeats({id:l.id}));p=e("select[name='calendar']",g);t=e("select[name='freq-select']",g);s=e("input[name='interval']",g);n=e(".recur-ends",g);m=e(".recur-ends-never",n);o=e(".recur-ends-until",n);r=e("input[name='until']",n);var q=function(v,u,x){var w=e("input[name="+v+"]",g);w.datepicker("option","defaultDate",u);w.datepicker("setDate",u);w.data("date",u.getTime()).val(x)};e("input[name='editthisinstanceonly']",g).change(function(){if(e(this).is(":checked")){h.disableCalSelect();h.showToolTip();p.attr("disabled","disabled");t.attr("disabled","disabled");s.attr("readonly","readonly");m.attr("disabled","disabled");o.attr("disabled","disabled");r.attr("readonly","readonly").datepicker("disable");q("startDate",i.start,i.localizedStartDate);q("endDate",i.end||i.start,i.localizedEndDate)}else{h.enableCalSelect();h.hiddenToolTip();t.removeAttr("disabled");s.removeAttr("readonly");if(e("option:selected",t).val()){m.removeAttr("disabled");o.removeAttr("disabled");if(o.is(":checked")){r.removeAttr("readonly").datepicker("enable")}else{r.datepicker("disable")}}var v=e.datepicker.parseDate("yy-mm-dd",i.originalStartDateTime.split("T")[0]);var u=e.datepicker.parseDate("yy-mm-dd",i.originalEndDateTime.split("T")[0]);q("startDate",v,i.localizedOriginalStartDate);q("endDate",u,i.localizedOriginalEndDate)}});t.change(function(){var x=e("option:selected",this).val();var u=e("input[name='freq']",g);var v=e("input[name='byday']",g);var w=e(".interval-container",g);if(x){if(x==="WEEKLY-BYDAY"){s.attr("readonly","readonly").val("1");w.addClass("hidden");u.val("WEEKLY");v.val("MO,TU,WE,TH,FR")}else{s.removeAttr("readonly").val("1");w.removeClass("hidden");u.val(x);v.val("")}n.removeClass("hidden");m.removeAttr("disabled");if(o.removeAttr("disabled").is(":checked")){r.removeAttr("disabled").removeAttr("readonly")}}else{s.val("1");w.addClass("hidden");n.addClass("hidden");m.attr("disabled","disabled");o.attr("disabled","disabled");r.val("").attr("disabled","disabled").attr("readonly","readonly");u.val("");v.val("")}s.trigger("keydown")});s.keydown(function(){setTimeout(function(){var w=e("option:selected",t).val();var v=e(".interval-label",g);var u=e.trim(s.val());a(w,u,v)},300)});e(".recur-ends-never",g).click(function(){r.val("").attr("disabled","disabled").attr("readonly","readonly").datepicker("disable")});e(".recur-ends-until",g).click(function(){r.removeAttr("disabled","disabled").removeAttr("readonly").datepicker("enable")})},init:function(){var m=e(".recur-ends .datepicker-field",g);d(m,{dateFormat:"ddmmyy",dayNames:k.getDayNames(),dayNamesMin:k.getDayNamesShort(),dayNamesShort:k.getDayNamesShort(),firstDay:k.getParameter(j,"firstDayOfWeek"),monthNames:k.getMonthNames(),monthNamesShort:k.getMonthNamesShort(),beforeShow:function(){e("#ui-datepicker-div").addClass("tc-datepicker")},onClose:function(){e("#ui-datepicker-div").removeClass("tc-datepicker")},onSelect:function(r){var q=e(this),p=e.datepicker.parseDate("ddmmyy",r);q.datepicker("option","defaultDate",p);q.datepicker("setDate",p);q.data("date",p.getTime()).val(function(){k.formatDate(j,p,"date",function(s){q.val(s)});return "Formatting..."})},showAnim:""});var n=function(p){return !p.id};var o=function(){h.getField(g,"recurrenceId").val(i.recurId||"");var v=h.getField(g,"freq").val("");var D=h.getField(g,"byday").val("");var t=h.getField(g,"interval").val("1").attr("readonly","readonly");var w=t.closest(".interval-container");var z=h.getSelect(g,"freq-select");e("option",z.attr("disabled","disabled")).removeAttr("selected");var A=h.getField(g,"editthisinstanceonly");var E=A.closest(".edit-this-instance-only-container");var B=e(".recur-ends",g);var C=h.getField(g,"recur-end").removeAttr("checked").attr("disabled","disabled");var u=h.getField(g,"until").attr("disabled","disabled").attr("readonly","readonly").val("");u.datepicker("disable");if(!n(i)&&i.recur){h.disableCalSelect();h.showToolTip();E.removeClass("hidden");A.attr("checked","checked");var q=i.recur.freq;var y=i.recur.byDay;var r=i.recur.interval;B.removeClass("hidden");v.val(q||"");D.val(y||"");if(y){e("option[value='WEEKLY-BYDAY']",z).attr("selected","selected");w.addClass("hidden")}else{e("option[value='"+q+"']",z).attr("selected","selected");w.removeClass("hidden");t.val(r||"1")}var x=e(".interval-label",g);a(q,r,x);var p=i.recur.until;if(p){e(C[1]).attr("checked","checked");u.removeAttr("disabled");var s=e.fullCalendar.parseDate(p);u.datepicker("setDate",s);u.datepicker("option","defaultDate",s);u.val(i.recur.localizedUntil||function(){k.formatDate(j,s,"date",function(F){u.val(F)});return "Formatting..."})}else{e(C[0]).attr("checked","checked")}}else{if(n(i)&&i.recur){z.removeAttr("disabled");z.val(i.recur.freq).change();e(C[0]).attr("checked","checked")}else{h.enableCalSelect();h.hiddenToolTip();E.addClass("hidden");e("option:first",z.removeAttr("disabled")).attr("selected","selected");w.addClass("hidden");B.addClass("hidden");e(C[0]).attr("checked","checked")}}};o()},getData:function(){var m=h.getField(g,"until");return{freq:h.getField(g,"freq").val(),byday:h.getField(g,"byday").val(),interval:h.getField(g,"interval").val()||"",until:m.val(),repeatEnds:!(m.attr("readonly")||m.attr("disabled")),recurrenceId:h.getField(g,"recurrenceId").val(),editAllInRecurrenceSeries:!h.getField(g,"editthisinstanceonly").is(":checked")}},getElementId:function(){return"#field-repeats"}}},user:function(l,g,i,k,j,h){return{add:function(){g.append(Confluence.TeamCalendars.Templates.Fields.user({id:l.id,label:l.label,required:l.required}));Confluence.runBinderComponents()},init:function(){var o=e(".invitees",g),n=function(){e(this).closest("li").remove();if(!e("li",o).length){o.addClass("hidden")}},m=function(){e(".invitee-left",o).filter(function(){return !e(this).attr("threedots")}).ThreeDots({max_rows:1,text_span_class:"invitee-name-display",whole_word:false})};e("#"+l.id+"-user-picker",g).bind("selected.autocomplete-user",function(t,r){var q=r.content.userKey||r.content.username,p,u=e(".invitee",o).filter(function(){return e(this).data("entity").id===q}).length>0;if(!u){if(e("li",o).length===3){o.addClass("boxed")}p=e(Confluence.TeamCalendars.Templates.Fields.userSelection({fullName:r.content.title,userName:r.content.username,imgPath:r.content.thumbnailLink.href}));p.data("entity",{id:q,displayName:r.content.title}).find(".delete-invitee").click(n);o.prepend(p).removeClass("hidden");m()}e(this).val("").focus();var s=e(".who-error",g);if(s.children().length){s.empty()}});if(i.invitees&&i.invitees.length){e.each(i.invitees,function(q,p){o.append(e(Confluence.TeamCalendars.Templates.Fields.userSelection({fullName:p.displayName,userName:p.name,imgPath:p.avatarIconUrl})).data("entity",{id:p.id,displayName:p.displayName}))});e(".delete-invitee",o.removeClass("hidden")).unbind("click").click(n);m()}},getData:function(){var m={};var n=e(".invitee",g);if(n.length){m.person=e.map(n,function(o){return e(o).data("entity").id})}if(l.setTitle){m.what=n.length?e.map(n,function(o){return e(o).data("entity").displayName}).join(", "):""}return m},getElementId:function(){return"#field-user-"+l.id}}},getEventField:function(s,n,g,v,u,i,k){var q=b[s.type](s,n,g,v,u,i);var j=e(q.getElementId(),n);if(j.length){if(s.required){var r=j.find("label:first span.icon-required");if(r.length===0){j.find("label:first").append(e("<span/>",{"class":"aui-icon icon icon-required"}))}}else{j.find("label:first span.icon-required").remove()}n.append(j.show());if(s.type==="repeats"){var h=e("select[name='freq-select']",n);var p=e("input[name='interval']",n);var t=e("input[name=until]",n);var m=!(t.attr("readonly")||t.attr("disabled"));var l=e("input[name=recur-end]",n);if(s.defaultRecur){j.data("repeatData",{repeat:h.val(),interval:p.val(),repeatEnd:m,until:t.val()});h.val("YEARLY").change()}else{var o=j.data("repeatData");if(o){h.val(o.repeat).change();p.val(o.interval);if(o.repeatEnd&&o.repeatEnd==true){e(l[1]).attr("checked","checked");t.removeAttr("readonly").val(o.until).datepicker("enable")}else{e(l[0]).attr("checked","checked")}j.removeData("repeatData")}}}}else{q.add();q.init()}if(s.copyto&&k!==undefined){q.setData(k)}return q},reminder:function(l,g,i,k,j,h){return{add:function(){var n=k.getCurrentReminderForEventType(j,h);e(g).find("#field-text-"+l.id).remove();var m=n&&n.periodInMins>0;g.append(Confluence.TeamCalendars.Templates.Fields.inforReminderLabel({id:l.id,label:l.label,reminderPeriodText:m?AJS.format("{0} before",c.showInforReminder(n.periodInMins)):"None.",reminderPeriod:m?n.periodInMins:0}))},init:function(){},getData:function(){return{}},getElementId:function(){return""}}},"jira-hidden-fields":function(l,g,i,k,j,h){return{add:function(){g.append(Confluence.TeamCalendars.Templates.hiddenJiraFields())},init:function(){var n=f.getSubCalendarForEvent(k,j,i),m=k.getRenderedMacroCallbackHandler(j),o=Confluence.TeamCalendars.getEditCalendarDialogHelper(g,n,m);if(!n||!n.id){o.setSubCalendarIdField("");o.setNameField("");o.setColorField("");o.setSpaceToDefault()}else{o.setSubCalendarIdField(n.id);o.setNameField(n.name);o.setColorField(n.color);o.setSpaceKeyField(n.spaceKey)}},getData:function(){}}},"jira-server-select":function(l,g,i,k,j,h){return{add:function(){g.append(Confluence.TeamCalendars.Templates.Fields.serverSelector());f.getServerSelect(g).disable()},init:function(){var n=f.getServerSelect(g),o=e(".field-group-jira-server .spinner");AJS.unbind("server-select-ready.teamcalendars");AJS.unbind("server-select-change.teamcalendars");function m(q){var p=f.getSubCalendarForEvent(k,j,i);e.each(q.jiraLinks,function(r,s){var t=e("<option/>",{value:s.id,text:s.name,"data-display-url":s.displayUrl});if(q.jiraLinks.length===1){t.prop("selected",true);var u=n.parent();u.children().hide();u.css("min-height",0);e(".oauth-error",u).show()}t.appendTo(n)});if(q.jiraLinks.length>1){e(".field-group-jira-server",g).removeClass("hidden")}if(p){if(p.applicationId){n.val(p.applicationId)}else{if(p.sourceSubCalendar&&p.sourceSubCalendar.applicationId){n.val(p.sourceSubCalendar.applicationId)}}}}n.change(function(){AJS.trigger("server-select-change.teamcalendars",g)});e.ajax({cache:false,error:function(p,r,q){k.showAjaxError(g.parent().parent(),p,r,q)},success:function(p){m(p);AJS.trigger("server-select-ready.teamcalendars",g)},complete:function(){n.enable();o.hide()},timeout:Confluence.TeamCalendars.ajaxTimeout,url:Confluence.TeamCalendars.getCalendarServiceBaseUrl("/jiraLinks")})},getData:function(){}}},"jira-project-select":function(l,g,i,k,j,h){return{add:function(){g.append(Confluence.TeamCalendars.Templates.Fields.projectSelector());e(".tc-jira-project",g).disable()},init:function(){function m(n){if(n.id===g[0].id){e(".oauth-approve",g).remove();f.populateProjectList(l,g,i,k,j,h)}}AJS.bind("server-select-ready.teamcalendars",function(o,n){m(n)});AJS.bind("server-select-change.teamcalendars",function(o,n){m(n)})},getData:function(){}}},"jira-dates":function(l,g,i,k,j,h){return{add:function(){g.append(Confluence.TeamCalendars.Templates.editJiraCalendar())},init:function(){AJS.bind("server-select-ready.teamcalendars",function(){f.initJiraDate(l,g,i,k,j,h)});AJS.bind("server-select-change.teamcalendars",function(){f.initJiraDate(l,g,i,k,j,h)})},getData:function(){}}}};return b});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:event-edit', location = 'com/atlassian/confluence/extra/calendar3/components/manage-event/event-edit/event-types.js' */
define("tc/event-types",["jquery","tc/jira-event-field-process"],function(c,d){var b={fields:[{type:"user",id:"who",label:"Who",required:true,property:"what",setTitle:true},{type:"when",id:"people"},{type:"repeats",id:"people"},{type:"reminder",id:"reminder",label:"Reminder"},{type:"text",id:"description",property:"description",label:"Summary",copyto:"what"},{type:"page",id:"url",property:"workingUrl",label:"Related page"}]};var a={DefaultEventType:{travel:c.extend({},b,{id:"travel",name:"Travel"}),leaves:c.extend({},b,{id:"leaves",name:"Leave"}),birthdays:c.extend(true,{},b,{id:"birthdays",name:"Birthdays",fields:[{},{},{defaultRecur:{freq:"YEARLY"}}]}),jira:{id:"jira",name:"JIRA Issue Dates",hiddenFromEventCreation:true,fields:[{type:"text",id:"what",property:"title",label:"What",required:true,readOnly:true},{type:"when",id:"simple",disableEndDateTime:true,disableAllDay:true},{type:"reminder",id:"reminder",label:"Reminder"},{type:"page",id:"url",property:"workingUrl",label:"Related page",readOnly:true},{type:"textarea",id:"description",property:"description",label:"Description",size:5,readOnly:true}]},"jira-agile-sprint":{id:"jira-agile-sprint",name:"JIRA Agile Sprints",hiddenFromEventCreation:true,fields:[{type:"text",id:"what",property:"title",label:"What",required:true,readOnly:true},{type:"when",id:"simple",disableEndDateTime:true,disableAllDay:true},{type:"reminder",id:"reminder",label:"Reminder"},{type:"page",id:"url",property:"workingUrl",label:"Related page",readOnly:true},{type:"textarea",id:"description",property:"description",label:"Description",size:5,readOnly:true}]},"jira-project-releases":{id:"jira-project-releases",name:"JIRA Project Releases",hiddenFromEventCreation:true,fields:[{type:"text",id:"what",property:"title",label:"What",required:true,readOnly:true},{type:"when",id:"simple",disableEndDateTime:true,disableAllDay:true},{type:"reminder",id:"reminder",label:"Reminder"},{type:"page",id:"url",property:"workingUrl",label:"Related page",readOnly:true},{type:"textarea",id:"description",property:"description",label:"Description",size:5,readOnly:true}]},other:{id:"other",name:"Events",fields:[{type:"text",id:"what",property:"title",label:"What",required:true,copyto:"description"},{type:"user",id:"who",label:"Who",property:"what"},{type:"when",id:"simple"},{type:"repeats",id:"simple"},{type:"reminder",id:"reminder",label:"Reminder"},{type:"text",id:"where",property:"where",label:"Where"},{type:"page",id:"url",property:"workingUrl",label:"Related page"},{type:"textarea",id:"description",property:"description",label:"Description",size:5}]},"jira-calendar":{id:"jira-calendar",name:"JIRA Issue Dates",customHandler:d.CustomSubmitter.JiraIssues,hiddenFromEventCreation:!Confluence.TeamCalendars.hasJiraLink,fields:[{type:"jira-server-select",id:"server",property:"server",label:"Server",required:true},{type:"text",id:"name",property:"name",required:true,label:"Name"},{type:"reminder",id:"reminder",label:"Reminder"},{type:"jira-dates",id:"jira-dates"}]},"jira-agile-sprint-calendar":{id:"jira-agile-sprint-calendar",name:"JIRA Agile Sprints",customHandler:d.CustomSubmitter.JiraAgileSprints,hiddenFromEventCreation:!Confluence.TeamCalendars.hasJiraLink,fields:[{type:"jira-hidden-fields",id:"",property:"",required:true,label:""},{type:"jira-server-select",id:"server",property:"server",label:"Server",required:true},{type:"jira-project-select",id:"project",property:"project",label:"Project",required:true},{type:"text",id:"name",property:"title",required:true,label:"Name"},{type:"reminder",id:"reminder",label:"Reminder"}]},"jira-project-releases-calendar":{id:"jira-project-releases-calendar",name:"JIRA Project Releases",customHandler:d.CustomSubmitter.JiraProjectReleases,hiddenFromEventCreation:!Confluence.TeamCalendars.hasJiraLink,fields:[{type:"jira-hidden-fields",id:"",property:"",required:true,label:""},{type:"jira-server-select",id:"server",property:"server",label:"Server",required:true},{type:"jira-project-select",id:"project",property:"project",label:"Project",required:true},{type:"text",id:"name",property:"title",required:true,label:"Name"},{type:"reminder",id:"reminder",label:"Reminder"}]}},CustomEventType:{id:"custom",name:"Event",fields:[{type:"text",id:"what",property:"title",label:"What",required:true,copyto:"description"},{type:"user",id:"who",label:"Who",property:"what"},{type:"when",id:"simple"},{type:"repeats",id:"simple"},{type:"reminder",id:"reminder",label:"Reminder"},{type:"text",id:"where",property:"where",label:"Where"},{type:"page",id:"url",property:"workingUrl",label:"Related page"},{type:"textarea",id:"description",property:"description",label:"Description",size:5}]}};return a});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:event-edit', location = 'com/atlassian/confluence/extra/calendar3/components/manage-event/event-edit/jira-event-field-process.js' */
define("tc/jira-event-field-process",["jquery","tc/calendar-util"],function(c,a){function e(j,f,i,k,h){function g(){if(!c("input[name='subCalendarId']",f).val()){Confluence.TeamCalendars.fireEventForAnalytics("event.create.default."+j.type+".context."+i.getParameter("calendarContext"),{})}}if(i.isProcessingSubCalendar()){return false}i.setSubCalendarSpinnerIconVisible(true);g();if(i.getIncludedCalendars()){j.include=i.getIncludedCalendars()}var l=j.subCalendarId;a.putCalendarContextParams(j);c.ajax({cache:false,converters:{"text json":function(m){return m}},data:j,dataFilter:function(m){var n=c.parseJSON(m);if(n.success){Confluence.TeamCalendars.mergeSubCalendarObjectsToArray(n.payload)}return n},dataType:"json",error:function(m,o,n){i.showAjaxUpdateError(m,o,n);i.setSubCalendarSpinnerIconVisible(false);k()},success:function(n){i.setGenericUpdateError();if(n.success){Confluence.TeamCalendars.setFieldErrors(f,null);var m=l;if(m){i.setSubCalendars(l,n.payload);i.reloadSubCalendar(l)}else{l=n.modifiedSubCalendarId;i.setSubCalendars(l,n.payload)}h();i.setSubCalendarSpinnerIconVisible(false);if(!n.modifiedSubCalendarId&&i.shouldShowFeatureDiscoveryDialog(l)){i.getSubCalendarFeatureDiscoveryDialog(l)}}else{Confluence.TeamCalendars.setFieldErrors(f,n.fieldErrors);i.setSubCalendarSpinnerIconVisible(false);k()}},type:"PUT",timeout:Confluence.TeamCalendars.ajaxTimeout,url:Confluence.TeamCalendars.getCalendarServiceBaseUrl("/subcalendars.json")});return false}function b(f,g,i,j,h){return{type:h,parentId:i,subCalendarId:c("input[name='subCalendarId']",f).val(),name:g,description:"",color:c("input[name='color']",f).val(),location:"jira://".concat(encodeURIComponent(d.getServerSelect(f).val()||""),"?projectKey=",encodeURIComponent(c("select[name='tc-jira-project'] option:selected",f).val()),"&dateFieldName=",j)}}var d={getServerSelect:function(f){return c(".tc-jira-server",f)},getJiraOptions:function(f,h,g){c.ajax({cache:false,dataType:"json",error:function(i,k,j){f(i,k,j)},success:function(i){h(i);var j=AJS.format("We didn\'\'t find any projects. \u003ca href=\"{0}\" target=\"_blank\"\u003eCreate a JIRA project\u003c/a\u003e before continuing.",c(".tc-jira-server option:selected").data("display-url"));c(".option-project .unavailable-message").html(j)},timeout:Confluence.TeamCalendars.ajaxTimeout,url:Confluence.getBaseUrl()+"/rest/calendar-services/1.0/jira/"+encodeURIComponent(g)+"/query/options.json"})},getSubCalendarForEvent:function(h,g,f){if(f.eventType==="jira-calendar"||f.eventType==="jira-agile-sprint-calendar"||f.eventType==="jira-project-releases-calendar"){return h.getSubCalendar(g,f.subCalendarId)}return null},showOauthRequitedMessage:function(j,g,i,l,k){var h=c.parseJSON(j.responseText);var f=c(".oauth-error",g).empty().removeClass("hidden");i.disableOkButton({buttonText:"OK"});c(document.createElement("div")).addClass("oauth-approve aui-message hint").html(AJS.format("\u003cp class=\"title\"\u003e\u003cspan class=\"aui-icon aui-icon-info\"\u003e\u003c/span\u003e\u003c/p\u003e\u003cp class=\"info-approve\"\u003e\u003ca href=\"#\" class=\"approve-dance\"\u003e{0}\u003c/a\u003e to see list of projects\u003c/p\u003e",c(document.createElement("span")).text("Login & Approve").html())).appendTo(f).find(".approve-dance").click(function(){AppLinks.authenticateRemoteCredentials(h.oAuthUrl,function(){l.removeClass("hidden");f.addClass("hidden");i.enableOkButton();k()},function(){alert("Approval unsuccessful. Could you please try again?")});return false})},populateProjectList:function(m,j,g,p,o,i){var l=c(".tc-jira-project",j),n=c(".field-group-jira-project .spinner"),f=i.getSelectedEventType(),h=d.getServerSelect().val(),k=function(){var s=c("input[name='name']",j),q=d.getSubCalendarForEvent(p,o,g),r=function(t){if(!s.data("valueChangedByUser")){return t}return s.val()};if(!q){if(f==="jira-agile-sprint-calendar"){s.val(r(AJS.format("{0} - Sprints",c("option:selected",l).text())))}else{if(f==="jira-project-releases-calendar"){s.val(r(AJS.format("{0} - Releases",c("option:selected",l).text())))}}}};l.change(k).disable();n.show();d.getJiraOptions(function(q,s,r){n.hide();if(Confluence.TeamCalendars.isRequireOauth(q)){l.empty();d.showOauthRequitedMessage(q,j,i,l,function(){d.populateProjectList(h)})}else{l.enable();p.showAjaxError(j.parent().parent(),q,s,r)}},function(q){var s=q.projects,t=l.empty(),r=d.getSubCalendarForEvent(p,o,g);n.hide();l.enable();c.each(s,function(u,v){c(document.createElement("option")).val(v.key).text(v.name).appendTo(t)});if(r){t.val(r.projectKey)}else{k()}},h)},initJiraDate:function(q,n,h,u,t,m){var p=d.getSubCalendarForEvent(u,t,h),j=u.getRenderedMacroCallbackHandler(t),r=c("select[name='project']",n),s=function(){if(!p){var v=c("input[name='name']",n);v.val(function(){if(!v.data("valueChangedByUser")){return c("option:selected",r).val()?AJS.format("{0} - Issues",c("option:selected",r).text()):""}return v.val()});o()}};r.off("change").on("change",s);var o=function(){c(".project-error",n).empty();c(".name-error",n).empty();c(".dateFieldName-error",n).empty()};var k=function(w){var v=c(".field-group-jira-show",n);if(w){v.css("display","none")}else{v.css("display","block")}};var l=function(){var B=c(".form-mode",n),w=d.getServerSelect(n),v=c(".jira-query-options .option-project",n),z=c("select[name='project']",v),y=c(".timeZoneIdDisplay",n),x=Confluence.TeamCalendars.getEditCalendarDialogHelper(n,p,j);Confluence.TeamCalendars.setFieldErrors(n,null);c("input[name='searchFilterName']",n).addClass("with-hint").val("Search filter");c("textarea[name='jql']",n).addClass("with-hint").val("JQL query");if(!p||!p.id){x.setFormModeCreate();x.setSubCalendarIdField("");x.setNameField("");x.setDescriptionField("");x.setColorField("");x.setSpaceToDefault();x.setTimeZoneIdDisplayField("");y.hide();i(null,function(){f(function(){s()})})}else{x.setFormModeEdit();x.setSubCalendarIdField(p.id);x.setNameField(p.name);x.setDescriptionField(p.description);x.setColorField(p.color);x.setSpaceKeyField(p.spaceKey);x.setSpaceKeyAutocompleteField(p.spaceName);i(null,function(){var H=c(".jira-query-options",n),I="option-project-selected option-search-filter-selected option-jql-selected",D;c(".matrix input.radio",H).removeAttr("checked");var L=p.sourceSubCalendar||p;if(L.projectKey){var K=false;c("option",z).removeAttr("selected").each(function(){var M=c(this);if(M.val()===L.projectKey){M.attr("selected","selected");K=true;return false}});if(!K){z.append(c(document.createElement("option")).val(L.projectKey).text(L.projectName||L.projectKey).attr("selected","selected"))}c(".radio-project input.radio",H.removeClass(I).addClass("option-project-selected")).attr("checked","checked");D=v.data("hiddenDateFields")}else{if(L.searchFilterId){var E=c(".option-search-filter",H);var G=c("input[name='searchFilterName']",E);c("input[name='searchFilter']",E).val(L.searchFilterId);var C=L.searchFilterName||L.searchFilterId;var F=c(G).data("searchFilters");if(F){C=c.map(F,function(M){if(M.id===L.searchFilterId&&M.name.length>0){return M.name}})}c(G).removeClass("with-hint").val(C);c(".radio-search-filter input.radio",H.removeClass(I).addClass("option-search-filter-selected")).attr("checked","checked");D=E.data("hideDateFields")}else{if(L.jql){var J=c(".option-jql",H);c("textarea[name='jql']",J).removeClass("with-hint").val(L.jql);c(".radio-jql input.radio",H.removeClass(I).addClass("option-jql-selected")).attr("checked","checked")}}}f(function(){var N=c(".field-group-jira-show .single-dates .date-fields div.checkbox",n),M={},O=L.dateFieldNames||[];c(".date-fields input",n).removeAttr("checked");N.each(function(){var Q=c("input",this),P=Q.val();if(c.inArray(P,O)!==-1){Q.attr("checked","checked")}M[P]=c("label",this).text()});c.each(L.durations||[],function(P,V){var Q=M[V.startDateFieldName||""],U=M[V.endDateFieldName||""];if(Q&&U){var T=c(".field-group-jira-show .duration .date-fields",n),S=V.startDateFieldName+"/"+V.endDateFieldName,R="duration-"+S;c("<div/>",{"class":"checkbox"}).append(c("<input/>",{id:R,name:"dateFieldName",type:"checkbox",value:S,checked:"checked"})).append(c("<label/>",{"for":R,html:AJS.format("Start: {0}",c("<span/>",{text:Q}).html())+"<br>"+AJS.format("End: {0}",c("<span/>",{text:U}).html())})).appendTo(T);T.parent().addClass("has-selected-duration")}});if(D){k(D)}})});y.text(p.timeZoneId)}var A=c("input[name='name'], input[name='description'], input[name='spaceKeyAutocomplete'], input[name='searchFilterName'], textarea[name='jql']",n);if(j.isCalendarInEditMode()){A.removeAttr("readonly");w.removeAttr("disabled");z.removeAttr("disabled")}else{B.removeClass().addClass("form-mode read-only");A.attr("readonly","readonly");w.attr("disabled","disabled");z.attr("disabled","disabled")}};var g=function(){c("select[name='server']",n).change(function(){var x=c("select[name='server'] option:selected",n);if(x.length&&x.val()){i(null,function(){f()})}});c("input[name='spaceKeyAutocomplete']",n).bind("selected.autocomplete-content",function(y,x){c("input[name='spaceKey']",n).val(x.content.key);c(this).val(x.content.name);c(".spaceKeyAutocomplete-error",n).empty()});c(".jira-query-options .query-group input.radio",n).off("change").on("change",function(){var z=c(this).val(),y=c(".jira-query-options",n).removeClass("option-project-selected option-search-filter-selected option-jql-selected").addClass(z+"-selected"),x=c("."+z,y);c("input",x).focus(function(){var A=c(this);if(A.hasClass("with-hint")){A.removeClass("with-hint").val("")}});if("option-jql"===z){c("textarea",x).trigger("keydown",[true])}f(function(){k(x.data("hideDateFields")||!c(".option-value",x).val());var A=c(".duration",n);if(c(".date-fields",A).children().length){A.addClass("has-selected-duration")}else{A.removeClass("has-selected-duration")}})});var w=c(".option-search-filter",n);var v=c(".search-filter-suggestions",w);c("input[name='searchFilterName']",w).keydown(function(){var x=c(this);var y=x.val();setTimeout(function(){var A=x.val();if(!A||A!==y){v.empty()}if(A!==y){A=A.toLowerCase();var C=c.grep(x.data("searchFilters")||[],function(D){return D.name.toLowerCase().indexOf(A)!==-1});if(C.length){var z=c(document.createElement("div")).addClass("dropdown-container").append(c(document.createElement("div")).addClass("aui-dd-parent").append(c(document.createElement("a")).addClass("aui-dd-trigger").attr("href","#").text("Show autocomplete")).append(c(document.createElement("ul")).addClass("aui-dropdown")));var B=c(".aui-dropdown",z).appendTo(c(".aui-dd-parent",z));c.each(C,function(E,D){var F=c(document.createElement("li")).append(c(document.createElement("a")).attr("href","#").text(D.name)).data("searchFilter",D).appendTo(B).click(function(){x.val(D.name);c("input[name='searchFilter']",w).val(D.id);c(".error",w).empty();f()});if(D.description){F.attr("title",D.description)}});z.appendTo(v).dropDown("Standard",{alignment:"left"});v.removeClass("hidden")}}},300)});c("select[name='project']",n).change(function(){f()});c(".jira-query-options input[name='searchFilterName']",n).keydown(function(y){var B=y.keyCode;var x=c(this);if(!(B===38||B===40||B===13)){setTimeout(function(){n.click();var D=x.val().toLowerCase();if(D){var C=x.data("searchFilters");if(C&&c.isArray(C)){var E=c(".search-filter-suggestions .aui-dropdown li",n).each(function(){var F=c(this);if(F.data("searchFilter").name.toLowerCase().indexOf(D)===-1){F.addClass("hidden")}else{F.removeClass("hidden")}});if(E.filter(function(){return !c(this).hasClass("hidden")}).length){c(".search-filter-suggestions .aui-dd-trigger",n).trigger("click")}}}},300)}else{if(B===13){y.preventDefault();var A=c(".search-filter-suggestions .aui-dropdown li.active",n);if(A.length){var z=A.data("searchFilter");x.val(z.name);c("input[name='searchFilter']",n).val(z.id);c(".option-search-filter .error",n).empty();n.click();f()}}}});c(".add-duration",n).unbind().click(function(){AJS.log("Open Jira Duration Dialog");var z=new AJS.Dialog({height:423,width:520,id:"add-jira-duration-dialog"});z.addHeader("Add duration between issue dates");z.addPanel("",Confluence.TeamCalendars.Templates.editJiraSubCalendarDurations(),"calendar-dialog-panel");var E=z.getCurrentPanel().body,D=c(".field-group-jira-show .duration .date-fields",n),B=c(".field-group-jira-show .single-dates .date-fields",n);z.addSubmit("Add",function(){var I=c(".duration-start select option:selected",E),G=c(".duration-end select option:selected",E),H=I.val()+"/"+G.val(),K=c("div.checkbox",D).filter(function(){return c("input",this).val()===H});if(K.length){c("input",K).attr("checked","checked")}else{var J="duration-"+H;c("<div/>",{"class":"checkbox"}).append(c("<input/>",{id:J,type:"checkbox",name:"dateFieldName",value:H,checked:"checked"})).append(c("<label/>",{"for":J,html:AJS.format("Start: {0}",I.html())+"<br>"+AJS.format("End: {0}",G.html())})).prependTo(D);D.parent().addClass("has-selected-duration")}z.remove();m.show()});z.addCancel("Cancel",function(){z.remove();m.show()});var y=c.map(c("div.checkbox",B).filter(function(){return c(this).data("mappableAsDuration")}),function(G){return c("<option/>",{value:c("input",G).val(),text:c("label",G).text()})}),A=c(".duration-start select",E),F=c(".duration-end select",E),x=function(H,G){var I=z.popup.element.find(".button-panel-submit-button");if(G&&H&&G!==H){I.prop("disabled",false).removeClass("ui-state-disabled")}else{I.prop("disabled",true).addClass("ui-state-disabled")}};c.each(y,function(H,G){c(G).appendTo(A).clone().appendTo(F)});if(!y.length){c(".duration-fields",E).addClass("hidden");c(".add-fields",c(".no-selectable-date-fields",E).removeClass("hidden")).html(AJS.format("If you are a JIRA administrator, you \u003ca href=\"{0}/secure/admin/ViewCustomFields.jspa\" target=\"_blank\"\u003ecan create custom date fields\u003c/a\u003e and they will appear as options for issue start and end dates.",c(".field-group-jira-server select option:checked",n).data("display-url")))}var C=function(G,I){var H=c("option:selected",I).val();c("option",I).filter(function(){return c(this).val()}).remove();c.each(y,function(K,J){if(J.val()!==G){J.clone().appendTo(I)}});c("option",I).removeAttr("selected").filter(function(){return c(this).val()===H}).attr("selected","selected")};A.change(function(){var G=c("option:selected",this).val();C(G,F);x(G,c("option:selected",F).val())});F.change(function(){var G=c("option:selected",this).val();C(G,A);x(G,c("option:selected",A).val())});m.hide();x();z.show();return false});c(".subcalendar-cancel",n).click(function(){m.remove();return false});return n};var i=function(z,D){var A=c(".jira-query-options",n);var C=c(".query-group input.radio",A).attr("disabled","disabled").removeAttr("checked","checked");var v=c(".field-group .project-select-label",A);var y=c(".query-group",A);var F=c(".compatibility-group, .field-group-jira-show",A);var x=c(".form-mode",n).addClass("jira-query-options-loading");var w=d.getServerSelect(n).val();var B=function(G,I,H){x.removeClass("jira-query-options-loading");y.addClass("hidden");v.removeClass("hidden");F.addClass("hidden");if(Confluence.TeamCalendars.isRequireOauth(G)){d.showOauthRequitedMessage(G,n,m,F,l)}else{if(z&&c.isFunction(z)){z(G,I,H)}}};var E=function(I){F.removeClass("hidden");x.removeClass("jira-query-options-loading");C.removeAttr("disabled","disabled");if(!I.searchRequests){c(".radio-search-filer input",n).attr("disabled","disabled")}if(!A.hasClass("option-project-selected")){A.removeClass("option-search-filter-selected option-jql-selected").addClass("option-project-selected")}c(".radio-project input",A).attr("checked","checked");if(I.jqlNotSupported){y.addClass("hidden");v.removeClass("hidden")}else{v.addClass("hidden");y.removeClass("hidden");var O=new Date().getTime();var H="jql-"+O;c("textarea[name='jql']",A).before(c(document.createElement("textarea")).attr({autocomplete:"off",cols:"20",id:H,name:"jql",rows:1,wrap:"off",placeholder:"JQL query"}).addClass("textarea with-hint").focus(function(){var S=c(this);if(S.hasClass("with-hint")){S.removeClass("with-hint").val("")}}).val("")).remove();var P=/.+\/jql\/autocomplete.json\?fieldName=[^&]+&fieldValue=.*/;var R=c(".jqlAutoCompleteSpinner",A);A.ajaxSend(function(U,T,S){if(P.test(S.url||"")){R.removeClass("hidden")}}).ajaxComplete(function(U,T,S){if(P.test(S.url||"")){R.addClass("hidden")}});c(".option-jql label",A).attr("for",H);var L="jql-error-"+O;c(".jql-error",A).before(c(document.createElement("div")).addClass("error jql-error").attr("id",L)).remove();c(".dropdown-ready",A).remove();JIRA.JQLAutoComplete({fieldID:H,parser:JIRA.JQLAutoComplete.MyParser(c.parseJSON(I.jqlReservedKeywordsJson||"[]")),queryDelay:0.65,jqlFieldNames:c.parseJSON(I.visibleFieldNamesJson||"[]"),jqlFunctionNames:c.parseJSON(I.visibleFunctionNamesJson||"[]"),minQueryLength:0,allowArrowCarousel:true,autoSelectFirst:false,errorID:L,jiraApplicationId:d.getServerSelect().val(),baseUrl:Confluence.getBaseUrl()});c("textarea[name='jql']",n).keydown(function(U,T){var V=c(this);var S=V.val();if(T||U.keyCode!==27){setTimeout(function(){var X=V.val();var Y=c(".jql-error",n);if(X&&!V.hasClass("with-hint")&&(T||X!==S)){c.ajax({cache:false,data:{jql:X},error:function(){Y.empty().text("Unable to validate JQL against selected JIRA instance.")},success:function(ac){var ab=c(".jql-ok",n),aa=c(".jql-bad",n),Z=c(".duration",n);if(ac.valid){ab.removeClass("hidden");aa.addClass("hidden");f(function(){Z.addClass("can-add-duration");if(c(".date-fields div.checkbox",Z).length){Z.addClass("has-selected-duration")}else{Z.removeClass("has-selected-duration")}});V.focus()}else{ab.addClass("hidden");aa.removeClass("hidden");c(".date-fields",n).empty();k(true);Z.removeClass("can-add-duration")}},type:"PUT",url:Confluence.getBaseUrl().concat("/rest/calendar-services/1.0/jira/",encodeURIComponent(d.getServerSelect(n).val()),"/jql/validate.json"),timeout:Confluence.TeamCalendars.ajaxTimeout})}},300)}else{var W=c(".option-jql .suggestions",A);if(W.is(":visible")){W.hide();return false}}})}var Q=I.searchRequests;var K=c(".option-search-filter",n);var G=c("input[name='searchFilterName']",K).removeData("searchFilters");if(Q&&c.isArray(Q)&&Q.length){G.data("searchFilters",Q);c(".option-content",K.removeData("hideDateFields")).removeClass("disabled")}else{G.attr("disabled","disabled");c(".option-content",K.data("hideDateFields",true)).addClass("disabled")}var J=I.projects;var N=c(".option-project",n);if(J&&c.isArray(J)&&J.length){var M=c("select",N).empty();c(document.createElement("option")).val("").text("Select").appendTo(M);c.each(J,function(S,T){c(document.createElement("option")).val(T.key).text(T.name).appendTo(M)});c(".option-content",N.removeData("hideDateFields")).removeClass("disabled")}else{c(".option-content",N.data("hideDateFields",true)).addClass("disabled")}if(!I.dateRangeSupported){c(".duration",n).css("visibility","hidden")}else{c(".duration",n).css("visibility","visible")}m.enableOkButton();if(D&&c.isFunction(D)){D(I)}};d.getJiraOptions(B,E,w)};var f=function(y){var x=c(".field-group-jira-show div.checkbox",n).filter(function(){return c("input",this).is(":checked")}),D=c(".jira-query-options .matrix .radio:checked",n).val(),F=c(".duration",n),A={},w="";if("option-project"===D){var v=encodeURIComponent(c(".jira-query-options .option-project select option:selected",n).val());if(v){w="/project/"+v}}else{if("option-search-filter"===D){var C=c(".jira-query-options .option-search-filter input[name='searchFilter']",n).val();if(C){w="/filter/"+encodeURIComponent(C)}}else{if("option-jql"===D){A.query=c(".jira-query-options .option-jql textarea",n).val()||"";if(A.query){w="/jql"}}}}F.removeClass("can-add-duration");if(w){var B=c(".date-fields-spinner-container",n).removeClass("hidden"),E=c(".single-dates .date-fields",n).empty(),z=c(".date-fields",F).empty();c.ajax({cache:false,data:A,dataType:"json",error:function(){B.addClass("hidden");c(".dateFieldName-error",n).text("Error retrieving list of date fields.")},success:function(I){B.addClass("hidden");var J=c("<div/>"),H=c.map(x,function(K){return c("input",K).val()}),G=c.map(I,function(K){return K.key});c.each(I,function(L,K){c("<div/>",{"class":"checkbox"}).append(c("<input/>",{id:"option-"+K.key,name:"dateFieldName",type:"checkbox",value:K.key,checked:c.inArray(K.key,H)!==-1})).append(c("<label/>",{"for":"option-"+K.key,text:K.name})).data("mappableAsDuration",K.customfield||K.key==="duedate"||K.key==="created"||K.key==="resolution").appendTo(J)});x.filter(function(){var L=c("input",this).val();if(L.indexOf("/")!==-1){var K=L.split("/",2);return K.length===2&&c.inArray(K[0],G)!==-1&&c.inArray(K[1],G)!==-1}return false}).appendTo(z.empty());J.appendTo(E.empty());if(J.children().length){k(false);F.addClass("can-add-duration")}else{F.removeClass("can-add-duration")}if(y&&c.isFunction(y)){y(I)}},timeout:Confluence.TeamCalendars.ajaxTimeout,url:Confluence.getBaseUrl().concat("/rest/calendar-services/1.0/jira/",encodeURIComponent(d.getServerSelect(n).val()),"/date-fields",w,".json")})}else{k(true);if(y&&c.isFunction(y)){y()}}};g();l()},CustomSubmitter:{JiraIssues:{submitForm:function(f,i,j,h,g,k){function l(){var q="",n=c(".field-group-jira-show .date-fields div.checkbox").filter(function(){return c("input:checked",this).length});c.each(n,function(){var s=c("input",this).val();if(s.indexOf("/")!==-1){var r=s.split("/",2);if(q){q+="&"}q+="duration="+encodeURIComponent(r[0]+"/"+r[1])}else{if(q){q+="&"}q+="dateFieldName="+encodeURIComponent(s)}});var o={type:"jira",parentId:j,subCalendarId:c("input[name='subCalendarId']",f).val(),name:i,description:"",color:c("input[name='color']",f).val()},m="jira://"+encodeURIComponent(d.getServerSelect(f).val()||"")+"?",p=c(".jira-query-options .matrix input.radio:checked",f).val();if("option-project"===p){m+="projectKey="+encodeURIComponent(c("select[name='project'] option:selected",f).val())}else{if("option-search-filter"===p){m+="searchFilterId="+c("input[name='searchFilter']",f).val()}else{m+="jql="+encodeURIComponent(c("textarea[name='jql']",f).val())}}if(q){m+="&"+q}o.location=m;return o}e(l(),f,h,k,g)}},JiraAgileSprints:{submitForm:function(f,i,j,h,g,k){var l=b(f,i,j,"sprint","jira-agile-sprint");e(l,f,h,k,g)}},JiraProjectReleases:{submitForm:function(f,i,j,h,g,k){var l=b(f,i,j,"versiondue","jira-project-releases");e(l,f,h,k,g)}}}};return d});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:event-edit', location = 'com/atlassian/confluence/extra/calendar3/components/manage-event/event-edit/event-edit-dialog-combat.js' */
require(["tc/event-edit-dialog"],function(a){if(!Confluence.TeamCalendars.Dialogs){Confluence.TeamCalendars.Dialogs={}}Confluence.TeamCalendars.Dialogs.getEditEventDialog=function(d,c,e,b){return new a().getEditEventDialog(d,c,e,b)}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:internal-subscription-subcalendar', location = 'com/atlassian/confluence/extra/calendar3/components/internal-subscription-subcalendar/internal-subscription-subcalendar.js' */
define("tc/internal-subscription-subcalendar",["jquery","tc/templates","tc/calendar-util"],function(d,b,a){var c=Backbone.View.extend({getDialog:function(i,f,e){var h;var g;var j=function(m,l){m.resetFieldErrors();if(m.isNewCalendar()){m.setFormModeCreate();m.setHeading("New calendar",i);m.setSubCalendarIdField("");m.setSubscriptionIdField("");m.setNameField("");m.setDescriptionField("");m.setColorField(e.getNextCalendarColor());m.setSpaceToDefault();m.setTimeZoneIdDisplayField("")}else{m.setFormModeEdit();m.setHeading(f.name,i);m.setSubCalendarIdField(f.id);m.setSubscriptionIdField(f.subscriptionId||"");m.setNameField(f.name);m.setDescriptionField(f.description);m.setColorField(f.color);m.setSpaceKeyField(f.spaceKey);m.setSpaceKeyAutocompleteField(f.spaceName);m.setTimeZoneIdDisplayField(f.timeZoneId);if(!(f.restrictable&&f.administrable)){d(".field-group-permissions",l).remove()}}var n=d("textarea[name='description'], input[name='spaceKeyAutocomplete']",l);if(e.isCalendarInEditMode()){n.removeAttr("readonly")}else{m.setFormModeReadOnly();n.attr("readonly","readonly")}if(m.isNewCalendar()&&AJS.Meta.get("space-key")){var k=d(".field-group-space-permission",l);k.addClass("hidden")}};return{initializeForm:function(k){i.addHeader("New calendar");i.addPanel("General",b.editInternalSubcalendar(),"calendar-dialog-panel");g=d("form.sub-calendar-edit-form",i.getCurrentPanel().body);h=Confluence.TeamCalendars.getEditCalendarDialogHelper(g,f,e);h.initSpaceDropDown();h.initOkButton("OK",i);h.initCloseButton(i,k);j(h,g);return g},getFormDataAsAjaxData:function(){var k={type:"internal-subscription",subCalendarId:d("input[name='subCalendarId']",g).val(),name:d("input[name='name']",g).val(),description:d("textarea[name='description']",g).val(),color:d("input[name='color']",g).val(),spaceKey:d("input[name='spaceKeyAutocomplete']",g).val()?d("input[name='spaceKey']",g).val():"",location:"subscription://"+d("input[name='subscriptionId']",g).val()};a.putCalendarContextParams(k);return k},onSubmitStart:function(){h.disableOkButton("Adding...")},onSubmitEnd:function(){h.enableOkButton("OK")}}},weight:1000,typeName:"Unknown Type"});return c});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:internal-subscription-subcalendar', location = 'com/atlassian/confluence/extra/calendar3/components/internal-subscription-subcalendar/internal-subscription-subcalendar.soy' */
// This file was automatically generated from internal-subscription-subcalendar.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.editInternalSubcalendar = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<form name="editSubCalendarForm" class="sub-calendar-edit-form aui" method="POST" action="#"><input type="hidden" name="subCalendarId" value=""><input type="hidden" name="type" value="internal-subscription"><input type="hidden" name="color" value=""><input type="hidden" name="subscriptionId" value=""><input type="hidden" name="spaceKey" value=""><div class="form-mode create"><div class="subcalendar-type subcalendar-interal-subscription"><div class="field-group field-group-name"><label for="name">', soy.$$escapeHtml("Name"), '<span class="aui-icon icon-required"></span></label><input name="name" id="name" type="text" class="text" value="" autocomplete="off"><div class="error name-error"></div></div><div class="field-group field-group-description"><label for="description">', soy.$$escapeHtml("Description"), '</label><textarea name="description" id="description" rows="5" class="textarea"></textarea></div><div class="field-group field-group-space-permission"><label for="spaceKeyAutocomplete">', soy.$$escapeHtml("Related space"), '<span class="aui-icon icon-required"></span></label><input name="spaceKeyAutocomplete" id="spaceKeyAutocomplete" type="text" class="autocomplete-space text" data-max="5" data-none-message="', soy.$$escapeHtml("No spaces found"), '"><div class="description">', soy.$$escapeHtml("Link this calendar to a space."), '</div><div class="error spaceKeyAutocomplete-error"></div></div><div class="field-group field-group-timezone-display"><label>', soy.$$escapeHtml("Time zone"), '</label><span class="timeZoneIdDisplay field-value"></span></div></div></div></form>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:internal-subscription-subcalendar', location = 'com/atlassian/confluence/extra/calendar3/components/internal-subscription-subcalendar/internal-subscription-subcalendar-compact.js' */
require(["tc/internal-subscription-subcalendar"],function(a){if(!window.Confluence.TeamCalendars.subcalendar){window.Confluence.TeamCalendars.subcalendar={}}if(!window.Confluence.TeamCalendars.subcalendar["internal-subscription"]){window.Confluence.TeamCalendars.subcalendar["internal-subscription"]=new a({})}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:infinite-list', location = 'com/atlassian/confluence/extra/calendar3/components/infinite-list/infinitelist.js' */
define("tc/infinite-list",["jquery","underscore","tc-backbone","exports"],function(d,b,e,a){function c(p){var h=p.$el;var o=p.load;var n=p.$container||d(window);var i=p.body||document.body;var g=p.scrollMargin||300;var k=p.isLoadMoreItems||false;var j=h.data("page-size");var l=1;function f(){o(l,j);l+=1}function m(){var r=k==true?k:h.children().length>=j;var q=i.scrollHeight-n.scrollTop()-g<=n.height();if(r&&q){f()}}n.bind("scroll.list",b.debounce(m,100));m();this.destroy=function(){n.off("scroll.list")}}b.extend(c.prototype,e.Events);a.init=function(f){return new c(f)}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-on-space-resources', location = 'com/atlassian/confluence/extra/calendar3/templates/upcoming-event-badge.soy' */
// This file was automatically generated from upcoming-event-badge.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.upcomingEventBadge = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<span class="aui-badge teamcal-sidebar-upcoming-msg hidden"></span>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-on-space-resources', location = 'com/atlassian/confluence/extra/calendar3/js/calendar-on-space.js' */
(function(a){a(function(){function b(){var h="com.atlassian.confluence.extra.team-calendars:tc-on-space-blueprint-webitem";Confluence.Blueprint.setDirectCallback(h,function(j,i){i.finalUrl=Confluence.getContextPath()+"/display/"+i.spaceKey+"/calendars?src=sidebar&openAddCalDialog=true"})}b();var g=Confluence.TeamCalendars.Templates.upcomingEventBadge();var e=a(".space-calendar-sidebar-link a");if(e){e.append(g);var f=a(".teamcal-sidebar-upcoming-msg");AJS.bind("sidebar.collapsed",function(){if(f.html()===""){f.addClass("hidden")}});AJS.bind("sidebar.expanded",function(){if(f.html()===""){f.addClass("hidden")}else{f.removeClass("hidden")}})}function d(){var h=new Date();var i=new Date(Date.UTC(h.getFullYear(),h.getMonth(),h.getDate())).toISOString();a.cookie("team-calendars.badge.number.click.date."+AJS.Meta.get("space-key"),i)}a(document).on("click",".teamcal-sidebar-upcoming-msg",function(){d();Confluence.TeamCalendars.fireEventForAnalytics("badge.number.click",{spaceKey:AJS.Meta.get("space-key")||""})});a(document).on("click",".space-calendar-sidebar-link",function(){d()});function c(){var p=a(".space-calendar-sidebar-link a");if(!p){return}var k=a.cookie("team-calendars.badge.number.click.date."+AJS.Meta.get("space-key"));var j=new Date();var q=new Date(Date.UTC(j.getFullYear(),j.getMonth(),j.getDate()));var i=q.toISOString();if(i===k){return}q.setDate(q.getDate()+1);var l=q.toISOString();var o=AJS.Meta.get("space-key")||"";var m=a("input[name='userTimeZoneId']").val()||a("#team-calendars-user-timezone").attr("content");var h=AJS.contextPath()+"/rest/calendar-services/1.0/calendar/events/upcoming.json";var n=a(".teamcal-sidebar-upcoming-msg").addClass("hidden");a.ajax({cache:false,data:{calendarContext:"spaceCalendars",viewingSpaceKey:o,start:i,end:l,userTimeZoneId:m},dataType:"json",success:function(r){if(r.upcomingEvents>0){if(r.upcomingEvents===1){n.attr("title",AJS.format("{0} upcoming calendar event",r.upcomingEvents))}else{n.attr("title",AJS.format("{0} upcoming calendar events",r.upcomingEvents))}n.html(r.upcomingEvents);n.removeClass("hidden")}else{n.addClass("hidden");n.html("")}},type:"GET",url:h})}if(a(".space-calendar-sidebar-link").length){c()}})}(AJS.$));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:non-space-calendars-dialog', location = 'com/atlassian/confluence/extra/calendar3/components/non-space-calendars-dialog/non-space-calendar-entry-view.js' */
define("tc/non-space-calendar-entry-view",["jquery","underscore","tc-backbone","ajs","tc/calendar-util"],function(d,b,f,a,c){var e=f.View.extend({initialize:function(g){this.template=Confluence.TeamCalendars.Templates.nonSpaceCalendarEntry;this.subCalendar=g.subCalendar;this.CalendarPlugin=g.CalendarPlugin;this.calendarDiv=g.calendarDiv;this.cache=g.cache},render:function(){this.$el.html(this.template({subCalendar:this.subCalendar}));this.spaceKeyAutocompleteField=this.$("input.autocomplete-space");this.spaceKeyField=this.$("input.space-key");this.spaceKeyAutocompleteField.keypress(b.bind(function(g){if(g.which!==13){this.spaceKeyField.val(g.which)}},this));this.spaceKeyAutocompleteField.bind("selected.autocomplete-content",b.bind(function(h,g){this.spaceKeyField.val(g.content.key);this.spaceKeyAutocompleteField.val(g.content.name)},this));this.successIcon=this.$(".success-icon");this.errorIcon=this.$(".error-icon");this.spinnerIcon=this.$(".spinner");this.errorMessageDiv=this.$(".error-message");return this.$el},getData:function(){return{calendarId:this.subCalendar.id,spaceKey:this.spaceKeyField.val()}},isUpdateSuccessfully:function(){return this.spaceKeyAutocompleteField.attr("updated")==="true"},updateSubCalendar:function(){if(this.isUpdateSuccessfully()){return}var g=this.getData();if(!g.spaceKey){return}this.spinnerIcon.show();return d.ajax({cache:false,data:JSON.stringify(g),contentType:"application/json",dataFilter:function(h){var i=d.parseJSON(h);if(i.success){c.mergeSubCalendarObjectsToArray(i.payload)}return i},dataType:"json",converters:{"text json":function(h){return h}},error:b.bind(function(i,k,j){var h=JSON.parse(i.responseText)[0]||"Uh oh. Looks like something unexpectedly went wrong. Please check the Confluence log file.";this._showResult(false,h);c.fireEventForAnalytics("non.space.calendars.upgrade.one.calendar.failed")},this),success:b.bind(function(h){if(h.success){this._showResult(true,"");this._hide();this.CalendarPlugin.setSubCalendar(g.calendarId,this.calendarDiv,h.payload);c.fireEventForAnalytics("non.space.calendars.upgrade.one.calendar.successful")}else{var i=(h.fieldErrors&&h.fieldErrors.length)?h.fieldErrors[0].errorMessages[0]:"Uh oh. Looks like something unexpectedly went wrong. Please check the Confluence log file.";this._showResult(false,i);c.fireEventForAnalytics("non.space.calendars.upgrade.one.calendar.failed")}},this),type:"POST",timeout:c.ajaxTimeout,url:Confluence.TeamCalendars.getCalendarServiceBaseUrl("/subcalendar/space")})},_hide:function(){this.$el.animate({height:0,opacity:0},500,function(){d(this).remove()})},_showResult:function(h,g){this.spinnerIcon.hide();this.successIcon.toggleClass("hidden",!h);this.errorIcon.toggleClass("hidden",h);this.errorMessageDiv.toggleClass("hidden",h);if(h){this.spaceKeyAutocompleteField.prop("disabled",true);this.spaceKeyAutocompleteField.attr("updated","true")}if(g){this.errorMessageDiv.text(g)}}});return e});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:non-space-calendars-dialog', location = 'com/atlassian/confluence/extra/calendar3/components/non-space-calendars-dialog/non-space-calendars-dialog-view.js' */
define("tc/non-space-calendars-dialog-view",["jquery","underscore","tc-backbone","ajs","tc/calendar-util","tc/non-space-calendar-entry-view"],function(e,b,h,a,d,f){var c;var g=h.View.extend({events:{},initialize:function(i){this.subCalendars=i.subCalendars;this.nonSpaceCalendarEntryViews=[];this.CalendarPlugin=i.CalendarPlugin;this.calendarDiv=i.calendarDiv;this.cache=i.cache},setSubCalendars:function(i){this.subCalendars=i},render:function(){if(!c){c=this.dialog=new a.Dialog(600,600,"non-space-calendars-dialog");var i="Your calendars need a related space";c.addHeader(i);c.addPanel(i,Confluence.TeamCalendars.Templates.nonSpaceCalendarsDialog(),"non-space-calendars-panel");c.addSubmit("Save",b.bind(this._onSubmit,this));c.addCancel("Not right now",b.bind(this._onCancel,this));this.setElement(c.getCurPanel().body)}this._renderNonSpaceCalendarEntries();c.show()},_renderNonSpaceCalendarEntries:function(){this.nonSpaceCalendarEntryViews=[];this.$(".non-space-calendars-list").empty();b.each(this.subCalendars,b.bind(function(j){var i=new f({subCalendar:j,CalendarPlugin:this.CalendarPlugin,calendarDiv:this.calendarDiv,cache:this.cache});this.nonSpaceCalendarEntryViews.push(i);this.$(".non-space-calendars-list").append(i.render())},this))},_onSubmit:function(){var i=[];b.each(this.nonSpaceCalendarEntryViews,function(j){var k=j.updateSubCalendar("onSubmit");if(k!==undefined){i.push(k)}});e.when.apply(e,i).done(b.bind(function(){var j=true;b.each(this.nonSpaceCalendarEntryViews,function(k){if(!k.isUpdateSuccessfully()){j=false}});if(j){this.CalendarPlugin.updateAvailableSubCalendarsInSubCalendarPanel(this.calendarDiv);c.hide();d.fireEventForAnalytics("non.space.calendars.upgrade.all.calendars.successful")}},this));d.fireEventForAnalytics("non.space.calendars.upgrade.dialog.submit.click");return false},_onCancel:function(){var i=false;b.each(this.nonSpaceCalendarEntryViews,function(j){if(j.isUpdateSuccessfully()){i=true}});if(i){this.CalendarPlugin.updateAvailableSubCalendarsInSubCalendarPanel(this.calendarDiv)}c.hide();d.fireEventForAnalytics("non.space.calendars.upgrade.dialog.cancel.click");return false}});return g});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:non-space-calendars-dialog', location = 'com/atlassian/confluence/extra/calendar3/components/non-space-calendars-dialog/non-space-calendars-handler.js' */
define("tc/non-space-calendars-handler",["jquery","underscore","tc/calendar-util","tc/non-space-calendars-warning-view"],function(d,a,b,e){var c;return{handle:function(j,i,f,h){if(b.isMyCalendarView(i)){var g=a.filter(h,function(k){return k.eventsEditable&&(k.spaceKey===undefined||k.spaceKey==="")});if(!c){c=new e({el:".non-space-calendars-warning",CalendarPlugin:j,calendarDiv:i,cache:f})}c.render(g)}}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:non-space-calendars-dialog', location = 'com/atlassian/confluence/extra/calendar3/components/non-space-calendars-dialog/non-space-calendars-warning-view.js' */
define("tc/non-space-calendars-warning-view",["jquery","underscore","tc-backbone","ajs","tc/calendar-util","tc/non-space-calendars-dialog-view"],function(d,b,g,a,c,f){var e=g.View.extend({events:{"click .fix-calendars-link":"_onFixCalendarLinkClick"},initialize:function(h){this.CalendarPlugin=h.CalendarPlugin;this.calendarDiv=h.calendarDiv;this.cache=h.cache},render:function(h){this.nonSpaceCalendars=h;this.$(".title strong").text(a.format("{0} of these calendars need a related space.",this.nonSpaceCalendars.length));if(this.nonSpaceCalendars&&this.nonSpaceCalendars.length>0){this.show()}else{this.hide()}},show:function(){this.$el.removeClass("hidden")},hide:function(){this.$el.addClass("hidden")},_onFixCalendarLinkClick:function(){if(!this.nonSpaceCalendarsDialogView){this.nonSpaceCalendarsDialogView=new f({subCalendars:this.nonSpaceCalendars,CalendarPlugin:this.CalendarPlugin,calendarDiv:this.calendarDiv,cache:this.cache})}this.nonSpaceCalendarsDialogView.setSubCalendars(this.nonSpaceCalendars);this.nonSpaceCalendarsDialogView.render();c.fireEventForAnalytics("non.space.calendars.upgrade.link.click");return false}});return e});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:non-space-calendars-dialog', location = 'com/atlassian/confluence/extra/calendar3/components/non-space-calendars-dialog/non-space-calendars-dialog.soy' */
// This file was automatically generated from non-space-calendars-dialog.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.nonSpaceCalendarsDialog = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="non-space-calendars-dialog"><div class="info"><span><b>', soy.$$escapeHtml("Set a related space for these calendars, to make them easier to:"), '</b></span><ul><li><b>', soy.$$escapeHtml("Discover"), '</b> – ', soy.$$escapeHtml("Calendars where you work, in your team or project space"), '</li><li><b>', soy.$$escapeHtml("Watch"), '</b> – ', soy.$$escapeHtml("When you watch a space, youre automatically watching its calendars"), '</li><li><b>', soy.$$escapeHtml("Manage"), '</b> – ', soy.$$escapeHtml("Only people with permission to view a space can see its calendars"), '</li><li><b>', soy.$$escapeHtml("Share"), '</b> – ', soy.$$escapeHtml("Share space calendars just like you would with a Confluence page"), '</li></ul></div><div class="separator"></div><form class="aui non-space-calendars-form"><div class="header"><div class="col1"><b>', soy.$$escapeHtml("Calendar"), '</b></div><div class="col2"><b>', soy.$$escapeHtml("Related Space"), '</b></div></div><div class="non-space-calendars-list"></div></form></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.TeamCalendars.Templates.nonSpaceCalendarEntry = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="field-group field-group-', soy.$$escapeHtml(opt_data.subCalendar.id), '"><label for="spaceKeyAutocomplete-', soy.$$escapeHtml(opt_data.subCalendar.id), '">', soy.$$escapeHtml(opt_data.subCalendar.name), '</label><input name="spaceKeyAutocomplete-', soy.$$escapeHtml(opt_data.subCalendar.id), '" type="text" class="autocomplete-space text" data-max="5" placeholder="', soy.$$escapeHtml("Enter space name"), '" data-none-message="', soy.$$escapeHtml("No spaces found"), '" data-template="{key}" data-dropdown-target=".field-group-', soy.$$escapeHtml(opt_data.subCalendar.id), ' .dropdown"><div class="status-icon"><div class="spinner invisible aui-icon aui-icon-wait hidden"></div><span class="aui-icon aui-icon-error error-icon hidden"></span><span class="success aui-icon aui-icon-success success-icon hidden"></span></div><div class="spaceKeyAutocomplete-error error-message"></div><div class="dropdown"></div><input name="spaceKey-', soy.$$escapeHtml(opt_data.subCalendar.id), '" type="hidden" class="space-key"></input></div>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/lib/jquery-plugins/jquery.ThreeDots.js' */
(function(e){e.fn.ThreeDots=function(h){var g=this;if((typeof h=="object")||(h==undefined)){e.fn.ThreeDots.the_selected=this;var g=e.fn.ThreeDots.update(h)}return g};e.fn.ThreeDots.update=function(u){var k,t=null;var m,j,s,q,o;var l,i;var r,h,n;if((typeof u=="object")||(u==undefined)){e.fn.ThreeDots.c_settings=e.extend({},e.fn.ThreeDots.settings,u);var p=e.fn.ThreeDots.c_settings.max_rows;if(p<1){return e.fn.ThreeDots.the_selected}var g=false;jQuery.each(e.fn.ThreeDots.c_settings.valid_delimiters,function(v,w){if(((new String(w)).length==1)){g=true}});if(g==false){return e.fn.ThreeDots.the_selected}e.fn.ThreeDots.the_selected.each(function(){k=e(this);if(e(k).children("."+e.fn.ThreeDots.c_settings.text_span_class).length==0){return true}l=e(k).children("."+e.fn.ThreeDots.c_settings.text_span_class).get(0);var y=a(k,true);var x=e(l).text();d(k,l,y);var v=e(l).text();if((h=e(k).attr("threedots"))!=undefined){e(l).text(h);e(k).children("."+e.fn.ThreeDots.c_settings.e_span_class).remove()}r=e(l).text();if(r.length<=0){r=""}e(k).attr("threedots",x);if(a(k,y)>p){curr_ellipsis=e(k).append('<span style="white-space:nowrap" class="'+e.fn.ThreeDots.c_settings.e_span_class+'">'+e.fn.ThreeDots.c_settings.ellipsis_string+"</span>");while(a(k,y)>p){i=b(e(l).text());e(l).text(i.updated_string);t=i.word;n=i.del;if(n==null){break}}if(t!=null){var w=c(k,y);if((a(k,y)<=p-1)||(w)||(!e.fn.ThreeDots.c_settings.whole_word)){r=e(l).text();if(i.del!=null){e(l).text(r+n)}if(a(k,y)>p){e(l).text(r)}else{e(l).text(e(l).text()+t);if((a(k,y)>p+1)||(!e.fn.ThreeDots.c_settings.whole_word)||(v==t)||w){while((a(k,y)>p)){if(e(l).text().length>0){e(l).text(e(l).text().substr(0,e(l).text().length-1))}else{break}}}}}}}if(x==e(e(k).children("."+e.fn.ThreeDots.c_settings.text_span_class).get(0)).text()){e(k).children("."+e.fn.ThreeDots.c_settings.e_span_class).remove()}else{if((e(k).children("."+e.fn.ThreeDots.c_settings.e_span_class)).length>0){if(e.fn.ThreeDots.c_settings.alt_text_t){e(k).children("."+e.fn.ThreeDots.c_settings.text_span_class).attr("title",x)}if(e.fn.ThreeDots.c_settings.alt_text_e){e(k).children("."+e.fn.ThreeDots.c_settings.e_span_class).attr("title",x)}}}})}return e.fn.ThreeDots.the_selected};e.fn.ThreeDots.settings={valid_delimiters:[" ",",","."],ellipsis_string:"...",max_rows:2,text_span_class:"ellipsis_text",e_span_class:"threedots_ellipsis",whole_word:true,allow_dangle:false,alt_text_e:false,alt_text_t:false};function c(k,h){if(e.fn.ThreeDots.c_settings.allow_dangle==true){return false}var l=e(k).children("."+e.fn.ThreeDots.c_settings.e_span_class).get(0);var g=e(l).css("display");var i=a(k,h);e(l).css("display","none");var j=a(k,h);e(l).css("display",g);if(i>j){return true}else{return false}}function a(i,j){var g=typeof j;if((g=="object")||(g==undefined)){return e(i).height()/j.lh}else{if(g=="boolean"){var h=f(e(i));return{lh:h}}}}function b(k){var j;var i=e.fn.ThreeDots.c_settings.valid_delimiters;k=jQuery.trim(k);var g=-1;var h=null;var l=null;jQuery.each(i,function(m,o){if(((new String(o)).length!=1)||(o==null)){return false}var n=k.lastIndexOf(o);if(n!=-1){if(n>g){g=n;h=k.substring(g+1);l=o}}});if(g>0){return{updated_string:jQuery.trim(k.substring(0,g)),word:h,del:l}}else{return{updated_string:"",word:jQuery.trim(k),del:null}}}function f(h){e(h).append("<div id='temp_ellipsis_div' style='position:absolute; visibility:hidden'>H</div>");var g=e("#temp_ellipsis_div").height();e("#temp_ellipsis_div").remove();return g}function d(k,l,m){var q=e(l).text();var i=q;var o=e.fn.ThreeDots.c_settings.max_rows;var h,g,n,r,j;var p;if(a(k,m)<=o){return}else{p=0;curr_length=i.length;curr_middle=Math.floor((curr_length-p)/2);h=q.substring(p,p+curr_middle);g=q.substring(p+curr_middle);while(curr_middle!=0){e(l).text(h);if(a(k,m)<=(o)){j=Math.floor(g.length/2);n=g.substring(0,j);p=h.length;i=h+n;curr_length=i.length;e(l).text(i)}else{i=h;curr_length=i.length}curr_middle=Math.floor((curr_length-p)/2);h=q.substring(0,p+curr_middle);g=q.substring(p+curr_middle)}}}})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/lib/jquery-plugins/jquery.ui.autocomplete.js' */
(function(a){a.widget("ui.autocompleteTC",{options:{minLength:1,delay:300},_create:function(){var b=this,c=this.element[0].ownerDocument;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(d){var e=a.ui.keyCode;switch(d.keyCode){case e.PAGE_UP:b._move("previousPage",d);break;case e.PAGE_DOWN:b._move("nextPage",d);break;case e.UP:b._move("previous",d);d.preventDefault();break;case e.DOWN:b._move("next",d);d.preventDefault();break;case e.ENTER:if(b.menu.active){d.preventDefault()}case e.TAB:if(!b.menu.active){return}b.menu.select(d);break;case e.ESCAPE:b.element.val(b.term);b.close(d);break;case e.LEFT:case e.RIGHT:case e.SHIFT:case e.CONTROL:case e.ALT:break;default:clearTimeout(b.searching);b.searching=setTimeout(function(){b.search(null,d)},b.options.delay);break}}).bind("focus.autocomplete",function(){b.selectedItem=null;b.previous=b.element.val()}).bind("blur.autocomplete",function(d){clearTimeout(b.searching);b.closing=setTimeout(function(){b.close(d);b._change(d)},150)});this._initSource();this.response=function(){return b._response.apply(b,arguments)};this.menu=a("<ul></ul>").addClass("ui-autocomplete").appendTo("body",c).menu({focus:function(e,f){var d=f.item.data("item.autocomplete");if(false!==b._trigger("focus",null,{item:d})){if(/^key/.test(e.originalEvent.type)){b.element.val(d.value)}}},selected:function(f,g){var e=g.item.data("item.autocomplete");if(false!==b._trigger("select",f,{item:e})){b.element.val(e.value)}b.close(f);var d=b.previous;if(b.element[0]!==c.activeElement){b.element.focus();b.previous=d}b.selectedItem=e},blur:function(d,e){if(b.menu.element.is(":visible")){b.element.val(b.term)}}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu");if(a.fn.bgiframe){this.menu.element.bgiframe()}},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup");this.menu.element.remove();a.Widget.prototype.destroy.call(this)},_setOption:function(b){a.Widget.prototype._setOption.apply(this,arguments);if(b==="source"){this._initSource()}},_initSource:function(){var c,b;if(a.isArray(this.options.source)){c=this.options.source;this.source=function(e,d){d(a.ui.autocompleteTC.filter(c,e.term))}}else{if(typeof this.options.source==="string"){b=this.options.source;this.source=function(e,d){a.getJSON(b,e,d)}}else{this.source=this.options.source}}},search:function(c,b){c=c!=null?c:this.element.val();if(c.length<this.options.minLength){return this.close(b)}clearTimeout(this.closing);if(this._trigger("search")===false){return}return this._search(c)},_search:function(b){this.term=this.element.addClass("ui-autocomplete-loading").val();this.source({term:b},this.response)},_response:function(b){if(b.length){b=this._normalize(b);this._suggest(b);this._trigger("open")}else{this.close()}this.element.removeClass("ui-autocomplete-loading")},close:function(b){clearTimeout(this.closing);if(this.menu.element.is(":visible")){this._trigger("close",b);this.menu.element.hide();this.menu.deactivate()}},_change:function(b){if(this.previous!==this.element.val()){this._trigger("change",b,{item:this.selectedItem})}},_normalize:function(b){if(b.length&&b[0].label&&b[0].value){return b}return a.map(b,function(c){if(typeof c==="string"){return{label:c,value:c}}return a.extend({label:c.label||c.value,value:c.value||c.label},c)})},_suggest:function(b){var c=this.menu.element.empty().zIndex(this.element.zIndex()+1),d,e;this._renderMenu(c,b);this.menu.deactivate();this.menu.refresh();this.menu.element.show().position({my:"left top",at:"left bottom",of:this.element,collision:"none"});d=c.width("").width();e=this.element.width();c.width(Math.max(d,e))},_renderMenu:function(d,c){var b=this;a.each(c,function(e,f){b._renderItem(d,f)})},_renderItem:function(b,c){return a("<li></li>").data("item.autocomplete",c).append("<a>"+c.label+"</a>").appendTo(b)},_move:function(c,b){if(!this.menu.element.is(":visible")){this.search(null,b);return}if(this.menu.first()&&/^previous/.test(c)||this.menu.last()&&/^next/.test(c)){this.element.val(this.term);this.menu.deactivate();return}this.menu[c](b)},widget:function(){return this.menu.element}});a.extend(a.ui.autocompleteTC,{escapeRegex:function(b){return b.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1")},filter:function(d,b){var c=new RegExp(a.ui.autocompleteTC.escapeRegex(b),"i");return a.grep(d,function(e){return c.test(e.label||e.value||e)})}})}(jQuery));(function(a){a.widget("ui.menu",{_create:function(){var b=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(c){if(!a(c.target).closest(".ui-menu-item a").length){return}c.preventDefault();b.select(c)});this.refresh()},refresh:function(){var c=this;var b=this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem");b.children("a").addClass("ui-corner-all").attr("tabindex",-1).mouseenter(function(d){c.activate(d,a(this).parent())}).mouseleave(function(){c.deactivate()})},activate:function(e,d){this.deactivate();if(this.hasScroll()){var f=d.offset().top-this.element.offset().top,b=this.element.attr("scrollTop"),c=this.element.height();if(f<0){this.element.attr("scrollTop",b+f)}else{if(f>c){this.element.attr("scrollTop",b+f-c+d.height())}}}this.active=d.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end();this._trigger("focus",e,{item:d})},deactivate:function(){if(!this.active){return}this.active.children("a").removeClass("ui-state-hover").removeAttr("id");this._trigger("blur");this.active=null},next:function(b){this.move("next",".ui-menu-item:first",b)},previous:function(b){this.move("prev",".ui-menu-item:last",b)},first:function(){return this.active&&!this.active.prev().length},last:function(){return this.active&&!this.active.next().length},move:function(e,d,c){if(!this.active){this.activate(c,this.element.children(d));return}var b=this.active[e+"All"](".ui-menu-item").eq(0);if(b.length){this.activate(c,b)}else{this.activate(c,this.element.children(d))}},nextPage:function(d){if(this.hasScroll()){if(!this.active||this.last()){this.activate(d,this.element.children(":first"));return}var e=this.active.offset().top,c=this.element.height(),b=this.element.children("li").filter(function(){var f=a(this).offset().top-e-c+a(this).height();return f<10&&f>-10});if(!b.length){b=this.element.children(":last")}this.activate(d,b)}else{this.activate(d,this.element.children(!this.active||this.last()?":first":":last"))}},previousPage:function(c){if(this.hasScroll()){if(!this.active||this.first()){this.activate(c,this.element.children(":last"));return}var d=this.active.offset().top,b=this.element.height();result=this.element.children("li").filter(function(){var e=a(this).offset().top-d+b-a(this).height();return e<10&&e>-10});if(!result.length){result=this.element.children(":first")}this.activate(c,result)}else{this.activate(c,this.element.children(!this.active||this.first()?":last":":first"))}},hasScroll:function(){return this.element.height()<this.element.attr("scrollHeight")},select:function(b){this._trigger("selected",b,{item:this.active})}})}(jQuery));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/lib/jquery-plugins/jquery.ui.datepicker.js' */
(function($,undefined){$.extend($.ui,{datepicker:{version:"1.8.11"}});var PROP_NAME="datepicker";var dpuuid=new Date().getTime();function Datepicker(){this.debug=false;this._curInst=null;this._keyEvent=false;this._disabledInputs=[];this._datepickerShowing=false;this._inDialog=false;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass="ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:false,showMonthAfterYear:false,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:false,hideIfNoPrevNext:false,navigationAsDateFormat:false,gotoCurrent:false,changeMonth:false,changeYear:false,yearRange:"c-10:c+10",showOtherMonths:false,selectOtherMonths:false,showWeek:false,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:true,showButtonPanel:false,autoSize:false};$.extend(this._defaults,this.regional[""]);this.dpDiv=$('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')}$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",log:function(){if(this.debug){console.log.apply("",arguments)}},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(settings){extendRemove(this._defaults,settings||{});return this},_attachDatepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase();var inline=(nodeName=="div"||nodeName=="span");if(!target.id){this.uuid+=1;target.id="dp"+this.uuid}var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{});if(nodeName=="input"){this._connectDatepicker(target,inst)}else{if(inline){this._inlineDatepicker(target,inst)}}},_newInst:function(target,inline){var id=target[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1");return{id:id,input:target,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:inline,dpDiv:(!inline?this.dpDiv:$('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}},_connectDatepicker:function(target,inst){var input=$(target);inst.append=$([]);inst.trigger=$([]);if(input.hasClass(this.markerClassName)){return}this._attachments(input,inst);input.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(event,key,value){inst.settings[key]=value}).bind("getData.datepicker",function(event,key){return this._get(inst,key)});this._autoSize(inst);$.data(target,PROP_NAME,inst)},_attachments:function(input,inst){var appendText=this._get(inst,"appendText");var isRTL=this._get(inst,"isRTL");if(inst.append){inst.append.remove()}if(appendText){inst.append=$('<span class="'+this._appendClass+'">'+appendText+"</span>");input[isRTL?"before":"after"](inst.append)}input.unbind("focus",this._showDatepicker);if(inst.trigger){inst.trigger.remove()}var showOn=this._get(inst,"showOn");if(showOn=="focus"||showOn=="both"){input.focus(this._showDatepicker)}if(showOn=="button"||showOn=="both"){var buttonText=this._get(inst,"buttonText");var buttonImage=this._get(inst,"buttonImage");inst.trigger=$(this._get(inst,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:buttonImage,alt:buttonText,title:buttonText}):$('<button type="button"></button>').addClass(this._triggerClass).html(buttonImage==""?buttonText:$("<img/>").attr({src:buttonImage,alt:buttonText,title:buttonText})));input[isRTL?"before":"after"](inst.trigger);inst.trigger.click(function(){if($.datepicker._datepickerShowing&&$.datepicker._lastInput==input[0]){$.datepicker._hideDatepicker()}else{$.datepicker._showDatepicker(input[0])}return false})}},_autoSize:function(inst){if(this._get(inst,"autoSize")&&!inst.inline){var date=new Date(2009,12-1,20);var dateFormat=this._get(inst,"dateFormat");if(dateFormat.match(/[DM]/)){var findMax=function(names){var max=0;var maxI=0;for(var i=0;i<names.length;i++){if(names[i].length>max){max=names[i].length;maxI=i}}return maxI};date.setMonth(findMax(this._get(inst,(dateFormat.match(/MM/)?"monthNames":"monthNamesShort"))));date.setDate(findMax(this._get(inst,(dateFormat.match(/DD/)?"dayNames":"dayNamesShort")))+20-date.getDay())}inst.input.attr("size",this._formatDate(inst,date).length)}},_inlineDatepicker:function(target,inst){var divSpan=$(target);if(divSpan.hasClass(this.markerClassName)){return}divSpan.addClass(this.markerClassName).append(inst.dpDiv).bind("setData.datepicker",function(event,key,value){inst.settings[key]=value}).bind("getData.datepicker",function(event,key){return this._get(inst,key)});$.data(target,PROP_NAME,inst);this._setDate(inst,this._getDefaultDate(inst),true);this._updateDatepicker(inst);this._updateAlternate(inst);inst.dpDiv.show()},_dialogDatepicker:function(input,date,onSelect,settings,pos){var inst=this._dialogInst;if(!inst){this.uuid+=1;var id="dp"+this.uuid;this._dialogInput=$('<input type="text" id="'+id+'" style="position: absolute; top: -100px; width: 0px; z-index: -10;"/>');this._dialogInput.keydown(this._doKeyDown);$("body").append(this._dialogInput);inst=this._dialogInst=this._newInst(this._dialogInput,false);inst.settings={};$.data(this._dialogInput[0],PROP_NAME,inst)}extendRemove(inst.settings,settings||{});date=(date&&date.constructor==Date?this._formatDate(inst,date):date);this._dialogInput.val(date);this._pos=(pos?(pos.length?pos:[pos.pageX,pos.pageY]):null);if(!this._pos){var browserWidth=document.documentElement.clientWidth;var browserHeight=document.documentElement.clientHeight;var scrollX=document.documentElement.scrollLeft||document.body.scrollLeft;var scrollY=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[(browserWidth/2)-100+scrollX,(browserHeight/2)-150+scrollY]}this._dialogInput.css("left",(this._pos[0]+20)+"px").css("top",this._pos[1]+"px");inst.settings.onSelect=onSelect;this._inDialog=true;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);if($.blockUI){$.blockUI(this.dpDiv)}$.data(this._dialogInput[0],PROP_NAME,inst);return this},_destroyDatepicker:function(target){var $target=$(target);var inst=$.data(target,PROP_NAME);if(!$target.hasClass(this.markerClassName)){return}var nodeName=target.nodeName.toLowerCase();$.removeData(target,PROP_NAME);if(nodeName=="input"){inst.append.remove();inst.trigger.remove();$target.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)}else{if(nodeName=="div"||nodeName=="span"){$target.removeClass(this.markerClassName).empty()}}},_enableDatepicker:function(target){var $target=$(target);var inst=$.data(target,PROP_NAME);if(!$target.hasClass(this.markerClassName)){return}var nodeName=target.nodeName.toLowerCase();if(nodeName=="input"){target.disabled=false;inst.trigger.filter("button").each(function(){this.disabled=false}).end().filter("img").css({opacity:"1.0",cursor:""})}else{if(nodeName=="div"||nodeName=="span"){var inline=$target.children("."+this._inlineClass);inline.children().removeClass("ui-state-disabled")}}this._disabledInputs=$.map(this._disabledInputs,function(value){return(value==target?null:value)})},_disableDatepicker:function(target){var $target=$(target);var inst=$.data(target,PROP_NAME);if(!$target.hasClass(this.markerClassName)){return}var nodeName=target.nodeName.toLowerCase();if(nodeName=="input"){target.disabled=true;inst.trigger.filter("button").each(function(){this.disabled=true}).end().filter("img").css({opacity:"0.5",cursor:"default"})}else{if(nodeName=="div"||nodeName=="span"){var inline=$target.children("."+this._inlineClass);inline.children().addClass("ui-state-disabled")}}this._disabledInputs=$.map(this._disabledInputs,function(value){return(value==target?null:value)});this._disabledInputs[this._disabledInputs.length]=target},_isDisabledDatepicker:function(target){if(!target){return false}for(var i=0;i<this._disabledInputs.length;i++){if(this._disabledInputs[i]==target){return true}}return false},_getInst:function(target){try{return $.data(target,PROP_NAME)}catch(err){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(target,name,value){var inst=this._getInst(target);if(arguments.length==2&&typeof name=="string"){return(name=="defaults"?$.extend({},$.datepicker._defaults):(inst?(name=="all"?$.extend({},inst.settings):this._get(inst,name)):null))}var settings=name||{};if(typeof name=="string"){settings={};settings[name]=value}if(inst){if(this._curInst==inst){this._hideDatepicker()}var date=this._getDateDatepicker(target,true);var minDate=this._getMinMaxDate(inst,"min");var maxDate=this._getMinMaxDate(inst,"max");extendRemove(inst.settings,settings);if(minDate!==null&&settings.dateFormat!==undefined&&settings.minDate===undefined){inst.settings.minDate=this._formatDate(inst,minDate)}if(maxDate!==null&&settings.dateFormat!==undefined&&settings.maxDate===undefined){inst.settings.maxDate=this._formatDate(inst,maxDate)}this._attachments($(target),inst);this._autoSize(inst);this._setDateDatepicker(target,date);this._updateDatepicker(inst)}},_changeDatepicker:function(target,name,value){this._optionDatepicker(target,name,value)},_refreshDatepicker:function(target){var inst=this._getInst(target);if(inst){this._updateDatepicker(inst)}},_setDateDatepicker:function(target,date){var inst=this._getInst(target);if(inst){this._setDate(inst,date);this._updateDatepicker(inst);this._updateAlternate(inst)}},_getDateDatepicker:function(target,noDefault){var inst=this._getInst(target);if(inst&&!inst.inline){this._setDateFromField(inst,noDefault)}return(inst?this._getDate(inst):null)},_doKeyDown:function(event){var inst=$.datepicker._getInst(event.target);var handled=true;var isRTL=inst.dpDiv.is(".ui-datepicker-rtl");inst._keyEvent=true;if($.datepicker._datepickerShowing){switch(event.keyCode){case 9:$.datepicker._hideDatepicker();handled=false;break;case 13:var sel=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",inst.dpDiv);if(sel[0]){$.datepicker._selectDay(event.target,inst.selectedMonth,inst.selectedYear,sel[0])}else{$.datepicker._hideDatepicker()}return false;break;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(event.target,(event.ctrlKey?-$.datepicker._get(inst,"stepBigMonths"):-$.datepicker._get(inst,"stepMonths")),"M");break;case 34:$.datepicker._adjustDate(event.target,(event.ctrlKey?+$.datepicker._get(inst,"stepBigMonths"):+$.datepicker._get(inst,"stepMonths")),"M");break;case 35:if(event.ctrlKey||event.metaKey){$.datepicker._clearDate(event.target)}handled=event.ctrlKey||event.metaKey;break;case 36:if(event.ctrlKey||event.metaKey){$.datepicker._gotoToday(event.target)}handled=event.ctrlKey||event.metaKey;break;case 37:if(event.ctrlKey||event.metaKey){$.datepicker._adjustDate(event.target,(isRTL?+1:-1),"D")}handled=event.ctrlKey||event.metaKey;if(event.originalEvent.altKey){$.datepicker._adjustDate(event.target,(event.ctrlKey?-$.datepicker._get(inst,"stepBigMonths"):-$.datepicker._get(inst,"stepMonths")),"M")}break;case 38:if(event.ctrlKey||event.metaKey){$.datepicker._adjustDate(event.target,-7,"D")}handled=event.ctrlKey||event.metaKey;break;case 39:if(event.ctrlKey||event.metaKey){$.datepicker._adjustDate(event.target,(isRTL?-1:+1),"D")}handled=event.ctrlKey||event.metaKey;if(event.originalEvent.altKey){$.datepicker._adjustDate(event.target,(event.ctrlKey?+$.datepicker._get(inst,"stepBigMonths"):+$.datepicker._get(inst,"stepMonths")),"M")}break;case 40:if(event.ctrlKey||event.metaKey){$.datepicker._adjustDate(event.target,+7,"D")}handled=event.ctrlKey||event.metaKey;break;default:handled=false}}else{if(event.keyCode==36&&event.ctrlKey){$.datepicker._showDatepicker(this)}else{handled=false}}if(handled){event.preventDefault();event.stopPropagation()}},_doKeyPress:function(event){var inst=$.datepicker._getInst(event.target);if($.datepicker._get(inst,"constrainInput")){var chars=$.datepicker._possibleChars($.datepicker._get(inst,"dateFormat"));var chr=String.fromCharCode(event.charCode==undefined?event.keyCode:event.charCode);return event.ctrlKey||event.metaKey||(chr<" "||!chars||chars.indexOf(chr)>-1)}},_doKeyUp:function(event){var inst=$.datepicker._getInst(event.target);if(inst.input.val()!=inst.lastVal){try{var date=$.datepicker.parseDate($.datepicker._get(inst,"dateFormat"),(inst.input?inst.input.val():null),$.datepicker._getFormatConfig(inst));if(date){$.datepicker._setDateFromField(inst);$.datepicker._updateAlternate(inst);$.datepicker._updateDatepicker(inst)}}catch(event){$.datepicker.log(event)}}return true},_showDatepicker:function(input){input=input.target||input;if(input.nodeName.toLowerCase()!="input"){input=$("input",input.parentNode)[0]}if($.datepicker._isDisabledDatepicker(input)||$.datepicker._lastInput==input){return}var inst=$.datepicker._getInst(input);if($.datepicker._curInst&&$.datepicker._curInst!=inst){$.datepicker._curInst.dpDiv.stop(true,true)}var beforeShow=$.datepicker._get(inst,"beforeShow");extendRemove(inst.settings,(beforeShow?beforeShow.apply(input,[input,inst]):{}));inst.lastVal=null;$.datepicker._lastInput=input;$.datepicker._setDateFromField(inst);if($.datepicker._inDialog){input.value=""}if(!$.datepicker._pos){$.datepicker._pos=$.datepicker._findPos(input);$.datepicker._pos[1]+=input.offsetHeight}var isFixed=false;$(input).parents().each(function(){isFixed|=$(this).css("position")=="fixed";return !isFixed});if(isFixed&&$.browser.opera){$.datepicker._pos[0]-=document.documentElement.scrollLeft;$.datepicker._pos[1]-=document.documentElement.scrollTop}var offset={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};$.datepicker._pos=null;inst.dpDiv.empty();inst.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});$.datepicker._updateDatepicker(inst);offset=$.datepicker._checkOffset(inst,offset,isFixed);inst.dpDiv.css({position:($.datepicker._inDialog&&$.blockUI?"static":(isFixed?"fixed":"absolute")),display:"none",left:offset.left+"px",top:offset.top+"px"});if(!inst.inline){var showAnim=$.datepicker._get(inst,"showAnim");var duration=$.datepicker._get(inst,"duration");var postProcess=function(){$.datepicker._datepickerShowing=true;var cover=inst.dpDiv.find("iframe.ui-datepicker-cover");if(!!cover.length){var borders=$.datepicker._getBorders(inst.dpDiv);cover.css({left:-borders[0],top:-borders[1],width:inst.dpDiv.outerWidth(),height:inst.dpDiv.outerHeight()})}};inst.dpDiv.zIndex($(input).zIndex()+1);if($.effects&&$.effects[showAnim]){inst.dpDiv.show(showAnim,$.datepicker._get(inst,"showOptions"),duration,postProcess)}else{inst.dpDiv[showAnim||"show"]((showAnim?duration:null),postProcess)}if(!showAnim||!duration){postProcess()}if(inst.input.is(":visible")&&!inst.input.is(":disabled")){inst.input.focus()}$.datepicker._curInst=inst}},_updateDatepicker:function(inst){var self=this;var borders=$.datepicker._getBorders(inst.dpDiv);inst.dpDiv.empty().append(this._generateHTML(inst));var cover=inst.dpDiv.find("iframe.ui-datepicker-cover");if(!!cover.length){cover.css({left:-borders[0],top:-borders[1],width:inst.dpDiv.outerWidth(),height:inst.dpDiv.outerHeight()})}inst.dpDiv.find("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a").bind("mouseout",function(){$(this).removeClass("ui-state-hover");if(this.className.indexOf("ui-datepicker-prev")!=-1){$(this).removeClass("ui-datepicker-prev-hover")}if(this.className.indexOf("ui-datepicker-next")!=-1){$(this).removeClass("ui-datepicker-next-hover")}}).bind("mouseover",function(){if(!self._isDisabledDatepicker(inst.inline?inst.dpDiv.parent()[0]:inst.input[0])){$(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover");$(this).addClass("ui-state-hover");if(this.className.indexOf("ui-datepicker-prev")!=-1){$(this).addClass("ui-datepicker-prev-hover")}if(this.className.indexOf("ui-datepicker-next")!=-1){$(this).addClass("ui-datepicker-next-hover")}}}).end().find("."+this._dayOverClass+" a").trigger("mouseover").end();var numMonths=this._getNumberOfMonths(inst);var cols=numMonths[1];var width=17;if(cols>1){inst.dpDiv.addClass("ui-datepicker-multi-"+cols).css("width",(width*cols)+"em")}else{inst.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("")}inst.dpDiv[(numMonths[0]!=1||numMonths[1]!=1?"add":"remove")+"Class"]("ui-datepicker-multi");inst.dpDiv[(this._get(inst,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");if(inst==$.datepicker._curInst&&$.datepicker._datepickerShowing&&inst.input&&inst.input.is(":visible")&&!inst.input.is(":disabled")&&inst.input[0]!=document.activeElement){inst.input.focus()}if(inst.yearshtml){var origyearshtml=inst.yearshtml;setTimeout(function(){if(origyearshtml===inst.yearshtml){inst.dpDiv.find("select.ui-datepicker-year:first").replaceWith(inst.yearshtml)}origyearshtml=inst.yearshtml=null},0)}},_getBorders:function(elem){var convert=function(value){return{thin:1,medium:2,thick:3}[value]||value};return[parseFloat(convert(elem.css("border-left-width"))),parseFloat(convert(elem.css("border-top-width")))]},_checkOffset:function(inst,offset,isFixed){var dpWidth=inst.dpDiv.outerWidth();var dpHeight=inst.dpDiv.outerHeight();var inputWidth=inst.input?inst.input.outerWidth():0;var inputHeight=inst.input?inst.input.outerHeight():0;var viewWidth=document.documentElement.clientWidth+$(document).scrollLeft();var viewHeight=document.documentElement.clientHeight+$(document).scrollTop();offset.left-=(this._get(inst,"isRTL")?(dpWidth-inputWidth):0);offset.left-=(isFixed&&offset.left==inst.input.offset().left)?$(document).scrollLeft():0;offset.top-=(isFixed&&offset.top==(inst.input.offset().top+inputHeight))?$(document).scrollTop():0;offset.left-=Math.min(offset.left,(offset.left+dpWidth>viewWidth&&viewWidth>dpWidth)?Math.abs(offset.left+dpWidth-viewWidth):0);offset.top-=Math.min(offset.top,(offset.top+dpHeight>viewHeight&&viewHeight>dpHeight)?Math.abs(dpHeight+inputHeight):0);return offset},_findPos:function(obj){var inst=this._getInst(obj);var isRTL=this._get(inst,"isRTL");while(obj&&(obj.type=="hidden"||obj.nodeType!=1||$.expr.filters.hidden(obj))){obj=obj[isRTL?"previousSibling":"nextSibling"]}var position=$(obj).offset();return[position.left,position.top]},_hideDatepicker:function(input){var inst=this._curInst;if(!inst||(input&&inst!=$.data(input,PROP_NAME))){return}if(this._datepickerShowing){var showAnim=this._get(inst,"showAnim");var duration=this._get(inst,"duration");var postProcess=function(){$.datepicker._tidyDialog(inst);this._curInst=null};if($.effects&&$.effects[showAnim]){inst.dpDiv.hide(showAnim,$.datepicker._get(inst,"showOptions"),duration,postProcess)}else{inst.dpDiv[(showAnim=="slideDown"?"slideUp":(showAnim=="fadeIn"?"fadeOut":"hide"))]((showAnim?duration:null),postProcess)}if(!showAnim){postProcess()}var onClose=this._get(inst,"onClose");if(onClose){onClose.apply((inst.input?inst.input[0]:null),[(inst.input?inst.input.val():""),inst])}this._datepickerShowing=false;this._lastInput=null;if(this._inDialog){this._dialogInput.css({position:"absolute",left:"0",top:"-100px"});if($.blockUI){$.unblockUI();$("body").append(this.dpDiv)}}this._inDialog=false}},_tidyDialog:function(inst){inst.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(event){if(!$.datepicker._curInst){return}var $target=$(event.target);if($target[0].id!=$.datepicker._mainDivId&&$target.parents("#"+$.datepicker._mainDivId).length==0&&!$target.hasClass($.datepicker.markerClassName)&&!$target.hasClass($.datepicker._triggerClass)&&$.datepicker._datepickerShowing&&!($.datepicker._inDialog&&$.blockUI)){$.datepicker._hideDatepicker()}},_adjustDate:function(id,offset,period){var target=$(id);var inst=this._getInst(target[0]);if(this._isDisabledDatepicker(target[0])){return}this._adjustInstDate(inst,offset+(period=="M"?this._get(inst,"showCurrentAtPos"):0),period);this._updateDatepicker(inst)},_gotoToday:function(id){var target=$(id);var inst=this._getInst(target[0]);if(this._get(inst,"gotoCurrent")&&inst.currentDay){inst.selectedDay=inst.currentDay;inst.drawMonth=inst.selectedMonth=inst.currentMonth;inst.drawYear=inst.selectedYear=inst.currentYear}else{var date=new Date();inst.selectedDay=date.getDate();inst.drawMonth=inst.selectedMonth=date.getMonth();inst.drawYear=inst.selectedYear=date.getFullYear()}this._notifyChange(inst);this._adjustDate(target)},_selectMonthYear:function(id,select,period){var target=$(id);var inst=this._getInst(target[0]);inst._selectingMonthYear=false;inst["selected"+(period=="M"?"Month":"Year")]=inst["draw"+(period=="M"?"Month":"Year")]=parseInt(select.options[select.selectedIndex].value,10);this._notifyChange(inst);this._adjustDate(target)},_clickMonthYear:function(id){var target=$(id);var inst=this._getInst(target[0]);if(inst.input&&inst._selectingMonthYear){setTimeout(function(){inst.input.focus()},0)}inst._selectingMonthYear=!inst._selectingMonthYear},_selectDay:function(id,month,year,td){var target=$(id);if($(td).hasClass(this._unselectableClass)||this._isDisabledDatepicker(target[0])){return}var inst=this._getInst(target[0]);inst.selectedDay=inst.currentDay=$("a",td).html();inst.selectedMonth=inst.currentMonth=month;inst.selectedYear=inst.currentYear=year;this._selectDate(id,this._formatDate(inst,inst.currentDay,inst.currentMonth,inst.currentYear))},_clearDate:function(id){var target=$(id);var inst=this._getInst(target[0]);this._selectDate(target,"")},_selectDate:function(id,dateStr){var target=$(id);var inst=this._getInst(target[0]);dateStr=(dateStr!=null?dateStr:this._formatDate(inst));if(inst.input){inst.input.val(dateStr)}this._updateAlternate(inst);var onSelect=this._get(inst,"onSelect");if(onSelect){onSelect.apply((inst.input?inst.input[0]:null),[dateStr,inst])}else{if(inst.input){inst.input.trigger("change")}}if(inst.inline){this._updateDatepicker(inst)}else{this._hideDatepicker();this._lastInput=inst.input[0];if(typeof(inst.input[0])!="object"){inst.input.focus()}this._lastInput=null}},_updateAlternate:function(inst){var altField=this._get(inst,"altField");if(altField){var altFormat=this._get(inst,"altFormat")||this._get(inst,"dateFormat");var date=this._getDate(inst);var dateStr=this.formatDate(altFormat,date,this._getFormatConfig(inst));$(altField).each(function(){$(this).val(dateStr)})}},noWeekends:function(date){var day=date.getDay();return[(day>0&&day<6),""]},iso8601Week:function(date){var checkDate=new Date(date.getTime());checkDate.setDate(checkDate.getDate()+4-(checkDate.getDay()||7));var time=checkDate.getTime();checkDate.setMonth(0);checkDate.setDate(1);return Math.floor(Math.round((time-checkDate)/86400000)/7)+1},parseDate:function(format,value,settings){if(format==null||value==null){throw"Invalid arguments"}value=(typeof value=="object"?value.toString():value+"");if(value==""){return null}var shortYearCutoff=(settings?settings.shortYearCutoff:null)||this._defaults.shortYearCutoff;shortYearCutoff=(typeof shortYearCutoff!="string"?shortYearCutoff:new Date().getFullYear()%100+parseInt(shortYearCutoff,10));var dayNamesShort=(settings?settings.dayNamesShort:null)||this._defaults.dayNamesShort;var dayNames=(settings?settings.dayNames:null)||this._defaults.dayNames;var monthNamesShort=(settings?settings.monthNamesShort:null)||this._defaults.monthNamesShort;var monthNames=(settings?settings.monthNames:null)||this._defaults.monthNames;var year=-1;var month=-1;var day=-1;var doy=-1;var literal=false;var lookAhead=function(match){var matches=(iFormat+1<format.length&&format.charAt(iFormat+1)==match);if(matches){iFormat++}return matches};var getNumber=function(match){var isDoubled=lookAhead(match);var size=(match=="@"?14:(match=="!"?20:(match=="y"&&isDoubled?4:(match=="o"?3:2))));var digits=new RegExp("^\\d{1,"+size+"}");var num=value.substring(iValue).match(digits);if(!num){throw"Missing number at position "+iValue}iValue+=num[0].length;return parseInt(num[0],10)};var getName=function(match,shortNames,longNames){var names=(lookAhead(match)?longNames:shortNames);for(var i=0;i<names.length;i++){if(value.substr(iValue,names[i].length).toLowerCase()==names[i].toLowerCase()){iValue+=names[i].length;return i+1}}throw"Unknown name at position "+iValue};var checkLiteral=function(){if(value.charAt(iValue)!=format.charAt(iFormat)){throw"Unexpected literal at position "+iValue}iValue++};var iValue=0;for(var iFormat=0;iFormat<format.length;iFormat++){if(literal){if(format.charAt(iFormat)=="'"&&!lookAhead("'")){literal=false}else{checkLiteral()}}else{switch(format.charAt(iFormat)){case"d":day=getNumber("d");break;case"D":getName("D",dayNamesShort,dayNames);break;case"o":doy=getNumber("o");break;case"m":month=getNumber("m");break;case"M":month=getName("M",monthNamesShort,monthNames);break;case"y":year=getNumber("y");break;case"@":var date=new Date(getNumber("@"));year=date.getFullYear();month=date.getMonth()+1;day=date.getDate();break;case"!":var date=new Date((getNumber("!")-this._ticksTo1970)/10000);year=date.getFullYear();month=date.getMonth()+1;day=date.getDate();break;case"'":if(lookAhead("'")){checkLiteral()}else{literal=true}break;default:checkLiteral()}}}if(year==-1){year=new Date().getFullYear()}else{if(year<100){year+=new Date().getFullYear()-new Date().getFullYear()%100+(year<=shortYearCutoff?0:-100)}}if(doy>-1){month=1;day=doy;do{var dim=this._getDaysInMonth(year,month-1);if(day<=dim){break}month++;day-=dim}while(true)}var date=this._daylightSavingAdjust(new Date(year,month-1,day));if(date.getFullYear()!=year||date.getMonth()+1!=month||date.getDate()!=day){throw"Invalid date"}return date},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(((1970-1)*365+Math.floor(1970/4)-Math.floor(1970/100)+Math.floor(1970/400))*24*60*60*10000000),formatDate:function(format,date,settings){if(!date){return""}var dayNamesShort=(settings?settings.dayNamesShort:null)||this._defaults.dayNamesShort;var dayNames=(settings?settings.dayNames:null)||this._defaults.dayNames;var monthNamesShort=(settings?settings.monthNamesShort:null)||this._defaults.monthNamesShort;var monthNames=(settings?settings.monthNames:null)||this._defaults.monthNames;var lookAhead=function(match){var matches=(iFormat+1<format.length&&format.charAt(iFormat+1)==match);if(matches){iFormat++}return matches};var formatNumber=function(match,value,len){var num=""+value;if(lookAhead(match)){while(num.length<len){num="0"+num}}return num};var formatName=function(match,value,shortNames,longNames){return(lookAhead(match)?longNames[value]:shortNames[value])};var output="";var literal=false;if(date){for(var iFormat=0;iFormat<format.length;iFormat++){if(literal){if(format.charAt(iFormat)=="'"&&!lookAhead("'")){literal=false}else{output+=format.charAt(iFormat)}}else{switch(format.charAt(iFormat)){case"d":output+=formatNumber("d",date.getDate(),2);break;case"D":output+=formatName("D",date.getDay(),dayNamesShort,dayNames);break;case"o":output+=formatNumber("o",(date.getTime()-new Date(date.getFullYear(),0,0).getTime())/86400000,3);break;case"m":output+=formatNumber("m",date.getMonth()+1,2);break;case"M":output+=formatName("M",date.getMonth(),monthNamesShort,monthNames);break;case"y":output+=(lookAhead("y")?date.getFullYear():(date.getYear()%100<10?"0":"")+date.getYear()%100);break;case"@":output+=date.getTime();break;case"!":output+=date.getTime()*10000+this._ticksTo1970;break;case"'":if(lookAhead("'")){output+="'"}else{literal=true}break;default:output+=format.charAt(iFormat)}}}}return output},_possibleChars:function(format){var chars="";var literal=false;var lookAhead=function(match){var matches=(iFormat+1<format.length&&format.charAt(iFormat+1)==match);if(matches){iFormat++}return matches};for(var iFormat=0;iFormat<format.length;iFormat++){if(literal){if(format.charAt(iFormat)=="'"&&!lookAhead("'")){literal=false}else{chars+=format.charAt(iFormat)}}else{switch(format.charAt(iFormat)){case"d":case"m":case"y":case"@":chars+="0123456789";break;case"D":case"M":return null;case"'":if(lookAhead("'")){chars+="'"}else{literal=true}break;default:chars+=format.charAt(iFormat)}}}return chars},_get:function(inst,name){return inst.settings[name]!==undefined?inst.settings[name]:this._defaults[name]},_setDateFromField:function(inst,noDefault){if(inst.input.val()==inst.lastVal){return}var dateFormat=this._get(inst,"dateFormat");var dates=inst.lastVal=inst.input?inst.input.val():null;var date,defaultDate;date=defaultDate=this._getDefaultDate(inst);var settings=this._getFormatConfig(inst);try{date=this.parseDate(dateFormat,dates,settings)||defaultDate}catch(event){this.log(event);dates=(noDefault?"":dates)}inst.selectedDay=date.getDate();inst.drawMonth=inst.selectedMonth=date.getMonth();inst.drawYear=inst.selectedYear=date.getFullYear();inst.currentDay=(dates?date.getDate():0);inst.currentMonth=(dates?date.getMonth():0);inst.currentYear=(dates?date.getFullYear():0);this._adjustInstDate(inst)},_getDefaultDate:function(inst){return this._restrictMinMax(inst,this._determineDate(inst,this._get(inst,"defaultDate"),new Date()))},_determineDate:function(inst,date,defaultDate){var offsetNumeric=function(offset){var date=new Date();date.setDate(date.getDate()+offset);return date};var offsetString=function(offset){try{return $.datepicker.parseDate($.datepicker._get(inst,"dateFormat"),offset,$.datepicker._getFormatConfig(inst))}catch(e){}var date=(offset.toLowerCase().match(/^c/)?$.datepicker._getDate(inst):null)||new Date();var year=date.getFullYear();var month=date.getMonth();var day=date.getDate();var pattern=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g;var matches=pattern.exec(offset);while(matches){switch(matches[2]||"d"){case"d":case"D":day+=parseInt(matches[1],10);break;case"w":case"W":day+=parseInt(matches[1],10)*7;break;case"m":case"M":month+=parseInt(matches[1],10);day=Math.min(day,$.datepicker._getDaysInMonth(year,month));break;case"y":case"Y":year+=parseInt(matches[1],10);day=Math.min(day,$.datepicker._getDaysInMonth(year,month));break}matches=pattern.exec(offset)}return new Date(year,month,day)};var newDate=(date==null||date===""?defaultDate:(typeof date=="string"?offsetString(date):(typeof date=="number"?(isNaN(date)?defaultDate:offsetNumeric(date)):new Date(date.getTime()))));newDate=(newDate&&newDate.toString()=="Invalid Date"?defaultDate:newDate);if(newDate){newDate.setHours(0);newDate.setMinutes(0);newDate.setSeconds(0);newDate.setMilliseconds(0)}return this._daylightSavingAdjust(newDate)},_daylightSavingAdjust:function(date){if(!date){return null}date.setHours(date.getHours()>12?date.getHours()+2:0);return date},_setDate:function(inst,date,noChange){var clear=!date;var origMonth=inst.selectedMonth;var origYear=inst.selectedYear;var newDate=this._restrictMinMax(inst,this._determineDate(inst,date,new Date()));inst.selectedDay=inst.currentDay=newDate.getDate();inst.drawMonth=inst.selectedMonth=inst.currentMonth=newDate.getMonth();inst.drawYear=inst.selectedYear=inst.currentYear=newDate.getFullYear();if((origMonth!=inst.selectedMonth||origYear!=inst.selectedYear)&&!noChange){this._notifyChange(inst)}this._adjustInstDate(inst);if(inst.input){inst.input.val(clear?"":this._formatDate(inst))}},_getDate:function(inst){var startDate=(!inst.currentYear||(inst.input&&inst.input.val()=="")?null:this._daylightSavingAdjust(new Date(inst.currentYear,inst.currentMonth,inst.currentDay)));return startDate},_generateHTML:function(inst){var today=new Date();today=this._daylightSavingAdjust(new Date(today.getFullYear(),today.getMonth(),today.getDate()));var isRTL=this._get(inst,"isRTL");var showButtonPanel=this._get(inst,"showButtonPanel");var hideIfNoPrevNext=this._get(inst,"hideIfNoPrevNext");var navigationAsDateFormat=this._get(inst,"navigationAsDateFormat");var numMonths=this._getNumberOfMonths(inst);var showCurrentAtPos=this._get(inst,"showCurrentAtPos");var stepMonths=this._get(inst,"stepMonths");var isMultiMonth=(numMonths[0]!=1||numMonths[1]!=1);var currentDate=this._daylightSavingAdjust((!inst.currentDay?new Date(9999,9,9):new Date(inst.currentYear,inst.currentMonth,inst.currentDay)));var minDate=this._getMinMaxDate(inst,"min");var maxDate=this._getMinMaxDate(inst,"max");var drawMonth=inst.drawMonth-showCurrentAtPos;var drawYear=inst.drawYear;if(drawMonth<0){drawMonth+=12;drawYear--}if(maxDate){var maxDraw=this._daylightSavingAdjust(new Date(maxDate.getFullYear(),maxDate.getMonth()-(numMonths[0]*numMonths[1])+1,maxDate.getDate()));maxDraw=(minDate&&maxDraw<minDate?minDate:maxDraw);while(this._daylightSavingAdjust(new Date(drawYear,drawMonth,1))>maxDraw){drawMonth--;if(drawMonth<0){drawMonth=11;drawYear--}}}inst.drawMonth=drawMonth;inst.drawYear=drawYear;var prevText=this._get(inst,"prevText");prevText=(!navigationAsDateFormat?prevText:this.formatDate(prevText,this._daylightSavingAdjust(new Date(drawYear,drawMonth-stepMonths,1)),this._getFormatConfig(inst)));var prev=(this._canAdjustMonth(inst,-1,drawYear,drawMonth)?'<a class="ui-datepicker-prev ui-corner-all" onclick="DP_jQuery_'+dpuuid+".datepicker._adjustDate('#"+inst.id+"', -"+stepMonths+", 'M');\" title=\""+prevText+'"><span class="ui-icon ui-icon-circle-triangle-'+(isRTL?"e":"w")+'">'+prevText+"</span></a>":(hideIfNoPrevNext?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+prevText+'"><span class="ui-icon ui-icon-circle-triangle-'+(isRTL?"e":"w")+'">'+prevText+"</span></a>"));var nextText=this._get(inst,"nextText");nextText=(!navigationAsDateFormat?nextText:this.formatDate(nextText,this._daylightSavingAdjust(new Date(drawYear,drawMonth+stepMonths,1)),this._getFormatConfig(inst)));var next=(this._canAdjustMonth(inst,+1,drawYear,drawMonth)?'<a class="ui-datepicker-next ui-corner-all" onclick="DP_jQuery_'+dpuuid+".datepicker._adjustDate('#"+inst.id+"', +"+stepMonths+", 'M');\" title=\""+nextText+'"><span class="ui-icon ui-icon-circle-triangle-'+(isRTL?"w":"e")+'">'+nextText+"</span></a>":(hideIfNoPrevNext?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+nextText+'"><span class="ui-icon ui-icon-circle-triangle-'+(isRTL?"w":"e")+'">'+nextText+"</span></a>"));var currentText=this._get(inst,"currentText");var gotoDate=(this._get(inst,"gotoCurrent")&&inst.currentDay?currentDate:today);currentText=(!navigationAsDateFormat?currentText:this.formatDate(currentText,gotoDate,this._getFormatConfig(inst)));var controls=(!inst.inline?'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" onclick="DP_jQuery_'+dpuuid+'.datepicker._hideDatepicker();">'+this._get(inst,"closeText")+"</button>":"");var buttonPanel=(showButtonPanel)?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(isRTL?controls:"")+(this._isInRange(inst,gotoDate)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" onclick="DP_jQuery_'+dpuuid+".datepicker._gotoToday('#"+inst.id+"');\">"+currentText+"</button>":"")+(isRTL?"":controls)+"</div>":"";var firstDay=parseInt(this._get(inst,"firstDay"),10);firstDay=(isNaN(firstDay)?0:firstDay);var showWeek=this._get(inst,"showWeek");var dayNames=this._get(inst,"dayNames");var dayNamesShort=this._get(inst,"dayNamesShort");var dayNamesMin=this._get(inst,"dayNamesMin");var monthNames=this._get(inst,"monthNames");var monthNamesShort=this._get(inst,"monthNamesShort");var beforeShowDay=this._get(inst,"beforeShowDay");var showOtherMonths=this._get(inst,"showOtherMonths");var selectOtherMonths=this._get(inst,"selectOtherMonths");var calculateWeek=this._get(inst,"calculateWeek")||this.iso8601Week;var defaultDate=this._getDefaultDate(inst);var html="";for(var row=0;row<numMonths[0];row++){var group="";for(var col=0;col<numMonths[1];col++){var selectedDate=this._daylightSavingAdjust(new Date(drawYear,drawMonth,inst.selectedDay));var cornerClass=" ui-corner-all";var calender="";if(isMultiMonth){calender+='<div class="ui-datepicker-group';if(numMonths[1]>1){switch(col){case 0:calender+=" ui-datepicker-group-first";cornerClass=" ui-corner-"+(isRTL?"right":"left");break;case numMonths[1]-1:calender+=" ui-datepicker-group-last";cornerClass=" ui-corner-"+(isRTL?"left":"right");break;default:calender+=" ui-datepicker-group-middle";cornerClass="";break}}calender+='">'}calender+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+cornerClass+'">'+(/all|left/.test(cornerClass)&&row==0?(isRTL?next:prev):"")+(/all|right/.test(cornerClass)&&row==0?(isRTL?prev:next):"")+this._generateMonthYearHeader(inst,drawMonth,drawYear,minDate,maxDate,row>0||col>0,monthNames,monthNamesShort)+'</div><table class="ui-datepicker-calendar"><thead><tr>';var thead=(showWeek?'<th class="ui-datepicker-week-col">'+this._get(inst,"weekHeader")+"</th>":"");for(var dow=0;dow<7;dow++){var day=(dow+firstDay)%7;thead+="<th"+((dow+firstDay+6)%7>=5?' class="ui-datepicker-week-end"':"")+'><span title="'+dayNames[day]+'">'+dayNamesMin[day]+"</span></th>"}calender+=thead+"</tr></thead><tbody>";var daysInMonth=this._getDaysInMonth(drawYear,drawMonth);if(drawYear==inst.selectedYear&&drawMonth==inst.selectedMonth){inst.selectedDay=Math.min(inst.selectedDay,daysInMonth)}var leadDays=(this._getFirstDayOfMonth(drawYear,drawMonth)-firstDay+7)%7;var numRows=(isMultiMonth?6:Math.ceil((leadDays+daysInMonth)/7));var printDate=this._daylightSavingAdjust(new Date(drawYear,drawMonth,1-leadDays));for(var dRow=0;dRow<numRows;dRow++){calender+="<tr>";var tbody=(!showWeek?"":'<td class="ui-datepicker-week-col">'+this._get(inst,"calculateWeek")(printDate)+"</td>");for(var dow=0;dow<7;dow++){var daySettings=(beforeShowDay?beforeShowDay.apply((inst.input?inst.input[0]:null),[printDate]):[true,""]);var otherMonth=(printDate.getMonth()!=drawMonth);var unselectable=(otherMonth&&!selectOtherMonths)||!daySettings[0]||(minDate&&printDate<minDate)||(maxDate&&printDate>maxDate);tbody+='<td class="'+((dow+firstDay+6)%7>=5?" ui-datepicker-week-end":"")+(otherMonth?" ui-datepicker-other-month":"")+((printDate.getTime()==selectedDate.getTime()&&drawMonth==inst.selectedMonth&&inst._keyEvent)||(defaultDate.getTime()==printDate.getTime()&&defaultDate.getTime()==selectedDate.getTime())?" "+this._dayOverClass:"")+(unselectable?" "+this._unselectableClass+" ui-state-disabled":"")+(otherMonth&&!showOtherMonths?"":" "+daySettings[1]+(printDate.getTime()==currentDate.getTime()?" "+this._currentClass:"")+(printDate.getTime()==today.getTime()?" ui-datepicker-today":""))+'"'+((!otherMonth||showOtherMonths)&&daySettings[2]?' title="'+daySettings[2]+'"':"")+(unselectable?"":' onclick="DP_jQuery_'+dpuuid+".datepicker._selectDay('#"+inst.id+"',"+printDate.getMonth()+","+printDate.getFullYear()+', this);return false;"')+">"+(otherMonth&&!showOtherMonths?"&#xa0;":(unselectable?'<span class="ui-state-default">'+printDate.getDate()+"</span>":'<a class="ui-state-default'+(printDate.getTime()==today.getTime()?" ui-state-highlight":"")+(printDate.getTime()==currentDate.getTime()?" ui-state-active":"")+(otherMonth?" ui-priority-secondary":"")+'" href="#">'+printDate.getDate()+"</a>"))+"</td>";printDate.setDate(printDate.getDate()+1);printDate=this._daylightSavingAdjust(printDate)}calender+=tbody+"</tr>"}drawMonth++;if(drawMonth>11){drawMonth=0;drawYear++}calender+="</tbody></table>"+(isMultiMonth?"</div>"+((numMonths[0]>0&&col==numMonths[1]-1)?'<div class="ui-datepicker-row-break"></div>':""):"");group+=calender}html+=group}html+=buttonPanel+($.browser.msie&&parseInt($.browser.version,10)<7&&!inst.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':"");inst._keyEvent=false;return html},_generateMonthYearHeader:function(inst,drawMonth,drawYear,minDate,maxDate,secondary,monthNames,monthNamesShort){var changeMonth=this._get(inst,"changeMonth");var changeYear=this._get(inst,"changeYear");var showMonthAfterYear=this._get(inst,"showMonthAfterYear");var html='<div class="ui-datepicker-title">';var monthHtml="";if(secondary||!changeMonth){monthHtml+='<span class="ui-datepicker-month">'+monthNames[drawMonth]+"</span>"}else{var inMinYear=(minDate&&minDate.getFullYear()==drawYear);var inMaxYear=(maxDate&&maxDate.getFullYear()==drawYear);monthHtml+='<select class="ui-datepicker-month" onchange="DP_jQuery_'+dpuuid+".datepicker._selectMonthYear('#"+inst.id+"', this, 'M');\" onclick=\"DP_jQuery_"+dpuuid+".datepicker._clickMonthYear('#"+inst.id+"');\">";for(var month=0;month<12;month++){if((!inMinYear||month>=minDate.getMonth())&&(!inMaxYear||month<=maxDate.getMonth())){monthHtml+='<option value="'+month+'"'+(month==drawMonth?' selected="selected"':"")+">"+monthNamesShort[month]+"</option>"}}monthHtml+="</select>"}if(!showMonthAfterYear){html+=monthHtml+(secondary||!(changeMonth&&changeYear)?"&#xa0;":"")}inst.yearshtml="";if(secondary||!changeYear){html+='<span class="ui-datepicker-year">'+drawYear+"</span>"}else{var years=this._get(inst,"yearRange").split(":");var thisYear=new Date().getFullYear();var determineYear=function(value){var year=(value.match(/c[+-].*/)?drawYear+parseInt(value.substring(1),10):(value.match(/[+-].*/)?thisYear+parseInt(value,10):parseInt(value,10)));return(isNaN(year)?thisYear:year)};var year=determineYear(years[0]);var endYear=Math.max(year,determineYear(years[1]||""));year=(minDate?Math.max(year,minDate.getFullYear()):year);endYear=(maxDate?Math.min(endYear,maxDate.getFullYear()):endYear);inst.yearshtml+='<select class="ui-datepicker-year" onchange="DP_jQuery_'+dpuuid+".datepicker._selectMonthYear('#"+inst.id+"', this, 'Y');\" onclick=\"DP_jQuery_"+dpuuid+".datepicker._clickMonthYear('#"+inst.id+"');\">";for(;year<=endYear;year++){inst.yearshtml+='<option value="'+year+'"'+(year==drawYear?' selected="selected"':"")+">"+year+"</option>"}inst.yearshtml+="</select>";if(!$.browser.mozilla){html+=inst.yearshtml;inst.yearshtml=null}else{html+='<select class="ui-datepicker-year"><option value="'+drawYear+'" selected="selected">'+drawYear+"</option></select>"}}html+=this._get(inst,"yearSuffix");if(showMonthAfterYear){html+=(secondary||!(changeMonth&&changeYear)?"&#xa0;":"")+monthHtml}html+="</div>";return html},_adjustInstDate:function(inst,offset,period){var year=inst.drawYear+(period=="Y"?offset:0);var month=inst.drawMonth+(period=="M"?offset:0);var day=Math.min(inst.selectedDay,this._getDaysInMonth(year,month))+(period=="D"?offset:0);var date=this._restrictMinMax(inst,this._daylightSavingAdjust(new Date(year,month,day)));inst.selectedDay=date.getDate();inst.drawMonth=inst.selectedMonth=date.getMonth();inst.drawYear=inst.selectedYear=date.getFullYear();if(period=="M"||period=="Y"){this._notifyChange(inst)}},_restrictMinMax:function(inst,date){var minDate=this._getMinMaxDate(inst,"min");var maxDate=this._getMinMaxDate(inst,"max");var newDate=(minDate&&date<minDate?minDate:date);newDate=(maxDate&&newDate>maxDate?maxDate:newDate);return newDate},_notifyChange:function(inst){var onChange=this._get(inst,"onChangeMonthYear");if(onChange){onChange.apply((inst.input?inst.input[0]:null),[inst.selectedYear,inst.selectedMonth+1,inst])}},_getNumberOfMonths:function(inst){var numMonths=this._get(inst,"numberOfMonths");return(numMonths==null?[1,1]:(typeof numMonths=="number"?[1,numMonths]:numMonths))},_getMinMaxDate:function(inst,minMax){return this._determineDate(inst,this._get(inst,minMax+"Date"),null)},_getDaysInMonth:function(year,month){return 32-this._daylightSavingAdjust(new Date(year,month,32)).getDate()},_getFirstDayOfMonth:function(year,month){return new Date(year,month,1).getDay()},_canAdjustMonth:function(inst,offset,curYear,curMonth){var numMonths=this._getNumberOfMonths(inst);var date=this._daylightSavingAdjust(new Date(curYear,curMonth+(offset<0?offset:numMonths[0]*numMonths[1]),1));if(offset<0){date.setDate(this._getDaysInMonth(date.getFullYear(),date.getMonth()))}return this._isInRange(inst,date)},_isInRange:function(inst,date){var minDate=this._getMinMaxDate(inst,"min");var maxDate=this._getMinMaxDate(inst,"max");return((!minDate||date.getTime()>=minDate.getTime())&&(!maxDate||date.getTime()<=maxDate.getTime()))},_getFormatConfig:function(inst){var shortYearCutoff=this._get(inst,"shortYearCutoff");shortYearCutoff=(typeof shortYearCutoff!="string"?shortYearCutoff:new Date().getFullYear()%100+parseInt(shortYearCutoff,10));return{shortYearCutoff:shortYearCutoff,dayNamesShort:this._get(inst,"dayNamesShort"),dayNames:this._get(inst,"dayNames"),monthNamesShort:this._get(inst,"monthNamesShort"),monthNames:this._get(inst,"monthNames")}},_formatDate:function(inst,day,month,year){if(!day){inst.currentDay=inst.selectedDay;inst.currentMonth=inst.selectedMonth;inst.currentYear=inst.selectedYear}var date=(day?(typeof day=="object"?day:this._daylightSavingAdjust(new Date(year,month,day))):this._daylightSavingAdjust(new Date(inst.currentYear,inst.currentMonth,inst.currentDay)));return this.formatDate(this._get(inst,"dateFormat"),date,this._getFormatConfig(inst))}});function extendRemove(target,props){$.extend(target,props);for(var name in props){if(props[name]==null||props[name]==undefined){target[name]=props[name]}}return target}function isArray(a){return(a&&(($.browser.safari&&typeof a=="object"&&a.length)||(a.constructor&&a.constructor.toString().match(/\Array\(\)/))))}$.fn.datepicker=function(options){if(!this.length){return this}if(!$.datepicker.initialized){$(document).mousedown($.datepicker._checkExternalClick).find("body").append($.datepicker.dpDiv);$.datepicker.initialized=true}var otherArgs=Array.prototype.slice.call(arguments,1);if(typeof options=="string"&&(options=="isDisabled"||options=="getDate"||options=="widget")){return $.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this[0]].concat(otherArgs))}if(options=="option"&&arguments.length==2&&typeof arguments[1]=="string"){return $.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this[0]].concat(otherArgs))}return this.each(function(){typeof options=="string"?$.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this].concat(otherArgs)):$.datepicker._attachDatepicker(this,options)})};$.datepicker=new Datepicker();$.datepicker.initialized=false;$.datepicker.uuid=new Date().getTime();$.datepicker.version="1.8.11";window["DP_jQuery_"+dpuuid]=$})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/lib/jquery-plugins/jquery.ui.position.js' */
(function(f){f.ui=f.ui||{};var c=/left|center|right/,e="center",d=/top|center|bottom/,g="center",a=f.fn.position,b=f.fn.offset;f.fn.position=function(i){if(!i||!i.of){return a.apply(this,arguments)}i=f.extend({},i);var l=f(i.of),n=(i.collision||"flip").split(" "),m=i.offset?i.offset.split(" "):[0,0],k,h,j;if(i.of.nodeType===9){k=l.width();h=l.height();j={top:0,left:0}}else{if(i.of.scrollTo&&i.of.document){k=l.width();h=l.height();j={top:l.scrollTop(),left:l.scrollLeft()}}else{if(i.of.preventDefault){i.at="left top";k=h=0;j={top:i.of.pageY,left:i.of.pageX}}else{k=l.outerWidth();h=l.outerHeight();j=l.offset()}}}f.each(["my","at"],function(){var o=(i[this]||"").split(" ");if(o.length===1){o=c.test(o[0])?o.concat([g]):d.test(o[0])?[e].concat(o):[e,g]}o[0]=c.test(o[0])?o[0]:e;o[1]=d.test(o[1])?o[1]:g;i[this]=o});if(n.length===1){n[1]=n[0]}m[0]=parseInt(m[0],10)||0;if(m.length===1){m[1]=m[0]}m[1]=parseInt(m[1],10)||0;if(i.at[0]==="right"){j.left+=k}else{if(i.at[0]===e){j.left+=k/2}}if(i.at[1]==="bottom"){j.top+=h}else{if(i.at[1]===g){j.top+=h/2}}j.left+=m[0];j.top+=m[1];return this.each(function(){var r=f(this),q=r.outerWidth(),p=r.outerHeight(),o=f.extend({},j);if(i.my[0]==="right"){o.left-=q}else{if(i.my[0]===e){o.left-=q/2}}if(i.my[1]==="bottom"){o.top-=p}else{if(i.my[1]===g){o.top-=p/2}}o.left=parseInt(o.left);o.top=parseInt(o.top);f.each(["left","top"],function(t,s){if(f.ui.position[n[t]]){f.ui.position[n[t]][s](o,{targetWidth:k,targetHeight:h,elemWidth:q,elemHeight:p,offset:m,my:i.my,at:i.at})}});if(f.fn.bgiframe){r.bgiframe()}r.offset(f.extend(o,{using:i.using}))})};f.ui.position={fit:{left:function(h,i){var k=f(window),j=h.left+i.elemWidth-k.width()-k.scrollLeft();h.left=j>0?h.left-j:Math.max(0,h.left)},top:function(h,i){var k=f(window),j=h.top+i.elemHeight-k.height()-k.scrollTop();h.top=j>0?h.top-j:Math.max(0,h.top)}},flip:{left:function(i,j){if(j.at[0]==="center"){return}var l=f(window),k=i.left+j.elemWidth-l.width()-l.scrollLeft(),h=j.my[0]==="left"?-j.elemWidth:j.my[0]==="right"?j.elemWidth:0,m=-2*j.offset[0];i.left+=i.left<0?h+j.targetWidth+m:k>0?h-j.targetWidth+m:0},top:function(i,k){if(k.at[1]==="center"){return}var m=f(window),l=i.top+k.elemHeight-m.height()-m.scrollTop(),h=k.my[1]==="top"?-k.elemHeight:k.my[1]==="bottom"?k.elemHeight:0,j=k.at[1]==="top"?k.targetHeight:-k.targetHeight,n=-2*k.offset[1];i.top+=i.top<0?h+k.targetHeight+n:l>0?h+j+n:0}}};if(!f.offset.setOffset){f.offset.setOffset=function(l,i){if(/static/.test(f.curCSS(l,"position"))){l.style.position="relative"}var k=f(l),n=k.offset(),h=parseInt(f.curCSS(l,"top",true),10)||0,m=parseInt(f.curCSS(l,"left",true),10)||0,j={top:(i.top-n.top)+h,left:(i.left-n.left)+m};if("using" in i){i.using.call(l,j)}else{k.css(j)}};f.fn.offset=function(h){var i=this[0];if(!i||!i.ownerDocument){return null}if(h){return this.each(function(){f.offset.setOffset(this,h)})}return b.call(this)}}}(jQuery));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/lib/jquery-plugins/jquery.ui.resizable.js' */
(function(c){c.widget("ui.resizable",c.ui.mouse,{widgetEventPrefix:"resize",options:{alsoResize:false,animate:false,animateDuration:"slow",animateEasing:"swing",aspectRatio:false,autoHide:false,containment:false,ghost:false,grid:false,handles:"e,s,se",helper:false,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1000},_create:function(){var e=this,j=this.options;this.element.addClass("ui-resizable");c.extend(this,{_aspectRatio:!!(j.aspectRatio),aspectRatio:j.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:j.helper||j.ghost||j.animate?j.helper||"ui-resizable-helper":null});if(this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)){if(/relative/.test(this.element.css("position"))&&c.browser.opera){this.element.css({position:"relative",top:"auto",left:"auto"})}this.element.wrap(c('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")}));this.element=this.element.parent().data("resizable",this.element.data("resizable"));this.elementIsWrapper=true;this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")});this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0});this.originalResizeStyle=this.originalElement.css("resize");this.originalElement.css("resize","none");this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"}));this.originalElement.css({margin:this.originalElement.css("margin")});this._proportionallyResize()}this.handles=j.handles||(!c(".ui-resizable-handle",this.element).length?"e,s,se":{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"});if(this.handles.constructor==String){if(this.handles=="all"){this.handles="n,e,s,w,se,sw,ne,nw"}var k=this.handles.split(",");this.handles={};for(var f=0;f<k.length;f++){var h=c.trim(k[f]),d="ui-resizable-"+h;var g=c('<div class="ui-resizable-handle '+d+'"></div>');if(/sw|se|ne|nw/.test(h)){g.css({zIndex:++j.zIndex})}if("se"==h){g.addClass("ui-icon ui-icon-gripsmall-diagonal-se")}this.handles[h]=".ui-resizable-"+h;this.element.append(g)}}this._renderAxis=function(p){p=p||this.element;for(var m in this.handles){if(this.handles[m].constructor==String){this.handles[m]=c(this.handles[m],this.element).show()}if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var n=c(this.handles[m],this.element),o=0;o=/sw|ne|nw|se|n|s/.test(m)?n.outerHeight():n.outerWidth();var l=["padding",/ne|nw|n/.test(m)?"Top":/se|sw|s/.test(m)?"Bottom":/^e$/.test(m)?"Right":"Left"].join("");p.css(l,o);this._proportionallyResize()}if(!c(this.handles[m]).length){continue}}};this._renderAxis(this.element);this._handles=c(".ui-resizable-handle",this.element).disableSelection();this._handles.mouseover(function(){if(!e.resizing){if(this.className){var i=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)}e.axis=i&&i[1]?i[1]:"se"}});if(j.autoHide){this._handles.hide();c(this.element).addClass("ui-resizable-autohide").hover(function(){c(this).removeClass("ui-resizable-autohide");e._handles.show()},function(){if(!e.resizing){c(this).addClass("ui-resizable-autohide");e._handles.hide()}})}this._mouseInit()},destroy:function(){this._mouseDestroy();var d=function(f){c(f).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){d(this.element);var e=this.element;e.after(this.originalElement.css({position:e.css("position"),width:e.outerWidth(),height:e.outerHeight(),top:e.css("top"),left:e.css("left")})).remove()}this.originalElement.css("resize",this.originalResizeStyle);d(this.originalElement);return this},_mouseCapture:function(e){var f=false;for(var d in this.handles){if(c(this.handles[d])[0]==e.target){f=true}}return !this.options.disabled&&f},_mouseStart:function(f){var i=this.options,e=this.element.position(),d=this.element;this.resizing=true;this.documentScroll={top:c(document).scrollTop(),left:c(document).scrollLeft()};if(d.is(".ui-draggable")||(/absolute/).test(d.css("position"))){d.css({position:"absolute",top:e.top,left:e.left})}if(c.browser.opera&&(/relative/).test(d.css("position"))){d.css({position:"relative",top:"auto",left:"auto"})}this._renderProxy();var j=b(this.helper.css("left")),g=b(this.helper.css("top"));if(i.containment){j+=c(i.containment).scrollLeft()||0;g+=c(i.containment).scrollTop()||0}this.offset=this.helper.offset();this.position={left:j,top:g};this.size=this._helper?{width:d.outerWidth(),height:d.outerHeight()}:{width:d.width(),height:d.height()};this.originalSize=this._helper?{width:d.outerWidth(),height:d.outerHeight()}:{width:d.width(),height:d.height()};this.originalPosition={left:j,top:g};this.sizeDiff={width:d.outerWidth()-d.width(),height:d.outerHeight()-d.height()};this.originalMousePosition={left:f.pageX,top:f.pageY};this.aspectRatio=(typeof i.aspectRatio=="number")?i.aspectRatio:((this.originalSize.width/this.originalSize.height)||1);var h=c(".ui-resizable-"+this.axis).css("cursor");c("body").css("cursor",h=="auto"?this.axis+"-resize":h);d.addClass("ui-resizable-resizing");this._propagate("start",f);return true},_mouseDrag:function(d){var g=this.helper,f=this.options,l={},p=this,i=this.originalMousePosition,m=this.axis;var q=(d.pageX-i.left)||0,n=(d.pageY-i.top)||0;var h=this._change[m];if(!h){return false}var k=h.apply(this,[d,q,n]),j=c.browser.msie&&c.browser.version<7,e=this.sizeDiff;if(this._aspectRatio||d.shiftKey){k=this._updateRatio(k,d)}k=this._respectSize(k,d);this._propagate("resize",d);g.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"});if(!this._helper&&this._proportionallyResizeElements.length){this._proportionallyResize()}this._updateCache(k);this._trigger("resize",d,this.ui());return false},_mouseStop:function(g){this.resizing=false;var h=this.options,l=this;if(this._helper){var f=this._proportionallyResizeElements,d=f.length&&(/textarea/i).test(f[0].nodeName),e=d&&c.ui.hasScroll(f[0],"left")?0:l.sizeDiff.height,j=d?0:l.sizeDiff.width;var m={width:(l.size.width-j),height:(l.size.height-e)},i=(parseInt(l.element.css("left"),10)+(l.position.left-l.originalPosition.left))||null,k=(parseInt(l.element.css("top"),10)+(l.position.top-l.originalPosition.top))||null;if(!h.animate){this.element.css(c.extend(m,{top:k,left:i}))}l.helper.height(l.size.height);l.helper.width(l.size.width);if(this._helper&&!h.animate){this._proportionallyResize()}}c("body").css("cursor","auto");this.element.removeClass("ui-resizable-resizing");this._propagate("stop",g);if(this._helper){this.helper.remove()}return false},_updateCache:function(d){var e=this.options;this.offset=this.helper.offset();if(a(d.left)){this.position.left=d.left}if(a(d.top)){this.position.top=d.top}if(a(d.height)){this.size.height=d.height}if(a(d.width)){this.size.width=d.width}},_updateRatio:function(g,f){var h=this.options,i=this.position,e=this.size,d=this.axis;if(g.height){g.width=(e.height*this.aspectRatio)}else{if(g.width){g.height=(e.width/this.aspectRatio)}}if(d=="sw"){g.left=i.left+(e.width-g.width);g.top=null}if(d=="nw"){g.top=i.top+(e.height-g.height);g.left=i.left+(e.width-g.width)}return g},_respectSize:function(k,f){var i=this.helper,h=this.options,q=this._aspectRatio||f.shiftKey,p=this.axis,s=a(k.width)&&h.maxWidth&&(h.maxWidth<k.width),l=a(k.height)&&h.maxHeight&&(h.maxHeight<k.height),g=a(k.width)&&h.minWidth&&(h.minWidth>k.width),r=a(k.height)&&h.minHeight&&(h.minHeight>k.height);if(g){k.width=h.minWidth}if(r){k.height=h.minHeight}if(s){k.width=h.maxWidth}if(l){k.height=h.maxHeight}var e=this.originalPosition.left+this.originalSize.width,n=this.position.top+this.size.height;var j=/sw|nw|w/.test(p),d=/nw|ne|n/.test(p);if(g&&j){k.left=e-h.minWidth}if(s&&j){k.left=e-h.maxWidth}if(r&&d){k.top=n-h.minHeight}if(l&&d){k.top=n-h.maxHeight}var m=!k.width&&!k.height;if(m&&!k.left&&k.top){k.top=null}else{if(m&&!k.top&&k.left){k.left=null}}return k},_proportionallyResize:function(){var j=this.options;if(!this._proportionallyResizeElements.length){return}var f=this.helper||this.element;for(var e=0;e<this._proportionallyResizeElements.length;e++){var g=this._proportionallyResizeElements[e];if(!this.borderDif){var d=[g.css("borderTopWidth"),g.css("borderRightWidth"),g.css("borderBottomWidth"),g.css("borderLeftWidth")],h=[g.css("paddingTop"),g.css("paddingRight"),g.css("paddingBottom"),g.css("paddingLeft")];this.borderDif=c.map(d,function(k,m){var l=parseInt(k,10)||0,n=parseInt(h[m],10)||0;return l+n})}if(c.browser.msie&&!(!(c(f).is(":hidden")||c(f).parents(":hidden").length))){continue}g.css({height:(f.height()-this.borderDif[0]-this.borderDif[2])||0,width:(f.width()-this.borderDif[1]-this.borderDif[3])||0})}},_renderProxy:function(){var e=this.element,h=this.options;this.elementOffset=e.offset();if(this._helper){this.helper=this.helper||c('<div style="overflow:hidden;"></div>');var d=c.browser.msie&&c.browser.version<7,f=(d?1:0),g=(d?2:-1);this.helper.addClass(this._helper).css({width:this.element.outerWidth()+g,height:this.element.outerHeight()+g,position:"absolute",left:this.elementOffset.left-f+"px",top:this.elementOffset.top-f+"px",zIndex:++h.zIndex});this.helper.appendTo("body").disableSelection()}else{this.helper=this.element}},_change:{e:function(f,e,d){return{width:this.originalSize.width+e}},w:function(g,e,d){var i=this.options,f=this.originalSize,h=this.originalPosition;return{left:h.left+e,width:f.width-e}},n:function(g,e,d){var i=this.options,f=this.originalSize,h=this.originalPosition;return{top:h.top+d,height:f.height-d}},s:function(f,e,d){return{height:this.originalSize.height+d}},se:function(f,e,d){return c.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[f,e,d]))},sw:function(f,e,d){return c.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[f,e,d]))},ne:function(f,e,d){return c.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[f,e,d]))},nw:function(f,e,d){return c.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[f,e,d]))}},_propagate:function(e,d){c.ui.plugin.call(this,e,[d,this.ui()]);(e!="resize"&&this._trigger(e,d,this.ui()))},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});c.extend(c.ui.resizable,{version:"1.8.1"});c.ui.plugin.add("resizable","alsoResize",{start:function(e,f){var d=c(this).data("resizable"),h=d.options;var g=function(i){c(i).each(function(){c(this).data("resizable-alsoresize",{width:parseInt(c(this).width(),10),height:parseInt(c(this).height(),10),left:parseInt(c(this).css("left"),10),top:parseInt(c(this).css("top"),10)})})};if(typeof(h.alsoResize)=="object"&&!h.alsoResize.parentNode){if(h.alsoResize.length){h.alsoResize=h.alsoResize[0];g(h.alsoResize)}else{c.each(h.alsoResize,function(i,j){g(i)})}}else{g(h.alsoResize)}},resize:function(f,h){var e=c(this).data("resizable"),i=e.options,g=e.originalSize,k=e.originalPosition;var j={height:(e.size.height-g.height)||0,width:(e.size.width-g.width)||0,top:(e.position.top-k.top)||0,left:(e.position.left-k.left)||0},d=function(l,m){c(l).each(function(){var p=c(this),q=c(this).data("resizable-alsoresize"),o={},n=m&&m.length?m:["width","height","top","left"];c.each(n||["width","height","top","left"],function(r,t){var s=(q[t]||0)+(j[t]||0);if(s&&s>=0){o[t]=s||null}});if(/relative/.test(p.css("position"))&&c.browser.opera){e._revertToRelativePosition=true;p.css({position:"absolute",top:"auto",left:"auto"})}p.css(o)})};if(typeof(i.alsoResize)=="object"&&!i.alsoResize.nodeType){c.each(i.alsoResize,function(l,m){d(l,m)})}else{d(i.alsoResize)}},stop:function(e,f){var d=c(this).data("resizable");if(d._revertToRelativePosition&&c.browser.opera){d._revertToRelativePosition=false;el.css({position:"relative"})}c(this).removeData("resizable-alsoresize-start")}});c.ui.plugin.add("resizable","animate",{stop:function(h,m){var n=c(this).data("resizable"),i=n.options;var g=n._proportionallyResizeElements,d=g.length&&(/textarea/i).test(g[0].nodeName),e=d&&c.ui.hasScroll(g[0],"left")?0:n.sizeDiff.height,k=d?0:n.sizeDiff.width;var f={width:(n.size.width-k),height:(n.size.height-e)},j=(parseInt(n.element.css("left"),10)+(n.position.left-n.originalPosition.left))||null,l=(parseInt(n.element.css("top"),10)+(n.position.top-n.originalPosition.top))||null;n.element.animate(c.extend(f,l&&j?{top:l,left:j}:{}),{duration:i.animateDuration,easing:i.animateEasing,step:function(){var o={width:parseInt(n.element.css("width"),10),height:parseInt(n.element.css("height"),10),top:parseInt(n.element.css("top"),10),left:parseInt(n.element.css("left"),10)};if(g&&g.length){c(g[0]).css({width:o.width,height:o.height})}n._updateCache(o);n._propagate("resize",h)}})}});c.ui.plugin.add("resizable","containment",{start:function(e,q){var s=c(this).data("resizable"),i=s.options,k=s.element;var f=i.containment,j=(f instanceof c)?f.get(0):(/parent/.test(f))?k.parent().get(0):f;if(!j){return}s.containerElement=c(j);if(/document/.test(f)||f==document){s.containerOffset={left:0,top:0};s.containerPosition={left:0,top:0};s.parentData={element:c(document),left:0,top:0,width:c(document).width(),height:c(document).height()||document.body.parentNode.scrollHeight}}else{var m=c(j),h=[];c(["Top","Right","Left","Bottom"]).each(function(p,o){h[p]=b(m.css("padding"+o))});s.containerOffset=m.offset();s.containerPosition=m.position();s.containerSize={height:(m.innerHeight()-h[3]),width:(m.innerWidth()-h[1])};var n=s.containerOffset,d=s.containerSize.height,l=s.containerSize.width,g=(c.ui.hasScroll(j,"left")?j.scrollWidth:l),r=(c.ui.hasScroll(j)?j.scrollHeight:d);s.parentData={element:j,left:n.left,top:n.top,width:g,height:r}}},resize:function(f,p){var s=c(this).data("resizable"),h=s.options,e=s.containerSize,n=s.containerOffset,l=s.size,m=s.position,q=s._aspectRatio||f.shiftKey,d={top:0,left:0},g=s.containerElement;if(g[0]!=document&&(/static/).test(g.css("position"))){d=n}if(m.left<(s._helper?n.left:0)){s.size.width=s.size.width+(s._helper?(s.position.left-n.left):(s.position.left-d.left));if(q){s.size.height=s.size.width/h.aspectRatio}s.position.left=h.helper?n.left:0}if(m.top<(s._helper?n.top:0)){s.size.height=s.size.height+(s._helper?(s.position.top-n.top):s.position.top);if(q){s.size.width=s.size.height*h.aspectRatio}s.position.top=s._helper?n.top:0}s.offset.left=s.parentData.left+s.position.left;s.offset.top=s.parentData.top+s.position.top;var k=Math.abs((s._helper?s.offset.left-d.left:(s.offset.left-d.left))+s.sizeDiff.width),r=Math.abs((s._helper?s.offset.top-d.top:(s.offset.top-n.top))+s.sizeDiff.height);var j=s.containerElement.get(0)==s.element.parent().get(0),i=/relative|absolute/.test(s.containerElement.css("position"));if(j&&i){k-=s.parentData.left}if(k+s.size.width>=s.parentData.width){s.size.width=s.parentData.width-k;if(q){s.size.height=s.size.width/s.aspectRatio}}if(r+s.size.height>=s.parentData.height){s.size.height=s.parentData.height-r;if(q){s.size.width=s.size.height*s.aspectRatio}}},stop:function(e,m){var p=c(this).data("resizable"),f=p.options,k=p.position,l=p.containerOffset,d=p.containerPosition,g=p.containerElement;var i=c(p.helper),q=i.offset(),n=i.outerWidth()-p.sizeDiff.width,j=i.outerHeight()-p.sizeDiff.height;if(p._helper&&!f.animate&&(/relative/).test(g.css("position"))){c(this).css({left:q.left-d.left-l.left,width:n,height:j})}if(p._helper&&!f.animate&&(/static/).test(g.css("position"))){c(this).css({left:q.left-d.left-l.left,width:n,height:j})}}});c.ui.plugin.add("resizable","ghost",{start:function(f,g){var d=c(this).data("resizable"),h=d.options,e=d.size;d.ghost=d.originalElement.clone();d.ghost.css({opacity:0.25,display:"block",position:"relative",height:e.height,width:e.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof h.ghost=="string"?h.ghost:"");d.ghost.appendTo(d.helper)},resize:function(e,f){var d=c(this).data("resizable"),g=d.options;if(d.ghost){d.ghost.css({position:"relative",height:d.size.height,width:d.size.width})}},stop:function(e,f){var d=c(this).data("resizable"),g=d.options;if(d.ghost&&d.helper){d.helper.get(0).removeChild(d.ghost.get(0))}}});c.ui.plugin.add("resizable","grid",{resize:function(d,l){var n=c(this).data("resizable"),g=n.options,j=n.size,h=n.originalSize,i=n.originalPosition,m=n.axis,k=g._aspectRatio||d.shiftKey;g.grid=typeof g.grid=="number"?[g.grid,g.grid]:g.grid;var f=Math.round((j.width-h.width)/(g.grid[0]||1))*(g.grid[0]||1),e=Math.round((j.height-h.height)/(g.grid[1]||1))*(g.grid[1]||1);if(/^(se|s|e)$/.test(m)){n.size.width=h.width+f;n.size.height=h.height+e}else{if(/^(ne)$/.test(m)){n.size.width=h.width+f;n.size.height=h.height+e;n.position.top=i.top-e}else{if(/^(sw)$/.test(m)){n.size.width=h.width+f;n.size.height=h.height+e;n.position.left=i.left-f}else{n.size.width=h.width+f;n.size.height=h.height+e;n.position.top=i.top-e;n.position.left=i.left-f}}}}});var b=function(d){return parseInt(d,10)||0};var a=function(d){return !isNaN(parseInt(d,10))}})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/lib/jquery-plugins/jquery.tourbus.js' */
(function e(b,g,d){function c(k,i){if(!g[k]){if(!b[k]){var h=typeof require=="function"&&require;if(!i&&h){return h(k,!0)}if(a){return a(k,!0)}throw new Error("Cannot find module '"+k+"'")}var j=g[k]={exports:{}};b[k][0].call(j.exports,function(l){var m=b[k][1][l];return c(m?m:l)},j,j.exports,e,b,g,d)}return g[k].exports}var a=typeof require=="function"&&require;for(var f=0;f<d.length;f++){c(d[f])}return c})({1:[function(b,c,a){(function(){var g,j,f,d,i,h=[].slice;g=jQuery;j=b("./modules/bus");f=b("./modules/leg");i=g.tourbus=function(){var k,l;k=1<=arguments.length?h.call(arguments,0):[];l=k[0];if(d.hasOwnProperty(l)){k=k.slice(1)}else{if(l instanceof g){l="build"}else{if(typeof l==="string"){l="build";k[0]=g(k[0])}else{g.error("Unknown method of $.tourbus --",k)}}}return d[l].apply(this,k)};g.fn.tourbus=function(){var k;k=1<=arguments.length?h.call(arguments,0):[];return this.each(function(){k.unshift(g(this));i.apply(null,["build"].concat(h.call(k)));return this})};d={build:function(m,k){var l;if(k==null){k={}}k=g.extend(true,{},i.defaults,k);l=[];if(!(m instanceof g)){m=g(m)}m.each(function(){return l.push(new j(this,k))});if(l.length===0){g.error(""+m.selector+" was not found!")}if(l.length===1){return l[0]}return l},destroyAll:function(){var l,m,n,k;n=j._busses;k=[];for(m in n){l=n[m];k.push(l.destroy())}return k},expose:function(k){return k.tourbus={Bus:j,Leg:f}}};i.defaults={debug:false,autoDepart:false,container:"body","class":null,startAt:0,onDepart:function(){return null},onStop:function(){return null},onLegStart:function(){return null},onLegEnd:function(){return null},leg:{"class":null,scrollTo:null,scrollSpeed:150,scrollContext:100,orientation:"bottom",align:"left",width:"auto",margin:10,top:null,left:null,zindex:9999,arrow:"50%"}}}).call(this)},{"./modules/bus":2,"./modules/leg":3}],2:[function(b,c,a){(function(){var g,i,f,d,h=[].slice;g=jQuery;f=b("./leg");d=b("./utils");c.exports=i=(function(){j._busses={};j._tours=0;j.uniqueId=function(){return this._tours++};function j(l,k){this.options=k;this.id=this.constructor.uniqueId();this.elId="tourbus-"+this.id;this.constructor._busses[this.id]=this;this.$original=g(l);this.rawData=this.$original.data();this.$container=g(d.dataProp(this.rawData.container,this.options.container));this.$original.data({tourbus:this});this.currentLegIndex=null;this.legs=[];this.legEls=this.$original.children("li");this.totalLegs=this.legEls.length;this._configureElement();this._setupEvents();if(d.dataProp(this.rawData.autoDepart,this.options.autoDepart)){this.$original.trigger("depart.tourbus")}this._log("built tourbus with el",l.toString(),"and options",this.options)}j.prototype.depart=function(){this.running=true;this.options.onDepart(this);this._log("departing",this);this.currentLegIndex=d.dataProp(this.rawData.startAt,this.options.startAt);return this.showLeg()};j.prototype.stop=function(k){if(!this.running){return}if(k&&k.stopPropagation){k.stopPropagation()}g.each(this.legs,g.proxy(this.hideLeg,this));this.currentLegIndex=null;this.options.onStop(this);return this.running=false};j.prototype.on=function(m,k,l){return this.$container.on(m,k,l)};j.prototype.currentLeg=function(){if(this.currentLegIndex===null){return null}return this.legs[this.currentLegIndex]};j.prototype.buildLeg=function(l){var k,n,m;k=g(this.legEls[l]);n=k.data();this.legs[l]=m=new f({bus:this,original:k,target:k.attr("data-el")||"body",index:l,rawData:n});m.render();this.$el.append(m.$el);m._position();m.hide();return m};j.prototype.showLeg=function(l){var m,k;if(l==null){l=this.currentLegIndex}m=this.legs[l]||this.buildLeg(l);this._log("showLeg:",m);k=this.options.onLegStart(m,this);if(k!==false){m.show()}if(++l<this.totalLegs&&!this.legs[l]){return this.buildLeg(l)}};j.prototype.hideLeg=function(l){var m,k;if(l==null){l=this.currentLegIndex}m=this.legs[l];if(m&&m.visible){this._log("hideLeg:",m);k=this.options.onLegEnd(m,this);if(k!==false){m.hide()}}if(--l>0&&!this.legs[l]){return this.buildLeg(l)}};j.prototype.repositionLegs=function(){return g.each(this.legs,function(k,l){if(l){l.reposition()}return})};j.prototype.next=function(k){if(k&&k.stopPropagation){k.stopPropagation()}this.hideLeg();this.currentLegIndex++;if(this.currentLegIndex>this.totalLegs-1){return this.$original.trigger("stop.tourbus")}else{return this.showLeg()}};j.prototype.prev=function(k){if(k&&k.stopPropagation){k.stopPropagation()}this.hideLeg();this.currentLegIndex--;if(this.currentLegIndex<0){return this.$original.trigger("stop.tourbus")}else{return this.showLeg()}};j.prototype.destroy=function(){g.each(this.legs,function(k,l){if(l&&l.destroy){l.destroy()}});this.legs=[];delete this.constructor._busses[this.id];this._teardownEvents();this.$original.removeData("tourbus");return this.$el.remove()};j.prototype._configureElement=function(){this.$el=g("<div class='tourbus-container'></div>");this.el=this.$el[0];this.$el.attr({id:this.elId});this.$el.addClass(d.dataProp(this.rawData["class"],this.options["class"]));return this.$container.append(this.$el)};j.prototype._log=function(){if(!d.dataProp(this.rawData.debug,this.options.debug)){return}return console.log.apply(console,["TOURBUS "+this.id+":"].concat(h.call(arguments)))};j.prototype._setupEvents=function(){this.$original.on("depart.tourbus",g.proxy(this.depart,this));this.$original.on("stop.tourbus",g.proxy(this.stop,this));this.$original.on("next.tourbus",g.proxy(this.next,this));return this.$original.on("prev.tourbus",g.proxy(this.prev,this))};j.prototype._teardownEvents=function(){return this.$original.off(".tourbus")};return j})()}).call(this)},{"./leg":3,"./utils":4}],3:[function(b,c,a){(function(){var g,f,d,h;g=jQuery;d=b("./utils");c.exports=f=(function(){function i(j){this.options=j;this.$original=this.options.original;this.bus=this.options.bus;this.rawData=this.options.rawData;this.index=this.options.index;this.$target=g(this.options.target);this.id=""+this.bus.id+"-"+this.options.index;this.elId="tourbus-leg-"+this.id;this.visible=false;if(this.$target.length===0){throw""+this.$target.selector+" is not an element!"}this.content=this.$original.html();this._setupOptions();this._configureElement();this._configureTarget();this._configureScroll();this._setupEvents();this.bus._log("leg "+this.index+" made with options",this.options)}i.prototype.render=function(){var k,j;k=this.options.orientation==="centered"?"":"tourbus-arrow";this.$el.addClass(" "+k+" tourbus-arrow-"+this.options.orientation+" ");j="<div class='tourbus-leg-inner'>\n  "+this.content+"\n</div>";this.$el.css({width:this.options.width,zIndex:this.options.zindex}).html(j);return this};i.prototype.destroy=function(){this.$el.remove();return this._teardownEvents()};i.prototype.reposition=function(){this._configureTarget();return this._position()};i.prototype._position=function(){var k,l,m,j;if(this.options.orientation!=="centered"){m={};l={top:"left",bottom:"left",left:"top",right:"top"};if(typeof this.options.arrow==="number"){this.options.arrow+="px"}m[l[this.options.orientation]]=this.options.arrow;j="#"+this.elId+".tourbus-arrow";this.bus._log("adding rule for "+this.elId,m);h(""+j+":before, "+j+":after",m)}k=this._offsets();this.bus._log("setting offsets on leg",k);return this.$el.css(k)};i.prototype.show=function(){this.visible=true;this.$el.css({visibility:"visible",opacity:1,zIndex:this.options.zindex});return this.scrollIntoView()};i.prototype.hide=function(){this.visible=false;if(this.bus.options.debug){return this.$el.css({visibility:"visible",opacity:0.4,zIndex:0})}else{return this.$el.css({visibility:"hidden"})}};i.prototype.scrollIntoView=function(){var j;if(!this.willScroll){return}j=d.dataProp(this.options.scrollTo,this.$el);this.bus._log("scrolling to",j,this.scrollSettings);return g.scrollTo(j,this.scrollSettings)};i.prototype._setupOptions=function(){var m,l,o,n,k,j;l=this.bus.options.leg;m=["class","top","left","scrollTo","scrollSpeed","scrollContext","margin","arrow","align","width","zindex","orientation"];j=[];for(n=0,k=m.length;n<k;n++){o=m[n];j.push(this.options[o]=d.dataProp(this.rawData[o],l[o]))}return j};i.prototype._configureElement=function(){this.$el=g("<div class='tourbus-leg'></div>");this.el=this.$el[0];this.$el.attr({id:this.elId});this.$el.addClass(this.options["class"]);return this.$el.css({zIndex:this.options.zindex})};i.prototype._setupEvents=function(){this.$el.on("click",".tourbus-next",g.proxy(this.bus.next,this.bus));this.$el.on("click",".tourbus-prev",g.proxy(this.bus.prev,this.bus));return this.$el.on("click",".tourbus-stop",g.proxy(this.bus.stop,this.bus))};i.prototype._teardownEvents=function(){return this.$el.off("click")};i.prototype._configureTarget=function(){this.targetOffset=this.$target.offset();if(d.dataProp(this.options.top,false)){this.targetOffset.top=this.options.top}if(d.dataProp(this.options.left,false)){this.targetOffset.left=this.options.left}this.targetWidth=this.$target.outerWidth();return this.targetHeight=this.$target.outerHeight()};i.prototype._configureScroll=function(){this.willScroll=g.fn.scrollTo&&this.options.scrollTo!==false;return this.scrollSettings={offset:-this.options.scrollContext,easing:"linear",axis:"y",duration:this.options.scrollSpeed}};i.prototype._offsets=function(){var m,u,o,t,k,j,q,s;o=this.$el.height();t=this.$el.width();var r,p;r=this.$target.width();p=this.$target.height();k={};switch(this.options.orientation){case"centered":q=g(window).height();k.top=this.options.top;if(!d.dataProp(k.top,false)){k.top=(q/2)-(o/2)}k.left=(this.targetWidth/2)-(t/2);break;case"left":var l=0;if(!(typeof this.options.arrow==="number")){var n=parseFloat(this.options.arrow);l=(n*o)/100;k.top=this.targetOffset.top+this.options.top+p/2-l}else{k.top=this.targetOffset.top-o/2+p/2+this.options.top}k.left=this.targetOffset.left-t-this.options.margin;break;case"right":k.top=this.targetOffset.top-o/2+p/2;k.left=this.targetOffset.left+this.targetWidth+this.options.margin;break;case"top":k.top=this.targetOffset.top-o-this.options.margin;k.left=this.targetOffset.left-t/2+r/2;break;case"bottom":k.top=this.targetOffset.top+this.targetHeight+this.options.margin;k.left=this.targetOffset.left-t/2+r/2}s={top:["left","right"],bottom:["left","right"],left:["top","bottom"],right:["top","bottom"]};if(d.include(this.options.orientation,s[this.options.align])){switch(this.options.align){case"right":k.left+=this.targetWidth-t;break;case"bottom":k.top+=this.targetHeight-o}}else{if(this.options.align==="center"){if(d.include(this.options.orientation,s.left)){j=this.targetWidth/2;u=t/2;m="left"}else{j=this.targetHeight/2;u=o/2;m="top"}if(j>u){k[m]+=j-u}else{k[m]-=u-j}}}return k};return i})();h=(function(i){var j;i.type="text/css";document.getElementsByTagName("head")[0].appendChild(i);j=document.styleSheets[document.styleSheets.length-1];return function(k,n){var m,l;l=g.map((function(){var p;p=[];for(m in n){p.push(m)}return p})(),function(q){return""+q+":"+n[q]}).join(";");try{if(j.insertRule){j.insertRule(""+k+" { "+l+" }",(j.cssRules||j.rules).length)}else{j.addRule(k,l)}}catch(o){}}})(document.createElement("style"))}).call(this)},{"./utils":4}],4:[function(b,c,a){(function(){c.exports={dataProp:function(f,d){if(f===null||typeof f==="undefined"){return d}return f},include:function(d,f){return $.inArray(d,f||[])!==-1}}}).call(this)},{}]},{},[1,2,3,4]);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/components/local-stogare/local-storage.js' */
define("tc/localStorage",["jquery"],function(e){var c=function(){return{getItem:function(h){e.cookie(h)},setItem:function(i,j,h){e.cookie(i,j,h)}}}();var g="team-calendars",a=Confluence.storageManager?Confluence.storageManager(g):(localStorage?localStorage:c),b=AJS.Meta.get("remote-user"),d="confluence."+b+"."+g;var f=function(h){return Confluence.storageManager?h:d+"."+h};return{getItem:function(h){return a.getItem(f(h))},setItem:function(i,j,h){a.setItem(f(i),j,h)}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/components/local-stogare/local-storage-compat.js' */
require(["tc/localStorage"],function(a){Confluence.TeamCalendars.LocalStorage=a});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/components/my-calendar-tour/my-calendar-tour.js' */
define("tc/myCalendarTour",["jquery","underscore","tc/localStorage"],function(n,C,s){var j="team.calendar";var d=j+".tour";var h=false;var p=false;var r=true;var e=d+".currentLegIndex";var m=d+".currentAttachedCalendar";var x=d+".done";var l="div[data-sub-calendar-id='#calendarID']";var t=function(F){var G=F.calendarID;if(!G){return null}return l.replace("#calendarID",G)};var b={selectMenuItem:function(G,I){var H=t(G);if(!H){return}var F=H+I;n(F).parent().addClass("active")},unSelectMenuItem:function(G,I){var H=t(G);if(!H){return}var F=H+I;n(F).parent().removeClass("active")}};var c={openMenu:function(F){var G=t(F);if(n(G+" .subcalendar-dropdown-menu.parent-subCalendar.active").size()>0){return}n(G+" .subcalendar-dropdown-menu .subcalendar-dropdown-menu-button .aui-button.aui-button-compact").click()},closeMenu:function(F){var G=t(F);if(n(G+" .subcalendar-dropdown-menu.parent-subCalendar.active").size()>0){r=false;n(".calendar-panel").click()}},hightLightEditMenuItem:function(F){return b.selectMenuItem(F," .parent-subCalendar a.subcalendar-edit")},unHightLightEditMenuItem:function(F){return b.unSelectMenuItem(F," .parent-subCalendar a.subcalendar-edit")},hightLightRestrictionMenuItem:function(F){return b.selectMenuItem(F," .parent-subCalendar a.subcalendar-restrict")},unHightLightRestrictionMenuItem:function(F){return b.unSelectMenuItem(F," .parent-subCalendar a.subcalendar-restrict")},hightLightShareMenuItem:function(F){return b.selectMenuItem(F," .parent-subCalendar a.subcalendar-share-or-embed")},unHightLightShareMenuItem:function(F){return b.unSelectMenuItem(F," .parent-subCalendar a.subcalendar-share-or-embed")}};var z=function(F){i(F);a(F);A(F)};var k=function(F){w(F);E(F);D()};var a=function(F){n(document).on("keydown",B)};var E=function(F){n(document).off("keydown",B)};var B=function(F){if(F.keyCode===27){p=true;u.stop()}};var i=function(G){var F=this;if(!h){n("body").on("click."+d,function(I){var H=n(I.target);if(!r){r=true;return}if(H.closest(".tourbus-leg-inner").length===0){p=true;G.stop()}});h=true}};var w=function(F){if(h){n("body").off("click."+d)}h=false};var A=function(F){n(window).bind("resize."+d,function(G){F.repositionLegs()})};var D=function(){n(window).unbind("resize."+d)};var v=function(F){var G=t({calendarID:F});if(n(G).is(G)){C.each(n("ol.tourbus-legs li.tc-tour-dynamic"),function(J){var I=n(J);var H=I.data("el");I.attr("data-el",G+" "+H)});return true}return false};var g=function(G,F){if(!G||!F){AJS.log("Team Calendar tour - could not execute action because invalid calendarID or actionsString");return}C.each(F.split(" "),function(I){var H=c[I];if(H){AJS.log("Team Calendar tour - leg actions - "+I);H({calendarID:G});AJS.log("Team Calendar tour - leg actions - "+I+" done")}})};var o=function(){AJS.log("Team Calendar tour - mark as DONE");s.setItem(x,"done")};var y=function(){return s.getItem(x)==="done"};var q=function(){if(AJS.dropDown.current&&AJS.dropDown.current.hide){AJS.log("Team Calendar tour - hidding dropdown menu");AJS.dropDown.current.hide()}};var f=undefined;var u=undefined;return{tcStorage:s,tourBus:u,start:function(G){if(n(".aui-message.error.license-invalid").size()>0){AJS.log("Team Calendar tour - is available when license is valid");return}if(y()){AJS.log("Team Calendar tour - is already done");return}if(n(".plugin-calendar-container.page").size()>0){AJS.log("Team Calendar tour - is only available on MyCalendar");return}if(!G){G=s.getItem(m)}else{s.setItem(e,0);s.setItem(m,G)}var F=s.getItem(e);if(!F){F=0}if(!v(G)){AJS.log("Team Calendar tour - could not attached to target elements");return}if(u){p=true;q();u.stop();u.destroy();p=false}f=n("#my-calendar-tour").tourbus({startAt:F,onDepart:function(H){AJS.log("Team Calendar tour - depart");z(H)},onStop:function(H){AJS.log("Team Calendar tour - stop");k(H);c.closeMenu({calendarID:G});if(!p){o();s.setItem(e,0);Confluence.TeamCalendars.fireEventForAnalytics("tour.finish",{stepNumber:-1});p=false}},onLegStart:function(L,N){AJS.log("Team Calendar tour - leg start");s.setItem(e,N.currentLegIndex);var M=L.$el.find(".order");var I=N.currentLegIndex;var H=M.html();H=H.replace("#legIndex",++I);H=H.replace("#totalLegs",N.totalLegs);M.html(H);AJS.log("Team Calendar tour - leg - executing before actions");var J=L.$original.data("before-leg-actions");g(G,J);AJS.log("Team Calendar tour - leg start - before actions executed");L.reposition();var K={stepNumber:N.currentLegIndex};Confluence.TeamCalendars.fireEventForAnalytics("tour.step",K)},onLegEnd:function(I,J){AJS.log("Team Calendar tour - leg end");AJS.log("Team Calendar tour - leg - executing after actions");var H=I.$original.data("after-leg-actions");g(G,H);AJS.log("Team Calendar tour - leg end - after actions executed")},leg:{zindex:2400,width:270,margin:15}});u=f.data("tourbus");if(!u.running){u.depart()}},stop:function(){if(u){o();u.stop()}},softStop:function(){if(u){o();u.hideLeg()}},destroy:function(){if(u){u.destroy()}},showLeg:function(F){if(u){u.showLeg(F)}},hideLeg:function(){if(u){u.hideLeg();var F={stepNumber:u.currentLegIndex}}},isShowCustomEventTypeFrom:function(G){if(y()){return false}var F=s.getItem(m);if(F===""||!F){return false}var H=s.getItem(e);if(H!=="0"){return false}if(F!==G){return false}return true},reposition:function(){if(u&&!y()){u.repositionLegs()}}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/components/my-calendar-tour/my-calendar-tour.soy' */
// This file was automatically generated from my-calendar-tour.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.calendarTourContent = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<ol class="tourbus-legs" id="my-calendar-tour" ><li class="tc-tour-dynamic" data-el=".parent-subCalendar a.subcalendar-edit" data-orientation="left" data-align="left" data-arrow="50%" data-before-leg-actions="openMenu hightLightEditMenuItem" data-after-leg-actions="unHightLightEditMenuItem closeMenu"><span class="tourbus-title">', soy.$$escapeHtml("EDIT THE CALENDAR"), '</span><p>', soy.$$escapeHtml("Customise the different types of events you\x27d like to manage in this calendar."), '</p><button class="tourbus-btn tourbus-next aui-button">Next</button><button class="tourbus-btn tourbus-stop aui-button aui-button-link">Skip tour</button><span class="order">#legIndex/#totalLegs</span></li><li class="tc-tour-dynamic" data-el=".parent-subCalendar a.subcalendar-restrict" data-orientation="left" data-align="left" data-arrow="50%" data-before-leg-actions="openMenu hightLightRestrictionMenuItem" data-after-leg-actions="unHightLightRestrictionMenuItem closeMenu"><span class="tourbus-title">', soy.$$escapeHtml("RESTRICT THE CALENDAR"), '</span><p>', soy.$$escapeHtml("Optionally, restrict who can view or add events to the team calendar."), '</p><button class="tourbus-btn tourbus-next aui-button">Next</button><button class="tourbus-btn tourbus-stop aui-button aui-button-link">Skip tour</button><span class="order">#legIndex/#totalLegs</span></li><li class="tc-tour-dynamic" data-el=".parent-subCalendar a.subcalendar-share-or-embed" data-orientation="left" data-align="left" data-arrow="50%" data-before-leg-actions="openMenu hightLightShareMenuItem" data-after-leg-actions="unHightLightShareMenuItem  closeMenu"><span class="tourbus-title">', soy.$$escapeHtml("SHARE WITH YOUR TEAM"), '</span><p>', soy.$$escapeHtml("Grab the calendar\x27s URL and email it to your team, or paste it on a page to embed the calendar."), '</p><button class="tourbus-btn tourbus-next aui-button">Next</button><button class="tourbus-btn tourbus-stop aui-button aui-button-link">Skip tour</button><span class="order">#legIndex/#totalLegs</span></li><li data-el="#add-event-link" data-orientation="left" data-arrow="17%" ><span class="tourbus-title">', soy.$$escapeHtml("ADD AN EVENT"), '</span><p>', soy.$$escapeHtml("The calendar is ready to go! Click any day on the calendar to add an event or use the Add event button."), '</p><button class="tourbus-btn tourbus-stop aui-button">Done</button><span class="order">#legIndex/#totalLegs</span></li></ol>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/components/my-calendar-tour/my-calendar-tour-compat.js' */
require(["tc/myCalendarTour"],function(a){if(!Confluence.TeamCalendars){Confluence.TeamCalendars={}}Confluence.TeamCalendars.CalendarTour=function(){return a}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/lib/fullcalendar.js' */
/*!
 * FullCalendar v1.6.4
 * Docs & License: http://arshaw.com/fullcalendar/
 * (c) 2013 Adam Shaw
 */
(function(av,w){var c={isDisplayTimeFormat24hour:function(){return AJS.Meta.get("team-calendars-display-time-format")==="displayTimeFormat24"},getTimelineAdapter:function(aN,aP,aO,aQ){return Confluence.TeamCalendars.getTimelineAdapter(aN,aP,aO,aQ)},Templates:function(){return Confluence.TeamCalendars.Templates},getUserTimeZone:function(){return Confluence.TeamCalendars.getUserTimeZone()}};var O={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:true,weekNumbers:false,weekNumberCalculation:"iso",weekNumberTitle:"W",allDayDefault:true,ignoreTimezone:true,lazyFetching:true,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":c.isDisplayTimeFormat24hour()===true?"HH:mm":"h:mm TT"},isRTL:false,firstDay:0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],buttonText:{prev:"<span class='fc-text-arrow'>&lsaquo;</span>",next:"<span class='fc-text-arrow'>&rsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&laquo;</span>",nextYear:"<span class='fc-text-arrow'>&raquo;</span>",today:"today",month:"month",week:"week",day:"day"},theme:false,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:true,dropAccept:"*",handleWindowResize:true,supportPrint:true};var T={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"<span class='fc-text-arrow'>&rsaquo;</span>",next:"<span class='fc-text-arrow'>&lsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&raquo;</span>",nextYear:"<span class='fc-text-arrow'>&laquo;</span>"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}};var aD=av.fullCalendar={version:"1.6.4"};var ag=aD.views={};av.fn.fullCalendar=function(aP){if(typeof aP=="string"){var aO=Array.prototype.slice.call(arguments,1);var aQ;this.each(function(){var aS=av.data(this,"fullCalendar");if(aS&&av.isFunction(aS[aP])){var aR=aS[aP].apply(aS,aO);if(aQ===w){aQ=aR}if(aP=="destroy"){av.removeData(this,"fullCalendar")}}});if(aQ!==w){return aQ}return this}aP=aP||{};var aN=aP.eventSources||[];delete aP.eventSources;if(aP.events){aN.push(aP.events);delete aP.events}aP=av.extend(true,{},O,(aP.isRTL||aP.isRTL===w&&O.isRTL)?T:{},aP);this.each(function(aT,aR){var aS=av(aR);var aU=new u(aS,aP,aN);aS.data("fullCalendar",aU);aU.render()});return this};function ak(aN){av.extend(true,O,aN)}function u(a7,be,bh){var bB=this;bB.options=be;bB.render=bq;bB.destroy=bD;bB.refetchEvents=a2;bB.reportEvents=a4;bB.reportEventChange=bF;bB.rerenderEvents=aQ;bB.changeView=aY;bB.select=bC;bB.unselect=aZ;bB.prev=bl;bB.next=aP;bB.prevYear=bE;bB.nextYear=aO;bB.today=a8;bB.gotoDate=bp;bB.incrementDate=bb;bB.formatDate=function(bL,bK){return E(bL,bK,be)};bB.formatDates=function(bM,bL,bK){return l(bM,bL,bK,be)};bB.getDate=bc;bB.getView=bi;bB.option=by;bB.trigger=bn;t.call(bB,be,bh);var aN=bB.isFetchNeeded;var bI=bB.fetchEvents;var bz=a7[0];var aS;var br;var a1;var bJ;var a0;var bm;var aV;var bs=0;var bA=0;var bG=new Date();var bg=[];var aT;B(bG,be.year,be.month,be.date);function bq(bR){if(!a1){bf()}else{if(bw()){bt();bH(bR)}}var bQ=av("div.plugin-calendar .calendar-layout");var bN=av("div.plugin-calendar .calendar-panel");var bP=function(bS){bt();bH(bS)};var bK=function(bS){bQ.css("width",bS);bN.css("margin-right",0);bP()};var bM=function(){bQ.css("width","");bN.css("margin-right","");var bS=navigator.userAgent.indexOf("Chrome")>-1;if(!bS){bP()}};if(be.supportPrint){var bL=Math.min(bQ.width(),1200);if(window.matchMedia){var bO=window.matchMedia("print");bO.addListener(function(bS){if(a0.name!=="timeline"){if(bS.matches){bK(bL)}else{bM()}}})}av(window).bind("beforeprint",function(){if(a0.name!=="timeline"){bK(bL*0.75)}}).bind("afterprint",function(){if(a0.name!=="timeline"){bM()}})}}function bf(){bJ=be.theme?"ui":"fc";a7.addClass("fc");if(be.isRTL){a7.addClass("fc-rtl")}else{a7.addClass("fc-ltr")}if(be.theme){a7.addClass("ui-widget")}a1=av("<div class='fc-content' style='position:relative'/>").prependTo(a7);aS=new U(bB,be);br=aS.render();if(br){a7.prepend(br)}aY(be.defaultView);if(be.handleWindowResize){av(window).resize(a3)}bo();if(!a6()){aX()}}function bo(){if(bw()){AJS.log("TC detected the width. Will go ahead !!!");bd()}else{setTimeout(bo,500)}}function aX(){setTimeout(function(){if(!a0.start&&a6()){bd()}},0)}function bD(){if(a0){bn("viewDestroy",a0,a0,a0.element);a0.triggerEventDestroy()}av(window).unbind("resize",a3);aS.destroy();a1.remove();a7.removeClass("fc fc-rtl ui-widget")}function bw(){return a7.is(":visible")}function a6(){return av("body").is(":visible")}function aY(bK){if(!a0||bK!=a0.name){bu(bK)}}function bu(bK){bA++;if(a0){bn("viewDestroy",a0,a0,a0.element);aZ();a0.triggerEventDestroy();aR();a0.element.remove();aS.deactivateButton(a0.name)}aS.activateButton(bK);a0=new ag[bK](av("<div class='fc-view fc-view-"+bK+"' style='position:relative'/>").appendTo(a1),bB);bd();a5();bA--}function bd(bK){if(!a0.start||bK||bG<a0.start||bG>=a0.end){if(bw()){bH(bK)}}}function bH(bK){bA++;if(a0.start){bn("viewDestroy",a0,a0,a0.element);aZ();bj()}aR();a0.render(bG,bK||0);bx();a5();(a0.afterRender||at)();a9();bk();bn("viewRender",a0,a0,a0.element);a0.trigger("viewDisplay",bz);bA--;aW()}function ba(){if(bw()){aZ();bj();bt();bx();aU()}}function bt(){if(be.contentHeight){aV=be.contentHeight}else{if(be.height){aV=be.height-(br?br.height():0)-I(a1)}else{aV=Math.round(a1.width()/Math.max(be.aspectRatio,0.5))}}}function bx(){if(aV===w){bt()}bA++;a0.setHeight(aV);a0.setWidth(a1.width());bA--;bm=a7.outerWidth()}function a3(){if(!bA){if(a0.start){var bK=++bs;setTimeout(function(){if(bK==bs&&!bA&&bw()){if(bm!=(bm=a7.outerWidth())){bA++;ba();a0.trigger("windowResize",bz);bA--}}},200)}else{aX()}}}function a2(){bj();bv()}function aQ(bK){bj();aU(bK)}function aU(bK){if(bw()){a0.setEventData(bg);a0.renderEvents(bg,bK);a0.trigger("eventAfterAllRender")}}function bj(){a0.triggerEventDestroy();a0.clearEvents();a0.clearEventData()}function aW(){if(!be.lazyFetching||aN(a0.visStart,a0.visEnd)){bv()}else{aU()}}function bv(){bI(a0.visStart,a0.visEnd)}function a4(bK){bg=bK;aU()}function bF(bK){aQ(bK)}function a9(){aS.updateTitle(a0.title)}function bk(){var bK=new Date();if(bK>=a0.start&&bK<a0.end){aS.disableButton("today")}else{aS.enableButton("today")}}function bC(bM,bK,bL){a0.select(bM,bK,bL===w?true:bL)}function aZ(){if(a0){a0.unselect()}}function bl(){if(a0.prev){a0.prev()}else{bd(-1)}}function aP(){if(a0.next){a0.next()}else{bd(1)}}function bE(){aj(bG,-1);bd()}function aO(){aj(bG,1);bd()}function a8(){if(a0.gotoToday){a0.gotoToday()}else{bG=new Date();bd()}}function bp(bL,bM,bK){if(bL instanceof Date){bG=P(bL)}else{B(bG,bL,bM,bK)}bd()}function bb(bL,bK,bM){if(bL!==w){aj(bG,bL)}if(bK!==w){q(bG,bK)}if(bM!==w){aF(bG,bM)}bd()}function bc(){return P(bG)}function aR(){a1.css({width:"100%",height:a1.height(),overflow:"hidden"})}function a5(){a1.css({width:"",height:"",overflow:""})}function bi(){return a0}function by(bK,bL){if(bL===w){return be[bK]}if(bK=="height"||bK=="contentHeight"||bK=="aspectRatio"){be[bK]=bL;ba()}}function bn(bK,bL){if(be[bK]){return be[bK].apply(bL||bz,Array.prototype.slice.call(arguments,2))}}if(be.droppable){av(document).bind("dragstart",function(bM,bN){var bK=bM.target;var bO=av(bK);if(!bO.parents(".fc").length){var bL=be.dropAccept;if(av.isFunction(bL)?bL.call(bK,bO):bO.is(bL)){aT=bK;a0.dragStart(aT,bM,bN)}}}).bind("dragstop",function(bK,bL){if(aT){a0.dragStop(aT,bK,bL);aT=null}})}}function U(aQ,aZ){var aY=this;aY.render=aO;aY.destroy=aU;aY.updateTitle=aS;aY.activateButton=aN;aY.deactivateButton=aW;aY.disableButton=aP;aY.enableButton=aT;var aR=av([]);var aV;function aO(){aV=aZ.theme?"ui":"fc";var a0=aZ.header;if(a0){aR=av("<table class='fc-header' style='width:100%'/>").append(av("<tr/>").append(aX("left")).append(aX("center")).append(aX("right")));return aR}}function aU(){aR.remove()}function aX(a0){var a2=av("<td class='fc-header-"+a0+"'/>");var a1=aZ.header[a0];if(a1){av.each(a1.split(" "),function(a4){if(a4>0){a2.append("<span class='fc-header-space'/>")}var a3;av.each(this.split(","),function(a7,a6){if(a6=="title"){a2.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>");if(a3){a3.addClass(aV+"-corner-right")}a3=null}else{var a5;if(aQ[a6]){a5=aQ[a6]}else{if(ag[a6]){a5=function(){a8.removeClass(aV+"-state-hover");aQ.changeView(a6)}}}if(a5){var a9=aZ.theme?H(aZ.buttonIcons,a6):null;var ba=H(aZ.buttonText,a6);var a8=av("<span class='fc-button fc-button-"+a6+" "+aV+"-state-default'>"+(a9?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+a9+"'/></span>":ba)+"</span>").click(function(){if(!a8.hasClass(aV+"-state-disabled")){a5()}}).mousedown(function(){a8.not("."+aV+"-state-active").not("."+aV+"-state-disabled").addClass(aV+"-state-down")}).mouseup(function(){a8.removeClass(aV+"-state-down")}).hover(function(){a8.not("."+aV+"-state-active").not("."+aV+"-state-disabled").addClass(aV+"-state-hover")},function(){a8.removeClass(aV+"-state-hover").removeClass(aV+"-state-down")}).appendTo(a2);aM(a8);if(!a3){a8.addClass(aV+"-corner-left")}a3=a8}}});if(a3){a3.addClass(aV+"-corner-right")}})}return a2}function aS(a0){aR.find("h2").html(a0)}function aN(a0){aR.find("span.fc-button-"+a0).addClass(aV+"-state-active")}function aW(a0){aR.find("span.fc-button-"+a0).removeClass(aV+"-state-active")}function aP(a0){aR.find("span.fc-button-"+a0).addClass(aV+"-state-disabled")}function aT(a0){aR.find("span.fc-button-"+a0).removeClass(aV+"-state-disabled")}}aD.sourceNormalizers=[];aD.sourceFetchers=[];var o={dataType:"json",cache:false};var X=1;function t(aT,a1){var a3=this;a3.isFetchNeeded=aV;a3.fetchEvents=a2;a3.addEventSource=aQ;a3.removeEventSource=aR;a3.updateEvent=a6;a3.renderEvent=aZ;a3.removeEvents=bi;a3.clientEvents=bc;a3.normalizeEvent=aY;var a5=a3.trigger;var aN=a3.getView;var a8=a3.reportEvents;var ba={events:[]};var aO=[ba];var bf,bb;var aP=0;var bg=0;var be=0;var a4=[];for(var bd=0;bd<a1.length;bd++){a7(a1[bd])}function aV(bk,bj){return !bf||bk<bf||bj>bb}function a2(bn,bk){bf=bn;bb=bk;a4=[];var bm=++aP;var bj=aO.length;bg=bj;for(var bl=0;bl<bj;bl++){aU(aO[bl],bm)}}function aU(bk,bj){a9(bk,function(bm){if(bj==aP){if(bm){if(aT.eventDataTransform){bm=av.map(bm,aT.eventDataTransform)}if(bk.eventDataTransform){bm=av.map(bm,bk.eventDataTransform)}for(var bl=0;bl<bm.length;bl++){bm[bl].source=bk;aY(bm[bl])}a4=a4.concat(bm)}a8(a4)}})}function a9(bj,bt){var bo;var bs=aD.sourceFetchers;var bq;for(bo=0;bo<bs.length;bo++){bq=bs[bo](bj,bf,bb,bt);if(bq===true){return}else{if(typeof bq=="object"){a9(bq,bt);return}}}var bv=bj.events;if(bv){if(av.isFunction(bv)){aX();bv(P(bf),P(bb),function(bx){bt(bx);bh()})}else{if(av.isArray(bv)){bt(bv)}else{bt()}}}else{var bk=bj.url;if(bk){var bu=bj.success;var br=bj.error;var bl=bj.complete;var bw;if(av.isFunction(bj.data)){bw=bj.data()}else{bw=bj.data}var bn=av.extend({},bw||{});var bp=aK(bj.startParam,aT.startParam);var bm=aK(bj.endParam,aT.endParam);if(bp){bn[bp]=Math.round(+bf/1000)}if(bm){bn[bm]=Math.round(+bb/1000)}aX();av.ajax(av.extend({},o,bj,{data:bn,success:function(by){by=by||[];var bx=K(bu,this,arguments);if(av.isArray(bx)){by=bx}bt(by)},error:function(){K(br,this,arguments);bt()},complete:function(){K(bl,this,arguments);bh()}}))}else{bt()}}}function aQ(bj){bj=a7(bj);if(bj){bg++;aU(bj,aP)}}function a7(bj){if(av.isFunction(bj)||av.isArray(bj)){bj={events:bj}}else{if(typeof bj=="string"){bj={url:bj}}}if(typeof bj=="object"){a0(bj);aO.push(bj);return bj}}function aR(bj){aO=av.grep(aO,function(bk){return !aW(bk,bj)});a4=av.grep(a4,function(bk){return !aW(bk.source,bj)});a8(a4)}function a6(bo){var bm,bk=a4.length,bp,bj=aN().defaultEventEnd,bn=bo.start-bo._start,bl=bo.end?(bo.end-(bo._end||bj(bo))):0;for(bm=0;bm<bk;bm++){bp=a4[bm];if(bp._id==bo._id&&bp!=bo){bp.start=new Date(+bp.start+bn);if(bo.end){if(bp.end){bp.end=new Date(+bp.end+bl)}else{bp.end=new Date(+bj(bp)+bl)}}else{bp.end=null}bp.title=bo.title;bp.url=bo.url;bp.allDay=bo.allDay;bp.className=bo.className;bp.editable=bo.editable;bp.color=bo.color;bp.backgroundColor=bo.backgroundColor;bp.borderColor=bo.borderColor;bp.textColor=bo.textColor;aY(bp)}}aY(bo);a8(a4)}function aZ(bk,bj){aY(bk);if(!bk.source){if(bj){ba.events.push(bk);bk.source=ba}a4.push(bk)}a8(a4)}function bi(bk){if(!bk){a4=[];for(var bj=0;bj<aO.length;bj++){if(av.isArray(aO[bj].events)){aO[bj].events=[]}}}else{if(!av.isFunction(bk)){var bl=bk+"";bk=function(bm){return bm._id==bl}}a4=av.grep(a4,bk,true);for(var bj=0;bj<aO.length;bj++){if(av.isArray(aO[bj].events)){aO[bj].events=av.grep(aO[bj].events,bk,true)}}}a8(a4)}function bc(bj){if(av.isFunction(bj)){return av.grep(a4,bj)}else{if(bj){bj+="";return av.grep(a4,function(bk){return bk._id==bj})}}return a4}function aX(){if(!be++){a5("loading",null,true,aN())}}function bh(){if(!--be){a5("loading",null,false,aN())}}function aY(bk){var bl=bk.source||{};var bj=aK(bl.ignoreTimezone,aT.ignoreTimezone);bk._id=bk._id||(bk.id===w?"_fc"+X++:bk.id+"");if(bk.date){if(!bk.start){bk.start=bk.date}delete bk.date}bk._start=P(bk.start=ab(bk.start,bj));bk.end=ab(bk.end,bj);if(bk.end&&bk.end<=bk.start){bk.end=null}bk._end=bk.end?P(bk.end):null;if(bk.allDay===w){bk.allDay=aK(bl.allDayDefault,aT.allDayDefault)}if(bk.className){if(typeof bk.className=="string"){bk.className=bk.className.split(/\s+/)}}else{bk.className=[]}}function a0(bl){if(bl.className){if(typeof bl.className=="string"){bl.className=bl.className.split(/\s+/)}}else{bl.className=[]}var bk=aD.sourceNormalizers;for(var bj=0;bj<bk.length;bj++){bk[bj](bl)}}function aW(bk,bj){return bk&&bj&&aS(bk)==aS(bj)}function aS(bj){return((typeof bj=="object")?(bj.events||bj.url):"")||bj}}aD.addDays=aF;aD.cloneDate=P;aD.parseDate=ab;aD.parseISO8601=p;aD.parseTime=aJ;aD.formatDate=E;aD.formatDates=l;var R=["sun","mon","tue","wed","thu","fri","sat"],ay=86400000,am=3600000,V=60000;function aj(aO,aP,aN){aO.setFullYear(aO.getFullYear()+aP);if(!aN){f(aO)}return aO}function q(aQ,aR,aP){if(+aQ){var aN=aQ.getMonth()+aR,aO=P(aQ);aO.setDate(1);aO.setMonth(aN);aQ.setMonth(aN);if(!aP){f(aQ)}while(aQ.getMonth()!=aO.getMonth()){aQ.setDate(aQ.getDate()+(aQ<aO?1:-1))}}return aQ}function aF(aQ,aR,aP){if(+aQ){var aN=aQ.getDate()+aR,aO=P(aQ);aO.setHours(9);aO.setDate(aN);aQ.setDate(aN);if(!aP){f(aQ)}aH(aQ,aO)}return aQ}function aH(aO,aN){if(+aO){while(aO.getDate()!=aN.getDate()){aO.setTime(+aO+(aO<aN?1:-1)*am)}}}function k(aN,aO){aN.setMinutes(aN.getMinutes()+aO);return aN}function f(aN){aN.setHours(0);aN.setMinutes(0);aN.setSeconds(0);aN.setMilliseconds(0);return aN}function P(aN,aO){if(aO){return f(new Date(+aN))}return new Date(+aN)}function h(){var aN=0,aO;do{aO=new Date(1970,aN++,1)}while(aO.getHours());return aO}function aC(aO,aN){return Math.round((P(aO,true)-P(aN,true))/ay)}function B(aO,aQ,aN,aP){if(aQ!==w&&aQ!=aO.getFullYear()){aO.setDate(1);aO.setMonth(0);aO.setFullYear(aQ)}if(aN!==w&&aN!=aO.getMonth()){aO.setDate(1);aO.setMonth(aN)}if(aP!==w){aO.setDate(aP)}}function ab(aO,aN){if(typeof aO=="object"){return aO}if(typeof aO=="number"){return new Date(aO*1000)}if(typeof aO=="string"){if(aO.match(/^\d+(\.\d+)?$/)){return new Date(parseFloat(aO)*1000)}if(aN===w){aN=true}return p(aO,aN)||(aO?new Date(aO):null)}return null}function p(aR,aO){var aN=aR.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!aN){return null}var aQ=new Date(aN[1],0,1,9,0);if(aO||!aN[13]){var aP=new Date(aN[1],0,1,9,0);if(aN[3]){aQ.setMonth(aN[3]-1);aP.setMonth(aN[3]-1)}if(aN[5]){aQ.setDate(aN[5]);aP.setDate(aN[5])}aH(aQ,aP);if(aN[7]){aQ.setHours(aN[7])}if(aN[8]){aQ.setMinutes(aN[8])}if(aN[10]){aQ.setSeconds(aN[10])}if(aN[12]){aQ.setMilliseconds(Number("0."+aN[12])*1000)}aH(aQ,aP)}else{aQ.setUTCFullYear(aN[1],aN[3]?aN[3]-1:0,aN[5]||1);aQ.setUTCHours(aN[7]||0,aN[8]||0,aN[10]||0,aN[12]?Number("0."+aN[12])*1000:0);if(aN[14]){var aS=Number(aN[16])*60+(aN[18]?Number(aN[18]):0);aS*=aN[15]=="-"?1:-1;aQ=new Date(+aQ+(aS*60*1000))}}return aQ}function aJ(aP){if(typeof aP=="number"){return aP*60}if(typeof aP=="object"){return aP.getHours()*60+aP.getMinutes()}var aN=aP.match(/(\d+)(?::(\d+))?\s*(\w+)?/);if(aN){var aO=parseInt(aN[1],10);if(aN[3]){aO%=12;if(aN[3].toLowerCase().charAt(0)=="p"){aO+=12}}return aO*60+(aN[2]?parseInt(aN[2],10):0)}}function E(aO,aP,aN){return l(aO,null,aP,aN)}function l(aZ,aY,aX,a0){a0=a0||O;var aO=aZ,aQ=aY,aR,aS=aX.length,aU,aP,aW,aT="";for(aR=0;aR<aS;aR++){aU=aX.charAt(aR);if(aU=="'"){for(aP=aR+1;aP<aS;aP++){if(aX.charAt(aP)=="'"){if(aO){if(aP==aR+1){aT+="'"}else{aT+=aX.substring(aR+1,aP)}aR=aP}break}}}else{if(aU=="("){for(aP=aR+1;aP<aS;aP++){if(aX.charAt(aP)==")"){var aN=E(aO,aX.substring(aR+1,aP),a0);if(parseInt(aN.replace(/\D/,""),10)){aT+=aN}aR=aP;break}}}else{if(aU=="["){for(aP=aR+1;aP<aS;aP++){if(aX.charAt(aP)=="]"){var aV=aX.substring(aR+1,aP);var aN=E(aO,aV,a0);if(aN!=E(aQ,aV,a0)){aT+=aN}aR=aP;break}}}else{if(aU=="{"){aO=aY;aQ=aZ}else{if(aU=="}"){aO=aZ;aQ=aY}else{for(aP=aS;aP>aR;aP--){if(aW=aB[aX.substring(aR,aP)]){if(aO){aT+=aW(aO,a0)}aR=aP-1;break}}if(aP==aR){if(aO){aT+=aU}}}}}}}}return aT}var aB={s:function(aN){return aN.getSeconds()},ss:function(aN){return ad(aN.getSeconds())},m:function(aN){return aN.getMinutes()},mm:function(aN){return ad(aN.getMinutes())},h:function(aN){return aN.getHours()%12||12},hh:function(aN){return ad(aN.getHours()%12||12)},H:function(aN){return aN.getHours()},HH:function(aN){return ad(aN.getHours())},d:function(aN){return aN.getDate()},dd:function(aN){return ad(aN.getDate())},ddd:function(aO,aN){return aN.dayNamesShort[aO.getDay()]},dddd:function(aO,aN){return aN.dayNames[aO.getDay()]},M:function(aN){return aN.getMonth()+1},MM:function(aN){return ad(aN.getMonth()+1)},MMM:function(aO,aN){return aN.monthNamesShort[aO.getMonth()]},MMMM:function(aO,aN){return aN.monthNames[aO.getMonth()]},yy:function(aN){return(aN.getFullYear()+"").substring(2)},yyyy:function(aN){return aN.getFullYear()},t:function(aN){return aN.getHours()<12?"a":"p"},tt:function(aN){return aN.getHours()<12?"am":"pm"},T:function(aN){return aN.getHours()<12?"A":"P"},TT:function(aN){return aN.getHours()<12?"AM":"PM"},u:function(aN){return E(aN,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(aO){var aN=aO.getDate();if(aN>10&&aN<20){return"th"}return["st","nd","rd"][aN%10-1]||"th"},w:function(aO,aN){return aN.weekNumberCalculation(aO)},W:function(aN){return x(aN)}};aD.dateFormatters=aB;function x(aN){var aO;var aP=new Date(aN.getTime());aP.setDate(aP.getDate()+4-(aP.getDay()||7));aO=aP.getTime();aP.setMonth(0);aP.setDate(1);return Math.floor(Math.round((aO-aP)/86400000)/7)+1}aD.applyAll=K;function ap(aN){if(aN.end){return s(aN.end,aN.allDay)}else{return aF(P(aN.start),1)}}function s(aN,aO){aN=P(aN);return aO||aN.getHours()||aN.getMinutes()?aF(aN,1):f(aN)}function v(aO,aN,aP){aO.unbind("mouseover").mouseover(function(aT){var aS=aT.target,aU,aR,aQ;while(aS!=this){aU=aS;aS=aS.parentNode}if((aR=aU._fci)!==w){aU._fci=w;aQ=aN[aR];aP(aQ.event,aQ.element,aQ);av(aT.target).trigger(aT)}aT.stopPropagation()})}function aw(aP,aQ,aN){for(var aO=0,aR;aO<aP.length;aO++){aR=av(aP[aO]);aR.width(Math.max(0,aQ-j(aR,aN)))}}function aa(aQ,aN,aO){for(var aP=0,aR;aP<aQ.length;aP++){aR=av(aQ[aP]);aR.height(Math.max(0,aN-I(aR,aO)))}}function j(aO,aN){return ai(aO)+r(aO)+(aN?ah(aO):0)}function ai(aN){return(parseFloat(av.css(aN[0],"paddingLeft",true))||0)+(parseFloat(av.css(aN[0],"paddingRight",true))||0)}function ah(aN){return(parseFloat(av.css(aN[0],"marginLeft",true))||0)+(parseFloat(av.css(aN[0],"marginRight",true))||0)}function r(aN){return(parseFloat(av.css(aN[0],"borderLeftWidth",true))||0)+(parseFloat(av.css(aN[0],"borderRightWidth",true))||0)}function I(aO,aN){return A(aO)+ar(aO)+(aN?m(aO):0)}function A(aN){return(parseFloat(av.css(aN[0],"paddingTop",true))||0)+(parseFloat(av.css(aN[0],"paddingBottom",true))||0)}function m(aN){return(parseFloat(av.css(aN[0],"marginTop",true))||0)+(parseFloat(av.css(aN[0],"marginBottom",true))||0)}function ar(aN){return(parseFloat(av.css(aN[0],"borderTopWidth",true))||0)+(parseFloat(av.css(aN[0],"borderBottomWidth",true))||0)}function at(){}function a(aO,aN){return aO-aN}function au(aN){return Math.max.apply(Math,aN)}function ad(aN){return(aN<10?"0":"")+aN}function H(aR,aN){if(aR[aN]!==w){return aR[aN]}var aQ=aN.split(/(?=[A-Z])/),aP=aQ.length-1,aO;for(;aP>=0;aP--){aO=aR[aQ[aP].toLowerCase()];if(aO!==w){return aO}}return aR[""]}function aI(aN){return aN.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function aM(aN){aN.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return false})}function g(aN){aN.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}function M(aN,aO){aN.each(function(aP,aQ){aQ.className=aQ.className.replace(/^fc-\w*/,"fc-"+R[aO.getDay()])})}function S(aO,aP){var aN=aO.source||{};var aU=aO.color;var aS=aN.color;var aR=aP("eventColor");var aV=aO.backgroundColor||aU||aN.backgroundColor||aS||aP("eventBackgroundColor")||aR;var aQ=aO.borderColor||aU||aN.borderColor||aS||aP("eventBorderColor")||aR;var aW=aO.textColor||aN.textColor||aP("eventTextColor");var aT=[];if(aV){aT.push("background-color:"+aV)}if(aQ){aT.push("border-color:"+aQ)}if(aW){aT.push("color:"+aW)}return aT.join(";")}function K(aQ,aR,aO){if(av.isFunction(aQ)){aQ=[aQ]}if(aQ){var aP;var aN;for(aP=0;aP<aQ.length;aP++){aN=aQ[aP].apply(aR,aO)||aN}return aN}}function aK(){for(var aN=0;aN<arguments.length;aN++){if(arguments[aN]!==w){return arguments[aN]}}}ag.timeline=z;function z(aO,aR){var aN=this;aN.name="timeline";aN.render=aP;aN.title="";var aQ=c.getTimelineAdapter(aO,aR.options.calendarPlugin,aR.options.calendarDiv,aN);function aP(aS,aT){aQ.setDate(aS)}aN.update=function(){aR.refetchEvents(true)};aN.unselect=function(){};aN.setHeight=function(){};aN.setWidth=function(){};aN.clearEvents=function(){};aN.renderEvents=function(aS){aQ.renderEvents(aS)};aN.trigger=function(aS,aT){return aR.trigger.apply(aR,[aS,aT||aN].concat(Array.prototype.slice.call(arguments,2),[aN]))};aN.next=function(){aQ.next()};aN.prev=function(){aQ.prev()};aN.gotoDate=function(aS){aR.gotoDate(aS)};aN.triggerEventDestroy=function(){};aN.clearEventData=function(){};aN.setEventData=function(aS){aQ.renderEvents(aS)};aN.element=av(".fc-view-timeline")}ag.month=ae;function ae(aS,aR){var aV=this;aV.render=aN;C.call(aV,aS,aR,"month");var aO=aV.opt;var aP=aV.renderBasic;var aT=aV.skipHiddenDays;var aQ=aV.getCellsPerWeek;var aU=aR.formatDate;function aN(aY,a3){if(a3){q(aY,a3);aY.setDate(1)}var aW=aO("firstDay");var aX=P(aY,true);aX.setDate(1);var aZ=q(P(aX),1);var a4=P(aX);aF(a4,-((a4.getDay()-aW+7)%7));aT(a4);var a0=P(aZ);aF(a0,(7-a0.getDay()+aW)%7);aT(a0,-1,true);var a2=aQ();var a1=Math.round(aC(a0,a4)/7);if(aO("weekMode")=="fixed"){aF(a0,(6-a1)*7);a1=6}aV.title=aU(aX,aO("titleFormat"));aV.start=aX;aV.end=aZ;aV.visStart=a4;aV.visEnd=a0;aP(a1,a2,true)}}ag.basicWeek=aE;function aE(aS,aR){var aV=this;aV.render=aN;C.call(aV,aS,aR,"basicWeek");var aO=aV.opt;var aP=aV.renderBasic;var aU=aV.skipHiddenDays;var aQ=aV.getCellsPerWeek;var aT=aR.formatDates;function aN(a0,a2){if(a2){aF(a0,a2*7)}var a1=aF(P(a0),-((a0.getDay()-aO("firstDay")+7)%7));var aY=aF(P(a1),7);var aX=P(a1);aU(aX);var aW=P(aY);aU(aW,-1,true);var aZ=aQ();aV.start=a1;aV.end=aY;aV.visStart=aX;aV.visEnd=aW;aV.title=aT(aX,aF(P(aW),-1),aO("titleFormat"));aP(1,aZ,false)}}ag.basicDay=L;function L(aQ,a1){var aZ=this;aZ.render=a7;var aW=0;var a4=false;C.call(aZ,aQ,a1,"basicDay");var aO=aZ.opt,a6=aZ.renderBasic,aU=aZ.skipHiddenDays,a0=a1.formatDate,aV=a1.options.calendarDiv,a3=a1.options.calendarPlugin,aX=1000*60*60*24,a5=parseInt(a3.getParameter(aV,"maxUpcomingDays")),aY=av("<div/>").appendTo(aQ),aT=a3.getParameter(aV,"autoAdjustUpcomingEventsHeight")==="true",aN=a3.getParameter(aV,"hideMoreEventsButtonInUpcomingEventsOnClick")==="true",aP=function(){if(aT){aQ.css({height:(av(".events-container",aY).height()+5)+"px",overflow:"hidden"})}},aS=false,a2=a5;var aR=function(bj,bm,bh){if(bj.length){aY.empty();a4=true;var bl=[],bb=new Date(),bd=new Date();aQ.removeClass("no-event");av.each(bj,function(bp,bo){var bn=bo.allDay;if(bo.expandDates&&bo.end&&bo.end.getTime()-bo.start.getTime()>=aX){var bq=bo.end;bb.setTime(bo.start.getTime()+aX);if(bn){while(bb<=bq){bd.setTime(bb.getTime()+aX);if(bb>=bm&&bd<=bh){bl.push(av.extend({},bo,{start:new Date(bb.getTime()),end:new Date(bd.getTime()),expanded:true}))}bb.setTime(bd.getTime())}}else{while(bb<bq){bd.setTime(bb.getTime()+Math.min(bq.getTime()-bb.getTime(),aX));if(bb>=bm&&bd<=bh){bl.push(av.extend({},bo,{start:new Date(bb.getTime()),end:new Date(bd.getTime()),allDay:bd.getTime()-bb.getTime()>=aX,showLastIndicator:bd>=bq,expanded:true}))}bb.setTime(bd.getTime())}}}});av.each(bl,function(bn,bo){bj.push(bo)});bj.sort(function(bo,bp){var bn=bo.expanded===bp.expanded?0:(bo.expanded?1:-1);if(0==bn){bn=bo.allDay===bp.allDay?0:(bo.allDay?1:-1)}if(0===bn){bn=bo.start.getTime()-bp.start.getTime()}if(0==bn){bn=bo.title>bp.title?1:(bp.title>bo.title?-1:0)}if(0==bn){bn=bo.subCalendarId>bp.subCalendarId?1:(bp.subCalendarId>bo.subCalendarId?-1:0)}return bn});bj=av.grep(bj,function(bn){return bn.start>=bm});var ba={};av.each(bj,function(bs,bp){var bn=a0(new Date(),"yyyyMMdd"),bo=a0(bp.start,"yyyyMMdd"),br=ba[bo],bq;if(!ba[bo]){br={today:bo===bn,groupKey:bo,groupDay:bo.substring(6),dateFormatKey:bo.substring(6)+bo.substring(4,6)+bo.substring(0,4),events:[bp]};ba[bo]=br}else{bq=br.events;bq.push(bp)}});var bi=parseInt(a3.getParameter(aV,"maxEventsPerUpcomingDay")),be={},bc={};av.each(ba,function(bn,bp){var bo=bp.events;if(bo&&bo.length&&bo.length>bi){bp.hiddenEventsCount=bo.length-bi;bp.events=bo.slice(0,bi)}bp.events=av.map(bp.events,function(br){var bs=bc[br.subCalendarId]||a3.getSubCalendar(aV,br.subCalendarId),bq=bc[bs.parentId]||a3.getSubCalendar(aV,bs.parentId),bt=av.extend({subCalendar:bs,parentSubCalendar:bq},br);bc[bs.id]=bs;if(bq){bc[bq.id]=bq}be[bt.id]=bt;return bt})});var bk=[];av.each(ba,function(bn){bk.push(bn)});bk.sort(function(bn,bo){return bn>bo?1:(bo>bn?-1:0)});var a8=av("<div/>").html(c.Templates().upcomingEvents({eventGroups:av.map(bk,function(bn){return ba[bn]})})),bg=av(".more-events",a8).click(function(){var bo=av(".events-container",a8),bn=bg.offset().top-bo.offset().top+bo.scrollTop(),bp=av(".toggleable",a8);if(bp.length){bp.removeClass("hidden toggleable");aQ.animate({scrollTop:bn});if(aN){bg.addClass("hidden");aQ.css("overflow","auto")}else{aP()}}else{bg.prop("disabled","disabled").text("Loading...");av.ajax({cache:false,converters:{"text json":function(bq){return bq}},data:{subCalendarIds:(function(){return av.map(av(".child-subcalendar",aV).filter(function(){return !av(this).hasClass("subcalendar-disabled")}),function(bq){return av(bq).data("subCalendarId")})})(),userTimeZoneId:c.getUserTimeZone(),start:a0(bm,"u"),daysMore:a2+=a5},dataFilter:function(bq){var br=av.parseJSON(bq||"[]");av.each(br,function(bs,bt){a1.normalizeEvent(bt)});return br},dataType:"json",error:function(bq,bs,br){a3.showAjaxError(aV,bq,bs,br)},success:function(bq){bq=a3.getEventsTruncated(aV,bq||[],true);var br=new Date(bm.getTime()+(a2*aX));aR(bq,bm,br);av(".more-events",aY).before(av("<div/>",{"class":"showing-events-till",text:AJS.format("Displaying events until {0}",a0(br,"dd MMM yyyy"))}));aP()},type:"GET",url:a3.getCalendarServiceBaseUrl(aV,"/events/multiplexed.json")})}return !(aS=true)});aY.append(a8);av(".event-description",a8).ThreeDots({max_rows:1});av(".events li",a8).each(function(bo){var bn=av(this);if(!aS&&bo>=10&&!bn.prev().length){var bp=bn.closest(".event-group");if(!bp.hasClass("toggleable")){bp.addClass("toggleable")}}a3.getEventDetailsDialog(aV,be[av(this).attr("data-event-id")],bn.hover(function(){bn.addClass("highlighted");a3.hideInlineAuiDialogs()},function(){bn.removeClass("highlighted")}),{hideDelay:10000,noBind:false})});var a9=av(".toggleable",a8).addClass("hidden");if(a9.length||!aN){bg.removeClass("hidden")}aP();var bf=function(bn,bp){var bo=bp.attr("data-group-date");bp.text(a0(new Date(parseInt(bo.substring(4)),parseInt(bo.substring(2,4),10)-1,parseInt(bo.substring(0,2),10)),bn))};av(".other-days",a8).each(function(){bf("dddd",av(this))});av(".day",a8).each(function(){bf("dd",av(this))});av(".month",a8).each(function(){bf("MMM",av(this))})}else{if(aW>1&&!a4){aY.empty();av("<div/>",{text:AJS.format("No upcoming events in the next {0} days",a5)}).appendTo(aY.empty())}else{if(!a4){aY.empty();aW=aW+1;window.setTimeout(function(){aZ.renderEvents([])},1000);av("<span class='calendar-upcoming-spinner aui-icon aui-icon-wait'>Loading...</span>").appendTo(aY.empty())}}}};av("<div/>",{"class":"no-events-message",text:"Loading..."}).appendTo(aY);aZ.renderEvents=function(a9){aQ.css("MozUserSelect","text").attr("unselectable","off").unbind("selectstart.ui");var a8=new Date(aZ.visStart.getTime()+aX*(a2=a5));aR((function(be,bd,bc){var ba=[];var bb=function(bf){if(bf.allDay){return(bf.start>=bd&&bf.start<bc)||(bf.start<bd&&bf.end>=bd)||(bf.start>=bc&&bf.start<bc)}else{return(bf.start>=bd&&bf.start<bc)||(bf.start<bd&&bf.end>bd)||(bf.start>=bc&&bf.start<bc)}};av.each(be,function(bg,bf){if(bb(bf)){ba.push(bf)}});return ba})(a9,aZ.visStart,a8),aZ.visStart,a8)};function a7(a9,bb){if(bb){aF(a9,bb)}aU(a9,bb<0?-1:1);var ba=P(a9,true);var a8=aF(P(ba),1);aZ.title=a0(a9,aO("titleFormat"));aZ.start=aZ.visStart=ba;aZ.end=aZ.visEnd=a8;a6(1,1,false)}}ak({weekMode:"fixed"});function C(a8,bz,a0){var by=this;by.renderBasic=bs;by.setHeight=bw;by.setWidth=bH;by.renderDayOverlay=bo;by.defaultSelectionEnd=bn;by.renderSelection=bA;by.clearSelection=aN;by.reportDayClick=a6;by.dragStart=aS;by.dragStop=a1;by.defaultEventEnd=bM;by.getHoverListener=function(){return aT};by.colLeft=bO;by.colRight=bb;by.colContentLeft=bv;by.colContentRight=bt;by.getIsCellAllDay=function(){return true};by.allDayRow=a5;by.getRowCnt=function(){return bf};by.getColCnt=function(){return aV};by.getColWidth=function(){return bk};by.getDaySegmentContainer=function(){return a4};aG.call(by,a8,bz,a0);d.call(by);ao.call(by);an.call(by);var bd=by.opt;var bp=by.trigger;var bK=by.renderOverlay;var aZ=by.clearOverlays;var bu=by.daySelectionMousedown;var aO=by.cellToDate;var bD=by.dateToCell;var br=by.rangeToSegments;var bx=bz.formatDate;var be;var a7;var a2;var bi;var aY;var a9;var bl;var bj;var aQ;var a4;var bL;var bN;var bk;var a3;var bf,aV;var ba;var bB;var aT;var bE;var bF;var bP;var aW;var bc;var bC;var bm;aM(a8.addClass("fc-grid"));function bs(bQ,bR,bS){bf=bQ;aV=bR;ba=bS;bI();if(!bi){aR()}bh()}function bI(){bP=bd("theme")?"ui":"fc";aW=bd("columnFormat");bc=bd("weekNumbers");bC=bd("weekNumberTitle");if(bd("weekNumberCalculation")!="iso"){bm="w"}else{bm="W"}}function aR(){a4=av("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(a8)}function bh(){var bQ=bq();if(be){be.remove()}be=av(bQ).appendTo(a8);a7=be.find("thead");a2=a7.find(".fc-day-header");bi=be.find("tbody");aY=bi.find("tr");a9=bi.find(".fc-day");bl=aY.find("td:first-child");bj=aY.eq(0).find(".fc-day > div");aQ=aY.eq(0).find(".fc-day-content > div");g(a7.add(a7.find("tr")));g(aY);aY.eq(0).addClass("fc-first");aY.filter(":last").addClass("fc-last");a9.each(function(bS,bT){var bR=aO(Math.floor(bS/aV),bS%aV);bp("dayRender",by,bR,av(bT))});aU(a9)}function bq(){var bQ="<table class='fc-border-separate' style='width:100%' cellspacing='0'>"+aP()+bg()+"</table>";return bQ}function aP(){var bT=bP+"-widget-header";var bS="";var bR;var bQ;bS+="<thead><tr>";if(bc){bS+="<th class='fc-week-number "+bT+"'>"+aI(bC)+"</th>"}for(bR=0;bR<aV;bR++){bQ=aO(0,bR);bS+="<th class='fc-day-header fc-"+R[bQ.getDay()]+" "+bT+"'>"+aI(bx(bQ,aW))+"</th>"}bS+="</tr></thead>";return bS}function bg(){var bS=bP+"-widget-content";var bT="";var bU;var bR;var bQ;bT+="<tbody>";for(bU=0;bU<bf;bU++){bT+="<tr class='fc-week'>";if(bc){bQ=aO(bU,0);bT+="<td class='fc-week-number "+bS+"'><div>"+aI(bx(bQ,bm))+"</div></td>"}for(bR=0;bR<aV;bR++){bQ=aO(bU,bR);bT+=aX(bQ)}bT+="</tr>"}bT+="</tbody>";return bT}function aX(bS){var bR=bP+"-widget-content";var bU=by.start.getMonth();var bQ=f(new Date());var bT="";var bV=["fc-day","fc-"+R[bS.getDay()],bR];if(bS.getMonth()!=bU){bV.push("fc-other-month")}if(+bS==+bQ){bV.push("fc-today",bP+"-state-highlight")}else{if(bS<bQ){bV.push("fc-past")}else{bV.push("fc-future")}}bT+="<td class='"+bV.join(" ")+"' data-date='"+bx(bS,"yyyy-MM-dd")+"'><div>";if(ba){bT+="<div class='fc-day-number'>"+bS.getDate()+"</div>"}bT+="<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>";return bT}function bw(bR){bN=bR;var bU=bN-a7.height();var bT;var bS;var bQ;if(bd("weekMode")=="variable"){bT=bS=Math.floor(bU/(bf==1?2:6))}else{bT=Math.floor(bU/bf);bS=bU-bT*(bf-1)}bl.each(function(bV,bW){if(bV<bf){bQ=av(bW);bQ.find("> div").css("min-height",(bV==bf-1?bS:bT)-I(bQ))}})}function bH(bQ){bL=bQ;bE.clear();bF.clear();a3=0;if(bc){a3=a7.find("th.fc-week-number").outerWidth()}bk=Math.floor((bL-a3)/aV);aw(a2.slice(0,-1),bk)}function aU(bQ){bQ.click(bJ).mousedown(bu)}function bJ(bR){if(!bd("selectable")){var bQ=p(av(this).data("date"));bp("dayClick",this,bQ,true,bR)}}function bo(bU,bV,bQ){if(bQ){bB.build()}var bR=br(bU,bV);for(var bS=0;bS<bR.length;bS++){var bT=bR[bS];aU(bG(bT.row,bT.leftCol,bT.row,bT.rightCol))}}function bG(bT,bU,bR,bS){var bQ=bB.rect(bT,bU,bR,bS,a8);return bK(bQ,a8)}function bn(bQ,bR){return P(bQ)}function bA(bQ,bS,bR){bo(bQ,aF(P(bS),1),true)}function aN(){aZ()}function a6(bS,bU,bT){var bQ=bD(bS);var bR=a9[bQ.row*aV+bQ.col];bp("dayClick",bR,bS,bU,bT)}function aS(bS,bQ,bR){aT.start(function(bT){aZ();if(bT){bG(bT.row,bT.col,bT.row,bT.col)}},bQ)}function a1(bU,bR,bS){var bQ=aT.stop();aZ();if(bQ){var bT=aO(bQ);bp("drop",bU,bT,true,bR,bS)}}function bM(bQ){return P(bQ.start)}bB=new Q(function(bQ,bT){var bS,bU,bR;a2.each(function(bW,bV){bS=av(bV);bU=bS.offset().left;if(bW){bR[1]=bU}bR=[bU];bT[bW]=bR});bR[1]=bU+bS.outerWidth();aY.each(function(bW,bV){if(bW<bf){bS=av(bV);bU=bS.offset().top;if(bW){bR[1]=bU}bR=[bU];bQ[bW]=bR}});bR[1]=bU+bS.outerHeight()});aT=new aq(bB);bE=new n(function(bQ){return bj.eq(bQ)});bF=new n(function(bQ){return aQ.eq(bQ)});function bO(bQ){return bE.left(bQ)}function bb(bQ){return bE.right(bQ)}function bv(bQ){return bF.left(bQ)}function bt(bQ){return bF.right(bQ)}function a5(bQ){return aY.eq(bQ)}}function an(){var aO=this;aO.renderEvents=aN;aO.clearEvents=aP;Z.call(aO);function aN(aR,aQ){aO.renderDayEvents(aR,aQ)}function aP(){aO.getDaySegmentContainer().empty()}}ag.agendaWeek=i;function i(aS,aR){var aV=this;aV.render=aN;J.call(aV,aS,aR,"agendaWeek");var aO=aV.opt;var aP=aV.renderAgenda;var aU=aV.skipHiddenDays;var aQ=aV.getCellsPerWeek;var aT=aR.formatDates;function aN(a0,a2){if(a2){aF(a0,a2*7)}var a1=aF(P(a0),-((a0.getDay()-aO("firstDay")+7)%7));var aY=aF(P(a1),7);var aX=P(a1);aU(aX);var aW=P(aY);aU(aW,-1,true);var aZ=aQ();aV.title=aT(aX,aF(P(aW),-1),aO("titleFormat"));aV.start=a1;aV.end=aY;aV.visStart=aX;aV.visEnd=aW;aP(aZ)}}ag.agendaDay=az;function az(aR,aU){var aQ=this;aQ.render=aS;J.call(aQ,aR,aU,"agendaDay");var aP=aQ.opt;var aN=aQ.renderAgenda;var aO=aQ.skipHiddenDays;var aT=aU.formatDate;function aS(aW,aY){if(aY){aF(aW,aY)}aO(aW,aY<0?-1:1);var aX=P(aW,true);var aV=aF(P(aX),1);aQ.title=aT(aW,aP("titleFormat"));aQ.start=aQ.visStart=aX;aQ.end=aQ.visEnd=aV;aN(1)}}ak({allDaySlot:true,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:30,axisFormat:c.isDisplayTimeFormat24hour()===true?"HH:mm":"h(:mm)tt",timeFormat:{agenda:c.isDisplayTimeFormat24hour()===true?"HH:mm{ - HH:mm}":"h:mm{ - h:mm}"},dragOpacity:{agenda:0.5},minTime:0,maxTime:24,slotEventOverlap:true});function J(cc,a3,bg){var bd=this;bd.renderAgenda=aZ;bd.setWidth=bp;bd.setHeight=bl;bd.afterRender=bV;bd.defaultEventEnd=bU;bd.timePosition=cf;bd.getIsCellAllDay=bw;bd.allDayRow=bD;bd.getCoordinateGrid=function(){return bI};bd.getHoverListener=function(){return cb};bd.colLeft=b6;bd.colRight=bN;bd.colContentLeft=cg;bd.colContentRight=aV;bd.getDaySegmentContainer=function(){return a8};bd.getSlotSegmentContainer=function(){return aT};bd.getMinMinute=function(){return bk};bd.getMaxMinute=function(){return aP};bd.getSlotContainer=function(){return a6};bd.getRowCnt=function(){return 1};bd.getColCnt=function(){return bG};bd.getColWidth=function(){return aW};bd.getSnapHeight=function(){return b8};bd.getSnapMinutes=function(){return bt};bd.defaultSelectionEnd=bo;bd.renderDayOverlay=aR;bd.renderSelection=b4;bd.clearSelection=bZ;bd.reportDayClick=ba;bd.dragStart=aX;bd.dragStop=cd;aG.call(bd,cc,a3,bg);d.call(bd);ao.call(bd);W.call(bd);var bB=bd.opt;var bE=bd.trigger;var bs=bd.renderOverlay;var aQ=bd.clearOverlays;var bu=bd.reportSelection;var b2=bd.unselect;var bz=bd.daySelectionMousedown;var a5=bd.slotSegHtml;var bb=bd.cellToDate;var aY=bd.dateToCell;var bi=bd.rangeToSegments;var a9=a3.formatDate;var bQ;var b9;var bX;var bW;var bf;var aS;var aN;var bT;var bM;var ce;var a8;var ca;var b1;var bq;var a6;var aT;var a0;var aU;var bx;var bK;var bm;var aW;var bA;var bH;var bt;var a4;var b8;var bG;var bL;var bI;var cb;var bF;var by;var bh={};var br;var aO;var bk,aP;var a2;var bR;var bC;var bv;aM(cc.addClass("fc-agenda"));function aZ(ch){bG=ch;bJ();if(!bQ){be()}else{bP()}}function bJ(){br=bB("theme")?"ui":"fc";aO=bB("isRTL");bk=aJ(bB("minTime"));aP=aJ(bB("maxTime"));a2=bB("columnFormat");bR=bB("weekNumbers");bC=bB("weekNumberTitle");if(bB("weekNumberCalculation")!="iso"){bv="w"}else{bv="W"}bt=bB("snapMinutes")||bB("slotMinutes")}function be(){var cm=br+"-widget-header";var ch=br+"-widget-content";var cl;var co;var ck;var cn;var cj;var ci=bB("slotMinutes")%15==0;bP();ce=av("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(cc);if(bB("allDaySlot")){a8=av("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(ce);cl="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+cm+" fc-agenda-axis'>"+bB("allDayText")+"</th><td><div class='fc-day-content'><div style='position:relative'/></div></td><th class='"+cm+" fc-agenda-gutter'>&nbsp;</th></tr></table>";ca=av(cl).appendTo(ce);b1=ca.find("tr");bn(b1.find("td"));ce.append("<div class='fc-agenda-divider "+cm+"'><div class='fc-agenda-divider-inner'/></div>")}else{a8=av([])}bq=av("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(ce);a6=av("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(bq);aT=av("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(a6);cl="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>";co=h();cn=k(P(co),aP);k(co,bk);bL=0;for(ck=0;co<cn;ck++){cj=co.getMinutes();cl+="<tr class='fc-slot"+ck+" "+(!cj?"":"fc-minor")+"'><th class='fc-agenda-axis "+cm+"'>"+((!ci||!cj)?a9(co,bB("axisFormat")):"&nbsp;")+"</th><td class='"+ch+"'><div style='position:relative'>&nbsp;</div></td></tr>";k(co,bB("slotMinutes"));bL++}cl+="</tbody></table>";a0=av(cl).appendTo(a6);b0(a0.find("td"))}function bP(){var ch=b7();if(bQ){bQ.remove()}bQ=av(ch).appendTo(cc);b9=bQ.find("thead");bX=b9.find("th").slice(1,-1);bW=bQ.find("tbody");bf=bW.find("td").slice(0,-1);aS=bf.find("> div");aN=bf.find(".fc-day-content > div");bT=bf.eq(0);bM=aS.eq(0);g(b9.add(b9.find("tr")));g(bW.add(bW.find("tr")))}function b7(){var ch="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'>"+b5()+bY()+"</table>";return ch}function b5(){var ck=br+"-widget-header";var ci;var cj="";var cl;var ch;cj+="<thead><tr>";if(bR){ci=bb(0,0);cl=a9(ci,bv);if(aO){cl+=bC}else{cl=bC+cl}cj+="<th class='fc-agenda-axis fc-week-number "+ck+"'>"+aI(cl)+"</th>"}else{cj+="<th class='fc-agenda-axis "+ck+"'>&nbsp;</th>"}for(ch=0;ch<bG;ch++){ci=bb(0,ch);cj+="<th class='fc-"+R[ci.getDay()]+" fc-col"+ch+" "+ck+"'>"+aI(a9(ci,a2))+"</th>"}cj+="<th class='fc-agenda-gutter "+ck+"'>&nbsp;</th></tr></thead>";return cj}function bY(){var cj=br+"-widget-header";var ck=br+"-widget-content";var cm;var co=f(new Date());var cl;var cp;var ci;var ch;var cn="";cn+="<tbody><tr><th class='fc-agenda-axis "+cj+"'>&nbsp;</th>";cp="";for(cl=0;cl<bG;cl++){cm=bb(0,cl);ch=["fc-col"+cl,"fc-"+R[cm.getDay()],ck];if(+cm==+co){ch.push(br+"-state-highlight","fc-today")}else{if(cm<co){ch.push("fc-past")}else{ch.push("fc-future")}}ci="<td class='"+ch.join(" ")+"'><div><div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>";cp+=ci}cn+=cp;cn+="<td class='fc-agenda-gutter "+ck+"'>&nbsp;</td></tr></tbody>";return cn}function bl(ch){if(ch===w){ch=bK}bK=ch;bh={};var cj=bW.position().top;var ci=bq.position().top;var ck=Math.min(ch-cj,a0.height()+ci+1);bM.height(ck-I(bT));ce.css("top",cj);bq.height(ck-ci-1);bH=a0.find("tr:first").height()+1;a4=bB("slotMinutes")/bt;b8=bH/a4}function bp(ck){bx=ck;bF.clear();by.clear();var ch=b9.find("th:first");if(ca){ch=ch.add(ca.find("th:first"))}ch=ch.add(a0.find("th:first"));bm=0;aw(ch.width("").each(function(cl,cm){bm=Math.max(bm,av(cm).outerWidth())}),bm);var ci=bQ.find(".fc-agenda-gutter");if(ca){ci=ci.add(ca.find("th.fc-agenda-gutter"))}var cj=bq[0].clientWidth;bA=bq.width()-cj;if(bA){aw(ci,bA);ci.show().prev().removeClass("fc-last")}else{ci.hide().prev().addClass("fc-last")}aW=Math.floor((cj-bm)/bG);aw(bX.slice(0,-1),aW)}function bj(){var ck=h();var ci=P(ck);ci.setHours(bB("firstHour"));var cj=cf(ck,ci)+1;function ch(){bq.scrollTop(cj)}ch();setTimeout(ch,0)}function bV(){bj()}function bn(ch){ch.click(bO).mousedown(bz)}function b0(ch){ch.click(bO).mousedown(a1)}function bO(cl){if(!bB("selectable")){var cj=Math.min(bG-1,Math.floor((cl.pageX-bQ.offset().left-bm)/aW));var ci=bb(0,cj);var cm=this.parentNode.className.match(/fc-slot(\d+)/);if(cm){var ck=parseInt(cm[1])*bB("slotMinutes");var ch=Math.floor(ck/60);ci.setHours(ch);ci.setMinutes(ck%60+bk);bE("dayClick",bf[cj],ci,false,cl)}else{bE("dayClick",bf[cj],ci,true,cl)}}}function aR(cl,cm,ch){if(ch){bI.build()}var ci=bi(cl,cm);for(var cj=0;cj<ci.length;cj++){var ck=ci[cj];bn(a7(ck.row,ck.leftCol,ck.row,ck.rightCol))}}function a7(ck,cl,ci,cj){var ch=bI.rect(ck,cl,ci,cj,ce);return bs(ch,ce)}function bc(cl,cq){for(var cj=0;cj<bG;cj++){var cm=bb(0,cj);var ci=aF(P(cm),1);var ck=new Date(Math.max(cm,cl));var cp=new Date(Math.min(ci,cq));if(ck<cp){var co=bI.rect(0,cj,0,cj,a6);var cn=cf(cm,ck);var ch=cf(cm,cp);co.top=cn;co.height=ch-cn;b0(bs(co,a6))}}}bI=new Q(function(cp,cn){var cl,ci,ch;bX.each(function(cs,cr){cl=av(cr);ci=cl.offset().left;if(cs){ch[1]=ci}ch=[ci];cn[cs]=ch});ch[1]=ci+cl.outerWidth();if(bB("allDaySlot")){cl=b1;ci=cl.offset().top;cp[0]=[ci,ci+cl.outerHeight()]}var co=a6.offset().top;var cq=bq.offset().top;var ck=cq+bq.outerHeight();function cm(cr){return Math.max(cq,Math.min(ck,cr))}for(var cj=0;cj<bL*a4;cj++){cp.push([cm(co+b8*cj),cm(co+b8*(cj+1))])}});cb=new aq(bI);bF=new n(function(ch){return aS.eq(ch)});by=new n(function(ch){return aN.eq(ch)});function b6(ch){return bF.left(ch)}function cg(ch){return by.left(ch)}function bN(ch){return bF.right(ch)}function aV(ch){return by.right(ch)}function bw(ch){return bB("allDaySlot")&&!ch.row}function bS(ch){var cj=bb(0,ch.col);var ci=ch.row;if(bB("allDaySlot")){ci--}if(ci>=0){k(cj,bk+ci*bt)}return cj}function cf(ci,cm){ci=P(ci,true);if(cm<k(P(ci),bk)){return 0}if(cm>=k(P(ci),aP)){return a0.height()}var ch=bB("slotMinutes"),cl=cm.getHours()*60+cm.getMinutes()-bk,ck=Math.floor(cl/ch),cj=bh[ck];if(cj===w){cj=bh[ck]=a0.find("tr").eq(ck).find("td div")[0].offsetTop}return Math.max(0,Math.round(cj-1+bH*((cl%ch)/ch)))}function bD(ch){return b1}function bU(ch){var ci=P(ch.start);if(ch.allDay){return ci}return k(ci,bB("defaultEventMinutes"))}function bo(ch,ci){if(ci){return P(ch)}return k(P(ch),bB("slotMinutes"))}function b4(ch,cj,ci){if(ci){if(bB("allDaySlot")){aR(ch,aF(P(cj),1),true)}}else{b3(ch,cj)}}function b3(ch,cn){var cl=bB("selectHelper");bI.build();if(cl){var cj=aY(ch).col;if(cj>=0&&cj<bG){var ck=bI.rect(0,cj,0,cj,a6);var cm=cf(ch,ch);var ci=cf(ch,cn);if(ci>cm){ck.top=cm;ck.height=ci-cm;ck.left+=2;ck.width-=5;if(av.isFunction(cl)){var co=cl(ch,cn);if(co){ck.position="absolute";aU=av(co).css(ck).appendTo(a6)}}else{ck.isStart=true;ck.isEnd=true;aU=av(a5({title:"",start:ch,end:cn,className:["fc-select-helper"],editable:false},ck));aU.css("opacity",bB("dragOpacity"))}if(aU){b0(aU);a6.append(aU);aw(aU,ck.width,true);aa(aU,ck.height,true)}}}}else{bc(ch,cn)}}function bZ(){aQ();if(aU){aU.remove();aU=null}}function a1(ch){if(ch.which==1&&bB("selectable")){b2(ch);var ci;cb.start(function(ck,cj){bZ();if(ck&&ck.col==cj.col&&!bw(ck)){var cm=bS(cj);var cl=bS(ck);ci=[cm,k(P(cm),bt),cl,k(P(cl),bt)].sort(a);b3(ci[0],ci[3])}else{ci=null}},ch);av(document).one("mouseup",function(cj){cb.stop();if(ci){if(+ci[0]==+ci[1]){ba(ci[0],false,cj)}bu(ci[0],ci[3],false,cj)}})}}function ba(ch,cj,ci){bE("dayClick",bf[aY(ch).col],ch,cj,ci)}function aX(cj,ch,ci){cb.start(function(ck){aQ();if(ck){if(bw(ck)){a7(ck.row,ck.col,ck.row,ck.col)}else{var cm=bS(ck);var cl=k(P(cm),bB("defaultEventMinutes"));bc(cm,cl)}}},ch)}function cd(ck,ci,cj){var ch=cb.stop();aQ();if(ch){bE("drop",ck,bS(ch),bw(ch),ci,cj)}}}function W(){var bm=this;bm.renderEvents=aS;bm.clearEvents=a7;bm.slotSegHtml=a8;Z.call(bm);var a2=bm.opt;var a9=bm.trigger;var aQ=bm.isEventDraggable;var br=bm.isEventResizable;var bs=bm.eventEnd;var bc=bm.eventElementHandlers;var bi=bm.setHeight;var aR=bm.getDaySegmentContainer;var bu=bm.getSlotSegmentContainer;var aP=bm.getHoverListener;var aO=bm.getMaxMinute;var bd=bm.getMinMinute;var aV=bm.timePosition;var bf=bm.getIsCellAllDay;var bh=bm.colContentLeft;var be=bm.colContentRight;var aN=bm.cellToDate;var bj=bm.getColCnt;var a3=bm.getColWidth;var bl=bm.getSnapHeight;var aX=bm.getSnapMinutes;var aZ=bm.getSlotContainer;var a0=bm.reportEventElement;var aT=bm.showEvents;var a1=bm.hideEvents;var bp=bm.eventDrop;var a5=bm.eventResize;var ba=bm.renderDayOverlay;var aU=bm.clearOverlays;var bv=bm.renderDayEvents;var bn=bm.calendar;var bk=bn.formatDate;var a4=bn.formatDates;bm.draggableDayEvent=aY;function aS(bA,by){var bz,bx=bA.length,bB=[],bw=[];for(bz=0;bz<bx;bz++){if(bA[bz].allDay){bB.push(bA[bz])}else{bw.push(bA[bz])}}if(a2("allDaySlot")){bv(bB,by);bi()}aW(a6(bw),by)}function a7(){aR().empty();bu().empty()}function a6(bG){var bE=bj(),bC=bd(),bx=aO(),bD,bA=av.map(bG,bt),bB,bz,by,bF,bw=[];for(bB=0;bB<bE;bB++){bD=aN(0,bB);k(bD,bC);bF=bg(bG,bA,bD,k(P(bD),bx-bC));bF=al(bF);for(bz=0;bz<bF.length;bz++){by=bF[bz];by.col=bB;bw.push(by)}}return bw}function bg(bI,bC,by,bB){var bz=[],bD,bF=bI.length,bx,bG,bE,bH,bJ,bw,bA;for(bD=0;bD<bF;bD++){bx=bI[bD];bG=bx.start;bE=bC[bD];if(bE>by&&bG<bB){if(bG<by){bH=P(by);bw=false}else{bH=bG;bw=true}if(bE>bB){bJ=P(bB);bA=false}else{bJ=bE;bA=true}bz.push({event:bx,start:bH,end:bJ,isStart:bw,isEnd:bA})}}return bz.sort(y)}function bt(bw){if(bw.end){return P(bw.end)}else{return k(P(bw.start),a2("defaultEventMinutes"))}}function aW(bH,bI){var bM,bP=bH.length,bO,bK,bE,bA,bB,bD,by,bJ,bw,bQ,bC="",bR,bN,bz,bG,bF,bL=bu(),bx=a2("isRTL");for(bM=0;bM<bP;bM++){bO=bH[bM];bK=bO.event;bE=aV(bO.start,bO.start);bA=aV(bO.start,bO.end);bB=bh(bO.col);bD=be(bO.col);by=bD-bB;bD-=by*0.025;by=bD-bB;bJ=by*(bO.forwardCoord-bO.backwardCoord);if(a2("slotEventOverlap")){bJ=Math.max((bJ-(20/2))*2,bJ)}if(bx){bQ=bD-bO.backwardCoord*by;bw=bQ-bJ}else{bw=bB+bO.backwardCoord*by;bQ=bw+bJ}bw=Math.max(bw,bB);bQ=Math.min(bQ,bD);bJ=bQ-bw;bO.top=bE;bO.left=bw;bO.outerWidth=bJ;bO.outerHeight=bA-bE;bC+=a8(bK,bO)}bL[0].innerHTML=bC;bR=bL.children();for(bM=0;bM<bP;bM++){bO=bH[bM];bK=bO.event;bN=av(bR[bM]);bz=a9("eventRender",bK,bK,bN);if(bz===false){bN.remove()}else{if(bz&&bz!==true){bN.remove();bN=av(bz).css({position:"absolute",top:bO.top,left:bO.left}).appendTo(bL)}bO.element=bN;if(bK._id===bI){bo(bK,bN,bO)}else{bN[0]._fci=bM}a0(bK,bN)}}v(bL,bH,bo);for(bM=0;bM<bP;bM++){bO=bH[bM];if(bN=bO.element){bO.vsides=I(bN,true);bO.hsides=j(bN,true);bG=bN.find(".fc-event-title");if(bG.length){bO.contentTop=bG[0].offsetTop}}}for(bM=0;bM<bP;bM++){bO=bH[bM];if(bN=bO.element){bN[0].style.width=Math.max(0,bO.outerWidth-bO.hsides)+"px";bF=Math.max(0,bO.outerHeight-bO.vsides);bN[0].style.height=bF+"px";bK=bO.event;if(bO.contentTop!==w&&bF-bO.contentTop<10){bN.find("div.fc-event-time").text(bk(bK.start,a2("timeFormat"))+" - "+bK.title);bN.find("div.fc-event-title").remove()}a9("eventAfterRender",bK,bK,bN)}}}function a8(bB,bw){var bA="<";var by=bB.url;var bx=S(bB,a2);var bz=["fc-event","fc-event-vert"];if(aQ(bB)){bz.push("fc-event-draggable")}if(bw.isStart){bz.push("fc-event-start")}if(bw.isEnd){bz.push("fc-event-end")}bz=bz.concat(bB.className);if(bB.source){bz=bz.concat(bB.source.className||[])}if(by){bA+="a href='"+aI(bB.url)+"'"}else{bA+="div"}bA+=" class='"+bz.join(" ")+"' style='position:absolute;top:"+bw.top+"px;left:"+bw.left+"px;"+bx+"'><div class='fc-event-inner'><div class='fc-event-time'>"+aI(a4(bB.start,bB.end,a2("timeFormat")))+"</div><div class='fc-event-title'>"+aI(bB.title||"")+"</div></div><div class='fc-event-bg'></div>";if(bw.isEnd&&br(bB)){bA+="<div class='ui-resizable-handle ui-resizable-s'>=</div>"}bA+="</"+(by?"a":"div")+">";return bA}function bo(by,bx,bw){var bz=bx.find("div.fc-event-time");if(aQ(by)){bb(by,bx,bz)}if(bw.isEnd&&br(by)){bq(by,bx,bz)}bc(by,bx)}function aY(bx,bG,bB){var bw=bB.isStart;var bH;var bF;var bJ=true;var bA;var bz=aP();var bC=a3();var by=bl();var bI=aX();var bE=bd();bG.draggable({opacity:a2("dragOpacity","month"),revertDuration:a2("dragRevertDuration"),start:function(bK,bL){a9("eventDragStart",bG,bx,bK,bL);a1(bx,bG);bH=bG.width();bz.start(function(bN,bM){aU();if(bN){bF=false;var bP=aN(0,bM.col);var bO=aN(0,bN.col);bA=aC(bO,bP);if(!bN.row){ba(aF(P(bx.start),bA),aF(ap(bx),bA));bD()}else{if(bw){if(bJ){bG.width(bC-10);aa(bG,by*Math.round((bx.end?((bx.end-bx.start)/V):a2("defaultEventMinutes"))/bI));bG.draggable("option","grid",[bC,1]);bJ=false}}else{bF=true}}bF=bF||(bJ&&!bA)}else{bD();bF=true}bG.draggable("option","revert",bF)},bK,"drag")},stop:function(bL,bM){bz.stop();aU();a9("eventDragStop",bG,bx,bL,bM);if(bF){bD();bG.css("filter","");aT(bx,bG)}else{var bK=0;if(!bJ){bK=Math.round((bG.offset().top-aZ().offset().top)/by)*bI+bE-(bx.start.getHours()*60+bx.start.getMinutes())}bp(this,bx,bA,bK,bJ,bL,bM)}}});function bD(){if(!bJ){bG.width(bH).height("").draggable("option","grid",null);bJ=true}}}function bb(bJ,bL,by){var bE=bm.getCoordinateGrid();var bH=bj();var bQ=a3();var bI=bl();var bD=aX();var bP;var bN;var bO,bG;var bw,bz;var bx,bC;var bA;var bK,bB;bL.draggable({scroll:false,grid:[bQ,bI],axis:bH==1?"y":false,opacity:a2("dragOpacity"),revertDuration:a2("dragRevertDuration"),start:function(bR,bS){F(bR);a9("eventDragStart",bL,bJ,bR,bS);a1(bJ,bL);bE.build();bP=bL.position();bN=bE.cell(bR.pageX,bR.pageY);bO=bG=true;bw=bz=bf(bN);bx=bC=0;bA=0;bK=bB=0},drag:function(bV,bW){F(bV);var bR=bE.cell(bV.pageX,bV.pageY);bO=!!bR;if(bO){bw=bf(bR);bx=Math.round((bW.position.left-bP.left)/bQ);if(bx!=bC){var bU=aN(0,bN.col);var bT=bN.col+bx;bT=Math.max(0,bT);bT=Math.min(bH-1,bT);var bS=aN(0,bT);bA=aC(bS,bU)}if(!bw){bK=Math.round((bW.position.top-bP.top)/bI)*bD}}if(bO!=bG||bw!=bz||bx!=bC||bK!=bB){bM();bG=bO;bz=bw;bC=bx;bB=bK}bL.draggable("option","revert",!bO)},stop:function(bR,bS){F(bR);aU();a9("eventDragStop",bL,bJ,bR,bS);if(bO&&(bw||bA||bK)){bp(this,bJ,bA,bw?0:bK,bw,bR,bS)}else{bO=true;bw=false;bx=0;bA=0;bK=0;bM();bL.css("filter","");bL.css(bP);aT(bJ,bL)}}});function bM(){aU();if(bO){if(bw){by.hide();bL.draggable("option","grid",null);ba(aF(P(bJ.start),bA),aF(ap(bJ),bA))}else{bF(bK);by.css("display","");bL.draggable("option","grid",[bQ,bI])}}}function bF(bS){var bR=k(P(bJ.start),bS);var bT;if(bJ.end){bT=k(P(bJ.end),bS)}by.text(a4(bR,bT,a2("timeFormat")))}}function bq(bA,by,bB){var bz,bw;var bC=bl();var bx=aX();by.resizable({handles:{s:".ui-resizable-handle"},grid:bC,minHeight:bC,start:function(bD,bE){bz=bw=0;a9("eventResizeStart",this,bA,bD,bE)},resize:function(bD,bE){bz=Math.round((Math.max(bC,by.height())-bE.originalSize.height)/bC);if(bz!=bw){bB.text(a4(bA.start,(!bz&&!bA.end)?null:k(bs(bA),bx*bz),a2("timeFormat")));bw=bz}},stop:function(bD,bE){a9("eventResizeStop",this,bA,bD,bE);if(bz){a5(this,bA,0,bx*bz,bD,bE)}}})}}function al(aN){var aP=G(aN);var aQ=aP[0];var aO;Y(aP);if(aQ){for(aO=0;aO<aQ.length;aO++){ac(aQ[aO])}for(aO=0;aO<aQ.length;aO++){N(aQ[aO],0,0)}}return D(aP)}function G(aO){var aR=[];var aQ,aN;var aP;for(aQ=0;aQ<aO.length;aQ++){aN=aO[aQ];for(aP=0;aP<aR.length;aP++){if(!aL(aN,aR[aP]).length){break}}(aR[aP]||(aR[aP]=[])).push(aN)}return aR}function Y(aR){var aQ,aS;var aP,aN;var aO;for(aQ=0;aQ<aR.length;aQ++){aS=aR[aQ];for(aP=0;aP<aS.length;aP++){aN=aS[aP];aN.forwardSegs=[];for(aO=aQ+1;aO<aR.length;aO++){aL(aN,aR[aO],aN.forwardSegs)}}}}function ac(aO){var aN=aO.forwardSegs;var aR=0;var aQ,aP;if(aO.forwardPressure===w){for(aQ=0;aQ<aN.length;aQ++){aP=aN[aQ];ac(aP);aR=Math.max(aR,1+aP.forwardPressure)}aO.forwardPressure=aR}}function N(aO,aQ,aR){var aN=aO.forwardSegs;var aP;if(aO.forwardCoord===w){if(!aN.length){aO.forwardCoord=1}else{aN.sort(aA);N(aN[0],aQ+1,aR);aO.forwardCoord=aN[0].backwardCoord}aO.backwardCoord=aO.forwardCoord-(aO.forwardCoord-aR)/(aQ+1);for(aP=0;aP<aN.length;aP++){N(aN[aP],0,aO.forwardCoord)}}}function D(aQ){var aN=[];var aP,aR;var aO;for(aP=0;aP<aQ.length;aP++){aR=aQ[aP];for(aO=0;aO<aR.length;aO++){aN.push(aR[aO])}}return aN}function aL(aN,aQ,aP){aP=aP||[];for(var aO=0;aO<aQ.length;aO++){if(e(aN,aQ[aO])){aP.push(aQ[aO])}}return aP}function e(aO,aN){return aO.end>aN.start&&aO.start<aN.end}function aA(aO,aN){return aN.forwardPressure-aO.forwardPressure||(aO.backwardCoord||0)-(aN.backwardCoord||0)||y(aO,aN)}function y(aO,aN){return aO.start-aN.start||(aN.end-aN.start)-(aO.end-aO.start)||(aO.event.title||"").localeCompare(aN.event.title)}function aG(a2,bm,aZ){var bl=this;bl.element=a2;bl.calendar=bm;bl.name=aZ;bl.opt=a7;bl.trigger=bf;bl.isEventDraggable=aS;bl.isEventResizable=br;bl.setEventData=bo;bl.clearEventData=aR;bl.eventEnd=bs;bl.reportEventElement=a5;bl.triggerEventDestroy=be;bl.eventElementHandlers=bh;bl.showEvents=aU;bl.hideEvents=a6;bl.eventDrop=bp;bl.eventResize=ba;var bu=bl.defaultEventEnd;var bg=bm.normalizeEvent;var bq=bm.reportEventChange;var a4={};var aY={};var bt=[];var bc=bm.options;function a7(bz,bx){var by=bc[bz];if(av.isPlainObject(by)){return H(by,bx||aZ)}return by}function bf(bx,by){return bm.trigger.apply(bm,[bx,by||bl].concat(Array.prototype.slice.call(arguments,2),[bl]))}function aS(bx){var by=bx.source||{};return aK(bx.startEditable,by.startEditable,a7("eventStartEditable"),bx.editable,by.editable,a7("editable"))&&!a7("disableDragging")}function br(bx){var by=bx.source||{};return aK(bx.durationEditable,by.durationEditable,a7("eventDurationEditable"),bx.editable,by.editable,a7("editable"))&&!a7("disableResizing")}function bo(bz){a4={};var by,bx=bz.length,bA;for(by=0;by<bx;by++){bA=bz[by];if(a4[bA._id]){a4[bA._id].push(bA)}else{a4[bA._id]=[bA]}}}function aR(){a4={};aY={};bt=[]}function bs(bx){return bx.end?P(bx.end):bu(bx)}function a5(by,bx){bt.push({event:by,element:bx});if(aY[by._id]){aY[by._id].push(bx)}else{aY[by._id]=[bx]}}function be(){av.each(bt,function(bx,by){bl.trigger("eventDestroy",by.event,by.event,by.element)})}function bh(by,bx){bx.click(function(bz){if(!bx.hasClass("ui-draggable-dragging")&&!bx.hasClass("ui-resizable-resizing")){return bf("eventClick",this,by,bz)}}).hover(function(bz){bf("eventMouseover",this,by,bz)},function(bz){bf("eventMouseout",this,by,bz)})}function aU(by,bx){a3(by,bx,"show")}function a6(by,bx){a3(by,bx,"hide")}function a3(bA,bz,bC){var bB=aY[bA._id],by,bx=bB.length;for(by=0;by<bx;by++){if(!bz||bB[by][0]!=bz[0]){bB[by][bC]()}}}function bp(bA,by,bz,bB,bE,bD,bC){var bF=by.allDay;var bx=by._id;a8(a4[bx],bz,bB,bE);bf("eventDrop",bA,by,bz,bB,bE,function(){a8(a4[bx],-bz,-bB,bF);bq(bx)},bD,bC);bq(bx)}function ba(bD,bB,by,bx,bA,bC){var bz=bB._id;a0(a4[bz],by,bx);bf("eventResize",bD,bB,by,bx,function(){a0(a4[bz],-by,-bx);bq(bz)},bA,bC);bq(bz)}function a8(bB,bz,by,bC){by=by||0;for(var bD,bx=bB.length,bA=0;bA<bx;bA++){bD=bB[bA];if(bC!==w){bD.allDay=bC}k(aF(bD.start,bz,true),by);if(bD.end){bD.end=k(aF(bD.end,bz,true),by)}bg(bD,bc)}}function a0(bB,bz,by){by=by||0;for(var bC,bx=bB.length,bA=0;bA<bx;bA++){bC=bB[bA];bC.end=k(aF(bs(bC),bz,true),by);bg(bC,bc)}}bl.isHiddenDay=aW;bl.skipHiddenDays=aT;bl.getCellsPerWeek=bj;bl.dateToCell=bn;bl.dateToDayOffset=bb;bl.dayOffsetToCellOffset=aP;bl.cellOffsetToCell=a1;bl.cellToDate=aQ;bl.cellToCellOffset=aN;bl.cellOffsetToDayOffset=bd;bl.dayOffsetToDate=bw;bl.rangeToSegments=bi;var a9=a7("hiddenDays")||[];var aO=[];var bv;var aV=[];var aX=[];var bk=a7("isRTL");(function(){if(a7("weekends")===false){a9.push(0,6)}for(var by=0,bx=0;by<7;by++){aV[by]=bx;aO[by]=av.inArray(by,a9)!=-1;if(!aO[by]){aX[bx]=by;bx++}}bv=bx;if(!bv){throw"invalid hiddenDays"}})();function aW(bx){if(typeof bx=="object"){bx=bx.getDay()}return aO[bx]}function bj(){return bv}function aT(by,bz,bx){bz=bz||1;while(aO[(by.getDay()+(bx?bz:0)+7)%7]){aF(by,bz)}}function aQ(){var bz=aN.apply(null,arguments);var bx=bd(bz);var by=bw(bx);return by}function aN(bC,bA){var bz=bl.getColCnt();var by=bk?-1:1;var bx=bk?bz-1:0;if(typeof bC=="object"){bA=bC.col;bC=bC.row}var bB=bC*bz+(bA*by+bx);return bB}function bd(by){var bx=bl.visStart.getDay();by+=aV[bx];return Math.floor(by/bv)*7+aX[(by%bv+bv)%bv]-bx}function bw(bx){var by=P(bl.visStart);aF(by,bx);return by}function bn(bz){var by=bb(bz);var bA=aP(by);var bx=a1(bA);return bx}function bb(bx){return aC(bx,bl.visStart)}function aP(by){var bx=bl.visStart.getDay();by+=bx;return Math.floor(by/7)*bv+aV[(by%7+7)%7]-aV[bx]}function a1(bC){var bA=bl.getColCnt();var by=bk?-1:1;var bx=bk?bA-1:0;var bB=Math.floor(bC/bA);var bz=((bC%bA+bA)%bA)*by+bx;return{row:bB,col:bz}}function bi(by,bN){var bB=bl.getRowCnt();var bL=bl.getColCnt();var bM=[];var bP=bb(by);var bK=bb(bN);var bO=aP(bP);var bC=aP(bK)-1;for(var bD=0;bD<bB;bD++){var bz=bD*bL;var bH=bz+bL-1;var bI=Math.max(bO,bz);var bA=Math.min(bC,bH);if(bI<=bA){var bx=a1(bI);var bJ=a1(bA);var bG=[bx.col,bJ.col].sort();var bE=bd(bI)==bP;var bF=bd(bA)+1==bK;bM.push({row:bD,leftCol:bG[0],rightCol:bG[1],isStart:bE,isEnd:bF})}}return bM}}function Z(){var bu=this;bu.renderDayEvents=bB;bu.draggableDayEvent=a3;bu.resizableDayEvent=bo;var a8=bu.opt;var bl=bu.trigger;var aV=bu.isEventDraggable;var bx=bu.isEventResizable;var by=bu.eventEnd;var a6=bu.reportEventElement;var bn=bu.eventElementHandlers;var aY=bu.showEvents;var a7=bu.hideEvents;var bw=bu.eventDrop;var bc=bu.eventResize;var bC=bu.getRowCnt;var bt=bu.getColCnt;var ba=bu.getColWidth;var a2=bu.allDayRow;var bA=bu.colLeft;var a4=bu.colRight;var bs=bu.colContentLeft;var bq=bu.colContentRight;var bv=bu.dateToCell;var aW=bu.getDaySegmentContainer;var bb=bu.calendar.formatDates;var bm=bu.renderDayOverlay;var aZ=bu.clearOverlays;var aP=bu.clearSelection;var aU=bu.getHoverListener;var bp=bu.rangeToSegments;var aS=bu.cellToDate;var aO=bu.cellToCellOffset;var bj=bu.cellOffsetToDayOffset;var be=bu.dateToDayOffset;var aR=bu.dayOffsetToCellOffset;function bB(bF,bE){var bD=a1(bF,false,true);af(bD,function(bH,bG){a6(bH.event,bG)});a0(bD,bE);af(bD,function(bH,bG){bl("eventAfterRender",bH.event,bH.event,bG)})}function bf(bE,bH,bG){var bD=a1([bE],true,false);var bF=[];af(bD,function(bJ,bI){if(bJ.row===bH){bI.css("top",bG)}bF.push(bI[0])});return bF}function a1(bG,bK,bI){var bH=aW();var bF=bK?av("<div/>"):bH;var bD=a5(bG);var bE;var bJ;bz(bD);bE=bd(bD);bF[0].innerHTML=bE;bJ=bF.children();if(bK){bH.append(bJ)}aX(bD,bJ);af(bD,function(bM,bL){bM.hsides=j(bL,true)});af(bD,function(bM,bL){bL.width(Math.max(0,bM.outerWidth-bM.hsides))});af(bD,function(bM,bL){bM.outerHeight=bL.outerHeight(true)});aT(bD,bI);return bD}function a5(bF){var bD=[];for(var bE=0;bE<bF.length;bE++){var bG=bk(bF[bE]);bD.push.apply(bD,bG)}return bD}function bk(bG){var bD=bG.start;var bH=ap(bG);var bE=bp(bD,bH);for(var bF=0;bF<bE.length;bF++){bE[bF].event=bG}return bE}function bz(bE){var bH=a8("isRTL");for(var bG=0;bG<bE.length;bG++){var bI=bE[bG];var bJ=(bH?bI.isEnd:bI.isStart)?bs:bA;var bD=(bH?bI.isStart:bI.isEnd)?bq:a4;var bK=bJ(bI.leftCol);var bF=bD(bI.rightCol);bI.left=bK;bI.outerWidth=bF-bK}}function bd(bD){var bF="";for(var bE=0;bE<bD.length;bE++){bF+=a9(bD[bE])}return bF}function a9(bI){var bG="";var bF=a8("isRTL");var bH=bI.event;var bE=bH.url;var bJ=["fc-event","fc-event-hori"];if(aV(bH)){bJ.push("fc-event-draggable")}if(bI.isStart){bJ.push("fc-event-start")}if(bI.isEnd){bJ.push("fc-event-end")}bJ=bJ.concat(bH.className);if(bH.source){bJ=bJ.concat(bH.source.className||[])}var bD=S(bH,a8);if(bE){bG+="<a href='"+aI(bE)+"'"}else{bG+="<div"}bG+=" class='"+bJ.join(" ")+"' style='position:absolute;left:"+bI.left+"px;"+bD+"'><div class='fc-event-inner'>";if(!bH.allDay&&bI.isStart){bG+="<span class='fc-event-time'>"+aI(bb(bH.start,bH.end,a8("timeFormat")))+"</span>"}bG+="<span class='fc-event-title'>"+aI(bH.title||"")+"</span></div>";if(bI.isEnd&&bx(bH)){bG+="<div class='ui-resizable-handle ui-resizable-"+(bF?"w":"e")+"'>&nbsp;&nbsp;&nbsp;</div>"}bG+="</"+(bE?"a":"div")+">";return bG}function aX(bE,bJ){for(var bG=0;bG<bE.length;bG++){var bI=bE[bG];var bH=bI.event;var bF=bJ.eq(bG);var bD=bl("eventRender",bH,bH,bF);if(bD===false){bF.remove()}else{if(bD&&bD!==true){bD=av(bD).css({position:"absolute",left:bI.left});bF.replaceWith(bD);bF=bD}bI.element=bF}}}function aT(bF,bH){var bI=aN(bF);var bD=br();var bE=[];if(bH){for(var bG=0;bG<bD.length;bG++){bD[bG].height(bI[bG])}}for(var bG=0;bG<bD.length;bG++){bE.push(bD[bG].position().top)}af(bF,function(bK,bJ){bJ.css("top",bE[bK.row]+bK.top)})}function aN(bF){var bH=bC();var bM=bt();var bN=[];var bD=bi(bF);for(var bL=0;bL<bH;bL++){var bK=bD[bL];var bJ=[];for(var bI=0;bI<bM;bI++){bJ.push(0)}for(var bE=0;bE<bK.length;bE++){var bG=bK[bE];bG.top=au(bJ.slice(bG.leftCol,bG.rightCol+1));for(var bI=bG.leftCol;bI<=bG.rightCol;bI++){bJ[bI]=bG.top+bG.outerHeight}}bN.push(au(bJ))}return bN}function bi(bE){var bI=bC();var bH=[];var bD;var bG;var bF;for(bD=0;bD<bE.length;bD++){bG=bE[bD];bF=bG.row;if(bG.element){if(bH[bF]){bH[bF].push(bG)}else{bH[bF]=[bG]}}}for(bF=0;bF<bI;bF++){bH[bF]=aQ(bH[bF]||[])}return bH}function aQ(bE){var bG=[];var bD=bh(bE);for(var bF=0;bF<bD.length;bF++){bG.push.apply(bG,bD[bF])}return bG}function bh(bF){bF.sort(ax);var bE=[];for(var bG=0;bG<bF.length;bG++){var bH=bF[bG];for(var bD=0;bD<bE.length;bD++){if(!b(bH,bE[bD])){break}}if(bE[bD]){bE[bD].push(bH)}else{bE[bD]=[bH]}}return bE}function br(){var bD;var bF=bC();var bE=[];for(bD=0;bD<bF;bD++){bE[bD]=a2(bD).find("div.fc-day-content > div")}return bE}function a0(bE,bD){var bF=aW();af(bE,function(bJ,bH,bG){var bI=bJ.event;if(bI._id===bD){bg(bI,bH,bJ)}else{bH[0]._fci=bG}});v(bF,bE,bg)}function bg(bF,bD,bE){if(aV(bF)){bu.draggableDayEvent(bF,bD,bE)}if(bE.isEnd&&bx(bF)){bu.resizableDayEvent(bF,bD,bE)}bn(bF,bD)}function a3(bG,bF){var bE=aU();var bD;bF.draggable({delay:50,opacity:a8("dragOpacity"),revertDuration:a8("dragRevertDuration"),start:function(bH,bI){bl("eventDragStart",bF,bG,bH,bI);a7(bG,bF);bE.start(function(bK,bJ,bN,bO){bF.draggable("option","revert",!bK||!bN&&!bO);aZ();if(bK){var bM=aS(bJ);var bL=aS(bK);bD=aC(bL,bM);bm(aF(P(bG.start),bD),aF(ap(bG),bD))}else{bD=0}},bH,"drag")},stop:function(bH,bI){bE.stop();aZ();bl("eventDragStop",bF,bG,bH,bI);if(bD){bw(this,bG,bD,0,bG.allDay,bH,bI)}else{bF.css("filter","");aY(bG,bF)}}})}function bo(bG,bE,bF){var bD=a8("isRTL");var bI=bD?"w":"e";var bH=bE.find(".ui-resizable-"+bI);var bJ=false;aM(bE);bE.mousedown(function(bK){bK.preventDefault()}).click(function(bK){if(bJ){bK.preventDefault();bK.stopImmediatePropagation()}});bH.mousedown(function(bS){if(bS.which!=1){return}bJ=true;var bM=aU();var bQ=bC();var bT=bt();var bL=bE.css("top");var bO;var bK;var bR=av.extend({},bG);var bN=aR(be(bG.start));aP();av("body").css("cursor",bI+"-resize").one("mouseup",bP);bl("eventResizeStart",this,bG,bS);bM.start(function(bV,bU){if(bV){var bY=aO(bU);var bX=aO(bV);bX=Math.max(bX,bN);bO=bj(bX)-bj(bY);if(bO){bR.end=aF(by(bG),bO,true);var bW=bK;bK=bf(bR,bF.row,bL);bK=av(bK);bK.find("*").css("cursor",bI+"-resize");if(bW){bW.remove()}a7(bG)}else{if(bK){aY(bG);bK.remove();bK=null}}aZ();bm(bG.start,aF(ap(bG),bO))}},bS);function bP(bU){bl("eventResizeStop",this,bG,bU);av("body").css("cursor","");bM.stop();aZ();if(bO){bc(this,bG,bO,0,bU)}setTimeout(function(){bJ=false},0)}})}}function b(aO,aQ){for(var aN=0;aN<aQ.length;aN++){var aP=aQ[aN];if(aP.leftCol<=aO.rightCol&&aP.rightCol>=aO.leftCol){return true}}return false}function af(aN,aR){for(var aP=0;aP<aN.length;aP++){var aQ=aN[aP];var aO=aQ.element;if(aO){aR(aQ,aO,aP)}}}function ax(aO,aN){return(aN.rightCol-aN.leftCol)-(aO.rightCol-aO.leftCol)||aN.event.allDay-aO.event.allDay||aO.event.start-aN.event.start||(aO.event.title||"").localeCompare(aN.event.title)}function ao(){var aX=this;aX.select=aV;aX.unselect=aR;aX.reportSelection=aN;aX.daySelectionMousedown=aU;var aP=aX.opt;var aQ=aX.trigger;var aS=aX.defaultSelectionEnd;var aO=aX.renderSelection;var aW=aX.clearSelection;var aT=false;if(aP("selectable")&&aP("unselectAuto")){av(document).mousedown(function(aY){var aZ=aP("unselectCancel");if(aZ){if(av(aY.target).parents(aZ).length){return}}aR(aY)})}function aV(aY,a0,aZ){aR();if(!a0){a0=aS(aY,aZ)}aO(aY,a0,aZ);aN(aY,a0,aZ)}function aR(aY){if(aT){aT=false;aW();aQ("unselect",null,aY)}}function aN(aY,a1,a0,aZ){aT=true;aQ("select",null,aY,a1,a0,aZ)}function aU(a2){var a0=aX.cellToDate;var aZ=aX.getIsCellAllDay;var aY=aX.getHoverListener();var a3=aX.reportDayClick;if(a2.which==1&&aP("selectable")){aR(a2);var a1=this;var a4;aY.start(function(a6,a5){aW();if(a6&&aZ(a6)){a4=[a0(a5),a0(a6)].sort(a);aO(a4[0],a4[1],true)}else{a4=null}},a2);av(document).one("mouseup",function(a5){aY.stop();if(a4){if(+a4[0]==+a4[1]){a3(a4[0],true,a5)}aN(a4[0],a4[1],true,a5)}})}}}function d(){var aQ=this;aQ.renderOverlay=aO;aQ.clearOverlays=aN;var aP=[];var aR=[];function aO(aT,aS){var aU=aR.shift();if(!aU){aU=av("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>")}if(aU[0].parentNode!=aS[0]){aU.appendTo(aS)}aP.push(aU.css(aT).show());return aU}function aN(){var aS;while(aS=aP.shift()){aR.push(aS.hide().unbind())}}}function Q(aN){var aO=this;var aP;var aQ;aO.build=function(){aP=[];aQ=[];aN(aP,aQ)};aO.cell=function(aR,aX){var aW=aP.length;var aS=aQ.length;var aT,aU=-1,aV=-1;for(aT=0;aT<aW;aT++){if(aX>=aP[aT][0]&&aX<aP[aT][1]){aU=aT;break}}for(aT=0;aT<aS;aT++){if(aR>=aQ[aT][0]&&aR<aQ[aT][1]){aV=aT;break}}return(aU>=0&&aV>=0)?{row:aU,col:aV}:null};aO.rect=function(aU,aW,aS,aT,aV){var aR=aV.offset();return{top:aP[aU][0]-aR.top,left:aQ[aW][0]-aR.left,width:aQ[aT][1]-aQ[aW][0],height:aP[aS][1]-aP[aU][0]}}}function aq(aS){var aQ=this;var aR;var aT;var aO;var aN;aQ.start=function(aU,aV,aW){aT=aU;aO=aN=null;aS.build();aP(aV);aR=aW||"mousemove";av(document).bind(aR,aP)};function aP(aU){F(aU);var aV=aS.cell(aU.pageX,aU.pageY);if(!aV!=!aN||aV&&(aV.row!=aN.row||aV.col!=aN.col)){if(aV){if(!aO){aO=aV}aT(aV,aO,aV.row-aO.row,aV.col-aO.col)}else{aT(aV,aO)}aN=aV}}aQ.stop=function(){av(document).unbind(aR,aP);return aN}}function F(aN){if(aN.pageX===w){aN.pageX=aN.originalEvent.pageX;aN.pageY=aN.originalEvent.pageY}}function n(aO){var aN=this,aP={},aS={},aR={};function aQ(aT){return aP[aT]=aP[aT]||aO(aT)}aN.left=function(aT){return aS[aT]=aS[aT]===w?aQ(aT).position().left:aS[aT]};aN.right=function(aT){return aR[aT]=aR[aT]===w?aN.left(aT)+aQ(aT).width():aR[aT]};aN.clear=function(){aP={};aS={};aR={}}}})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/js/calendar-data-cache.js' */
define("tc/calendar-cache",["jquery"],function(a){function b(){var c=[];function d(k,h){var f=false;for(var g=0;g<h.length;g++){for(var e=0;e<c[k].data.length;e++){if(h[g].id===c[k].data[e].id){f=true;break}}if(!f){c[k].data.push(h[g])}f=false}}return{hasCalendar:function(e){return c[e]},getCalendarStart:function(e){if(c[e]){return c[e].start}return null},getCalendarEnd:function(e){if(c[e]){return c[e].end}return null},addDataToCalendar:function(f,g,h,e){if(!c[f]){c[f]={data:g}}else{d(f,g)}if(!c[f].start||h.getTime()<c[f].start.getTime()){c[f].start=h}if(!c[f].end||e.getTime()>c[f].end.getTime()){c[f].end=e}},removeCalendar:function(f){if(a.isArray(f)){var e=this;a.each(f,function(h,g){if(a.isPlainObject(g)&&g.id&&typeof g.id==="string"){e.removeCalendar(g.id)}else{e.removeCalendar(g.toString())}})}else{delete c[f]}},removeAllCalendars:function(){c=[]},getCalendarData:function(e){if(!c[e]){return null}return c[e].data}}}return b});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/components/calendar-restriction-dialog/calendar-restrictons-dialog.js' */
define("tc/calendar-restriction-dialog",["jquery","underscore","tc-backbone","tc/templates","tc/calendar-util"],function(e,a,f,c,b){var d=f.View.extend({restrictionDialog:null,calendarDiv:null,subCalendar:null,calendarPlugin:null,calendarCache:null,editDialog:null,initialize:function(g){this.calendarDiv=g.calendarDiv;this.subCalendar=g.subCalendar;this.calendarPlugin=g.calendarPlugin;this.calendarCache=g.calendarCache;this.editDialog=g.editDialog;this.$el.html(c.restrictSubCalendar({elementIdSuffix:this.calendarPlugin.getParameter(this.calendarDiv,"elementIdSuffix"),pdlEnabled:b.isPDLEnabled()}));this.editDialog.addPanel("Restrictions",this.$el,"setup-calendar-panel")},render:function(){var h=this;this.editDialog.getCurrentPanel().onselect=function(){e("#edit-calendar-dialog").find(".button-panel-button.submit").removeClass("hidden")};var g=e("form",h.editDialog.getCurrentPanel().body);e("input[name='subCalendarId']",g).val(h.subCalendar.id||"");e(".field-group-permissions",g).each(function(){var i=e(this);e(".permissions-details",i).each(function(k){var l=e(this);var j=e(".autocomplete-user",i);j.bind("selected.autocomplete-user",function(n,m){h._addUsersToPermissionFieldGroup(i,{id:m.content.userKey||m.content.username,name:m.content.username,fullName:m.content.title,avatarUrl:m.content.thumbnailLink.href},true);j.val("")}).focus(function(){if(j.hasClass("with-hint")){j.removeClass("with-hint").val("")}}).blur(function(){if(!j.val()){j.addClass("with-hint").val("Enter user name")}}).keydown(function(m){if(m.keyCode===13&&!e(".autocomplete .aui-dropdown .active").length){setTimeout(function(){var n=j.val();if(n){h._addGroupsToPermissionFieldGroup(i,n.split(","),true,true);j.val("")}else{h.submitRestrictionsDialog(h.editDialog)}},300);e(".autocomplete .aui-dropdown .no-results").trigger("click");return false}});e(".group-picker-trigger",l).click(function(){var m="Team_Calendars_group_picker_callback_"+h.calendarPlugin.getParameter(h.calendarDiv,"elementIdSuffix")+"_"+k;window[m]=function(n){h._addGroupsToPermissionFieldGroup(i,n.split(","),false,true)};window.open(h.calendarPlugin.getParameter(h.calendarDiv,"baseUrl")+"/spaces/opengrouppicker.action?key=ds&startIndex=0&actionName=dosearchgroups.action&onPopupSubmit="+encodeURIComponent(m),m,"dependent=1,height=512,width=384,resizable=1,status=0").focus();return false})})});e(".field-group-permissions",g).each(function(){var j=e(this);var k=e(".option-view-restrictions",j);var i=e(".option-edit-restrictions",j);h._addUsersToPermissionFieldGroup(j,h.subCalendar.usersPermittedToEdit||[]);h._addGroupsToPermissionFieldGroup(j,h.subCalendar.groupsPermittedToEdit||[]);i.removeAttr("checked");k.attr("checked","checked");h._addUsersToPermissionFieldGroup(j,h.subCalendar.usersPermittedToView||[]);h._addGroupsToPermissionFieldGroup(j,h.subCalendar.groupsPermittedToView||[])});return h.editDialog},submitRestrictionsDialog:function(h){var n=this;var k=e("form",h.getCurrentPanel().body);var l=function(o){return e.map(e(".permitted-entity",o),function(q){var p=e(q).data("entity");return e.isPlainObject(p)?p.id:null})};var m=function(o){return e.map(e(".permitted-entity",o),function(q){var p=e(q).data("entity");return typeof p==="string"?p:null})};var i={subCalendarId:e("input[name='subCalendarId']",k).val()};b.putCalendarContextParams(i);var j=e(".view-permissions",k);if(j.length){i.updateUsersPermittedToView=true;i.usersPermittedToView=l(j);if(!i.usersPermittedToView.length){delete i.usersPermittedToView}i.updateGroupsPermittedToView=true;i.groupsPermittedToView=m(j);if(!i.groupsPermittedToView.length){delete i.groupsPermittedToView}}var g=e(".edit-permissions",k);if(g.length){i.updateUsersPermittedToEdit=true;i.usersPermittedToEdit=l(g);if(!i.usersPermittedToEdit.length){delete i.usersPermittedToEdit}i.updateGroupsPermittedToEdit=true;i.groupsPermittedToEdit=m(g);if(!i.groupsPermittedToEdit.length){delete i.groupsPermittedToEdit}}if(n.calendarPlugin.getParameter(n.calendarDiv,"include")){i.include=n.calendarPlugin.getParameter(n.calendarDiv,"include")}if(!n.calendarPlugin.isProcessingSubCalendar(n.calendarDiv)){n.calendarPlugin.setSubCalendarSpinnerIconVisible(n.calendarDiv,true);e.ajax({cache:false,converters:{"text json":function(o){return o}},data:i,dataType:"json",dataFilter:function(o){var p=e.parseJSON(o);if(p.success){n.calendarPlugin.mergeSubCalendarObjectsToArray(p.payload)}return p},error:function(o,q,p){n.calendarPlugin.showAjaxError(n.calendarDiv,o,q,p,n.calendarPlugin.ERROR_CLASS_SUB_CALENDAR_UPDATE);n.calendarPlugin.setSubCalendarSpinnerIconVisible(n.calendarDiv,false);n.calendarPlugin.setProcessingSubCalendar(n.calendarDiv,false)},success:function(o){n.calendarCache.removeCalendar(n.subCalendar.id);n.calendarPlugin.setGenericErrors(n.calendarDiv,null,n.calendarPlugin.ERROR_CLASS_SUB_CALENDAR_UPDATE);n.calendarPlugin.setSubCalendars(n.calendarDiv,o.payload);n.calendarPlugin.updateAvailableSubCalendarsInSubCalendarPanel(n.calendarDiv);n.calendarPlugin.setSubCalendarSpinnerIconVisible(n.calendarDiv,false);n.calendarPlugin.setProcessingSubCalendar(n.calendarDiv,false);h.hide()},type:"PUT",timeout:n.calendarPlugin.ajaxTimeout,url:n.calendarPlugin.getCalendarServiceBaseUrl(n.calendarDiv,"/subcalendars/restrictions.json")})}return false},_showHideHint:function(h){var g=e(".permission-table",h);var i=e(".permitted-entities",g);if(e(".permitted-entity",i).length){h.addClass("has-restrictions");g.removeClass("hidden")}else{h.removeClass("has-restrictions");g.addClass("hidden")}},_getRestrictionGroup:function(g){return e("input[name='restriction-type']:checked",g).val()==="view"?e(".view-permissions",g):e(".edit-permissions",g)},_addUsersToPermissionFieldGroup:function(l,n,h){var g=this;var j=g._getRestrictionGroup(l);var k=e(".permitted-entities",j);var m=function(o){return e(".permitted-entity",k).filter(function(){var p=e(this).data("entity");return e.isPlainObject(p)&&p.id===o.id}).length};var i;if(e.isPlainObject(n)){i=[n]}else{if(e.isArray(n)){i=n}}if(e.isArray(i)){e.each(i,function(p,o){if(!m(o)){var q=e(document.createElement("tr")).addClass("permitted-entity").append(e(document.createElement("td")).append(e(document.createElement("img")).attr("src",o.avatarUrl)).append(e(document.createElement("span")).text(o.fullName).append(e(document.createElement("span")).addClass("user-name").text("("+o.name+")")))).append(e(document.createElement("td")).addClass("delete-permitted-entity").append(e(document.createElement("a")).addClass("remove").attr("href","#").attr("title","Delete").text("Delete").click(function(){e(this).closest("tr").remove();g._showHideHint(j);return false}))).data("entity",o);if(h){q.prependTo(k)}else{k.append(q)}}});e(".error",l).empty()}g._showHideHint(j)},_addGroupsToPermissionFieldGroup:function(j,s,o,k){var m=this;var h=m._getRestrictionGroup(j),n=e(".permitted-entities",h),p=function(t){return e(".permitted-entity",n).filter(function(){var u=e(this).data("entity");return(typeof u==="string")&&u===t}).length},r=function(t){if(Confluence.TeamCalendars.isPDLEnabled()){return e("<td/>").append(e("<span/>",{"class":"group",text:t}))}else{return e("<td/>").append(e("<img/>",{src:Confluence.getBaseUrl()+"/images/icons/group_16.gif"})).append(e("<span/>",{text:t}))}};if(s.length){var g=function(t){e.each(t,function(u,w){w=e.trim(w);if(w&&!p(w)){var v=e(document.createElement("tr")).addClass("permitted-entity").append(r(w)).append(e(document.createElement("td")).addClass("delete-permitted-entity").append(e(document.createElement("a")).addClass("remove").attr("href","#").attr("title","Delete").text("Delete").click(function(){e(this).closest("tr").remove();m._showHideHint(h);return false}))).data("entity",w);if(k){v.prependTo(n)}else{n.append(v)}}})};var i=e(".error",j);if(o){var l;var q;e.ajax({cache:false,data:{groupNames:e.map(s,function(t){return e.trim(t)})},dataType:"json",success:function(t){l=t;q=e.map(s,function(u){return e.inArray(e.trim(u),l)===-1?e.trim(u):null});g(l);i.empty();if(q.length){i.text(AJS.format("Invalid group names(s) specified: {0}",q.join(", ")))}m._showHideHint(h)},type:"GET",timeout:m.calendarPlugin.ajaxTimeout,url:m.calendarPlugin.getCalendarServiceBaseUrl(m.calendarDiv,"/util/validate/group.json")})}else{i.empty();g(s);m._showHideHint(h)}}}});return d});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/components/calendar-remove-dialog/calendar-remove-dialog.js' */
define("tc/calendar-remove-dialog",["jquery","underscore","tc-backbone","tc/templates","tc/calendar-util","tc/util"],function(e,a,g,d,c,f){var b=g.View.extend({removeSubCalendarDialog:null,calendarDiv:null,subCalendar:null,calendarPlugin:null,initialize:function(h){this.calendarDiv=h.calendarDiv;this.subCalendar=h.subCalendar;this.calendarPlugin=h.calendarPlugin;this.removeSubCalendarDialog=e("#remove-calendar-dialog")},render:function(){var k=this;var h;var i=AJS.Meta.get("space-key")!==undefined||e("meta[name='ajs-page-id']").length>=1;if(this.removeSubCalendarDialog){this.removeSubCalendarDialog.remove()}h=c.isPDLEnabled()?230:200;this.removeSubCalendarDialog=new AJS.Dialog({width:512,height:h,id:"remove-calendar-dialog"});this.removeSubCalendarDialog.addHeader("Remove Calendar","subcalendar-remove-header calendar-dialog-panel");this.removeSubCalendarDialog.addPanel("subcalendar-remove-calendar",d.removeSubCalendar({inSpace:i}),"remove-subcalendar-form");var j=e(".calendar-to-remove",this.removeSubCalendarDialog.getPanel());j.attr("title",this.subCalendar.name);j.text(this.subCalendar.name);this.removeSubCalendarDialog.addButton("OK",function(){if(e("#deletecalendaroption:checked",k.removeSubCalendarDialog.getPanel()).length){k.calendarPlugin.deleteSubCalendar(k.calendarDiv,k.subCalendar)}else{k.calendarPlugin.unsubscribeFromSubcalendar(k.calendarDiv,k.subCalendar)}k.removeSubCalendarDialog.hide()});this.removeSubCalendarDialog.addLink("Cancel",function(){k.removeSubCalendarDialog.hide()});this.removeSubCalendarDialog.show()}});return b});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/components/calendar-feature-discovery-dialog/calendar-feature-discovery-dialog.js' */
define("tc/calendar-feature-discovery-dialog",["jquery","underscore","tc-backbone","tc/templates","tc/dialogs","tc/calendar-util","tc/util"],function(f,a,h,d,c,b,g){var e=h.View.extend({featureDiscoveryDialog:null,calendarDiv:null,subCalendar:null,calendarPlugin:null,initialize:function(i){this.calendarDiv=i.calendarDiv;this.subCalendar=i.subCalendar;this.calendarPlugin=i.calendarPlugin;this.featureDiscoveryDialog=f("#team-calendars-feature-discovery-dialog")},render:function(){var k=this;if(this.featureDiscoveryDialog){this.featureDiscoveryDialog.remove()}var i=b.isPDLEnabled()?385:340,l=new AJS.Dialog({width:596,height:i,id:"team-calendars-feature-discovery-dialog"});l.addHeader("Congratulations, you have created a new Calendar!");l.addPanel("",d.subCalendarFeatures({autoConvertSupported:b.getParameter(this.calendarDiv,"autoConvertSupported")==="true",subCalendar:this.subCalendar}),"setup-calendar-panel");var j=l.getCurrentPanel().body;f(".add-event",j).click(function(){l.remove();var m=c.getEditEventDialog({start:new Date(),localizedStartTime:k.calendarPlugin.getDefaultStartTime(k.calendarDiv),localizedEndTime:k.calendarPlugin.getDefaultEndTime(k.calendarDiv),allDay:(k.calendarDiv.data(k.calendarPlugin.PREF_LAST_ALL_DAY_USED)||"true")==="true",subCalendarId:k.subCalendar.id},k.subCalendar,k.calendarPlugin,k.calendarDiv);m.show();return false});f(".restrict",j).click(function(){l.remove();k.calendarPlugin.getSubCalendarRestrictionsDialog(k.calendarDiv,k.subCalendar).show();return false});f(".embed, .embed-or-share, .share",j).click(function(){l.remove();var m=k.calendarPlugin.getSubCalendarShareDialog(k.calendarDiv,k.subCalendar);m.show();f(".share-address-field",m.getCurrentPanel().body).focus().select();return false});l.addLink("Close",function(){l.remove()});l.show()}});return e});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/components/calendar-reset-url-dialog/calendar-reset-url-dialog.js' */
define("tc/calendar-reset-url-dialog",["jquery","underscore","tc-backbone","tc/templates","tc/calendar-util","tc/util"],function(e,b,g,d,c,f){var a=g.View.extend({resetUrlSubCalendarDialog:null,calendarDiv:null,subCalendar:null,calendarPlugin:null,initialize:function(h){this.calendarDiv=h.calendarDiv;this.subCalendar=h.subCalendar;this.calendarPlugin=h.calendarPlugin;this.resetUrlSubCalendarDialog=e("#calendar-reset-private-urls-dialog")},render:function(){var k=this;if(this.resetUrlSubCalendarDialog){this.resetUrlSubCalendarDialog.remove()}var h=new AJS.Dialog({width:512,height:235,id:"calendar-reset-private-urls-dialog"}),i=function(){h.hide();h.remove()};h.addHeader("Reset Subscription");h.addPanel("",d.resetSubCalendarPrivateUrl(),"calendar-private-url-reset-dialog-panel");var j=h.getCurrentPanel().body;h.addButton("Reset",function(){k.calendarPlugin.setSubCalendarSpinnerIconVisible(k.calendarDiv,true);var m=e(".reset-progress",j).addClass("reset-in-progress");var l=e("#calendar-reset-private-urls-dialog .subcalendar-private-url-reset-button").attr("disabled","disabled");e.ajax({cache:false,success:function(){m.removeClass("reset-in-progress").addClass("reset-done");e("#calendar-reset-private-urls-dialog .reset-cancel").text("Close");l.removeAttr("disabled");k.calendarPlugin.setSubCalendarSpinnerIconVisible(k.calendarDiv,false)},type:"PUT",timeout:c.ajaxTimeout,url:k.calendarPlugin.getCalendarServiceBaseUrl(k.calendarDiv,"/privateurl/reset/"+encodeURIComponent(k.subCalendar.id)),error:function(n,p,o){l.removeAttr("disabled");k.calendarPlugin.setSubCalendarSpinnerIconVisible(k.calendarDiv,false);c.showAjaxError(k.calendarDiv,n,p,o,k.calendarPlugin.ERROR_CLASS_RESET_PRIVATE_URLS)}})},"subcalendar-private-url-reset-button");h.addLink("Cancel",function(){i();return false},"reset-cancel");e(".calendar-title",j).text(k.subCalendar.name);e(".subscribe-to-calendar",j).click(function(){i();this.calendarPlugin.getSubCalendarIcalAddressDialog(k.calendarDiv,k.subCalendar).show();return false});h.show();return h}});return a});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/components/calendar-subcalendar-subscribe-dialog/calendar-subcalendar-subscribe-dialog.js' */
define("tc/calendar-subcalendar-subscribe-dialog",["jquery","underscore","tc-backbone","tc/templates","tc/calendar-util","tc/util","tc/infinite-list"],function(e,a,h,c,b,f,g){var d=h.View.extend({subCalendarSubscibeDialog:null,callbackHandler:null,options:null,initialize:function(i){this.options=i;this.callbackHandler=i.callbackHandler;this.subCalendarSubscibeDialog=e(this.options.id!==undefined?this.options.id:"internal-subscription-calendar-dialog")},render:function(){var p=this;if(this.subCalendarSubscibeDialog){this.subCalendarSubscibeDialog.remove()}var k=function(G,I,F,K,E,J){var H=e(".results",G.getCurrentPanel().body);e.ajax({cache:false,converters:{"text json":function(L){return L}},data:I,dataFilter:function(L){var M=e.parseJSON(L);if(M.success){Confluence.TeamCalendars.mergeSubCalendarObjectsToArray(M.payload)}return M.payload},dataType:"json",error:function(N,L,M){if(K){K(I,H)}},success:function(M){if(!J){H.empty()}if(M&&M.length){var L=e(c.calendarSearchResultTable()),N=J?e("tbody",e(H)):e("tbody",L),O=function(P){N.append(e(c.calendarSearchResult({name:P.name,description:P.description||"",relatedSpace:P.spaceName||"",numSubscribers:P.subscriberCount})).click(function(){var Q=e(this),R=Q.hasClass("active");if(R){Q.removeClass("active");e(".subcalendar-select",Q).removeAttr("checked")}else{Q.addClass("active");e(".subcalendar-select",Q).attr("checked","checked")}var S=true,T=e("tr.active",N);T.each(function(){if(e(this).data("subCalendar").watchable){S=false;return false}});if(T.length){D();o()}else{w();i()}if(!T.length||S){i()}else{if(!S&&!R){o()}}}).data("subCalendar",P))};e.each(M,function(Q,P){if(Confluence.TeamCalendars.isDummySubscriptionParentSubCalendar(P)){e.each(P.childSubCalendars||[],function(R,S){O(S)})}else{O(P)}});if(!J){H.append(L)}e(".ellipsedColumn",L).each(function(){var Q=e(this);var P=Q.text();Q.attr("title",P).addClass("relative").ThreeDots({max_rows:1}).removeClass("relative")});if(E){E(M)}}else{if(K){K(I,H)}}},timeout:Confluence.TeamCalendars.ajaxTimeout,url:Confluence.TeamCalendars.getCalendarServiceBaseUrl(F)})};var v=(function(){var I=p.options.id!==undefined?p.options.id:"internal-subscription-calendar-dialog";var F=new AJS.Dialog({width:800,height:400,id:I});F.addHeader("Add Existing Team Calendar");F.addPanel("",c.subscribeDialog(),"subscribe-to-subcalendars-panel");var G=F.getCurrentPanel().body;e("#subscribe-intro",G).append("Here\'s a list of popular calendars you might also like, or you can \u003cspan class=\"show-search\"\u003e\u003ca  href=\"#\"\u003esearch for other calendars\u003c/a\u003e\u003c/span\u003e. If you don\'t see what you\'re looking for, \u003ca class=\"create-your-subcalendar\" href=\"#\"\u003ecreate a calendar\u003c/a\u003e of your own.");e(".create-your-subcalendar",G).click(function(){F.remove();var L=Confluence.TeamCalendars.Dialogs.getSubCalendarCreateDialog("parent",p.callbackHandler);f.showDialogInUpdatedHeight(L);e("input[name='name']",L.getCurrentPanel().body).focus();return false});var K=e(".search",G);e(".form",K).submit(function(){return false});var E;e("textarea[name='query']",K).text("Search").addClass("blank-search").keydown(function(L){if(L.keyCode===13){return false}var N=e(this),M=N.hasClass("blank-search")?N.removeClass("blank-search").val("").val():N.val();if(E!==undefined){clearTimeout(E)}E=setTimeout(function(){var P=N.val();if(!N.hasClass("blank-search")&&P&&P!==M){var O=AJS.Meta.get("space-key")!==undefined||e("meta[name='ajs-page-id']").length>=1;K.addClass("searching");k(F,e.extend({term:P,startIndex:0,pageSize:10,showSubscriberCount:true,showSubCalendarsInView:O},p.options.searchParams||{}),"/search/subcalendars.json",function(R,Q){K.removeClass("searching");w();i();Q.empty().append(e(document.createElement("span")).addClass("no-subcalendars-found").text(AJS.format("No results found for {0}",R.term)))},function(){K.removeClass("searching");D();r()})}},500)}).blur(function(){var L=e(this);if(!e.trim(L.val())){L.addClass("blank-search").val("Search")}});if(F.addHelpText&&e.isFunction(F.addHelpText)){F.addHelpText(e(document.createElement("span")).addClass("show-popular").html("You can also browse \u003ca href=\"#\"\u003epopular calendars\u003c/a\u003e."));e("span.show-popular a",F.getCurrentPanel().page.buttonpanel).unbind("click").click(function(){F.remove();Confluence.TeamCalendars.Dialogs.getSubCalendarSubscribeDialog({callbackHandler:p.callbackHandler,heading:"Popular Team Calendars"}).show();return false});F.addHelpText(e(document.createElement("span")).addClass("show-search").html("You can also \u003ca href=\"#\"\u003esearch for calendars\u003c/a\u003e."));var J=function(){F.remove();Confluence.TeamCalendars.Dialogs.getSubCalendarSubscribeDialog(e.extend(e.extend({},p.options),{callbackHandler:p.callbackHandler,heading:"Add Existing Team Calendar",showSearch:true})).show();return false};e("#"+F.id).find("span.show-search a").unbind("click").click(J)}var H=e(".dialog-button-panel",F.popup.element);if(!p.options.disableWatching){e(document.createElement("input")).attr({type:"checkbox",name:"watch"}).addClass("watch-selected-subcalendars").appendTo(H);e(document.createElement("span")).addClass("watch-select-subcalendars-label").text("Watch selected calendars").appendTo(H)}e("<span class='spinner hidden aui-icon aui-icon-wait'>Loading...</span>").appendTo(H);F.addButton("Add",function(){var L=e("tr.active",G);if(L.length&&!p.callbackHandler.isProcessingSubCalendar()){p.callbackHandler.setProcessingSubCalendar(true);p.callbackHandler.setSubCalendarSpinnerIconVisible();w();i();l();e.ajax({cache:false,converters:{"text json":function(M){return M}},data:(function(){var M={color:p.callbackHandler.getNextCalendarColor(),watchSubCalendars:e(".watch-selected-subcalendars",F.popup.element).is(":checked")};var N=[];L.each(function(){N.push(e(this).data("subCalendar").id)});M.subCalendarIds=N;if(p.callbackHandler.getIncludedCalendars()){M.include=p.callbackHandler.getIncludedCalendars()}b.putCalendarContextParams(M);return M})(),dataFilter:function(M){var N=e.parseJSON(M);if(N.success){Confluence.TeamCalendars.mergeSubCalendarObjectsToArray(N.payload)}return N},dataType:"json",error:function(M,O,N){Confluence.TeamCalendars.showAjaxError(G,M,O,N,"error-subcalendar-refresh");p.callbackHandler.setProcessingSubCalendar(false);D();o();n()},success:function(M){if(!M.success){b.setGenericErrors(G,"Uh oh. Looks like something unexpectedly went wrong. Please check the Confluence log file.","error-subcalendar-refresh");return}p.callbackHandler.setSubCalendars(AJS.$.map(L,function(N){return e(N).data("subCalendar").id}).toString(),M.payload);p.callbackHandler.updateAvailableSubCalendarsInSubCalendarPanel();b.setGenericErrors(G,null,"error-subcalendar-refresh");F.remove();p.callbackHandler.setProcessingSubCalendar(false)},type:"PUT",timeout:Confluence.TeamCalendars.ajaxTimeout,url:Confluence.TeamCalendars.getCalendarServiceBaseUrl("/subcalendars/subscribe.json")})}else{F.remove()}},"subscribe-to-subcalendar-button");F.addLink("Cancel",function(){F.remove();return false});return F})();var B=function(){var E=A.showSearch?e(".subscribe-to-subcalendars-panel.search .spinner"):e(".subscribe-to-subcalendars-panel.popular .spinner");e(E).css("display","none")};var s=function(){var E=A.showSearch?e(".subscribe-to-subcalendars-panel.search .spinner"):e(".subscribe-to-subcalendars-panel.popular .spinner");e(E).css("display","inline-block")};var y=function(){B();t.destroy()};var q=function(F,E){s();k(v,e.extend({startIndex:F,pageSize:E},p.options.searchParams||{}),"/search/subcalendars/popular",y,function(){B()},true)};var z=function(G,F){var E=e("textarea[name='query']",e(".subscribe-to-subcalendars-panel.search")).val();s();k(v,e.extend({startIndex:G,pageSize:F,term:E,showSubscriberCount:true,showSubCalendarsInView:e("meta[name='ajs-page-id']").length>=1},p.options.searchParams||{}),"/search/subcalendars.json",y,function(){B()},true)};var t=null;function r(){if(t){t.destroy()}t=g.init({$el:e(".tc-subscription-result"),load:A.showSearch?z:q,$container:e(".subscribe-to-subcalendars-panel .tc-table-content"),body:e(".subscribe-to-subcalendars-panel .tc-subscription-result")[0],scrollMargin:30,isLoadMoreItems:A.showSearch?true:false})}var C=v.getCurrentPanel();var m=C.body;var w=function(){e(".subscribe-to-subcalendar-button","#internal-subscription-calendar-dialog").attr("disabled","disabled").addClass("ui-state-disabled")};var D=function(){e(".subscribe-to-subcalendar-button","#internal-subscription-calendar-dialog").removeAttr("disabled","disabled").removeClass("ui-state-disabled")};var i=function(){e(".watch-selected-subcalendars","#internal-subscription-calendar-dialog").disable()};var o=function(){e(".watch-selected-subcalendars","#internal-subscription-calendar-dialog").enable()};var l=function(){e(".spinner","#internal-subscription-calendar-dialog").removeClass("hidden")};var n=function(){e(".spinner","#internal-subscription-calendar-dialog").addClass("hidden")};var A=e.extend({heading:"Add Existing Team Calendar"},this.options);var u=C.page.header;u.empty().text(A.heading);if(A.showSearch){u.removeClass("welcome-heading-with-logo")}else{u.addClass("welcome-heading-with-logo")}if(Confluence.TeamCalendars.isPDLEnabled()){if(A.showSearch){m.removeClass("popular").addClass("search")}else{m.removeClass("search").addClass("popular")}}e(".results",m).empty();e(".mode",m).removeClass().addClass("mode"+(A.showSearch?"":" new-user"));var j=e(".watch-selected-subcalendars");i();if(p.callbackHandler.isAutoWatchSet()){j.attr("checked","checked")}else{j.removeAttr("checked")}w();i();if(A.showSearch){if(Confluence.TeamCalendars.isCalendarSearchDisabled){e("#tc-subscribe-no-search-warning",m).removeClass("hidden");e(".search",m).addClass("hidden");k(v,{},"/search/subcalendars/all",n,function(){e("#tc-subscribe-no-search-warning .spinner",m).addClass("hidden")})}e("input[name='query']",m).val("");e(".dialog-tip .show-popular",C.page.buttonpanel).removeClass("hidden");e(".dialog-tip .show-search",C.page.buttonpanel).addClass("hidden")}else{var x=e(".preamble",m).addClass("loading");var n=function(){x.removeClass("loading")};k(v,e.extend({startIndex:0,pageSize:10},p.options.searchParams||{}),"/search/subcalendars/popular",n,function(){n();r()});e(".dialog-tip .show-popular",C.page.buttonpanel).addClass("hidden");e(".dialog-tip .show-search",C.page.buttonpanel).removeClass("hidden")}p.subCalendarSubscibeDialog=v;v.show();return v}});return d});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/components/calendar-subcalendar-subscribe-dialog/calendar-subcalendar-subscribe-dialog-compat.js' */
require(["tc/calendar-subcalendar-subscribe-dialog"],function(a){if(!Confluence.TeamCalendars.Dialogs){Confluence.TeamCalendars.Dialogs={}}Confluence.TeamCalendars.Dialogs.getSubCalendarSubscribeDialog=function(b){return new a(b).render()}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/js/add-from-macro-dialog.js' */
(function(a){Confluence.TeamCalendars.Dialogs.getAddDialogForMacro=function(d){var b=d.params?d.params.id:"";var c={isProcessingSubCalendar:function(){return false},setProcessingSubCalendar:function(e){},setSubCalendarSpinnerIconVisible:function(e){},getIncludedCalendars:function(){return b?b.split(","):[]},showAjaxUpdateError:function(e,g,f){Confluence.TeamCalendars.showAjaxError(a("#editor-messages"),e,g,f,"error-subcalendar-update")},showAjaxError:function(f,h,g,e){Confluence.TeamCalendars.showAjaxError(a("#editor-messages"),f,h,g,e)},setGenericErrors:function(f,e){Confluence.TeamCalendars.setGenericErrors(a("#editor-messages"),null,e)},setGenericUpdateError:function(){Confluence.TeamCalendars.setGenericErrors(a("#editor-messages"),null,"error-subcalendar-update")},setSubCalendars:function(e){if(!b){Confluence.TeamCalendars.fireEventForAnalytics("subcalendar.parent.embedded")}var f=e+(b?","+b:"");d.params=a.extend(d.params,{id:f});d.body="";AJS.Rte.BookmarkManager.restoreBookmark();var g=tinymce.confluence.MacroUtils.insertMacro({macro:d,contentId:Confluence.Editor.getContentId()});a.when(g).done(function(h){if(h){var i=new Confluence.TeamCalendars.HelpTip({body:"\u003ch3\u003eCalendar added, what next?\u003c/h3\u003e \u003cp\u003eEmbed additional calendars, or modify the look of them, by pressing \u003cstrong\u003e\'Edit\'\u003c/strong\u003e when selecting this.\u003c/p\u003e\u003cp\u003eWhen you are ready, save your page to start adding events!\u003c/p\u003e",anchor:a(h),id:"first-calendar-help-tip"});i.show()}})},setParameter:function(e,f){},getParameter:function(e){},reloadSubCalendar:function(e){},getSubCalendars:function(){return d.params},updateAvailableSubCalendarsInSubCalendarPanel:function(){},getNextCalendarColor:function(){return""},isAutoWatchSet:function(){return false},refreshCachedSubCalendars:function(f,e){},handleImport:function(e){this.setSubCalendars(e)},isCalendarInEditMode:function(){return true},suppressMessage:function(f,e){Confluence.TeamCalendars.suppressMessage(a("#editor-messages"),f,e)},showCalendarWizard:function(){Confluence.TeamCalendars.Dialogs.getAddDialog(c)},getSubCalendarsWhichCanAddEvents:function(){return[]}};if(Confluence.TeamCalendars.shouldShowTimezoneSetup()){Confluence.TeamCalendars.Dialogs.getTimeZoneSetupDialog(c).show()}else{AJS.Rte.BookmarkManager.storeBookmark();Confluence.TeamCalendars.Dialogs.getAddDialog(c,{title:"Insert Calendar"})}}}(AJS.$));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/js/calendar-edit-dialog.js' */
(function(a){Confluence.TeamCalendars.getEditCalendarDialogHelper=function(d,c,b){var h,g=a(".form-mode",d),f=a("input[name='spaceKey']",d),e=a("input[name='spaceKeyAutocomplete']",d);return{initSpaceDropDown:function(){e.keypress(function(i){if(i.which!==13){f.val(i.which)}});e.bind("selected.autocomplete-content",function(j,i){f.val(i.content.key);a(this).val(i.content.name);a(".spaceKeyAutocomplete-error",d).empty()})},initTimeZoneSelect:function(){a("select[name='timeZoneIdSelect']",d).change(function(){a("input[name='timeZoneId']",d).val(a("option:selected",this).val())})},initCloseButton:function(i,j){i.addLink("Cancel",function(){if(typeof j==="function"){j()}i.remove();return false})},initOkButton:function(i,j){j.addButton(i,function(){d.submit();return false},"submit");h=j.popup.element.find(".submit")},populateTimeZoneDropDown:function(j){var k=c?c.timeZoneId:Confluence.TeamCalendars.getUserTimeZone();var i=a("#timeZoneIdSelect",j.body);h.disable();Confluence.TeamCalendars.populateTimeZoneDropDown(i,k,function(){h.enable();i.addClass("ready")},function(l,n,m){b.showAjaxError(l,n,m)})},disableOkButton:function(i){h.text(i).attr("disabled","disabled").addClass("ui-state-disabled")},enableOkButton:function(i){h.text(i).removeAttr("disabled").removeClass("ui-state-disabled")},isNewCalendar:function(){return c?false:true},resetFieldErrors:function(){Confluence.TeamCalendars.setFieldErrors(d,null)},setFormModeEdit:function(){g.removeClass().addClass("form-mode edit")},setFormModeCreate:function(){g.removeClass().addClass("form-mode create")},setFormModeReadOnly:function(){g.removeClass().addClass("form-mode read-only")},setHeading:function(j,i){return i.getCurrentPanel().page.header.empty().text(j).addClass("calendar-heading")},setSubCalendarIdField:function(i){a("input[name='subCalendarId']",d).val(i)},setNameField:function(i){a("input[name='name']",d).val(i)},setDescriptionField:function(i){a("textarea[name='description']",d).val(i)},setColorField:function(i){a("input[name='color']",d).val(i)},setSpaceKeyField:function(i){f.val(i)},setSpaceKeyAutocompleteField:function(i){e.val(i)},setTimeZoneIdField:function(i){a("input[name='timeZoneId']",d).val(i)},setTimeZoneIdDisplayField:function(i){a(".timeZoneIdDisplay",d).text(i)},setSubscriptionIdField:function(i){a("input[name='subscriptionId']",d).val(i)},setLocationField:function(i){a("input[name='location']",d).val(i)},setUserNameField:function(i){a("input[name='username']",d).val(i)},setSpaceToDefault:function(){f.val(AJS.Meta.get("space-key")||"");e.val(AJS.Meta.get("space-name")||"")}}};Confluence.TeamCalendars.Dialogs.getSubCalendarCreateDialog=function(e,d){var i=require("tc/util"),c=(typeof e==="string")?e:e.type,f,h=Confluence.TeamCalendars.subcalendar[c],g=new AJS.ConfluenceDialog({width:h.dialogWidth||521,height:"auto",onSubmit:function(){f.submit();return false},id:"create-calendar-dialog"}),b=h.getDialog(g,a.isPlainObject(e)?e:null,d);g.popup.element.css("overflow","visible");f=b.initializeForm();f.submit(function(){if(d.isProcessingSubCalendar()){return false}d.setProcessingSubCalendar(true);d.setSubCalendarSpinnerIconVisible(true);b.onSubmitStart();var j=b.getFormDataAsAjaxData();if(d.getIncludedCalendars()){j.include=d.getIncludedCalendars()}var k=j.subCalendarId;a.ajax({cache:false,converters:{"text json":function(l){return l}},data:j,dataFilter:function(l){var m=a.parseJSON(l);if(m.success){Confluence.TeamCalendars.mergeSubCalendarObjectsToArray(m.payload)}return m},dataType:"json",error:function(l,n,m){d.showAjaxUpdateError(l,n,m);b.onSubmitEnd();d.setSubCalendarSpinnerIconVisible(false);d.setProcessingSubCalendar(false)},success:function(m){d.setGenericUpdateError();if(m.success){Confluence.TeamCalendars.setFieldErrors(f,null);var l=k;if(l){d.setSubCalendars(k,m.payload);d.reloadSubCalendar(k)}else{k=m.modifiedSubCalendarId;a("input[name='subCalendarId']",f).val(k);d.setSubCalendars(k,m.payload)}d.updateAvailableSubCalendarsInSubCalendarPanel();b.onSubmitEnd();g.remove();d.setSubCalendarSpinnerIconVisible(false);if(!l){Confluence.TeamCalendars.CalendarTour().start(k)}}else{Confluence.TeamCalendars.setFieldErrors(f,m.fieldErrors);b.onSubmitEnd();d.setSubCalendarSpinnerIconVisible(false);if(!h.dynamicDialogHeight){i.showDialogInUpdatedHeight(g)}}d.setProcessingSubCalendar(false)},type:"PUT",timeout:Confluence.TeamCalendars.ajaxTimeout,url:Confluence.TeamCalendars.getCalendarServiceBaseUrl("/subcalendars.json")});return false});return g}}(AJS.$));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/js/calendar-plugin.js' */
require(["jquery","underscore","ajs","tc/calendar-cache","tc/util","tc/calendar-util","tc/manage-event","tc/manage-i18n-text","tc/full-calendar-option","tc/subcalendar-panel","tc/auto-complete-search-helper","tc/calendar-remove-dialog","tc/calendar-feature-discovery-dialog","tc/calendar-share-dialog","tc/calendar-restriction-dialog","tc/myCalendarTour","tc/subcalendar-navigation-buttons-view","tc/subcalendar-restriction-button-view"],function(f,s,k,m,h,l,i,r,o,g,q,j,e,d,a,p,c,b){var n=new m();f(function(){var v={ajaxTimeout:Confluence.TeamCalendars.ajaxTimeout,i18nMessages:null,dialogSequence:0,ERROR_CLASS_EVENT_UPDATE:"error-event-update",ERROR_CLASS_EVENT_DELETE:"error-event-delete",ERROR_CLASS_SUB_CALENDAR_LIST:"error-subcalendar-refresh",ERROR_CLASS_SUB_CALENDAR_DELETE:"error-subcalendar-delete",ERROR_CLASS_SUB_CALENDAR_UPDATE:"error-subcalendar-update",ERROR_CLASS_SUB_CALENDAR_WATCH:"error-subcalendar-watch",ERROR_CLASS_SUB_CALENDAR_LIST_EVENTS:"error-subcalendar-list-events-",ERROR_CLASS_SUB_CALENDAR_TOGGLE_EVENTS:"error-subcalendar-toggle-events-",ERROR_CLASS_CONFIG_UPDATE:"error-config-update",ERROR_CLASS_PRIVATE_URL:"error-private-url",ERROR_CLASS_RESET_PRIVATE_URLS:"error-reset-private-urls",PREF_LAST_ALL_DAY_USED:"pref-all-day-event-default",init:function(x){var w=new o(v,x,n);if(v.getParameter(x,"width")){x.parent().css("width",v.getParameter(x,"width")+"px")}if(v.getParameter(x,"height")){w.height=parseInt(v.getParameter(x,"height"))}else{w.aspectRatio=1.9}this.getCalendarPanel(x).fullCalendar(w);this.initCalendarDiv(x)},getEventTypeNames:function(w){return r(this.i18nMessages).getEventTypeNames(w)},getMonthNames:function(){return r(this.i18nMessages).getMonthNames()},getMonthNamesShort:function(){return r(this.i18nMessages).getMonthNamesShort()},getDayNames:function(){return r(this.i18nMessages).getDayNames()},getDayNamesShort:function(){return r(this.i18nMessages).getDayNamesShort()},hideInlineAuiDialogs:function(){f("body").trigger("click")},isEventToolTipSuppressed:function(w){return w.data("shouldSuppressEventToolTip")},setSuppressEventToolTip:function(x,w){x.data("shouldSuppressEventToolTip",w)},setEventTooltipVisible:function(z,y,w,A){if(A&&(this.isEventEditable(z,y)||y.workingUrl)){var x=f("body > .event-tooltip").length?f("body > .event-tooltip"):f("<div/>",{"class":"event-tooltip"}).appendTo(f("body"));f("p",x).remove();if(this.isEventEditable(z,y)){x.append(f("<p/>",{text:"Hold shift then click to bring up the edit dialog"}))}if(y.workingUrl){x.append(f("<p/>",{"class":"follow-hint",text:k.format("Control/Command + click to go to {0}",y.workingUrl)}))}x.css({left:w.pageX+"px",top:(w.pageY+5)+"px"}).show()}else{f("body > .event-tooltip").hide()}},getParameter:function(x,w){return l.getParameter(x,w)},getParameters:function(w){return l.getParameters(w)},setParameter:function(y,w,x){l.setParameter(y,w,x)},getCalendarPanel:function(w){return f(".calendar-panel .calendar",w)},getTimelineHeight:function(w){return v.getParameter(w,"timelineHeight")},getMaxMonthToDisplayTimelineCalendar:function(w){return v.getParameter(w,"maxMonthToDisplayTimelineCalendar")},getDefaultStartTime:function(w){return this.getParameter(w,"timeSuggestion")[16]},getDefaultEndTime:function(w){return this.getParameter(w,"timeSuggestion")[18]},reloadSubCalendar:function(w,x){if(!x){return}x=f.isArray(x)?x:[x];f(".sub-calendar-panel .subcalendar-item",w).each(function(){var F=f(this),B=F.data("subCalendarId"),A=f(".child-subcalendar",F),G=v.getSubCalendar(w,B),z=f.map(A,function(I){return f(I).data("subCalendarId")});if(f.inArray(B,x)!==-1){var E=function(J){for(var I=0;I<A.length;I++){if(f(A[I]).data("sub-calendar-id")===J){return !f(A[I]).hasClass("subcalendar-disabled")}}return false};if(Confluence.TeamCalendars.isSubscriptionSubCalendar(G)){n.removeCalendar(B);v.removeSubCalendarEventSource(w,B);v.addSubCalendarEventSource(w,B)}v.removeSubCalendarEventSource(w,f.map(z,function(I){n.removeCalendar(I);return I}));if(G.childSubCalendars!==undefined){var y=f.map(G.childSubCalendars,function(I){if(E(I.id)||!I.eventsHidden){return I.id}});v.addSubCalendarEventSource(w,y)}}else{var D=[];A.filter(function(){return f.inArray(f(this).data("subCalendarId"),x)!==-1}).each(function(){var I=f(this),J=I.data("subCalendarId");n.removeCalendar(J);if(I.hasClass("subcalendar-disabled")){I.removeClass("subcalendar-disabled")}else{v.removeSubCalendarEventSource(w,J)}v.addSubCalendarEventSource(w,J);D.push(J)});if(D.length){var H=D;var C=v.getSubCalendar(w,B);if(!l.isDummySubscriptionParentSubCalendar(C)){H.push(C.id)}v.setSubCalendarEventsHidden(w,H,false,F)}}})},makeAutoCompleteSearch:function(z,y,x,B,w,A){q.makeAutoCompleteSearch(z,y,x,B,w,A)},isProcessingEvent:function(w){return w.data("processingEvent")},setProcessingEvent:function(y,x,w){if(w){if(x){if(w.disableOkButton){w.disableOkButton()}}else{if(w.enableOkButton){w.enableOkButton()}}}y.data("processingEvent",x)},showAjaxError:function(x,z,B,A,w,y){if(!t){Confluence.TeamCalendars.showAjaxError(x,z,B,A,w,y)}},showHTMLGenericError:function(x,y,w){if(!t){Confluence.TeamCalendars.showHTMLGenericError(x,y,w)}},showRestrictedCalendarsWarning:function(w){f(".restricted-calendars-warning",w).removeClass("hidden")},deleteEvent:function(y,z,x,w){i(v,n).deleteEvent(y,z,x,w)},getCalendarServiceBaseUrl:function(x,w){return Confluence.TeamCalendars.getCalendarServiceBaseUrl(w)},getSubCalendars:function(y,z){var x=y.data("subCalendars")||[];if(z){var w=[];f.each(x,function(B,A){if(z(A)){w.push(A)}});return w}return x},isSubCalendarDeletable:function(x,w){return this.isCalendarInEditMode(x)&&w.deletable},isSubCalendarAdministratable:function(x,w){return this.isCalendarInEditMode(x)&&w.administrable},isSubCalendarEventsUpdatable:function(x,w){return this.isCalendarInEditMode(x)&&w.eventsEditable},canAddEventsToSubcalendar:function(x,w){return this.isSubCalendarEventsUpdatable(x,w)&&!Confluence.TeamCalendars.isJiraSubCalendar(w)},doesSubCalendarHaveRestrictions:function(w){return w.usersPermittedToView.length||w.groupsPermittedToView.length||w.usersPermittedToEdit.length||w.groupsPermittedToEdit.length},getSubCalendarsWhichCanAddEvents:function(w){return this.getSubCalendars(w,function(x){return v.canAddEventsToSubcalendar(w,x)})},getSubCalendar:function(x,y){var w=null;f.each(this.getSubCalendars(x),function(A,z){if(z.id===y){w=z;return false}else{w=f.grep(z.childSubCalendars||[],function(B){return B.id==y});if((w=w&&w.length?w[0]:null)){return false}}});return w},getSanboxEventTypeRemindersFromSubCalendar:function(x,y){var w=this.getSubCalendar(x,y);if(w){return w.sanboxEventTypeReminders}},getCurrentReminderForEventType:function(B,A){var C=null;var z=A.getSelectedSubCalendarId();var x=A.getSelectedEventType();if(l.isCustomEventType(x)){var y=this.getCustomEventTypeFromSubCalendar(B,z);if(y){f.each(y,function(D,E){if(E.customEventTypeId===x&&E.periodInMins>0){C=E;return false}})}}else{var w=this.getSanboxEventTypeRemindersFromSubCalendar(B,z);if(w){f.each(w,function(D,E){if(E.eventTypeId===x||E.eventTypeId===x+"-calendar"){C=E;return false}})}}return C},getCustomEventTypeFromSubCalendar:function(x,y){var w=this.getSubCalendar(x,y);if(w){return w.customEventTypes}},setSubCalendar:function(A,z,y){var x=z.data("subCalendars");for(var w=0;w<x.length;w++){if(x[w].id===A){x[w]=f.isArray(y)?y[0]:y}}z.data("subCalendars",x)},setSubCalendars:function(x,w){if(l.isSpaceCalendarView(x)){w=s.filter(w,function(y){return y.eventsViewable||l.isDummySubscriptionParentSubCalendar(y)})}x.data("subCalendars",f.isArray(w)?w:(w?[w]:null))},showSubCalendarEdit:function(z,w){var A;if(Confluence.TeamCalendars.isJiraSubCalendar(w)){var B=Confluence.TeamCalendars.isInternalSubscriptionSubCalendar(w);A=Confluence.TeamCalendars.Dialogs.getEditEventDialog({title:B?w.sourceSubCalendar.name:w.name,eventType:(B?w.sourceSubCalendar.type:w.type)+"-calendar",subCalendarId:w.id},w,v,z).show()}else{var x=Confluence.TeamCalendars.Dialogs.getSubCalendarEditDialog(w,v.getRenderedMacroCallbackHandler(z),z,v,n);A=x.render();var y=A.getCurrentPanel().body;Confluence.TeamCalendars.setFieldErrors(y,null);A.show();A.gotoPanel(l.panelEditCalendar.GENERAL_PANEL);f("input[name='name']",y).focus();A.belongedView=x;if(p.isShowCustomEventTypeFrom(w.id)){x.showAddEventTypeForm()}if(!this.isSubCalendarAdministratable(z,w)){f(A.getPanel(l.panelEditCalendar.GENERAL_PANEL).button).addClass("hidden");f(A.getPanel(l.panelEditCalendar.EVENT_TYPE_PANEL).button).addClass("hidden");f(A.getPanel(l.panelEditCalendar.RESTRICTION_PANEL).button).addClass("hidden")}A.getCurrentPanel().onselect=function(){f("#edit-calendar-dialog").find(".button-panel-button.submit").removeClass("hidden")}}return A},showCustomEventEditForm:function(z,w,y,B){var A=this.showSubCalendarEdit(z,w);if(!(!Confluence.TeamCalendars.isInternalSubscriptionSubCalendar(w)&&Confluence.TeamCalendars.isJiraSubCalendar(w))){var x=A.belongedView;if(y){y=Confluence.TeamCalendars.isJiraType(y)?y+"-calendar":y;x.selectCustomEvent(y)}else{x.showAddEventTypeForm()}}A.gotoPanel(l.panelEditCalendar.EVENT_TYPE_PANEL);return A},updateCustomEventType:function(A,C,x){var B=this.getSubCalendars(A);for(var z=0;z<B.length;z++){if(B[z].id===C){var y=false;for(var w=0;w<B[z].customEventTypes.length;w++){if(B[z].customEventTypes[w].customEventTypeId===x.customEventTypeData){B[z].customEventTypes[w]=x;y=true;break}}if(!y){B[z].customEventTypes.push(x)}break}}A.data("subCalendars",B)},refreshCachedSubCalendars:function(z,w,x){var y={};if(v.getParameter(z,"include")){y.include=v.getParameter(z,"include")}l.putCalendarContextParams(y);f.ajax({cache:false,converters:{"text json":function(A){return A}},data:y,dataFilter:function(A){var B=f.parseJSON(A);if(B.success){v.mergeSubCalendarObjectsToArray(B.payload)}return B},dataType:"json",error:function(A,C,B){v.showAjaxError(z,A,C,B,v.ERROR_CLASS_SUB_CALENDAR_LIST);if(x){x(A,C,B)}},success:function(A){if(A.success){v.setSubCalendars(z,A.payload);if(w){w(A.payload)}v.setGenericErrors(z,null,v.ERROR_CLASS_SUB_CALENDAR_LIST)}else{v.setGenericErrors(z,"Uh oh. Looks like something unexpectedly went wrong. Please check the Confluence log file.",v.ERROR_CLASS_SUB_CALENDAR_LIST)}},type:"GET",timeout:v.ajaxTimeout,url:Confluence.TeamCalendars.getCalendarServiceBaseUrl("/subcalendars.json")})},mergeSubCalendarObjectsToArray:function(w){return Confluence.TeamCalendars.mergeSubCalendarObjectsToArray(w)},setGenericErrors:function(x,y,w){Confluence.TeamCalendars.setGenericErrors(x,y,w)},shouldShowFeatureDiscoveryDialog:function(w,x){return v.getParameter(w,"showCalendarDiscoveryDialog")==="true"},setSubCalendarEventsHidden:function(x,z,w,y){z=f.isArray(z)?z:z;return f.ajax({cache:false,data:{subCalendarId:z},dataType:"json",type:w?"PUT":"DELETE",error:function(A,C,B){f.each(z,function(D,E){v.showAjaxError(x,A,C,B,v.ERROR_CLASS_SUB_CALENDAR_TOGGLE_EVENTS+v.getStringAsHex(E))})},success:function(){f.each(z,function(A,B){v.getSubCalendar(x,B).eventsHidden=w;v.checkCalendarHasAllChildDisable(y);v.setGenericErrors(x,null,v.ERROR_CLASS_SUB_CALENDAR_TOGGLE_EVENTS+v.getStringAsHex(B))})},timeout:v.ajaxTimeout,url:v.getCalendarServiceBaseUrl(x,"/preferences/events/hidden.json")})},checkCalendarHasAllChildDisable:function(w){f(w).filter(function(){var x=f("li.child-subcalendar",w);var y=f("li.child-subcalendar:not(.subcalendar-disabled)",w);if(x.length!==0&&y.length===0){w.addClass("allchildsubcalendar-disabled").addClass("subcalendar-disabled")}else{w.removeClass("allchildsubcalendar-disabled").removeClass("subcalendar-disabled")}})},updateAvailableSubCalendarsInSubCalendarPanel:function(w){g(v,w,n).updateAvailableSubCalendarsInSubCalendarPanel()},unsubscribeFromSubcalendar:function(x,w){if(!v.isProcessingSubCalendar(x)){v.setProcessingSubCalendar(x,true);v.setSubCalendarSpinnerIconVisible(x,true);if(w.subscriptionId){v._deleteSubCalendarInternal(x,w.id,function(y,A,z){v.showAjaxError(x,y,A,z,v.ERROR_CLASS_SUB_CALENDAR_DELETE);v.setSubCalendarSpinnerIconVisible(x,false);v.setProcessingSubCalendar(x,false)},function(y){if(y.success){v.setGenericErrors(x,null,v.ERROR_CLASS_SUB_CALENDAR_UPDATE);f.each(f.merge([w],w.childSubCalendars||[]),function(A,z){v.setGenericErrors(x,null,v.ERROR_CLASS_SUB_CALENDAR_LIST_EVENTS+v.getStringAsHex(z.id))});v.setGenericErrors(x,null,v.ERROR_CLASS_SUB_CALENDAR_DELETE);v.removeSubCalendarEventSource(x,w.id);v.removeSubCalendarEventSource(x,w.childSubCalendars);v.setSubCalendars(x,y.payload);v.updateAvailableSubCalendarsInSubCalendarPanel(x)}else{v.setGenericErrors(x,"Uh oh. Looks like something unexpectedly went wrong. Please check the Confluence log file.",v.ERROR_CLASS_SUB_CALENDAR_DELETE)}v.setSubCalendarSpinnerIconVisible(x,false);v.setProcessingSubCalendar(x,false)})}else{f.ajax({cache:false,converters:{"text json":function(y){return y}},data:(function(){var y={subCalendarId:w.id};if(v.getParameter(x,"include")){y.include=v.getParameter(x,"include")}l.putCalendarContextParams(y);return y})(),dataType:"json",dataFilter:function(y){var z=f.parseJSON(y);if(z.success){v.mergeSubCalendarObjectsToArray(z.payload)}return z},error:function(y,A,z){v.showAjaxError(x,y,A,z);v.setSubCalendarSpinnerIconVisible(x,false);v.setProcessingSubCalendar(x,false)},success:function(y){if(l.isSingleCalendarView(x)){window.location.href=k.contextPath()+"/display/"+encodeURIComponent(k.Meta.get("space-key"))+"/calendars"}else{v.setGenericErrors(x,null,v.ERROR_CLASS_SUB_CALENDAR_UPDATE);v.removeSubCalendarEventSource(x,w.id);v.removeSubCalendarEventSource(x,w.childSubCalendars);v.setSubCalendars(x,y.payload);v.updateAvailableSubCalendarsInSubCalendarPanel(x);v.setSubCalendarSpinnerIconVisible(x,false);v.setProcessingSubCalendar(x,false)}k.trigger("calendar.removed")},type:"DELETE",timeout:v.ajaxTimeout,url:v.getCalendarServiceBaseUrl(x,"/preferences/subcalendars.json")})}}},getNextUnusedSubCalendarColor:function(B){var A=v.getSubCalendars(B);var z=v.getParameter(B,"subCalendarColorClass");for(var x=0;x<z.length;++x){var y=z[x];var C=false;for(var w=0;w<A.length;++w){if(y===A[w].color){C=true;break}}if(!C){return y}}return A.length?z[A.length%z.length]:"subcalendar-blue"},setProcessingSubCalendar:function(x,w){x.data("processingSubCalendar",w)},isProcessingSubCalendar:function(w){return w.data("processingSubCalendar")},getDeleteSubCalendarConfirmationDialog:function(y,w,x){var z=this.createDeleteSubCalendarConfirmationDialog(y,w,x);f("input[name='subCalendarId']",z.getCurrentPanel().body).val(w.id);return z},createDeleteSubCalendarConfirmationDialog:function(A,w,z){var x=new k.Dialog({height:290,width:550,id:"delete-calendar-dialog"});x.addHeader(Confluence.TeamCalendars.isJiraSubCalendar(w)?"Delete Event":"Delete Calendar");x.addPanel("Delete Calendar",Confluence.TeamCalendars.Templates.confirmRemoveSubCalendar({subCalendar:w,subscriberCount:z}),"delete-subcalendar-confirmation-panel");var y=x.getCurrentPanel().body;f("form.sub-calendar-delete-confirm",y).submit(function(){return false});x.addButton(Confluence.TeamCalendars.isJiraSubCalendar(w)?"Delete Event":"Delete Calendar",function(){if(!v.isProcessingSubCalendar(A)){v.setProcessingSubCalendar(A,true);var B=v.getSubCalendar(A,f("input[name='subCalendarId']",y).val());v._deleteSubCalendarInternal(A,B.subscriptionId||B.id,function(C,E,D){v.showAjaxError(A,C,E,D,v.ERROR_CLASS_SUB_CALENDAR_DELETE);x.remove();v.setSubCalendarSpinnerIconVisible(A,false);v.setProcessingSubCalendar(A,false)},function(C){if(C.success){v.setGenericErrors(A,null,v.ERROR_CLASS_SUB_CALENDAR_UPDATE);f.each(f.merge([B],B.childSubCalendars||[]),function(E,D){v.setGenericErrors(A,null,v.ERROR_CLASS_SUB_CALENDAR_LIST_EVENTS+v.getStringAsHex(D.id))});v.setGenericErrors(A,null,v.ERROR_CLASS_SUB_CALENDAR_DELETE);v.removeSubCalendarEventSource(A,B.id);v.removeSubCalendarEventSource(A,B.childSubCalendars);v.setSubCalendars(A,C.payload);v.updateAvailableSubCalendarsInSubCalendarPanel(A)}else{v.setGenericErrors(A,"Uh oh. Looks like something unexpectedly went wrong. Please check the Confluence log file.",v.ERROR_CLASS_SUB_CALENDAR_DELETE)}x.remove();v.setSubCalendarSpinnerIconVisible(A,false);v.setProcessingSubCalendar(A,false)})}return false});x.addLink("Cancel",function(){x.remove();v.setSubCalendarSpinnerIconVisible(A,false);return false});return x},deleteSubCalendar:function(y,w){if(!v.isProcessingSubCalendar(y)){v.setProcessingSubCalendar(y,true);v.setSubCalendarSpinnerIconVisible(y,true);var x={subCalendarId:w.subscriptionId||w.id};l.putCalendarContextParams(x);f.ajax({cache:false,data:x,dataType:"json",error:function(z,B,A){v.showAjaxError(y,z,B,A,v.ERROR_CLASS_SUB_CALENDAR_DELETE);v.setProcessingSubCalendar(y,false);v.setSubCalendarSpinnerIconVisible(y,false)},success:function(A){var D=y.data("subCalendarEditFormDialog");if(D){D.hide()}var E=v.getDeleteSubCalendarConfirmationDialog(y,w,A.subscriptionCount),B=E.getCurrentPanel().body,z=f(".calendar-to-delete",B);z.removeAttr("ThreeDots").empty().append(f(document.createElement("span")).addClass("ellipsis_text").text(w.name));v.setProcessingSubCalendar(y,false);var C=function(F){if(27===F.keyCode){v.setProcessingSubCalendar(y,false);v.setSubCalendarSpinnerIconVisible(y,false);f(document).unbind("keypress",C)}};f(document).keypress(C);E.show();z.ThreeDots()},type:"GET",timeout:v.ajaxTimeout,url:v.getCalendarServiceBaseUrl(y,"/subcalendars/links.json")})}},_deleteSubCalendarInternal:function(z,A,x,w){var y={subCalendarId:A};if(v.getParameter(z,"include")){y.include=v.getParameter(z,"include")}l.putCalendarContextParams(y);f.ajax({cache:false,converters:{"text json":function(B){return B}},data:y,dataFilter:function(B){var C=f.parseJSON(B);if(C.success){v.mergeSubCalendarObjectsToArray(C.payload)}return C},dataType:"json",error:function(B,D,C){if(x){x(B,D,C)}},success:function(B){if(l.isSingleCalendarView(z)){window.location.href=k.contextPath()+"/display/"+encodeURIComponent(k.Meta.get("space-key"))+"/calendars"}else{if(w){w(B)}}k.trigger("calendar.removed")},type:"DELETE",timeout:v.ajaxTimeout,url:v.getCalendarServiceBaseUrl(z,"/subcalendars.json")})},addSubCalendarEventSource:function(x,z){if(!z){return}var y=Confluence.TeamCalendars.getAsArray(z),w=x.data("visibleEventSources")||{};f.each(y,function(B,A){if(!w[A]){w[A]=v.getSubCalendarEventSource(x,A);v.getCalendarPanel(x).fullCalendar("addEventSource",w[A])}});x.data("visibleEventSources",w)},removeSubCalendarEventSource:function(x,z){if(!z){return}var y=Confluence.TeamCalendars.getAsArray(z),w=x.data("visibleEventSources")||{};f.each(y,function(B,A){if(w[A]){v.getCalendarPanel(x).fullCalendar("removeEventSource",w[A]);w[A]=null}});x.data("visibleEventSources",w)},isHttpsServer:function(w){return v.getParameter(w,"baseUrl").substring(5,0).toLowerCase()!="https"},getSubCalendarEventSource:function(z,A){var x=z.data("eventSources")||{},w=function(B,D){var C=B.data("retrieveEventsQueue")||{};if(!C[D]){C[D]=[]}B.data("retrieveEventsQueue",C);return C[D]},y=x[A]||function(C,H,E){if(!(isNaN(C.getTime())||isNaN(H.getTime()))){if(n.hasCalendar(A)&&n.getCalendarStart(A).getTime()<C.getTime()&&n.getCalendarEnd(A).getTime()>H.getTime()){E(n.getCalendarData(A));return}var K=w(z,A);for(var G=0;G<K.length;++G){var J=K.shift();if(!J.aborted&&J.xhr.readyState!==4){try{J.xhr.abort()}catch(F){}J.xhr.aborted=true}}var I=new Date(C.getTime()-(1000*60*60*24*30)),L=new Date(H.getTime()+(1000*60*60*24*30)),B={subCalendarId:A,userTimeZoneId:Confluence.TeamCalendars.getUserTimeZone(),start:f.fullCalendar.formatDate(I,"u"),end:f.fullCalendar.formatDate(L,"u")},D=v.getSubCalendars(z,function(O){if(!O.childSubCalendar){return false}var N=false;f.each(O.childSubCalendar,function(P,Q){if(Q.id===A){N=true;return false}});return N});if(D.length){B.parentSubCalendarId=D[0].id}var M=f.ajax({cache:false,data:B,dataType:"json",error:function(T,P,R){if(Confluence.TeamCalendars.isRequireOauth(T)){var O=f.parseJSON(T.responseText),U=f(".jira-calendars-oauth-warnings",z),N=O.oAuthUrl,V=f("div",U).filter(function(){return N===f(this).data("oAuthUrl")}),Q=function(){U.append(Confluence.TeamCalendars.Templates.requireOauthMessage({oAuthUrl:N,subCalendarIdsArrayJson:JSON.stringify([A]),subCalendarNamesArrayJson:JSON.stringify([O.subCalendarName]),subCalendarName:f("<div/>",{text:O.subCalendarName}).html()})).find(".approve-dance").click(function(){AppLinks.authenticateRemoteCredentials(O.oAuthUrl,function(){var X=f("div",U).filter(function(){return N===f(this).data("oAuthUrl")});v.reloadSubCalendar(z,X.data("subCalendarIds"));X.remove()},function(){alert("Approval unsuccessful. Could you please try again?")});return false})},W=function(){var Y=V.data("subCalendarIds");if(f.inArray(A,Y)===-1){Y.push(A)}var X=V.data("subCalendarNames");if(f.inArray(O.subCalendarName,X)===-1){X.push(O.subCalendarName)}f("span.subcalendar-names",V.data("subCalendarIds",Y).data("subCalendarNames",X)).text(X.join(", "))};if(!V.length){Q()}else{W()}}else{if(T.status==403){if(v.getParameter(z,"showHiddenSubCalendars")==="true"){v.showRestrictedCalendarsWarning(z)}else{if(!l.isSpaceCalendarView(z)){v.showAjaxError(z,T,P,R,v.ERROR_CLASS_SUB_CALENDAR_LIST_EVENTS+v.getStringAsHex(A))}}}else{if(P!=="abort"){var S=v.getSubCalendar(z,A);v.showAjaxError(z,T,P,R,v.ERROR_CLASS_SUB_CALENDAR_LIST_EVENTS+v.getStringAsHex(A),S);f(z).find("#calendar-change-jql").click(function(){var Y=this;var Z=f(Y).parent().data("jiraCalendarId");if(Z){var X=v.getSubCalendar(z,Z);if(X&&X.eventsEditable){v.showSubCalendarEdit(z,X);f("#edit-calendar-dialog").find(".button-panel-button.submit").removeClass("hidden")}}})}}}E([])},success:function(P,O){var T=P.events;var S=[];v.setGenericErrors(z,null,v.ERROR_CLASS_SUB_CALENDAR_LIST_EVENTS+v.getStringAsHex(A));T=f.map(T||[],function(V){if(V.className==="greenhopper-sprint"&&!V.allDay){V.allDay=!V.allDay;V.allDayFlipped=true}return V});if(O==="success"&&T){S=v.getEventsTruncated(z,T)}E(S);n.addDataToCalendar(A,S,I,L);var R=v.getSubCalendar(z,A);if(R.warnings&&R.warnings.length){v.setGenericErrors(z,R.warnings,v.ERROR_CLASS_SUB_CALENDAR_LIST_EVENTS+v.getStringAsHex(A))}var U=v.getParameter(z,"editSubCalendarId"),N=v.getParameter(z,"editEventUid");if(U&&N){var Q=v.getCalendarPanel(z).fullCalendar("clientEvents",function(V){return V.subCalendarId===U&&V.id===N});if(Q.length){v.setParameter(z,"editSubCalendarId","");v.setParameter(z,"editEventUid","");f("#calendar-dialog-panel").remove();Confluence.TeamCalendars.Dialogs.getEditEventDialog(Q[0],R,v,z).show()}}},type:"GET",timeout:v.ajaxTimeout,url:v.getCalendarServiceBaseUrl(z,"/events.json")});K.push({xhr:M})}};x[A]=y;z.data("eventSources",x);return y},getEventsTruncated:function(J,K,D){var E=this.getCalendarPanel(J).fullCalendar("getView");var G=parseInt(this.getParameter(J,"maxEventsToDisplayPerCalendar"));var y={};f.each(K,function(M,L){if(!y[L.subCalendarId]){y[L.subCalendarId]=[]}y[L.subCalendarId].push(L)});var I=function(L){L.sort(function(N,P){var M=N._start||f.fullCalendar.parseISO8601(N.start,true);var O=P._start||f.fullCalendar.parseISO8601(P.start,true);return M.getTime()-O.getTime()})};var B=[];var H={};f.each(y,function(P,N){I(N);var M=E.visStart;var L;if(N.length>G){var O=-1;f.each(N,function(S,R){var Q=R._start||f.fullCalendar.parseISO8601(R.start,true);if(Q>=M){O=S;return false}});if(-1===O){L=N.slice(-G)}else{L=N.slice(O,Math.min(O+G,N.length))}B.push(v.getSubCalendar(J,N[0].subCalendarId).name)}else{L=N}H[P]=L});if(B.length){var A=f(".events-truncated-message-container",J);var C=function(L){L.sort(function(N,M){return N>M?1:(M>N?-1:0)})};var F=function(M){var L=f(document.createElement("ul"));f.each(M,function(N,O){L.append(f(document.createElement("li")).text(O))});return L};var z;if(D){C(B);z=F(B)}else{var w=f.map(f("ul li",A),function(L){return f(L).text()});f.each(B,function(L,M){if(-1===f.inArray(M,w)){w.push(M)}});C(w);z=F(w)}k.messages.warning(A.empty(),{title:"Some events were not shown in the calendars below because there were too many of them",body:f(document.createElement("div")).append(z).html()});p.start();var x=[];f.each(H,function(M,L){f.merge(x,L)});return x}else{return K}},isCalendarInEditMode:function(w){return this.getParameter(w,"readOnly")!=="true"},isEventEditable:function(x,w){return this.isCalendarInEditMode(x)&&this.isSubCalendarEventsUpdatable(x,this.getSubCalendar(x,w.subCalendarId))&&w.editable},isEventDeletable:function(y,x){var w=v.getSubCalendar(y,x.subCalendarId);return v.isEventEditable(y,x)&&!Confluence.TeamCalendars.isJiraSubCalendar(w)},getEventDetailsDialog:function(z,x,y,w){return i(v,n).getEventDetailsDialog(z,x,y,w)},updateEvent:function(z,y,x,w){i(v,n).updateEvent(z,y,x,w)},setSubCalendarSpinnerIconVisible:function(x,y){var w=f(".calendar-panel .right-controls .spinner, .calendar-toolbar .spinner",x);var z=(w.data("loadingStackSize")||0)+(y?1:-1);if(z>0){w.removeClass("invisible")}else{w.addClass("invisible")}w.data("loadingStackSize",z);this._toggleEnableButton(f(".page-prev",x),!y);this._toggleEnableButton(f(".page-next",x),!y)},_toggleEnableButton:function(x,w){x.attr("aria-disabled",!w);if(w){x.removeAttr("disabled")}else{x.attr("disabled","disabled")}},reloadSubCalendarDisableEvent:function(z,y){if(y.uid&&(y.originalEventType!==y.eventType||y.originalSubCalendarId!==y.subCalendarId)){var x=v.getSubCalendar(z,y.subCalendarId).disableEventTypes;for(var w=0;w<x.length;w++){if(x[w]===y.eventType){x.splice(w,1);break}}v.getSubCalendar(z,y.subCalendarId).disableEventTypes=x}},initCalendarToolbar:function(x){var w=this;f(".feedback-form-trigger",x).click(function(){var z=new k.Dialog(700,512);z.addHeader("Team Calendars Plugin Feedback");z.addPanel("","<div class='loading-message'></div><iframe src='https://atlassian.wufoo.com/forms/team-calendars-feedback/' frameborder='0'></iframe>","calendar-feedback-dialog-panel");var y=z.getCurrentPanel().body;var A=f(".loading-message",y).text("Loading...");f("iframe",y).load(function(){A.remove()});z.addCancel("Cancel",function(){z.hide();return false});z.show();return false});f(".change-view",x).click(function(){w.hideInlineAuiDialogs();var y=f(this);v.getCalendarPanel(x).fullCalendar("changeView",y.data("viewName"));var z=l.getCalendarContext(x);Confluence.TeamCalendars.fireEventForAnalytics("view."+y.data("analyticsViewName")+".render."+z);return false});f(".today",x).click(function(){w.hideInlineAuiDialogs();n.removeAllCalendars();v.getCalendarPanel(x).fullCalendar("today");return false});f(".page-prev",x).click(function(){w.hideInlineAuiDialogs();var y=v.getCalendarPanel(x);delete y.fullCalendar("getView").daysMore;if(y.fullCalendar("getView").name==="basicDay"){y.fullCalendar("incrementDate",0,0,-parseInt(v.getParameter(x,"maxUpcomingDays")))}else{y.fullCalendar("prev")}return false});f(".page-next",x).click(function(){w.hideInlineAuiDialogs();var y=v.getCalendarPanel(x);delete y.fullCalendar("getView").daysMore;if(y.fullCalendar("getView").name==="basicDay"){y.fullCalendar("incrementDate",0,0,parseInt(v.getParameter(x,"maxUpcomingDays")))}else{y.fullCalendar("next")}return false})},getStringAsHex:function(x){var z="";if(x){var w=x.length;for(var A=0;A<w;++A){var y=x.charCodeAt(A);z+=y.length>1?y:"0"+y}}return z},formatDate:function(B,y,A,x){if(x){var w=f.isArray(y);if(w&&!y.length){x();return}var z={date:f.map(w?y:[y],function(C){return f.fullCalendar.formatDate(C,"ddMMyyyyHHmm")}),pattern:A};f.ajax({cache:false,data:z,dataType:"json",error:function(){x(k.format("Unable to format date/time {0}",z.date.join(", ")))},success:function(C){x(w?C:C[0])},timeout:v.ajaxTimeout,url:v.getCalendarServiceBaseUrl(B,"/util/format/date.json")})}},initWhatsNew:function(y){var x=f(".whatsnew");if(x.length){x.removeClass("hidden");var w=function(z){Confluence.TeamCalendars.suppressMessage(y,"MESSAGE_KEY_PREFIX_WHATSNEW_"+v.getParameter(y,"pluginVersion"),function(){if(f.isFunction(z)){z()}})};f("button",x).click(function(){window.open(f(this).data("url"),"_blank");return false});f(".aui-iconfont-close-dialog",x).click(function(){w(function(){x.addClass("hidden")})})}},initButtons:function(w){new c({el:"#navigation",calendarDiv:w,CalendarPlugin:this}).render();new b({el:"#calendar-restriction-buttons",calendarDiv:w,CalendarPlugin:this})},getSubCalendarRestrictionsDialog:function(y,w){var z=this.showSubCalendarEdit(y,w);var x=z.belongedView;x.showRestrictionOption();return z},removeSubCalendarDialog:function(y,w){var x=new j({calendarPlugin:this,calendarDiv:y,subCalendar:w});x.render()},getSubCalendarFeatureDiscoveryDialog:function(y,w){var x=new e({calendarPlugin:this,calendarDiv:y,subCalendar:w});return{show:function(){x.render()}}},isAutoConvertSupported:function(w){return this.getParameter(w,"autoConvertSupported")==="true"},getSubCalendarShareDialog:function(y,w){var z=this.showSubCalendarEdit(y,w);var x=z.belongedView;x.showShareOption();return z},getSubCalendarIcalAddressDialog:function(y,w){var z=this.showSubCalendarEdit(y,w);var x=z.belongedView;x.showSubscriptionOption();return z},initCalendarDiv:function(x){var w=v.getRenderedMacroCallbackHandler(x);this.initCalendarToolbar(x);g(v,x).initSubCalendarPanel();this.initWhatsNew(x);this.initButtons(x);f(document).keydown(function(y){if(y.keyCode===27){v.getCalendarPanel(x).fullCalendar("unselect")}});if(Confluence.TeamCalendars.shouldShowTimezoneSetup()){Confluence.TeamCalendars.Dialogs.getTimeZoneSetupDialog(w).show()}else{w.showCalendarWizard()}},getRenderedMacroCallbackHandler:function(w){return{isProcessingSubCalendar:function(){return v.isProcessingSubCalendar(w)},setProcessingSubCalendar:function(x){return v.setProcessingSubCalendar(w,x)},setSubCalendarSpinnerIconVisible:function(x){return v.setSubCalendarSpinnerIconVisible(w,x)},getIncludedCalendars:function(){return v.getParameter(w,"include")},mergeSubCalendarObjectsToArray:function(x){return v.mergeSubCalendarObjectsToArray(x)},showAjaxUpdateError:function(x,z,y){v.showAjaxError(w,x,z,y,v.ERROR_CLASS_SUB_CALENDAR_UPDATE)},showAjaxError:function(y,A,z,x){v.showAjaxError(w,y,A,z,x)},showHTMLGenericError:function(y,z,x){v.showHTMLGenericError(y,z,x)},setGenericUpdateError:function(){v.setGenericErrors(w,null,v.ERROR_CLASS_SUB_CALENDAR_UPDATE)},setGenericErrors:function(y,x){Confluence.TeamCalendars.setGenericErrors(w,null,x)},setParameter:function(x,y){v.setParameter(w,x,y)},getParameter:function(x){return v.getParameter(w,x)},setSubCalendar:function(y,x){v.setSubCalendar(y,w,x)},setSubCalendars:function(x,y){v.setSubCalendars(w,y)},reloadSubCalendar:function(x){v.reloadSubCalendar(w,x)},getSubCalendars:function(){return v.getSubCalendars(w)},updateAvailableSubCalendarsInSubCalendarPanel:function(){v.updateAvailableSubCalendarsInSubCalendarPanel(w)},refreshCalendarInfo:function(x){if(l.isSingleCalendarView(w)&&x.length){f("#title-text span").text(x[0].name);f(".calendar-description p").text(x[0].description)}},shouldShowFeatureDiscoveryDialog:function(x){return v.shouldShowFeatureDiscoveryDialog(w,x)},getSubCalendarFeatureDiscoveryDialog:function(x){v.getSubCalendarFeatureDiscoveryDialog(w,v.getSubCalendar(w,x)).show()},getNextCalendarColor:function(){return v.getNextUnusedSubCalendarColor(w)},isAutoWatchSet:function(){return v.getParameter(w,"autowatch")==="true"},refreshCachedSubCalendars:function(x,y){v.refreshCachedSubCalendars(w,x,y)},handleImport:function(x){this.refreshCachedSubCalendars(function(){v.updateAvailableSubCalendarsInSubCalendarPanel(w);if(v.shouldShowFeatureDiscoveryDialog(w)){v.getSubCalendarFeatureDiscoveryDialog(w,v.getSubCalendar(w,x)).show()}},function(y,A,z){v.showAjaxError(w,y,A,z,v.ERROR_CLASS_SUB_CALENDAR_UPDATE)});p.start(x)},isCalendarInEditMode:function(){return v.isCalendarInEditMode(w)},suppressMessage:function(y,x){Confluence.TeamCalendars.suppressMessage(w,y,x)},showCalendarWizard:function(){var z=function(){Confluence.TeamCalendars.Dialogs.getSubCalendarSubscribeDialog({heading:"Welcome to Team Calendars!",callbackHandler:v.getRenderedMacroCallbackHandler(w),id:"welcome-to-popular-dialog"}).show()};var x=function(){Confluence.TeamCalendars.Dialogs.getAddDialog(v.getRenderedMacroCallbackHandler(w),{title:"Welcome to Team Calendars!",addClass:"create-calendar-first-time"})};var y=k.Meta.get("space-key")?(l.getParamsFromUrl()["openAddCalDialog"]==="true"):false;if(y){if(l.isValidLicense()){x()}}else{if("true"===v.getParameter(w,"isShowCalendarWizard")){Confluence.TeamCalendars.showCalendarPopupHaveAnEmptySubcalendar(z,x)}}},getSubCalendarsWhichCanAddEvents:function(){return v.getSubCalendarsWhichCanAddEvents(w)},updateCustomEventType:function(y,x){v.updateCustomEventType(w,y,x)}}}};var t=false;k.$(window).bind("beforeunload",function(){t=true});f("div.plugin-calendar").each(function(){var z=f(this);if(!v.getParameter(z,"defaultView")){var w=v.getCalendarPanel(z).text("Loading...");f.ajax({cache:false,dataType:"json",error:function(){w.empty();v.init(z)},success:function(A){v.setParameter(z,"defaultView",A.view==="agendaDay"?"basicDay":A.view);w.empty();v.init(z)},timeout:v.ajaxTimeout,url:v.getCalendarServiceBaseUrl(z,"/preferences.json")})}else{var y=z.closest(".dashboard-calendar-container");if(y){var x=setInterval(function(){v.init(z);clearInterval(x)},100)}else{v.init(z)}}});f(document).keydown(function(w){var x=true;f(".aui-inline-dialog:visible:first .event-details-popup").each(function(){if(w.keyCode===8||w.keyCode===46){f(".event-delete",this).click();x=false}});return x});var u=f(".ia-splitter-handle-highlight");u.mousedown(function(){u.on("mousemove",function(){f(window).trigger("resize")})}).mouseup(function(){f(window).trigger("resize");u.off("mousemove")});f("body").keyup(function(w){if((w.keyCode?w.keyCode:w.which)===219){f(window).trigger("resize")}});f(".expand-collapse-trigger").click(function(){f(window).trigger("resize")})})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/js/child-subcalendars.js' */
(function(a){if(!window.Confluence.TeamCalendars.subcalendar){window.Confluence.TeamCalendars.subcalendar={}}window.Confluence.TeamCalendars.subcalendar.other={getDialog:function(){AJS.log("Tried to call getDialog on child calendar type. This should not happen.")},weight:1,typeName:"Events Calendars"};window.Confluence.TeamCalendars.subcalendar.travel=a.extend({},window.Confluence.TeamCalendars.subcalendar.other,{weight:2,typeName:"Travel"});window.Confluence.TeamCalendars.subcalendar.leaves=a.extend({},window.Confluence.TeamCalendars.subcalendar.other,{weight:3,typeName:"Leave"});window.Confluence.TeamCalendars.subcalendar.birthdays=a.extend({},window.Confluence.TeamCalendars.subcalendar.other,{weight:4,typeName:"Birthdays"});window.Confluence.TeamCalendars.subcalendar["jira-agile-sprint"]=a.extend({},window.Confluence.TeamCalendars.subcalendar.other,{weight:6,typeName:"JIRA Agile Sprints"});window.Confluence.TeamCalendars.subcalendar["jira-project-releases"]=a.extend({},window.Confluence.TeamCalendars.subcalendar.other,{weight:7,typeName:"JIRA Project Releases"});window.Confluence.TeamCalendars.subcalendar["jira-issue-dates"]=a.extend({},window.Confluence.TeamCalendars.subcalendar.other,{weight:8,typeName:"JIRA Issue Dates"});window.Confluence.TeamCalendars.subcalendar.custom=a.extend({},window.Confluence.TeamCalendars.subcalendar.other,{weight:9,typeName:"custom_name"})})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/js/parent-subcalendar.js' */
(function(b){if(!window.Confluence.TeamCalendars.subcalendar){window.Confluence.TeamCalendars.subcalendar={}}if(!window.Confluence.TeamCalendars.subcalendar.parent){var a=require("tc/calendar-util");window.Confluence.TeamCalendars.subcalendar.parent={getDialog:function(g,d,c){var e,f;var h=function(){var k=g.getCurrentPanel();f.resetFieldErrors();f.populateTimeZoneDropDown(k);var j=b("select[name='timeZoneIdSelect']",e);if(f.isNewCalendar()){f.setFormModeCreate();f.setHeading("Create Calendar",g);f.setSubCalendarIdField("");f.setNameField("");f.setDescriptionField("");f.setColorField(c.getNextCalendarColor());f.setSpaceToDefault();f.setTimeZoneIdField("")}else{f.setFormModeEdit();f.setHeading(d.name,g);f.setSubCalendarIdField(d.id);f.setNameField(d.name);f.setDescriptionField(d.description);f.setColorField(d.color);f.setSpaceKeyField(d.spaceKey);f.setSpaceKeyAutocompleteField(d.spaceName);f.setTimeZoneIdField(d.timeZoneId)}var l=b("input[name='name'], textarea[name='description'], input[name='spaceKeyAutocomplete']",e);if(c.isCalendarInEditMode()){l.removeAttr("readonly");j.removeAttr("disabled")}else{f.setFormModeReadOnly();l.attr("readonly","readonly");j.attr("disabled","disabled")}if(f.isNewCalendar()&&AJS.Meta.get("space-key")){var i=b(".field-group-space-permission",e);i.addClass("hidden")}};return{initializeForm:function(i){g.addHeader("Create Calendar");g.addPanel("General",Confluence.TeamCalendars.Templates.editLocalCalendar(),"calendar-dialog-panel create-calendar-dialog");e=b("form.sub-calendar-edit-form",g.getCurrentPanel().body);f=Confluence.TeamCalendars.getEditCalendarDialogHelper(e,d,c);f.initSpaceDropDown();f.initTimeZoneSelect();f.initOkButton("OK",g);f.initCloseButton(g,i);h();return e},getFormDataAsAjaxData:function(){var i={type:"parent",subCalendarId:b("input[name='subCalendarId']",e).val(),name:b("input[name='name']",e).val(),description:b("textarea[name='description']",e).val(),color:b("input[name='color']",e).val(),spaceKey:b("input[name='spaceKeyAutocomplete']",e).val()?b("input[name='spaceKey']",e).val():"",timeZoneId:b("input[name='timeZoneId']",e).val()||b("select[name='timeZoneIdSelect'] option:selected",e).val()};a.putCalendarContextParams(i);return i},onSubmitStart:function(){f.disableOkButton("Adding...")},onSubmitEnd:function(){f.enableOkButton("OK")}}},weight:1,typeName:"Calendars"}}})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/js/jira-subcalendar.js' */
(function(a){if(!window.Confluence.TeamCalendars.subcalendar){window.Confluence.TeamCalendars.subcalendar={}}if(!window.Confluence.TeamCalendars.subcalendar.jira){window.Confluence.TeamCalendars.subcalendar.jira={weight:5,typeName:"JIRA Calendars",getDialog:function(){AJS.log("Confluence.TeamCalendars.subcalendar.jira.should never be called")}}}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/js/subscription-subcalendar.js' */
(function(b){if(!window.Confluence.TeamCalendars.subcalendar){window.Confluence.TeamCalendars.subcalendar={}}if(!window.Confluence.TeamCalendars.subcalendar.subscription){var a=require("tc/calendar-util");window.Confluence.TeamCalendars.subcalendar.subscription={getDialog:function(g,d,c){var f,e;var h=function(){f.resetFieldErrors();var j=function(){return b(document.createElement("div")).addClass("calendar-dialog-help-link").append(b(document.createElement("a")).attr("href","http://confluence.atlassian.com/x/YQ1cDg").attr("target","_blank").text("Help"))};if(f.isNewCalendar()){f.setFormModeCreate();f.setHeading("Subscribe",g).append(j());f.setSubCalendarIdField("");f.setNameField("");f.setDescriptionField("");f.setColorField(c.getNextCalendarColor());f.setSpaceToDefault();f.setLocationField("");f.setUserNameField("");f.setTimeZoneIdDisplayField("")}else{f.setFormModeEdit();f.setHeading(d.name,g).append(j());f.setSubCalendarIdField(d.id);f.setNameField(d.name);f.setDescriptionField(d.description);f.setColorField(d.color);f.setSpaceKeyField(d.spaceKey);f.setSpaceKeyAutocompleteField(d.spaceName);f.setLocationField(d.sourceLocation);f.setUserNameField(d.userName||"");f.setTimeZoneIdDisplayField(d.timeZoneId)}var k=b("input[name='name'], textarea[name='description'], input[name='spaceKeyAutocomplete'], input[name='location'], input[name='username'], input[name='password']",e);if(c.isCalendarInEditMode()){k.removeAttr("readonly")}else{f.setFormModeReadOnly();k.attr("readonly","readonly")}if(AJS.Meta.get("space-key")){var i=b(".field-group-space-permission",e);i.css("display","none")}};return{initializeForm:function(){g.addHeader("Subscribe");g.addPanel("",Confluence.TeamCalendars.Templates.editSubscriptionSubcalendar(),"calendar-dialog-panel subscribe-dialog");e=b("form.sub-calendar-edit-form",g.getCurrentPanel().body);f=Confluence.TeamCalendars.getEditCalendarDialogHelper(e,d,c);f.initSpaceDropDown();f.initOkButton("Subscribe",g);f.initCloseButton(g);h();return e},getFormDataAsAjaxData:function(){var i={type:"subscription",subCalendarId:b("input[name='subCalendarId']",e).val(),name:b("input[name='name']",e).val(),description:b("textarea[name='description']",e).val(),color:b("input[name='color']",e).val(),spaceKey:!!b("input[name='spaceKeyAutocomplete']",e).val()?b("input[name='spaceKey']",e).val():"",location:b("input[name='location']",e).val(),userName:b("input[name='username']",e).val(),password:b("input[name='password']",e).val()};a.putCalendarContextParams(i);return i},onSubmitStart:function(){f.disableOkButton("Subscribing")},onSubmitEnd:function(){f.enableOkButton("Subscribe")}}},weight:6,typeName:"Subscriptions"}}})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/js/remove-jira-events-dialog.js' */
(function(a){Confluence.TeamCalendars.getRemoveJiraEventsDialog=function(f,e,c){var b;b=new AJS.Dialog(400,250);b.addHeader("Remove JIRA events?");b.addPanel("",Confluence.TeamCalendars.Templates.confirmRemoveJiraEvents({childName:c.name,parentName:f.getSubCalendar(e,c.parentId).name}),"remove-jira-events-confirmation-panel");b.addButton("Remove",function(){d();b.remove()});b.addCancel("Cancel",function(){b.remove()});b.show();function d(){f.setSubCalendarSpinnerIconVisible(e,true);f.setProcessingSubCalendar(e,true);f._deleteSubCalendarInternal(e,c.subscriptionId||c.id,function(g,i,h){f.showAjaxError(e,g,i,h,f.ERROR_CLASS_SUB_CALENDAR_DELETE);f.setSubCalendarSpinnerIconVisible(e,false);f.setProcessingSubCalendar(e,false)},function(g){f.removeSubCalendarEventSource(e,c.id);f.setSubCalendars(e,g.payload);f.updateAvailableSubCalendarsInSubCalendarPanel(e);f.setSubCalendarSpinnerIconVisible(e,false);f.setProcessingSubCalendar(e,false)})}}}(AJS.$));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/templates/timezone-drop-down.soy' */
// This file was automatically generated from timezone-drop-down.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.timeZoneDropDown = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  var timeZoneList3 = opt_data.timeZones;
  var timeZoneListLen3 = timeZoneList3.length;
  for (var timeZoneIndex3 = 0; timeZoneIndex3 < timeZoneListLen3; timeZoneIndex3++) {
    var timeZoneData3 = timeZoneList3[timeZoneIndex3];
    output.append('<option value=', soy.$$escapeHtml(timeZoneData3.name), '>', soy.$$escapeHtml(timeZoneData3.name), ' (', soy.$$escapeHtml(timeZoneData3.offset), ')</option>');
  }
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/templates/subcalendar-panel-entry.soy' */
// This file was automatically generated from subcalendar-panel-entry.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.subCalendarPanelEntry = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="subcalendar-item " data-sub-calendar-id="', soy.$$escapeHtml(opt_data.subCalendar.id), '"><div class="subcalendar-info"><div class="subcalendar-name"><span class="ellipsis_text"><b>', soy.$$escapeHtml(opt_data.subCalendar.displayName), '</b></span></div></div><ul class="child-subcalendars"/></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.TeamCalendars.Templates.customEventTypePanelEntry = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<li class="child-subcalendar ', soy.$$escapeHtml(opt_data.customEventType.icon), '" data-custom-event-type-id="', soy.$$escapeHtml(opt_data.customEventType.customEventTypeId), '" data-sub-calendar-id="', soy.$$escapeHtml(opt_data.childSubCalendar.id), '" data-parent-sub-calendar-id="', soy.$$escapeHtml(opt_data.childSubCalendar.parentId), '"><div class="child-subcalendar-color ', soy.$$escapeHtml(opt_data.childSubCalendar.color), '"/><div class="child-subcalendar-name">');
  if (opt_data.childSubCalendar.subscriptionType) {
    Confluence.TeamCalendars.Templates.iconCustomPrinting({icon: opt_data.customEventType.icon, className: 'iconSubCalendarPrint'}, output);
  } else {
    Confluence.TeamCalendars.Templates.iconCustomPrinting({icon: opt_data.customEventType.icon, className: 'iconSubCalendarPrint'}, output);
  }
  output.append('<span class="ellipsis_text">', soy.$$escapeHtml(opt_data.customEventType.title), '</span></div></li>');
  return opt_sb ? '' : output.toString();
};


Confluence.TeamCalendars.Templates.childSubCalendarPanelEntry = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<li class="child-subcalendar ', (opt_data.childSubCalendar.subscriptionType) ? ' ' + soy.$$escapeHtml(opt_data.childSubCalendar.subscriptionType) : soy.$$escapeHtml(opt_data.childSubCalendar.type), '" data-sub-calendar-id="', soy.$$escapeHtml(opt_data.childSubCalendar.id), '"data-parent-sub-calendar-id="', soy.$$escapeHtml(opt_data.childSubCalendar.parentId), '"><div class="child-subcalendar-color ', soy.$$escapeHtml(opt_data.childSubCalendar.color), '"/><div class="child-subcalendar-name">');
  if (opt_data.childSubCalendar.subscriptionType) {
    Confluence.TeamCalendars.Templates.iconSubCalendarPrinting({eventType: opt_data.childSubCalendar.subscriptionType}, output);
  } else {
    Confluence.TeamCalendars.Templates.iconSubCalendarPrinting({eventType: opt_data.childSubCalendar.type}, output);
  }
  output.append('<span class="ellipsis_text">', soy.$$escapeHtml(opt_data.childSubCalendar.displayName), '</span></div></li>');
  return opt_sb ? '' : output.toString();
};


Confluence.TeamCalendars.Templates.subCalendarMenu = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (opt_data.subCalendar.menuOptions.showMenu) {
    Confluence.TeamCalendars.Templates.subCalendarPopupMenu({subCalendar: opt_data.subCalendar, autoConvertSupported: opt_data.autoConvertSupported, subCalendarClasses: opt_data.subCalendarClasses, isParent: true}, output);
  }
  return opt_sb ? '' : output.toString();
};


Confluence.TeamCalendars.Templates.customEventTypeMenu = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (opt_data.subCalendar.menuOptions.showMenu) {
    Confluence.TeamCalendars.Templates.subCalendarPopupMenu({subCalendar: opt_data.subCalendar, autoConvertSupported: opt_data.autoConvertSupported, subCalendarClasses: opt_data.subCalendarClasses, isCustomEventType: true, parentSubCalendar: opt_data.parentSubCalendar, isParent: false}, output);
  }
  return opt_sb ? '' : output.toString();
};


Confluence.TeamCalendars.Templates.childSubCalendarMenu = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (opt_data.subCalendar.menuOptions.showMenu) {
    Confluence.TeamCalendars.Templates.subCalendarPopupMenu({subCalendar: opt_data.subCalendar, autoConvertSupported: opt_data.autoConvertSupported, subCalendarClasses: opt_data.subCalendarClasses, isParent: false}, output);
  }
  return opt_sb ? '' : output.toString();
};


Confluence.TeamCalendars.Templates.subCalendarPopupMenu = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="subcalendar-dropdown-menu ', (opt_data.isParent) ? 'parent-subCalendar' : '', '"><div class="aui-dd-parent"><div class="aui-dd-trigger subcalendar-dropdown-menu-button"><button  class=\'aui-button aui-button-compact aui-button-subtle\'><span class=\'aui-icon aui-icon-small calendar-icon-more\'>More</span></button></div><ul class="aui-dropdown">', (opt_data.subCalendar.menuOptions.showAddEvent) ? '<li><a href="#" class="subcalendar-addevent" title="' + soy.$$escapeHtml("Add a calendar event") + '">' + soy.$$escapeHtml("Add Event") + '</a></li>' : '', (opt_data.subCalendar.menuOptions.showDisplayLink) ? '<li class="subcalendar-display-hide"><a href="#" title="' + soy.$$escapeHtml("Hide Events") + '">' + soy.$$escapeHtml("Hide Events") + '</a></li><li class="subcalendar-display-show"><a href="#" title="' + soy.$$escapeHtml("Show Events") + '">' + soy.$$escapeHtml("Show Events") + '</a></li>' : '', (opt_data.subCalendar.menuOptions.showNotifications) ? '<li class="subcalendar-watch section-end"><a href="#" title="' + soy.$$escapeHtml("Watch this calendar") + '">' + soy.$$escapeHtml("Watch") + '</a></li><li class="subcalendar-unwatch section-end"><a href="#" title="' + soy.$$escapeHtml("Stop watching this calendar") + '">' + soy.$$escapeHtml("Stop Watching") + '</a></li><li class="subcalendar-watching section-end"><a href="#" title="' + soy.$$escapeHtml("You\x27re watching this calendar via pages") + '">' + soy.$$escapeHtml("Watching") + '</a></li><li class="subcalendar-loading-watching-status section-end"><a href="#">' + soy.$$escapeHtml("Loading Watching Status") + '<span class="aui-icon aui-icon-wait"></span></a></li>' : '', (opt_data.subCalendar.menuOptions.showView) ? '<li><a href="#" class="subcalendar-view" title="' + soy.$$escapeHtml("View calendar details") + '">' + soy.$$escapeHtml("View Calendar") + '</a></li>' : '', (opt_data.parentSubCalendar && opt_data.parentSubCalendar.menuOptions.showEdit && opt_data.isCustomEventType) ? '<li><a href="#" class="custom-event-type-edit" title="' + soy.$$escapeHtml("Edit custom event type details") + '">' + soy.$$escapeHtml("Edit") + '</a></li>' : '', (opt_data.subCalendar.menuOptions.showEdit) ? '<li><a href="#" class="subcalendar-edit" title="' + soy.$$escapeHtml("Edit calendar details") + '">' + soy.$$escapeHtml("Edit") + '</a></li>' : '', (opt_data.subCalendar.menuOptions.showRestrictions) ? '<li><a href="#" class="subcalendar-restrict" title="' + soy.$$escapeHtml("Restrict access to calendar") + '">' + soy.$$escapeHtml("Restrictions") + '</a></li>' : '', (opt_data.subCalendar.menuOptions.showRemove) ? '<li class="section-end"><a href="#" class="subcalendar-remove" title="' + soy.$$escapeHtml("Remove calendar") + '">' + soy.$$escapeHtml("Remove...") + '</a></li>' : '', (opt_data.subCalendar.menuOptions.showShareAndSubscribe) ? ((opt_data.autoConvertSupported) ? '<li><a href="#" class="subcalendar-share-or-embed" title="' + soy.$$escapeHtml("Share calendar with others") + '">' + soy.$$escapeHtml("Embed") + '</a></li>' : '<li><a href="#" class="subcalendar-share" title="' + soy.$$escapeHtml("Share calendar with others") + '">' + soy.$$escapeHtml("Share") + '</a></li>') + ((opt_data.subCalendar.menuOptions.showSubscribe) ? '<li><a href="#" class="subcalendar-subscribe" title="' + soy.$$escapeHtml("Subscribe to calendar with calendar programs") + '">' + soy.$$escapeHtml("Subscribe") + '</a></li>' : '') + '<li><a href="#" class="subcalendar-icalexport" title="' + soy.$$escapeHtml("Export calendar in iCalendar format") + '">' + soy.$$escapeHtml("Export to iCalendar") + '</a></li>' : '', (opt_data.subCalendar.menuOptions.showReload) ? '<li class="section-end"><a href="#" class="subcalendar-reload" title="' + soy.$$escapeHtml("Refresh calendar") + '">' + soy.$$escapeHtml("Refresh") + '</a></li>' : '', (opt_data.subCalendar.menuOptions.showReminder) ? '<li class="subcalendar-reminder section-end"><a href="#" class="unreminder-me ' + ((opt_data.subCalendar.reminderMe == false) ? 'hidden' : '') + '" title="' + soy.$$escapeHtml("Don\x27t send me reminders for this event type") + '">' + soy.$$escapeHtml("Turn off reminders") + '</a><a href="#" class="reminder-me ' + ((opt_data.subCalendar.reminderMe) ? 'hidden' : '') + '" title="' + soy.$$escapeHtml("Send me reminders for this event type") + '">' + soy.$$escapeHtml("Turn on reminders") + '</a></li>' : '', (opt_data.subCalendar.menuOptions.showSettingReminder) ? '<li class="subcalendar-setting-reminder section-end"><a href="#" class="setting-reminder-setting" title="' + soy.$$escapeHtml("There\x27s no reminder for this event type. Add one now.") + '">' + soy.$$escapeHtml("Add Reminder") + '</a></li>' : '');
  if (opt_data.subCalendar.menuOptions.showColourGrid) {
    Confluence.TeamCalendars.Templates.subCalendarColourGrid(opt_data, output);
  }
  output.append('</ul></div></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.TeamCalendars.Templates.subCalendarColourGrid = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<li class="color-grid"><div class="color-cells">');
  var subCalendarColorClassList226 = opt_data.subCalendarClasses;
  var subCalendarColorClassListLen226 = subCalendarColorClassList226.length;
  for (var subCalendarColorClassIndex226 = 0; subCalendarColorClassIndex226 < subCalendarColorClassListLen226; subCalendarColorClassIndex226++) {
    var subCalendarColorClassData226 = subCalendarColorClassList226[subCalendarColorClassIndex226];
    output.append('<div class="', soy.$$escapeHtml(subCalendarColorClassData226), ' color-cell ', (subCalendarColorClassIndex226 % 7 == 0) ? ' clear' : '', '" data-colour="', soy.$$escapeHtml(subCalendarColorClassData226), '"></div>');
  }
  output.append('<div class="clear"></div></div></li>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/templates/edit-local-subcalendar.soy' */
// This file was automatically generated from edit-local-subcalendar.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.editLocalCalendar = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<form name="editSubCalendarForm" class="sub-calendar-edit-form aui" method="POST" action="#"><input type="hidden" name="subCalendarId" value=""><input type="hidden" name="timeZoneId" value=""><input type="hidden" name="type" value="local"><input type="hidden" name="color" value=""><input type="hidden" name="spaceKey" value=""><div class="form-mode create"><div class="subcalendar-type subcalendar-local"><div class="field-group field-group-name"><label for="name">', soy.$$escapeHtml("Name"), '<span class="aui-icon icon-required"></span></label><input name="name" id="name" type="text" class="text" value="" autocomplete="off"><div class="error name-error"></div></div><div class="field-group field-group-description"><label for="description">', soy.$$escapeHtml("Description"), '</label><textarea name="description" id="description" rows="5" class="textarea"></textarea></div><div class="field-group field-group-space-permission"><label for="spaceKeyAutocomplete">', soy.$$escapeHtml("Related space"), '<span class="aui-icon icon-required"></span></label><input name="spaceKeyAutocomplete" id="spaceKeyAutocomplete" type="text" class="autocomplete-space text" data-max="5" data-none-message="', soy.$$escapeHtml("No spaces found"), '" data-template="{key}"><div class="description">', soy.$$escapeHtml("Link this calendar to a space."), '</div><div class="error spaceKeyAutocomplete-error"></div></div><div class="field-group field-group-timezone"><label for="timeZoneIdSelect">', soy.$$escapeHtml("Time zone"), '</label><select name="timeZoneIdSelect" id="timeZoneIdSelect" class="select"></select><span class="spinner aui-icon aui-icon-wait"></span><div class="error timeZoneId-error"></div></div><div class="field-group field-group-timezone-display"><label>', soy.$$escapeHtml("Time zone"), '</label><span class="timeZoneIdDisplay field-value"></span></div><div class="aui-message error calendar-error hidden"><p class="title"><span class="aui-icon icon-error"></span><strong>', soy.$$escapeHtml("Error(s) occurred."), '</strong></p><div class="error-content"><ul class="error-messages hidden"></ul></div></div></div></div></form>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/templates/edit-people-subcalendar.soy' */
// This file was automatically generated from edit-people-subcalendar.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.editPeopleCalendar = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<form name="editSubCalendarForm" class="sub-calendar-edit-form aui" method="POST" action="#"><input type="hidden" name="subCalendarId" value=""><input type="hidden" name="timeZoneId" value=""><input type="hidden" name="type" value="people"><input type="hidden" name="color" value=""><input type="hidden" name="spaceKey" value=""><div class="form-mode create"><div class="subcalendar-type subcalendar-people"><div class="field-group field-group-name"><label for="name">', soy.$$escapeHtml("Name"), '<span class="aui-icon icon-required"></span></label><input name="name" id="name" type="text" class="text" value="" autocomplete="off"><div class="error name-error"></div></div><div class="field-group field-group-description"><label for="description">', soy.$$escapeHtml("Description"), '</label><textarea name="description" id="description" rows="5" class="textarea"></textarea></div><div class="field-group field-group-space-permission"><label for="spaceKeyAutocomplete">', soy.$$escapeHtml("Related space"), '<span class="aui-icon icon-required"></span></label><input name="spaceKeyAutocomplete" id="spaceKeyAutocomplete" type="text" class="autocomplete-space text" data-max="5" data-none-message="', soy.$$escapeHtml("No spaces found"), '"><div class="description">', soy.$$escapeHtml("Link this calendar to a space."), '</div><div class="error spaceKeyAutocomplete-error"></div></div><div class="field-group field-group-timezone"><label for="timeZoneIdSelect">', soy.$$escapeHtml("Time zone"), '</label><select name="timeZoneIdSelect" id="timeZoneIdSelect" class="select"></select><span class="spinner aui-icon aui-icon-wait"></span><div class="error timeZoneId-error"></div></div><div class="field-group field-group-timezone-display"><label>', soy.$$escapeHtml("Time zone"), '</label><span class="timeZoneIdDisplay field-value"></span></div><div class="aui-message error calendar-error hidden"><p class="title"><span class="aui-icon icon-error"></span><strong>', soy.$$escapeHtml("Error(s) occurred."), '</strong></p><div class="error-content"><ul class="error-messages hidden"></ul></div></div></div></div></form>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/templates/edit-subscription-subcalendar.soy' */
// This file was automatically generated from edit-subscription-subcalendar.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.editSubscriptionSubcalendar = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<form name="editSubCalendarForm" class="sub-calendar-edit-form aui" method="POST" action="#"><input type="hidden" name="subCalendarId" value=""><input type="hidden" name="type" value="subscription"><input type="hidden" name="color" value=""><input type="hidden" name="spaceKey" value=""><div class="form-mode create"><div class="subcalendar-type subcalendar-subscription"><div class="field-group field-group-name"><label for="name">', soy.$$escapeHtml("Name"), '<span class="aui-icon icon-required"></span></label><input name="name" id="name" type="text" class="text" value="" autocomplete="off"><div class="error name-error"></div></div><div class="field-group field-group-description"><label for="description">', soy.$$escapeHtml("Description"), '</label><textarea name="description" id="description" rows="5" class="textarea"></textarea></div><div class="field-group field-group-url"><label for="location">', soy.$$escapeHtml("URL"), '<span class="aui-icon icon-required"></span></label><input name="location" id="location" type="text" class="text" autocomplete="off"><div class="description">', soy.$$escapeHtml("iCal URL"), '</div><div class="error location-error"></div></div><div class="field-group field-group-username"><label for="username">', soy.$$escapeHtml("User name"), '</label><input name="username" id="username" type="text" class="text"></div><div class="field-group field-group-password"><label for="password">', soy.$$escapeHtml("Password"), '</label><input name="password" id="password" type="password" class="password"></div><div class="field-group field-group-space-permission"><label for="spaceKeyAutocomplete">', soy.$$escapeHtml("Related space"), '<span class="aui-icon icon-required"></span></label><input name="spaceKeyAutocomplete" id="spaceKeyAutocomplete" type="text" class="autocomplete-space text" data-max="5" data-none-message="', soy.$$escapeHtml("No spaces found"), '"><div class="description">', soy.$$escapeHtml("Link this calendar to a space."), '</div><div class="error spaceKeyAutocomplete-error"></div></div><div class="field-group field-group-timezone-display"><label>', soy.$$escapeHtml("Time zone"), '</label><span class="timeZoneIdDisplay field-value"></span></div></div></div></form>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/templates/edit-jira-subcalendar.soy' */
// This file was automatically generated from edit-jira-subcalendar.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.hiddenJiraFields = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<input type="hidden" name="subCalendarId" value=""><input type="hidden" name="type" value="jira"><input type="hidden" name="color" value=""><input type="hidden" name="spaceKey" value="">');
  return opt_sb ? '' : output.toString();
};


Confluence.TeamCalendars.Templates.editJiraCalendar = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<form name="editSubCalendarForm" class="sub-calendar-edit-form aui" method="POST" action="#"><input type="hidden" name="subCalendarId" value=""><input type="hidden" name="type" value="jira"><input type="hidden" name="color" value=""><input type="hidden" name="spaceKey" value=""><div class="form-mode create"><div class="subcalendar-type subcalendar-jira"><div class="jira-query-options option-project-selected"><fieldset class="group loading-dummy"><legend><span>', soy.$$escapeHtml("Display"), ' <span class="aui-icon icon-required"></span></span></legend><div class="matrix"><span class="spinner aui-icon aui-icon-wait"></span></div></fieldset><fieldset class="group query-group"><legend><span>', soy.$$escapeHtml("Display"), ' <span class="aui-icon icon-required"></span></span></legend><div class="matrix"><div class="radio radio-project"><input class="radio" type="radio" id="query-by-project" name="query-type" checked="checked" value="option-project"><label for="query-by-project">', soy.$$escapeHtml("Project"), '</label></div><div class="radio radio-search-filter trailing-option"><input class="radio" type="radio" id="query-by-searchfilter" name="query-type" value="option-search-filter"><label for="query-by-searchfilter">', soy.$$escapeHtml("Saved filter"), '</label></div><div class="radio radio-jql trailing-option"><input class="radio" type="radio" id="query-by-jql" name="query-type" value="option-jql"><label for="query-by-jql">', soy.$$escapeHtml("JQL (advanced)"), '</label></div></div><div class="field-group hidden"><div class="error jiraQueryOptions-error"></div></div></fieldset><div class="field-group compatibility-group" style="position: relative;"><label for="project" class="hidden project-select-label">', soy.$$escapeHtml("Project"), '<span class="aui-icon icon-required"></span></label><div class="option-project option disableable-option"><div class="option-content"><select class="select content option-value" name="project" id="project"></select><div class="unavailable-message field-value"></div></div><div class="error project-error"></div></div><div class="option-search-filter option disableable-option"><input type="text" class="text option-value hidden" id="searchFilter" name="searchFilter"><label for="searchFilter" class="hidden">', soy.$$escapeHtml("Saved filter"), '</label><div class="option-content"><input type="text" class="text content" id="searchFilterName" name="searchFilterName"><label for="searchFilterName" class="hidden">', soy.$$escapeHtml("Saved filter"), '</label><div class="unavailable-message field-value">', soy.$$escapeHtml("No search filters found. Please create a JIRA search filter."), '</div><div class="search-filter-suggestions hidden"></div><div class="error searchFilterId-error"></div></div></div><div class="option-jql option"><textarea rows="20" cols="20" class="textarea option-value" id="jql" name="jql" wrap="off" autocomplete="off"></textarea><span class="jqlAutoCompleteSpinner hidden aui-icon aui-icon-wait"></span><div class="clear"></div><label for="jql" class="hidden">', soy.$$escapeHtml("JQL (advanced)"), '</label><div class="error jql-error" id="jql-error"></div><div class="invisible jql-status"><div class="jql-ok hidden">', soy.$$escapeHtml("Valid"), ' <a href="http://confluence.atlassian.com/x/ghGyCg" target="_blank">', soy.$$escapeHtml("JQL"), '</a></div><div class="jql-bad hidden">', soy.$$escapeHtml("Invalid"), ' <a href="http://confluence.atlassian.com/x/ghGyCg" target="_blank">', soy.$$escapeHtml("JQL"), '</a></div></div></div></div><div class="date-fields-spinner-container hidden"><span class="aui-icon aui-icon-wait"></span><span>', soy.$$escapeHtml("Loading dates to display..."), '</span></div><fieldset class="group field-group-jira field-group-jira-show hidden"><legend><span>', soy.$$escapeHtml("Show"), '</span></legend><div class="dates"><div class="single-dates"><p class="subtitle">', soy.$$escapeHtml("Single date:"), '</p><div class="date-fields"></div></div><div class="duration"><p class="subtitle">', soy.$$escapeHtml("Date range:"), '</p><div class="date-fields"></div><p class="duration-desc">', soy.$$escapeHtml("Display the time between a start and end date for an issue."), '</p><a href="#" class="add-duration">', soy.$$escapeHtml("Add start and end date..."), '</a></div><div class="clear"></div></div><div class="error dateFieldName-error"></div></fieldset><div class="field-group field-group-timezone-display"><label>', soy.$$escapeHtml("Time zone"), '</label><span class="timeZoneIdDisplay field-value"></span></div></div></div></div></form>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/templates/edit-jira-subcalendar-duration.soy' */
// This file was automatically generated from edit-jira-subcalendar-duration.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.editJiraSubCalendarDurations = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<p class="intro">', "You can visualise the duration between two issue dates in Team Calendars. To do this, select your desired fields below or \x3ca href\x3d\x22https://confluence.atlassian.com/x/8QESCw\x22 target\x3d\x22_blank\x22\x3elearn more about creating custom dates\x3c/a\x3e.", '</p><div class="duration-fields"><div class="duration-start"><select name="start-field"><option value="">', soy.$$escapeHtml("Select start date..."), '</option></select></div><div class="duration-end"><select name="end-field"><option value="">', soy.$$escapeHtml("Select end date..."), '</option></select></div><div class="clear"></div></div><div class="no-selectable-date-fields hidden"><p>', soy.$$escapeHtml("No custom dates found for the selected JIRA query."), '</p><p class="add-fields"></p></div>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/components/calendar-feature-discovery-dialog/subcalendar-features-dialog.soy' */
// This file was automatically generated from subcalendar-features-dialog.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.subCalendarFeatures = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="feature-discovery"><p class="didyouknow description">', soy.$$escapeHtml("Did you know you can also:"), '</p><div class="features-table-container', (! opt_data.autoConvertSupported) ? ' noautoconvert' : '', '"><table cellspacing="0" class="', soy.$$escapeHtml(opt_data.subCalendar.type), '"><tbody><tr class="features"><td class="feature add-event"><a class="feature-icon" alt="', soy.$$escapeHtml("Add"), '">', soy.$$escapeHtml("Add"), '</a><p class="title">', soy.$$escapeHtml("Add"), '</p><p class="feature-description">', soy.$$escapeHtml("Add events to your calendar."), '</p></td><td class="feature restrict"><a class="feature-icon" alt="', soy.$$escapeHtml("Restrict"), '">', soy.$$escapeHtml("Restrict"), '</a><p class="title">', soy.$$escapeHtml("Restrict"), '</p><p class="feature-description">', soy.$$escapeHtml("Restrict the calendar\x27s visibility so that only certain people can   see or edit it."), '</p></td><td class="feature embed"><a class="feature-icon" alt="', soy.$$escapeHtml("Embed"), '">', soy.$$escapeHtml("Embed"), '</a><p class="title">', soy.$$escapeHtml("Embed"), '</p><p class="feature-description">', soy.$$escapeHtml("Embed the calendar on a page or blog post."), '</p></td><td class="feature embed-or-share"><a class="feature-icon" alt="', soy.$$escapeHtml("Embed"), '">', soy.$$escapeHtml("Embed"), '</a><p class="title">', soy.$$escapeHtml("Embed"), '</p><p class="feature-description">', soy.$$escapeHtml("Share calendar with others."), '</p></td><td class="feature share"><a class="feature-icon" alt="', soy.$$escapeHtml("Share"), '">', soy.$$escapeHtml("Share"), '</a><p class="title">', soy.$$escapeHtml("Share"), '</p><p class="feature-description">', soy.$$escapeHtml("Share the calendar with other people for them to subscribe to."), '</p></td></tr></tbody></table></div></div>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/components/calendar-reset-url-dialog/subcalendar-privateurl-reset-dialog.soy' */
// This file was automatically generated from subcalendar-privateurl-reset-dialog.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.resetSubCalendarPrivateUrl = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<p class="reset-reason">', "Your subscription link for \x3cstrong class\x3d\x22calendar-title\x22\x3e\x3c/strong\x3e is private. If you have accidentally shared this link with others you may want to reset it.", '</p><p class="reset-implication">', soy.$$escapeHtml("Resetting the link to this calendar will mean you will need to re-subscribe to the calendar from your calendar application."), '</p><div class="reset-progress"><div class="resetting"><span class="progress-icon aui-icon aui-icon-wait"></span><span class="progress-description">', soy.$$escapeHtml("Resetting..."), '</span></div><div class="reset"><img class="progress-icon" src="', soy.$$escapeHtml(""), '/images/icons/bullet_done.gif"><span class="progress-description">', soy.$$escapeHtml("Subscription link has been reset."), ' <a href="#" class="subscribe-to-calendar">', soy.$$escapeHtml("Subscribe to this calendar"), '</a>.</span></div></div>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/components/calendar-restriction-dialog/subcalendar-restrict-dialog.soy' */
// This file was automatically generated from subcalendar-restrict-dialog.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.restrictSubCalendar = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<form name="editSubCalendarForm" class="sub-calendar-edit-form aui" method="POST" action="#"><input type="hidden" name="subCalendarId"><div class="field-group-permissions"><div class="permissions-type-select"><input type="radio" name="restriction-type" class="radio option-view-restrictions" id="option-view-restrictions-', soy.$$escapeHtml(opt_data.elementIdSuffix), '" value="view"><span>', soy.$$escapeHtml("Restrict viewing"), '</span><input type="radio" name="restriction-type" class="radio option-edit-restrictions" id="option-edit-restrictions-', soy.$$escapeHtml(opt_data.elementIdSuffix), '" value="edit" checked="checked"><span>', soy.$$escapeHtml("Restrict editing"), '</span></div><div class="permissions-details"><div class="permissions-input"><div class="user-picker-container"><input name="permissionsUserPicker" id="permissionsUserPicker-', soy.$$escapeHtml(opt_data.elementIdSuffix), '" type="text" class="text autocomplete-user with-hint" value="', soy.$$escapeHtml("Enter user name"), '" autocomplete="off" data-none-message="', soy.$$escapeHtml("No user found. Press \x27enter\x27 to input as group."), '" data-template="{title}" data-max="3"></div><div class="group-picker-container"><span class="or-text">', soy.$$escapeHtml("or"), '</span><a class="group-picker-trigger" href="#">', (opt_data.pdlEnabled) ? '<span class="icon icon-group"></span><span>' + soy.$$escapeHtml("Group...") + '</span>' : '<img class="group-picker-icon" src="' + soy.$$escapeHtml("") + '/images/icons/group_16.gif"><span>' + soy.$$escapeHtml("Group...") + '</span>', '</a><div class="clear"></div></div></div><div class="clear"></div><div class="error permissions-error"></div><div class="view-permissions">', (opt_data.pdlEnabled) ? '<span class="aui-icon-small aui-iconfont-view"></span>' : '', '<span class="no-view-restrictions">', soy.$$escapeHtml("No view restrictions defined for this calendar"), '</span><span class="restricted-viewing-to">', soy.$$escapeHtml("Viewing restricted to:"), '</span><table class="permission-table hidden"><tbody class="permitted-entities"></tbody></table></div><div class="clear"></div><div class="edit-permissions"><div class="no-edit-restrictions">', soy.$$escapeHtml("No edit restrictions defined for this calendar"), '</div><div class="restricted-editing-to">', soy.$$escapeHtml("Editing restricted to:"), '</div><table class="permission-table hidden"><tbody class="permitted-entities"></tbody></table></div></div></div></form>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/components/calendar-remove-dialog/subcalendar-remove-dialog.soy' */
// This file was automatically generated from subcalendar-remove-dialog.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.removeSubCalendar = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<form class="sub-calendar-remove aui" action="#" method="POST"><h3>', "What would you like to do with \x26quot;\x3cspan class\x3d\x22calendar-to-remove\x22\x3e\x3c/span\x3e\x26quot;?", '</h3><fieldset class="group radios"><div class="radio"><input class="radio" type="radio" name="remove" id="removefromviewoption" checked="checked"><label for="removefromviewoption">', (opt_data.inSpace == true) ? soy.$$escapeHtml("Remove this calendar from space calendar view.") : soy.$$escapeHtml("Remove this calendar from my calendar view."), '</label></div><div class="radio"><input class="radio" type="radio" name="remove" id="deletecalendaroption" ><label for="deletecalendaroption">', soy.$$escapeHtml("Permanently delete this calendar for all users."), '</label></div></fieldset></form>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/templates/subcalendar-remove-confirm-dialog.soy' */
// This file was automatically generated from subcalendar-remove-confirm-dialog.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.confirmRemoveSubCalendar = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<form class="sub-calendar-delete-confirm aui" action="#" method="POST"><input type="hidden" name="subCalendarId" value=""><p><strong>', "Are you sure you want to delete \x26quot;\x3cspan class\x3d\x22calendar-to-delete\x22\x3e\x3c/span\x3e\x26quot;?", (opt_data.subscriberCount > 0) ? (opt_data.subscriberCount > 1) ? '<span class="has-subscribers-warning"> ' + soy.$$escapeHtml(AJS.format("There are {0} people subscribed to this calendar.",opt_data.subscriberCount)) + '</span>' : '<span class="has-subscribers-warning"> ' + soy.$$escapeHtml("There is 1 person subscribed to this calendar.") + '</span>' : '', '</strong></p>', (opt_data.subCalendar.subscriptionType == 'jira' || opt_data.subCalendar.type == 'jira') ? soy.$$escapeHtml("Removing this calendar will not change anything in JIRA. This calendar is only a view of it. The same view can be recreated again, if so desired, with the same parameters.") : '<p>' + soy.$$escapeHtml("All subscribers will be sent an iCalendar export of this calendar.") + '</p><p>' + AJS.format("If you need to restore the calendar at any time, simply choose the \x26quot;{0}\x26quot; option when adding a new calendar.","Import Calendar") + '</p>', '<div class="clear"></div></form>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/templates/jira-subcalendar-remove-confirm-dialog.soy' */
// This file was automatically generated from jira-subcalendar-remove-confirm-dialog.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.confirmRemoveJiraEvents = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="delete-jira-events-hint"><p>', soy.$$escapeHtml(AJS.format("Are you sure you want to remove \x27\x27{0}\x27\x27 from \x27\x27{1}\x27\x27?",opt_data.childName,opt_data.parentName)), '</p></div>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/components/calendar-subcalendar-subscribe-dialog/calendar-search-result.soy' */
// This file was automatically generated from calendar-search-result.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.calendarSearchResultTable = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<table><thead class="tc-subscription-header"><tr><th class="subcalendar-checkbox"></th><th class="subcalendar-name">', soy.$$escapeHtml("Calendar"), '</th><th class="subcalendar-description">', soy.$$escapeHtml("Description"), '</th><th class="subcalendar-space">', soy.$$escapeHtml("Related space"), '</th><th class="subcalendar-subscribercount">', soy.$$escapeHtml("Subscribers"), '</th></tr></thead></table><table class="confluenceTable tc-table-content"><tbody class="tc-subscription-result" data-page-size="10"></tbody></table>');
  return opt_sb ? '' : output.toString();
};


Confluence.TeamCalendars.Templates.calendarSearchResult = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<tr><td class="confluenceTd"><input type="checkbox" class="subcalendar-select"></td><td class="confluenceTd subcalendar-name"><div class="ellipsedColumn" title="', soy.$$escapeHtml(opt_data.name), '" threedots="', soy.$$escapeHtml(opt_data.name), '"><span class="ellipsis_text">', soy.$$escapeHtml(opt_data.name), '</span></div></td><td class="confluenceTd subcalendar-description"><div class="ellipsedColumn" title="', soy.$$escapeHtml(opt_data.description), '" threedots="', soy.$$escapeHtml(opt_data.description), '"><span class="ellipsis_text">', soy.$$escapeHtml(opt_data.description), '</span></div></td><td class="confluenceTd subcalendar-space"><div class="ellipsedColumn" title="', soy.$$escapeHtml(opt_data.relatedSpace), '" threedots="', soy.$$escapeHtml(opt_data.relatedSpace), '"><span class="ellipsis_text">', soy.$$escapeHtml(opt_data.relatedSpace), '</span></div></td><td class="confluenceTd subcalendar-subscribercount"><div class="ellipsedColumn" title="', soy.$$escapeHtml(opt_data.numSubscribers), '" threedots="', soy.$$escapeHtml(opt_data.numSubscribers), '"><span class="ellipsis_text">', soy.$$escapeHtml(opt_data.numSubscribers), '</span></div></td></tr>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/js/timeline-view.js' */
(function(a){Confluence.TeamCalendars.getTimelineAdapter=function(E,r,m,x){var n,e,p,B,c,q,g,u,l,J,w,b,L=null,j,y=null,G=500,i=0.2,K;n=r;e=m;p=E;B=x;c=1000*60*60*24*7;q=new Date();g=new Date(q.getTime()-c*2);u=new Date(q.getTime()+c*2);B.visStart=g;B.visEnd=u;l=g;J=u;function t(Q){var V,X,P,U,S=function(){if(j){P=j.dom.frame.scrollTop;U=a(j.dom.content).height()}},R=function(){var Y=a(j.dom.content).height()-U;if(Y>0){j.dom.frame.scrollTop=P+Y}else{j.dom.frame.scrollTop=P}},O=function(){if(K){var Y=a("<div/>");a.each(Q,function(ab,Z){var aa=Y.empty().html(Z.content).find("[data-event-id]").data("event-id");if(aa===K.id){j.setSelection([{row:ab}],true)}});K=null}},W=function(){var Y=a(j.dom.content).find(".timeline-event-content");a.each(Y,function(ad,aa){var Z=a(aa).parent();if(Z!==undefined&&Z.length>0){var ae=a(Z).position().left;var ab=a(j.dom.content).width();if(a(Z).width()>=ab){if(ae>0){a(aa).css("padding-left",(ab-ae)/2)}else{if(ab>=(a(Z).width()+ae)){a(aa).css("padding-left",(a(Z).width()+ae)/2-ae)}else{a(aa).css("padding-left",ab/2-ae)}}}else{var ac=(a(Z).width()+ae)/2-ae;if((ab>=(a(Z).width()+ae))&&ac>=0){a(aa).css("padding-left",ac)}else{a(aa).css("padding-left",0)}}}})};V=n.getTimelineHeight(e)||G;var T=parseInt(n.getMaxMonthToDisplayTimelineCalendar(e))||6;X={width:"99%",height:"auto",viewHeight:V+"px",minHeight:V,editable:true,enableKeys:true,axisOnTop:false,showNavigation:true,style:"box",start:g,end:u,intervalMin:1000*60*60*6,intervalMax:c*4*T,MONTHS:n.getMonthNames(),DAYS:n.getDayNames()};S();j=new links.Timeline(p[0]);links.events.addListener(j,"select",o);links.events.addListener(j,"change",v);links.events.addListener(j,"rangechange",C);links.events.addListener(j,"rangechanged",F);links.events.addListener(j,"add",z);links.events.addListener(j,"moved",s);j.draw(Q,X);R();O();W();C()}function C(){A()}function o(O){var Q=M(),P=a(".timeline-event-box.timeline-event-selected");if(!Q){return}if(!P.length){P=a(".timeline-event-range.timeline-event-selected")}if(!d(Q)){j.setSelection([])}if(Q.disableResizing){a(".timeline-event-range-drag-left, .timeline-event-range-drag-right").addClass("hidden")}else{a(".timeline-event-range-drag-left, .timeline-event-range-drag-right").removeClass("hidden")}L=n.getEventDetailsDialog(e,Q,P);L[0].style.zIndex=1000;L.show();if(P.position().left<0){setTimeout(function(){var R=P.parent().offset().left;L.offset({left:R})},0)}}function v(){var Q=M(),P=H(),O=D(Q,P);K=Q;if(!d(Q)){j.cancelChange()}else{n.setSubCalendarSpinnerIconVisible(e,true);n.updateEvent(e,O,function(R,T,S){n.setSubCalendarSpinnerIconVisible(e,false);n.showAjaxError(e,R,T,S,n.ERROR_CLASS_EVENT_UPDATE)},function(R){n.setSubCalendarSpinnerIconVisible(e,false);if(R.success){y=Q.subCalendarId;n.reloadSubCalendar(e,Q.subCalendarId)}else{Confluence.TeamCalendars.setGenericErrors(e,I(R.fieldErrors),n.ERROR_CLASS_EVENT_UPDATE)}})}A()}function F(){var O=j.getVisibleChartRange();k(O.start.getTime(),O.end.getTime())}function f(Q,P){if(!Q&&!P){var O=j.getVisibleChartRange();Q=new Date(O.start);P=new Date(O.end)}Confluence.TeamCalendars.updateDateDisplay(e,a.fullCalendar.formatDate(Q,"dd MMM")+" &mdash; "+a.fullCalendar.formatDate(P,"dd MMM, yyyy"))}function k(Q,P){var O=(P-Q)/2;g=new Date(Q);u=new Date(P);if(l.getTime()>Q||J.getTime()<P){l.setTime(Q-O);J.setTime(P+O);B.visStart=l;B.visEnd=J;B.update()}f(g,u)}function z(O){Confluence.TeamCalendars.Dialogs.getEditEventDialog({start:O.start,localizedStartTime:n.getDefaultStartTime(e),localizedEndTime:n.getDefaultEndTime(e),allDay:true},null,n,e).show()}function s(){A()}function d(O){return n.isEventEditable(e,O)}function h(){var P=undefined;var O=j.getSelection();if(O.length){if(O[0].row!=undefined){P=O[0].row}}return P}function M(){return w[h()]}function H(){return b[h()]}function A(){L&&L.hide()}function I(O){return a.map(O,function(P,Q){return P.field+" : "+P.errorMessages.toString()})}function N(P){function O(S){var R;if(!S.allDay){return S.end}if(S.className[0]==="jira-version"||(S.className[0]==="jira-issue"&&S.localizedStartDate===S.localizedEndDate)){return null}R=S.end||new Date(S.start.getTime());R=new Date(R.getTime());R.setHours(R.getHours()+23);R.setMinutes(59);R.setSeconds(59);return R}function Q(T){var S=T.className[0];function R(){if(a.inArray("jira-version",T.className)!==-1||a.inArray("jira-issue",T.className)!==-1){return T.title}if(a.inArray("other",T.className)!==-1||T.eventType==="custom"){if(T.shortTitle){return T.shortTitle+": "+T.title}else{if(T.invitees&&T.invitees.length){return T.invitees[0].displayName+": "+T.title}else{return T.title}}}else{return T.shortTitle||T.title}}switch(S){case"birthdays":return Confluence.TeamCalendars.Templates.timelineEventContentWithEventTypeIcon({eventId:T.id,className:S,title:R()});break;case"travel":case"leaves":case"other":if(T.invitees&&T.invitees.length){if(T.invitees.length>1){return Confluence.TeamCalendars.Templates.timelineEventContent({eventId:T.id,iconClass:"people",title:R()})}else{return Confluence.TeamCalendars.Templates.timelineEventContentSingleInvitee({eventId:T.id,iconUrl:T.iconUrl,title:R()})}}else{return Confluence.TeamCalendars.Templates.defaultTimelineEventContent({eventId:T.id,title:T.title})}break;case"jira-issue":case"jira-version":case"greenhopper-sprint":return Confluence.TeamCalendars.Templates.timelineEventContent({eventId:T.id,iconClass:S,title:R()});break}return Confluence.TeamCalendars.Templates.defaultTimelineEventContent({eventId:T.id,title:T.title})}return a.map(P,function(R){return{start:R.start,end:O(R),content:Q(R),className:R.colorScheme}})}function D(O,Q){var P={},R=n.getSubCalendar(e,O.subCalendarId);if(O.className[0]=="jira-version"||(O.className[0]==="jira-issue"&&O.localizedStartDate===O.localizedEndDate)||(O.allDay&&Q.end.getHours()==23&&Q.end.getMinutes()==59)){P.allDayEvent=true;if(Q.end){Q.end.setHours(0);Q.end.setMinutes(0);Q.end.setSeconds(0)}}else{P.allDayEvent=false}P.subCalendarId=R.parentId;P.uid=O._id;P.originalStartDate=O.originalStart||"";P.what=O.title;P.url=O.workingUrl;P.start=a.fullCalendar.formatDate(Q.start,"ddMMyyyyHHmm");P.end=a.fullCalendar.formatDate(Q.end||Q.start,"ddMMyyyyHHmm");P.where=O.where;P.description=O.description;P.freq=O.recur?O.recur.freq:"";P.byday=O.recur?O.recur.byDay:"";P.interval=O.recur?O.recur.interval:"";P.until=O.recur?O.recur.localizedUntil||"":"";P.recurrenceId=O.recurId||"";P.editAllInRecurrenceSeries="false";P.dragAndDropUpdate=true;P.eventType=O.eventType;P.customEventTypeId=O.customEventTypeId;if(R.eventInviteesSupported){P.person=a.map(O.invitees||[],function(S){return S.id})}return P}return{renderEvents:function(P){var O=a.map(P,function(Q){return Q.subCalendarId});if(y&&a.inArray(y,O)===-1){y=null;return}w=P;b=N(P);t(b);f()},setDate:function(O){var P=u.getTime()-g.getTime();g=new Date(O.getTime()-(P/2));u=new Date(O.getTime()+(P/2));k(g.getTime(),u.getTime())},next:function(){j.move(i);F()},prev:function(){j.move(-i);F()},gotoToday:function(){j.setVisibleChartRangeNow();F()}}}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/templates/require-oauth-message.soy' */
// This file was automatically generated from require-oauth-message.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.requireOauthMessage = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="oauth-approve aui-message hint" data-o-auth-url="', soy.$$escapeHtml(opt_data.oAuthUrl), '" data-sub-calendar-ids="', soy.$$escapeHtml(opt_data.subCalendarIdsArrayJson), '" data-sub-calendar-names="', soy.$$escapeHtml(opt_data.subCalendarNamesArrayJson), '"><p class="title"><span class="aui-icon aui-icon-info"></span></p><p class="info-approve">', AJS.format("\x3ca href\x3d\x22#\x22 class\x3d\x22approve-dance\x22\x3e{0}\x3c/a\x3e to see events of \x3cspan class\x3d\x22subcalendar-names\x22\x3e{1}\x3c/span\x3e","Login \x26 Approve",opt_data.subCalendarName), '</p></div>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/templates/timeline-event-content.soy' */
// This file was automatically generated from timeline-event-content.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.timelineEventContentSingleInvitee = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="user-icon-container"><img class="user-icon" src="', soy.$$escapeHtml(opt_data.iconUrl), '" data-event-id="', soy.$$escapeHtml(opt_data.eventId), '"><span class="single_person">', soy.$$escapeHtml(opt_data.title), '</span></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.TeamCalendars.Templates.timelineEventContent = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="timeline-event-content-container">');
  Confluence.TeamCalendars.Templates.iconEventTimelinePrinting({eventType: opt_data.iconClass}, output);
  output.append('<div class="event-content-with-icon ', soy.$$escapeHtml(opt_data.iconClass), '-icon" data-event-id="', soy.$$escapeHtml(opt_data.eventId), '">', soy.$$escapeHtml(opt_data.title), '</div></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.TeamCalendars.Templates.timelineEventContentWithEventTypeIcon = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="timeline-event-content-container ', soy.$$escapeHtml(opt_data.className), '">');
  Confluence.TeamCalendars.Templates.iconEventTimelinePrinting({eventType: opt_data.className}, output);
  output.append('<div class="event-content" data-event-id="', soy.$$escapeHtml(opt_data.eventId), '">', soy.$$escapeHtml(opt_data.title), '</div></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.TeamCalendars.Templates.defaultTimelineEventContent = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="timeline-event-content-container"><span data-event-id="', soy.$$escapeHtml(opt_data.eventId), '">', soy.$$escapeHtml(opt_data.title), '</span></div>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/components/calendar-subcalendar-subscribe-dialog/calendar-subscribe-dialog.soy' */
// This file was automatically generated from calendar-subscribe-dialog.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.subscribeDialog = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="subscribe-to-subcalendar"><div class="aui-message error calendar-error hidden"><p class="title"><span class="aui-icon icon-error"></span><strong>', soy.$$escapeHtml("Error(s) occurred."), '</strong></p><div class="error-content"><ul class="error-messages hidden"></ul></div></div><div class="mode"><div id="tc-subscribe-no-search-warning" class="hidden loading"><span>', soy.$$escapeHtml("The version of Confluence you are using does not allow calendars to be searched. Here is a list of all calendars you may subscribe to."), '</span><span class="spinner aui-icon aui-icon-wait"></span></div><div class="preamble"><span id="subscribe-intro"></span><span class="spinner aui-icon aui-icon-wait"></span></div><div class="search"><form class="aui"><textarea name="query" class="textarea" rows="1"></textarea></form><span class="spinner aui-icon aui-icon-wait"></span></div></div></div><div class="results"></div>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/templates/event-popup-issue.soy' */
// This file was automatically generated from event-popup-issue.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.eventPopupIssue = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="event-field labeled-field field-jira-date"><span class="field-label">', soy.$$escapeHtml(opt_data.event.extraProperties.dateField), ':</span><div class="field-value">', (opt_data.event.extraProperties.resolved == 'true') ? soy.$$escapeHtml(opt_data.event.localizedEndDate) : soy.$$escapeHtml(opt_data.event.extraProperties.jiraIssueDisplayDayDuration), '</div></div><div class="event-field labeled-field field-jira-assignee"><span class="field-label">', soy.$$escapeHtml("Assignee"), ':</span><div class="field-value', (opt_data.event.extraProperties.assigneeProfileUrl) ? ' assignee-with-link' : '', '"><span class="plain-assignee-name">', soy.$$escapeHtml(opt_data.event.extraProperties.assigneeName), '</span>', (opt_data.event.extraProperties.assigneeProfileUrl) ? '<a class="assignee-profile-link" href="' + soy.$$escapeHtml(opt_data.event.extraProperties.assigneeProfileUrl) + '">' + soy.$$escapeHtml(opt_data.event.extraProperties.assigneeName) + '</a>' : '', '</div></div><div class="event-field labeled-field field-jira-status"><span class="field-label">', soy.$$escapeHtml("Status"), ':</span><div class="field-value">', soy.$$escapeHtml(opt_data.event.extraProperties.statusText), '</div></div><div class="event-field field-event-links edit-controls"><a class="event-edit edit-control" href="#">', soy.$$escapeHtml("Edit"), '</a> <span class="event-hyperlink-separator">&middot;</span> <a href="', soy.$$escapeHtml(opt_data.event.extraProperties.issueLink), '" class="event-hyperlink" target="_blank">', soy.$$escapeHtml("View Issue"), '</a></div>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/templates/event-popup-version.soy' */
// This file was automatically generated from event-popup-version.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.eventPopupVersion = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="event-field field-duration"><div class="time"></div><div class="day-duration">', (opt_data.event.extraProperties.resolved == 'true') ? soy.$$escapeHtml(opt_data.event.localizedEndDate) : soy.$$escapeHtml(opt_data.event.extraProperties.jiraVersionDisplayDayDuration), '</div></div><div class="event-field field-event-links edit-controls"><a class="event-edit edit-control" href="#">', soy.$$escapeHtml("Edit"), '</a> <span class="event-hyperlink-separator">&middot;</span> <a href="', soy.$$escapeHtml(opt_data.event.extraProperties.summaryLink), '" class="event-hyperlink" target="_blank">', soy.$$escapeHtml("Summary"), '</a> <span class="event-hyperlink-separator">&middot;</span> <a href="', soy.$$escapeHtml(opt_data.event.extraProperties.viewIssuesLink), '" class="event-hyperlink" target="_blank">', soy.$$escapeHtml("View Issues"), '</a> <span class="event-hyperlink-separator">&middot;</span> <a href="', soy.$$escapeHtml(opt_data.event.extraProperties.releaseNotesLink), '" class="event-hyperlink" target="_blank">', soy.$$escapeHtml("Release Notes"), '</a></div>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/templates/event-popup-sprint.soy' */
// This file was automatically generated from event-popup-sprint.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.eventPopupSprint = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="event-field field-duration"><div class="time"></div><div class="all-day-label">', soy.$$escapeHtml("All day"), '</div></div><div class="event-field field-event-links"><div class="', (opt_data.event.extraProperties.sprintHomePageUrl) ? 'with-sprint-homepage' : 'no-sprint-homepage', '"><a href="', soy.$$escapeHtml(opt_data.event.extraProperties.viewBoardsUrl), '" class="event-hyperlink" target="_blank">', soy.$$escapeHtml("View Sprint"), '</a>', (opt_data.event.extraProperties.sprintHomePageUrl) ? '<span class="sprintHomePageUrlContainer"> &middot; <a href="' + soy.$$escapeHtml(opt_data.event.extraProperties.sprintHomePageUrl) + '" class="event-hyperlink" target="_blank">' + soy.$$escapeHtml("Sprint Home Page") + '</a></span>' : '', '</div></div>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/templates/event-popup.soy' */
// This file was automatically generated from event-popup.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.eventPopup = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="event-details-popup ', soy.$$escapeHtml(opt_data.contextClass), '"><div class="', soy.$$escapeHtml(opt_data.event.className), '"><div class="event-icon-container"><img class="event-icon" src="', soy.$$escapeHtml(opt_data.event.iconUrl), '"></div><div class="event-fields"><div class="event-field field-subcalendar-name"><span class="lozenge ', soy.$$escapeHtml(opt_data.event.colour), '">', soy.$$escapeHtml(opt_data.event.subCalendarDisplayName), '</span><div class="name"><a href="', soy.$$escapeHtml(opt_data.baseUrl), '/calendar/previewcalendar.action?subCalendarId=', soy.$$escapeHtml(opt_data.event.subCalendarId), '">', soy.$$escapeHtml(opt_data.event.subCalendarDisplayName), '</a></div></div><div class="event-field field-summary"><span class="field-title"> ', soy.$$escapeHtml(opt_data.event.title), '</span>', (opt_data.event.period) ? '<span class="event-field reminder-icon" title="' + soy.$$escapeHtml(opt_data.event.period) + '"></span>' : '', '</div>', (opt_data.event.where) ? '<div class="event-field field-location">' + soy.$$escapeHtml(opt_data.event.where) + '</div>' : '');
  if (opt_data.event.inviteesSupported && opt_data.event.invitees && opt_data.event.invitees.length > 1) {
    output.append('<div class="event-field field-invitees">');
    var inviteeList36 = opt_data.event.invitees;
    var inviteeListLen36 = inviteeList36.length;
    for (var inviteeIndex36 = 0; inviteeIndex36 < inviteeListLen36; inviteeIndex36++) {
      var inviteeData36 = inviteeList36[inviteeIndex36];
      output.append('<img class="invitee" src="', soy.$$escapeHtml(inviteeData36.avatarIconUrl), '" title="', soy.$$escapeHtml(inviteeData36.displayName), '">');
    }
    output.append('</div>');
  }
  if (opt_data.event.workingUrl) {
    output.append('<div class="event-field field-link">');
    var eventLink__soy47 = new soy.StringBuilder((! opt_data.event.urlAlias) ? soy.$$escapeHtml(opt_data.event.workingUrl) : soy.$$escapeHtml(opt_data.event.urlAlias));
    eventLink__soy47 = eventLink__soy47.toString();
    output.append('<a class="event-link" href="', soy.$$escapeHtml(opt_data.event.workingUrl), '" title="', soy.$$escapeHtml(eventLink__soy47), '">', soy.$$escapeHtml(eventLink__soy47), '</a></div>');
  }
  output.append((opt_data.event.description) ? '<div class="event-field field-description">' + ((opt_data.event.descriptionRendered) ? opt_data.event.descriptionRendered : soy.$$escapeHtml(opt_data.event.description)) + '</div>' : '');
  if (opt_data.event.extraPropertiesTemplate) {
    output.append('<div class="extra-fields">');
    switch (opt_data.event.extraPropertiesTemplate) {
      case 'event-details-version':
        Confluence.TeamCalendars.Templates.eventPopupVersion(opt_data, output);
        break;
      case 'event-details-issue':
        Confluence.TeamCalendars.Templates.eventPopupIssue(opt_data, output);
        break;
      case 'event-details-sprint':
        Confluence.TeamCalendars.Templates.eventPopupSprint(opt_data, output);
        break;
    }
    output.append('</div>');
  }
  output.append('<div class="event-field field-duration"><div class="time"></div><div class="all-day-label">', soy.$$escapeHtml("All day"), '</div></div><div class="event-field field-event-links edit-controls"><a class="event-edit edit-control" href="#">', soy.$$escapeHtml("Edit"), '</a> <span class="event-hyperlink-separator">&middot;</span> <a class="event-delete edit-control" href="#">', soy.$$escapeHtml("Delete"), '</a></div></div></div></div>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/templates/upcoming-events.soy' */
// This file was automatically generated from upcoming-events.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.upcomingEvents = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="dashboard-calendar"><div class="events-container"><ul class="group-list">');
  var eventGroupList4 = opt_data.eventGroups;
  var eventGroupListLen4 = eventGroupList4.length;
  for (var eventGroupIndex4 = 0; eventGroupIndex4 < eventGroupListLen4; eventGroupIndex4++) {
    var eventGroupData4 = eventGroupList4[eventGroupIndex4];
    output.append('<li class="event-group"><div class="group-details-container"><div class="group-details"><div class="group-headline', (eventGroupData4.today == true) ? ' today-headline' : '', '"><span class="other-days" data-group-date="', soy.$$escapeHtml(eventGroupData4.dateFormatKey), '">', soy.$$escapeHtml("Formatting..."), '</span><span class="today">', soy.$$escapeHtml("Today"), '</span></div><ul class="events">');
    var eventList16 = eventGroupData4.events;
    var eventListLen16 = eventList16.length;
    for (var eventIndex16 = 0; eventIndex16 < eventListLen16; eventIndex16++) {
      var eventData16 = eventList16[eventIndex16];
      output.append('<li data-event-id="', soy.$$escapeHtml(eventData16.id), '" data-sub-calendar-name="', soy.$$escapeHtml(eventData16.subCalendar.name), '"><div class="event-details"><div class="event-subcalendar ', soy.$$escapeHtml(eventData16.subCalendar.color), '" title="', soy.$$escapeHtml(eventData16.subCalendar.name), '"></div>', (eventData16.mediumIconUrl) ? '<img class="event-icon" src="' + soy.$$escapeHtml(eventData16.mediumIconUrl) + '">' : '<img class="event-icon" src="' + soy.$$escapeHtml(eventData16.iconUrl) + '">', '<strong class="event-name">', soy.$$escapeHtml(eventData16.title), '</strong><span class="event-subcalendar-name">', (eventData16.parentSubCalendar) ? soy.$$escapeHtml(eventData16.parentSubCalendar.name) : soy.$$escapeHtml(eventData16.subCalendar.name), '</span><div class="event-description">', (eventData16.descriptionRendered) ? '<span class="ellipsis_text">' + eventData16.descriptionRendered + '</span>' : (eventData16.description) ? '<span class="ellipsis_text">' + soy.$$escapeHtml(eventData16.description) + '</span>' : '', '</div></div><div class="clear"></div>', (eventIndex16 == eventListLen16 - 1) ? (0 < eventGroupData4.hiddenEventsCount) ? (1 < eventGroupData4.hiddenEventsCount) ? '<div class="x-more-events">' + soy.$$escapeHtml(AJS.format("And {0} more events...",eventGroupData4.hiddenEventsCount)) + '</div>' : '<div class="x-more-events">' + soy.$$escapeHtml(AJS.format("And {0} more event...",eventGroupData4.hiddenEventsCount)) + '</div>' : '' : '', '</li>');
    }
    output.append('</ul></div></div><div class="group-date', (eventGroupData4.today) ? ' first-group-date' : '', '"><div class="day" data-group-date="', soy.$$escapeHtml(eventGroupData4.dateFormatKey), '">', soy.$$escapeHtml(eventGroupData4.groupDay), '</div><div class="month" data-group-date="', soy.$$escapeHtml(eventGroupData4.dateFormatKey), '"></div></div><div class="event-group-clear"></div></li>');
  }
  output.append('</ul><a href="#" class="more-events hidden">', soy.$$escapeHtml("More"), '</a></div></div>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/templates/calendar-printing.soy' */
// This file was automatically generated from calendar-printing.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.iconEventTypePrinting = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('\t');
  var size__soy4 = '16';
  var className__soy5 = 'iconEventPrint';
  if (opt_data.eventType == 'jira-issue') {
    Confluence.TeamCalendars.Templates.renderImagePrinting({imageName: 'jira', size: size__soy4, className: className__soy5}, output);
  } else if (opt_data.eventType == 'jira-version') {
    Confluence.TeamCalendars.Templates.renderImagePrinting({imageName: 'version_open', size: size__soy4, className: className__soy5}, output);
  } else if (opt_data.eventType == 'greenhopper-sprint') {
    Confluence.TeamCalendars.Templates.renderImagePrinting({imageName: 'green_hopper_sprint', size: size__soy4, className: className__soy5}, output);
  } else {
    if (opt_data.eventType != 'subscription') {
      if (opt_data.isCustom) {
        Confluence.TeamCalendars.Templates.iconCustomPrinting({icon: opt_data.eventType, className: className__soy5}, output);
      } else {
        Confluence.TeamCalendars.Templates.renderImagePrinting({imageName: opt_data.eventType, size: size__soy4, className: className__soy5}, output);
      }
    }
  }
  return opt_sb ? '' : output.toString();
};


Confluence.TeamCalendars.Templates.iconSubCalendarPrinting = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('\t');
  var size__soy37 = '16';
  var className__soy38 = 'iconSubCalendarPrint';
  if (opt_data.eventType == 'jira-project-releases') {
    Confluence.TeamCalendars.Templates.renderImagePrinting({imageName: 'version_closed', size: size__soy37, className: className__soy38}, output);
  } else if (opt_data.eventType == 'jira-agile-sprint') {
    Confluence.TeamCalendars.Templates.renderImagePrinting({imageName: 'greenhopper_sprint', size: size__soy37, className: className__soy38}, output);
  } else if (opt_data.eventType == 'leaves') {
    Confluence.TeamCalendars.Templates.renderImagePrinting({imageName: 'leave', size: size__soy37, className: className__soy38}, output);
  } else {
    if (opt_data.eventType != 'subscription') {
      Confluence.TeamCalendars.Templates.renderImagePrinting({imageName: opt_data.eventType, size: size__soy37, className: className__soy38}, output);
    }
  }
  return opt_sb ? '' : output.toString();
};


Confluence.TeamCalendars.Templates.iconEventTimelinePrinting = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  var size__soy63 = '16';
  var className__soy64 = 'iconJiraEventTimelinePrint';
  if (opt_data.eventType == 'jira-issue') {
    Confluence.TeamCalendars.Templates.renderImagePrinting({imageName: 'jira', size: size__soy63, className: className__soy64}, output);
  } else if (opt_data.eventType == 'jira-version') {
    Confluence.TeamCalendars.Templates.renderImagePrinting({imageName: 'version_closed', size: size__soy63, className: className__soy64}, output);
  } else if (opt_data.eventType == 'greenhopper-sprint') {
    Confluence.TeamCalendars.Templates.renderImagePrinting({imageName: 'greenhopper-sprint', size: size__soy63, className: className__soy64}, output);
  } else {
    if (opt_data.eventType != 'subscription') {
      Confluence.TeamCalendars.Templates.renderImagePrinting({imageName: opt_data.eventType, size: '12', className: 'iconEventTimelinePrint'}, output);
    }
  }
  return opt_sb ? '' : output.toString();
};


Confluence.TeamCalendars.Templates.renderImagePrinting = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<img class="', soy.$$escapeHtml(opt_data.className), '" src="', soy.$$escapeHtml(""), '/download/resources/com.atlassian.confluence.extra.team-calendars:calendar-resources/img/', soy.$$escapeHtml(opt_data.imageName), '_', soy.$$escapeHtml(opt_data.size), '.png" alt="" />');
  return opt_sb ? '' : output.toString();
};


Confluence.TeamCalendars.Templates.iconCustomPrinting = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<img class="', soy.$$escapeHtml(opt_data.className), '" src="', soy.$$escapeHtml(""), '/download/resources/com.atlassian.confluence.extra.team-calendars:calendar-resources/img/customeventtype/', soy.$$escapeHtml(opt_data.icon), '.png" alt="" />');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:macro-button-panel-resources', location = 'com/atlassian/confluence/extra/calendar3/js/calendar-macro-button-panel.js' */
(function(a){AJS.bind("init.rte",function(){var b={initViewButtons:function(){a.each(b.getButtonIdToViewMap(),function(d,c){AJS.Confluence.PropertyPanel.Macro.registerButtonHandler(d,function(g,f){var h=a(f);AJS.Rte.getEditor().selection.select(h[0]);AJS.Rte.BookmarkManager.storeBookmark();tinymce.confluence.MacroUtils.insertMacro({contentId:Confluence.Editor.getContentId(),macro:{name:b.getMacroName(h),params:a.extend(b.parseMacroParams(h),{defaultView:c}),defaultParameterValue:"",body:""}})})})},initAddButton:function(){AJS.Confluence.PropertyPanel.Macro.registerButtonHandler("add-subcalendar",function(d,c){var f=a(c);Confluence.TeamCalendars.Dialogs.getAddDialogForMacro({name:b.getMacroName(f),params:b.parseMacroParams(f),defaultParameterValue:"",body:""})})},parseMacroParams:function(f){var c=f.attr("data-macro-parameters")||"",d=c.split("|"),e={};if(d){a.each(d,function(h,g){var i=g.split("=",2);if(i.length>0){e[i[0]]=i.length>1?i[1]:""}})}return e},getMacroName:function(c){return c.attr("data-macro-name")},getButtonIdToViewMap:function(){return{"calendar-view-month":"month","calendar-view-week":"week","calendar-view-list":"list","calendar-view-upcoming":"upcoming","calendar-view-timeline":"timeline"}},initViewButtonHighlight:function(){AJS.bind("created.property-panel",function(d,c){var f=b.parseMacroParams(a(c.anchor))["defaultView"]||"month";if(f==="upcoming"){f="list"}a(".macro-property-panel-calendar-view-"+f,c.panel).addClass("selected")})}};b.initViewButtons();b.initAddButton();b.initViewButtonHighlight()})})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:autoconvert-resources', location = 'com/atlassian/confluence/extra/calendar3/js/team-calendars-autoconvert.js' */
(function(b){var a=function(){if(window.tinymce&&window.tinymce.plugins&&window.tinymce.plugins.Autoconvert&&window.tinymce.plugins.Autoconvert.autoConvert&&window.tinymce.plugins.Autoconvert.autoConvert.addHandler&&b.isFunction(window.tinymce.plugins.Autoconvert.autoConvert.addHandler)){window.tinymce.plugins.Autoconvert.autoConvert.addHandler(function(g,f,d){var e=g.queryKey||{};var i=e.subCalendarId?e.subCalendarId:e.calendarId;var h=/display\/(.*)\/calendar\/(.*)/.test(g.path);if(h){var c=/display\/(.*)\/calendar\/(.*)/.exec(g.path);i=c[2]?c[2]:"unknown"}if((/\/calendar\/previewcalendar.action$/.test(g.path)||/\/calendar\/calendarPage.action$/.test(g.path)||h)&&i){window.tinymce.plugins.Autoconvert.convertMacroToDom({name:"calendar",params:{id:i}},d,d)}else{return d()}})}};b(a);AJS.bind("init.rte",a)})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:helptip-resources', location = 'com/atlassian/confluence/extra/calendar3/components/helptip/helpTip-component.js' */
(function(f){function b(){return false}function d(){return true}var l=0,g=new Date().getTime();var k=Confluence.TeamCalendars.getRestBaseUrl()+"/tips";function h(n){n=""+(n||"");return n.replace(/\./g,"-")}function j(o,n){if(AJS.EventQueue&&n&&n.attributes.id){var q={};var p=h(n.attributes.id);q.name="helptips."+p+"."+o;q.properties={};AJS.EventQueue.push(q)}}function c(){return"c"+g+(l++)}var a={dismissedTipIds:[],loaded:f.Deferred(),url:function(){return k},sync:function(o,n){o||(o="get");n||(n=null);return f.ajax(this.url(),{type:o,context:this,dataType:"json",contentType:"application/json",data:n&&JSON.stringify(n),processData:false}).promise()},fetch:function(){var n=this.sync();n.done(function(o){f.merge(this.dismissedTipIds,o);this.loaded.resolve()});return n.promise()},show:function(n){this.loaded.done(n)},dismiss:function(n){var o=n.attributes.id;if(!o){n._dismissed=true}else{this.dismissedTipIds.push(o);this.sync("post",{id:o})}},undismiss:function(n){var o=n.attributes.id;if(!o){n._dismissed=false}else{this.dismissedTipIds.splice(f.inArray(o,this.dismissedTipIds),1);this.sync("delete",{id:o})}},isDismissed:function(n){var o=n.attributes.id;return(o)?f.inArray(o,this.dismissedTipIds)>=0:n._dismissed}};var e=Confluence.TeamCalendars.HelpTip=function(n){var o;this.attributes=f.extend({},n);this.attributes.id||(this.attributes.id=false);if(this.attributes.body){this.attributes.bodyHtml=this.attributes.body;delete this.attributes.body}this.cid=c();o=this.attributes.anchor;delete this.attributes.anchor;this.view=(o)?new i(this,o):new m(this);this.view.$el.addClass("tc-aui-help-tip")};Confluence.TeamCalendars.HelpTip.Manager=a;f.extend(e.prototype,{show:function(){var n=this;Confluence.TeamCalendars.HelpTip.Manager.show(function(){if(!n.isDismissed()){n.view.show();j("shown",n)}})},dismiss:function(){var n=h(arguments[0]||"programmatically");this.view.dismiss();if(!this.isDismissed()){Confluence.TeamCalendars.HelpTip.Manager.dismiss(this);j("dismissed."+n,this)}},isVisible:function(){return this.view.$el.is(":visible")},isDismissed:function(){return Confluence.TeamCalendars.HelpTip.Manager.isDismissed(this)}});var i=function(o,n){this.initialize(o,n)};f.extend(i.prototype,{initialize:function(t,s){var p=this;var r=9;var o=AJS.$("#rte").height()-s.offset().top;var n=200;var q=o<n;var u=f(AJS.Rte.getEditor().getDoc()).scrollTop();this.model=t;this.beforeHide=b;this.closeButton=f(Confluence.TeamCalendars.Templates.tipClose());this.closeButton.click(function(v){t.dismiss("close-button");v.preventDefault()});this.popup=AJS.InlineDialog(s,t.cid,function(x,w,v){x.html(Confluence.TeamCalendars.Templates.tipContent(t.attributes));x.append(p.closeButton);x.unbind("mouseover mouseout");x.find(".tc-helptip-link").click(function(){j("learn-more.clicked",t)});v()},{container:"#content",noBind:true,onTop:q,preHideCallback:function(){return p.beforeHide()},calculatePositions:function(v,y,z,x){var w=AJS.InlineDialog.opts.calculatePositions(v,y,z,x);if(q){w.popupCss.top=f("#rte").offset().top+s.offset().top-v.height()-r}else{w.popupCss.top=f("#rte").offset().top+(s.offset().top-u)+s.height()+r}w.popupCss.left=s.offset().left;w.displayAbove=q;return w}});this._popupHide=this.popup.hide;this.popup.hide=b;this.$el=f(this.popup[0]);AJS.$(document).bind("showLayer",function(x,w,v){if(w==="inlineDialog"&&v.id===t.cid){AJS.InlineDialog.current=null;AJS.$(document.body).unbind("click."+t.cid+".inline-dialog-check");v._validateClickToClose=b;v.hide=b}})},show:function(){var n=this.popup,o=function(p){if(!n.has(p.target).length){n.shadow.remove();n.remove()}};n.show();AJS.$("#full-height-container").click(o);AJS.Rte.getEditor().onClick.add(o)},dismiss:function(){this.beforeHide=d;this._popupHide()}});var m=function(n){this.initialize(n)};f.extend(m.prototype,{initialize:function(){this.$el=f("<div></div>")},show:function(){},dismiss:function(){}});a.fetch()})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:helptip-resources', location = 'com/atlassian/confluence/extra/calendar3/components/helptip/helpTip-component.soy' */
// This file was automatically generated from helpTip-component.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.tipContent = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.title) ? '<h4 class="tc-helptip-title">' + soy.$$escapeHtml(opt_data.title) + '</h4>' : '', '<div class="tc-helptip-body">', opt_data.bodyHtml, '</div>', (opt_data.url) ? '<a class="tc-helptip-link" href="' + soy.$$escapeHtml(opt_data.url) + '" target="_blank">' + soy.$$escapeHtml("Learn More") + '</a>' : '');
  return opt_sb ? '' : output.toString();
};


Confluence.TeamCalendars.Templates.tipClose = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<button class="tc-helptip-close aui-button aui-style"><span>', soy.$$escapeHtml("Got it, thanks!"), '</span></button>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-sortable-tables:ConfluenceSortableTablesEditorPlugin', location = 'js/editor_plugin_src.js' */
(function(c){tinymce.create("tinymce.plugins.ConfluenceSortableTablesPlugin",{init:function(d){var b=function(d,b,g){c(".tablesorter",g.node).each(function(d,b){var a=c(b).find("thead"),e,f;1===a.length&&(a=a[0],"THEAD"===a.nodeName&&1===a.childNodes.length&&(f=a.removeChild(a.childNodes[0]),e=c(b).find("tbody")[0],b.removeChild(a),e.insertBefore(f,e.childNodes[0])))})};d.onInit.add(function(){c(document).bind("postPaste",b)});d.onRemove.add(function(){c(document).unbind("postPaste",b)})},getInfo:function(){return{longname:"ConfluenceSortableTablesPlugin",
author:"Atlassian",authorurl:"http://www.atlassian.com",infourl:"http://www.atlassian.com",version:"1.0"}}});tinymce.PluginManager.add("confluencesortabletablesplugin",tinymce.plugins.ConfluenceSortableTablesPlugin)})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.macros.advanced:editor_includemacro', location = 'com/atlassian/confluence/plugins/macros/advanced/js/include-macro.js' */
AJS.bind("init.rte",function(){var b=AJS.Meta.get("context-path"),d=AJS.Meta.get("content-id"),c="plugins/servlet/confluence/include-page-macro/goto",a=function(e){var j=AJS.$(e),f=j.attr("data-macro-default-parameter"),h=b+"/"+c+"?location="+f+"&contentId="+d,g=(AJS.$.browser&&AJS.$.browser.msie)?"_blank":"confluence-goto-link-include-macro-"+e.id,i=window.open(h,g);if(i){i.focus()}};AJS.Confluence.PropertyPanel.Macro.registerButtonHandler("goto-page",function(g,f){a(f)})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.balsamiq.confluence.plugins.mockups:editor-web-resource', location = 'includes/editor/balsamiqmockups.js' */
try{AJS.bind("init.rte",function(){(function(a){BalsamiqMockups=function(){};BalsamiqMockups.prototype.launchBalsamiqMockupsEditor=function(c){AJS.Rte.BookmarkManager.storeBookmark();AJS.$("#header").css("display","none");AJS.$(".ia-splitter-left").css("display","none");var d;var b;if(c&&c.params&&c.params.Name){d=c.params.Name;if(c.params.Version){b=c.params.Version}else{b="-1"}BM4C.lastMacroParams=c.params}BM4C.openEditor(d,b)};BalsamiqMockups.prototype.openEditor=function(b,f){var d;var c;BM4C.inserting=(b==null);if(b==null){d="do=insert"}else{d="do=edit&amp;mockup="+b+"&amp;version="+f}var e;if(AJS.params.pageId=="0"){e="draft="+AJS.Meta.get("content-id")}else{e="page="+AJS.params.pageId}c=typeof(AJS.contextPath())=="undefined"?"":AJS.contextPath();AJS.$(document.documentElement).append('<iframe id="balsamiq_mockups_editor_iframe" src="'+c+"/plugins/servlet/mockups?"+d+"&amp;"+e+'" style="position:fixed;left:0px;top:0px;border:none;background:#FFFFFF;" frameborder="0" width="100%" height="100%"></iframe>')};BalsamiqMockups.prototype.closeEditor=function(c,e){AJS.$("#balsamiq_mockups_editor_iframe").remove();AJS.$("#header").css("display","block");AJS.$(".ia-splitter-left").css("display","block");if(c){var d,b;b=e||1;if(BM4C.inserting){d={Name:c,Version:b}}else{d=BM4C.lastMacroParams;d.Version=b}var f={contentId:Confluence.Editor.getContentId(),macro:{name:"mockup",params:d,defaultParameterValue:"",body:""}};AJS.Rte.getEditor().focus();AJS.Rte.BookmarkManager.restoreBookmark();tinyMCE.confluence.MacroUtils.insertMacro(f)}};AJS.Confluence.PropertyPanel.Macro.registerButtonHandler("balsamiq-mockups-macro-prop-size-small",function(c,b){BM4C.editMacroSize(b,"s")});AJS.Confluence.PropertyPanel.Macro.registerButtonHandler("balsamiq-mockups-macro-prop-size-medium",function(c,b){BM4C.editMacroSize(b,"m")});AJS.Confluence.PropertyPanel.Macro.registerButtonHandler("balsamiq-mockups-macro-prop-size-original",function(c,b){BM4C.editMacroSize(b,"o")});BalsamiqMockups.prototype.editMacroSize=function(b,f){var c=AJS.$(b);AJS.Rte.getEditor().selection.select(c[0]);AJS.Rte.BookmarkManager.storeBookmark();var e=BM4C.getMacroParams(c);if(f=="o"){delete e.Width}else{e.Width=((f=="s")?120:600)}var d={contentId:Confluence.Editor.getContentId(),macro:{name:"mockup",params:e,defaultParameterValue:"",body:""}};tinyMCE.confluence.MacroUtils.insertMacro(d)};AJS.Confluence.PropertyPanel.Macro.registerButtonHandler("balsamiq-mockups-macro-prop-align-left",function(c,b){BM4C.editMacroAlign(b,"l")});AJS.Confluence.PropertyPanel.Macro.registerButtonHandler("balsamiq-mockups-macro-prop-align-center",function(c,b){BM4C.editMacroAlign(b,"c")});AJS.Confluence.PropertyPanel.Macro.registerButtonHandler("balsamiq-mockups-macro-prop-align-right",function(c,b){BM4C.editMacroAlign(b,"r")});BalsamiqMockups.prototype.editMacroAlign=function(b,f){var c=AJS.$(b);AJS.Rte.getEditor().selection.select(c[0]);AJS.Rte.BookmarkManager.storeBookmark();var e=BM4C.getMacroParams(c);if(f=="c"){delete e.Alignment}else{e.Alignment=((f=="l")?"Left":"Right")}var d={contentId:Confluence.Editor.getContentId(),macro:{name:"mockup",params:e,defaultParameterValue:"",body:""}};tinyMCE.confluence.MacroUtils.insertMacro(d)};BalsamiqMockups.prototype.getMacroParams=function(c){var b={};if(c.data("macro-parameters")){a.each(c.data("macro-parameters").split("|"),function(d,e){var f=e.split("=");b[f[0]]=f[1]})}return b};BM4C=new BalsamiqMockups();AJS.MacroBrowser.setMacroJsOverride("mockup",{opener:BM4C.launchBalsamiqMockupsEditor});if(window.location.search.indexOf("openBalsamiq=true")!=-1){BM4C.launchBalsamiqMockupsEditor()}}(AJS.$))})}catch(err){if(console&&console.log){console.log("Error loading balsamiqmockups.js");console.log(err)}};
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.balsamiq.confluence.plugins.mockups:balsamiq-plugin-editor-web-resource', location = 'includes/editor/balsamiq.plugin.editor.js' */
var bmse=(function(){var n=false,g=false,e=false,k=false,d=false,l,h=function(){var o=document.getElementById("balsamiq_mockups_editor_iframe");return o?o.contentDocument:document},m=function(){var o=document.getElementById("balsamiq_mockups_editor_iframe");return o?o.contentWindow:window},j=function(o){var q=h(),p=m();return(navigator.appName.indexOf("Microsoft")!==-1)?p[o]:q[o]},i=function(o){if(d&&console){console.log(o)}},a=function(){i("confirmExit submitting:"+k+" dirty:"+e);if(!k&&e){return"You will lose the changes made to this mockup."}},c=function(p){if(g){var r=(navigator.userAgent.indexOf("Firefox")!==-1)?-p.detail:p.wheelDelta/40,q={x:p.screenX,y:p.screenY,delta:r,ctrlKey:p.ctrlKey,altKey:p.altKey,shiftKey:p.shiftKey};i("JS::handleWheel");j("editor").handleWheel(q)}},b=function(r){if((r.ctrlKey||r.metaKey||r.altKey)&&n===true){var p={219:"[",221:"]",189:"-",187:"+"}[r.keyCode]||String.fromCharCode(r.keyCode).toLowerCase(),q=(r.ctrlKey?"1":"0")+(r.metaKey?"1":"0")+(r.altKey?"1":"0")+(r.shiftKey?"1":"0")+p,o=false;i("JS::keyboardHandler");if(navigator.userAgent.indexOf("Safari")!==-1&&(r.keyCode===91||r.keyCode===93)){o=true}else{if(j("editor").sendKeystroke(q)){o=true}}if(o){if(r.stopPropagation){r.stopPropagation()}r.cancelBubble=true;if(r.preventManipulation){r.preventManipulation()}if(r.preventDefault){r.preventDefault()}r.returnValue=false}}},f=function(){var q=h(),p=m(),o;if(p.addEventListener){o=(navigator.userAgent.indexOf("Firefox")!==-1)?"DOMMouseScroll":"mousewheel";p.addEventListener(o,c,false)}if(q.addEventListener){q.addEventListener("keydown",b,false);q.addEventListener("keypress",b,false)}};return{isEditorViewReady:function(){return g},passKeys:function(o){n=(o==="true");i("passKeys: "+o)},editorViewReady:function(){g=true;j("editor").focus();i("base editorViewReady");f()},getFlashMovie:j,trace:i,enableLogs:function(o){d=o},enableEditorLogs:function(o){j("editor").enableLogs(o)},setDirty:function(o){i("setDirty "+o);e=o},isDirty:function(){return e},setDirtyByID:function(p,o){i("setDirtyByID "+p+" "+o)},setSubmitting:function(){i("setSubmitting");k=true},onClose:function(){m().onbeforeunload=l},setAutosaveEnabled:function(o){l=m().onbeforeunload;if(o){m().onbeforeunload=null}else{m().onbeforeunload=a}i("setAutosaveEnabled "+o)},updateTitle:function(o){document.title=o;i("updatingTitle "+o)}}}());
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.m20tech.tooltips:insert-link-javascript', location = '/tooltips/confluence-insert-link-tooltip.js' */
function rfc3986EncodeURIComponent(a){return encodeURIComponent(a).replace(/[!'()*]/g,escape)}(function(a){AJS.bind("dialog-created.link-browser",function(h,b){var d="tooltip",c,g,f;f=b.tabs[d]={createPanel:function(i){g=i.baseElement;c=g.find("input[name='destination']");var e=g.find("input[name='alias']");g.find("form").keydown(function(j){if(j.keyCode==13&&!b.isSubmitButtonEnabled()){j.preventDefault()}});c.keyup(function(l){AJS.log("link field keyup");var m=c.val();var k=m?Confluence.Link.makeExternalLink("#?tooltip="+rfc3986EncodeURIComponent(m)):null;if(k){k.attrs.href="#?tooltip="+rfc3986EncodeURIComponent(m);var j=e.val();if(!j||j==""){k.body.text="Enter link text";k.body.html="Enter link text";e.val("Enter link text")}b.setLink(k)}})},onSelect:function(){setTimeout(function(){var i=a("input[name='destination'][id='weblink-destination']").val();var e=i.search("\\?tooltip=");if(e>0){var j=decodeURIComponent(i.substr(e+9));c.val(j)}c.focus()})},onDeselect:function(){},preSubmit:function(){},handlesLink:function(k){var i=k.attrs.href;var e=i.search("\\?tooltip=");if(e>0){var j=decodeURIComponent(i.substr(e+9));c.val(j);return true}return false}}})})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.m20tech.tooltips:insert-link-javascript', location = '/tooltips/tooltip-panel.soy' */
// This file was automatically generated from tooltip-panel.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.LinkBrowser == 'undefined') { Confluence.Templates.LinkBrowser = {}; }


Confluence.Templates.LinkBrowser.tooltipPanel = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('\t<form class="aui" onsubmit="return false;"><div class="field-group"><div class="input-field"><label for="tooltip-panel-destination">', soy.$$escapeHtml("Tooltip Text"), ':</label><input type="text" tabindex="0" class="text" id="tooltip-panel-destination" name="destination" size="60"></div><div class="description">', soy.$$escapeHtml("The text to be displayed in the tooltip"), '</div></div></form>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-page-layout:pagelayout', location = 'js/pagelayout/page-layout.soy' */
// This file was automatically generated from page-layout.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.PageLayout == 'undefined') { Confluence.Templates.PageLayout = {}; }


Confluence.Templates.PageLayout.contentLayout = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="contentLayout"></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.PageLayout.cellLayout = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="cell"><div class="innerCell"></div></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.PageLayout.smallCellLayout = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="cell aside"><div class="innerCell"></div></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.PageLayout.headerLayout = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="header"><div class="innerCell"></div></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.PageLayout.footerLayout = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="footer"><div class="innerCell"></div></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.PageLayout.columnLayout = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="columnLayout"></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.PageLayout.emptyLayout2 = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="contentLayout2">');
  Confluence.Templates.PageLayout.emptySection2(null, output);
  output.append('</div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.PageLayout.emptySection2 = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="columnLayout single" data-layout="single">');
  Confluence.Templates.PageLayout.cell2({type: 'normal'}, output);
  output.append('</div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.PageLayout.newSection2 = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="columnLayout single" data-layout="single">');
  Confluence.Templates.PageLayout.cell2({type: 'normal'}, output);
  output.append('</div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.PageLayout.cell2 = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="cell ', soy.$$escapeHtml(opt_data.type), '" data-type="', soy.$$escapeHtml(opt_data.type), '"><div class="innerCell">', (opt_data.content) ? opt_data.content : '', '</div></div>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-page-layout:pagelayout', location = 'js/pagelayout/tinymce-page-layout.js' */
(function(e){function i(a){a=e(a.getBody());if(a.children(".contentLayout").length)return!1;a.children(".contentLayout2");return!0}var h=function(a){var j=e("#pagelayout-menu"),d=e(".icon-check",j);h=function(a){var b=d.not(".hidden"),a=d.siblings("."+a.name).siblings();b.addClass("hidden");a.removeClass("hidden")};h(a)};tinymce.create("tinymce.plugins.PageLayoutPlugin",{init:function(a){function j(){i(a)||tinymce.plugins.PageLayoutPlugin.PageLayout.needsContentEditableBody(b.getLayout())||tinymce.webkit||
AJS.Rte.editorFocus(a)}function d(){tinymce.isGecko&&setTimeout(function(){a.focus();a.dom.getRoot().focus()},1)}function g(){var f=e("#pagelayout-menu").parent(),c=e("#page-layout-2-group");i(a)?(f.addClass("hidden"),c.removeClass("hidden"),b=new tinymce.plugins.PageLayoutPlugin.PageLayout2(a),tinymce.plugins.PageLayoutPlugin.PageLayout2.needsContentEditableBody()&&e(a.getBody()).attr("contenteditable","true")):(f.removeClass("hidden"),c.addClass("hidden"),b=new tinymce.plugins.PageLayoutPlugin.PageLayout(a),
tinymce.plugins.PageLayoutPlugin.PageLayout.needsContentEditableBody(b.getLayout())?b.body.attr("contenteditable","true"):d(),h(b.getLayout()))}var b;this.ed=a;"comment"!==AJS.Meta.get("content-type")&&(a.onInit.add(function(){a.undoManager.clear();a.undoManager.add();g();AJS.bind("rte-ready",function(){var f=e('[contenteditable="true"]',a.getBody()),c=!1!==AJS.Meta.get("editor-auto-focus");f.attr("contenteditable","false");f.attr("contenteditable","true");c&&AJS.Rte.editorFocus(a)});a.selection.onSetContent.add(j);
i(a)&&a.undoManager.onUndo.add(function(){tinymce.plugins.PageLayoutPlugin.PageLayout2.needsContentEditableBody()&&b.body.attr("contenteditable","true");d()})}),e("#pagelayout-menu").delegate("li.dropdown-item a","click",function(){a.execCommand("mcePageLayout",!1,tinymce.plugins.PageLayoutPlugin.PageLayout.getLayoutOptions(this))}),a.addCommand("mcePageLayoutInitialize",function(){a.undoManager.add();b.createInitialLayoutIfNone()}),a.addCommand("mcePageLayout",function(f,c){a.undoManager.add();b.setLayout(c);
h(b.getLayout())}),a.addCommand("mcePageLayoutAddSection",function(f,c){a.undoManager.add();b.addSection&&b.addSection(c&&c.section)}),a.addCommand("mcePageLayoutChangeSection",function(f,c){a.undoManager.add();b.changeSection&&b.changeSection(c&&c.layout,c&&c.section)}),a.addCommand("mcePageLayoutRemoveSection",function(f,c){a.undoManager.add();b.removeSection&&b.removeSection(c&&c.section)}),a.addCommand("mcePageLayoutMoveSectionUp",function(f,c){a.undoManager.add();b.moveSectionUp&&b.moveSectionUp(c&&
c.section)}),a.addCommand("mcePageLayoutMoveSectionDown",function(f,c){a.undoManager.add();b.moveSectionDown&&b.moveSectionDown(c&&c.section)}),a.onSetContent.add(g),a.onClick.add(function(a,c){var b=e(c.target);b.is("div.cell")&&b.children(".innerCell").focus();if(tinymce.isWebKit&&(c.target===a.getBody()||c.target===a.getBody().parentNode))b=b.find(".innerCell"),b.length&&(a.execCommand("selectAll"),b=c.target!==a.getBody(),a.selection.collapse(b))}),!tinymce.isIE9&&a.onKeyUp.add(function(a,b){var d=
b.keyCode;if(8!=d&&46!=d)return!0;d=a.selection.getRng(!0).startContainer;if(e(d).closest(".contentLayout,.contentLayout2",a.getBody()).length&&(d=e(d).closest(".innerCell"))&&d.length&&a.dom.isEmpty(d.clone()[0]))d.html('<p><br data-mce-bogus="1"></p>'),a.selection.select(d[0],!0),a.selection.collapse(!0)}))},execCommand:function(a){if("selectAll"===a){var a=this.ed,e=a.getBody(),d,g;if("true"==a.dom.getAttrib(e,"contenteditable"))return!1;d=a.dom.select(".innerCell",e);e=d[0];d=d[d.length-1];g=
a.dom.createRng();g.setStart(e,0);g.setEnd(d,d.childNodes.length);a.selection.setRng(g);return!0}return!1},getInfo:function(){return{longname:"Page Layout Plugin",author:"Atlassian",authorurl:"http://www.atlassian.com",infourl:"http://www.atlassian.com",version:"1.0"}}});tinymce.PluginManager.add("pagelayoutplugin",tinymce.plugins.PageLayoutPlugin)})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-page-layout:pagelayout', location = 'js/pagelayout/page-layout.js' */
(function(d){tinymce.plugins.PageLayoutPlugin.PageLayout=function(a){this.editor=a;this.body=d(a.getBody());a=d(".contentLayout",this.body);a.length&&(k(a),l(a,this.body,this.editor),this.editor.undoManager.add())};tinymce.plugins.PageLayoutPlugin.PageLayout.DEFAULT_LAYOUT={name:"pagelayout-none",columns:0};tinymce.plugins.PageLayoutPlugin.PageLayout.prototype.setLayout=function(a){var c;c=d(".contentLayout",this.body);if(tinymce.plugins.PageLayoutPlugin.PageLayout.getLayoutOptions(c).name!==a.name){AJS.trigger("analyticsEvent",
{name:"PageLayoutEvent.pageLayoutChanged",data:{name:a.name}});if(1===c.length)c=c.clone();else{var e=this.editor;c=this.body;var b=Confluence.Templates.PageLayout.contentLayout(),e=e.dom.create("div");e.innerHTML=b;c=d(e).children().html(c.html())}k(c);var b=c,e=d(".columnLayout > .cell",b).length,g=a.name,h=a.columns,f;if(0==e){f=b.html();for(b.html(Confluence.Templates.PageLayout.columnLayout());e!==h.length;)m(b),e++}g=g.substring(g.indexOf("-")+1);g=g.substring(0,Math.max(0,g.indexOf("-"))||
void 0);d(".columnLayout",b).attr("class","columnLayout "+g+"Columns");if(h)for(d(".columnLayout > .cell",b).each(function(a,b){void 0!==h[a]&&d(b).attr("class","cell "+h[a])});e!==h.length;)if(e<h.length)m(b),e++;else{var g=d(".columnLayout .cell:nth-child("+e+") .innerCell",b),o=d(".columnLayout > .cell:nth-child("+(e-1)+") .innerCell",b),p=i(g);o.append(p);g.parent().remove();e--}else{var j="";d(".columnLayout > .cell",b).each(function(){j+=i(d(".innerCell",this))});d(".columnLayout",b).replaceWith(j)}f&&
n(b).html(f);a.header?(f=c,d(".header",f).length||f.prepend(Confluence.Templates.PageLayout.headerLayout())):(b=c,f=d(".header",b),b=n(b),e=i(d(".innerCell",f)),b.length?(b.prepend(e),f.remove()):f.replaceWith(e));a.footer?(f=c,d(".footer",f).length||f.append(Confluence.Templates.PageLayout.footerLayout())):(b=c,f=d(".footer",b),b=d(".columnLayout > .cell:last-child .innerCell",b),e=i(d(".innerCell",f)),b.length?(b.append(e),f.remove()):f.replaceWith(e));tinymce.plugins.PageLayoutPlugin.PageLayout.needsContentEditableBody(a)?
(c=c.contents().unwrap(),this.body.attr("contenteditable","true")):(l(c,this.body,this.editor),c.attr("data-atlassian-layout",JSON.stringify(a)));this.body.empty().append(c);tinymce.isIE&&this.editor.dom.setRoot();f=this.editor;a=f.selection;c=a.getRng(!0);b=d('[contenteditable="true"]',f.getBody());b.length?(f.focus(),b[0].focus(),f=b.children()[0],c.setStart(f,0),c.setEnd(f,0),a.setRng(c)):f.focus()}};tinymce.plugins.PageLayoutPlugin.PageLayout.prototype.getLayout=function(){var a=d(".contentLayout",
this.body);return a.length&&a.attr("data-atlassian-layout")?JSON.parse(a.attr("data-atlassian-layout")):tinymce.plugins.PageLayoutPlugin.PageLayout.DEFAULT_LAYOUT};tinymce.plugins.PageLayoutPlugin.PageLayout.getLayoutOptions=function(a){return(a=(a.jquery?a:d(a)).attr("data-atlassian-layout"))?JSON.parse(a):tinymce.plugins.PageLayoutPlugin.PageLayout.DEFAULT_LAYOUT};tinymce.plugins.PageLayoutPlugin.PageLayout.needsContentEditableBody=function(a){return!(a.header||a.footer||a.columns)};var i=function(a){a=
a.jquery?a:d(a);if(a.length)for(var c=a[0].childNodes,e=0;e<c.length;e++){var b=c[e];if(!("P"==b.nodeName&&1==b.childNodes.length&&"BR"==b.firstChild.nodeName))return a.html()}return""},k=function(a){for(var c,e,a=d(".cell, .header, .footer",a),b=0,g=a.length;b<g;b++)c=d(a[b]),e=c.html(),d(".innerCell",c).length||(c.removeAttr("contenteditable"),c.html('<div class="innerCell">'+e+"</div>"))},l=function(a,c,e){c.attr("contenteditable","false");var b=tinymce.isIE9?"<p></p>":"<p><br /></p>";d(".innerCell",
a).each(function(){var a=d(this);a.attr("contenteditable","true");a.children().length||a.append(b)});tinymce.isIE&&c.delegate(".innerCell","focus.pageLayout",function(){e.dom.settings.root_element=this})},n=function(a){return d(".columnLayout > .cell:first-child .innerCell",a)},m=function(a){return d(".columnLayout",a).append(Confluence.Templates.PageLayout.cellLayout())}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-page-layout:pagelayout', location = 'js/pagelayout/page-layout-2.js' */
(function(f){function o(a,b,c,d){var g=a.find(".cell"),h=g.length,i=f(),k=b.cells.length,m=[],l=[],e,j;a.attr("class","columnLayout");a.addClass(b.id);a.attr("data-layout",b.id);e=0;for(j=h;e<j;e++)l=g.eq(e).detach(),m.push(q(l.children(".innerCell")));e=0;for(j=k;e<j;e++)i=i.add(Confluence.Templates.PageLayout.cell2({type:b.cells[e].type||""}));if(h<=k)l=m;else{l=m.slice(0,k);e=k;for(j=h;e<j;e++)l[k-1]+=m[e]}a.prepend(i);e=0;for(j=k;e<j;e++)i.eq(e).find(".innerCell").html(l[e]);n(a,c,d)}var r=tinymce.isIE9?
"<p></p>":"<p><br /></p>";tinymce.plugins.PageLayoutPlugin.PageLayout2=function(a){this.editor=a;this.body=f(a.getBody());a=this.body.find(".contentLayout2");a.length&&(n(a,this.body,this.editor),this.editor.undoManager.add())};tinymce.plugins.PageLayoutPlugin.PageLayout2.prototype.addSection=function(a){var b=this,c=f(Confluence.Templates.PageLayout.newSection2()),d=a||h(this.body,this.editor,!0);if(d.length){var g=tinymce.plugins.PageLayoutPlugin.PageLayout2.Layouts.get(d.attr("data-layout"));this.editor.undoManager.ignore(function(){o(c,
g,b.body,b.editor);d.after(c)});i(this.editor,c);AJS.trigger("editor.page-layout.add-section",{section:c})}else this.createInitialLayoutIfNone()};tinymce.plugins.PageLayoutPlugin.PageLayout2.prototype.changeSection=function(a,b){var c=this;tinymce.plugins.PageLayoutPlugin.PageLayout2.isPageLayout()||this.createInitialLayoutIfNone();var d=b||h(this.body,this.editor,!1);if(d.length){var g=tinymce.plugins.PageLayoutPlugin.PageLayout2.Layouts.get(d.attr("data-layout"));this.editor.undoManager.ignore(function(){o(d,
a,c.body,c.editor)});i(this.editor,d);AJS.trigger("editor.page-layout.change-layout",{section:d,originalLayout:g,currentLayout:a})}};tinymce.plugins.PageLayoutPlugin.PageLayout2.prototype.removeSection=function(a){if(tinymce.plugins.PageLayoutPlugin.PageLayout2.isPageLayout()){var a=a||h(this.body,this.editor,!0),b=a.next(),c=a.prev(),d;b.length?(d=b,a.remove()):c.length?(d=c,a.remove()):(a.closest(".contentLayout2").remove(),a=this.body.find(".contentLayout2").find(".columnLayout").first(),a.length?
d=a:(a=this.editor,a.getBody().setAttribute("contenteditable",!0),a.setContent("<p></p>"),p(a),a=f("#rte-button-pagelayout-2"),a.hasClass("active")&&a.click()));d&&d.length&&i(this.editor,d);AJS.trigger("editor.page-layout.remove-section",{})}};tinymce.plugins.PageLayoutPlugin.PageLayout2.prototype.moveSectionUp=function(a){if(tinymce.plugins.PageLayoutPlugin.PageLayout2.isPageLayout()){var a=a||h(this.body,this.editor,!0),b=a.prev();b.length&&(a.detach(),b.before(a),i(this.editor,a));AJS.trigger("editor.page-layout.move-section-up",
{section:a})}};tinymce.plugins.PageLayoutPlugin.PageLayout2.prototype.moveSectionDown=function(a){if(tinymce.plugins.PageLayoutPlugin.PageLayout2.isPageLayout()){var a=a||h(this.body,this.editor,!0),b=a.next();b.length&&(a.detach(),b.after(a),i(this.editor,a));AJS.trigger("editor.page-layout.move-section-down",{section:a})}};tinymce.plugins.PageLayoutPlugin.PageLayout2.prototype.createInitialLayoutIfNone=function(){if(!tinymce.plugins.PageLayoutPlugin.PageLayout2.isPageLayout()){var a=f(Confluence.Templates.PageLayout.emptyLayout2()),
b=a.find(".innerCell"),c=this.body.children().detach();b.append(c);this.body.append(a);n(a,this.body,this.editor);p(this.editor)}};tinymce.plugins.PageLayoutPlugin.PageLayout2.isPageLayout=function(){return!!f(AJS.Rte.getEditor().getBody()).find("div.contentLayout2").length};tinymce.plugins.PageLayoutPlugin.PageLayout2.needsContentEditableBody=function(){return!tinymce.plugins.PageLayoutPlugin.PageLayout2.isPageLayout()};tinymce.plugins.PageLayoutPlugin.PageLayout2.Layouts=[{id:"single",name:"Single column section",
cells:[{type:"normal"}]},{id:"two-equal",name:"Two column section",cells:[{type:"normal"},{type:"normal"}]},{id:"two-left-sidebar",name:"Two column section with left side-bar",cells:[{type:"aside"},{type:"normal"}]},{id:"two-right-sidebar",name:"Two column section with right side-bar",cells:[{type:"normal"},{type:"aside"}]},{id:"three-equal",name:"Three column section",cells:[{type:"normal"},{type:"normal"},
{type:"normal"}]},{id:"three-with-sidebars",name:"Three column section with side-bars",cells:[{type:"sidebars"},{type:"normal"},{type:"sidebars"}]}];tinymce.plugins.PageLayoutPlugin.PageLayout2.Layouts.get=function(a){for(var b=tinymce.plugins.PageLayoutPlugin.PageLayout2.Layouts,c=0,d=b.length;c<d;c++)if(b[c].id===a)return b[c];return null};tinymce.plugins.PageLayoutPlugin.PageLayout2.Layouts.findNearestSection=function(a){var b=AJS.Rte.getEditor(),c=f(b.getBody());return h(c,
b,a)};var q=function(a){a=f(a);if(a.length)for(var b=a[0].childNodes,c=0;c<b.length;c++){var d=b[c];if(!("P"==d.nodeName&&1==d.childNodes.length&&"BR"==d.firstChild.nodeName))return a.html()}return""},h=function(a,b,c){b=f(b.selection.getRng(!0).startContainer).closest(".columnLayout");!b.length&&c&&(b=a.find(".columnLayout").last());return b},n=function(a,b,c){b.attr("contenteditable","false");f(".innerCell",a).each(function(){var a=f(this);a.attr("contenteditable","true");a.children().length||a.append(r)});
tinymce.isIE&&b.delegate(".innerCell","focus.pageLayout",function(){c.dom.settings.root_element=this})},p=function(a){var b=a.selection,c=b.getRng(!0),d=f('[contenteditable="true"]',a.getBody());d.length?(a.focus(),d[0].focus(),a=d.children()[0],c.setStart(a,0),c.setEnd(a,0),b.setRng(c)):a.focus()},i=function(a,b){var c=a.selection,d=c.getRng(!0),g=b.find('[contenteditable="true"]').first(),f=g.children();f.length?(a.focus(),g[0].focus(),g=f[0],d.setStart(g,0),d.setEnd(g,0),c.setRng(d),AJS.Rte.showElement(g)):
a.focus()}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-page-layout:pagelayout', location = 'js/pagelayout/tinymce-page-layout-toolbar.js' */
(function(d){function f(b){var b=b||tinymce.plugins.PageLayoutPlugin.PageLayout2.Layouts.findNearestSection(),a=b.attr("data-layout"),b=d("#rte-toolbar-row-pl2-toolbar").find(".layouts button"),a=b.find(".pl2-layout-"+a).closest(".aui-button");a.hasClass("active")||(b.filter(".active").removeClass("active"),a.addClass("active"))}"comment"!==AJS.Meta.get("content-type")&&AJS.$(document).bind("initContextToolbars.Toolbar",function(b,a){var g=AJS.$(document),j=d("#page-layout-2"),c=d("#rte-button-pagelayout-2");
a.addCommand("mcePageLayoutsToolbar",function(){c.hasClass("active")?g.trigger("removeContextToolbarRow.Toolbar",{id:"pl2-toolbar",animate:!0}):(g.trigger("createContextToolbarRow.Toolbar",{id:"pl2-toolbar",buttons:Confluence.Editor.PageLayoutToolbar.Buttons,topToolbar:!0,animate:!0}),f(),a.execCommand("mcePageLayoutInitialize"));c.toggleClass("active")});c.click(function(k){k.preventDefault();j.hasClass("disabled")||a.execCommand("mcePageLayoutsToolbar",!1,null)});a.onNodeChange.add(function(a,b,
c){a=d(c).closest(".columnLayout");f(a)});for(var h=tinymce.plugins.PageLayoutPlugin.PageLayout2.Layouts,i=[],e=0,l=h.length;e<l;e++)(function(b){i.push(new Confluence.Editor.Toolbar.Components.Button({text:b.name,iconClass:"icon-fat pl2-layout-"+b.id,click:function(){a.execCommand("mcePageLayoutChangeSection",!1,{layout:b})}}))})(h[e]);Confluence.Editor.PageLayoutToolbar={Buttons:[new Confluence.Editor.Toolbar.Components.Group([new Confluence.Editor.Toolbar.Components.Button({triggerText:"Add section",
id:"add-layout-section",tooltip:"Add a new section below",iconClass:"pl2-layout-add-section",click:function(){a.execCommand("mcePageLayoutAddSection")}}),new Confluence.Editor.Toolbar.Components.Button({triggerText:"Remove section",id:"remove-layout-section",tooltip:"Remove the current section",iconClass:"pl2-layout-remove-section",click:function(){a.execCommand("mcePageLayoutRemoveSection")}})]),new Confluence.Editor.Toolbar.Components.Group([new Confluence.Editor.Toolbar.Components.Button({triggerText:"Move up",
id:"move-up-layout-section",tooltip:"Move section up",iconClass:"pl2-layout-move-section-up",click:function(){a.execCommand("mcePageLayoutMoveSectionUp")}}),new Confluence.Editor.Toolbar.Components.Button({triggerText:"Move down",id:"move-down-layout-section",tooltip:"Move section down",iconClass:"pl2-layout-move-section-down",click:function(){a.execCommand("mcePageLayoutMoveSectionDown")}})]),
new Confluence.Editor.Toolbar.Components.Group(i,{id:"pagelayout2-toolbar",text:"Apply layout",groupClass:"layouts"}),new Confluence.Editor.Toolbar.Components.Group([new Confluence.Editor.Toolbar.Components.Button({text:"Close toolbar",iconClass:"icon-close",click:function(){a.execCommand("mcePageLayoutsToolbar",!1,null)}})],{groupClass:"close"})],Events:[]}})})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-tasks:inline-tasks-editor', location = 'js/editor_plugin_src.js' */
(function(b){var c=/^\u200b?(\[)$/;AJS.bind("confluence.editor.registerHandlers",function(n,m){if(!AJS.Rte.Support.inlineTasks()){return}var k=m.handlerManager,j=m.ed,l=m.createHandler;k.registerHandler("]".charCodeAt(0),l(c,function(){j.plugins.lists.applyList("UL","OL","inline-task-list",{attributesOnItems:{"data-inline-task-id":""},placeholderText:"Type your task here, using \"@\" to assign to a user and \"//\" to select a due date"})},true))});function e(j){j.plugins.lists.applyList=_.bind(_.wrap(j.plugins.lists.applyList,function(k){k.apply(this,Array.prototype.slice.call(arguments,1));g(j)}),j.plugins.lists)}function g(j,l){if(!(tinymce.isIE8||tinymce.isIE11||tinymce.isGecko||tinymce.isWebKit)){return}var k=l||b(d(j));if(k.height()===0||tinymce.isIE8){k.append("&nbsp;");(tinymce.isWebKit||tinymce.isIE8)&&j.selection.setCursorLocation(k[0],0)}}function h(m,k){var j,n,l;if(tinymce.isGecko){l=k.getBoundingClientRect();j=m.pageX-(l.left+tinymce.DOM.getViewPort(tinymce.activeEditor.getWin()).x);n=m.pageY-(l.top+tinymce.DOM.getViewPort(tinymce.activeEditor.getWin()).y)}else{if(tinymce.isIE8){j=m.offsetX-k.offsetLeft;n=m.offsetY-k.offsetTop}else{j=m.offsetX;n=m.offsetY}}return j>=3&&j<=14&&n>=3&&n<=14}function i(j,m){var k=m.target;if(k.tagName!=="LI"){return}var l=j.dom.getParent(k,"ul,ol");if(l.tagName==="UL"&&j.dom.hasClass(l,"inline-task-list")){if(h(m,k)){if(j.dom.hasClass(k,"checked")){j.dom.removeClass(k,"checked")}else{j.dom.addClass(k,"checked")}}}}function d(k){var l=k.selection.getStart();var j=(l&&l.tagName&&l.tagName.toUpperCase()==="LI")?l:k.dom.getParent(l,"li");return j}function a(k,l){if(l.keyCode===tinymce.VK.ENTER&&!l.shiftKey){var j=d(k);if(j){var m=b(j);if(k.dom.hasClass(j.parentNode,"inline-task-list")){m.removeClass("checked").attr("data-inline-task-id","")}else{m.removeClass("checked").removeAttr("data-inline-task-id")}g(k,m)}}}function f(k,l){var j=d(k);if(j){var m=b(j);if(k.dom.hasClass(j.parentNode,"inline-task-list")){m.find("font").contents().unwrap()}}}tinymce.create("tinymce.plugins.ConfluenceTaskListPlugin",{init:function(j,k){e(j);j.onClick.add(i);j.onKeyUp.add(a);if(tinymce.isIE){j.onKeyUp.add(f)}},getInfo:function(){return{longname:"Confluence Task List Plugin",author:"Atlassian",authorurl:"http://www.atlassian.com",version:tinymce.majorVersion+"."+tinymce.minorVersion}}});tinymce.PluginManager.add("confluencetasklist",tinymce.plugins.ConfluenceTaskListPlugin);AJS.Editor.Adapter.addTinyMcePluginInit(function(j){j.plugins+=",confluencetasklist"})})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-tasks:inline-tasks-editor', location = 'js/inline-tasks-rte.js' */
(function(c){function a(e){var d=c(e).find("li[data-inline-task-id]");d.each(function(){var g=c(this),f=g.parent();if(!f.is("ul")){f.wrapInner('<ul class="inline-task-list"/>')}else{if(!f.hasClass("inline-task-list")){f.addClass("inline-task-list")}}})}function b(e){a(e);var g=AJS.Meta.get("content-type"),f=c(e).find("ul.inline-task-list"),d=f.find("> li");if(g=="comment"){d.removeClass("checked").removeAttr("data-inline-task-id");f.removeClass("inline-task-list")}else{d.attr("data-pasted-task","true")}}c(document).bind("postPaste",function(f,d,g){b(g.node)})})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-tasks:date-helper-js-resources', location = '/js/lib/lang/de.js' */
(function(a){if(typeof define==="function"&&define.amd){define(["moment"],a)}else{if(typeof exports==="object"){module.exports=a(require("../moment"))}else{a(window.moment)}}}(function(b){function a(e,d,c,g){var f={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[e+" Tage",e+" Tagen"],M:["ein Monat","einem Monat"],MM:[e+" Monate",e+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[e+" Jahre",e+" Jahren"]};return d?f[c][0]:f[c][1]}return b.lang("de",{months:"Januar_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Apr._Mai_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),longDateFormat:{LT:"H:mm [Uhr]",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[Heute um] LT",sameElse:"L",nextDay:"[Morgen um] LT",nextWeek:"dddd [um] LT",lastDay:"[Gestern um] LT",lastWeek:"[letzten] dddd [um] LT"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",m:a,mm:"%d Minuten",h:a,hh:"%d Stunden",d:a,dd:a,M:a,MM:a,y:a,yy:a},ordinal:"%d.",week:{dow:1,doy:4}})}));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-tasks:date-helper-js-resources', location = '/js/lib/lang/es.js' */
(function(a){if(typeof define==="function"&&define.amd){define(["moment"],a)}else{if(typeof exports==="object"){module.exports=a(require("../moment"))}else{a(window.moment)}}}(function(c){var b="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),a="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_");return c.lang("es",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(d,e){if(/-MMM-/.test(e)){return a[d.month()]}else{return b[d.month()]}},weekdays:"domingo_lunes_martes_miércoles_jueves_viernes_sábado".split("_"),weekdaysShort:"dom._lun._mar._mié._jue._vie._sáb.".split("_"),weekdaysMin:"Do_Lu_Ma_Mi_Ju_Vi_Sá".split("_"),longDateFormat:{LT:"H:mm",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY LT",LLLL:"dddd, D [de] MMMM [de] YYYY LT"},calendar:{sameDay:function(){return"[hoy a la"+((this.hours()!==1)?"s":"")+"] LT"},nextDay:function(){return"[mañana a la"+((this.hours()!==1)?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+((this.hours()!==1)?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+((this.hours()!==1)?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+((this.hours()!==1)?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un día",dd:"%d días",M:"un mes",MM:"%d meses",y:"un año",yy:"%d años"},ordinal:"%dº",week:{dow:1,doy:4}})}));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-tasks:date-helper-js-resources', location = '/js/lib/lang/fr.js' */
(function(a){if(typeof define==="function"&&define.amd){define(["moment"],a)}else{if(typeof exports==="object"){module.exports=a(require("../moment"))}else{a(window.moment)}}}(function(a){return a.lang("fr",{months:"janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre".split("_"),monthsShort:"janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_"),weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[Aujourd'hui à] LT",nextDay:"[Demain à] LT",nextWeek:"dddd [à] LT",lastDay:"[Hier à] LT",lastWeek:"dddd [dernier à] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},ordinal:function(b){return b+(b===1?"er":"")},week:{dow:1,doy:4}})}));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-tasks:date-helper-js-resources', location = '/js/lib/lang/ja.js' */
(function(a){if(typeof define==="function"&&define.amd){define(["moment"],a)}else{if(typeof exports==="object"){module.exports=a(require("../moment"))}else{a(window.moment)}}}(function(a){return a.lang("ja",{months:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"日曜日_月曜日_火曜日_水曜日_木曜日_金曜日_土曜日".split("_"),weekdaysShort:"日_月_火_水_木_金_土".split("_"),weekdaysMin:"日_月_火_水_木_金_土".split("_"),longDateFormat:{LT:"Ah時m分",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日LT",LLLL:"YYYY年M月D日LT dddd"},meridiem:function(b,d,c){if(b<12){return"午前"}else{return"午後"}},calendar:{sameDay:"[今日] LT",nextDay:"[明日] LT",nextWeek:"[来週]dddd LT",lastDay:"[昨日] LT",lastWeek:"[前週]dddd LT",sameElse:"L"},relativeTime:{future:"%s後",past:"%s前",s:"数秒",m:"1分",mm:"%d分",h:"1時間",hh:"%d時間",d:"1日",dd:"%d日",M:"1ヶ月",MM:"%dヶ月",y:"1年",yy:"%d年"}})}));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-tasks:date-helper-js-resources', location = '/js/lib/lang/en-gb.js' */
(function(a){if(typeof define==="function"&&define.amd){define(["moment"],a)}else{if(typeof exports==="object"){module.exports=a(require("../moment"))}else{a(window.moment)}}}(function(a){return a.lang("en-gb",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinal:function(e){var c=e%10,d=(~~(e%100/10)===1)?"th":(c===1)?"st":(c===2)?"nd":(c===3)?"rd":"th";return e+d},week:{dow:1,doy:4}})}));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-tasks:date-helper-js-resources', location = '/js/inline-tasks-util.js' */
(function(a){var b=window.Confluence||{};b.InlineTasks=b.InlineTasks||{};b.InlineTasks.Util={NODE_TYPE:{ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12},KEY:{BACKSPACE:8,SPACE:32,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,INS:45,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46,META:91},addContentEditableIfApplicable:function(d){var c=a(d);c.attr({contenteditable:false,"class":"non-editable",onselectstart:"return false;"});tinymce.isIE&&c.attr({contenteditable:true,unselectable:"on",oncontrolselect:"return false;"})}}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-tasks:date-helper-js-resources', location = '/js/dateutil.js' */
var Confluence=window.Confluence||{};Confluence.InlineTasks=Confluence.InlineTasks||{};Confluence.InlineTasks.DateUtil=(function(b,a){a={PATTERN_INSERTING:"DD-MM-YYYY",PATTERN_LOZENGE:"DD MMM YYYY",PATTERN_INSIDE_TIME_ELE:"YYYY-MM-DD",convertDateIntoHtml:function(e,f,g,h){if(!h){h=a.PATTERN_INSERTING}if(!g){g=""}if(!f){f="<time>"}var c=b("<div>"),d="",i=e.format(h);if(f.indexOf("time")>=0){d=b(f,{datetime:e.format(a.PATTERN_INSIDE_TIME_ELE)});Confluence.InlineTasks.Util.addContentEditableIfApplicable(d);g&&d.attr("class",g);d.text(i)}else{d=b(f);g&&d.attr("class",g);d.text(i)}c.append(d);return c.html()},insertDateIntoCurrentCursor:function(f,d,l,k,m){var i=tinyMCE.activeEditor,j=a.convertDateIntoHtml(f,d,l,k),e=b(j,i.getDoc())[0],g=tinymce.confluence.NodeUtils.replaceSelection(e);if(m){i.execCommand("mceInsertContent",false,m,{skip_undo:true})}var c=b(i.selection.getRng(true).startContainer).closest("li[data-inline-task-id]").length?"task":"page";var h={context:c,trigger:"character"};AJS.trigger("analyticsEvent",{name:"confluence-spaces.date.added",data:h});return g},parse:function(d,e){if(!e){e=a.PATTERN_INSIDE_TIME_ELE}var c=moment(b.trim(d),e,true);return c.isValid()?c:null},format:function(c,d){if(!d){d=a.PATTERN_INSIDE_TIME_ELE}return c?c.format(d):null},guessPartialDate:function(c,g){if(c==null){return null}c=b.trim(c.replace(/[-\.\/]/g,"-"));var f=c.split("-"),e=moment().format(g).split("-");for(var d=0;d<3;d++){if(!f[d]){f[d]=e[d]}if(/^\d$/.test(f[d])){f[d]="0"+f[d]}}return a.parse(f.join("-"),g)},datepicker:{POSITION_ABOVE:true,POSITION_BELOW:false,POSITION_RIGHT:true,POSITION_LEFT:false,dropDownStillFitsVertically:function(d,e,c){if(d===this.POSITION_ABOVE){return e.above>=c}return e.below>=c},dropDownStillFitsHorizontally:function(d,e,c){if(d===this.POSITION_RIGHT){return e.right>=c}return e.left>=c},getPreferredHorizontalPosition:function(d,c){if(d.right>=c){return this.POSITION_RIGHT}else{if(d.left>=c){return this.POSITION_LEFT}}return d.right>d.left?this.POSITION_RIGHT:this.POSITION_LEFT},getPreferredVerticalPosition:function(d,c){if(d.below>=c){return this.POSITION_BELOW}else{if(d.above>=c){return this.POSITION_ABOVE}}return d.below>d.above?this.POSITION_BELOW:this.POSITION_ABOVE},calculateDatepickerPosition:function(c){var d=this;return function(f,o){var l,p,r,i,j,s=16,u=0,e,h,k,m,n=AJS.Rte.getEditorFrame();AJS.Position.spaceLeftRight=function(z,y){var x=y.position().left;return{left:x,right:b(z).width()-x}};l=AJS.Position.spaceAboveBelow(n,c);p=AJS.Position.spaceLeftRight(n,c);j=AJS.Rte.Content.offset(c);e=f.outerHeight(true);h=f.outerWidth(true);k=e+s;m=h+u;var w=d.POSITION_BELOW;var v=d.POSITION_RIGHT;if(w){if(!d.dropDownStillFitsVertically(w,l,k)){w=null}}if(!w){w=d.getPreferredVerticalPosition(l,k)}if(v){if(!d.dropDownStillFitsHorizontally(v,p,k)){v=null}}v=d.getPreferredHorizontalPosition(p,m);if(w===d.POSITION_ABOVE){r=j.top-e-s}else{r=j.top+c.height()+s}if(v===d.POSITION_RIGHT){i=j.left-u}else{i=(j.left+c.outerWidth())-h}var t={top:r,left:i};var g=(v==d.POSITION_RIGHT)?c.outerWidth()/2:h-c.outerWidth()/2;if((g<0)||(g>h)){g=(h/10)}var q={left:g,top:(w===d.POSITION_ABOVE)?e:-s/2};return{displayAbove:w,popupCss:t,arrowCss:q}}},getHintTextOfDatePicker:function(c){return c?"Select a due date for this task.":"Select a date."},create:function(k){var j=k.$attachTo,d=k.$positionTo,c=k.startDate,i=k.onSelect,e=k.isSetDueDate;var h=b("<input>").attr("type","date").addClass("aui-date-picker").css("display","none");var g=h.datePicker({overrideBrowserDefault:true,dateFormat:"yy-mm-dd",languageCode:AJS.Meta.get("user-locale")&&AJS.Meta.get("user-locale").split("_")[0],position:this.calculateDatepickerPosition(d),onSelect:function(l){i(a.parse(l));f()},hint:this.getHintTextOfDatePicker(e)});var f=function(){g&&g.destroyPolyfill&&g.destroyPolyfill();h&&h.remove();b(".aui-datepicker-dialog").remove();g=null;h=null};g.show();g.setDate(a.format(c));b(".aui-datepicker-dialog .aui-datepicker-hint").addClass(e?"set-duedate":"set-date");j.before(h);return{die:function(){f()},show:function(){g.show()},hide:function(){g.hide()},getContainer:function(){return h},setDate:function(m){var l=a.guessPartialDate(m,a.PATTERN_INSERTING);AJS.debug("Set date: "+m);l&&g.setDate(a.format(l))},placeDatePicker:function(){var m=AJS.InlineDialog.current;var l=m&&m.popup;l&&l.refresh()}}}}};return a}(AJS.$,Confluence.InlineTasks.DateUtil||{}));AJS.toInit(function(){var b=function(g,d,f){if(d&&d.toLowerCase()==="en_us"){return"MM"+f+"DD"+f+"YYYY"}var e=_.uniq(g.replace(/[^MDY]/g,"").split(""));return e.join(f).replace("D","DD").replace("M","MM").replace("Y","YYYY")};var c=AJS.Meta.get("user-locale");if(c){moment.lang(c.split("_")[0].toLowerCase())}var a=AJS.Meta.get("user-date-pattern");if(a){Confluence.InlineTasks.DateUtil.PATTERN_LOZENGE=a.toUpperCase();Confluence.InlineTasks.DateUtil.PATTERN_INSERTING=b(a.toUpperCase(),c,"-");Confluence.InlineTasks.DateUtil.PATTERN_INSERTING_ALTERNATE=b(a.toUpperCase(),c,"/")}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-tasks:editor-autocomplete-date-js', location = '/js/editor-plugin/date-autocomplete-help-dialog.js' */
AJS.toInit(function(){if(!(Confluence.KeyboardShortcuts&&Confluence.KeyboardShortcuts.Autoformat)){return}Confluence.KeyboardShortcuts.Autoformat.push({action:"//",context:"autoformat.autocomplete",description:"Date"})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-tasks:editor-autocomplete-date-js', location = '/js/editor-plugin/autocomplete-manager.js' */
(function(d){var e=window.Confluence||{};e.Editor=e.Editor||{};e.Editor.AutoComplete=e.Editor.AutoComplete||{};var b=e.InlineTasks.Util.KEY,a=e.InlineTasks.DateUtil,c=e.Editor.AutoComplete;c.SETTING_DEFAULT={leadingChar:"",isDataValid:function(f){return false},backWords:0,onBeforeDie:function(){},onAfterStart:function(){},onScroll:function(){}};c.Manager=function(f){this.ed=AJS.Rte.getEditor();this.settings=d.extend({},c.SETTING_DEFAULT,f);this.log=AJS.debug;this.control=null};c.Manager.prototype={start:function(f){this.log("startAutoComplete - Started");var g=d.extend({},this.settings,f);this.control=e.Editor.Autocompleter.Control(this.ed,g);if(!this.control){return false}this.attachEventsToControl();g.onAfterStart&&g.onAfterStart({date:f.date,isTriggerFromOrphan:f.isTriggerFromOrphan?true:false});return true},attachEventsToControl:function(){var i=this,l=i.control,h=i.log,g=i.settings;if(typeof this.settings.onBeforeDie==="function"){var k=this.control.die;this.control.die=function(){i.settings.onBeforeDie.apply(i.control,arguments);if(i.dateInserted()){k.apply(i.control,[true]);AJS.trigger("analyticsEvent",{name:"confluence-spaces.tasks.daterecognition.killed"})}else{k.apply(i.control,arguments)}}}var f=_.bind(_.throttle(i.settings.onScroll,40),this);var j={onBeforeKey:function(m,n){if(m.keyCode!==b.ESCAPE&&m.keyCode!==b.ENTER){i.control&&i.control.getContainer().addClass("isDirty")}if(m.keyCode===b.DOWN||m.keyCode===b.UP||m.keyCode===b.ENTER){tinymce.dom.Event.cancel(m);return false}if(m.keyCode===b.ESCAPE||m.keyCode===b.TAB||m.keyCode===b.BACKSPACE&&!n){h("autoCompleteControl.onBeforeKey - killing autoCompleteControl");this.die(m.keyCode===b.BACKSPACE);return false}return true},onKeyPress:function(p,q){var n=AJS.$.browser.msie?p.keyCode:p.which;if(p.keyCode===b.ENTER){tinymce.dom.Event.cancel(p);return false}var o=String.fromCharCode(n),m=AJS.indexOf(this.settings.endChars,o);if(m>=0){h("autoCompleteControl.onKeyPress - caught autocomplete-closing char - character");l.die()}return true},onAfterKey:function(o,p){var n=d("#autocomplete-trigger",i.control.getContainer()),m=n.text();if(n.length>0&&m!==i.settings.leadingChar){h("after","dying because of: trigger text is modified");i.reset();return false}if(o.keyCode===b.ENTER){if(g.isDataValid(p)){l.update(p)}else{h("autoCompleteControl.onAfterKey - closing autocomplete due to invalid data - "+p);l.die(false)}return false}if(i.dateInserted()&&(p.length>10)&&(!a.parse(p,[a.PATTERN_INSERTING,a.PATTERN_INSERTING_ALTERNATE]))){i.reset();return false}if(o.keyCode===b.SPACE){i.reset();return false}return true},onDeath:function(){i.reset()},onScroll:function(){if(!i.isAlive()){return}f()}};d.extend(l,j)},isAlive:function(){return this.control&&!this.control.dying},reset:function(){if(!this.control){return}this.control.die();this.control=null},dateInserted:function(f){if(f===true){return this.control.getContainer().addClass("hasDateInserted")}else{if(f===false){return this.control.getContainer().removeClass("hasDateInserted")}else{return this.control.getContainer().hasClass("hasDateInserted")}}},dirty:function(f){if(f===true){return this.control.getContainer().addClass("isDirty")}else{return this.control.getContainer().hasClass("isDirty")}},reattach:function(){var f=e.Editor.Autocompleter.Control.removeOrphanedControl();if(f&&f.leadingChar===this.settings.leadingChar){this.reset();return this.start({backWords:1,isTriggerFromOrphan:true})}return false}}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-tasks:editor-autocomplete-date-js', location = '/js/editor-plugin/date-autocomplete.js' */
(function(h,e){var q="dateautocomplete",m="tinymce.plugins.DateAutocomplete",p="mceConfInsertDateAutocomplete",k="//";var r=Confluence.InlineTasks.Util,n=r.NODE_TYPE,d=r.KEY,a=Confluence.InlineTasks.DateUtil,g=null,o=null,b=false,i=e.dom.TreeWalker;var j={initDateAutoCompleteObject:function(s){if(!Confluence.Editor.Autocompleter){Confluence.Editor.Autocompleter=e.confluence.Autocompleter}Confluence.Editor.Autocompleter.Settings[k]={ch:k,endChars:[],update:function(w,v){o.picker.die();var u=(v==a.PATTERN_INSERTING.toLowerCase())?moment():a.guessPartialDate(v,a.PATTERN_INSERTING);u&&a.insertDateIntoCurrentCursor(u,"<time>","",a.PATTERN_LOZENGE,"&nbsp;");if(o.dateInserted()){AJS.trigger("analyticsEvent",{name:"confluence-spaces.tasks.daterecognition.used"})}o.reset();s.undoManager.add()}};var t={leadingChar:k,isDataValid:function(u){return !o.dirty()||a.guessPartialDate(u,a.PATTERN_INSERTING)!=null},onBeforeDie:function(){o.picker&&o.picker.die();if(o.control){var u=h(o.control.getContainer());if(!o.dirty()){u.find("#autocomplete-search-text").remove()}}},onAfterStart:function(v){if(v&&v.date){j.fillPlaceholderDateAutoComplete(s,v.date,true);o.dirty(true);o.dateInserted(true)}else{if(v&&!v.isTriggerFromOrphan){j.fillPlaceholderDateAutoComplete(s,a.PATTERN_INSERTING.toLowerCase(),false);o.dateInserted(false)}}var u=o.control.text();var w=a.guessPartialDate(u,a.PATTERN_INSERTING)||moment();j.bindDatePickerToAutoComplete(w)},onScroll:function(){o.picker&&o.picker.placeDatePicker()}};o=new Confluence.Editor.AutoComplete.Manager(t)},activateDateAutocomplete:function(u,t){if(!o.isAlive()){var s=o.start(t);if(!s){g.execCommand("mceInsertContent",false,k,{skip_undo:true});return false}}},bindDatePickerToAutoComplete:function(v){var s=o.control&&o.control.getContainer();if(!s.length){return}s.addClass("date-autocomplete");s.find("#autocomplete-search-text span").addClass("inserting");var u=function(w){o.control.update(w.format(a.PATTERN_INSERTING))},t=j.isInsideTaskAndFirstTimeNode(s);o.picker=a.datepicker.create({$attachTo:s,$positionTo:s,startDate:v,onSelect:u,isSetDueDate:t})},fillPlaceholderDateAutoComplete:function(t,w,v){var s=o.control.getContainer().find("#autocomplete-search-text span");s.text(AJS.Rte.HIDDEN_CHAR+w);var u=t.dom.createRng();u.setStart(s[0].firstChild,1);u.setEnd(s[0].firstChild,w.length+1);v&&u.collapse(false);t.selection.setRng(u)},autocompleteDoubleSlash:function(x,w){var u=w.handlerManager,t=w.ed,v=w.createHandler;var s=v(/(?:\s|\xA0|^|\ufeff|\u200b)(\/)$/,function(){t.execCommand(p,false,{},{skip_undo:true})},true,"#autocomplete");u.registerHandler("/".charCodeAt(0),s)},registerTriggerDoubleSlash:function(s){s.addCommand(p,j.activateDateAutocomplete);AJS.bind("confluence.editor.registerHandlers",this.autocompleteDoubleSlash)},isTimeNode:function(s){return s&&s.nodeType===n.ELEMENT_NODE&&s.tagName.toLowerCase()==="time"},getTimeNodeAtCursor:function(s){if(!s){s=g}var t=s.selection.getNode();if(j.isTimeNode(t)){return t}t=s.selection.getStart();if(j.isTimeNode(t)){return t}t=s.selection.getEnd();if(j.isTimeNode(t)){return t}},makeTimeNodesUnEditable:function(s){s.each(function(){var t=h(this);if(h.trim(t.text())===""){t.remove()}e.isWebKit&&t.remove("br.Apple-interchange-newline");r.addContentEditableIfApplicable(this)})},wrapTimeNodesWithHiddenChar:function(s){s.each(function(){var t=h(this);if(!this.previousSibling||this.previousSibling.nodeType!==n.TEXT_NODE||this.previousSibling.nodeValue===""){t.before(AJS.Rte.HIDDEN_CHAR)}if(!this.nextSibling||this.nextSibling.nodeType!==n.TEXT_NODE||this.previousSibling.nodeValue===""){t.after(AJS.Rte.HIDDEN_CHAR)}})},putCursorAtEdge:function(t,v,s){s=!!s;if(s){if(!v.nextSibling||v.nextSibling.nodeType!==n.TEXT_NODE){h(v).after(t.dom.doc.createTextNode(""))}}else{if(!v.previousSibling||v.previousSibling.nodeType!==n.TEXT_NODE){h(v).before(t.dom.doc.createTextNode(""))}}var u=t.selection.dom.createRng();u.selectNode(s?v.nextSibling:v.previousSibling);u.collapse(s);t.selection.setRng(u)},findFirstTimeNodeInClosestBlock:function(t,y,v){var x=new i(y,t.getBody());var w=y,u=0;do{if(u==1&&j.isTimeNode(y)){return y}var s=v?y.previousSibling:y.nextSibling;if(y!==w&&s&&(t.dom.isBlock(y)||t.dom.isBlock(s))){u++}}while((y=v?x.next():x.prev())&&u<2)},findFirstTimeNodeNearby:function(s,w,t){var v=w;var u=new i(w,s.getBody());do{if(j.isTimeNode(w)){return w}if(s.dom.isBlock(w)||(w!==v&&w.nodeType===n.TEXT_NODE&&w.nodeValue!=="")){return}}while(w=t?u.next():u.prev())},convertInvalidTimeNodeToPlainText:function(s){s.each(function(){var v=h(this);var t=v.attr("datetime");var u=a.parse(t);if(!u){v.before(v.text());v.remove()}})},isInsideTaskAndFirstTimeNode:function(t){var s=h(t),u=s.closest("ul.inline-task-list > li[data-inline-task-id]");if(!u.length){return false}return u.find("time, span.date-autocomplete")[0]===s[0]}};var c={handleRemoveDateLozenge:function(t,z){var y=z.keyCode;if(y!==d.BACKSPACE&&y!==d.DELETE){return}var w=(y===d.DELETE),s=t.selection.getRng(true),u=s.startContainer,v=u;if(u.nodeType==n.TEXT_NODE&&(w?s.startOffset!=u.nodeValue.length:s.startOffset!=0)){return}if(u.nodeType===n.ELEMENT_NODE){if(w){v=(u.childNodes.length===s.startOffset)?u:u.childNodes.item(s.startOffset)}else{v=(s.startOffset===0)?u:u.childNodes.item(s.startOffset-1)}}var x=j.findFirstTimeNodeNearby(t,v,w);x&&t.dom.remove(x)},handleClickingDateLozenge:function(x,A){var u=h(A.target);if(!u.is("time")){return}var s=(u.closest("li[data-inline-task-id]").length)?"task":"page";var v={mode:"editor",context:s};AJS.trigger("analyticsEvent",{name:"confluence-spaces.date.clicked",data:v});var D=u.closest("body");var z=function(){AJS.Rte.unbindScroll("date-lozenge-date-picker");y.die()};D.one("keydown click",z);var C=function(F){var G=F.format(a.PATTERN_INSIDE_TIME_ELE);var E=F.format(a.PATTERN_LOZENGE);if(G!==u.attr("datetime")){var H={context:s};AJS.trigger("analyticsEvent",{name:"confluence-spaces.date.changed",data:H})}u.attr("datetime",G);u.text(E);D.unbind("keydown click",z)};var t=a.parse(u.attr("datetime")),w=j.isInsideTaskAndFirstTimeNode(u),y=a.datepicker.create({$attachTo:u,$positionTo:u,startDate:t,onSelect:C,isSetDueDate:w});var B=_.bind(_.throttle(function(){if(y&&AJS.Rte.isAnyPartShown(u)){y.placeDatePicker()}else{z()}},40),this);AJS.Rte.bindScroll("date-lozenge-date-picker",B)},handleTypingDate:function(t,v){var u=v.keyCode;if(u===d.UP||u===d.DOWN||u===d.LEFT||u===d.RIGHT||u===d.HOME||u===d.END||u===d.PAGEDOWN||u===d.PAGEUP||v.metaKey||v.ctrlKey||v.altKey){return}if(o.control&&o.picker){var s=o.control.text();o.picker.setDate(s)}},handleOnLoadContent:function(s){var u=h(s.dom.doc),t=u.find("time");j.makeTimeNodesUnEditable(t);j.wrapTimeNodesWithHiddenChar(t)},handlePostPaste:function(t,s,u){j.convertInvalidTimeNodeToPlainText(h(u.node).find("time"))},handlePostPasteContent:function(u,s,v){var t=h(v.node).find("time");j.makeTimeNodesUnEditable(t)},handlePrePasteContent:function(t,s,u){if(j.getTimeNodeAtCursor(g)){u.content="";return false}},fixWhenUpDownNavOnList:function(t,z){var v=z.keyCode;if(v!==d.UP&&v!==d.DOWN){return}var s=t.selection.getRng(true),u=s.startContainer,w=u,x=v===d.DOWN;if(u.nodeType===n.ELEMENT_NODE){if(x){w=(u.childNodes.length===s.startOffset)?u:u.childNodes.item(s.startOffset)}else{w=(s.startOffset===0)?u:u.childNodes.item(s.startOffset-1)}}var y=j.findFirstTimeNodeInClosestBlock(t,w,x);if(y){j.wrapTimeNodesWithHiddenChar(h(y))}},preventCursorInsideDateLozenge:function(t,s,v){var u=(v.nodeType===n.TEXT_NODE)?v.parentNode:v;if(j.isTimeNode(u)){if(b||t.selection.getRng().startOffset>1){j.putCursorAtEdge(t,u,true)}else{j.putCursorAtEdge(t,u,false)}}},handleUndoRedo:function(){o&&o.reattach()}};var f={init:function(s){j.initDateAutoCompleteObject(s);j.registerTriggerDoubleSlash(s);g=s;s.onContextMenu.add(function(){o.reset()});s.onSetContent.add(c.handleOnLoadContent);s.onClick.add(c.handleClickingDateLozenge);s.onKeyUp.add(c.handleTypingDate);if(e.isWebKit){s.onKeyDown.add(c.fixWhenUpDownNavOnList);s.onInit.add(function(){h(document).bind("postPaste",c.handlePostPasteContent)});s.onRemove.add(function(){h(document).unbind("postPaste",c.handlePostPasteContent)})}s.onKeyUp.add(function(y,A){b=(A.keyCode===d.RIGHT);var x=y.selection.getRng(true);var w=x.commonAncestorContainer;var z=!!w&&w.data;if(!!z&&!AJS.$(w).closest("pre,.text-placeholder").length){var B=String.prototype.slice.apply(z,[-11]);if((A.keyCode>=48&&A.keyCode<=57)||(A.keyCode>=96&&A.keyCode<=105)){var t=/(^| )\d{2}[\/\-]\d{2}[\/\-]\d{4}$/;var v=String.prototype.slice.apply(z,[-10]);if(t.test(z)&&a.parse(v,[a.PATTERN_INSERTING,a.PATTERN_INSERTING_ALTERNATE])){var u=x.commonAncestorContainer;x.setStart(u,x.endOffset-v.length);y.undoManager.add();y.undoManager.beforeChange();y.selection.setRng(x);y.execCommand("mceConfInsertDateAutocomplete",false,{date:v},{skip_undo:true});AJS.trigger("analyticsEvent",{name:"confluence-spaces.tasks.daterecognition.triggered"})}}}});if(e.isGecko){s.onKeyDown.add(c.handleRemoveDateLozenge);s.onInit.add(function(){h(document).bind("prePaste",c.handlePrePasteContent)});s.onRemove.add(function(){h(document).unbind("prePaste",c.handlePrePasteContent)})}if(e.isWebKit||e.isGecko){s.onNodeChange.add(c.preventCursorInsideDateLozenge)}s.onUndo.add(c.handleUndoRedo);s.onRedo.add(c.handleUndoRedo);s.onInit.add(function(){h(document).bind("postPaste",c.handlePostPaste)});s.onRemove.add(function(){h(document).unbind("postPaste",c.handlePostPaste);AJS.unbind("confluence.editor.registerHandlers",j.autocompleteDoubleSlash)})},getInfo:function(){return{longname:"Insert Date Autocomplete",author:"Atlassian",authorurl:"http://www.atlassian.com",version:e.majorVersion+"."+e.minorVersion}}};function l(){e.create(m,f);e.PluginManager.add(q,e.plugins.DateAutocomplete);AJS.Rte.BootstrapManager.addTinyMcePluginInit(function(s){s.plugins+=","+q})}l()})(AJS.$,tinymce);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.mxgraph.confluence.plugins.diagramly:drawio-rte', location = 'templates/soy/dialogs.soy' */
// This file was automatically generated from dialogs.soy.
// Please don't edit this file by hand.

if (typeof diagramlySoy == 'undefined') { var diagramlySoy = {}; }
if (typeof diagramlySoy.macro == 'undefined') { diagramlySoy.macro = {}; }
if (typeof diagramlySoy.macro.dialog == 'undefined') { diagramlySoy.macro.dialog = {}; }


diagramlySoy.macro.dialog.searchDialog = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="diagramly-search-dialog" id="diagramly-search-dialog"><form name="diagramly-search-form" class="aui search-form"><fieldset class="search-input"><input name="diagramly-search-field" class="text" style="max-width :450px;margin-right : 10px" type="text" size="50"/><!-- <select name="diagramly-search-space" class="diagramly-space-select select"><option value="">', soy.$$escapeHtml("All spaces"), '</option></select>--><button type="submit" class="button submit">', soy.$$escapeHtml("Search"), '</button></fieldset><div class="description">', soy.$$escapeHtml("Enter the name of a diagram"), '</div></form><div class="diagramly-search-results"></div></div>');
  return opt_sb ? '' : output.toString();
};


diagramlySoy.macro.dialog.importDialog = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="diagramly-import-dialog" id="diagramly-import-dialog"><form id="diagramly-import-form" name="diagramly-import-form" class="aui import-form" method="post" action="', soy.$$escapeHtml(opt_data.url), '" enctype="multipart/form-data"><fieldset class="import-input"><input name="diagramly-import-field" id="diagramly-import-field" class="import-text" type="file" size="50"/></fieldset><div class="description">', soy.$$escapeHtml("Select a Visio file (.vdx)"), '</div><div class="spinner"></div></form></div>');
  return opt_sb ? '' : output.toString();
};


diagramlySoy.macro.dialog.searchResults = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<table class="drawio-results-table"><thead><tr class="drawio-results-header"><th class="drawio-results-column-diagramname">', soy.$$escapeHtml("Diagram"), '</th><th class="drawio-results-column-spacename">', soy.$$escapeHtml("Space name"), '</th><th class="drawio-results-column-lastmodified">', soy.$$escapeHtml("Last modified"), '</th></tr></thead><tbody>');
  var diagramList24 = opt_data.diagrams;
  var diagramListLen24 = diagramList24.length;
  if (diagramListLen24 > 0) {
    for (var diagramIndex24 = 0; diagramIndex24 < diagramListLen24; diagramIndex24++) {
      var diagramData24 = diagramList24[diagramIndex24];
      output.append('<tr data-attachment-id="', soy.$$escapeHtml(diagramData24.attachmentId), '" data-name="', soy.$$escapeHtml(diagramData24.name), '" data-revision="', soy.$$escapeHtml(diagramData24.revision), '" ><td class="drawio-results-column-diagramname">', soy.$$escapeHtml(diagramData24.name), '</td><td class="drawio-results-column-spacename">', soy.$$escapeHtml(diagramData24.spaceName), '</td><td class="drawio-results-column-lastmodified">', soy.$$escapeHtml(diagramData24.lastModified), '</td></tr>');
    }
  } else {
    output.append('<tr data-empty="true"><td>', soy.$$escapeHtml("drawio.search.noResults"), '</td></tr>');
  }
  output.append('</tbody></table>');
  return opt_sb ? '' : output.toString();
};


diagramlySoy.macro.dialog.spinner = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="diagramly-results-spinner"></div>');
  return opt_sb ? '' : output.toString();
};


diagramlySoy.macro.dialog.errorMessage = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="aui-message error shadowed"><span class="aui-icon icon-error"></span><span>', soy.$$escapeHtml(opt_data.message), '</span></div>');
  return opt_sb ? '' : output.toString();
};


diagramlySoy.macro.dialog.newDiagramWizard = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="diagramly-blueprint-list" ><div class="diagramly-blueprint-list-item-wrapper" ><div id="blank" class="diagramly-blueprint-list-item"></div><span>', soy.$$escapeHtml("Blank"), '</span></div><div style="margin-top : 35px;margin-bottom : 25px; width : 100%; height : 1px; border : 1px solid #c5c5c5;"></div><div  class="diagramly-blueprint-list-item-wrapper" ><img id="search" class="diagramly-blueprint-list-item" height="80px" length="80px" src="', soy.$$escapeHtml(opt_data.imageUrlBase), '/search.png"></img><span>', soy.$$escapeHtml("Search"), '</span></div>');
  return opt_sb ? '' : output.toString();
};


diagramlySoy.macro.dialog.newDiagram = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div id="drawio-newdiagram-panel" class="drawio-newdiagram-panel" ><div class="drawio-list" ><div class="drawio-list-item"><div style="display:none;" >blank</div></div><span>', soy.$$escapeHtml("Blank"), '</span></div><div class="drawio-separator"></div><div >', soy.$$escapeHtml("Recent diagrams"), ' :</div><div class="drawio-search-results"></div></div>');
  return opt_sb ? '' : output.toString();
};


diagramlySoy.macro.dialog.diagramThumbnails = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div>');
  var diagramList66 = opt_data.diagrams;
  var diagramListLen66 = diagramList66.length;
  for (var diagramIndex66 = 0; diagramIndex66 < diagramListLen66; diagramIndex66++) {
    var diagramData66 = diagramList66[diagramIndex66];
    output.append('<div class="drawio-list" ><div class="drawio-list-item drawio-thumbnail" style="background-image:url(\'', soy.$$escapeHtml(opt_data.downloadPath), '/', soy.$$escapeHtml(diagramData66.pageId), '/', soy.$$escapeHtml(diagramData66.imageName), '\')"><div style="display:none;" >diagramName=', soy.$$escapeHtml(diagramData66.name), '</div><div style="display:none;" >', soy.$$escapeHtml(diagramData66.pageId), '</div><div style="display:none;" >', soy.$$escapeHtml(diagramData66.revision), '</div><div style="display:none;" >', soy.$$escapeHtml(diagramData66.mimeType), '</div></div><span style="word-wrap : break-word">', soy.$$escapeHtml(diagramData66.name), '</span></div>');
  }
  output.append('</div>');
  return opt_sb ? '' : output.toString();
};


diagramlySoy.macro.dialog.templateThumbnails = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div>');
  var templateNameList88 = opt_data.templateNames;
  var templateNameListLen88 = templateNameList88.length;
  for (var templateNameIndex88 = 0; templateNameIndex88 < templateNameListLen88; templateNameIndex88++) {
    var templateNameData88 = templateNameList88[templateNameIndex88];
    output.append('<div class="drawio-list" ><div class="drawio-list-item drawio-thumbnail" style="background-image:url(\'', soy.$$escapeHtml(opt_data.downloadPath), '/', soy.$$escapeHtml(templateNameData88.name), '.png\')"><div style="display:none;" >templateUrl=', soy.$$escapeHtml(templateNameData88.fullDownloadPath), '</div></div><span class="description" style="text-transform:capitalize;">', soy.$$escapeHtml(templateNameData88.displayName), '</span></div>');
  }
  output.append('</div>');
  return opt_sb ? '' : output.toString();
};


diagramlySoy.macro.dialog.macroSettings = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<form action="#" method="post" name="drawio-macro-settings"><fieldset style="border: 3px solid #F0F0F0;border-radius : 3px"><legend style="text-align: center;">', soy.$$escapeHtml("Size"), '</legend><div style="margin : 5px;"><label for="drawio-macro-width">', soy.$$escapeHtml("Width"), ' : </label><input id="drawio-macro-width" name="drawio-macro-width" size="4" type="text" value="', soy.$$escapeHtml(opt_data.settings.width), '"/></div></fieldset><div style="padding-top : 20px;"></div><fieldset style="border: 3px solid #F0F0F0;border-radius : 3px"><legend style="text-align: center;">', soy.$$escapeHtml("Options"), '</legend><div style="margin : 5px;"><label for="drawio-macro-border">', soy.$$escapeHtml("Border"), ' </label><input id="drawio-macro-border" name="drawio-macro-border" maxlength="5" size="5" type="checkbox" ', (opt_data.settings.border == true) ? 'checked ' : '', '/>&nbsp &nbsp<label for="drawio-macro-viewerToolbar">', soy.$$escapeHtml("Toolbar"), ' </label><input id="drawio-macro-viewerToolbar" name="drawio-macro-viewerToolbar" maxlength="5" size="5" type="checkbox" ', (opt_data.settings.viewerToolbar == true) ? 'checked ' : '', '/></div></fieldset></form>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.mxgraph.confluence.plugins.diagramly:drawio-rte', location = 'js/DiagramlyUtils.js' */
AJS.bind("init.rte",function(a){(function(b){window.MXGRAPH=window.MXGRAPH||{};MXGRAPH.confluence=MXGRAPH.confluence||{};MXGRAPH.confluence.serviceEndpoint=AJS.format("{0}/rest/drawio/1.0",AJS.Confluence.getContextPath());MXGRAPH.confluence.resourceRoot=AJS.Confluence.getContextPath()+"/download/resources/com.mxgraph.confluence.plugins.diagramly:drawio-editor/";MXGRAPH.confluence.templatesUrlRoot=MXGRAPH.confluence.resourceRoot+"templates/diagramtemplates";MXGRAPH.confluence.parseErrorMessage=function(f){if(f.responseText!=null){try{var c=b.parseJSON(f.responseText);return(c.message!=null)?c.message:f.responseText}catch(d){return f.responseText}}return""};MXGRAPH.confluence.urlParams=(function(e){var d=new Object();var c=e.lastIndexOf("?");if(c>0){var g=e.substring(c+1).split("&");for(var f=0;f<g.length;f++){c=g[f].indexOf("=");if(c>0){d[g[f].substring(0,c)]=g[f].substring(c+1)}}}return d})(window.location.href);MXGRAPH.confluence.getMacroParamsObject=function(c,d){var f={};var e=AJS.$(c).attr("data-macro-parameters");e=e||"";var g=e.split("|");AJS.$.each(g,function(i,l){var h=l.indexOf("=");if(h>0){var j=l.substring(0,h);var k=l.substring(h+1);if(k=="true"){k=true}if(k=="false"){k=false}f[j]=k}});if(d){defaults=MXGRAPH.confluence.getDefaultMacroParamsObject();for(param in defaults){if(f[param]==null){f[param]=defaults[param]}}}return f};MXGRAPH.confluence.getDefaultMacroParamsObject=function(){return{width:"",border:true,fitWindow:false,viewerToolbar:true}};MXGRAPH.confluence.macroParamsObjectToString=function(c){var d=[];for(param in c){d.push(param+"="+c[param])}return d.join("|")}}(AJS.$))});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.mxgraph.confluence.plugins.diagramly:drawio-rte', location = 'js/DrawioMacroButtonHandlers.js' */
AJS.bind("init.rte",function(a){(function(c){var e=function(i,g){var h=new AJS.Dialog({width:350,height:300,id:"drawio-macro-dialog",closeOnOutsideClick:true});var f=MXGRAPH.confluence.getMacroParamsObject(g,false);f.width=f.width||"";f.viewerToolbar=f.viewerToolbar||"true";h.addHeader("Draw.io Macro Settings");h.addPanel("",diagramlySoy.macro.dialog.macroSettings({settings:f}),"");h.addButton("Save",function(j){var k=parseInt(c("#drawio-macro-width").attr("value"));if(isNaN(k)){f.width=""}else{if(!isNaN(k)){f.width=k}}f.border=c("#drawio-macro-border").is(":checked");f.viewerToolbar=c("#drawio-macro-viewerToolbar").is(":checked");var l={contentId:Confluence.Editor.getContentId(),macro:{name:"drawio",params:f,defaultParameterValue:"",body:""}};tinymce.confluence.MacroUtils.insertMacro(l,g);j.remove()});h.addCancel("Cancel",function(j){j.remove()});c("form[name='drawio-macro-settings']").live("submit",function(j){j.preventDefault();return false});h.show()};AJS.Confluence.PropertyPanel.Macro.registerButtonHandler("dupe-diagram",function(l,f){var i=MXGRAPH.confluence.getMacroParamsObject(f);var j=window.prompt("Please enter the name","Copy of "+i.diagramName);var h=i.revision||0;if(j!=null&&j!=""){var k="&owningPageId="+(i.pageId!=null?i.pageId:Confluence.Editor.getContentId());var g="ceoId="+Confluence.Editor.getContentId()+k+"&originalDiagramName="+encodeURIComponent(i.diagramName)+"&newDiagramName="+encodeURIComponent(j)+"&revision="+h;c.ajax({type:"POST",contentType:"application/json; charset=utf-8",url:MXGRAPH.confluence.serviceEndpoint+"/diagram/duplicate.json?"+g,dataType:"json",success:function(o){var n=AJS.$(f).clone();i.diagramName=j;if(i.pageId!=null){delete i.pageId}i.revision=1;var m=MXGRAPH.confluence.macroParamsObjectToString(i);n[0].setAttribute("data-macro-parameters",m);n.insertAfter(AJS.$(f))},error:function(o,m,n){if(n=="Conflict"){alert("Could not duplicate diagram. Please choose a different name.")}else{alert("Could not duplicate diagram. Please try again later.")}}})}});var d=function(f,g){var i=MXGRAPH.confluence.getMacroParamsObject(f,false);if(g=="original"){i.width=""}else{i.width=g}var h={contentId:Confluence.Editor.getContentId(),macro:{name:"drawio",params:i,defaultParameterValue:"",body:""}};tinymce.confluence.MacroUtils.insertMacro(h,f)};var b=function(h){var g=h.params||MXGRAPH.confluence.getDefaultMacroParamsObject();g.width=g.width||"";g.viewerToolbar=g.viewerToolbar||"true";if(AJS.Meta.get("form-name")==="createpagetemplate"||AJS.Meta.get("form-name")==="editpagetemplate"){var f=new AJS.Dialog({closeOnOutsideClick:true,width:450,height:220,id:"draw-message"});f.addCancel("Cancel",function(){f.hide()});f.addHeader("Diagrams in templates").addPanel("Panel","","drawio-message-contents");c(".drawio-message-contents").html("Diagrams cannot be added to page templates. You can only add them to pages.");f.show();return}if(g.diagramName!=null){var i={};if(g.diagramName!=null){i.diagramName="diagramName="+g.diagramName;i.ceoId="ceoId="+g.pageId!=null?g.pageId:Confluence.Editor.getContentId();if(g.revision!=null){i.revision="revision="+g.revision}}MXGRAPH.confluence.openEditor(i)}else{MXGRAPH.confluence.macroDialog.show()}};AJS.MacroBrowser.setMacroJsOverride("drawio",{opener:b});AJS.MacroBrowser.setMacroJsOverride("diagramly",{opener:b});AJS.Confluence.PropertyPanel.Macro.registerButtonHandler("edit-macro",e);AJS.Confluence.PropertyPanel.Macro.registerButtonHandler("drawio-size-small",function(g,f){d(f,200)});AJS.Confluence.PropertyPanel.Macro.registerButtonHandler("drawio-size-medium",function(g,f){d(f,400)});AJS.Confluence.PropertyPanel.Macro.registerButtonHandler("drawio-size-large",function(g,f){d(f,600)});AJS.Confluence.PropertyPanel.Macro.registerButtonHandler("drawio-size-original",function(g,f){d(f,"original")})}(AJS.$))});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.mxgraph.confluence.plugins.diagramly:drawio-rte', location = 'js/DiagramlyPageEditor.js' */
AJS.bind("init.rte",function(a){(function(c){c("form[name='diagramly-search-form']").live("submit",function(){AJS.trigger("diagramly.search.perform",[c(this)]);return false});var f=null;c("input[name='diagramly-search-field']").live("keyup",function(e){if(f){clearInterval(f)}f=setTimeout(function(){AJS.trigger("diagramly.search.perform",[c("form[name='diagramly-search-form']")])},500)});MXGRAPH.confluence.openEditor=function(i){var j="";var g=Confluence.Editor.getContentId();var k=i.ceoId!=null?i.ceoId:Confluence.Editor.getContentId();j+=i.diagramName!=null?"&diagramName="+encodeURIComponent(i.diagramName.split("=")[1]):"";j+=i.templateUrl!=null?"&"+i.templateUrl:"";j+=i.useAsTemplate?"&useAsTemplate=true":"";j+=i.revision!=null?"&"+i.revision:"";j+=i.mimeType=="application/gliffy+json"?"&import=true":"";var h=AJS.Confluence.getContextPath()+"/plugins/drawio/addDiagram.action?ceoId="+g+"&owningPageId="+k;var e=c('<iframe id="drawioEditor" >');e.appendTo("body");e.css({position:"absolute",width:"100%",height:"100%",top:"0px",left:"0px",border:"0px, ",zIndex:1000});e.attr("src",h+j);MXGRAPH.confluence.editorFrame=e};MXGRAPH.confluence.closeEditor=function(){MXGRAPH.confluence.editorFrame.remove()};MXGRAPH.confluence.insertMacro=function(h,g,e){var j=MXGRAPH.confluence.getDefaultMacroParamsObject();j.diagramName=h;if(e!=null){j.revision=e}if(Confluence.Editor.getContentId()!=g){j.pageId=g}var i={contentId:Confluence.Editor.getContentId(),macro:{name:"drawio",params:j,defaultParameterValue:"",body:""}};AJS.Rte.BookmarkManager.storeBookmark();tinymce.confluence.MacroUtils.insertMacro(i);AJS.Rte.BookmarkManager.restoreBookmark()};MXGRAPH.confluence.updateAndRefreshMacro=function(h,e){var g=c(AJS.Rte.getEditor().dom.select(".editor-inline-macro")).filter(function(i){return c(this).data("macro-name")==="drawio"||c(this).data("macro-name")==="diagramly"});g.each(function(i,k){var l=c(this);var j=MXGRAPH.confluence.getMacroParamsObject(l,false);j.revision=e;if(j.diagramName!=h){return true}data={contentId:Confluence.Editor.getContentId(),macro:{name:l.data("macro-name"),params:j,body:"",defaultParameterValue:""}};c.ajax({url:Confluence.getContextPath()+"/rest/tinymce/1/macro/placeholder",type:"POST",contentType:"application/json; charset=utf-8",data:c.toJSON(data),dataType:"text",success:function(m){var n=c(m);n.attr("src",n.attr("src")+"#"+new Date().getTime());l.replaceWith(n[0])}})})};MXGRAPH.confluence.macroDialog=(function(){var l={};var h=function(o){MXGRAPH.confluence.openEditor(o)};var j=new AJS.Dialog({width:800,height:600,id:"drawio-macro-dialog",closeOnOutsideClick:true});j.addHeader("Draw.io");j.addPanel("Draw.io diagram",diagramlySoy.macro.dialog.newDiagram(),"singlePanel");j.addPanel("Search",diagramlySoy.macro.dialog.searchDialog());j.addPanel("separator","","separator");(function(){var p=j.getPanel(2);var o=AJS.$(p.button[0].parentElement);o.empty().append("<div class='drawio-template-panel-header'>"+"Draw.io Templates"+"</div>")})();j.addButton("Link to Diagram",function(p){var o=l.diagramName.match(/diagramName=(.*)/)[1];MXGRAPH.confluence.insertMacro(o,l.ceoId);p.hide()});j.addButton("Select",function(o){h(l);o.hide()});j.addCancel("Cancel",function(o){o.hide()});AJS.$("#drawio-blank").addClass("drawio--list-item-selected");var i=function(o){if(o){j.getPage(j.curpage).button[0].item.show()}else{j.getPage(j.curpage).button[0].item.hide()}};var m=function(o){if(o=="blank"){j.getPage(j.curpage).button[1].item.context.textContent="Select"}else{if(o=="copy"){j.getPage(j.curpage).button[1].item.context.textContent="Copy"}else{if(o=="import"){j.getPage(j.curpage).button[1].item.context.textContent="Import"}}}};i(false);var e=function(){AJS.$(".drawio-list-item").unbind();AJS.$(".drawio-list-item").mouseover(function(o){AJS.$(".drawio-list-item").removeClass("drawio-list-item-hover");AJS.$(o.target).addClass("drawio-list-item-hover")});AJS.$(".drawio-list-item").mouseout(function(o){AJS.$(".drawio-list-item").removeClass("drawio-list-item-hover")});AJS.$(".drawio-list-item").dblclick(function(){h.apply(this,[l]);j.hide()});AJS.$(".drawio-list-item").click(function(q){AJS.$(".drawio-list-item").removeClass("drawio-list-item-selected");AJS.$(q.target).removeClass("drawio-list-item-hover");AJS.$(q.target).addClass("drawio-list-item-selected");var p=q.target.firstChild.innerHTML;l={};i(false);m("blank");if(p.substring(0,11)=="diagramName"){l.diagramName=q.target.children[0].innerHTML;l.ceoId=q.target.children[1].innerHTML;l.revision=q.target.children[2].innerHTML;l.mimeType=q.target.children[3].innerHTML;var o=l.mimeType=="application/gliffy+json";l.useAsTemplate=true;if(o){m("import")}else{m("copy");i(true)}}else{if(p.substring(0,11)=="templateUrl"){l.templateUrl=q.target.children[0].innerHTML;l.useAsTemplate=true;i(false);m("copy")}}})};e();var n=function(r,q,p,o){c.ajax({data:{diagramName:r,spaceKey:q,maxResults:p},url:MXGRAPH.confluence.serviceEndpoint+"/diagramSearch.json",dataType:"json",success:function(s){o.empty().append(diagramlySoy.macro.dialog.diagramThumbnails({diagrams:s,downloadPath:AJS.Confluence.getContextPath()+"/download/attachments"}));e()},error:function(w,s,v){var u=MXGRAPH.confluence.parseErrorMessage(w);var t=AJS.format("Error during search. Specified reason",u);o.empty().append(diagramlySoy.macro.dialog.errorMessage({message:"There has been an error during the search"}))}})};n("","",10,AJS.$("#drawio-newdiagram-panel").find(".drawio-search-results"));AJS.bind("diagramly.search.perform",function(t,r){var p=r.closest(".diagramly-search-dialog");var o=p.find(".diagramly-search-results");o.empty().append(diagramlySoy.macro.dialog.spinner());Raphael.spinner(o.find(".diagramly-results-spinner").get(0),55,"#B5B5B5");var q=p.closest(".aui-dialog").find(".button-panel-button");var u=c.trim(p.find("input[name='diagramly-search-field']").val());var s=p.find("select[name='diagramly-search-space']").val();n(u,s,100,o)});var k={};var g={business:"Business",charts:"Charts",engineering:"Engineering",flowcharts:"Flowcharts",mindmaps:"Mindmaps",mockups:"Mockups",networkdiagrams:"Network Diagrams",other:"Other",softwaredesign:"Software Design",venndiagrams:"Venn diagrams",wireframes:"Wireframes"};c.ajax({url:MXGRAPH.confluence.templatesUrlRoot+"/index.xml",data:null,success:function(v){for(var w=0;w<v.firstChild.childNodes.length;w++){var x=v.firstChild.childNodes[w];if(x.nodeType!=1){continue}var p=x.getAttribute("url");var q=p.split("/");var r=q[0];var s=g[x.getAttribute("category")];var y=q[1].split(".")[0];var u=q[1].split(".")[0].replace(/_/g," ");var t=MXGRAPH.confluence.templatesUrlRoot+"/"+r+"/"+y+".xml";var o={name:y,displayName:u,categoryDisplayName:s,fullDownloadPath:encodeURIComponent(t)};if(k[r]==null){k[r]=[]}k[r].push(o)}for(r in k){j.addPanel(k[r][0].categoryDisplayName,diagramlySoy.macro.dialog.templateThumbnails({templateNames:k[r],downloadPath:MXGRAPH.confluence.templatesUrlRoot+"/"+r}),"")}e()}});return j}());if(MXGRAPH.confluence.urlParams.diagramlyBlueprint){MXGRAPH.confluence.macroDialog.show()}try{if(window.location.pathname.indexOf("copypage.action")>-1){var b=c(AJS.Rte.getEditor().dom.select(".editor-inline-macro")).filter(function(e){return c(this).data("macro-name")==="drawio"||c(this).data("macro-name")==="diagramly"});b.each(function(e,g){var h=c(g).attr("data-macro-parameters");if(h.match(/revision=\d+/)!=null){c(g).attr("data-macro-parameters",h.replace(/revision=\d+/,"revision=1"))}})}}catch(d){console.log("Draw.io : revision reset for copied page has failed",d)}}(AJS.$))});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.drag-and-drop:drag-and-drop-overlay', location = 'js/drag-and-drop-overlay.js' */
define("conf/confluence-drag-and-drop/drag-and-drop-overlay",["ajs","jquery"],function(g,e){var h;return{bindFileDragOverlay:function(a){var f=a.$dragZone,d=a.$overlayZone||f.eq(0),i=a.isTransparent||!1,j=a.zIndex||1;f.on("dragover",function(c){c=c.originalEvent.dataTransfer.types;if(-1!==e.inArray("Files",c)&&(!e.browser.mozilla||-1!==e.inArray("application/x-moz-file",c))){var c=!!i,b;if(!h){var a=g.DragAndDrop.Templates.dragOverlay();h=e(a)}b=h;if(b.parent()[0]!==d[0]){a=0<d.closest(".quick-comment-container, .ic-container, .cp-editor").length;
b.toggleClass("dnd-small",a);var f=b.find(".overlay-center p");a?f.text("Drop a file here"):f.text("Drop files to insert them into the page");b.toggleClass("dnd-overlay-transparent",c);c=getComputedStyle(d[0]);b.css({"z-index":j});b.css({"margin-left":"-"+c.paddingLeft,"margin-top":"-"+c.paddingTop,width:d.innerWidth()+"px",height:d.innerHeight()+"px"}).prependTo(d);b.off("dragleave").on("dragleave",function(a){(!a.relatedTarget||!e.contains(b[0],a.relatedTarget))&&
b.remove()});b.off("drop").on("drop",function(){b.remove()})}}})}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.drag-and-drop:image-dialog-client', location = 'js/insert-dialog-upload-controller.js' */
(function(d,c){var b=function(a){this.messageHandler=null;this.context=a;a=this.getForm();AJS.Meta.getBoolean("can-attach-files")||a.remove()};b.prototype.getForm=function(){return d("form",this.context.baseElement)};b.prototype.pack=function(){};b.prototype.displayErrors=function(a){this.getMessageHandler().displayMessages(a);a=this.getMessageHandler().getMessageContainer().find("ul");a.toggleClass("one-message",1===a.find("li").length);a.closest(".aui-message").append("<span class='aui-icon icon-warning'></span>");
this.pack()};b.prototype.clearErrors=function(){this.getMessageHandler().clearMessages();this.pack()};b.prototype.getMessageHandler=function(){this.messageHandler||(this.messageHandler=AJS.MessageHandler({baseElement:d(".aui-message",this.context.baseElement)}));return this.messageHandler};c.DragAndDrop=c.DragAndDrop||{};c.DragAndDrop.UploadClientController=b})(AJS.$,Confluence||{});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.drag-and-drop:image-dialog-client', location = 'js/image-dialog-client.js' */
(function(i,f){var h=function(){this._workIdToBytesUploaded={};this._totalBytes=0};h.prototype={update:function(a,b,e){a in this._workIdToBytesUploaded||(this._totalBytes+=e);this._workIdToBytesUploaded[a]=b},percentComplete:function(){var a=0;i.each(this._workIdToBytesUploaded,function(b,e){a+=e});return Math.round(100*a/this._totalBytes)}};var g=function(a){this.urlHandleUpload="/plugins/drag-and-drop/upload.action";this.pageId=parseInt(AJS.Meta.get("page-id"),10);this.draftId=parseInt(AJS.Meta.get("draft-id"),
10);this.dragAndDropEntityId=AJS.Meta.get("drag-and-drop-entity-id");this.spaceKey=AJS.Meta.get("space-key")||"";this.atlToken=AJS.Meta.get("atl-token");this.base=/^\w+:\/\/[^\/?#]+/.exec(location.href);this.metaMaxFileSize=AJS.Meta.get("global-settings-attachment-max-size");this.errors=[];this.batchProgress=new h;this.attachmentPanelComponent=a.attachmentPanelComponent;this.dropZone=a.dropZone;this.browserButtonId=a.browserButtonId;this.uploader=null;this.isUploadUsingDragAndDrop=!1;var b=this;i(this.dropZone).bind("drop",
function(){b.isUploadUsingDragAndDrop=!0})};g.prototype.createPlupload=function(){var a=this,b=new plupload.Uploader({runtimes:"html5",dragdrop:!0,drop_element:a.dropZone,browse_button:a.browserButtonId,multipart:!1,stop_propagation:!0,max_file_size:parseInt(a.metaMaxFileSize,10),inputFileClazz:"file-library-input-file"});b.init();b.bind("Started",function(e,c){a.errors=[];a.attachmentPanelComponent.clearErrors();a.batchProgress=new h;require(["conf/confluence-drag-and-drop/analytics/files-upload-analytics"],
function(e){e.triggerEvent(a.isUploadUsingDragAndDrop?"confluence.insert-files-dialog.drag-and-drop":"confluence.insert-files-dialog.upload",c);a.isUploadUsingDragAndDrop=!1})});b.bind("FilesAdded",function(e,c){function b(c,e){for(var d=0;d<e.length;d++)if(e[d].status===plupload.FAILED)c.removeFile(e[d]);else{var f=_.find(c.files,function(a){return a.name===e[d].name&&a.id!==e[d].id});f&&c.removeFile(f);a.metaMaxFileSize>e[d].size&&a.attachmentPanelComponent.addPreviewImage(e[d])}c.start()}0<c.length&&
(a.attachmentPanelComponent.getNoFileContainer().hide(),AJS.UploadUtils.filterFiles(e,c,b))});b.bind("BeforeUpload",function(e,c){var d=a.base+f.getContextPath()+a.urlHandleUpload,b={},g=c.name.substr(c.name.lastIndexOf(".")+1);a.pageId?b.pageId=a.pageId:b.draftId=a.draftId;a.dragAndDropEntityId&&(b.dragAndDropEntityId=a.dragAndDropEntityId);b.filename=c.name;b.size=c.size;b.minorEdit=!0;b.spaceKey=a.spaceKey;b.mimeType=plupload.mimeTypes[g.toLowerCase()]||AJS.DragAndDropUtils.defaultMimeType;b.atl_token=
a.atlToken;e.settings.url=plupload.buildUrl(d,b);a.batchProgress=new h});b.bind("UploadProgress",function(b,c){a.batchProgress.update(c.id,c.loaded,c.size);a.attachmentPanelComponent.setUploadInProgress(a.batchProgress.percentComplete()/100,c.id)});b.bind("FileUploaded",function(b,c,d){b.getFile(c.id)?(b=JSON.parse(d.response).data.id,a.attachmentPanelComponent.attachmentUploaded(c.id,b)):a.attachmentPanelComponent.attachmentUploadingCancelled(c.id)});b.bind("Error",function(b,c){var d="";if(c.response){try{d=
AJS.$.parseJSON(c.response).actionErrors[0]}catch(f){d=c.message}AJS.trigger("analyticsEvent",{name:"confluence.image-dialog.upload.error.server-unknown"})}else{var d=c.message,g=c.file.name;c.code===plupload.FILE_SIZE_ERROR?(d=AJS.DragAndDropUtils.niceSize(a.metaMaxFileSize).toString(),d=AJS.format("{0} is too big to upload. Files must be less than {1}.",g,d),AJS.trigger("analyticsEvent",{name:"confluence.image-dialog.upload.error.file-size"})):c.code===AJS.UploadUtils.ErrorCode.FILE_IS_A_FOLDER_ERROR&&(d=
AJS.format("Cannot upload {0} - it might be a folder or an unsupported file type.",g),AJS.trigger("analyticsEvent",{name:"confluence.image-dialog.upload.error.file-type"}))}a.attachmentPanelComponent.displayErrors([d]);a.errors.push(d)});require(["conf/confluence-drag-and-drop/drag-and-drop-overlay"],function(b){b.bindFileDragOverlay({$dragZone:i(a.dropZone),zIndex:3005})});return b};g.prototype.init=function(){this.uploader=this.createPlupload()};g.prototype.cancelUpload=function(a){(a=this.uploader.getFile(a))&&
this.uploader.removeFile(a)};if("undefined"!==typeof DragnDropSupport&&DragnDropSupport.hasXhrSupport&&f.Editor&&f.Editor.FileDialog)f.Editor.FileDialog.eventListener.on("AttachmentsPanelView.render",function(a){a.getUploaderController=function(){return new f.DragAndDrop.UploadClientController(a.context)}});AJS.toInit(function(){if(f.Editor&&f.Editor.ImageDialog){var a=f.Editor.ImageDialog.beforeShowListeners,b=f.Editor.ImageDialog.findPanelComponentById("attachments");a&&a.push(function(){if(b){var a=
b.getPanelElement();if(a.length&&"undefined"!==typeof DragnDropSupport&&DragnDropSupport.hasXhrSupport&&AJS.Meta.getBoolean("can-attach-files")){var c=new g({dropZone:a[0],browserButtonId:"upload-files-button",attachmentPanelComponent:b});c.init();f.Editor.FileDialog.eventListener.on("uploadingfile.cancelled",function(a){c.cancelUpload(a)})}}else AJS.debug("Do not support Attachment Panel and Drag-Drop in Insert Image Dialog (ex: in creating Template)")})}});f.DragAndDrop=f.DragAndDrop||{};f.DragAndDrop.UploadClient=
g})(AJS.$,Confluence||{});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.drag-and-drop:drag-and-drop-tip', location = 'js/drag-and-drop-tip.js' */
AJS.toInit(function(b){function f(c,a){"true"===a&&(c.append(AJS.DragAndDrop.Templates.dragAndDropTip()),c.find(".attach-tip-discovery .close-tip").on("click",function(a){a.preventDefault();b(this).closest(".attach-tip-discovery").remove();c.sizeToFit();b.ajax({url:Confluence.getContextPath()+"/rest/drag-and-drop/1/tip/disable",type:"POST",dataType:"json",success:function(){d.setItem(e,!1)}})}))}var e="show-drag-and-drop-tip",d=Confluence.storageManager("confluence-editor");Confluence.Editor.ImageDialog.beforeShowListeners.push(function(){var c=
b("#attached-files");if(AJS.Meta.getBoolean("can-attach-files")&&AJS.DragAndDropUtils.hasXhrSupport){var a=d.getItem(e);null===a?b.ajax({url:Confluence.getContextPath()+"/rest/drag-and-drop/1/tip/setting",dataType:"json",success:function(b){a=(!1!==b).toString();d.setItem(e,a);f(c,a)}}):f(c,a)}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.drag-and-drop:drag-and-drop-for-editor', location = 'js/editor.js' */
require(["ajs","jquery","conf/confluence-drag-and-drop/analytics/files-upload-analytics","conf/confluence-drag-and-drop/drag-and-drop-overlay"],function(a,q,n,o){a.toInit(function(l){var e,p=/^\w+:\/\/[^\/?#]+/.exec(location.href),m=!1;a.Rte.BootstrapManager.addOnInitCallback(function(){var j=a.Rte.getEditor().getBody().parentNode;a.DragAndDropUtils.init(function(i){if(i){var i=document.getElementById("fileuploadShim"),k=!1;i||(i=document.createElement("div"),i.setAttribute("id","fileuploadShim"),
document.body.appendChild(i));jQuery.browser.mozilla&&-1<jQuery.browser.version.indexOf("1.9.2")&&j.addEventListener("drop",function(a){a.stopPropagation()},!1);var c=new plupload.Uploader({runtimes:"html5",dragdrop:!0,drop_element:j,browse_button:i.getAttribute("id"),multipart:!1,max_file_size:+a.Meta.get("global-settings-attachment-max-size")});e||(e=new a.DragAndDropProgressDialog);c.init();c.bind("Started",function(a,b){n.triggerEvent("confluence.editor.files.drag-and-drop",b)});c.bind("FilesAdded",
function(h,b){a.UploadUtils.filterFiles(h,b,function(a,b){for(var d=0;d<b.length;d++){var h=b[d];h.status!==plupload.FAILED&&e.render({workId:h.id,status:h.status,file:h})}c.start()})});c.bind("BeforeUpload",function(h,b){if(a.Meta.get("content-type")==="template"){h.stop();if(!m){var f=new a.Dialog(450,180);f.addHeader("Not Supported");f.addSubmit("Ok",function(){f.remove()});f.addPanel("Panel 1","panel1");f.getCurrentPanel().html("\u003cp\u003eAttachments are not supported in Templates.\u003c/p\u003e \u003cp\u003eFiles may be attached to a Page, and added as an image via the Insert menu.\u003c/p\u003e");
f.show();m=true}}else{var g=p+Confluence.getContextPath()+"/plugins/drag-and-drop/upload.action",d={},c=a.Meta.get("page-id");if(c)d.pageId=c;var i=a.Meta.get("draft-id");if(c==0&&i>0)d.draftId=i;if(c=a.Meta.get("drag-and-drop-entity-id"))d.dragAndDropEntityId=c;c=b.name.substr(b.name.lastIndexOf(".")+1);d.filename=b.name;d.size=b.size;d.minorEdit=true;d.spaceKey=a.Meta.get("space-key")||"";d.mimeType=plupload.mimeTypes[c.toLowerCase()]||a.DragAndDropUtils.defaultMimeType;d.atl_token=a.Meta.get("atl-token");
d.contentType=a.Meta.get("content-type");d.isVFMSupported=!!a.MacroBrowser.getMacroMetadata("view-file");h.settings.url=plupload.buildUrl(g,d);e.cancelListeners.push(function(b,c){var d=h.getFile(c.workId);d&&h.removeFile(d);e.renderInfo(c.workId,"File was manually removed from the queue.")});e.show()}});c.bind("UploadProgress",function(a,b){e.renderUpdateToBytesUploaded(b.id,b.loaded,b.size);e.hideCloseButton()});l.browser.mozilla&&plupload.addEvent(j,"dragenter",function(a){k=a.rangeParent&&
a.rangeOffset!=void 0?{startElement:a.rangeParent,startOffset:a.rangeOffset}:false});c.bind("FileUploaded",function(c,b,f){if(f.status){if(f.response)try{var g=a.$.parseJSON(f.response);k&&l(k.startElement.parentNode).closest('[contenteditable="true"]',j).length&&tinymce.activeEditor.selection.setCursorLocation(k.startElement,k.startOffset);g.htmlForEditor.substr(0,4)==="<img"?tinymce.confluence.ImageUtils.insertImagePlaceholder(g.htmlForEditor):a.Rte.getEditor().execCommand("mceInsertContent",false,
g.htmlForEditor,{skip_focus:true})}catch(d){a.log("FileUploaded threw an exception "+d)}e.renderComplete(b.id)}else e.renderError(b.id,"The server is not responding. Please check that it is running.")});c.bind("Error",function(c,b){var f,g;if(b.response){try{f=a.$.parseJSON(b.response);g=f.actionErrors[0]}catch(d){g=d.name==="SyntaxError"?"Invalid response received from the server.":b.message}e.renderError(b.file.id,g);a.trigger("analyticsEvent",{name:"confluence.editor.upload.error.server-unknown"})}else{g=
b.message;if(b.code===plupload.FILE_SIZE_ERROR){g=a.format("is too big to upload. Files must be less than {0}.",a.DragAndDropUtils.niceSize(a.Meta.get("global-settings-attachment-max-size")));a.trigger("analyticsEvent",{name:"confluence.editor.upload.error.file-size"})}else if(b.code===a.UploadUtils.ErrorCode.FILE_IS_A_FOLDER_ERROR){g="might be a folder or an unsupported file type.";a.trigger("analyticsEvent",{name:"confluence.editor.upload.error.file-type"})}e.render({workId:b.file.id,status:b.file.status,
file:b.file,errorMessage:g});if(!e.isVisible()){e.show();e.showCloseButton()}}});c.bind("UploadComplete",function(){if(!c.total.queued){c.stop();e.showCloseButton();e.hasErrors()||setTimeout(function(){e.hide();e.clearRenderOutput();a.Rte.BookmarkManager.restoreBookmark()},1E3)}});a.Confluence.Uploader=c;a.Confluence.EditorUploadProgressDialog=e;o.bindFileDragOverlay({$dragZone:l(j).add("#toolbar ~ #editor-precursor"),$overlayZone:l("#rte"),isTransparent:!0})}})})})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.drag-and-drop:drag-and-drop-for-editor', location = 'js/link-dialog-drop-zone.js' */
AJS.toInit(function(a){AJS.bind("dialog-shown.link-browser",function(){a.browser.msie||AJS.DragAndDropUtils.bindDrop(a("#insert-link-dialog")[0],function(a){a.preventDefault();a.stopPropagation()})})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.drag-and-drop:drop-zone-for-image-dialog', location = 'js/image-dialog-drop-zone.js' */
AJS.toInit(function(b){if(AJS.DragAndDropUtils.hasXhrSupport)if(AJS.Meta.get("remote-user")){var c=Confluence.Editor.ImageDialog.findPanelComponentById("attachments");c?b(c).bind("afterThumbnail",function(c,d){if(!d.find(".image-dialog-drop-zone-container").length){var e=b("<li/>").addClass("attached-image"),a=b("<div/>").addClass("image-dialog-drop-zone-container image-container");b("<div/>").addClass("drop-zone-image").attr("title","Drop files here to attach them").appendTo(a);b("<div/>").addClass("drop-zone-text").text("Drop Here").appendTo(a);
a.appendTo(e);d.prepend(e);b.browser.msie||(AJS.DragAndDropUtils.bindDragEnter(a[0],function(){a.addClass("drop-zone-on-hover")}),AJS.DragAndDropUtils.bindDragOver(a[0],function(){a.addClass("drop-zone-on-hover")}),AJS.DragAndDropUtils.bindDragLeave(a[0],function(){a.removeClass("drop-zone-on-hover")}))}}):AJS.log("Skipping image attachment drop-zone - no Image Dialog attachment panel")}else AJS.debug("Skipping image attachment drop-zone for anonymous user creating new content");else AJS.debug("Browser doesn't have XHR upload support. Skipping image dialog drop zone..")});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-comments:strip-inline-comment-marker', location = 'editor/paste-handler.js' */
(function(a){AJS.bind("init.rte",function(){a(document).unbind("postPaste",b).bind("postPaste",b);tinymce.activeEditor&&tinymce.activeEditor.onRemove.add(function(){a(document).unbind("postPaste",b)});function b(d,e,c){if(c&&c.node){a(".inline-comment-marker",c.node).contents().unwrap()}}})})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.profile-picture:profile-picture-editor_resources', location = 'js/profile-picture.js' */
AJS.bind("init.rte", function() {
    AJS.Confluence.PropertyPanel.Macro.registerButtonHandler("viewProfile", function(e, macroNode) {
        var $macroDiv = AJS.$(macroNode);

        var params = {};
        if ($macroDiv.attr("data-macro-parameters")) {
            AJS.$.each($macroDiv.attr("data-macro-parameters").split("|"), function(idx, item) {
                var param = item.split("=");
                params[param[0]] = param[1];
            });
        }
        window.open(AJS.Confluence.getBaseUrl() + "/display/~" + params["user"]);
    });
});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-view-file-macro:view-file-macro-editor-resources', location = 'templates/view-file-macro-editor.soy' */
// This file was automatically generated from view-file-macro-editor.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.ViewFileMacro == 'undefined') { Confluence.ViewFileMacro = {}; }
if (typeof Confluence.ViewFileMacro.Templates == 'undefined') { Confluence.ViewFileMacro.Templates = {}; }
if (typeof Confluence.ViewFileMacro.Templates.Editor == 'undefined') { Confluence.ViewFileMacro.Templates.Editor = {}; }


Confluence.ViewFileMacro.Templates.Editor.viewFilePropertyPanelHeader = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="view-file-property-panel-header"><span class="file-name"><span class="aui-icon aui-icon-small ', soy.$$escapeHtml(opt_data.fileIcon), '"></span>', soy.$$escapeHtml(opt_data.fileName), '</span></div>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-view-file-macro:view-file-macro-editor-resources', location = '/js/components/view-file-macro-properties-panel.js' */
define("vfm/components/view-file-macro-properties-panel",["jquery","underscore","ajs","confluence","confluence/jsUri","tinymce","vfm/view-file-macro-utils"],function(d,x,f,l,m,b,r){var t="view-file";var a="macro-placeholder-property-panel-edit-button";var y="macro-placeholder-property-panel-remove-button";var c="placeholder/unknown-attachment";var i="data-macro-parameters";var q={"view-file-size-small":"150","view-file-size-medium":"250","view-file-size-large":"400"};var h=[{className:"macro-property-panel-view-file-size-small",text:"",tooltip:"Small thumbnail",click:j},{className:"macro-property-panel-view-file-size-medium",text:"",tooltip:"Medium thumbnail",click:j},{className:"macro-property-panel-view-file-size-large",text:"",tooltip:"Large thumbnail",click:j},null,{className:"macro-property-panel-view-file-convert-to-link",text:"Show as link",tooltip:"Show as link",click:g}];function u(E,B){var F=x.find(Object.keys(q),function(G){return q[G]===B});if(F){for(var A=0,D=E.length;A<D;A++){var z=E[A];var C=z.className.replace(" selected","");if(C.indexOf("macro-property-panel-"+F)!==-1){C+=" selected"}z.className=C}}}function s(A){var B=x.reject(A,function(C){return C.className.indexOf(a)>-1||C.className.indexOf(y)>-1});A.splice(0,A.length);for(var z=0;z<B.length;z++){A.push(B[z])}}function k(A,z){var B=d(A);B.attr("height",z);var C=B.attr("src");if(o(C)){B.attr("src",p(B.attr("src"),z));B.attr("data-mce-src",p(B.attr("data-mce-src"),z));if(b.isGecko){f.Rte.getEditor().execCommand("mceRepaint",false)}}v(B,z);b.activeEditor.undoManager.add()}function o(z){return(z!=null&&z.indexOf("/servlet/view-file-macro/placeholder")>=0)}function p(B,z){var A=new m(B);if(A.getQueryParamValue("height")!==""){A.replaceQueryParam("height",z)}return A.toString()}function w(C){var z=C.attr(i);var D=[];var A="";for(var B=0;B<z.length;B++){var E=z[B];if(E==="\\"){A+=E;if(B+1!==z.length){A+=z[++B]}}else{if(E==="|"){D.push(A);A=""}else{A+=E}}}D.push(A);return D}function v(C,A){var B="height="+A;var E=w(C);var D=e(C,"height");if(D){var z=x.indexOf(E,"height="+D);E[z]=B}else{E.push(B)}C.attr(i,E.join("|"))}function e(B,z){var C=w(B);var A=x.find(C,function(D){return(D.indexOf(z+"=")>=0)});return A?A.split("=")[1]:null}function j(B,z){if(d(B).attr("class").indexOf("selected")!==-1){return}f.Confluence.PropertyPanel.destroy();var C=Object.keys(q);var D=d(B).attr("class");for(var A=0;A<C.length;A++){if(D.indexOf(C[A])!==-1){k(z,q[C[A]]);d(z).click();f.trigger("analyticsEvent",{name:"confluence.view-file.resize."+C[A].substring(C[A].lastIndexOf("-")+1,C[A].length)});return}}}function g(B,z){f.trigger("analyticsEvent",{name:"confluence.view-file.convert.to-link-trigger"});f.Confluence.PropertyPanel.destroy();A(z);function A(C){var E=r.getParameterByName(d(C).attr("src"),"attachmentId");var D=f.REST.makeUrl("attachment/"+E+".json");d.ajax({type:"GET",url:D,contentType:"application/json; charset=utf-8",dataType:"json"}).success(function(H){var F=l.Link.fromREST(H);var G=F.insert();b.activeEditor.undoManager.add();b.activeEditor.focus();G.click()})}}function n(){f.bind("created.property-panel",function(G,F){var H=d(F.anchor);var C=H.attr("data-macro-name");if(C!==t){return}var D=l.ViewFileMacro.Templates.Editor.viewFilePropertyPanelHeader;var E=e(H,"name");var B=r.getParameterByName(H.attr("src"),"mimeType");var A=f.Confluence.FileTypesUtils.getAUIIconFromMime(B);var z=d(D({fileName:E,fileIcon:A}));F.panel.find(".aui-property-panel").prepend(z);if(F.shouldFlip){F.tip.css({top:F.panel.outerHeight()})}})}return{init:function(){f.Confluence.PropertyPanel.Macro.registerInitHandler(function(G,D,z){s(D);var E=d(G);var B=E.attr("data-mce-src");if(B&&B.indexOf(c)>-1){return}for(var A=0,C=h.length;A<C;A++){D.push(h[A])}var F=E.attr("height");if(!F){F=(f.Meta.get("content-type")==="comment")?r.DEFAULT_HEIGHT_IN_COMMENT:r.DEFAULT_HEIGHT}u(D,F)},t);n()}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-view-file-macro:view-file-macro-editor-resources', location = '/js/components/view-file-macro-link-properties-panel.js' */
define("vfm/components/view-file-macro-link-properties-panel",["jquery","ajs","tinymce","vfm/view-file-macro-utils"],function(g,b,e,a){var c="view-file";function f(h){if(h){var k=g(h);var i=k.attr("data-linked-resource-type");var j=k.attr("data-linked-resource-content-type");return b.MacroBrowser.getMacroMetadata(c)&&i==="attachment"&&!(j&&j.indexOf("image")===0)}return false}function d(h){var i=b.REST.makeUrl("attachment/"+g(h).attr("data-linked-resource-id")+".json");g.ajax({type:"GET",url:i,contentType:"application/json; charset=utf-8",dataType:"json"}).success(function(k){var n={name:k.fileName};if(b.Data.get("content-id")!==k.ownerId){n.page=k.parentTitle;n.space=k.space.key;if(k.parentContentType==="blogpost"){var l=k.createdDate.date.split("-");n.date=l[0]+"/"+l[1]+"/"+l[2].substring(0,2)+"/"}}n.height=(b.Meta.get("content-type")==="comment")?a.DEFAULT_HEIGHT_IN_COMMENT:a.DEFAULT_HEIGHT;var j={contentId:b.Meta.get("content-id")||"0",macro:{name:c,params:n}};var m=e.confluence.MacroUtils.insertMacro(j,h);m.done(function(o){g(o).click()})})}return{init:function(){b.bind("link-property-panel-buttons.created",function(j,k){var i=k.buttons;var h=k.link;if(f(h)){i.push({className:"link-property-panel-convert-to-thumbnail-button",text:"Show as thumbnail",tooltip:"Show as thumbnail",click:function(){b.Confluence.PropertyPanel.destroy();d(h);b.trigger("analyticsEvent",{name:"confluence.view-file.convert.to-thumbnail-trigger"})}})}})}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-view-file-macro:view-file-macro-editor-resources', location = '/js/components/vfm-editor-poller.js' */
define("vfm/components/vfm-editor-poller",["ajs","jquery","underscore","tinymce","vfm/view-file-macro-utils","vfm/services/conversion-service"],function(k,e,m,p,q,c){var o;var l=false;var d={};var f=q.THUMBNAIL_POLLING_PERIOD;var h=q.THUMBNAIL_POLLING_BACKOFF_RATIO;function a(){if(!p.activeEditor||!l){return}var s=e("img[data-macro-name='view-file'][src*='thumbnailStatus="+q.THUMBNAIL_STATUS_IN_PROGRESS+"'][data-thumbnail-status!='"+q.THUMBNAIL_STATUS_ERROR+"']",p.activeEditor.dom.doc);if(s.length>0){var r=false;s.each(function(){var u=e(this);var w=u.attr("src");var v=q.getParameterByName(w,"attachmentId");var t=q.getParameterByName(w,"version");if(!d[v]||d[v].version!==t){d[v]={version:t};r=true}});if(r){j()}c.postThumbnailConversionResults(d).then(function(t){if(!p.activeEditor||!l){return}m.each(t,function(x,y){if(!d[y]){return}var w=e("img[data-macro-name='view-file'][src*='attachmentId="+y+"']",p.activeEditor.dom.doc);var v=d[y].version;w.attr("data-thumbnail-status",x);if(x===q.THUMBNAIL_STATUS_CONVERTED){var u=w.attr("src");var z=c.getThumbnailUrl(y,v);z=q.addParamsToUrl(z,{attachmentId:y,mimeType:q.getParameterByName(u,"mimeType")});w.attr("src",z);delete d[y]}else{if(x===q.THUMBNAIL_STATUS_ERROR){delete d[y]}}});if(!m.isEmpty(d)){n()}else{j()}i()})}else{if(s.length===0){j();i()}}}function n(){f=f*h}function j(){f=q.THUMBNAIL_POLLING_PERIOD}function i(){l=true;if(o){clearTimeout(o)}o=setTimeout(a,f)}function g(){if(o){clearTimeout(o);o=undefined}l=false;d={};j()}var b={startPolling:i,stopPolling:g};return b});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-view-file-macro:view-file-macro-editor-resources', location = '/js/vfm-editor.js' */
require(["ajs","tinymce","vfm/components/view-file-macro-properties-panel","vfm/components/view-file-macro-link-properties-panel","vfm/components/vfm-editor-poller"],function(a,d,b,c,e){a.toInit(function(){a.MacroBrowser.setMacroJsOverride("view-file",{opener:function(f){}});b.init();c.init()});d.create("tinymce.plugins.ViewFilePoller",{init:function(f){a.bind("rte-ready",function(){e.startPolling()});a.bind("rte-destroyed",function(){e.stopPolling()})}});d.PluginManager.add("viewFilePoller",d.plugins.ViewFilePoller);a.Rte.BootstrapManager.addTinyMcePluginInit(function(f){f.plugins+=",viewFilePoller"})},undefined,true);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.widgetconnector:twitter-autoconvert-webresources', location = 'com/atlassian/confluence/extra/widgetconnector/js/autoconvert-twitter.js' */
(function(){AJS.bind("init.rte",function(){var A=/^\/(.*?)\/status\/([^/]+\/?$)/,C=/^\/(.*?)\/statuses\/([^/]+\/?$)/,B=function(H,G,D){var E,I,F;
if(H.host.match(/^twitter.com/)){if(E=decodeURI(H.path).match(A)){I=H.protocol+"://twitter.com/"+E[1]+"/status/"+E[2]
}else{if(E=decodeURI(H.path).match(C)){I=H.protocol+"://twitter.com/"+E[1]+"/statuses/"+E[2]
}}if(I){F={name:"widget",params:{url:I}};
tinymce.plugins.Autoconvert.convertMacroToDom(F,D,D)
}else{D()
}}else{D()
}};
tinymce.plugins.Autoconvert.autoConvert.addHandler(B)
})
})();
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.officeconnector:macro-browser-smart-fields', location = 'javascript/office-connector-macro-fields.js' */
(function(B){var A=function(C){this.fileTypes=C
};
A.prototype.beforeParamsSet=function(E,C){if(!E.page&&!(E.date||E.space)){if(AJS.params.contentType=="page"||AJS.params.contentType=="blogpost"){E.page=B("#content-title").val()
}else{if(AJS.params.contentType=="comment"){E.page=AJS.params.pageTitle
}}}if(E.date){var D=E.date.split("/");
E.page=["",D[2],D[0],D[1],E.page].join("/")
}if(E.space){E.page=E.space+":"+E.page
}return E
};
A.prototype.beforeParamsRetrieved=function(E){if(E.page){var D=E.page.split(":");
if(D.length>1){E.space=D[0];
E.page=D[1]
}var C=E.page.split("/");
if(C.length>1){E.date=[C[2],C[3],C[1]].join("/");
E.page=C[4]
}if(((AJS.params.contentType=="page"||AJS.params.contentType=="blogpost")&&E.page==B("#content-title").val())||(AJS.params.contentType=="comment"&&E.page==AJS.params.pageTitle)){delete E.page
}}return E
};
A.prototype.fields={attachment:function(F){var C=function(G){var I={};
var H=G.split(":",2);
I.spaceKey=((H.length==2)&&H[0])||AJS.params.spaceKey;
I.title=H[H.length-1];
if(I.title.indexOf("/")==0){I.postingDay=I.title.substr(1,10);
I.title=I.title.substr(12)
}if(I.title==B("#content-title").val()){I.title=""
}if(!I.title){if(AJS.params.newPage){I.draftId=AJS.params.contentId
}else{I.pageId=AJS.params.pageId
}}return I
};
var D={fileTypes:this.fileTypes};
var E=AJS.MacroBrowser.ParameterFields.attachment(F,D);
E.dependencyUpdated=function(I,H){AJS.log("attachment:dependencyUpdated called: "+I+", "+H);
var G=C(H);
this.getData(G)
};
return E
},spacekey:function(C){return AJS.MacroBrowser.ParameterFields._hidden(C,{})
},date:function(C){return AJS.MacroBrowser.ParameterFields._hidden(C,{})
},"confluence-content":function(D){var C={dependencies:["name"]};
return AJS.MacroBrowser.ParameterFields["confluence-content"](D,C)
}};
AJS.MacroBrowser.Macros.viewdoc=new A(["doc","docx"]);
AJS.MacroBrowser.Macros.viewpdf=new A(["pdf"]);
AJS.MacroBrowser.Macros.viewxls=new A(["xls","xlsx"]);
AJS.MacroBrowser.Macros.viewppt=new A(["ppt","pptx"]);
AJS.MacroBrowser.Macros.viewfile={updateSelectedMacro:function(D){var F=D.params[""]||D.params.name;
if(F){var E=F.lastIndexOf(".");
if(E>0){var C=F.substring(E+1);
if(C){(C=="doc")&&(C=="docx")&&(D.name="viewdoc");
(C=="pdf")&&(D.name="viewpdf");
(C=="ppt")&&(C=="pptx")&&(D.name="viewppt");
(C=="xls")&&(C=="xlsx")&&(D.name="viewxls")
}}}}}
})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.macros.core:macro-browser-smart-fields', location = 'javascript/confluence-core-macro-fields.js' */
(function(){AJS.MacroBrowser.activateSmartFieldsAttachmentsOnPage("multimedia","swf avi mov mp4 mpeg mpg wmv wma mp3 ram rm".split(" "))})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.ext.newcode-macro-plugin:code-macro-editor', location = '/scripts/code-macro-languages.js' */
(function(d){var b=function(){};b.prototype.fields={string:{language:function(h,f){var g=d(Confluence.Templates.MacroBrowser.macroParameterSelect());var e=d("select",g);if(f==null){f={}}f.setValue=function(k){var j=e.find("option[value='"+k+"']");if(j.length==0){var i=d("<option/>");i.val(k);i.text(k);e.append(i)}};a(e);return new AJS.MacroBrowser.Field(g,e,f)}}};AJS.MacroBrowser.Macros.code=new b();function a(e){c(function(g){if(!g.length){AJS.log("Configured code macro languages result was not in the expected format.");return}var f=e.val();e.empty();e.append(d("<option/>").attr("value",""));d.each(g,function(h,j){var i=d("<option />");i.val(j.aliases[0]);i.text(j.friendlyName);e.append(i)});e.val(f)},function(g,h,f){AJS.log("Failed to retrieve syntax highlighters from Confluence "+h+" - "+f)})}function c(f,e){AJS.$.ajax({async:true,url:AJS.params.contextPath+"/plugins/newcode/getlanguages.action",dataType:"json",timeout:10000,error:function(h,i,g){if(e&&typeof(e)=="function"){e(h,i,g)}},success:function(g){if(f&&typeof(f)=="function"){f(g)}}})}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:macro-browser-web-resources', location = 'com/atlassian/confluence/extra/calendar3/js/macro-browser.js' */
(function(e){var c=function(){a("space-calendar")();a("team-calendar")();a("calendar")()};function b(f){return function(g){if(g.params){AJS.MacroBrowser.setMacroJsOverride(f,{opener:null,fields:d(),postPreview:a(f)});tinymce.confluence.macrobrowser.editMacro(AJS.Editor.Adapter.getEditor().selection.getNode())}else{Confluence.TeamCalendars.Dialogs.getAddDialogForMacro(g)}}}function a(f){return function(){AJS.MacroBrowser.setMacroJsOverride(f,{opener:b(f),fields:d()})}}function d(){return{string:{id:function(j,g){var f;if(AJS.MacroBrowser.makeParameterDiv){f=AJS.MacroBrowser.makeParameterDiv({},{name:"id",type:"string"})}else{f=AJS.MacroBrowser.ParameterFields.string(j,g).paramDiv}var h=e("<input/>",{"class":"subcalendars-select",type:"hidden"});var k=e("input",f).addClass("hidden").after(h);var i=function(m){if(m){var l=e.isArray(m)?m.join(","):m;k.val(l);if(!k.data("renderedInitialSelection")){k.data("renderedInitialSelection",true);e.ajax({cache:false,data:{subCalendarIds:l},dataType:"json",success:function(n){if(n&&e.isArray(n)){h.auiSelect2("data",e.map(n,function(o){return{id:o.id,text:e("<span/>",{text:o.name}).html()}}))}},timeout:Confluence.TeamCalendars.ajaxTimeout,url:AJS.params.contextPath+"/rest/calendar-services/1.0/calendar/util/format/subcalendar/ids.json"})}}else{k.val("")}k.trigger("change")};h.change(function(){i(e.trim(h.auiSelect2("val")))}).auiSelect2({minimumInputLength:1,formatNoMatches:function(l){return e("<div/>").append(e("<span/>",{text:AJS.format("No calendars found with {0}.",l||"")})).html()},formatInputTooShort:function(){return e("<div/>").append(e("<span/>",{text:"Start typing for suggestions"})).html()},multiple:true,query:function(l){e.ajax({cache:false,data:{term:l.term,limit:5,showSubCalendarsInView:"true"},dataType:"json",success:function(m){l.callback({results:(function(){if(m.payload&&m.payload.length){return e.map(m.payload,function(n){return{id:n.subCalendar.id,text:e("<span/>",{text:n.subCalendar.name}).html()}})}return[]})(),more:false});e(".select2-drop-active").addClass("select2-drop")},timeout:Confluence.TeamCalendars.ajaxTimeout,url:AJS.params.contextPath+"/rest/calendar-services/1.0/calendar/search/subcalendars.json"})}});e(".select2-container",f).after(e("<div/>",{"class":"id-desc",html:"Start typing for calendar suggestions or \u003cspan class=\"add-subcalendar\"\u003eadd a new calendar\u003c/span\u003e."}).click(function(){AJS.MacroBrowser.close();Confluence.TeamCalendars.Dialogs.getAddDialogForMacro({name:e("#macro-insert-container .macro-name").val(),params:(function(){var l={};e(".macro-param-input").each(function(){var m=e(this);l[m.attr("id").substring(12)]=m.attr("type")==="checkbox"?m.prop("checked"):m.val()});return l})(),defaultParameterValue:""})}));return AJS.MacroBrowser.Field(f,k,e.extend({setValue:function(l){i(l)}}),g)}}}}AJS.bind("init.rte",c)})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:macro-browser-web-resources', location = 'com/atlassian/confluence/extra/calendar3/eventmacro/js/macro-browser.js' */
AJS.bind("init.rte",function(){var a=function(){return Math.random().toString(36).substring(2)};tinymce.activeEditor.onPostProcess.add(function(c,e){try{if(e.getInner){if(e.content.indexOf("editor-inline-macro")===-1){return}var b=$("<div>").html(e.content);b.find(".editor-inline-macro").each(function(g,f){var j=$(f);var l=Confluence.MacroParameterSerializer;var i=j.hasClass("editor-inline-macro");if(i){var h=j.attr("data-macro-name");if(h==="event"){var k=l.deserialize(j.attr("data-macro-parameters"));k.id=a();j.attr("data-macro-parameters",l.serialize(k))}}});e.content=b.html()}}catch(d){if(AJS.logError){AJS.logError("Could not parse paste content to handle copy Event Macro",d)}}});AJS.MacroBrowser.setMacroJsOverride("event",{beforeParamsRetrieved:function(c,d,b){var e=AJS.$("#macro-param-id").val();if(!e){e=a();AJS.$("#macro-param-id").val(e);c.id=e}return c}});AJS.MacroBrowser.getMacroJsOverride("event").fields={};AJS.MacroBrowser.getMacroJsOverride("event").fields.string={id:function(b){return AJS.MacroBrowser.ParameterFields._hidden(b,{})}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'ch.bitvoodoo.confluence.plugins.panelbox:macro-browser-smart-fields', location = 'ch/bitvoodoo/confluence/plugins/panelbox/templates/javascript/panelbox-macro-fields.js' */
AJS.bind("init.rte",function(){var a=function(b,c){this.parameterName=b;this.enumValues=c};a.prototype.fields={"enum":function(c){if(c.name==this.parameterName){c.enumValues=this.enumValues}var b=AJS.MacroBrowser.ParameterFields["enum"](c,null);return b}};AJS.MacroBrowser.activateSmartFieldPanelbox=function(d,b,c){AJS.MacroBrowser.setMacroJsOverride(d,new a(b,c))};AJS.$.getJSON(AJS.params.contextPath+"/rest/panelbox/1.0/",function(c){var b=[];AJS.$.each(c,function(d,e){b.push(e.name)});AJS.MacroBrowser.activateSmartFieldPanelbox("panelbox","name",b)})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-tasks:inline-tasks-macro-browser', location = 'js/inline-tasks-macro-browser.js' */
(function(b){var a={"space-and-page":function(i,e){e=e||{};var c=i.multiple?true:false;var f=i.multiple?"autocomplete-multi-space-and-page":"autocomplete-space-and-page";var h=b(Confluence.Templates.MacroBrowser.macroParameter());var d=AJS.$("input[type='text']",h);d.addClass(f).attr("data-none-message","Not found");if(i.required){d.keyup(AJS.MacroBrowser.processRequiredParameters)}var g=_.extend({},{manualInit:true,multiple:c,orgElement:d},e);d.auiSelect2(Confluence.UI.Components.SpacePagePicker.build(g));e.setValue=function(j){Confluence.UI.Components.SpacePagePicker.setValue(j,d)};return AJS.MacroBrowser.Field(h,d,e)}};AJS.MacroBrowser.setMacroJsOverride("tasks-report-macro",{fields:{string:{spaceAndPage:function(d){var c={inputSpaceId:"macro-param-spaces",inputSpaceName:"macro-param-spaces",inputPageId:"macro-param-pages",inputPageName:"macro-param-pages"};return a["space-and-page"](d,c)}}}})})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.gadgets.embedded:gadget-core-resources', location = 'js/rpc.js' */
var gadgets=gadgets||{};gadgets.rpc=function(){var CALLBACK_NAME="__cb";var DEFAULT_NAME="";var FE_G2C_CHANNEL="__g2c_rpc";var FE_C2G_CHANNEL="__c2g_rpc";var services={};var iframePool=[];var relayUrl={};var useLegacyProtocol={};var authToken={};var callId=0;var callbacks={};var setup={};var sameDomain={};var params={};if(gadgets.util){params=gadgets.util.getUrlParameters()}authToken[".."]=params.rpctoken||params.ifpctok||0;function getRelayChannel(){return typeof window.postMessage==="function"?"wpm":typeof document.postMessage==="function"?"dpm":navigator.product==="Gecko"?"fe":"ifpc"}function setupChannel(){if(relayChannel==="dpm"||relayChannel==="wpm"){window.addEventListener("message",function(packet){try{if(typeof packet==="object"&&typeof packet.data==="string"){process(gadgets.json.parse(packet.data))}}catch(e){if(AJS.debug){var origin=packet&&packet.origin?packet.origin:"unknown origin";AJS.log("Error processing gadget rpc message from '"+origin+"': "+e)}}},false)}}var relayChannel=getRelayChannel();setupChannel();services[DEFAULT_NAME]=function(){throw new Error("Unknown RPC service: "+this.s)};services[CALLBACK_NAME]=function(callbackId,result){var callback=callbacks[callbackId];if(callback){delete callbacks[callbackId];callback(result)}};function setupFrame(frameId){if(setup[frameId]){return }if(relayChannel==="fe"){try{var frame=document.getElementById(frameId);frame[FE_G2C_CHANNEL]=function(args){process(gadgets.json.parse(args))}}catch(e){}}setup[frameId]=true}function encodeLegacyData(args){var stringify=gadgets.json.stringify;var argsEscaped=[];for(var i=0,j=args.length;i<j;++i){argsEscaped.push(encodeURIComponent(stringify(args[i])))}return argsEscaped.join("&")}function process(rpc){if(rpc&&typeof rpc.s==="string"&&typeof rpc.f==="string"&&rpc.a instanceof Array){if(authToken[rpc.f]){if(authToken[rpc.f]!=rpc.t){if(AJS.debug){console.log("Invalid auth token received for operation: "+rpc.s)}return }}if(rpc.c){rpc.callback=function(result){gadgets.rpc.call(rpc.f,CALLBACK_NAME,null,rpc.c,result)}}var result=(services[rpc.s]||services[DEFAULT_NAME]).apply(rpc,rpc.a);if(rpc.c&&typeof result!="undefined"){gadgets.rpc.call(rpc.f,CALLBACK_NAME,null,rpc.c,result)}}}function callFrameElement(targetId,serviceName,from,rpcData,callArgs){try{if(from!=".."){var fe=window.frameElement;if(typeof fe[FE_G2C_CHANNEL]==="function"){if(typeof fe[FE_G2C_CHANNEL][FE_C2G_CHANNEL]!=="function"){fe[FE_G2C_CHANNEL][FE_C2G_CHANNEL]=function(args){process(gadgets.json.parse(args))}}fe[FE_G2C_CHANNEL](rpcData);return }}else{var frame=document.getElementById(targetId);if(typeof frame[FE_G2C_CHANNEL]==="function"&&typeof frame[FE_G2C_CHANNEL][FE_C2G_CHANNEL]==="function"){frame[FE_G2C_CHANNEL][FE_C2G_CHANNEL](rpcData);return }}}catch(e){}callIfpc(targetId,serviceName,from,rpcData,callArgs)}function callIfpc(targetId,serviceName,from,rpcData,callArgs){var relay=gadgets.rpc.getRelayUrl(targetId);if(!relay){throw new Error("No relay file assigned for IFPC")}var src=null;if(useLegacyProtocol[targetId]){src=[relay,"#",encodeLegacyData([from,callId,1,0,encodeLegacyData([from,serviceName,"","",from].concat(callArgs))])].join("")}else{src=[relay,"#",targetId,"&",from,"@",callId,"&1&0&",encodeURIComponent(rpcData)].join("")}emitInvisibleIframe(src)}function emitInvisibleIframe(src){var iframe;for(var i=iframePool.length-1;i>=0;--i){var ifr=iframePool[i];try{if(ifr&&(ifr.recyclable||ifr.readyState==="complete")){ifr.parentNode.removeChild(ifr);if(window.ActiveXObject){iframePool[i]=ifr=null;iframePool.splice(i,1)}else{ifr.recyclable=false;iframe=ifr;break}}}catch(e){}}if(!iframe){iframe=document.createElement("iframe");iframe.style.border=iframe.style.width=iframe.style.height="0px";iframe.style.visibility="hidden";iframe.style.position="absolute";iframe.onload=function(){this.recyclable=true};iframePool.push(iframe)}iframe.src=src;setTimeout(function(){document.body.appendChild(iframe)},0)}function callSameDomain(target,rpc){if(typeof sameDomain[target]==="undefined"){sameDomain[target]=false;var targetEl=null;if(target===".."){targetEl=parent}else{targetEl=frames[target]}try{sameDomain[target]=targetEl.gadgets.rpc.receiveSameDomain}catch(e){}}if(typeof sameDomain[target]==="function"){sameDomain[target](rpc);return true}return false}if(gadgets.config){function init(config){if(config.rpc.parentRelayUrl.substring(0,7)==="http://"){relayUrl[".."]=config.rpc.parentRelayUrl}else{var params=document.location.search.substring(0).split("&");var parentParam="";for(var i=0,param;param=params[i];++i){if(param.indexOf("parent=")===0){parentParam=decodeURIComponent(param.substring(7));break}}relayUrl[".."]=parentParam+config.rpc.parentRelayUrl}useLegacyProtocol[".."]=!!config.rpc.useLegacyProtocol}var requiredConfig={parentRelayUrl:gadgets.config.NonEmptyStringValidator};gadgets.config.register("rpc",requiredConfig,init)}return{register:function(serviceName,handler){if(serviceName==CALLBACK_NAME){throw new Error("Cannot overwrite callback service")}if(serviceName==DEFAULT_NAME){throw new Error("Cannot overwrite default service:"+" use registerDefault")}services[serviceName]=handler},unregister:function(serviceName){if(serviceName==CALLBACK_NAME){throw new Error("Cannot delete callback service")}if(serviceName==DEFAULT_NAME){throw new Error("Cannot delete default service:"+" use unregisterDefault")}delete services[serviceName]},registerDefault:function(handler){services[""]=handler},unregisterDefault:function(){delete services[""]},call:function(targetId,serviceName,callback,var_args){++callId;targetId=targetId||"..";if(callback){callbacks[callId]=callback}var from="..";if(targetId===".."){from=window.name}var rpc={s:serviceName,f:from,c:callback?callId:0,a:Array.prototype.slice.call(arguments,3),t:authToken[targetId]};if(callSameDomain(targetId,rpc)){return }var rpcData=gadgets.json.stringify(rpc);var channelType=relayChannel;if(useLegacyProtocol[targetId]){channelType="ifpc"}switch(channelType){case"dpm":var targetDoc=targetId===".."?parent.document:frames[targetId].document;targetDoc.postMessage(rpcData);break;case"wpm":var targetWin=targetId===".."?parent:frames[targetId];targetWin.postMessage(rpcData,relayUrl[targetId]);break;case"fe":callFrameElement(targetId,serviceName,from,rpcData,rpc.a);break;default:callIfpc(targetId,serviceName,from,rpcData,rpc.a);break}},getRelayUrl:function(targetId){return relayUrl[targetId]},setRelayUrl:function(targetId,url,opt_useLegacy){relayUrl[targetId]=url;useLegacyProtocol[targetId]=!!opt_useLegacy},setAuthToken:function(targetId,token){authToken[targetId]=token;setupFrame(targetId)},getRelayChannel:function(){return relayChannel},receive:function(fragment){if(fragment.length>4){process(gadgets.json.parse(decodeURIComponent(fragment[fragment.length-1])))}},receiveSameDomain:function(rpc){rpc.a=Array.prototype.slice.call(rpc.a);window.setTimeout(function(){process(rpc)},0)}}}();
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.gadgets.embedded:gadget-core-resources', location = 'js/util.js' */
Function.prototype.inherits=function(parentCtor){function tempCtor(){}tempCtor.prototype=parentCtor.prototype;this.superClass_=parentCtor.prototype;this.prototype=new tempCtor();this.prototype.constructor=this};
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.gadgets.embedded:gadget-core-resources', location = 'js/json.js' */
var gadgets=gadgets||{};gadgets.json=function(){function f(n){return n<10?"0"+n:n}Date.prototype.toJSON=function(){return[this.getUTCFullYear(),"-",f(this.getUTCMonth()+1),"-",f(this.getUTCDate()),"T",f(this.getUTCHours()),":",f(this.getUTCMinutes()),":",f(this.getUTCSeconds()),"Z"].join("")};var m={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function stringify(value){var a,i,k,l,r=/["\\\x00-\x1f\x7f-\x9f]/g,v;switch(typeof value){case"string":return r.test(value)?'"'+value.replace(r,function(a){var c=m[a];if(c){return c}c=a.charCodeAt();return"\\u00"+Math.floor(c/16).toString(16)+(c%16).toString(16)})+'"':'"'+value+'"';case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}a=[];if(typeof value.length==="number"&&!(value.propertyIsEnumerable("length"))){l=value.length;for(i=0;i<l;i+=1){a.push(stringify(value[i])||"null")}return"["+a.join(",")+"]"}for(k in value){if(value.hasOwnProperty(k)){if(typeof k==="string"){v=stringify(value[k]);if(v){a.push(stringify(k)+":"+v)}}}}return"{"+a.join(",")+"}"}}return{stringify:stringify,parse:function(text){if(/^[\],:{}\s]*$/.test(text.replace(/\\["\\\/b-u]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){return eval("("+text+")")}return false}}}();
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.gadgets.embedded:gadget-core-resources', location = 'js/gadgets-core.js' */
var gadgets=gadgets||{};gadgets.error={};gadgets.error.SUBCLASS_RESPONSIBILITY="subclass responsibility";gadgets.error.TO_BE_DONE="to be done";gadgets.log=function(message){if(window.console&&console.log){console.log(message)}else{var logEntry=document.createElement("div");logEntry.className="gadgets-log-entry";logEntry.innerHTML=message;document.body.appendChild(logEntry)}};gadgets.Extensible=function(){};gadgets.Extensible.prototype.setDependencies=function(dependencies){for(var p in dependencies){this[p]=dependencies[p]}};gadgets.Extensible.prototype.getDependencies=function(name){return this[name]};gadgets.UserPrefStore=function(){};gadgets.UserPrefStore.prototype.getPrefs=function(gadget){throw Error(gadgets.error.SUBCLASS_RESPONSIBILITY)};gadgets.UserPrefStore.prototype.savePrefs=function(gadget){throw Error(gadgets.error.SUBCLASS_RESPONSIBILITY)};gadgets.DefaultUserPrefStore=function(){gadgets.UserPrefStore.call(this)};gadgets.DefaultUserPrefStore.inherits(gadgets.UserPrefStore);gadgets.DefaultUserPrefStore.prototype.getPrefs=function(gadget){};gadgets.DefaultUserPrefStore.prototype.savePrefs=function(gadget){};gadgets.GadgetService=function(){};gadgets.GadgetService.prototype.setHeight=function(elementId,height){throw Error(gadgets.error.SUBCLASS_RESPONSIBILITY)};gadgets.GadgetService.prototype.setTitle=function(gadget,title){throw Error(gadgets.error.SUBCLASS_RESPONSIBILITY)};gadgets.GadgetService.prototype.setUserPref=function(id){throw Error(gadgets.error.SUBCLASS_RESPONSIBILITY)};gadgets.IfrGadgetService=function(){gadgets.GadgetService.call(this);var service=this;gadgets.rpc.register("resize_iframe",function(){service.setHeight.apply(this,arguments)});gadgets.rpc.register("set_pref",function(){service.setUserPref.apply(this,arguments)});gadgets.rpc.register("set_title",function(){service.setTitle.apply(this,arguments)});gadgets.rpc.register("requestNavigateTo",function(){service.requestNavigateTo.apply(this,arguments)})};gadgets.IfrGadgetService.inherits(gadgets.GadgetService);gadgets.IfrGadgetService.prototype.setHeight=function(height){if(height>gadgets.container.maxheight_){height=gadgets.container.maxheight_}var element=document.getElementById(this.f);if(element){element.style.height=height+"px"}};gadgets.IfrGadgetService.prototype.requestNavigateTo=function(view,opt_params){var id=this.getGadgetIdFromModuleId(this.f);var url=this.getUrlForView(view);if(opt_params){var paramStr=JSON.stringify(opt_params);if(paramStr.length>0){url+="&appParams="+encodeURIComponent(paramStr)}}if(url&&document.location.href.indexOf(url)==-1){document.location.href=url}};gadgets.IfrGadgetService.prototype.getUrlForView=function(view){if(view==="canvas"){return"/canvas"}else{if(view==="profile"){return"/profile"}else{return null}}};gadgets.IfrGadgetService.prototype.getGadgetIdFromModuleId=function(moduleId){return parseInt(moduleId.match(/_([0-9]+)$/)[1],10)};gadgets.LayoutManager=function(){};gadgets.LayoutManager.prototype.getGadgetChrome=function(gadget){throw Error(gadgets.error.SUBCLASS_RESPONSIBILITY)};gadgets.StaticLayoutManager=function(){gadgets.LayoutManager.call(this)};gadgets.StaticLayoutManager.inherits(gadgets.LayoutManager);gadgets.StaticLayoutManager.prototype.setGadgetChromeIds=function(gadgetChromeIds){this.gadgetChromeIds_=gadgetChromeIds};gadgets.StaticLayoutManager.prototype.getGadgetChrome=function(gadget){var chromeId=this.gadgetChromeIds_[gadget.id];return chromeId?document.getElementById(chromeId):null};gadgets.FloatLeftLayoutManager=function(layoutRootId){gadgets.LayoutManager.call(this);this.layoutRootId_=layoutRootId};gadgets.FloatLeftLayoutManager.inherits(gadgets.LayoutManager);gadgets.FloatLeftLayoutManager.prototype.getGadgetChrome=function(gadget){var layoutRoot=document.getElementById(this.layoutRootId_);if(layoutRoot){var chrome=document.createElement("div");chrome.className="gadgets-gadget-chrome";chrome.style.cssFloat="left";layoutRoot.appendChild(chrome);return chrome}else{return null}};
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.gadgets:macro-browser-for-gadgetsplugin', location = 'script/gadget-macro-browser.js' */
AJS.toInit(function(a){var b={};b.postPreview=function(h,d){var f=h.contentWindow.AJS;var c={};var k=a("#macro-param-div-preferences input").val().split("&");for(var j=0,o=k.length;j<o;j++){var g=k[j].split("=");try{c[decodeURI(g[0])]=decodeURI(g[1])}catch(l){}}if(d.needsConfig&&f){var m=!!c.isConfigured;if(!m){var n=a("#macro-browser-dialog .dialog-button-panel .ok");a("#save-warning-span").addClass("gadget-not-configured-warning").text("Please complete the configuration in the preview area first").removeClass("hidden");n.prop("disabled",true)}}};b.beforeParamsSet=function(j,c){var h=j.preferences;if(!c&&h){var g=h.split("&");for(var d=0,f=g.length;d<f;d++){var e=g[d].split("=");j[decodeURI(e[0])]=decodeURI(e[1])}}return j};b.updateMacroParametersForPreview=function(c){c.forceWrite=true;return c};b.manipulateMarkup=function(f){if(AJS.MacroBrowser.gadgetPrefsChanged){var d=top.document.getElementById("macro-insert-container");var g=a("#macro-param-div-preferences input",d);var c="";for(var e in AJS.MacroBrowser.gadgetPrefs){if(c.length!=0){c+="&"}c=c+encodeURI(e)+"="+encodeURI(AJS.MacroBrowser.gadgetPrefs[e])}g.val(c)}};b.getMacroDetailsFromSelectedMacro=function(f,g){var c=g.params.url;for(var e=0,h=f.length;e<h;e++){var d=f[e];if(d.macroName===g.name&&d.gadgetUrl===c){return d}}};b.beforeParamsRetrieved=function(p,h,j){var s="";if(h.nonHiddenUserPrefs){var m=true;var d={},f=p.preferences;if(f){var n=f.split("&");for(var l=0,q=n.length;l<q;l++){var k=n[l].split("=");var o=decodeURI(k[0]);var r=decodeURI(k[1]);d[o]=r}}for(var e in j){d[e]=j[e]}var c=function(v,t,w){var x=v.formDetails.parameters;for(var u=0;u<x.length;u++){if(x[u].name==t){return w==x[u].defaultValue}}AJS.log("Unable to find matching param for "+t);return false};for(var g in d){if(!c(h,g,d[g])){if(!m){s+="&"}m=false;s=s+encodeURI(g)+"="+encodeURI(d[g])}}p.preferences=s}return p};AJS.MacroBrowser.setMacroJsOverride("gadget",b)});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.analytics.analytics-client:js-events', location = 'js/store-1.3.1.js' */
(function(){var l={},h=window,k=h.document,c="localStorage",n="globalStorage",d="__storejs__",g;l.disabled=false;l.set=function(e,o){};l.get=function(e){};l.remove=function(e){};l.clear=function(){};l.transact=function(e,o){var p=l.get(e);if(typeof p=="undefined"){p={}}o(p);l.set(e,p)};l.serialize=function(e){return JSON.stringify(e)};l.deserialize=function(e){if(typeof e!="string"){return undefined}return JSON.parse(e)};function b(){try{return(c in h&&h[c])}catch(e){return false}}function m(){try{return(n in h&&h[n]&&h[n][h.location.hostname])}catch(e){return false}}if(b()){g=h[c];l.set=function(e,o){if(o===undefined){return l.remove(e)}g.setItem(e,l.serialize(o))};l.get=function(e){return l.deserialize(g.getItem(e))};l.remove=function(e){g.removeItem(e)};l.clear=function(){g.clear()}}else{if(m()){g=h[n][h.location.hostname];l.set=function(e,o){if(o===undefined){return l.remove(e)}g[e]=l.serialize(o)};l.get=function(e){return l.deserialize(g[e]&&g[e].value)};l.remove=function(e){delete g[e]};l.clear=function(){for(var e in g){delete g[e]}}}else{if(k.documentElement.addBehavior){var j,f;try{f=new ActiveXObject("htmlfile");f.open();f.write('<script>document.w=window<\/script><iframe src="/favicon.ico"></frame>');f.close();j=f.w.frames[0].document;g=j.createElement("div")}catch(i){g=k.createElement("div");j=k.body}function a(e){return function(){var p=Array.prototype.slice.call(arguments,0);p.unshift(g);j.appendChild(g);g.addBehavior("#default#userData");g.load(c);var o=e.apply(l,p);j.removeChild(g);return o}}l.set=a(function(p,e,o){if(o===undefined){return l.remove(e)}p.setAttribute(e,l.serialize(o));p.save(c)});l.get=a(function(o,e){return l.deserialize(o.getAttribute(e))});l.remove=a(function(o,e){o.removeAttribute(e);o.save(c)});l.clear=a(function(q){var o=q.XMLDocument.documentElement.attributes;q.load(c);for(var p=0,e;e=o[p];p++){q.removeAttribute(e.name)}q.save(c)})}}}try{l.set(d,d);if(l.get(d)!=d){l.disabled=true}l.remove(d)}catch(i){l.disabled=true}if(typeof module!="undefined"){module.exports=l}else{if(typeof define==="function"&&define.amd){define(l)}else{this.store=l}}})();
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.analytics.analytics-client:js-events', location = 'js/atlassian-analytics.js' */
(function(b){var m=AJS.$.ajax;var h="atlassian-analytics";var g=typeof AJS.contextPath=="function"?AJS.contextPath():typeof AJS.Confluence!="undefined"?AJS.Confluence.getContextPath():window.contextPath!=null?window.contextPath:"";var l=null;var i=null;var d=null;var n="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(u){var t=Math.random()*16|0,s=u=="x"?t:(t&3|8);return s.toString(16)});var p=function(){var s="unknown";if(document.body.id=="jira"){s="jira"}else{if(document.body.id=="com-atlassian-confluence"){s="confluence"}}i=h+"."+s;d=i+".lock"};var c=function(){if(store.get(d)){return false}store.set(d,n);return(store.get(d)===n)};var q=function(){store.set(d,null)};var f=function(){var t=[],v,w,s,u;if(AJS.EventQueue.length==0){return}t=store.get(i)||t;for(s=0,u=AJS.EventQueue.length;s<u;++s){w=AJS.EventQueue[s];if(w.name){v={name:w.name,properties:w.properties,time:w.time||0};t.push(v)}}AJS.EventQueue.length=0;store.set(i,t)};var e=function(){var t;if(!c()){return}f();t=store.get(i);if(t&&t.length){store.remove(i);q();if(k(t)){var u=new Date().getTime();for(var s=0;s<t.length;s++){if(t[s].time>0){t[s].timeDelta=t[s].time-u}else{t[s].timeDelta=s-t.length}delete t[s].time}l=m({type:"POST",url:g+"/rest/analytics/1.0/publish/bulk",data:JSON.stringify(t),contentType:"application/json",dataType:"json"});l.fail(function(){AJS.EventQueue.concat(t);f()})}}else{q()}};var k=function(u){for(var t=u.length-1;t>=0;t--){var w="";var v=u[t];var s=v.properties;if(typeof v.name==="undefined"){w="you must provide a name for the event."}else{if(typeof s!=="undefined"&&s!==null){if(s.constructor!==Object){w="properties must be an object with key value pairs."}else{a(s)}}}if(w!==""){AJS.log("WARN: Invalid analytics event detected and ignored, "+w+"\nEvent: "+JSON.stringify(v));u.splice(t,1)}}return u.length};var a=function(u){for(var t in u){if(u.hasOwnProperty(t)){var s=u[t];if(typeof s!=="undefined"&&s!==null&&s.toString){u[t]=s.toString()}else{u[t]=""}}}};var j=function(){if(l&&!(l.state()==="resolved"||l.state()==="rejected")){l.abort()}};AJS.EventQueue=AJS.EventQueue||[];var o=Array.prototype.push;AJS.EventQueue.push=function(s){s.time=new Date().getTime();o.call(AJS.EventQueue,s)};AJS.toInit(function(){p();setTimeout(e,500);setInterval(e,5000);r()});b(window).unload(function(){j();f()});AJS.Analytics={triggerPrivacyPolicySafeEvent:function(s,t){AJS.log("WARN: 'triggerPrivacyPolicySafeEvent' has been deprecated");AJS.EventQueue.push({name:s,properties:t})}};AJS.bind("analytics",function(s,t){AJS.EventQueue.push({name:t.name,properties:t.data})});AJS.bind("analyticsEvent",function(s,t){AJS.EventQueue.push({name:t.name,properties:t.data})});var r=function(){if(window.location.pathname.indexOf("/secure/admin/ViewApplicationProperties")>-1){AJS.$("[data-property-id='analytics-enabled']").remove()}else{if(window.location.pathname.indexOf("/secure/admin/EditApplicationProperties")>-1){var t=AJS.$(":contains(Enable Atlassian analytics)");if(t.size()>0){var s=t[t.size()-2];if(s){s.remove()}}}}}}(AJS.$));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.analytics.analytics-client:policy-update', location = 'js/policy-update.js' */

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:application-header-administration-cog-resource', location = 'header/cog.js' */
var NavLinks=(function(a){a.ApplicationHeader=function(b){b.Cog=(function(){var c=function(){var d=AJS.$("#system-admin-menu-content");if(d.length>0){return d}var e=AJS.$("#admin-menu-link-content");if(e.length>0){return e}return AJS.$("#bamboo\\.global\\.header-admin\\.menu")};return{getDropdown:c}}());return b}(a.ApplicationHeader||{});return a}(NavLinks||{}));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:administration-shortcuts-resources', location = 'adminshortcuts/adminshortcuts.soy' */
// This file was automatically generated from adminshortcuts.soy.
// Please don't edit this file by hand.

if (typeof navlinks == 'undefined') { var navlinks = {}; }
if (typeof navlinks.templates == 'undefined') { navlinks.templates = {}; }
if (typeof navlinks.templates.adminshortcuts == 'undefined') { navlinks.templates.adminshortcuts = {}; }


navlinks.templates.adminshortcuts.section = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  var param5 = new soy.StringBuilder('<ul class="aui-list-truncate">');
  var linkList7 = opt_data.links;
  var linkListLen7 = linkList7.length;
  for (var linkIndex7 = 0; linkIndex7 < linkListLen7; linkIndex7++) {
    var linkData7 = linkList7[linkIndex7];
    param5.append('<li><a href="', soy.$$escapeHtml(linkData7.link), '">', soy.$$escapeHtml(linkData7.label), '</a></li>');
  }
  param5.append('</ul>');
  aui.dropdown2.section({id: 'nl-remote-admin-section', label: "Other applications", content: param5.toString()}, output);
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:administration-shortcuts-resources', location = 'adminshortcuts/adminnavlinks.js' */
var NavLinks=(function(a){a.AdminShortcuts=(function(){var c=function(){return AJS.$.ajax({url:AJS.contextPath()+"/rest/menu/latest/admin",cache:false,dataType:"json"})};var b=function(){AJS.$("#nl-remote-admin-section").on("click","a",function(){NL.trackEvent("remoteAdminItemSelected",NL.getCurrentApplication(),$(this).attr("href"))})};return{render:function(){c().done(function(e){e=_.reject(e,function(f){return f.local===true});if(e.length){var d=navlinks.templates.adminshortcuts.section({links:e});a.ApplicationHeader.Cog.getDropdown().append(d);b()}})}}}());return a}(NavLinks||{}));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:administration-shortcuts', location = 'adminshortcuts/adminshortcuts-cdn.js' */
AJS.toInit(function(){if(AJS.DarkFeatures&&AJS.DarkFeatures.isEnabled("rotp.admin.shortcuts")){NavLinks.AdminShortcuts.render()}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-projectshortcuts', location = 'projectshortcuts/projectshortcuts.soy' */
// This file was automatically generated from projectshortcuts.soy.
// Please don't edit this file by hand.

if (typeof navlinks == 'undefined') { var navlinks = {}; }
if (typeof navlinks.templates == 'undefined') { navlinks.templates = {}; }
if (typeof navlinks.templates.projectshortcuts == 'undefined') { navlinks.templates.projectshortcuts = {}; }


navlinks.templates.projectshortcuts.dialogContent = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (opt_data.localShortcuts && opt_data.localShortcuts.length > 0) {
    navlinks.templates.projectshortcuts.dialogContentShortcuts({shortcuts: opt_data.localShortcuts, listClass: 'projectshortcut-links'}, output);
  }
  if (opt_data.remoteShortcuts != null) {
    if (opt_data.remoteShortcuts.length > 0) {
      output.append('<h2 class="projectshortcuts-heading">Related Links</h2>');
      navlinks.templates.projectshortcuts.dialogContentShortcuts(soy.$$augmentData(opt_data.remoteShortcuts, {shortcuts: opt_data.remoteShortcuts, listClass: 'projectshortcut-links'}), output);
    }
  } else {
    navlinks.templates.projectshortcuts.dialogLoading(null, output);
  }
  return opt_sb ? '' : output.toString();
};


navlinks.templates.projectshortcuts.headingWrapper = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="project-dialog-header-wrapper"><div class="project-header"><img class="project-img" src="', soy.$$escapeHtml(opt_data.logoUrl), '"><h2 class="dialog-title">', soy.$$escapeHtml(opt_data.title), '</h2></div><div class="project-content-wrapper">', opt_data.contentHtml, '</div></div>');
  return opt_sb ? '' : output.toString();
};


navlinks.templates.projectshortcuts.dialogContentShortcuts = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<ul', (opt_data.listClass) ? ' class="' + soy.$$escapeHtml(opt_data.listClass) + '"' : '', '>');
  var shortcutList35 = opt_data.shortcuts;
  var shortcutListLen35 = shortcutList35.length;
  for (var shortcutIndex35 = 0; shortcutIndex35 < shortcutListLen35; shortcutIndex35++) {
    var shortcutData35 = shortcutList35[shortcutIndex35];
    output.append('<li', (shortcutIndex35 == shortcutListLen35 - 1) ? ' class="last"' : '', '>');
    navlinks.templates.projectshortcuts.dialogContentShortcut(shortcutData35, output);
    output.append('</li>');
  }
  output.append('</ul>');
  return opt_sb ? '' : output.toString();
};


navlinks.templates.projectshortcuts.dialogContentShortcut = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<a href="', soy.$$escapeHtml(opt_data.link), '"', (opt_data.tooltip) ? ' title="' + soy.$$escapeHtml(opt_data.tooltip) + '"' : '', '>', soy.$$escapeHtml(opt_data.label), '</a>');
  return opt_sb ? '' : output.toString();
};


navlinks.templates.projectshortcuts.dialogLoading = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="projectshortcuts-loading">', (opt_data != null && opt_data.text) ? soy.$$escapeHtml(opt_data.text) : '', '</div>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-projectshortcuts', location = 'projectshortcuts/projectshortcuts.js' */
(function(e,g){var i,k={},m="key",b="name",j="entity-type";function f(s){var n=e(this),o=n.data(m),q=n.data(b),p=n.data(j);if(typeof o==="undefined"){return}s.preventDefault();i=new AJS.Dialog({width:600,keypressListener:function(u){if(u.which==jQuery.ui.keyCode.ESCAPE){i.remove()}},id:"project-shortcuts-dialog"}).addCancel("Close",function(){i.remove()}).addPanel("",navlinks.templates.projectshortcuts.headingWrapper({title:q,logoUrl:h(),contentHtml:navlinks.templates.projectshortcuts.dialogLoading({text:"Retrieving links…"})})).show();c(i);if(!k[o]){k[o]={entity:{title:q},localShortcuts:null,remoteShortcuts:null};d(AJS.contextPath()+"/rest/project-shortcuts/1.0/local/"+o,{entityType:p}).done(t);d(AJS.contextPath()+"/rest/project-shortcuts/1.0/remote/"+o,{entityType:p}).done(r).fail(function(){var u=i.getCurrentPanel().body.find(".project-content-wrapper");u.find(".projectshortcuts-loading").remove();AJS.messages.error(u,{body:"Could not retrieve remote project shortcuts",closeable:false});c(i)})}else{l(k[o])}function t(u){k[o].localShortcuts=u.shortcuts;l(k[o])}function r(u){k[o].remoteShortcuts=u.shortcuts;l(k[o])}}function h(){return e(".project-shortcut-dialog-trigger img").attr("src")}function l(n){if(n.localShortcuts){i.getCurrentPanel().html(navlinks.templates.projectshortcuts.headingWrapper({title:n.entity.title,logoUrl:h(),contentHtml:navlinks.templates.projectshortcuts.dialogContent(n)}));c(i)}}function a(p){var o=210;if(!p||p.length<=o){return p}var n=o;while(n>0&&p.charAt(n)!=" "){n--}if(n==0){n=o}p=p.substring(0,n);if(p.length>=n){p=p+"..."}return p}function c(n){var q=n.popup.element,p=q.find(".dialog-panel-body"),o=q.find(".dialog-components");p.height("auto");q.height(o.outerHeight()-1);e(".aui-shadow").remove()}function d(n,o){return e.ajax({url:n,cache:false,data:o,dataType:"json"})}e(document).on("click",".project-shortcut-dialog-trigger",f)}(jQuery,window.NL=(window.NL||{})));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:atlassian-ui-popup-display-controller', location = 'popups/DisplayController.js' */
AJS.Popups=AJS.Popups||{};AJS.Popups.DisplayController=function(){var c=[];var a=false;var b=false;AJS.toInit(function(){setTimeout(function(){AJS.Popups.DisplayController.render()},0)});return{request:function(d){c.push(d);if(a&&b===false){this.render()}},render:function(){c.sort(function(e,d){return e.weight-d.weight});a=true;if(c.length!==0){b=true;c[0].show()}}}}();
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.extra.jira:common-resources', location = 'templates/extra/jira/common.js' */
AJS.JiraIssues={Remote:{}};var appLinksI18n={entries:{}};jQuery(document).ready(function(){AJS.JiraIssues=jQuery.extend(AJS.JiraIssues||{},{bindOAuthLink:function(c,f){var e={onSuccess:function(){f()},onFailure:function(){}};var d=c.attr("href");c.click(function(g){AppLinks.authenticateRemoteCredentials(d,e.onSuccess,e.onFailure);g.preventDefault()})},getOAuthRealm:function(f){var d=f.getResponseHeader("WWW-Authenticate")||"";var c=/OAuth realm\=\"([^\"]+)\"/;var e=c.exec(d);if(e){return e[1]}else{return null}}});jQuery("a.static-oauth-init").each(function(){AJS.JiraIssues.bindOAuthLink(jQuery(this),function(){window.location.reload()})});jQuery("a.anonymous-init").each(function(f,e){var c=encodeURIComponent(window.location.pathname.replace(Confluence.getContextPath(),""));var d=Confluence.getContextPath()+"/login.action?os_destination="+c;AJS.$(e).attr("href",d)});var a=function(j){var e=AJS.JiraIssues.Remote[j];var h="";for(var g=0;g<e.length;g++){h=h+(e[g].key+(g<e.length-1?",":""))}var d=function(l){var i="issuekey in ("+l+")";var m="/sr/jira.issueviews:searchrequest-xml/temp/SearchRequest.xml?jqlQuery="+encodeURIComponent(i)+"&returnMax=true";var k=contextPath+"/plugins/servlet/issue-retriever?appId="+j+"&url="+encodeURIComponent(m)+"&columns=summary&columns=type&columns=resolution&columns=status";return k};var f=function(k){var i=AJS.$("item",k);i.each(function(){var u=AJS.$("link",this).text();var v=AJS.$("key",this).text();var r=AJS.$("summary",this).text();var s=AJS.$("type",this);var m=AJS.$("resolution",this);var w=m.attr("id")!="-1";var o=AJS.$("status",this);var n=AJS.$(".unknown-jira-issue."+v);for(var p=0;p<n.length;p++){var t=AJS.$("<a style=\"background-image: url('"+s.attr("iconUrl")+'\')" href="'+u+'"></a>');t.text(v);var l=AJS.$('<span class="jira-status"></span>');l.text(o.text().toUpperCase());var q=AJS.$('<span class="jira-issue'+(w?" resolved":"")+'" ></span>');q.append(t);q.append(document.createTextNode(" - "+r+" - "));q.append(l);AJS.$(n[p]).replaceWith(q)}})};var c=d(h);AJS.$.ajax({url:c,success:f,error:function(l){if(l.status==401){var k=AJS.JiraIssues.getOAuthRealm(l);if(k){var i={};AJS.$(e).each(function(){if(!i[this.key]){i[this.key]=true;var m=AJS.$('<span class="oauth-msg"> - <a class="oauth-init" href="'+k+'">'+"Authenticate"+"</a> "+"to see issue details"+"</span>");AJS.$(".unknown-jira-issue."+this.key).addClass("single-issue-oauth").append(m)}});AJS.JiraIssues.bindOAuthLink(AJS.$(".single-issue-oauth a.oauth-init"),function(){window.location.reload()})}}else{if(l.status==400&&e.length>1){AJS.$(e).each(function(){var m=this.key;var n=d(m);AJS.$.ajax({url:n,success:f,error:function(p){var o=AJS.$(".unknown-jira-issue."+m);o.removeClass("single-issue-oauth");AJS.$(".oauth-msg",o).remove();o.addClass("jira-error")}})})}}}})};AJS.$(".unknown-jira-issue").each(function(e,f){var d=AJS.$(f);var g=d.attr("data-app-link");var c=d.attr("data-key");AJS.JiraIssues.Remote[g]=AJS.JiraIssues.Remote[g]||[];AJS.JiraIssues.Remote[g].push({key:c})});for(var b in AJS.JiraIssues.Remote){a(b)}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.extra.jira:refresh-resources', location = '/jira/refresh.js' */
(function(b){var c={REFRESH_STATE_STARTED:1,REFRESH_STATE_DONE:2,REFRESH_STATE_FAILED:3,refreshs:[],sortables:[],init:function(){a.getAll().each(function(){c.registerRefresh(this.getRefresh())});b.each(this.refreshs,function(e,f){var g=a.get(f.id);g.getRefreshButton().bind("click",f,c.handleRefreshClick);g.getRefreshLink().bind("click",f,c.handleRefreshClick)});d.getAll().each(function(){c.registerSort(this.getSortable())});b.each(this.sortables,function(f,e){var g=d.get(e.id);g.getHeadersTable().bind("click",e,c.onHeaderClick)})},onHeaderClick:function(m){refeshId=m.data.id;var f="ASC";if(b(this).hasClass("tablesorter-headerAsc")){f="DESC"}var h=b(this).find(".jim-table-header-content").text();var l=b("#refresh-wiki-"+refeshId).val();var g=b("#refresh-page-id-"+refeshId).val();var k=b("#refresh-"+refeshId);var i=new c.Refresh(refeshId,l,g,k.html());var j=a.get(refeshId);j.updateRefreshVisibility(c.REFRESH_STATE_STARTED);c.processRefresh(i,h,f)},replaceRefresh:function(g,e){var f=a.get(g);f.updateRefreshVisibility(c.REFRESH_STATE_DONE);b.each(this.refreshs,function(l,m){if(m.id===g){c.refreshs.splice(l,1);var n=a.get(e);var j=n.getRefresh();c.registerRefresh(j);c.sortables.splice(l,1);var h=d.get(e);var k=h.getSortable();c.registerSort(k);n.getRefreshButton().bind("click",j,c.handleRefreshClick);n.getRefreshLink().bind("click",j,c.handleRefreshClick);h.getHeadersTable().bind("click",k,c.onHeaderClick)}})},registerRefresh:function(e){if(!(e instanceof c.Refresh)){throw "Refresh object must be an instance of RefreshMacro.Refresh"}c.refreshs.push(e)},registerSort:function(e){if(!(e instanceof c.Sortable)){throw "Refresh object must be an instance of RefreshMacro.Refresh"}c.sortables.push(e)},handleRefreshClick:function(h){var f=h.data;var g=a.get(f.id);g.getMacroPanel().html(f.loadingMsg);g.updateRefreshVisibility(c.REFRESH_STATE_STARTED);c.processRefresh(f)},processRefresh:function(g,f,e){var h={};if(arguments.length==1){h={pageId:g.pageId,wikiMarkup:g.wiki}}else{if(arguments.length==3){h={pageId:g.pageId,wikiMarkup:g.wiki,columnName:f,order:e}}}AJS.$.ajax({type:"POST",dataType:"html",url:Confluence.getContextPath()+"/plugins/servlet/jiraRefreshRenderer",data:h,success:function(j){var i=b(j).attr("id");if(i){i=i.replace("refresh-module-","");a.get(g.id).getContentModule().replaceWith(j);new c.CallbackSupport(g).callback(i)}else{new c.CallbackSupport(g).errorHandler(j)}},error:function(j,k,i){new c.CallbackSupport(g).errorHandler(i)}})}};c.Refresh=function(f,e){this.id=f;this.wiki=e;this.pageId=arguments.length>2?arguments[2]:null;this.loadingMsg=arguments.length>3?arguments[3]:null};c.CallbackSupport=function(e){this.refresh=e;this.module=b("#refresh-module-"+e.id)};c.CallbackSupport.prototype={errorHandler:function(f){var g=a.get(this.refresh.id);var e=AJS.format("There was a problem rendering this section: {0}",f);g.getErrorMessagePanel().html(e);g.updateRefreshVisibility(c.REFRESH_STATE_FAILED)},callback:function(e){c.replaceRefresh(this.refresh.id,e)}};var a=function(){if(arguments.length==1){this.id=arguments[0]}};var d=function(){if(arguments.length==1){this.id=arguments[0]}};a.prototype.getRefresh=function(){return new c.Refresh(this.id,this.getWikiMarkup(),this.getPageId(),this.getMacroPanel().html())};d.prototype.getSortable=function(){return new c.Sortable(this.id,b("#refresh-page-id-"+this.id).val(),b("#refresh-"+this.id).html())};a.get=function(f){var e=b("#refresh-"+f);if(!e){return null}return new a(f)};d.get=function(f){var e=b("#refresh-"+f);if(!e){return null}return new d(f)};c.Sortable=function(g,e,f){this.id=g;this.pageId=e;this.loadingMsg=f};d.getAll=function(){return b("div.refresh-macro").map(function(){var e=this.id.replace("refresh-","");return d.get(e)})};a.getAll=function(){return b("div.refresh-macro").map(function(){var e=this.id.replace("refresh-","");return a.get(e)})};a.prototype.getErrorMessagePanel=function(){return b("#error-message-"+this.id)};a.prototype.removeDarkLayer=function(){b("#jim-dark-layout-"+this.id).remove()};a.prototype.displayDarkLayer=function(){var f=b("#refresh-module-"+this.id);var e=f.position();b("<div />",{id:"jim-dark-layout-"+this.id,"class":"jim-sortable-dark-layout",css:{top:e.top+"px",left:e.left+"px",width:f.width()+"px",height:f.height()+"px"}}).appendTo(f.parent())};a.prototype.getMacroPanel=function(){return b("#refresh-"+this.id)};d.prototype.getMacroPanel=function(){return b("#refresh-"+this.id).val()};a.prototype.getContentModule=function(){return b("#refresh-module-"+this.id)};a.prototype.getPageId=function(){return b("#refresh-page-id-"+this.id).val()};d.prototype.getPageId=function(){return b("#refresh-page-id-"+this.id).val()};a.prototype.getWikiMarkup=function(){return b("#refresh-wiki-"+this.id).val()};a.prototype.getRefreshButton=function(){return b("#refresh-issues-button-"+this.id)};d.prototype.getHeadersTable=function(){return b("#jira-issues-"+this.id+" .jira-tablesorter-header")};a.prototype.getRefreshLink=function(){return b("#refresh-issues-link-"+this.id)};a.prototype.getJiraIssuesArea=function(){return b("#jira-issues-"+this.id)};a.prototype.getIssuesCountArea=function(){return b("#total-issues-count-"+this.id)};a.prototype.updateRefreshVisibility=function(e){if(e===c.REFRESH_STATE_STARTED){this.displayDarkLayer()}else{if(e===c.REFRESH_STATE_FAILED){this.getRefreshButton().show();this.getRefreshLink().show();this.removeDarkLayer()}else{if(e===c.REFRESH_STATE_DONE){this.removeDarkLayer()}}}};b(function(){c.init()})})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.extra.jira:web-resources', location = 'resources/flexigrid/flexigrid.js' */
(function($){$.addFlex=function(t,p){if(t.grid){return false}p=$.extend({height:200,width:"auto",striped:true,novstripe:false,minwidth:30,minheight:80,resizable:true,url:false,method:"POST",dataType:"xml",errormsg:"Connection Error",usepager:false,nowrap:true,page:1,total:1,useRp:true,rp:15,rpOptions:[10,15,20,25,40],title:false,pagestat:"Displaying {from} to {to} of {total} items",procmsg:"Processing, please wait ...",query:"",qtype:"",nomsg:"No items",minColToggle:1,showToggleBtn:true,hideOnSubmit:true,autoload:true,blockOpacity:0.5,onToggleCol:false,onChangeSort:false,onSuccess:false,onSubmit:false,onReload:false},p);$(t).show().attr({cellPadding:0,cellSpacing:0,border:0}).removeAttr("width");var g={hset:{},rePosDrag:function(){var cdleft=0-this.hDiv.scrollLeft;if(this.hDiv.scrollLeft>0){cdleft-=Math.floor(p.cgwidth/2)}$(g.cDrag).css({top:g.hDiv.offsetTop+1});var cdpad=this.cdpad;$("div",g.cDrag).hide();$("thead tr:first th:visible",this.hDiv).each(function(){var n=$("thead tr:first th:visible",g.hDiv).index(this);var cdpos=parseInt($("div",this).width());var ppos=cdpos;if(cdleft==0){cdleft-=Math.floor(p.cgwidth/2)}cdpos=cdpos+cdleft+cdpad;$("div:eq("+n+")",g.cDrag).css({left:cdpos+"px"}).show();cdleft=cdpos})},fixHeight:function(newH){newH=false;if(!newH){newH=$(g.bDiv).height()}var hdHeight=$(this.hDiv).height();$("div",this.cDrag).each(function(){$(this).height(newH+hdHeight)});var nd=parseInt($(g.nDiv).height());if(nd>newH){$(g.nDiv).height(newH).width(200)}else{$(g.nDiv).height("auto").width("auto")}$(g.block).css({height:newH,marginBottom:(newH*-1)});var hrH=g.bDiv.offsetTop+newH;if(p.height!="auto"&&p.resizable){hrH=g.vDiv.offsetTop}$(g.rDiv).css({height:hrH})},dragStart:function(dragtype,e,obj){if(dragtype=="colresize"){$(g.nDiv).hide();$(g.nBtn).hide();var n=$("div",this.cDrag).index(obj);var ow=$("th:visible div:eq("+n+")",this.hDiv).width();$(obj).addClass("dragging").siblings().hide();$(obj).prev().addClass("dragging").show();this.colresize={startX:e.pageX,ol:parseInt(obj.style.left),ow:ow,n:n};$("body").css("cursor","col-resize")}else{if(dragtype=="vresize"){var hgo=false;$("body").css("cursor","row-resize");if(obj){hgo=true;$("body").css("cursor","col-resize")}this.vresize={h:p.height,sy:e.pageY,w:p.width,sx:e.pageX,hgo:hgo}}else{if(dragtype=="colMove"){$(g.nDiv).hide();$(g.nBtn).hide();this.hset=$(this.hDiv).offset();this.hset.right=this.hset.left+$("table",this.hDiv).width();this.hset.bottom=this.hset.top+$("table",this.hDiv).height();this.dcol=obj;this.dcoln=$("th",this.hDiv).index(obj);this.colCopy=document.createElement("div");this.colCopy.className="colCopy";this.colCopy.innerHTML=obj.innerHTML;if($.browser.msie){this.colCopy.className="colCopy ie"}$(this.colCopy).css({position:"absolute","float":"left",display:"none",textAlign:obj.align});$("body").append(this.colCopy);$(this.cDrag).hide()}}}$("body").noSelect()},dragMove:function(e){if(this.colresize){var n=this.colresize.n;var diff=e.pageX-this.colresize.startX;var nleft=this.colresize.ol+diff;var nw=this.colresize.ow+diff;if(nw>p.minwidth){$("div:eq("+n+")",this.cDrag).css("left",nleft);this.colresize.nw=nw}}else{if(this.vresize){var v=this.vresize;var y=e.pageY;var diff=y-v.sy;if(!p.defwidth){p.defwidth=p.width}if(p.width!="auto"&&!p.nohresize&&v.hgo){var x=e.pageX;var xdiff=x-v.sx;var newW=v.w+xdiff;if(newW>p.defwidth){this.gDiv.style.width=newW+"px";p.width=newW}}var newH=v.h+diff;if((newH>p.minheight||p.height<p.minheight)&&!v.hgo){this.bDiv.style.height=newH+"px";p.height=newH;this.fixHeight(newH)}v=null}else{if(this.colCopy){$(this.dcol).addClass("thMove").removeClass("thOver");if(e.pageX>this.hset.right||e.pageX<this.hset.left||e.pageY>this.hset.bottom||e.pageY<this.hset.top){$("body").css("cursor","move")}else{$("body").css("cursor","pointer")}$(this.colCopy).css({top:e.pageY+10,left:e.pageX+20,display:"block"})}}}},dragEnd:function(){if(this.colresize){var n=this.colresize.n;var nw=this.colresize.nw;$("th:visible div:eq("+n+")",this.hDiv).css("width",nw);$("tr",this.bDiv).each(function(){$("td:visible div:eq("+n+")",this).css("width",nw)});this.hDiv.scrollLeft=this.bDiv.scrollLeft;$("div:eq("+n+")",this.cDrag).siblings().show();$(".dragging",this.cDrag).removeClass("dragging");this.rePosDrag();this.fixHeight();this.colresize=false}else{if(this.vresize){this.vresize=false}else{if(this.colCopy){$(this.colCopy).remove();if(this.dcolt!=null){if(this.dcoln>this.dcolt){$("th:eq("+this.dcolt+")",this.hDiv).before(this.dcol)}else{$("th:eq("+this.dcolt+")",this.hDiv).after(this.dcol)}this.switchCol(this.dcoln,this.dcolt);$(this.cdropleft).remove();$(this.cdropright).remove();this.rePosDrag()}this.dcol=null;this.hset=null;this.dcoln=null;this.dcolt=null;this.colCopy=null;$(".thMove",this.hDiv).removeClass("thMove");$(this.cDrag).show()}}}$("body").css("cursor","default");$("body").noSelect(false)},toggleCol:function(cid,visible){var ncol=$("th[axis='col"+cid+"']",this.hDiv)[0];var n=$("thead th",g.hDiv).index(ncol);var cb=$("input[value="+cid+"]",g.nDiv)[0];if(visible==null){visible=ncol.hide}if($("input:checked",g.nDiv).length<p.minColToggle&&!visible){return false}if(visible){ncol.hide=false;$(ncol).show();cb.checked=true}else{ncol.hide=true;$(ncol).hide();cb.checked=false}$("tbody tr",t).each(function(){if(visible){$("td:eq("+n+")",this).show()}else{$("td:eq("+n+")",this).hide()}});this.rePosDrag();if(p.onToggleCol){p.onToggleCol(cid,visible)}return visible},switchCol:function(cdrag,cdrop){$("tbody tr",t).each(function(){if(cdrag>cdrop){$("td:eq("+cdrop+")",this).before($("td:eq("+cdrag+")",this))}else{$("td:eq("+cdrop+")",this).after($("td:eq("+cdrag+")",this))}});if(cdrag>cdrop){$("tr:eq("+cdrop+")",this.nDiv).before($("tr:eq("+cdrag+")",this.nDiv))}else{$("tr:eq("+cdrop+")",this.nDiv).after($("tr:eq("+cdrag+")",this.nDiv))}if($.browser.msie&&$.browser.version<7){$("tr:eq("+cdrop+") input",this.nDiv)[0].checked=true}this.hDiv.scrollLeft=this.bDiv.scrollLeft},scroll:function(){this.hDiv.scrollLeft=this.bDiv.scrollLeft;this.rePosDrag()},addData:function(data){if(p.preProcess){data=p.preProcess(data)}$(".pReload",this.pDiv).removeClass("loading");this.loading=false;if(!data){$(".pPageStat",this.pDiv).html(p.errormsg);return false}if(p.dataType=="xml"){p.total=+$("rows total",data).text()}else{p.total=data.total}if(p.total==0){$("tr, a, td, div",t).unbind();$(t).empty();p.pages=1;p.page=1;this.buildpager();$(".pPageStat",this.pDiv).html(p.nomsg);return false}p.pages=Math.ceil(p.total/p.rp);if(p.dataType=="xml"){p.page=+$("rows page",data).text()}else{p.page=data.page}this.buildpager();var tbody=document.createElement("tbody");if(p.dataType=="json"){$.each(data.rows,function(i,row){var tr=document.createElement("tr");if(i%2&&p.striped){tr.className="erow"}if(row.id){tr.id="row"+row.id}$("thead tr:first th",g.hDiv).each(function(){var td=document.createElement("td");var idx=$(this).attr("axis").substr(3);td.align=this.align;td.innerHTML=row.cell[idx];td.nowrap=this.nowrap;$(tr).append(td);td=null});if($("thead",this.gDiv).length<1){for(idx=0;idx<cell.length;idx++){var td=document.createElement("td");td.innerHTML=row.cell[idx];$(tr).append(td);td=null}}$(tbody).append(tr);tr=null})}else{if(p.dataType=="xml"){i=1;$("rows row",data).each(function(){i++;var tr=document.createElement("tr");if(i%2&&p.striped){tr.className="erow"}var nid=$(this).attr("id");if(nid){tr.id="row"+nid}nid=null;var robj=this;$("thead tr:first th",g.hDiv).each(function(){var td=document.createElement("td");var idx=$(this).attr("axis").substr(3);td.align=this.align;td.innerHTML=$("cell:eq("+idx+")",robj).text();$(tr).append(td);td=null});if($("thead",this.gDiv).length<1){$("cell",this).each(function(){var td=document.createElement("td");td.innerHTML=$(this).text();$(tr).append(td);td=null})}$(tbody).append(tr);tr=null;robj=null})}}$("tr",t).unbind();$(t).empty();$(t).append(tbody);this.addCellProp();this.addRowProp();this.rePosDrag();if(p.onSuccess){p.onSuccess(data)}if(p.hideOnSubmit){$(g.block).remove()}this.hDiv.scrollLeft=this.bDiv.scrollLeft;if($.browser.opera){$(t).css("visibility","visible")}tbody=null;data=null;i=null},changeSort:function(th){if(this.loading){return true}$(g.nDiv).hide();$(g.nBtn).hide();if(p.sortname==$(th).attr("abbr")){if(p.sortorder=="asc"){p.sortorder="desc"}else{p.sortorder="asc"}}$(th).addClass("sorted").siblings().removeClass("sorted");$(".sdesc",this.hDiv).removeClass("sdesc");$(".sasc",this.hDiv).removeClass("sasc");$("div",th).addClass("s"+p.sortorder);p.sortname=$(th).attr("abbr");if(p.onChangeSort){p.onChangeSort(p.sortname,p.sortorder)}else{this.populate()}},buildpager:function(){$(".pcontrol input",this.pDiv).val(p.page);$(".pcontrol span",this.pDiv).html(p.pages);var r1=(p.page-1)*p.rp+1;var r2=r1+p.rp-1;if(p.total<r2){r2=p.total}var stat=p.pagestat;stat=stat.replace(/{from}/,r1);stat=stat.replace(/{to}/,r2);stat=stat.replace(/{total}/,p.total);$(".pPageStat",this.pDiv).html(stat);if(p.pages==1){var groupIndex=0;if(p.useRp){groupIndex--}if(p.searchitems){groupIndex--}$(".pGroup",g.pDiv).each(function(){if(groupIndex>=0&&groupIndex<3){$(this).css("opacity","0.3");$(".pButton",this).each(function(){$(this).css("cursor","default");$(this).hover(function(){$(this).css({border:"0px",width:"22px",height:"22px",cursor:"default"});$("span",this).each(function(){$(this).css({border:"0px",width:"22px",height:"22px",cursor:"default"})})},function(){})});$("input",this).each(function(){$(this).attr("readonly","true")})}groupIndex++})}else{$(g.gDiv).find(".pFirst, .pPrev").each(function(){if(p.page==1){$(this).removeClass("pBtnOver");$(this).css({cursor:"default",opacity:"0.3"})}else{$(this).css({cursor:"pointer",opacity:"1.0"})}});$(g.gDiv).find(".pLast, .pNext").each(function(){if(p.page==p.pages){$(this).removeClass("pBtnOver");$(this).css({cursor:"default",opacity:"0.3"})}else{$(this).css({cursor:"pointer",opacity:"1.0"})}})}},populate:function(){if(this.loading){return true}if(p.onSubmit){var gh=p.onSubmit();if(!gh){return false}}this.loading=true;if(!p.url){return false}$(".pPageStat",this.pDiv).html(p.procmsg);$(".pReload",this.pDiv).addClass("loading");$(g.block).css({top:g.bDiv.offsetTop});if(p.hideOnSubmit){$(this.gDiv).prepend(g.block)}if($.browser.opera){$(t).css("visibility","hidden")}if(!p.newp){p.newp=1}if(p.page>p.pages){p.page=p.pages}var param=[{name:"page",value:p.newp},{name:"rp",value:p.rp},{name:"sortname",value:p.sortname},{name:"sortorder",value:p.sortorder},{name:"query",value:p.query},{name:"qtype",value:p.qtype}];if(p.params){for(var pi=0;pi<p.params.length;pi++){param[param.length]=p.params[pi]}}$.ajax({type:p.method,url:p.url,data:param,dataType:"text",success:function(data){var obj=data;if(p.dataType=="json"&&$.isPlainObject&&!$.isPlainObject(data)){obj=eval("("+data+")")}g.addData(obj)},error:function(xmlhttprequest,textmsg,error){try{if(p.onError){p.onError(xmlhttprequest,textmsg,error)}}catch(e){}}})},doSearch:function(){p.query=$("input[name=q]",g.sDiv).val();p.qtype=$("select[name=qtype]",g.sDiv).val();p.newp=1;this.populate()},changePage:function(ctype){if(this.loading){return true}switch(ctype){case"first":p.newp=1;break;case"prev":if(p.page>1){p.newp=parseInt(p.page)-1}break;case"next":if(p.page<p.pages){p.newp=parseInt(p.page)+1}break;case"last":p.newp=p.pages;break;case"input":var nv=parseInt($(".pcontrol input",this.pDiv).val());if(isNaN(nv)){nv=1}if(nv<1){nv=1}else{if(nv>p.pages){nv=p.pages}}$(".pcontrol input",this.pDiv).val(nv);p.newp=nv;break}if(p.newp==p.page){return false}if(p.onChangePage){p.onChangePage(p.newp)}else{this.populate()}},addCellProp:function(){$("tbody tr td",g.bDiv).each(function(){var tdDiv=document.createElement("div");var n=$("td",$(this).parent()).index(this);var pth=$("th:eq("+n+")",g.hDiv).get(0);if(pth!=null){if(p.sortname==$(pth).attr("abbr")&&p.sortname){this.className="sorted"}$(tdDiv).css({textAlign:pth.align,width:$("div:first",pth)[0].style.width});if(pth.hide){$(this).css("display","none")}}if(this.nowrap==false){$(tdDiv).css("white-space","normal")}if(this.innerHTML==""){this.innerHTML="&nbsp;"}tdDiv.innerHTML=this.innerHTML;var prnt=$(this).parent()[0];var pid=false;if(prnt.id){pid=prnt.id.substr(3)}if(pth!=null){if(pth.process){pth.process(tdDiv,pid)}}$(this).empty().append(tdDiv).removeAttr("width")})},getCellDim:function(obj){var ht=parseInt($(obj).height());var pht=parseInt($(obj).parent().height());var wt=parseInt(obj.style.width);var pwt=parseInt($(obj).parent().width());var top=obj.offsetParent.offsetTop;var left=obj.offsetParent.offsetLeft;var pdl=parseInt($(obj).css("paddingLeft"));var pdt=parseInt($(obj).css("paddingTop"));return{ht:ht,wt:wt,top:top,left:left,pdl:pdl,pdt:pdt,pht:pht,pwt:pwt}},addRowProp:function(){$("tbody tr",g.bDiv).each(function(){$(this).click(function(e){var obj=(e.target||e.srcElement);if(obj.href||obj.type){return true}$(this).toggleClass("trSelected");if(p.singleSelect){$(this).siblings().removeClass("trSelected")}}).mousedown(function(e){if(e.shiftKey){$(this).toggleClass("trSelected");g.multisel=true;this.focus();$(g.gDiv).noSelect()}}).mouseup(function(){if(g.multisel){g.multisel=false;$(g.gDiv).noSelect(false)}}).hover(function(e){if(g.multisel){$(this).toggleClass("trSelected")}},function(){});if($.browser.msie&&$.browser.version<7){$(this).hover(function(){$(this).addClass("trOver")},function(){$(this).removeClass("trOver")})}})},pager:0};if(p.colModel){thead=document.createElement("thead");tr=document.createElement("tr");for(i=0;i<p.colModel.length;i++){var cm=p.colModel[i];var th=document.createElement("th");th.innerHTML=cm.display;if(cm.name&&cm.sortable){$(th).attr("abbr",cm.name)}$(th).attr("axis","col"+i);if(cm.align){th.align=cm.align}if(cm.width){$(th).attr("width",cm.width)}if(cm.hide){th.hide=true}if(cm.process){th.process=cm.process}if(cm.nowrap!=undefined){th.nowrap=cm.nowrap}else{th.nowrap=p.nowrap}$(tr).append(th)}$(thead).append(tr);$(t).prepend(thead)}g.options=p;g.gDiv=document.createElement("div");g.mDiv=document.createElement("div");g.hDiv=document.createElement("div");g.bDiv=document.createElement("div");g.vDiv=document.createElement("div");g.rDiv=document.createElement("div");g.cDrag=document.createElement("div");g.block=document.createElement("div");g.nDiv=document.createElement("div");g.nBtn=document.createElement("div");g.iDiv=document.createElement("div");g.tDiv=document.createElement("div");g.sDiv=document.createElement("div");if(p.usepager){g.pDiv=document.createElement("div")}g.hTable=document.createElement("table");g.gDiv.className="flexigrid";if(p.width!="auto"){g.gDiv.style.width=p.width+"px"}if($.browser.msie){$(g.gDiv).addClass("ie")}if(p.novstripe){$(g.gDiv).addClass("novstripe")}$(t).before(g.gDiv);$(g.gDiv).append(t);if(p.buttons){g.tDiv.className="tDiv";var tDiv2=document.createElement("div");tDiv2.className="tDiv2";for(i=0;i<p.buttons.length;i++){var btn=p.buttons[i];if(!btn.separator){var btnDiv=document.createElement("div");btnDiv.className="fbutton";btnDiv.innerHTML="<div><span>"+btn.name+"</span></div>";if(btn.bclass){$("span",btnDiv).addClass(btn.bclass).css({paddingLeft:20})}btnDiv.onpress=btn.onpress;btnDiv.name=btn.name;if(btn.onpress){$(btnDiv).click(function(){this.onpress(this.name,g.gDiv)})}$(tDiv2).append(btnDiv);if($.browser.msie&&$.browser.version<7){$(btnDiv).hover(function(){$(this).addClass("fbOver")},function(){$(this).removeClass("fbOver")})}}else{$(tDiv2).append("<div class='btnseparator'></div>")}}$(g.tDiv).append(tDiv2);$(g.tDiv).append("<div style='clear:both'></div>");$(g.gDiv).prepend(g.tDiv)}g.hDiv.className="hDiv";$(t).before(g.hDiv);g.hTable.cellPadding=0;g.hTable.cellSpacing=0;$(g.hDiv).append('<div class="hDivBox"></div>');$("div",g.hDiv).append(g.hTable);var thead=$("thead:first",t).get(0);if(thead){$(g.hTable).append(thead)}thead=null;if(!p.colmodel){var ci=0}$("thead tr:first th",g.hDiv).each(function(){var thdiv=document.createElement("div");if($(this).attr("abbr")){$(this).click(function(e){if(!$(this).hasClass("thOver")){return false}var obj=(e.target||e.srcElement);if(obj.href||obj.type){return true}g.changeSort(this)});if($(this).attr("abbr")==p.sortname){this.className="sorted";thdiv.className="s"+p.sortorder}}if(this.hide){$(this).hide()}if(!p.colmodel){$(this).attr("axis","col"+ci++)}$(thdiv).css({textAlign:this.align,width:this.width+"px"});thdiv.innerHTML=this.innerHTML;$(this).empty().append(thdiv).removeAttr("width").mousedown(function(e){g.dragStart("colMove",e,this)}).hover(function(){if(!g.colresize&&!$(this).hasClass("thMove")&&!g.colCopy){$(this).addClass("thOver")}if($(this).attr("abbr")!=p.sortname&&!g.colCopy&&!g.colresize&&$(this).attr("abbr")){$("div",this).addClass("s"+p.sortorder)}else{if($(this).attr("abbr")==p.sortname&&!g.colCopy&&!g.colresize&&$(this).attr("abbr")){var no="";if(p.sortorder=="asc"){no="desc"}else{no="asc"}$("div",this).removeClass("s"+p.sortorder).addClass("s"+no)}}if(g.colCopy){var n=$("th",g.hDiv).index(this);if(n==g.dcoln){return false}if(n<g.dcoln){$(this).append(g.cdropleft)}else{$(this).append(g.cdropright)}g.dcolt=n}else{if(!g.colresize){var nv=$("th:visible",g.hDiv).index(this);var onl=parseInt($("div:eq("+nv+")",g.cDrag).css("left"));var nw=parseInt($(g.nBtn).width())+parseInt($(g.nBtn).css("borderLeftWidth"));nl=onl-nw+Math.floor(p.cgwidth/2);$(g.nDiv).hide();$(g.nBtn).hide();$(g.nBtn).css({left:nl,top:g.hDiv.offsetTop}).show();var ndw=parseInt($(g.nDiv).width());$(g.nDiv).css({top:g.bDiv.offsetTop});if((nl+ndw)>$(g.gDiv).width()){$(g.nDiv).css("left",onl-ndw+1)}else{$(g.nDiv).css("left",nl)}if($(this).hasClass("sorted")){$(g.nBtn).addClass("srtd")}else{$(g.nBtn).removeClass("srtd")}}}},function(){$(this).removeClass("thOver");if($(this).attr("abbr")!=p.sortname){$("div",this).removeClass("s"+p.sortorder)}else{if($(this).attr("abbr")==p.sortname){var no="";if(p.sortorder=="asc"){no="desc"}else{no="asc"}$("div",this).addClass("s"+p.sortorder).removeClass("s"+no)}}if(g.colCopy){$(g.cdropleft).remove();$(g.cdropright).remove();g.dcolt=null}})});g.bDiv.className="bDiv";$(t).before(g.bDiv);$(g.bDiv).css({height:(p.height=="auto")?"auto":p.height+"px"}).scroll(function(e){g.scroll()}).append(t);if(p.height=="auto"){$("table",g.bDiv).addClass("autoht")}g.addCellProp();g.addRowProp();var cdcol=$("thead tr:first th:first",g.hDiv).get(0);if(cdcol!=null){g.cDrag.className="cDrag";g.cdpad=0;g.cdpad+=(isNaN(parseInt($("div",cdcol).css("borderLeftWidth")))?0:parseInt($("div",cdcol).css("borderLeftWidth")));g.cdpad+=(isNaN(parseInt($("div",cdcol).css("borderRightWidth")))?0:parseInt($("div",cdcol).css("borderRightWidth")));g.cdpad+=(isNaN(parseInt($("div",cdcol).css("paddingLeft")))?0:parseInt($("div",cdcol).css("paddingLeft")));g.cdpad+=(isNaN(parseInt($("div",cdcol).css("paddingRight")))?0:parseInt($("div",cdcol).css("paddingRight")));g.cdpad+=(isNaN(parseInt($(cdcol).css("borderLeftWidth")))?0:parseInt($(cdcol).css("borderLeftWidth")));g.cdpad+=(isNaN(parseInt($(cdcol).css("borderRightWidth")))?0:parseInt($(cdcol).css("borderRightWidth")));g.cdpad+=(isNaN(parseInt($(cdcol).css("paddingLeft")))?0:parseInt($(cdcol).css("paddingLeft")));g.cdpad+=(isNaN(parseInt($(cdcol).css("paddingRight")))?0:parseInt($(cdcol).css("paddingRight")));$(g.bDiv).before(g.cDrag);var cdheight=$(g.bDiv).height();var hdheight=$(g.hDiv).height();$(g.cDrag).css({top:-hdheight+"px"});$("thead tr:first th",g.hDiv).each(function(){var cgDiv=document.createElement("div");$(g.cDrag).append(cgDiv);if(!p.cgwidth){p.cgwidth=$(cgDiv).width()}$(cgDiv).css({height:cdheight+hdheight}).mousedown(function(e){g.dragStart("colresize",e,this)});if($.browser.msie&&$.browser.version<7){g.fixHeight($(g.gDiv).height());$(cgDiv).hover(function(){g.fixHeight();$(this).addClass("dragging")},function(){if(!g.colresize){$(this).removeClass("dragging")}})}})}if(p.striped){$("tbody tr:odd",g.bDiv).addClass("erow")}if(p.resizable&&p.height!="auto"){g.vDiv.className="vGrip";$(g.vDiv).mousedown(function(e){g.dragStart("vresize",e)}).html("<span></span>");$(g.bDiv).after(g.vDiv)}if(p.resizable&&p.width!="auto"&&!p.nohresize){g.rDiv.className="hGrip";$(g.rDiv).mousedown(function(e){g.dragStart("vresize",e,true)}).html("<span></span>").css("height",$(g.gDiv).height());if($.browser.msie&&$.browser.version<7){$(g.rDiv).hover(function(){$(this).addClass("hgOver")},function(){$(this).removeClass("hgOver")})}$(g.gDiv).append(g.rDiv)}if(p.usepager){g.pDiv.className="pDiv";g.pDiv.innerHTML='<div class="pDiv2"></div>';$(g.bDiv).after(g.pDiv);var html=' <div class="pGroup"> <div class="pFirst pButton"><span></span></div><div class="pPrev pButton"><span></span></div> </div> <div class="btnseparator"></div> <div class="pGroup"><span class="pcontrol">Page <input type="text" size="4" value="1" /> of <span> 1 </span></span></div> <div class="btnseparator"></div> <div class="pGroup"> <div class="pNext pButton"><span></span></div><div class="pLast pButton"><span></span></div> </div> <div class="btnseparator"></div> <div class="pGroup"> <div class="pReload pButton"><span></span></div> </div> <div class="btnseparator"></div> <div class="pGroup"><span class="pPageStat"></span></div>';$("div",g.pDiv).html(html);$(".pReload",g.pDiv).click(function(){if(p.onReload){var gh=p.onReload();if(!gh){return false}}g.populate()});$(".pFirst",g.pDiv).click(function(){g.changePage("first")});$(".pPrev",g.pDiv).click(function(){g.changePage("prev")});$(".pNext",g.pDiv).click(function(){g.changePage("next")});$(".pLast",g.pDiv).click(function(){g.changePage("last")});$(".pcontrol input",g.pDiv).keydown(function(e){if(e.keyCode==13){g.changePage("input")}});$(".pReload",g.pDiv).hover(function(){$(this).addClass("pBtnOver")},function(){$(this).removeClass("pBtnOver")});$(".pFirst, .pPrev").hover(function(){if(!(p.page&&p.page==1)){$(this).addClass("pBtnOver")}},function(){$(this).removeClass("pBtnOver")});$(".pLast, .pNext").hover(function(){if(!(p.page&&p.pages&&p.page==p.pages)){$(this).addClass("pBtnOver")}},function(){$(this).removeClass("pBtnOver")});if(p.useRp){var opt="";for(var nx=0;nx<p.rpOptions.length;nx++){if(p.rp==p.rpOptions[nx]){sel='selected="selected"'}else{sel=""}opt+="<option value='"+p.rpOptions[nx]+"' "+sel+" >"+p.rpOptions[nx]+"&nbsp;&nbsp;</option>"}$(".pDiv2",g.pDiv).prepend("<div class='pGroup'><select name='rp'>"+opt+"</select></div> <div class='btnseparator'></div>");$("select",g.pDiv).change(function(){if(p.onRpChange){p.onRpChange(+this.value)}else{p.newp=1;p.rp=+this.value;g.populate()}})}if(p.searchitems){$(".pDiv2",g.pDiv).prepend("<div class='pGroup'> <div class='pSearch pButton'><span></span></div> </div>  <div class='btnseparator'></div>");$(".pSearch",g.pDiv).click(function(){$(g.sDiv).slideToggle("fast",function(){$(".sDiv:visible input:first",g.gDiv).trigger("focus")})});g.sDiv.className="sDiv";sitems=p.searchitems;var sopt="";for(var s=0;s<sitems.length;s++){if(p.qtype==""&&sitems[s].isdefault==true){p.qtype=sitems[s].name;sel='selected="selected"'}else{sel=""}sopt+="<option value='"+sitems[s].name+"' "+sel+" >"+sitems[s].display+"&nbsp;&nbsp;</option>"}if(p.qtype==""){p.qtype=sitems[0].name}$(g.sDiv).append("<div class='sDiv2'>Quick Search <input type='text' size='30' name='q' class='qsbox' /> <select name='qtype'>"+sopt+"</select> <input type='button' value='Clear' /></div>");$("input[name=q],select[name=qtype]",g.sDiv).keydown(function(e){if(e.keyCode==13){g.doSearch()}});$("input[value=Clear]",g.sDiv).click(function(){$("input[name=q]",g.sDiv).val("");p.query="";g.doSearch()});$(g.bDiv).after(g.sDiv)}}$(g.pDiv,g.sDiv).append("<div style='clear:both'></div>");if(p.title){g.mDiv.className="mDiv";g.mDiv.innerHTML='<div class="ftitle">'+p.title+"</div>";$(g.gDiv).prepend(g.mDiv);if(p.showTableToggleBtn){$(g.mDiv).append('<div class="ptogtitle" title="Minimize/Maximize Table"><span></span></div>');$("div.ptogtitle",g.mDiv).click(function(){$(g.gDiv).toggleClass("hideBody");$(this).toggleClass("vsble")})}}g.cdropleft=document.createElement("span");g.cdropleft.className="cdropleft";g.cdropright=document.createElement("span");g.cdropright.className="cdropright";g.block.className="gBlock";var gh=$(g.bDiv).height();var gtop=g.bDiv.offsetTop;$(g.block).css({width:g.bDiv.style.width,height:gh,background:"white",position:"relative",marginBottom:(gh*-1),zIndex:1,top:gtop,left:"0px"});$(g.block).fadeTo(0,p.blockOpacity);if($("th",g.hDiv).length){g.nDiv.className="nDiv";g.nDiv.innerHTML="<table cellpadding='0' cellspacing='0'><tbody></tbody></table>";$(g.nDiv).css({marginBottom:(gh*-1),display:"none",top:gtop}).noSelect();var cn=0;$("th div",g.hDiv).each(function(){var kcol=$("th[axis='col"+cn+"']",g.hDiv)[0];var chk='checked="checked"';if(kcol.style.display=="none"){chk=""}$("tbody",g.nDiv).append('<tr><td class="ndcol1"><input type="checkbox" '+chk+' class="togCol" value="'+cn+'" /></td><td class="ndcol2">'+this.innerHTML+"</td></tr>");cn++});if($.browser.msie&&$.browser.version<7){$("tr",g.nDiv).hover(function(){$(this).addClass("ndcolover")},function(){$(this).removeClass("ndcolover")})}$("td.ndcol2",g.nDiv).click(function(){if($("input:checked",g.nDiv).length<=p.minColToggle&&$(this).prev().find("input")[0].checked){return false}return g.toggleCol($(this).prev().find("input").val())});$("input.togCol",g.nDiv).click(function(){if($("input:checked",g.nDiv).length<p.minColToggle&&this.checked==false){return false}$(this).parent().next().trigger("click")});$(g.gDiv).prepend(g.nDiv);$(g.nBtn).addClass("nBtn").html("<div></div>").attr("title","Hide/Show Columns").click(function(){$(g.nDiv).toggle();return true});if(p.showToggleBtn){$(g.gDiv).prepend(g.nBtn)}}$(g.iDiv).addClass("iDiv").css({display:"none"});$(g.bDiv).append(g.iDiv);$(g.bDiv).hover(function(){$(g.nDiv).hide();$(g.nBtn).hide()},function(){if(g.multisel){g.multisel=false}});$(g.gDiv).hover(function(){},function(){$(g.nDiv).hide();$(g.nBtn).hide()});$(document).mousemove(function(e){g.dragMove(e)}).mouseup(function(e){g.dragEnd()}).hover(function(){},function(){g.dragEnd()});if($.browser.msie&&$.browser.version<7){$(".hDiv,.bDiv,.mDiv,.pDiv,.vGrip,.tDiv, .sDiv",g.gDiv).css({width:"100%"});$(g.gDiv).addClass("ie6");if(p.width!="auto"){$(g.gDiv).addClass("ie6fullwidthbug")}}g.rePosDrag();g.fixHeight();t.p=p;t.grid=g;if(p.url&&p.autoload){g.populate()}return t};var docloaded=false;$(document).ready(function(){docloaded=true});$.fn.flexigrid=function(p){return this.each(function(){if(!docloaded){$(this).hide();var t=this;$(document).ready(function(){$.addFlex(t,p)})}else{$.addFlex(this,p)}})};$.fn.flexReload=function(p){return this.each(function(){if(this.grid&&this.p.url){this.grid.populate()}})};$.fn.flexOptions=function(p){return this.each(function(){if(this.grid){$.extend(this.p,p)}})};$.fn.flexToggleCol=function(cid,visible){return this.each(function(){if(this.grid){this.grid.toggleCol(cid,visible)}})};$.fn.flexAddData=function(data){return this.each(function(){if(this.grid){this.grid.addData(data)}})};$.fn.noSelect=function(p){if(p==null){prevent=true}else{prevent=p}if(prevent){return this.each(function(){if($.browser.msie||$.browser.safari){$(this).bind("selectstart",function(){return false})}else{if($.browser.mozilla){$(this).css("MozUserSelect","none");$("body").trigger("focus")}else{if($.browser.opera){$(this).bind("mousedown",function(){return false})}else{$(this).attr("unselectable","on")}}}})}else{return this.each(function(){if($.browser.msie||$.browser.safari){$(this).unbind("selectstart")}else{if($.browser.mozilla){$(this).css("MozUserSelect","inherit")}else{if($.browser.opera){$(this).unbind("mousedown")}else{$(this).removeAttr("unselectable","on")}}}})}}})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.extra.jira:web-resources', location = 'templates/extra/jira/jiraIssues.js' */
jQuery(document).ready(function(){var a=jQuery.extend(window.JiraIssues||{},{ADG_ENABLED:AJS.Meta.getNumber("build-number")>=4000,ADG_FONT_SIZE_OVER_FLEXIGRID_FONT_SIZE_RATIO:14/11,fixMenusShowingUnderWidgetInIE:function(){if(jQuery.browser.msie){jQuery("ul.ajs-menu-bar li.ajs-menu-item").each(function(){jQuery(this).hover(function(){jQuery("div.ajs-drop-down",jQuery(this)).parents().each(function(){var c=jQuery(this);var b=c.css("position");if(b&&b!="auto"){c.addClass("ajs-menu-bar-z-index-fix-for-ie")}})},function(){jQuery("div.ajs-drop-down",jQuery(this)).parents().removeClass("ajs-menu-bar-z-index-fix-for-ie")})})}},onSuccessFunction:function(d){if(!jQuery("fieldset input[name='height']",d).length){var b=jQuery(".bDiv table[id^='jiraissues_table']",d)[0];var e=b.grid;var c=b.clientHeight+jQuery(".hDiv",d)[0].clientHeight;jQuery(".bDiv",d).css("height",c+"px");e.options.height=c;e.fixHeight(c)}},onErrorFunction:function(h,c,b,n,f){var o=jQuery("#"+c);var g=b+": ";if(n.status=="200"){g+=f}else{g+=n.responseText}var i=n.getResponseHeader("WWW-Authenticate")||"";if(n.status=="401"&&i.indexOf("OAuth")!=-1){var m=/OAuth realm\=\"([^\"]+)\"/;var e=m.exec(i);if(e){o.empty();a.bigMessageFunction(c,'<a class="oauth-init" href="'+e[1]+'">'+"Authenticate"+"</a> "+"to retrieve your issues"+"</span>");jQuery(".bmDiv",h).css({"z-index":2});var j={onSuccess:function(){window.location.reload()},onFailure:function(){}};var l=jQuery(".oauth-init",o.parent());var d=l.attr("href");l.click(function(p){AppLinks.authenticateRemoteCredentials(d,j.onSuccess,j.onFailure);p.preventDefault()});AJS.$(".gBlock").remove()}}else{if(n.status=="400"){a.bigMessageFunction(c,"The JIRA server was not able to process the search. This may indicate a problem with the syntax of this macro. Alternatively, if this table is requesting specific issue keys, you may not have permission to view one of these issues. ")}else{var k=jQuery("iframe.jiraissues_errorMsgSandbox",h);k.load(function(){var r=this.contentWindow||this.contentDocument;var q=jQuery((r.document?r.document:r).body);jQuery("a",q).each(function(){this.target="_top"});jQuery(".pPageStat",h).empty().text(q.text());var p=jQuery("div.bmDiv",h)[0];k.removeClass("hidden");k.css({height:p.clientHeight+"px",width:p.clientWidth+"px"})});k[0].src=jQuery("fieldset input[name='retrieverUrlHtml']",h).val();a.bigMessageFunction(c,k)}}jQuery(h).find(".pReload").removeClass("loading");o[0].grid.loading=false;jQuery(h).find(".pButton").each(function(){jQuery(this).removeClass("pBtnOver");jQuery(this).css({cursor:"default",opacity:"0.3"})});jQuery(h).find("span.pcontrol input").attr("readonly","true")},onReloadFunction:function(b,d,c){jQuery(".bmDiv",d).remove();jQuery(".bmDistance",d).remove();c.onSubmit=function(){a.reloadOnSubmitFunction(b,c);return true}},reloadOnSubmitFunction:function(b,c){c.params=[{name:"useCache",value:false}];c.onSubmit=function(){a.onSubmitFunction(b,c);return true}},onSubmitFunction:function(b,c){c.params=[{name:"useCache",value:b}]},showTrustWarningsFunction:function(d,c){var b=jQuery(d).children(".trusted_warnings");if(c.trustedMessage){b.find("td:last").html(c.trustedMessage);b.css("display","block")}else{b.css("display","none")}},preProcessFunction:function(e,b,d,c,f){if(d){a.showTrustWarningsFunction(e,c)}if(c.total==0){jQuery(".pPageStat",e).html(f);a.bigMessageFunction(b,f);jQuery(".pReload",e).removeClass("loading");return}},bigMessageFunction:function(e,f){var d=jQuery("<div></div>");var b=jQuery("<div></div>");d.addClass("bmDistance");b.addClass("bmDiv");if(typeof f=="string"){b.html("<p><strong>"+f+"</strong></p>")}else{f.appendTo(b)}var c=jQuery("#"+e);c.after(b).after(d)},getParamsFrom:function(c){var b={};c.children("input").each(function(){b[jQuery(this).attr("name")]=jQuery(this).attr("value")});return b},initializeColumnWidth:function(f,p){var d={},m=function(i){return a.ADG_ENABLED?Math.round(i*a.ADG_FONT_SIZE_OVER_FLEXIGRID_FONT_SIZE_RATIO):i};if(!(p&&p.length)){return d}var h=37,n=11,k=f.width()-(h+(p.length*n)),j=false,q=false,o=0,c=m(140);for(var l=0,e=p.length;l<e;l++){var g=p[l].name;switch(g){case"summary":j=true;o++;break;case"description":q=true;o++;break;case"type":o++;d[g]=30;k-=30;break;case"priority":o++;d[g]=50;k-=50;break;case"status":o++;d[g]=m(100);k-=m(100);break;case"key":o++;d[g]=m(90);k-=m(90);break;case"comments":case"attachments":case"version":case"component":case"resolution":o++;d[g]=m(80);k-=m(80);break;default:d[g]=c}}if(j||q){k-=(c*(p.length-o));var b=250;if(j&&q){d.summary=Math.max(k/2,b);d.description=Math.max(k/2,b)}else{if(j){d.summary=Math.max(k,b)}else{d.description=Math.max(k,b)}}}else{if(!j&&!q&&(p.length>o)){c=k/(p.length-o);for(l=0;l<e;l++){if(!{resolution:true,key:true,type:true,priority:true,status:true}[p[l]]){d[p[l]]=c}}}}return d}});a.fixMenusShowingUnderWidgetInIE();jQuery(".jiraissues_table").each(function(f,j){var k=jQuery(j),h=k.children("fieldset"),e=a.getParamsFrom(h),c="jiraissues_table_"+f;k.append('<table id="'+c+'" style="display:none"></table>');k.css("width",e.width);var d=[];h.children(".columns").each(function(l){var m=jQuery(this).hasClass("nowrap");d[l]={display:this.name,name:this.value,nowrap:m,sortable:true,align:"left"}});var b=a.initializeColumnWidth(k,d);jQuery.each(d,function(l,m){m.width=b[m.name]});var g=jQuery("<div></div>");jQuery("<a></a>").attr({rel:"nofollow",href:e.clickableUrl}).text(e.title).appendTo(g);jQuery("#"+c).flexigrid({url:e.retrieverUrlHtml,method:"GET",dataType:"json",colModel:d,sortname:e.sortField,sortorder:e.sortOrder,usepager:true,title:g.html(),page:parseInt(e.requestedPage,10),useRp:false,rp:parseInt(e.resultsPerPage,10),showTableToggleBtn:true,height:(function(){return e.height?parseInt(e.height,10):480})(),onSuccess:function(){a.onSuccessFunction(j)},onSubmit:function(){a.onSubmitFunction(e.useCache,this);return true},preProcess:function(i){a.preProcessFunction(j,c,e.showTrustWarnings,i,e.nomsg);return i},onError:function(m,l,i){a.onErrorFunction(j,c,e.jiraissuesError,m,l,i)},onReload:function(){a.onReloadFunction(e.useCache,j,this);return true},errormsg:e.errormsg,pagestat:e.pagestat,procmsg:e.procmsg,nomsg:e.nomsg})});jQuery(".jiraissues_count").each(function(b,d){var c=jQuery(d);jQuery.ajax({cache:false,type:"GET",url:c.find(".url").text(),data:{useCache:c.find(".use-cache").text(),rp:c.find(".rp").text(),showCount:"true"},success:function(f){var e=c.find(".result");if(f>1){e.text(AJS.format("{0} issues",f))}else{e.text(AJS.format("{0} issue",f))}e.removeClass("hidden");jQuery(".calculating, .error, .data",c).remove()},error:function(h){var f=jQuery(".error",c).removeClass("hidden"),g=h.getResponseHeader("WWW-Authenticate")||"",j=false;if(h.status===401&&g.indexOf("OAuth")!=-1){var e=/OAuth realm\=\"([^\"]+)\"/,i=e.exec(g);if(i){f.empty().append(AJS.$("<a/>",{href:i[1],"class":"oauth-init"}).text("Authenticate").click(function(){AppLinks.authenticateRemoteCredentials(i[1],function(){window.location.reload()},function(){});return false})).append(AJS.$("<span/>",{text:" "+"to retrieve your issues"}));j=true}}if(!j){f.text(AJS.format(f.text(),h.status))}jQuery(".calculating, .result, .data",c).remove()}})})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.recently-viewed-plugin:app-resources', location = 'templates/recently.soy' */
// This file was automatically generated from recently.soy.
// Please don't edit this file by hand.

if (typeof RY == 'undefined') { var RY = {}; }
if (typeof RY.Templates == 'undefined') { RY.Templates = {}; }


RY.Templates.body = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div id="recently-viewed" class="aui-group"><div class="aui-item"><div class="top"><div class="filter"><form class="aui"><input class="filter-input text" type="text" placeholder="', soy.$$escapeHtmlAttribute("Filter"), '"></form></div></div><div class="pages"></div></div></div>');
  return opt_sb ? '' : output.toString();
};


RY.Templates.pageCollection = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="groups"></div><div class="empty"></div>');
  return opt_sb ? '' : output.toString();
};


RY.Templates.pageGroup = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<h3>', soy.$$escapeHtml(opt_data.title), '</h3><ul/>');
  return opt_sb ? '' : output.toString();
};


RY.Templates.pageItem = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="page-icon"><a href=', soy.$$escapeHtmlAttributeNospace(soy.$$filterNormalizeUri(opt_data.href)), ' class="icon icon-', soy.$$escapeHtmlAttribute(opt_data.type), '"></a></div><div class="page-title"><a class="ellipsis" href=', soy.$$escapeHtmlAttributeNospace(soy.$$filterNormalizeUri(opt_data.href)), '>', soy.$$escapeHtml(opt_data.title), ' - ', soy.$$escapeHtml(opt_data.space), '</a></div>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.recently-viewed-plugin:app-resources', location = 'js/util.js' */
var RY=RY||{};(function(){var b=new Date();var c=new Date(b).getTime();var a=new Date(b.getFullYear(),b.getMonth(),b.getDate()).getTime();var d=new Date(b.getFullYear(),b.getMonth(),b.getDate()-1).getTime();RY.util=RY.Util={analytics:{trackDialogOpen:function(){AJS.trigger("analytics",{name:"recently-viewed-dialog-open"})},trackPageOpen:function(){AJS.trigger("analytics",{name:"recently-viewed-page-open"})}},quote:function(e){return(e).replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},diffInDays:function(g,f){var e=1000*60*60*24;return Math.floor((g-f)/e)},daysSince:function(e){if(e>=a){return 0}else{if(e>=d){return 1}else{return RY.util.diffInDays(c,e)}}},wait:function(h,j,f){var i,k,e;var g=function(){k=setTimeout(function(){h.apply(f,e)},j)};return function(){e=arguments;var l=new Date();if(i&&l-i<j){clearTimeout(k)}g();i=l}}}}());
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.recently-viewed-plugin:app-resources', location = 'js/page-storage.js' */
var RY=RY||{};RY.RecentPageStorage=function(h){var f="com.atlassian.confluence.plugins.recently.viewed.pages.v1";var d=100;var c={};var b=function(){var i=function(k,l){if(k==="lastSeen"&&_.isString(l)){if(AJS.$.browser.msie){l=l.replace(/\-/g,"/");l=l.replace(/T.*$/,"")}return new Date(l).getTime()}else{return l}};try{c=JSON.parse(h.getItem(f),i)||{}}catch(j){c={}}return c};var g=function(){var i=_.values(c);var k=i.length-d;if(k>0){var j=_.sortBy(i,function(l){return l.lastSeen});_.times(k,function(){var l=j.shift();delete c[l.id]})}};var e=function(){g();try{h.setItem(f,JSON.stringify(c))}catch(i){}};this.addCurrentPage=function(i){if(!(i.id&&i.title)){return}b();a(i);e()};var a=function(i){var j=c[i.id];if(!j){c[i.id]=j={}}j=_.extend(j,i);j.lastSeen=new Date().getTime();j.count=j.count+1||1};this.getPages=function(){return _.values(b())}};
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.recently-viewed-plugin:app-resources', location = 'js/filter.js' */
var RY=RY||{};RY.FilterView=Backbone.View.extend({className:"filter",events:{"input .filter-input":"onInput","keyup .filter-input":"onInput","keydown .filter-input":"onKeydown"},initialize:function(){_.bindAll(this,"render","onInput","onKeydown","search");this.navigationEvents=this.options.navigationEvents;this.onInput=RY.util.wait(this.onInput,100,this)},render:function(){this.$input=this.$(".filter-input");return this},onInput:function(a){if(a&&_.contains([37,38,39,40],a.which)){return}this.search()},onKeydown:function(a){switch(a.which){case 13:this.navigationEvents.trigger("select");a.preventDefault();a.stopPropagation();break;case 38:this.navigationEvents.trigger("previous");a.preventDefault();break;case 40:this.navigationEvents.trigger("next");a.preventDefault();break}},search:function(){var a=this.$input.val();this.collection.search(a)}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.recently-viewed-plugin:app-resources', location = 'js/page-model.js' */
var RY=RY||{};(function(){var a;if(typeof ConfluenceMobile!="undefined"){a=ConfluenceMobile.AppData.get("confluence-context-path")}else{a=AJS.contextPath()}RY.Page=Backbone.Model.extend({href:function(){return a+this.get("url")},daysSinceLastSeen:function(){return RY.util.daysSince(this.get("lastSeen"))}});RY.PageCollection=Backbone.Collection.extend({model:RY.Page,url:a+"/rest/recentlyviewed/1.0/recent",search:function(c){var b;if(this._queryLength(c)===0){b=this.models}else{var d=c.match(/[^\s-]+/g);b=this.filter(function(g){var h=g.get("title");var f=g.get("space");var e=(h+f).toLowerCase();return _.all(d,function(i){return e.indexOf(i.toLowerCase())!==-1})})}this.trigger("filter",b,c);return b},_queryLength:function(b){if(!String.prototype.trim){return AJS.$.trim(b).length}return b.trim().length},comparator:function(b){return -(b.get("lastSeen"))}})})();
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.recently-viewed-plugin:app-resources', location = 'js/page.js' */
var RY=RY||{};RY.PageView=Backbone.View.extend({tagName:"li",className:"ry-page",template:RY.Templates.pageItem,initialize:function(){_.bindAll(this,"hide","show","render")},hide:function(){this.$el.hide().removeClass("shown")},show:function(){this.$el.show().addClass("shown")},render:function(){var a=this.model.toJSON();a.href=this.model.href();this.$el.html(this.template(a));return this}});RY.PageGroupView=Backbone.View.extend({className:"group",template:RY.Templates.pageGroup,initialize:function(){_.bindAll(this,"hide","hideAll","show","showBorder","showPages","add","render");this.title=this.options.title;this.modelViews={}},hide:function(){this.$el.hide()},hideAll:function(){this.$el.removeClass("border").hide();_.invoke(_.values(this.modelViews),"hide")},show:function(){this.$el.show()},showBorder:function(){this.$el.addClass("border")},showPages:function(a){var c=this;var b=false;_.each(a,function(e){var d=c.modelViews[e.cid];if(d){b=true;d.show()}});if(b){this.show()}return b},add:function(b){var a=new RY.PageView({model:b});this.modelViews[b.cid]=a;this.$list.append(a.render().el)},render:function(){this.$el.html(this.template({title:this.title}));this.$list=this.$("ul");return this}});RY.PageNavigator=function(a,e,c){var g=null;function f(){return a.find("li.shown")}function b(i){pageItems=f();var h=pageItems.index(pageItems.filter(".highlight"));if(g){g.removeClass("highlight")}i+=h;if(i<0){i=pageItems.length-1}if(i>=pageItems.length){i=0}g=pageItems.eq(i);g.addClass("highlight")}function d(){if(!g.length){return}var k=e;var l=k.children();var j=k.height();var i=g.outerHeight(true);var h=g.position().top;if(h<0){if(f().index(g)===0){k.scrollTop(0);return}k.scrollTop(g.offset().top-l.offset().top)}else{if(h>j){k.scrollTop(g.offset().top-l.offset().top-j+i)}}}c.on("select",function(){if(g&&g.is(":visible")){RY.util.analytics.trackPageOpen();var h=g.find(".page-title a").attr("href");window.location=h}},this);c.on("previous",function(){b(-1);d()},this);c.on("next",function(){b(1);d()},this)};RY.PageCollectionView=Backbone.View.extend({template:RY.Templates.pageCollection,events:{"click .page-title a":RY.util.analytics.trackPageOpen},initialize:function(){_.bindAll(this,"checkEmpty","filter","_groupForPage","addOne","showEmptyMessage","clearEmptyMessage","addAll","render");this.modelViews={};this.collection.on("reset",this.addAll,this);this.collection.on("add",this.addOne,this);this.collection.on("filter",this.filter,this)},checkEmpty:function(a,e){var f=this.collection.isEmpty();var b=a.length===0;if(f||b){var c;if(f){c="Sorry mate, looks like you haven\'t visited any pages yet."}else{var d=AJS.contextPath()+"/dosearchsite.action?queryString="+encodeURIComponent(e);c="We didn\'t find any matching pages in your history."+" "+AJS.format("\u003ca href=\"{0}\"\u003eClick here\u003c/a\u003e to search for this term instead.",d)}this.showEmptyMessage(c)}else{this.clearEmptyMessage()}},filter:function(b,d){d=d||"";this.checkEmpty(b,d);var a=[this.$today,this.$yesterday,this.$older];_.invoke(a,"hideAll");var c=[];_.each(a,function(f){var e=f.showPages(b);if(e){c.push(f)}});if(c.length>1){c.pop();_.invoke(c,"showBorder")}},_groupForPage:function(a){var b=a.daysSinceLastSeen();if(b===0){return this.$today}else{if(b===1){return this.$yesterday}else{return this.$older}}},addOne:function(a){var b=this._groupForPage(a);b.add(a)},showEmptyMessage:function(a){this.$(".empty").html(AJS.$("<p>").html(a))},clearEmptyMessage:function(){this.$(".empty").html("")},addAll:function(){this.collection.each(this.addOne)},render:function(){this.$el.html(this.template());this.$today=new RY.PageGroupView({title:"Today"});this.$yesterday=new RY.PageGroupView({title:"Yesterday"});this.$older=new RY.PageGroupView({title:"Older"});var a=this.$(".groups");a.append(this.$today.render().el);a.append(this.$yesterday.render().el);a.append(this.$older.render().el);_.invoke([this.$today,this.$yesterday,this.$older],"hideAll");return this}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.recently-viewed-plugin:app-resources', location = 'js/quicknav/util.js' */
var RYQ=RYQ||{};(function(){RYQ.util={analytics:{trackQuickNavOpen:function(){AJS.trigger("analytics",{name:"recently-viewed-quicknav-open"})},trackQuickNavPageOpen:function(){AJS.trigger("analytics",{name:"recently-viewed-quicknav-click-page"})},trackQuickNavRecentlyDialogOpen:function(){AJS.trigger("analytics",{name:"recently-viewed-quicknav-click-more-recent"})}}}}());
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.recently-viewed-plugin:app-resources', location = 'js/quicknav/quicknav.js' */
var RYQ=RYQ||{};RYQ.QuickNavEntry=Backbone.Model.extend({classNameByType:{blogpost:"content-type-blogpost",page:"content-type-page"},parse:function(a){return{className:this.classNameByType[a.type],name:a.title,href:AJS.contextPath()+a.url,id:a.id,spaceName:a.space,lastSeen:a.lastSeen}}},{escape:function(b){var a=_.map(b,_.clone);_.each(a,function(c){c.name=_.escape(c.name);c.spaceName=_.escape(c.spaceName)});return a}});RYQ.QuickNavEntryCollection=Backbone.Collection.extend({model:RYQ.QuickNavEntry,url:AJS.contextPath()+"/rest/recentlyviewed/1.0/recent?limit=8",search:function(b){var a;if(AJS.$.trim(b).length===0){a=this.models}else{var c=b.match(/[^\s-]+/g);a=this.filter(function(e){var f=e.get("name");var d=f.toLowerCase();return _.all(c,function(g){return d.indexOf(g.toLowerCase())!==-1})})}this.trigger("filter",a);return a},comparator:function(a){return -(a.get("lastSeen"))}});(function(a){RYQ.QuickNav=Backbone.View.extend({initialize:function(){this.moreLink={className:"recently-viewed",href:"#",name:"More recently viewed pages..."};this.$input=a("#quick-search-query");this.makeDropdown();this.addShowHideHandlers();this.getHistory=_.once(this._getHistory);_.bindAll(this,"makeDropdown","addSearchResultBoostingHandler","_getHistory","render","addShowHideHandlers","_getItemsToShow","showQuickResults","onQuickSearch")},makeDropdown:function(){var c=function(d){a("a",d).each(function(){var g=a(this);var e=g.find("span");var f=AJS.dropDown.getAdditionalPropertyValue(e,"spaceName");if(f&&!g.is(".content-type-spacedesc")){g.after(g.clone().attr("class","space-name").html(f));g.parent().addClass("with-space-name")}})};var b=this;this.$dropdown=AJS.inputDrivenDropdown({dropdownPlacement:function(d){b.$input.closest("form").find(".quick-nav-drop-down").append(d)},dropdownPostprocess:function(d){c(d)},ajsDropDownOptions:{className:"recently-viewed-dropdown"}})},addSearchResultBoostingHandler:function(){var b=this;a(window).on("quicksearch.ajax-success",function(g,f){var d=f.url.match("/json/contentnamesearch.action");var c=f.url.match(/rest\/quicknav\/\d\/search/);if(d||c){b.onQuickSearch(g,f)}})},_getHistory:function(){return this.collection.fetch().done(this.addSearchResultBoostingHandler)},render:function(){var b=this.getHistory();b.done(_.bind(function(){if(AJS.dropDown.current==null&&this.collection.length!==0&&this.$input.val().length===0){this.showQuickResults()}},this));var c=this.$input;c.trigger("quick-search-loading-start");b.always(function(){c.trigger("quick-search-loading-stop")})},addShowHideHandlers:function(){var b=this;this.$input.on("focus",function(){b.render()}).on("click",function(c){c.stopPropagation();b.render()}).on("keyup",function(f){var c=f.which===27;var g=f.which===13;var d=a(this).val().length!==0;if(d||c){if(b.$dropdown.dd&&b.$dropdown.dd.$.is(":visible")){b.$dropdown.hide()}}else{if(!g){b.render()}}})},_getItemsToShow:function(){var c=this.collection.toJSON();var b=c.length>0&&c[0].id==AJS.Meta.get("page-id");if(b){c.shift()}return c},showQuickResults:function(){var b=RYQ.QuickNavEntry.escape(this._getItemsToShow());this.$dropdown.show([b,[this.moreLink]],"","");a(".recently-viewed-dropdown").on("click",".recently-viewed",function(c){c.preventDefault();a("#view-user-history-link").click();RYQ.util.analytics.trackQuickNavRecentlyDialogOpen()});a(".recently-viewed-dropdown").on("click",".with-space-name",function(c){RYQ.util.analytics.trackQuickNavPageOpen()});RYQ.util.analytics.trackQuickNavOpen()},onQuickSearch:function(l,f){var o=f.json.query;var c=_.map(this.collection.search(o),function(e){return e.attributes});c=RYQ.QuickNavEntry.escape(c);if(c.length==0){return}var m=f.json.contentNameMatches;var p=-1;for(var g=0;g<m.length;g++){var n=m[g][0].className;if(n=="content-type-blogpost"||n=="content-type-page"){p=g;break}}if(p!=-1){var h=m[p];var b=Math.min(h.length>4?2:6-h.length,c.length);h.unshift.apply(h,_(c).first(b));m[p]=_.uniq(h,function(e){return +e.id});if(h.length>6){var k=6-b;for(var d=k;d>0;d--){h.pop()}}}else{m.unshift(_(c).first(6))}}})}(AJS.$));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.recently-viewed-plugin:main-resources', location = 'js/main.js' */
var RY=RY||{};AJS.toInit(function(a){a("#view-user-history-link").unbind("click");a("#view-user-history-link").click(function(g){g.preventDefault();var c=new AJS.Dialog({width:600,height:500,id:"recently-viewed-dialog",closeOnOutsideClick:true});var f=a(RY.Templates.body());c.addHeader("Recently viewed pages");c.addPanel("SinglePanel",f);c.addLink("Close",function(e){e.hide()});var d=a("<div>",{"class":"dialog-tip"}).text("Hint: type \"g\" and then \"r\" anywhere to quickly open this menu");c.popup.element.find(".dialog-button-panel").append(d);var i=new RY.PageCollection();var b=new RY.PageCollectionView({collection:i});f.find(".pages").html(b.render().el);c.gotoPanel(0);c.show();var h=a("#recently-viewed-dialog").spin("large");i.fetch({success:function(){h.spinStop();var j=_.extend({},Backbone.Events);var k=new RY.PageNavigator(b.$el,f.parent(),j);var e=new RY.FilterView({collection:i,el:f.find(".filter"),navigationEvents:j}).render();e.search()}});RY.util.analytics.trackDialogOpen()})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.recently-viewed-plugin:main-resources', location = 'js/quicknav/main.js' */
var RYQ=RYQ||{};AJS.toInit(function(){var b=new RYQ.QuickNavEntryCollection();var a=new RYQ.QuickNav({collection:b})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-space-ia:spacemenu-resources', location = 'js/space-menu.js' */
AJS.toInit(function(a){var d=a(Confluence.Templates.BrowseSpaces.spacesLink());a("#space-directory-link").replaceWith(a(d));var b=a("#space-menu-link"),c=function(e){a("#space-menu-link-content").html(e.template);AJS.trigger("spacemenu-loaded");a("#create-space-header").click(function(){AJS.trigger("analytics",{name:"create-space-from-header"});Confluence.SpaceBlueprint.Dialog.launch();return false})};b.click(function(){if(!a("#space-menu-link-content .aui-dropdown2-section").length){a.ajax({url:Confluence.getContextPath()+"/rest/ia/1.0/spacesmenu",type:"GET",dataType:"json",cache:false,success:c})}return false});a("#space-menu-link-content").on("aui-dropdown2-show",function(){AJS.trigger("analytics",{name:"open-space-menu"})})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-space-ia:spacemenu-resources', location = 'soy/space-menu.soy' */
// This file was automatically generated from space-menu.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.BrowseSpaces == 'undefined') { Confluence.Templates.BrowseSpaces = {}; }


Confluence.Templates.BrowseSpaces.spacesLink = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<a id="space-menu-link" class="aui-nav-link aui-dropdown2-trigger" href="#" aria-haspopup="true" aria-owns="space-menu-link-content" title="', soy.$$escapeHtml("Spaces"), '"><span class="browse">', soy.$$escapeHtml("Spaces"), '</span><span class="aui-icon-dropdown"></span></a><div id="space-menu-link-content" class="aui-dropdown2 aui-style-default aui-dropdown2-in-header" aria-hidden="false"></div>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-space-ia:space-ia-analytics', location = 'js/space-ia-analytics.js' */
(function(d){var c=RegExp("(.+[?&])src=.+?(&.+|$)");var e;if(AJS.Confluence.Analytics&&AJS.Confluence.Analytics.setAnalyticsSource){e=AJS.Confluence.Analytics.setAnalyticsSource}else{e=function(h,i){if(b()){_.each(h,function(j){d(j).attr("href",g(d(j).attr("href"),i))})}}}function g(h,j){if(h&&(h.charAt(0)!="#")){var i=c.exec(h);if(!i){if(h.indexOf("?")>-1){h=h+"&src="+j}else{h=h+"?src="+j}}else{h=i[1]+"src="+j+i[2]}}return h}function b(){var h=d(document.getElementsByTagName("script"));var i=false;h.each(function(k,j){if(d(j).attr("src")&&d(j).attr("src").indexOf("google-analytics.com/ga.js")!=-1){i=true;return false}});return i}function f(){var i=d(".acs-side-bar a:not(.external_link a, #acs-configure-link)");e(i,"sidebar");var h=d(".quick-links-section li:not(.external_link) a");e(h,"spaceshortcut");var j=d(".ia-secondary-container a:not(.more-children-link)");if(d(".ia-secondary-container").data("tree-type")=="pages"){e(j,"contextnavchildmode")}else{if(d(".ia-secondary-container").data("tree-type")=="page-tree"){e(j,"contextnavpagetreemode")}else{e(j,"contextnav")}}}function a(h){return function(){AJS.trigger("analytics",{name:"space-ia-nav",data:{linkType:h}})}}AJS.bind("sidebar.exit-configure-mode",f);AJS.bind("sidebar.flyout-triggered",function(i,h){a("flyout-triggered."+h.flyout)()});AJS.bind("spacemenu-loaded",function(){e(d("#space-menu-link-content a"),"spacemenu")});AJS.bind("sidebar.spacetools-loaded",function(){e(d("#inline-dialog-space-tools a:not(.configure-sidebar)"),"spacetools")});AJS.bind("pagetree-children-loaded",f);AJS.toInit(function(h){h(".ia-secondary-container .more-children-link").click(a("context-nav.more-children"));f()})})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.aui.staging:content-ready', location = 'js/content-ready.js' */
(function(c){AJS.contentReady||(AJS.contentReady=function(){var a,d;1===arguments.length?a=arguments[0]:2===arguments.length&&(d=arguments[0],a=arguments[1]);c(AJS).on("content.ready",function(c){var e=Array.prototype.slice.call(arguments,1),b=e[0];if(d){b=b.is(d)?b:b.find(d);if(b.length){e[0]=b;a.apply(this,e)}}else a.apply(this,e)})},AJS.triggerContentReady=function(){c(AJS).trigger("content.ready",arguments)},c(function(){var a=[c("body")];AJS.contentReady.onReadyArgs&&(a=a.concat(AJS.contentReady.onReadyArgs));
AJS.triggerContentReady.apply(this,a)}))})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-feature-discovery-plugin:confluence-feature-discovery-plugin-resources', location = '/js/confluence-feature-discovery-plugin.js' */
(function(f){Confluence.FeatureDiscovery={};var c,e=false,i=3;var d="com.atlassian.confluence.plugins.confluence-feature-discovery-plugin";var g=d+":confluence-feature-discovery-plugin-resources.test-mode";var a=WRM.data.claim(g);function j(k){if(c===undefined){c=JSON.parse(AJS.Meta.get("discovered-plugin-features")||"{}")}if(k){return c[k]||[]}return c}function b(m,o){var n=j(m);for(var l=0,k=n.length;l<k;l++){if(n[l]==o){return true}}return false}function h(n,p){var l="com.atlassian.webdriver.discovery="+n+":"+p;var k=document.cookie.split(";");for(var m=0;m<k.length;m++){var o=k[m];while(o.charAt(0)==" "){o=o.substring(1)}if(o.indexOf(l)!=-1){return true}}return false}Confluence.FeatureDiscovery.forPlugin=function(m,l){var p=Confluence.storageManager("feature-discovery."+m);l=l||i;function o(r){var q=parseInt(p.getItem(r),10);return isNaN(q)?0:q}function n(r,q){return p.setItem(r,q)}function k(q){return p.removeItem(q)}return{addDiscoveryView:function(q){n(q,o(q)+1)},shouldShow:function(r,q){if(q===true&&a&&!h(m,r)){return false}if(e||b(m,r)){return false}if(o(r)>=l){this.markDiscovered(r);return false}e=true;return true},markDiscovered:function(r,q){if(b(m,r)){return}f.ajax({url:AJS.contextPath()+"/rest/feature-discovery/1.0/discovered/"+m+"/"+r,type:"POST",success:function(){j(m).unshift(r);k(r);AJS.trigger("feature-discovered",{pluginKey:m,featureKey:r});if(q&&f.isFunction(q)){q()}}})},listDiscovered:function(){return j(m).slice(0)}}}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.support.stp:stp-license-status-resources', location = 'js/stp-licenseStatus.js' */

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-license-banner:confluence-license-banner-resources', location = '/js/confluence-license-banner.js' */
require(["ajs","jquery"],function(a,b){a.toInit(function(){var d=WRM.data.claim("com.atlassian.confluence.plugins.confluence-license-banner:confluence-license-banner-resources.license-details");if(!d){a.warn("Unable to claim my required data");return}var c={destroyBanner:function(){b("#license-banner").slideUp(function(){b("#license-banner").remove()})},remindMeLater:function(){b.ajax({type:"POST",dataType:"json",url:a.contextPath()+"/rest/licensebanner/1.0/reminder/later"});c.destroyBanner()},remindMeNever:function(){b.ajax({type:"POST",dataType:"json",url:a.contextPath()+"/rest/licensebanner/1.0/reminder/never"});c.destroyBanner()},createBanner:function(g){var e;if(g.showLicenseExpiryBanner){e=Confluence.Templates.LicenseBanner.expiryBanner({days:g.daysBeforeLicenseExpiry,mac:g.renewUrl,sales:g.salesEmail})}else{if(g.showMaintenanceExpiryBanner){e=Confluence.Templates.LicenseBanner.maintenanceBanner({days:g.daysBeforeMaintenanceExpiry,mac:g.renewUrl,sales:g.salesEmail})}}if(e){var f=b(e);b("#full-height-container").prepend(f);b("#license-banner-later").click(function(h){h.preventDefault();c.remindMeLater()});b("#license-banner-never").click(function(h){h.preventDefault();c.remindMeNever()});f.find(".icon-close").click(function(h){h.preventDefault();c.remindMeLater()})}}};c.createBanner(d)})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-license-banner:confluence-license-banner-resources', location = 'soy/confluence-license-banner.soy' */
// This file was automatically generated from confluence-license-banner.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.LicenseBanner == 'undefined') { Confluence.Templates.LicenseBanner = {}; }


Confluence.Templates.LicenseBanner.wrapper = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div>', opt_data.contentHTML, '</div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.LicenseBanner.expiryBanner = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  var renewTag__soy8 = new soy.StringBuilder('<a id="license-banner-my-link" target="_blank" href="', soy.$$escapeHtml(opt_data.mac), '">');
  renewTag__soy8 = renewTag__soy8.toString();
  var end__soy12 = new soy.StringBuilder('</a>');
  end__soy12 = end__soy12.toString();
  var mailTag__soy14 = new soy.StringBuilder('<a id="license-banner-sales-link" href="mailto:', soy.$$escapeHtml(opt_data.sales), '">');
  mailTag__soy14 = mailTag__soy14.toString();
  var param18 = new soy.StringBuilder();
  aui.message.warning({content: '<div id="license-banner-content" data-days="' + soy.$$escapeHtml(opt_data.days) + '" data-subscription="true">' + ((opt_data.days < 0) ? AJS.format("Your license subscription has expired. This instance is now read-only. Please renew {0}online{1} or contact {2}sales{3}.",renewTag__soy8,end__soy12,mailTag__soy14,end__soy12) : (opt_data.days == 0) ? AJS.format("Your license subscription will expire today and Confluence will become read-only. Please renew {0}online{1} or contact {2}sales{3}.",renewTag__soy8,end__soy12,mailTag__soy14,end__soy12) : AJS.format("Your license subscription will expire in {0,choice,1#{0} day|1\x3c{0} days}. Confluence will become read-only after the expiry. Please renew {1}online{2} or contact {3}sales{4}.",opt_data.days,renewTag__soy8,end__soy12,mailTag__soy14,end__soy12)) + '</div>', isCloseable: opt_data.days > 7, id: 'license-banner'}, param18);
  Confluence.Templates.LicenseBanner.wrapper({contentHTML: param18.toString()}, output);
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.LicenseBanner.maintenanceBanner = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  var renewTag__soy39 = new soy.StringBuilder('<a id="license-banner-my-link" target="_blank" href="', soy.$$escapeHtml(opt_data.mac), '">');
  renewTag__soy39 = renewTag__soy39.toString();
  var end__soy43 = new soy.StringBuilder('</a>');
  end__soy43 = end__soy43.toString();
  var later__soy45 = new soy.StringBuilder('<a href="#" id="license-banner-later">');
  later__soy45 = later__soy45.toString();
  var never__soy47 = new soy.StringBuilder('<a href="#" id="license-banner-never">');
  never__soy47 = never__soy47.toString();
  var param49 = new soy.StringBuilder();
  aui.message.warning({content: '<div id="license-banner-content" data-days="' + soy.$$escapeHtml(opt_data.days) + '" data-subscription="false">' + ((opt_data.days < 0) ? AJS.format("You no longer have access Support and Updates. {0}Renew online{1}, {2}remind me later{3} or {4}never remind me again{5}.",renewTag__soy39,end__soy43,later__soy45,end__soy43,never__soy47,end__soy43) : (opt_data.days == 0) ? AJS.format("You will lose access to Support and Updates today. {0}Renew online{1}, {2}remind me later{3} or {4}never remind me again{5}.",renewTag__soy39,end__soy43,later__soy45,end__soy43,never__soy47,end__soy43) : AJS.format("You will lose access to Support and Updates in {0,choice,1#{0} day|1\x3c{0} days}. {1}Renew online{2}, {3}remind me later{4} or {5}never remind me again{6}.",opt_data.days,renewTag__soy39,end__soy43,later__soy45,end__soy43,never__soy47,end__soy43)) + '</div>', id: 'license-banner'}, param49);
  Confluence.Templates.LicenseBanner.wrapper({contentHTML: param49.toString()}, output);
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-knowledge-base:space-kb-web-resource', location = 'js/kb-space-dialog-wizard.js' */
AJS.bind("blueprint.wizard-register.ready",function(){function a(d,c){c.pageData.ContentPageTitle=c.pageData.name;return Confluence.SpaceBlueprint.CommonWizardBindings.submit(d,c)}function b(d,c){c.soyRenderContext.atlToken=AJS.Meta.get("atl-token");c.soyRenderContext.showSpacePermission=false}Confluence.Blueprint.setWizard("com.atlassian.confluence.plugins.confluence-knowledge-base:kb-blueprint-item",function(c){c.on("submit.kbSpaceId",a);c.on("pre-render.kbSpaceId",b);c.on("post-render.kbSpaceId",Confluence.SpaceBlueprint.CommonWizardBindings.postRender)})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-knowledge-base:space-kb-web-resource', location = 'soy/space.soy' */
// This file was automatically generated from space.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.SpaceBlueprints == 'undefined') { Confluence.SpaceBlueprints = {}; }
if (typeof Confluence.SpaceBlueprints.KnowledgeBase == 'undefined') { Confluence.SpaceBlueprints.KnowledgeBase = {}; }


Confluence.SpaceBlueprints.KnowledgeBase.dialogForm = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<form action="#" method="post" id="kb-space-form" class="common-space-form aui">');
  Confluence.Templates.Blueprints.CreateSpace.createSpaceFormFields({showSpacePermission: false, fieldErrors: opt_data.fieldErrors, name: opt_data.name, spaceKey: opt_data.spaceKey}, output);
  output.append('<fieldset><div class="field-group"><label for="kb-space-desc">', soy.$$escapeHtml("Description"), '</label><textarea id="kb-space-desc" class="textarea long-field" rows="3" type="text" name="description" placeholder="', soy.$$escapeHtml("What is this knowledge base for?"), '"></textarea></div></fieldset></form>');
  return opt_sb ? '' : output.toString();
};


Confluence.SpaceBlueprints.KnowledgeBase.livesearchMacro = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<ac:structured-macro ac:name="livesearch"><ac:parameter ac:name="additional">page excerpt</ac:parameter><ac:parameter ac:name="placeholder">', soy.$$escapeHtml("Search for a solution"), '</ac:parameter>', (opt_data.spaceKey) ? '<ac:parameter ac:name="spaceKey"><ri:space ri:space-key="' + soy.$$escapeHtml(opt_data.spaceKey) + '"/></ac:parameter>' : '', '<ac:parameter ac:name="type">page</ac:parameter><ac:parameter ac:name="size">large</ac:parameter></ac:structured-macro>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-knowledge-base:kb-article-resources', location = 'soy/kb-articles.soy' */
// This file was automatically generated from kb-articles.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Blueprints == 'undefined') { Confluence.Blueprints = {}; }
if (typeof Confluence.Blueprints.Plugin == 'undefined') { Confluence.Blueprints.Plugin = {}; }
if (typeof Confluence.Blueprints.Plugin.KnowledgeBaseArticle == 'undefined') { Confluence.Blueprints.Plugin.KnowledgeBaseArticle = {}; }


Confluence.Blueprints.Plugin.KnowledgeBaseArticle.wizardPage = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<form action="#" method="post" id="kb-article-wizard-page-form" class="aui"><fieldset><div class="field-group"><label for="kb-article-title">', soy.$$escapeHtml("Name"), '<span class="aui-icon icon-required">', soy.$$escapeHtml("$WIZARD_FORM_FIELD_REQUIRED_I18N"), '</span></label><input id="kb-article-title" class="text  long-field" type="text" name="title" title="title" placeholder="', soy.$$escapeHtml("Title of your article."), '" maxlength="255"><div class="error"></div></div><div class="field-group"><label>', soy.$$escapeHtml("Labels"), '</label><input id="kb-article-labels" class="text select2-input long-field" type="text" name="labelsString" title="labelsString" placeholder="', soy.$$escapeHtml("Topics this article covers (e.g. \x22printer\x22)."), '"><div class="error"></div></div></fieldset></form>');
  return opt_sb ? '' : output.toString();
};


Confluence.Blueprints.Plugin.KnowledgeBaseArticle.contentbylabelMacro = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<ac:structured-macro ac:name="contentbylabel"><ac:parameter ac:name="showLabels">false</ac:parameter><ac:parameter ac:name="max">5</ac:parameter><ac:parameter ac:name="sort">modified</ac:parameter><ac:parameter ac:name="reverse">true</ac:parameter><ac:parameter ac:name="labels">', soy.$$escapeHtml(opt_data.labels), '</ac:parameter><ac:parameter ac:name="showSpace">false</ac:parameter><ac:parameter ac:name="spaces"><ri:space ri:space-key="', soy.$$escapeHtml(opt_data.spaceKey), '" /></ac:parameter><ac:parameter ac:name="type">page</ac:parameter></ac:structured-macro>');
  return opt_sb ? '' : output.toString();
};


Confluence.Blueprints.Plugin.KnowledgeBaseArticle.jiraIssuesMacro = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<ac:structured-macro ac:name="jira"><ac:parameter ac:name="key">', soy.$$escapeHtml(opt_data.jiraIssueKey), '</ac:parameter><ac:parameter ac:name="serverId">', soy.$$escapeHtml(opt_data.jiraServerId), '</ac:parameter></ac:structured-macro>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-knowledge-base:kb-article-resources', location = 'js/kb-articles-dialog-wizard.js' */
AJS.toInit(function(c){function a(i,g){var h=g.$container;var f=c("#kb-article-labels",h);f.auiSelect2(Confluence.UI.Components.LabelPicker.build({separator:" ",queryOpts:{spaceKey:g.wizardData.spaceKey}}))}function d(j,h){var i=j,e=i.find("#kb-article-title"),g=c.trim(e.val()),f;i.find(".error").html("");if(!g){f="Title is required."}else{if(!Confluence.Blueprint.canCreatePage(h,g)){f="A page with this name already exists."}}if(f){e.focus().siblings(".error").html(f);return false}return true}function b(g,f){return d(f.$container,f.wizardData.spaceKey)}Confluence.Blueprint.setWizard("com.atlassian.confluence.plugins.confluence-knowledge-base:kb-how-to-item",function(e){e.on("post-render.kb-how-to-wizard",a);e.on("submit.kb-how-to-wizard",b)});Confluence.Blueprint.setWizard("com.atlassian.confluence.plugins.confluence-knowledge-base:kb-troubleshooting-item",function(e){e.on("post-render.kb-troubleshooting-wizard",a);e.on("submit.kb-troubleshooting-wizard",b)})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-menu', location = 'appswitcher/appswitcher.soy' */
// This file was automatically generated from appswitcher.soy.
// Please don't edit this file by hand.

if (typeof navlinks == 'undefined') { var navlinks = {}; }
if (typeof navlinks.templates == 'undefined') { navlinks.templates = {}; }
if (typeof navlinks.templates.appswitcher == 'undefined') { navlinks.templates.appswitcher = {}; }


navlinks.templates.appswitcher.linkSection = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (opt_data.list.length > 0) {
    output.append('<div class="aui-nav-heading sidebar-section-header">', soy.$$escapeHtml(opt_data.title), '</div><ul class="aui-nav nav-links">');
    var linkList8 = opt_data.list;
    var linkListLen8 = linkList8.length;
    for (var linkIndex8 = 0; linkIndex8 < linkListLen8; linkIndex8++) {
      var linkData8 = linkList8[linkIndex8];
      navlinks.templates.appswitcher.applicationsItem(linkData8, output);
    }
    output.append('</ul>');
  }
  return opt_sb ? '' : output.toString();
};


navlinks.templates.appswitcher.applicationsItem = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<li class="nav-link"><a href="', soy.$$escapeHtml(opt_data.link), '" class="interactive', (opt_data.self) ? ' checked' : '', '" title="', soy.$$escapeHtml(opt_data.link), '"><span class="nav-link-label">', soy.$$escapeHtml(opt_data.label), '</span></a></li>');
  return opt_sb ? '' : output.toString();
};


navlinks.templates.appswitcher.shortcutsItem = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<li class="nav-link"><a href="', soy.$$escapeHtml(opt_data.link), '" class="interactive', (opt_data.self) ? ' checked' : '', '" title="', soy.$$escapeHtml(opt_data.link), '"><span class="nav-link-label">', soy.$$escapeHtml(opt_data.label), '</span>', (opt_data.showDescription && opt_data.description) ? '<span class="nav-link-description">' + soy.$$escapeHtml(opt_data.description) + '</span>' : '', '</a></li>');
  return opt_sb ? '' : output.toString();
};


navlinks.templates.appswitcher.error = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="app-switcher-error">', "Something went wrong, please \x3cspan class\x3d\x22app-switcher-retry\x22\x3etry again\x3c/span\x3e.", '</div>');
  return opt_sb ? '' : output.toString();
};


navlinks.templates.appswitcher.sidebarContents = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="aui-page-panel-nav"><nav class="aui-navgroup aui-navgroup-vertical"><div class="app-switcher-section app-switcher-applications"><div class="aui-nav-heading">', soy.$$escapeHtml("Application Links"), '</div><div class="app-switcher-loading">', "Loading\x26hellip;", '</div></div><div class="app-switcher-section app-switcher-shortcuts"><div class="aui-nav-heading">', soy.$$escapeHtml("Shortcuts"), '</div><div class="app-switcher-loading">', "Loading\x26hellip;", '</div></div></nav></div>');
  return opt_sb ? '' : output.toString();
};


navlinks.templates.appswitcher.trigger = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<span class="aui-icon aui-icon-small aui-iconfont-appswitcher">', soy.$$escapeHtml("Linked Applications"), '</span>');
  return opt_sb ? '' : output.toString();
};


navlinks.templates.appswitcher.projectHeaderSection = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="app-switcher-title">');
  aui.avatar.avatar({size: 'large', avatarImageUrl: opt_data.avatarUrl, isProject: true, title: opt_data.name}, output);
  output.append('<div class="sidebar-project-name">', soy.$$escapeHtml(opt_data.name), '</div></div>');
  return opt_sb ? '' : output.toString();
};


navlinks.templates.appswitcher.cogDropdown = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  var dropdownList__soy74 = new soy.StringBuilder();
  navlinks.templates.appswitcher.dropdownList({list: opt_data.links}, dropdownList__soy74);
  dropdownList__soy74 = dropdownList__soy74.toString();
  aui.dropdown2.dropdown2({menu: {'id': opt_data.id, 'content': dropdownList__soy74, 'extraClasses': 'aui-style-default sidebar-customize-section'}, trigger: {'showIcon': false, 'content': '<span class="aui-icon aui-icon-small aui-iconfont-configure"></span>', 'container': '#app-switcher'}}, output);
  return opt_sb ? '' : output.toString();
};


navlinks.templates.appswitcher.dropdownList = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<ul class="sidebar-admin-links">');
  var linkList82 = opt_data.list;
  var linkListLen82 = linkList82.length;
  for (var linkIndex82 = 0; linkIndex82 < linkListLen82; linkIndex82++) {
    var linkData82 = linkList82[linkIndex82];
    output.append('<li class="nav-link"><a href="', soy.$$escapeHtml(linkData82.href), '" title="', soy.$$escapeHtml(linkData82.title), '"><span class="nav-link-label">', soy.$$escapeHtml(linkData82.label), '</span></a></li>');
  }
  output.append('</ul>');
  return opt_sb ? '' : output.toString();
};


navlinks.templates.appswitcher.switcher = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (true) {
    if (AJS.DarkFeatures.isEnabled('rotp.sidebar')) {
      var sidebarContents__soy97 = new soy.StringBuilder();
      navlinks.templates.appswitcher.sidebarContents(null, sidebarContents__soy97);
      sidebarContents__soy97 = sidebarContents__soy97.toString();
      var triggerContent__soy99 = new soy.StringBuilder();
      navlinks.templates.appswitcher.trigger(null, triggerContent__soy99);
      triggerContent__soy99 = triggerContent__soy99.toString();
      navlinks.templates.appswitcher.sidebar({sidebar: {'id': 'app-switcher', 'content': sidebarContents__soy97}, trigger: {'showIcon': false, 'content': triggerContent__soy99}}, output);
      output.append('<script>\n                (function (NL) {\n                    var initialise = function () {\n                        new NL.SideBar({\n                            sidebarContents: \'#app-switcher\'\n                        });\n                    };\n                    if (NL.SideBar) {\n                        initialise();\n                    } else {\n                        NL.onInit = initialise;\n                    }\n                }(window.NL = (window.NL || {})));\n                window.NL.isUserAdmin = ', soy.$$escapeHtml(false), '<\/script>');
    } else {
      navlinks.templates.appswitcher_old.switcher(null, output);
    }
  }
  return opt_sb ? '' : output.toString();
};


navlinks.templates.appswitcher.sidebar = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<a href="', soy.$$escapeHtml(opt_data.sidebar.id), '" class="sidebar-trigger app-switcher-trigger" aria-owns="', soy.$$escapeHtml(opt_data.sidebar.id), '" aria-haspopup="true">', opt_data.trigger.content, '</a><div id=', soy.$$escapeHtml(opt_data.sidebar.id), ' class="app-switcher-sidebar aui-style-default sidebar-offscreen">', opt_data.sidebar.content, '</div>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-menu', location = 'appswitcher/appswitcher.js' */
(function(c,a){a.SideBar=function(d){var e=this;this.$sidebar=null;d=c.extend({sidebarContents:null},d);this.getLinks=function(){return c.ajax({url:AJS.contextPath()+"/rest/menu/latest/appswitcher",cache:false,dataType:"json"}).done(this.updateAppLinks).fail(this.showAppSwitcherError)};this.populateProjectHeader=function(g,f){e.getSidebar().find(".app-switcher-shortcuts .aui-nav-heading").after(navlinks.templates.appswitcher.projectHeaderSection({avatarUrl:f,name:g}))};this.getProjectData=function(){var f=c(".project-shortcut-dialog-trigger"),g=f.data("key"),h=f.data("entity-type");if(f.size()==0||!g||!h){c(".app-switcher-shortcuts").remove();return}var j,i;i=c.ajax({url:AJS.contextPath()+"/rest/project-shortcuts/1.0/local/"+g,cache:false,data:{entityType:h},dataType:"json"});j=c.ajax({url:AJS.contextPath()+"/rest/project-shortcuts/1.0/remote/"+g,cache:false,data:{entityType:h},dataType:"json"});c.when(i,j).then(function(l,k){e.updateProjectShortcuts(l,k,{key:g,entityType:h,name:f.data("name"),avatarUrl:f.find("img").prop("src")})},e.showProjectShortcutsError)};this.getSidebar=function(){if(!this.$sidebar){this.$sidebar=c(d.sidebarContents)}return this.$sidebar};this.addApplicationsCog=function(){c(".app-switcher-applications .aui-nav-heading").before(navlinks.templates.appswitcher.cogDropdown({id:"sidebar-applications-admin-dropdown",links:[{href:AJS.contextPath()+"/plugins/servlet/customize-application-navigator",label:"Customize navigator",title:"Add new entries, hide existing or restrict who sees what"},{href:AJS.contextPath()+"/plugins/servlet/applinks/listApplicationLinks",label:"Manage application links",title:"Link to more Atlassian applications"}]}))};this.addProjectShortcutsCog=function(f,h){var g=[{href:AJS.contextPath()+"/plugins/servlet/custom-content-links-admin?entityKey="+f,label:"Customize shortcuts",title:""}];if(e.entityMappings[h]){g.push({href:e.generateEntityLinksUrl(f,e.entityMappings[h]),label:"Manage product links",title:""})}e.getSidebar().find(".app-switcher-shortcuts .aui-nav-heading").before(navlinks.templates.appswitcher.cogDropdown({id:"sidebar-project-shortcuts-admin-dropdown",links:g}))};this.updateAppLinks=function(f){c(function(){e.getSidebar().find(".app-switcher-applications").html(navlinks.templates.appswitcher.linkSection({title:"Application Links",list:f}));if(a.isUserAdmin){e.addApplicationsCog()}e.bindAnalyticsHandlers(e.getSidebar(),f)})};this.updateProjectShortcuts=function(i,g,h){var j=i[0].shortcuts,f=g[0].shortcuts;e.getSidebar().find(".app-switcher-shortcuts").html(navlinks.templates.appswitcher.linkSection({title:"Shortcuts",list:j.concat(f)}));if(a.isUserAdmin){e.addProjectShortcutsCog(h.key,h.entityType)}e.populateProjectHeader(h.name,h.avatarUrl);e.bindAnalyticsHandlers(e.getSidebar(),data)};this.entityMappings={"confluence.space":"com.atlassian.applinks.api.application.confluence.ConfluenceSpaceEntityType","jira.project":"com.atlassian.applinks.api.application.jira.JiraProjectEntityType","bamboo.project":"com.atlassian.applinks.api.application.bamboo.BambooProjectEntityType","stash.project":"com.atlassian.applinks.api.application.stash.StashProjectEntityType"};this.generateEntityLinksUrl=function(f,g){if(g===e.entityMappings["confluence.space"]){return AJS.contextPath()+"/spaces/listentitylinks.action?typeId="+g+"&key="+f}else{return AJS.contextPath()+"/plugins/servlet/applinks/listEntityLinks/"+g+"/"+f}};this.showAppSwitcherError=function(){c(function(){var f=e.getSidebar();f.find(".app-switcher-applications .app-switcher-loading").replaceWith(navlinks.templates.appswitcher.error());f.off(".appswitcher").on("click.appswitcher",".app-switcher-retry",c.proxy(e.retryLoading,e))})};this.showProjectShortcutsError=function(){c(function(){var f=e.getSidebar();f.find(".app-switcher-shortcuts .app-switcher-loading").replaceWith(navlinks.templates.appswitcher.error());f.off(".appswitcher").on("click.appswitcher",".app-switcher-retry",c.proxy(e.retryLoading,e))})};this.retryLoading=function(f){this.getSidebar().html(navlinks.templates.appswitcher.sidebarContents());this.getLinks();this.getProjectData();f&&f.stopPropagation()};this.bindAnalyticsHandlers=function(f,g){};this.getLinks();c(this.getProjectData);this.toggleSidebar=function(h){var i=e.getSidebar(),g=c("body"),f=c(window.document);if(!g.hasClass("app-switcher-open")){var k=c("#header");i.css("left",-i.width());i.parent("body").length||i.appendTo("body");b({data:i});i.animate({left:0},300);function j(l){var n=l.target&&c(l.target),m=l.keyCode;if(l.originalEvent===h.originalEvent){return}if(n&&!m&&!(n.closest(i).length||n.closest(k).length)&&h.which==1&&!(l.shiftKey||l.ctrlKey||l.metaKey)){e.toggleSidebar()}else{if(m===27){e.toggleSidebar()}}}f.on("click.appSwitcher",j);f.on("keydown.appSwitcher",j);f.on("scroll.appSwitcher",i,b)}else{f.off(".appSwitcher")}g.toggleClass("app-switcher-open")};c("#header").on("click",".app-switcher-trigger",this.toggleSidebar)};function b(f){var d=c(document).scrollTop(),g=c("#header"),e=(g.height()+g.offset().top)-d;if(e>=0){f.data.css({top:e,position:"fixed"})}else{f.data.css({top:0,left:0,position:"fixed"})}}if(a.onInit){a.onInit()}}(jQuery,window.NL=(window.NL||{})));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-menu', location = 'appswitcher/appswitcher_old.js' */
(function(e,c){c.AppSwitcher=function(f){var g=AJS.contextPath()+"/plugins/servlet/customize-application-navigator";var h=this;this.$dropdown=null;f=e.extend({dropdownContents:null},f);this.getLinks=function(){return e.ajax({url:AJS.contextPath()+"/rest/menu/latest/appswitcher",cache:false,dataType:"json"}).done(this.updateDropdown).fail(this.showError)};this.getDropdown=function(){if(!this.$dropdown){this.$dropdown=e(f.dropdownContents)}return this.$dropdown};this.updateDropdown=function(i){e(function(){h.getDropdown().html(navlinks.templates.appswitcher_old.applications({apps:i,showAdminLink:c.isUserAdmin,adminLink:g}));h.bindAnalyticsHandlers(h.getDropdown(),i);h.processSuggestionApps(i)})};this.bindAnalyticsHandlers=function(i,j){};this.processSuggestionApps=function(i){e.ajax({type:"GET",dataType:"json",contentType:"application/json; charset=UTF-8",url:AJS.contextPath()+"/rest/menu/latest/isAppSuggestionAvailable"}).done(function(j){if(j===true){h.handleSuggestionApps(i)}})};this.handleSuggestionApps=function(k){var l=_.map(k,function(m){return m.applicationType.toLowerCase()});$suggestionApps=e("<div id='app-switcher-suggestion-apps' class='aui-dropdown2-section'/>");$suggestionApps.html(navlinks.templates.appswitcher_old.suggestionApps);var j=$suggestionApps.find(".suggestion-apps");var i=false;_.each(a,function(m){if(!_.contains(l,m.appName)){i=true;j.append(navlinks.templates.appswitcher_old.suggestionApp({appName:m.appName,appDesc:m.appDesc}))}});if(!i){return}e("#app-switcher").append($suggestionApps);e(".app-discovery-suggestion-app").click(function(){AJS.trigger("analytics",{name:"appswitcher.discovery.user.select."+e(this).find("a").attr("id").toLowerCase()});window.open(e(this).find("a").attr("title"),"_blank")});e(".app-discovery-suggestion-app").hover(function(){e(this).find("a").removeClass("active").removeClass("aui-dropdown2-active")});e(".app-discovery-cancel-button").click(function(){AJS.trigger("analytics",{name:"appswitcher.discovery.nothanks.button.click"});d(b,"true");$suggestionApps.remove()})};this.showError=function(){e(function(){h.getDropdown().html(navlinks.templates.appswitcher_old.error()).off(".appswitcher").on("click.appswitcher",".app-switcher-retry",e.proxy(h.retryLoading,h))})};this.retryLoading=function(i){this.getDropdown().html(navlinks.templates.appswitcher_old.loading());this.getLinks();i&&i.stopPropagation()};this.getLinks()};var b="key-no-thanks";var a=[{appName:"jira",appDesc:"Issue & Project Tracking Software"},{appName:"confluence",appDesc:"Collaboration and content sharing"},{appName:"bamboo",appDesc:"Continuous integration"}];var d=function(f,g){e.ajax({url:AJS.contextPath()+"/rest/menu/latest/userdata/",type:"PUT",contentType:"application/json",data:JSON.stringify({key:f,value:g})})};if(c.onInit){c.onInit()}}(jQuery,window.NL=(window.NL||{})));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-menu', location = 'appswitcher/appswitcher_old.soy' */
// This file was automatically generated from appswitcher_old.soy.
// Please don't edit this file by hand.

if (typeof navlinks == 'undefined') { var navlinks = {}; }
if (typeof navlinks.templates == 'undefined') { navlinks.templates = {}; }
if (typeof navlinks.templates.appswitcher_old == 'undefined') { navlinks.templates.appswitcher_old = {}; }


navlinks.templates.appswitcher_old.applications = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  navlinks.templates.appswitcher_old.applicationsSection({list: opt_data.apps, listClass: 'nav-links', showDescription: opt_data.showDescription}, output);
  if (opt_data.custom) {
    navlinks.templates.appswitcher_old.applicationsSection({list: opt_data.custom, showDescription: opt_data.showDescription}, output);
  }
  if (opt_data.showAdminLink) {
    navlinks.templates.appswitcher_old.adminSection(opt_data, output);
  }
  return opt_sb ? '' : output.toString();
};


navlinks.templates.appswitcher_old.applicationsSection = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (opt_data.list.length > 0) {
    var param19 = new soy.StringBuilder('<ul', (opt_data.listClass) ? ' class="' + soy.$$escapeHtml(opt_data.listClass) + '"' : '', '>');
    var linkList27 = opt_data.list;
    var linkListLen27 = linkList27.length;
    for (var linkIndex27 = 0; linkIndex27 < linkListLen27; linkIndex27++) {
      var linkData27 = linkList27[linkIndex27];
      navlinks.templates.appswitcher_old.applicationsItem(soy.$$augmentData(linkData27, {showDescription: opt_data.showDescription}), param19);
    }
    param19.append('</ul>');
    aui.dropdown2.section({content: param19.toString()}, output);
  }
  return opt_sb ? '' : output.toString();
};


navlinks.templates.appswitcher_old.applicationsItem = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<li class="nav-link', (opt_data.self) ? ' nav-link-local' : '', '"><a href="', soy.$$escapeHtml(opt_data.link), '" class="aui-dropdown2-radio interactive', (opt_data.self) ? ' checked' : '', '" title="', soy.$$escapeHtml(opt_data.link), '"><span class="nav-link-label">', soy.$$escapeHtml(opt_data.label), '</span>', (opt_data.showDescription && opt_data.description) ? '<span class="nav-link-description">' + soy.$$escapeHtml(opt_data.description) + '</span>' : '', '</a></li>');
  return opt_sb ? '' : output.toString();
};


navlinks.templates.appswitcher_old.adminSection = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  aui.dropdown2.section({content: '<ul class="nav-links"><li><a class="nav-link-edit-wrapper" href="' + soy.$$escapeHtml(opt_data.adminLink) + '"><span class="nav-link-edit">' + "Configure\x26hellip;" + '</span></a></li></ul>'}, output);
  return opt_sb ? '' : output.toString();
};


navlinks.templates.appswitcher_old.error = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="app-switcher-error">', "Something went wrong, please \x3cspan class\x3d\x22app-switcher-retry\x22\x3etry again\x3c/span\x3e.", '</div>');
  return opt_sb ? '' : output.toString();
};


navlinks.templates.appswitcher_old.loading = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="app-switcher-loading">', "Loading\x26hellip;", '</div>');
  return opt_sb ? '' : output.toString();
};


navlinks.templates.appswitcher_old.trigger = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<span class="aui-icon aui-icon-small aui-iconfont-appswitcher">', soy.$$escapeHtml("Linked Applications"), '</span>');
  return opt_sb ? '' : output.toString();
};


navlinks.templates.appswitcher_old.switcher = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (true) {
    var loadingContent__soy81 = new soy.StringBuilder();
    navlinks.templates.appswitcher_old.loading(null, loadingContent__soy81);
    loadingContent__soy81 = loadingContent__soy81.toString();
    var triggerContent__soy83 = new soy.StringBuilder();
    navlinks.templates.appswitcher_old.trigger(null, triggerContent__soy83);
    triggerContent__soy83 = triggerContent__soy83.toString();
    aui.dropdown2.dropdown2({menu: {'id': 'app-switcher', 'content': loadingContent__soy81, 'extraClasses': 'aui-style-default'}, trigger: {'showIcon': false, 'content': triggerContent__soy83, 'extraClasses': 'app-switcher-trigger', 'extraAttributes': {'href': '#app-switcher'}}}, output);
    output.append('<script>\n            (function (NL) {\n                var initialise = function () {\n                    // For some milestones of AUI, the atlassian soy namespace was renamed to aui. Handle that here by ensuring that window.atlassian is defined.\n                    window.atlassian = window.atlassian || window.aui;\n                    new NL.AppSwitcher({\n                        dropdownContents: \'#app-switcher\'\n                    });\n                };\n                if (NL.AppSwitcher) {\n                    initialise();\n                } else {\n                    NL.onInit = initialise;\n                }\n            }(window.NL = (window.NL || {})));\n            window.NL.isUserAdmin = ', soy.$$escapeHtml(false), '<\/script>');
  }
  return opt_sb ? '' : output.toString();
};


navlinks.templates.appswitcher_old.suggestionApp = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<li class="app-discovery-suggestion-app"><a id="', soy.$$escapeHtml(opt_data.appName), '" href="#" class="app-discovery-link aui-icon-container app-discovery-', soy.$$escapeHtml(opt_data.appName), '-product-icon" title="https://www.atlassian.com/software/', soy.$$escapeHtml(opt_data.appName), '"/><div class="app-discovery-small">', soy.$$escapeHtml(opt_data.appDesc), '</div></li>');
  return opt_sb ? '' : output.toString();
};


navlinks.templates.appswitcher_old.suggestionApps = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<ul class=\'nav-links suggestion-apps\'><li><span class=\'app-discovery-suggest-title nav-link-label\'><h6>', soy.$$escapeHtml("Try other Atlassian apps"), '</h6></span></li></ul><div class=\'buttons-container app-discovery-suggest-apps-buttons\'><div class=\'buttons\'><button class=\'aui-button aui-button-link app-discovery-cancel-button\' name=\'cancel\' accesskey=\'c\' href=\'#\'>', soy.$$escapeHtml("Don\x27t show this again"), '</button></div></div>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-menu', location = 'appswitcher/inline-dialog.js' */
(function(d){AJS.CustomInlineDialog=AJS.CustomInlineDialog||function(B,n,r,p){p=p||[];if(p.hasOwnProperty("getArrowAttributes")){getArrowAttributesDeprecationLogger()}if(p.hasOwnProperty("getArrowPath")){getArrowPathDeprecationLogger();if(p.hasOwnProperty("gravity")){getArrowPathWithGravityDeprecationLogger()}}if(p.hasOwnProperty("onTop")){onTopDeprecationLogger();if(p.onTop&&p.gravity===undefined){p.gravity="s"}}if(typeof n==="undefined"){n=String(Math.random()).replace(".","");if(d("#inline-dialog-"+n+", #arrow-"+n+", #inline-dialog-shim-"+n).length){throw"GENERATED_IDENTIFIER_NOT_UNIQUE"}}var z=d.extend(false,AJS.CustomInlineDialog.opts,p);if(z.gravity==="w"){z.offsetX=p.offsetX===undefined?10:p.offsetX;z.offsetY=p.offsetY===undefined?0:p.offsetY}var v=function(){return window.Raphael&&p&&(p.getArrowPath||p.getArrowAttributes)};var j;var q;var K;var u=false;var A=false;var I=false;var J;var x;var g=d('<div id="inline-dialog-'+n+'" class="aui-inline-dialog"><div class="aui-inline-dialog-contents contents"></div><div id="arrow-'+n+'" class="aui-inline-dialog-arrow arrow"></div></div>');var m=d("#arrow-"+n,g);var G=g.find(".contents");if(!v()){g.find(".aui-inline-dialog-arrow").addClass("aui-css-arrow")}if(!z.displayShadow){G.addClass("aui-inline-dialog-no-shadow")}if(z.autoWidth){G.addClass("aui-inline-dialog-auto-width")}else{G.css("width",z.width+"px")}G.mouseover(function(O){clearTimeout(q);g.unbind("mouseover")}).mouseout(function(){E()});var D=function(){if(!j){j={popup:g,hide:function(){E(0)},id:n,show:function(){y()},persistent:z.persistent?true:false,reset:function(){function S(U,T){U.css(T.popupCss);if(v()){if(T.gravity==="s"){T.arrowCss.top-=d.browser.msie?10:9}if(!U.arrowCanvas){U.arrowCanvas=Raphael("arrow-"+n,16,16)}var V=z.getArrowPath,W=d.isFunction(V)?V(T):V;U.arrowCanvas.path(W).attr(z.getArrowAttributes())}else{m.removeClass("aui-bottom-arrow aui-left-arrow aui-right-arrow");if(T.gravity==="s"&&!m.hasClass("aui-bottom-arrow")){m.addClass("aui-bottom-arrow")}else{if(T.gravity==="n"){}else{if(T.gravity==="w"){m.addClass("aui-left-arrow")}else{if(T.gravity==="e"){m.addClass("aui-right-arrow")}}}}}m.css(T.arrowCss)}var P=AJS.$(window).height();var Q=Math.round(P*0.75);g.children(".aui-inline-dialog-contents").css("max-height",Q);var O=z.calculatePositions(g,x,J,z);if(O.hasOwnProperty("displayAbove")){displayAboveDeprecationLogger();O.gravity=O.displayAbove?"s":"n"}S(g,O);g.fadeIn(z.fadeTime,function(){});if(d.browser.msie&&~~(d.browser.version)<10){var R=d("#inline-dialog-shim-"+n);if(!R.length){d(g).prepend(d('<iframe class = "inline-dialog-shim" id="inline-dialog-shim-'+n+'" frameBorder="0" src="javascript:false;"></iframe>'))}R.css({width:G.outerWidth(),height:G.outerHeight()})}}}}return j};var y=function(){if(g.is(":visible")){return}K=setTimeout(function(){if(!I||!A){return}z.addActiveClass&&d(B).addClass("active");u=true;if(!z.persistent){H()}AJS.CustomInlineDialog.current=D();d(document).trigger("showLayer",["inlineDialog",D()]);D().reset()},z.showDelay)};var E=function(O){if(typeof O=="undefined"&&z.persistent){return}A=false;if(u&&z.preHideCallback.call(g[0].popup)){O=(O==null)?z.hideDelay:O;clearTimeout(q);clearTimeout(K);if(O!=null){q=setTimeout(function(){l();z.addActiveClass&&d(B).removeClass("active");g.fadeOut(z.fadeTime,function(){z.hideCallback.call(g[0].popup)});if(g.arrowCanvas){g.arrowCanvas.remove();g.arrowCanvas=null}u=false;A=false;d(document).trigger("hideLayer",["inlineDialog",D()]);AJS.CustomInlineDialog.current=null;if(!z.cacheContent){I=false;w=false}},O)}}};var F=function(R,P){var O=d(P);z.upfrontCallback.call({popup:g,hide:function(){E(0)},id:n,show:function(){y()}});g.each(function(){if(typeof this.popup!="undefined"){this.popup.hide()}});if(z.closeOthers){d(".aui-inline-dialog").each(function(){!this.popup.persistent&&this.popup.hide()})}x={target:O};if(!R){J={x:O.offset().left,y:O.offset().top}}else{J={x:R.pageX,y:R.pageY}}if(!u){clearTimeout(K)}A=true;var Q=function(){w=false;I=true;z.initCallback.call({popup:g,hide:function(){E(0)},id:n,show:function(){y()}});y()};if(!w){w=true;if(d.isFunction(r)){r(G,P,Q)}else{d.get(r,function(T,S,U){G.html(z.responseHandler(T,S,U));I=true;z.initCallback.call({popup:g,hide:function(){E(0)},id:n,show:function(){y()}});y()})}}clearTimeout(q);if(!u){y()}return false};g[0].popup=D();var w=false;var t=false;var s=function(){if(!t){d(z.container).append(g);t=true}};var o=d(B);if(z.onHover){if(z.useLiveEvents){if(o.selector){d(document).on("mousemove",o.selector,function(O){s();F(O,this)}).on("mouseout",o.selector,function(){E()})}else{AJS.log("Warning: inline dialog trigger elements must have a jQuery selector when the useLiveEvents option is enabled.")}}else{o.mousemove(function(O){s();F(O,this)}).mouseout(function(){E()})}}else{if(!z.noBind){if(z.useLiveEvents){if(o.selector){d(document).on("click",o.selector,function(O){s();if(M()){g.hide()}else{F(O,this)}return false}).on("mouseout",o.selector,function(){E()})}else{AJS.log("Warning: inline dialog trigger elements must have a jQuery selector when the useLiveEvents option is enabled.")}}else{o.click(function(O){s();if(M()){g.hide()}else{F(O,this)}return false}).mouseout(function(){E()})}}}var M=function(){return u&&z.closeOnTriggerClick};var H=function(){k();f()};var l=function(){C();N()};var i=false;var h=n+".inline-dialog-check";var k=function(){if(!i){d("body").bind("click."+h,function(P){var O=d(P.target);if(O.closest("#inline-dialog-"+n+" .contents").length===0){E(0)}});i=true}};var C=function(){if(i){d("body").unbind("click."+h)}i=false};var L=function(O){if(O.keyCode===27){E(0)}};var f=function(){d(document).on("keydown",L)};var N=function(){d(document).off("keydown",L)};g.show=function(P,O){if(P){P.stopPropagation()}s();if(z.noBind&&!(B&&B.length)){F(P,O===undefined?P.target:O)}else{F(P,B)}};g.hide=function(){E(0)};g.refresh=function(){if(u){D().reset()}};g.getOptions=function(){return z};return g};function c(g){var f=d(g);var h=d.extend({left:0,top:0},f.offset());return{left:h.left,top:h.top,width:f.outerWidth(),height:f.outerHeight()}}function b(h,j,t,f){var m=AJS.$.isFunction(f.offsetX)?f.offsetX(h,j,t,f):f.offsetX;var l=AJS.$.isFunction(f.offsetY)?f.offsetY(h,j,t,f):f.offsetY;var q=AJS.$.isFunction(f.arrowOffsetX)?f.arrowOffsetX(h,j,t,f):f.arrowOffsetX;var p=AJS.$.isFunction(f.arrowOffsetY)?f.arrowOffsetY(h,j,t,f):f.arrowOffsetY;var s=f.container.toLowerCase()!=="body";var g=AJS.$(f.container);var o=s?AJS.$(f.container).parent():AJS.$(window);var r=s?g.offset():{left:0,top:0};var k=s?o.offset():{left:0,top:0};var i=j.target;var u=i.offset();var n=i[0].getBBox&&i[0].getBBox();return{screenPadding:10,arrowMargin:5,window:{top:k.top,left:k.left,scrollTop:o.scrollTop(),scrollLeft:o.scrollLeft(),width:o.width(),height:o.height()},scrollContainer:{width:g.width(),height:g.height()},trigger:{top:u.top-r.top,left:u.left-r.left,width:n?n.width:i.outerWidth(),height:n?n.height:i.outerHeight()},dialog:{width:h.width(),height:h.height(),offset:{top:l,left:m}},arrow:{height:h.find(".arrow").outerHeight(),offset:{top:p,left:q}}}}function e(f,p,G,r){var n=b(f,p,G,r);var j=n.screenPadding;var k=n.window;var t=n.trigger;var D=n.dialog;var i=n.arrow;var z=n.scrollContainer;var E={top:t.top-k.scrollTop,left:t.left-k.scrollLeft};var A=Math.floor(t.height/2);var v=Math.floor(D.height/2);var u=Math.floor(i.height/2);var C=E.left-D.offset.left-j;var H=z.width-E.left-t.width-D.offset.left-j;var B=C>=D.width;var h=H>=D.width;var l=!h&&B?"e":"w";var o=E.top+A-u;var q=k.height-o-i.height;j=Math.min(j,o-n.arrowMargin);j=Math.min(j,q-n.arrowMargin);var g=E.top+A;var x=Math.max(g-j,0);var F=Math.max(k.height-g-j,0);var y=v-D.offset.top>x;var m=v+D.offset.top>F;var w;var s;if(y){w={top:k.scrollTop+j,left:l==="w"?t.left+t.width+D.offset.left:t.left-D.width-D.offset.left};s={top:(t.top+A)-(w.top+u)}}else{if(m){w={top:k.scrollTop+k.height-D.height-j,left:l==="w"?t.left+t.width+D.offset.left:t.left-D.width-D.offset.left};s={top:(t.top+A)-(w.top+u)}}else{w={top:t.top+A-v+D.offset.top,left:l==="w"?t.left+t.width+D.offset.left:t.left-D.width-D.offset.left};s={top:v-u+i.offset.top}}}return{gravity:l,popupCss:w,arrowCss:s}}function a(g,o,z,s){var x=AJS.$.isFunction(s.offsetX)?s.offsetX(g,o,z,s):s.offsetX;var v=AJS.$.isFunction(s.offsetY)?s.offsetY(g,o,z,s):s.offsetY;var m=AJS.$.isFunction(s.arrowOffsetX)?s.arrowOffsetX(g,o,z,s):s.arrowOffsetX;var l=AJS.$.isFunction(s.arrowOffsetY)?s.arrowOffsetY(g,o,z,s):s.arrowOffsetY;var f=c(window);var p=c(o.target);var y=c(g);var j=c(g.find(".aui-inline-dialog-arrow"));var i=p.left+p.width/2;var u=(window.pageYOffset||document.documentElement.scrollTop)+f.height;var k=10;y.top=p.top+p.height+~~v;y.left=p.left+~~x;var r=f.width-(y.left+y.width+k);j.left=i-y.left+~~m;j.top=-(j.height/2);var n=p.top>y.height;var h=(y.top+y.height)<u;var q=(!h&&n)||(n&&s.gravity==="s");if(q){y.top=p.top-y.height-(j.height/2);j.top=y.height}if(s.isRelativeToMouse){if(r<0){y.right=k;y.left="auto";j.left=z.x-(f.width-y.width)}else{y.left=z.x-20;j.left=z.x-y.left}}else{if(r<0){y.right=k;y.left="auto";var w=f.width-y.right;var t=w-y.width;j.right="auto";j.left=i-t-j.width/2}else{if(y.width<=p.width/2){j.left=y.width/2;y.left=i-y.width/2}}}return{gravity:q?"s":"n",displayAbove:q,popupCss:{left:y.left,top:y.top,right:y.right},arrowCss:{left:j.left,top:j.top,right:j.right}}}AJS.CustomInlineDialog.opts={onTop:false,responseHandler:function(g,f,h){return g},closeOthers:true,isRelativeToMouse:false,addActiveClass:true,onHover:false,useLiveEvents:false,noBind:false,fadeTime:100,persistent:false,hideDelay:10000,showDelay:0,width:300,offsetX:0,offsetY:10,arrowOffsetX:0,arrowOffsetY:0,container:"body",cacheContent:true,displayShadow:true,autoWidth:false,gravity:"n",closeOnTriggerClick:false,preHideCallback:function(){return true},hideCallback:function(){},initCallback:function(){},upfrontCallback:function(){},calculatePositions:function(f,i,j,h){h=h||{};var g=h.gravity==="w"?e:a;return g(f,i,j,h)},getArrowPath:function(f){if(f.gravity==="s"){return"M0,8L8,16,16,8"}else{return"M0,8L8,0,16,8"}},getArrowAttributes:function(){return{fill:"#fff",stroke:"#ccc"}}}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.web.resources:about', location = '/includes/js/about/about-page.js' */
AJS.toInit(function(a){var c;a("#confluence-about-link").click(function(d){d.preventDefault();a(this).removeClass("interactive");if(null==c){AJS.Meta.get("version-number").match(/^\d+\.\d+/);var d="Atlassian Confluence and Confluence Plugins",e=AJS.Meta.get("context-path")+"/aboutconfluence.action",b=new AJS.ConfluenceDialog({id:"about-confluence-dialog",closeOnOutsideClick:!0});b.addHeader(d);b.addCancel("Close",function(){b.hide()});a.get(e,function(a){b.addPanel("default",
a,"about-page-content")});c=b}c.show()})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.web.resources:general-analytics-bindings', location = '/includes/js/analytics-support/analytics-bindings.js' */
require(["jquery","confluence-analytics-support"],function(b,d){b(function(){function e(a,c){b(a).on("click",".view-historical-version-trigger",function(){d.publish("confluence.page.view-historical.from-"+(c||"unknown"))})}function f(a,c){b(a).on("click",".restore-historical-version-trigger",function(){d.publish("confluence.page.restore-historical.from-"+(c||"unknown"))})}function g(a,c){b("#header .aui-header-secondary "+a).on("click",function(){var a=b(this).hasClass("aui-dropdown2-active")?"expanded":
"collapsed";d.publish("confluence.header.dropdown."+c,{state:a})})}e("#page-history-warning","navigation");e("#page-history-container","history");e(".diff-menu","diff");f("#page-history-warning","navigation");f("#page-history-container","history");g("#admin-menu-link","administration");g("#user-menu-link","profile")})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.mywork.mywork-confluence-host-plugin:mw-header-anchor', location = 'templates/anchor.soy' */
// This file was automatically generated from anchor.soy.
// Please don't edit this file by hand.

if (typeof MyWork == 'undefined') { var MyWork = {}; }
if (typeof MyWork.Templates == 'undefined') { MyWork.Templates = {}; }
if (typeof MyWork.Templates.Anchor == 'undefined') { MyWork.Templates.Anchor = {}; }


MyWork.Templates.Anchor.tasksFeatureDiscovery = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<p>', soy.$$escapeHtml("See the tasks assigned to you, or created by you, in the Tasks tab of your profile."), '</p><ul class="mw-tasks-discovery-controls"><li><a id="mw-tasks-discovery-view" href="', soy.$$escapeHtml(opt_data.tasksUrl), '" class="aui-button aui-style"><p>', soy.$$escapeHtml("View Tasks"), '</p></a></li><li><a id="mw-tasks-discovery-dismiss" href="#">', soy.$$escapeHtml("Dismiss"), '</a></li></ul>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.mywork.mywork-confluence-host-plugin:mw-header-anchor', location = 'js/miniview-anchor.js' */
var MW=MW||{$:AJS.$||Zepto};MW.MV={};AJS.toInit(function(){if(AJS.Meta&&!AJS.Meta.get("remote-user")){return}MW.MV.AnchorManager=function(){var l=contextPath,h=l+"/plugins/servlet/notifications-miniview",p=0,e=/[?&]show-miniview/.test(window.location.search);function r(t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var s="[\\?\\#&]"+t+"=([^&#]*)";var v=new RegExp(s);var u=v.exec(window.location.search);if(u!==null){return decodeURIComponent(u[1].replace(/\+/g," "))}}var o=r("show-miniview");if(o){h+="#notification/"+o}function q(){var s="badge-i aui-icon aui-icon-small aui-iconfont-workbox-empty";MW.$("#notifications-anchor").html('<div class="'+s+'"></div><span class="badge-w"><span class="badge"></span></span>').attr("title","Open Notifications")}function f(u){var t=false,s;return function(){if(t){return s}t=true;s=u.apply(this,arguments);return s}}var n=f(function(){MW.Dialog.getOptions().closeOthers=false;MW.Dialog.preload=true;MW.Dialog.show();MW.Dialog.hide();MW.Dialog.getOptions().closeOthers=true});function k(s){return s<=9?s:"9+"}function j(s){var t=MW.$("#notifications-anchor"),u=t.find(".badge"),v=t.find(".aui-icon");u.html(k(s));p=s;if(s>0){t.addClass("unread").removeClass("read");v.addClass("aui-iconfont-workbox").removeClass("aui-iconfont-workbox-empty");if(t.is(":visible")&&!e){n()}}else{t.addClass("read").removeClass("unread");v.addClass("aui-iconfont-workbox-empty").removeClass("aui-iconfont-workbox")}}function m(){c("notifications",h);d()}function d(){MW.$(document).keydown(function(s){if(AJS.InlineDialog.current&&s.which==27&&!MW.$(s.target).is(":input")){AJS.InlineDialog.current.hide()}})}function i(){MW.$("#header-menu-bar").find(".ajs-drop-down").each(function(){this.hide()})}function c(x,v){var w;var u=function(){w=this};var s=function(){if(this.preload!==true){var y=JSON.stringify({markAllRead:true});MW.$("#"+x+"-miniview-iframe")[0].contentWindow.postMessage(y,"*")}};if(!window.addEventListener){window.attachEvent("onmessage",t)}else{window.addEventListener("message",t,false)}function t(A){function B(C){return C===location.protocol+"//"+location.host}if("escKey"===A.data){w.hide();MW.$("#notifications-anchor").focus();document.activeElement.blur()}else{if("getParentConfig"===A.data&&B(A.origin)){var z=JSON.stringify({parentConfig:{parentUrl:location.href,preload:MW.Dialog.preload,unread:p}}),y=MW.$("#"+x+"-miniview-iframe")[0].contentWindow;y.postMessage(z,"*");if(MW.Dialog.preload){MW.Dialog.preload=false}else{y.focus()}}}}MW.Dialog=AJS.InlineDialog(MW.$("#"+x+"-anchor"),x+"-miniview",function(B,z,C){if(MW.$(B).children().length===0){MW.$(B).append(MW.$('<iframe id="'+x+'-miniview-iframe" src="'+v+'" frameborder="0"></iframe>'))}else{var A=JSON.stringify({unread:p}),y=MW.$("#"+x+"-miniview-iframe")[0].contentWindow;y.postMessage(A,"*");setTimeout(function(){y.focus()},100)}i();C()},{width:500,height:520,hideDelay:null,initCallback:u,hideCallback:s,noBind:true});MW.Tasks=(function(){var A=300;var z=20;var B=16;var G;var D=AJS.$("#user-menu-link");var C=AJS.$("#user-menu-link-content");var y=C.find("#view-mytasks-link");var E=function(J,H,K){var I=MyWork.Templates.Anchor.tasksFeatureDiscovery({tasksUrl:AJS.contextPath()+"/plugins/inlinetasks/mytasks.action"});J.html(I);J.find("#mw-tasks-discovery-dismiss").click(function(){G.hide()});K()};var F=function(){MW.Dialog.hide();var J=function(){return C.is(":visible")};if(!J()){D.trigger("aui-button-invoke")}var H=function(){G.hide()};C.one("aui-dropdown2-hide",H);G=AJS.InlineDialog(y,"my-tasks-discovery",E,{hideCallback:function(){G.unbind("click focusin mousedown",I);C.unbind("aui-dropdown2-hide",H);if(J()){D.trigger("aui-button-invoke")}MW.$("#inline-dialog-my-tasks-discovery").remove()},gravity:"w",useLiveEvents:true,width:A,noBind:true});C.find(".user-item.active").removeClass("active");y.addClass("active");y.focus();var I=function(K){K.stopPropagation()};G.on("click focusin mousedown",I);G.show()};return{closeAndDiscoverMyTasks:F}})();MW.$("#"+x+"-anchor").click(function(y){y.preventDefault();if(MW.$("#"+x+"-miniview-iframe").is(":visible")){MW.Dialog.hide()}else{MW.Dialog.show()}});if(e){MW.$("#"+x+"-anchor").click()}}function g(){q();m()}return{setupAnchors:g,updateNotificationCount:j}}();MW.MV.AnchorManager.setupAnchors();var b=new MW.AnchorUtil(MW.$,contextPath,MW.MV.AnchorManager.updateNotificationCount);b.setupAnchors();MW.$("#notifications-anchor").click(function(){MW.MV.AnchorManager.updateNotificationCount(0)});var a=function(){if(document.hidden){b.stopRequests(true)}else{b.startRequests()}};document.addEventListener("visibilitychange",a,false);if(typeof document.hidden==="undefined"){MW.$(window).focus(function(){b.startRequests()})}MW.$("body").click(function(){b.startRequests()})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.mywork.mywork-confluence-host-plugin:mw-header-anchor', location = 'js/util/anchor-util.js' */
MW.AnchorUtil=function(d,k,e){var f=30000,i=f,s,p=k+"/rest/mywork/latest/status/notification/count";var r=new Date().getTime();var b=5*60*1000;var t=1000*60*5;var h=1.25;var c=0;function q(u){window.clearInterval(s);s=undefined;if(u===true){i=f}}function o(){return(new Date().getTime()-r)<t}function m(){if(!o()||!s){l()}r=new Date().getTime()}function l(){if(s){clearTimeout(s)}s=setTimeout(function(){g()},c=n(c))}function a(w,u){var v=w*1000;b=u*1000||b;if(v&&v!=i){i=v;m()}}function n(u){return Math.min(o()?i:u*h,b)}function g(u){MW.$.getJSON(p+((u)?"?pageid="+u:""),function(w){a(w.timeout,w.maxTimeout);var v=w.count;e(v)});l()}function j(){var u=AJS&&AJS.Meta&&AJS.Meta.get&&(AJS.Meta.get("content-type")==="page"||AJS.Meta.get("content-type")==="blogpost");if(u){g(AJS.Meta.get("page-id"))}else{g()}m()}return{setupAnchors:j,startRequests:m,stopRequests:q,updateAnchors:g}};
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.balsamiq.confluence.plugins.mockups:blueprint-web-resource', location = 'includes/editor/blueprintcallback.js' */
try{if(AJS&&AJS.Confluence&&AJS.Confluence.Blueprint){AJS.Confluence.Blueprint.setDirectCallback("com.balsamiq.confluence.plugins.mockups:blueprint-item",function(b,a){a.finalUrl=Confluence.getContextPath()+"/pages/createpage.action?spaceKey="+encodeURIComponent(a.spaceKey)+"&openBalsamiq=true"})}}catch(err){if(console&&console.log){console.log("Error loading blueprintcallback.js");console.log(err)}};
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.m20tech.tooltips:tooltip-resources', location = '/tooltips/tooltip-enable.js' */
AJS.toInit(function(){AJS.$("a").each(function(c){var e=$(this)[0];var b=e.href;var a=b.search("\\?tooltip=");if(a>0){e.href="#";var d=decodeURIComponent(b.substr(a+9));e.title=d;$(this).addClass("link-tooltip")}});AJS.$(".link-tooltip").tooltip({live:true})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.atlassian-nps-plugin:nps-acknowledgement-resources', location = 'js/nps/server/nps-initialiser.js' */

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-business-blueprints:common-template-resources', location = 'com/atlassian/confluence/plugins/blueprint/common/soy/common-templates.soy' */
// This file was automatically generated from common-templates.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Blueprints == 'undefined') { Confluence.Blueprints = {}; }
if (typeof Confluence.Blueprints.Common == 'undefined') { Confluence.Blueprints.Common = {}; }
if (typeof Confluence.Blueprints.Common.Index == 'undefined') { Confluence.Blueprints.Common.Index = {}; }


Confluence.Blueprints.Common.Index.detailsSummaryMacro = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<ac:macro ac:name="detailssummary"><ac:parameter ac:name="label">', soy.$$escapeHtml(opt_data.label), '</ac:parameter><ac:parameter ac:name="spaces">', soy.$$escapeHtml(opt_data.spaces), '</ac:parameter><ac:parameter ac:name="firstcolumn">', soy.$$escapeHtml(opt_data.firstcolumn), '</ac:parameter><ac:parameter ac:name="headings">', soy.$$escapeHtml(opt_data.headings), '</ac:parameter><ac:parameter ac:name="blankTitle">', soy.$$escapeHtml(opt_data.blankTitle), '</ac:parameter><ac:parameter ac:name="blankDescription">', soy.$$escapeHtml(opt_data.blankDescription), '</ac:parameter><ac:parameter ac:name="contentBlueprintId">', soy.$$escapeHtml(opt_data.contentBlueprintId), '</ac:parameter><ac:parameter ac:name="blueprintModuleCompleteKey">', soy.$$escapeHtml(opt_data.blueprintModuleCompleteKey), '</ac:parameter><ac:parameter ac:name="createButtonLabel">', soy.$$escapeHtml(opt_data.createButtonLabel), '</ac:parameter></ac:macro>');
  return opt_sb ? '' : output.toString();
};


Confluence.Blueprints.Common.Index.createFromTemplateMacro = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<ac:macro ac:name="create-from-template"><ac:parameter ac:name="blueprintModuleCompleteKey">', soy.$$escapeHtml(opt_data.moduleKey), '</ac:parameter><ac:parameter ac:name="buttonLabel">', soy.$$escapeHtml(opt_data.buttonLabel), '</ac:parameter><ac:parameter ac:name="spaceKey">', soy.$$escapeHtml(opt_data.spaceKey), '</ac:parameter><ac:parameter ac:name="templateName">', soy.$$escapeHtml(opt_data.templateName), '</ac:parameter></ac:macro>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-business-blueprints:file-list-resources', location = 'com/atlassian/confluence/plugins/filelist/soy/templates.soy' */
// This file was automatically generated from templates.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.FileList == 'undefined') { Confluence.Templates.FileList = {}; }


Confluence.Templates.FileList.dialogForm = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<form action="#" method="post" id="file-list-form" class="aui"><fieldset><div class="field-group"><label for="file-list-page-title">', soy.$$escapeHtml("Name"), '<span class="aui-icon icon-required"> required</span></label><input id="file-list-page-title" class="text long-field" type="text" name="title" placeholder="', soy.$$escapeHtml("Title of your file list"), '" maxlength="255"><div class="error"></div></div><div class="field-group"><label for="file-list-page-description">', soy.$$escapeHtml("Description"), '</label><textarea id="file-list-page-description" class="textarea long-field" name="description" rows="6" placeholder="', soy.$$escapeHtml("Description which will appear at the top of file list"), '"></textarea></div><div class="field-group"><label for="file-list-restrictions">', soy.$$escapeHtml("Restrictions"), '</label><input id="file-list-restrictions" class="text long-field autocomplete-multiuser" type="text" name="viewPermissionsUsers" placeholder="', soy.$$escapeHtml("Restrict to users"), '"></div></fieldset></form>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-business-blueprints:file-list-resources', location = 'com/atlassian/confluence/plugins/filelist/js/create-file-list-listener.js' */
(function(b){function c(h,g){var d=h.find("#file-list-page-title"),f=b.trim(d.val()),e;if(!f){e="Name is required."}else{if(!Confluence.Blueprint.canCreatePage(g,f)){e="A page with this name already exists."}}if(e){d.focus().siblings(".error").html(e);return false}return true}function a(d,e){return c(e.$container,e.wizardData.spaceKey)}Confluence.Blueprint.setWizard("com.atlassian.confluence.plugins.confluence-business-blueprints:file-list-item",function(d){d.on("submit.file-list-page1",a)})})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-business-blueprints:meeting-notes-resources', location = 'com/atlassian/confluence/plugins/meetingnotes/soy/how-to.soy' */
// This file was automatically generated from how-to.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Blueprints == 'undefined') { Confluence.Blueprints = {}; }
if (typeof Confluence.Blueprints.Meeting == 'undefined') { Confluence.Blueprints.Meeting = {}; }
if (typeof Confluence.Blueprints.Meeting.Notes == 'undefined') { Confluence.Blueprints.Meeting.Notes = {}; }


Confluence.Blueprints.Meeting.Notes.howTo = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<h1>', soy.$$escapeHtml("With meeting notes you can..."), '</h1><ol class="howto-steps"><li class="howto-step"><div><h3>', soy.$$escapeHtml("Crowd-source your agenda"), '</h3><p>', soy.$$escapeHtml("Distribute an agenda and keep meetings focused."), '</p></div></li><li class="howto-step"><div><h3>', soy.$$escapeHtml("Capture meeting minutes"), '</h3><p>', soy.$$escapeHtml("Take notes and make them available to everyone."), '</p></div></li><li class="howto-step"><div><h3>', soy.$$escapeHtml("Create and assign tasks"), '</h3><p>', soy.$$escapeHtml("Assign action items for attendees to work on afterward."), '</p></div></li></ol>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-business-blueprints:meeting-notes-resources', location = 'com/atlassian/confluence/plugins/meetingnotes/soy/user-mention.soy' */
// This file was automatically generated from user-mention.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.Meeting == 'undefined') { Confluence.Templates.Meeting = {}; }
if (typeof Confluence.Templates.Meeting.Notes == 'undefined') { Confluence.Templates.Meeting.Notes = {}; }


Confluence.Templates.Meeting.Notes.userMention = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.username) ? '<li><p><ac:link><ri:user ri:username="' + soy.$$escapeHtml(opt_data.username) + '" /></ac:link></p></li><li><p><ac:placeholder ac:type="mention">' + soy.$$escapeHtml("@mention a person to add them as an attendee and they will be notified.") + '</ac:placeholder></p></li>' : '<li><p><ac:placeholder ac:type="mention">' + soy.$$escapeHtml("@mention a person to add them as an attendee and they will be notified.") + '</ac:placeholder></p></li>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-business-blueprints:decisions-resources', location = 'com/atlassian/confluence/plugins/decisions/soy/decisions-templates.soy' */
// This file was automatically generated from decisions-templates.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Blueprints == 'undefined') { Confluence.Blueprints = {}; }
if (typeof Confluence.Blueprints.Decisions == 'undefined') { Confluence.Blueprints.Decisions = {}; }


Confluence.Blueprints.Decisions.dialogForm = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<form action="#" method="post" id="decisions-form" class="aui"><fieldset><div class="field-group"><label for="decisions-status">', soy.$$escapeHtml("Status"), '</label><select class="select long-field" id="decisions-status" name="status"><option value="GREY">', soy.$$escapeHtml("Not started"), '</option><option value="YELLOW">', soy.$$escapeHtml("In progress"), '</option><option value="GREEN">', soy.$$escapeHtml("Decided"), '</option></select></div><div class="field-group"><label for="decisions-page-title">', soy.$$escapeHtml("Decision"), '<span class="aui-icon icon-required"> required</span></label><input id="decisions-page-title" class="text long-field" type="text" name="title" placeholder="', soy.$$escapeHtml("What are you deciding?"), '" maxlength="255"><div class="error"></div></div><div class="field-group"><label for="decisions-owner">', soy.$$escapeHtml("Owner"), '</label><input id="decisions-owner" type="text" class="text long-field autocomplete-multiuser" name="owner" placeholder="', soy.$$escapeHtml("Who should make the final decision?"), '" data-autofill-user="true"></div><div class="field-group"><label for="decisions-stakeholders">', soy.$$escapeHtml("Stakeholders"), '</label><input id="decisions-stakeholders" class="text long-field autocomplete-multiuser" type="text" name="stakeholders" placeholder="', soy.$$escapeHtml("Who needs to help make this decision?"), '"></div><div class="field-group"><label for="decisions-due-date">', soy.$$escapeHtml("Due date"), '</label><input id="decisions-due-date" class="datepicker-field date-field text" type="text" name="due-date" size="10" autocomplete="off"></div><div class="field-group"><label for="decisions-background">', soy.$$escapeHtml("Background"), '</label><textarea id="decisions-background" class="textarea long-field" rows="3" name="background" placeholder="', soy.$$escapeHtml("What details are important in making this decision?"), '"></textarea></div><div class="field-group"><label for="decisions-final-decision">', soy.$$escapeHtml("Outcome"), '</label><textarea id="decisions-final-decision" class="textarea long-field" rows="3" name="final-decision" placeholder="', soy.$$escapeHtml("What did you decide?"), '"></textarea></div></fieldset></form>');
  return opt_sb ? '' : output.toString();
};


Confluence.Blueprints.Decisions.mentionXml = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  var nameList35 = opt_data.names;
  var nameListLen35 = nameList35.length;
  for (var nameIndex35 = 0; nameIndex35 < nameListLen35; nameIndex35++) {
    var nameData35 = nameList35[nameIndex35];
    output.append('<ac:link><ri:user ri:username="', soy.$$escapeHtml(nameData35), '" /></ac:link>&nbsp;');
  }
  return opt_sb ? '' : output.toString();
};


Confluence.Blueprints.Decisions.mentionsPlaceholder = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<ac:placeholder ac:type="mention">', soy.$$escapeHtml(opt_data.placeholderText), '</ac:placeholder>');
  return opt_sb ? '' : output.toString();
};


Confluence.Blueprints.Decisions.placeholder = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<ac:placeholder>', soy.$$escapeHtml(opt_data.placeholderText), '</ac:placeholder>');
  return opt_sb ? '' : output.toString();
};


Confluence.Blueprints.Decisions.statusTemplate = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<ac:macro ac:name="status"><ac:parameter ac:name="title">', soy.$$escapeHtml(opt_data.status), '</ac:parameter><ac:parameter ac:name="colour">', soy.$$escapeHtml(opt_data.statusColour), '</ac:parameter></ac:macro>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-business-blueprints:decisions-resources', location = 'com/atlassian/confluence/plugins/decisions/js/create-decisions-listener.js' */
(function(c){function d(i,h){var e=i.find("#decisions-page-title"),g=c.trim(e.val()),f;if(!g){f="Decision is required."}else{if(!Confluence.Blueprint.canCreatePage(h,g)){f="A page with this name already exists."}}if(f){e.focus().siblings(".error").html(f);return false}return true}function a(e,f){return d(f.$container,f.wizardData.spaceKey)}function b(e,f){c("#decisions-due-date").datepicker({dateFormat:"yy-mm-dd"});c("#decisions-status").on("change",function(){var h=c("#decisions-final-decision");var g=c("label[for=decisions-final-decision]");if(c(this).find(":selected").val()=="GREEN"){h.css({display:"inline"});g.css({display:"inline"})}else{h.css({display:"none"});g.css({display:"none"})}})}Confluence.Blueprint.setWizard("com.atlassian.confluence.plugins.confluence-business-blueprints:decisions-blueprint-item",function(e){e.on("post-render.decisions-page1",b);e.on("submit.decisions-page1",a)})})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-business-blueprints:sharelinks-resources', location = 'com/atlassian/confluence/plugins/sharelinks/soy/sharelinks-templates.soy' */
// This file was automatically generated from sharelinks-templates.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Blueprints == 'undefined') { Confluence.Blueprints = {}; }
if (typeof Confluence.Blueprints.Sharelinks == 'undefined') { Confluence.Blueprints.Sharelinks = {}; }


Confluence.Blueprints.Sharelinks.dialogForm = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<form action="#" method="post" id="sharelinks-form" class="aui"><fieldset><div class="field-group"><label for="sharelinks-url">', soy.$$escapeHtml("Link"), '<span class="aui-icon icon-required"> required</span></label><input id="sharelinks-url" class="text long-field" type="text" name="url" placeholder="', soy.$$escapeHtml("Paste a link to any website"), '"/><div class="error"></div></div><div class="field-group"><label for="sharelinks-title">', soy.$$escapeHtml("Title"), '<span class="aui-icon icon-required"> required</span></label><input id="sharelinks-title" class="text long-field" type="text" name="title" title="title" placeholder="', soy.$$escapeHtml("Title of the page"), '" maxlength="255"><div class="error"></div></div><div class="field-group"><label for="sharelinks-label">', soy.$$escapeHtml("Labels"), '</label><input id="sharelinks-label" class="text select2-input long-field" type="text" name="label" placeholder="', soy.$$escapeHtml("Suggest a topic"), '" /></div><div class="field-group"><label for="sharelinks-sharewith">', soy.$$escapeHtml("Share with"), '</label><input id="sharelinks-sharewith" class="text long-field autocomplete-multiuser" type="text" name="sharewith" placeholder="', soy.$$escapeHtml("Share this page with users"), '"/></div><div class="field-group"><label for="sharelinks-comment">', soy.$$escapeHtml("Comment"), '</label><textarea id="sharelinks-comment" class="textarea long-field" rows="4" type="text" name="comment" placeholder="', soy.$$escapeHtml("Share your thoughts about this link"), '"></textarea></div></fieldset></form>');
  return opt_sb ? '' : output.toString();
};


Confluence.Blueprints.Sharelinks.previewLink = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="sharelinks-preview">');
  if (opt_data.linkMetaData.title) {
    output.append('<h3 class="sharelinks-preview-title">', soy.$$escapeHtml(opt_data.linkMetaData.title), '</h3>');
    if (opt_data.linkMetaData.imageURL) {
      output.append('<div class="sharelinks-preview-image"><img src="', soy.$$escapeHtml(opt_data.linkMetaData.imageURL), '"/></div>');
    } else {
      var noImagePreviewContent__soy37 = new soy.StringBuilder();
      Confluence.Blueprints.Sharelinks.noImagePreview(null, noImagePreviewContent__soy37);
      noImagePreviewContent__soy37 = noImagePreviewContent__soy37.toString();
      output.append(noImagePreviewContent__soy37);
    }
    output.append((opt_data.linkMetaData.description) ? '<p>' + soy.$$escapeHtml(opt_data.linkMetaData.description) + '</p>' : '');
  } else {
    var previewUnavailableContent__soy47 = new soy.StringBuilder();
    Confluence.Blueprints.Sharelinks.previewUnavailable(null, previewUnavailableContent__soy47);
    previewUnavailableContent__soy47 = previewUnavailableContent__soy47.toString();
    output.append(previewUnavailableContent__soy47);
  }
  output.append('</div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Blueprints.Sharelinks.previewVideoLink = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="sharelinks-preview"><h3 class="sharelinks-preview-title">', soy.$$escapeHtml(opt_data.linkMetaData.title), '</h3><div class="sharelinks-preview-video">');
  if (opt_data.linkMetaData.imageURL) {
    output.append('<span class="sharelinks-preview-image"><img src="', soy.$$escapeHtml(opt_data.linkMetaData.imageURL), '"/><span class="sharelinks-preview-camera-icon sharelinks-camera-with-image"></span></span>');
  } else {
    output.append('<div>');
    var noImagePreviewContent__soy63 = new soy.StringBuilder();
    Confluence.Blueprints.Sharelinks.noImagePreview(null, noImagePreviewContent__soy63);
    noImagePreviewContent__soy63 = noImagePreviewContent__soy63.toString();
    output.append(noImagePreviewContent__soy63, '<span class="sharelinks-preview-camera-icon sharelinks-camera-with-no-image"></span></div>');
  }
  output.append('</div>', (opt_data.linkMetaData.description) ? '<p>' + soy.$$escapeHtml(opt_data.linkMetaData.description) + '</p>' : '', '</div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Blueprints.Sharelinks.previewLoading = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="sharelinks-preview-loading"><span class="aui-icon aui-icon-wait"></span>&nbsp;', soy.$$escapeHtml("Loading preview\u2026"), '</div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Blueprints.Sharelinks.metaDataHtml = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="sharelinks-link-meta-data"><ac:macro ac:name="panel"><ac:rich-text-body>', (opt_data.linkMetaData.imageURL) ? '<h3><ac:image ac:align="right"><ri:url ri:value=\'' + soy.$$escapeHtml(opt_data.linkMetaData.imageURL) + '\' /></ac:image></h3>' : '', '<p><ac:image ac:width=\'16\'><ri:url ri:value="', soy.$$escapeHtml(opt_data.faviconURL), '" /></ac:image>&nbsp;<a href="', soy.$$escapeHtml(opt_data.linkMetaData.sourceURL), '">', soy.$$escapeHtml(opt_data.linkMetaData.excerptedURL), '</a></p>', (opt_data.linkMetaData.description) ? '<blockquote><p>' + soy.$$escapeHtml(opt_data.descriptionMessage) + '</p></blockquote>' : '<p style="text-align: left;"><span style="color: rgb(128,128,128);"><em>' + soy.$$escapeHtml(opt_data.descriptionMessage) + '</em></span></p>', '<p><strong><a href="', soy.$$escapeHtml(opt_data.linkMetaData.sourceURL), '">', soy.$$escapeHtml("Open link"), '</a></strong></p></ac:rich-text-body></ac:macro></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Blueprints.Sharelinks.previewError = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="sharelinks-preview">');
  var previewUnavailableContent__soy109 = new soy.StringBuilder();
  Confluence.Blueprints.Sharelinks.previewUnavailable(null, previewUnavailableContent__soy109);
  previewUnavailableContent__soy109 = previewUnavailableContent__soy109.toString();
  output.append(previewUnavailableContent__soy109, '</div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Blueprints.Sharelinks.videoMetaDataHtml = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<ac:macro ac:name="panel"><ac:rich-text-body><ac:macro ac:name="section"><ac:rich-text-body><ac:macro ac:name="column"><ac:parameter ac:name="width">50%</ac:parameter><ac:rich-text-body><p><ac:image ac:width=\'16\'><ri:url ri:value="', soy.$$escapeHtml(opt_data.faviconURL), '" /></ac:image>&nbsp;<a href="', soy.$$escapeHtml(opt_data.linkMetaData.sourceURL), '">', soy.$$escapeHtml(opt_data.linkMetaData.excerptedURL), '</a></p>', (opt_data.linkMetaData.description) ? '<blockquote><p>' + soy.$$escapeHtml(opt_data.linkMetaData.description) + '</p></blockquote>' : '', '<p><strong><a href="', soy.$$escapeHtml(opt_data.linkMetaData.sourceURL), '">', soy.$$escapeHtml("Open link"), '</a></strong></p></ac:rich-text-body></ac:macro><ac:macro ac:name="column"><ac:parameter ac:name="width">50%</ac:parameter><ac:rich-text-body><p>', (opt_data.isSupportedMediaDomain) ? '<ac:macro ac:name="widget"><ac:parameter ac:name="url">' + soy.$$escapeHtml(opt_data.linkMetaData.sourceURL) + '</ac:parameter><ac:parameter ac:name="width">350</ac:parameter><ac:parameter ac:name="height">240</ac:parameter></ac:macro>' : '<ac:image ac:width="300"><ri:url ri:value="' + soy.$$escapeHtml(opt_data.linkMetaData.imageURL) + '" /></ac:image>', '</p></ac:rich-text-body></ac:macro></ac:rich-text-body></ac:macro></ac:rich-text-body></ac:macro>');
  return opt_sb ? '' : output.toString();
};


Confluence.Blueprints.Sharelinks.twitterMetaDataHtml = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (opt_data.linkMetaData.description) {
    output.append('<div class="sharelinks-twitter-content"><p><ac:image ac:width=\'16\'><ri:url ri:value="', soy.$$escapeHtml(opt_data.faviconURL), '" /></ac:image>&nbsp;<a href="', soy.$$escapeHtml(opt_data.linkMetaData.sourceURL), '">', soy.$$escapeHtml(opt_data.linkMetaData.excerptedURL), '</a></p><p><ac:macro ac:name="widget"><ac:parameter ac:name="url">', soy.$$escapeHtml(opt_data.linkMetaData.sourceURL), '</ac:parameter></ac:macro></p><p><strong><a href="', soy.$$escapeHtml(opt_data.linkMetaData.sourceURL), '">', soy.$$escapeHtml("Open link"), '</a></strong></p></div>');
  } else {
    Confluence.Blueprints.Sharelinks.metaDataHtml(opt_data, output);
  }
  return opt_sb ? '' : output.toString();
};


Confluence.Blueprints.Sharelinks.bookmarkletGuideOnWizard = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  var bookmarkletLinkParam__soy163 = new soy.StringBuilder();
  Confluence.Blueprints.SharelinksUrlMacro.bookmarkletLink(opt_data, bookmarkletLinkParam__soy163);
  bookmarkletLinkParam__soy163 = bookmarkletLinkParam__soy163.toString();
  output.append('<p>', bookmarkletLinkParam__soy163, '</p><p>', soy.$$escapeHtml("It will appear like this in your browser."), '</p><div class="bookmarklet-guide-picture"></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Blueprints.Sharelinks.bookmarkletGuide = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  var bookmarkletMacroParam__soy173 = new soy.StringBuilder('<ac:macro ac:name="sharelinks-urlmacro"/>');
  bookmarkletMacroParam__soy173 = bookmarkletMacroParam__soy173.toString();
  output.append('<ac:macro ac:name="info"><ac:parameter ac:name="icon">false</ac:parameter><ac:rich-text-body><p><ac:emoticon ac:name="information" />&nbsp;', AJS.format("Tip: share a link from anywhere by dragging this button \u2192 {0} to your browser bookmarks toolbar. Once added to your toolbar, click it to share links with your team.",bookmarkletMacroParam__soy173), '</p></ac:rich-text-body></ac:macro>');
  return opt_sb ? '' : output.toString();
};


Confluence.Blueprints.Sharelinks.noImagePreview = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<p class="image-unavailable"><span class="no-image-picture"></span>', soy.$$escapeHtml("No image available"), '</p>');
  return opt_sb ? '' : output.toString();
};


Confluence.Blueprints.Sharelinks.previewUnavailable = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<p class="link-unavailable"><span class="preview-unavailable-picture"></span>', soy.$$escapeHtml("Link preview unavailable"), '</p>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-business-blueprints:sharelinks-resources', location = 'com/atlassian/confluence/plugins/sharelinks/js/sharelinks-creation-wizard.js' */
(function(i){var d=false;function g(s,r){var q=false;if(k(s,!q)){q=true}if(f(s,r,!q)){q=true}return !q}function k(u,q){var t=u.find("#sharelinks-url");var s=i.trim(t.val());var r="";if(!s){r="URL is required"}else{if(d){r="URL syntax is invalid"}}return j(t,r,q)}function f(w,u,s){var r=w.find("#sharelinks-title");var v=i.trim(r.val());var t="";if(!v){t="Title is required"}else{if(!Confluence.Blueprint.canCreatePage(u,v)){t="A page with this name already exists";var q=Confluence.Blueprints.Sharelinks.Analytics.errorTypes.value.duplicatedPage;Confluence.Blueprints.Sharelinks.Analytics.triggerErrorTypes(q)}}return j(r,t,s)}function j(s,r,q){s.siblings(".error").html(r);if(r&&q){s.focus()}return r}var p;function a(u,v){var s=g(v.$container,v.wizardData.spaceKey);if(s){var r=Confluence.Blueprints.Sharelinks.Analytics.submitData.value.noComment;var x=i("#sharelinks-comment").val();x=i.trim(x);if(x){r=Confluence.Blueprints.Sharelinks.Analytics.submitData.value.comment}Confluence.Blueprints.Sharelinks.Analytics.triggerSubmitData(r);var q=Confluence.Blueprints.Sharelinks.Analytics.submitData.value.noEditTitle;if(p!==i("#sharelinks-title").val()){q=Confluence.Blueprints.Sharelinks.Analytics.submitData.value.editTitle}Confluence.Blueprints.Sharelinks.Analytics.triggerSubmitData(q);var w=Confluence.Blueprints.Sharelinks.Analytics.submitData.value.noShare;var t=i("#sharelinks-sharewith").val();t=i.trim(t);if(t){w=Confluence.Blueprints.Sharelinks.Analytics.submitData.value.share}Confluence.Blueprints.Sharelinks.Analytics.triggerSubmitData(w)}v.wizardData.parentPageId=-1;return s}var e;function h(s,t){e="";i("#sharelinks-url").bind("paste",function(){setTimeout(function(){l(t.$container,t.wizardData.spaceKey,true)},0)});i("#sharelinks-url").change(function(){l(t.$container,t.wizardData.spaceKey,false)});i("#sharelinks-title").change(function(){if(i("#sharelinks-title").siblings(".error").html!=""){f(t.$container,t.wizardData.spaceKey,false)}});var u=i(".dialog-wizard-page-description,.create-dialog-page-description");var q=AJS.Meta.get("base-url")+"/plugins/sharelinksbookmarklet/bookmarklet.action";var r=Confluence.Blueprints.Sharelinks.bookmarkletGuideOnWizard({bookmarkletActionURL:q});i(r).appendTo(u);Confluence.Blueprints.Sharelinks.autocompleteMultiLabel.build(i("#sharelinks-label"));i(".create-dialog-sharelinks-page1 .sharelinks-urlmacro-button").click(function(){alert("Drag this link to your toolbar");return false})}function c(q,r){i.ajax({type:"get",dataType:"json",url:Confluence.getContextPath()+"/rest/sharelinks/1.0/can-create-comment",data:{spaceKey:r.wizardData.spaceKey},success:function(t){if(!t){var s=i("#sharelinks-comment");s.attr("disabled","disabled");s.attr("placeholder","Sorry, you don\'t have permission to add comments in this space")}}})}Confluence.Blueprint.setWizard("com.atlassian.confluence.plugins.confluence-business-blueprints:sharelinks-blueprint-item",function(q){q.on("post-render.sharelinks-page1",h);q.on("post-render.sharelinks-page1",c);q.on("submit.sharelinks-page1",a)});function b(u){var y=255;var q=180;var t=o(u.title,y);var s=i("#sharelinks-title");s.val(t);s.removeClass("placeholded");var x=i.extend({},u);x.title=o(x.title,q);var w=Confluence.Blueprints.Sharelinks.Analytics.linkTypes.value.noContent;var r;if(u.videoURL){r=Confluence.Blueprints.Sharelinks.previewVideoLink({linkMetaData:x});w=Confluence.Blueprints.Sharelinks.Analytics.linkTypes.value.video}else{r=Confluence.Blueprints.Sharelinks.previewLink({linkMetaData:x});if(u.imageURL){w=Confluence.Blueprints.Sharelinks.Analytics.linkTypes.value.image}else{if(u.title){w=Confluence.Blueprints.Sharelinks.Analytics.linkTypes.value.noVideoImage}}}var v=i(".create-dialog-page-description,.dialog-wizard-page-description");v.empty();i(r).appendTo(v);Confluence.Blueprints.Sharelinks.Analytics.triggerLinkTypes(w)}function o(r,q){if(null!=r&&q<r.length){r=r.substring(0,q-1)+"\u2026"}return r}function m(r,q){r.attr("disabled","disabled");q.attr("disabled","disabled")}function n(r,q){r.removeAttr("disabled");q.removeAttr("disabled")}function l(z,w,s){var r=i("#sharelinks-url"),v=r.val(),q=i("#sharelinks-title");v=i.trim(v);if(v){var x=Confluence.getContextPath()+"/rest/sharelinks/1.0/link";if(v!==e){e=v;var t=i(".create-dialog-page-description,.dialog-wizard-page-description").empty();var y=Confluence.Blueprints.Sharelinks.previewLoading();var A=i(y).appendTo(t);m(r,q);i.ajax({type:"get",url:x,data:{url:v},success:function(B,C){A.remove();b(B);d=false;g(z,w);n(r,q)},error:function(E,B,D){n(r,q);if(400==E.status){A.remove();d=true;k(z,false)}else{A.remove();var C=Confluence.Blueprints.Sharelinks.previewError();i(C).appendTo(t);d=false;g(z,w)}}});var u;if(s){u=Confluence.Blueprints.Sharelinks.Analytics.inputTypes.value.pasteUrl}else{u=Confluence.Blueprints.Sharelinks.Analytics.inputTypes.value.typeUrl}Confluence.Blueprints.Sharelinks.Analytics.triggerInputTypes(u)}}}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-business-blueprints:sharelinks-resources', location = 'com/atlassian/confluence/plugins/sharelinks/js/sharelinks-analytics.js' */
Confluence.Blueprints.Sharelinks.Analytics={inputTypes:{name:"blueprints.sharelinks.input",value:{pasteUrl:{type:"paste-url"},typeUrl:{type:"type-url"}}},linkTypes:{name:"blueprints.sharelinks.link",value:{video:{link:"video"},image:{link:"image"},noVideoImage:{link:"no-video-image"},noContent:{link:"no-content"}}},errorTypes:{name:"blueprints.sharelinks.error",value:{duplicatedPage:{error:"page-duplicated"}}},submitData:{name:"blueprints.sharelinks.submit",value:{editTitle:{submit:"edit-title"},noEditTitle:{submit:"no-edit-title"},comment:{submit:"comment"},noComment:{submit:"no-comment"},share:{submit:"share"},noShare:{submit:"no-share"}}},triggerInputTypes:function(a){AJS.EventQueue=AJS.EventQueue||[];AJS.EventQueue.push({name:Confluence.Blueprints.Sharelinks.Analytics.inputTypes.name,properties:a})},triggerLinkTypes:function(a){AJS.EventQueue=AJS.EventQueue||[];AJS.EventQueue.push({name:Confluence.Blueprints.Sharelinks.Analytics.linkTypes.name,properties:a})},triggerErrorTypes:function(a){AJS.EventQueue=AJS.EventQueue||[];AJS.EventQueue.push({name:Confluence.Blueprints.Sharelinks.Analytics.errorTypes.name,properties:a})},triggerSubmitData:function(a){AJS.EventQueue=AJS.EventQueue||[];AJS.EventQueue.push({name:Confluence.Blueprints.Sharelinks.Analytics.submitData.name,properties:a})}};
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-business-blueprints:sharelinks-resources', location = 'com/atlassian/confluence/plugins/sharelinks/soy/sharelinks-label.soy' */
// This file was automatically generated from sharelinks-label.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Blueprints == 'undefined') { Confluence.Blueprints = {}; }
if (typeof Confluence.Blueprints.Sharelinks == 'undefined') { Confluence.Blueprints.Sharelinks = {}; }


Confluence.Blueprints.Sharelinks.labelResult = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.label.isNew) ? soy.$$escapeHtml(AJS.format("\x22{0}\x22 - add a new topic",opt_data.label.labelName)) : soy.$$escapeHtml(opt_data.label.labelName));
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-business-blueprints:sharelinks-resources', location = 'com/atlassian/confluence/plugins/sharelinks/js/sharelinks-label.js' */
Confluence.Blueprints.Sharelinks.autocompleteMultiLabel=(function(a){function b(c){c.auiSelect2(Confluence.UI.Components.LabelPicker.build({formatInputTooShort:function(){return "Start typing to search for a topic"},formatResult:function(d){return Confluence.Blueprints.Sharelinks.labelResult({label:{labelName:d.text,isNew:d.isNew}})}}))}return{build:b}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-tasks:task-report-blueprint-resources', location = 'templates/task-report-blueprint.soy' */
// This file was automatically generated from task-report-blueprint.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.InlineTasks == 'undefined') { Confluence.InlineTasks = {}; }
if (typeof Confluence.InlineTasks.Report == 'undefined') { Confluence.InlineTasks.Report = {}; }
if (typeof Confluence.InlineTasks.Report.Templates == 'undefined') { Confluence.InlineTasks.Report.Templates = {}; }


Confluence.InlineTasks.Report.Templates.taskReportBlueprintForm = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<ol class="report-types" id="task-report-types"><li class="template" id="team-task-report"><span class="template-preview team-task-report-icon"></span><div class="template-meta"><div class="template-name">', soy.$$escapeHtml("Assigned to my team"), '</div><div class="template-description">', soy.$$escapeHtml("Show tasks assigned to specific people"), '</div></div></li><li class="template" id="location-task-report"><span class="template-preview location-task-report-icon"></span><div class="template-meta"><div class="template-name">', soy.$$escapeHtml("In my project"), '</div><div class="template-description">', soy.$$escapeHtml("Show tasks created in specific spaces and pages"), '</div></div></li><li class="template" id="custom-task-report"><span class="template-preview custom-task-report-icon"></span><div class="template-meta"><div class="template-name">', soy.$$escapeHtml("Custom"), '</div><div class="template-description">', soy.$$escapeHtml("Create your own report"), '</div></div></li></ol>');
  return opt_sb ? '' : output.toString();
};


Confluence.InlineTasks.Report.Templates.reportByTeamForm = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<form action="#" method="post" id="report-by-team-form" class="aui"><fieldset><div class="field-group"><label for="task-report-page-title">', soy.$$escapeHtml("Title"), '<span class="aui-icon icon-required">required</span></label><input id="task-report-page-title" class="text long-field" type="text" name="title" placeholder="', soy.$$escapeHtml("Title of your task report"), '"/><div class="error hidden"></div></div><div class="field-group"><label for="task-report-team-picker">', soy.$$escapeHtml("Assigned to"), '<span class="aui-icon icon-required">required</span></label><input id="task-report-team-picker" class="text select2-input long-field autocomplete-multiuser" type="text" name="teamMembers" placeholder="', soy.$$escapeHtml("Only show tasks assigned to these people"), '" /><div class="error hidden"></div></div><div class="field-group"><div class="checkbox"><input class="checkbox" type="checkbox" name="completed" id="task-report-completed-cb"><label for="task-report-completed-cb">', soy.$$escapeHtml("Include completed tasks"), '</label></div></div></fieldset></form>');
  return opt_sb ? '' : output.toString();
};


Confluence.InlineTasks.Report.Templates.reportByLocationForm = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<form action="#" method="post" id="report-by-location-form" class="aui"><fieldset><div class="field-group"><label for="task-report-page-title">', soy.$$escapeHtml("Title"), '<span class="aui-icon icon-required">required</span></label><input id="task-report-page-title" class="text long-field" type="text" name="title" placeholder="', soy.$$escapeHtml("Title of your task report"), '"/><div class="error hidden"></div></div><div class="field-group"><label for="task-report-location-picker">', soy.$$escapeHtml("Created in"), '<span class="aui-icon icon-required">required</span></label><input id="task-report-location-picker" class="text select2-input long-field" type="text" name="locations" placeholder="', soy.$$escapeHtml("Select task locations"), '"/><div class="error hidden"></div></div><div class="field-group"><label for="task-report-label-picker">', soy.$$escapeHtml("Labels"), '</label><input id="task-report-label-picker" class="text select2-input long-field" type="text" name="labels" placeholder="', soy.$$escapeHtml("Only show tasks on pages with these labels"), '"/></div><div class="field-group"><div class="checkbox"><input class="checkbox" type="checkbox" name="completed" id="task-report-completed-cb"><label for="task-report-completed-cb">', soy.$$escapeHtml("Include completed tasks"), '</label></div></div></fieldset></form>');
  return opt_sb ? '' : output.toString();
};


Confluence.InlineTasks.Report.Templates.assigneeParam = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (opt_data.userKeys) {
    output.append('<ac:parameter ac:name="assignees">');
    var keyList48 = opt_data.userKeys;
    var keyListLen48 = keyList48.length;
    for (var keyIndex48 = 0; keyIndex48 < keyListLen48; keyIndex48++) {
      var keyData48 = keyList48[keyIndex48];
      output.append('<ri:user ri:userkey="', soy.$$escapeHtml(keyData48), '" />');
    }
    output.append('</ac:parameter>');
  }
  return opt_sb ? '' : output.toString();
};


Confluence.InlineTasks.Report.Templates.creatorParam = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (opt_data.userKeys) {
    output.append('<ac:parameter ac:name="creators">');
    var keyList58 = opt_data.userKeys;
    var keyListLen58 = keyList58.length;
    for (var keyIndex58 = 0; keyIndex58 < keyListLen58; keyIndex58++) {
      var keyData58 = keyList58[keyIndex58];
      output.append('<ri:user ri:userkey="', soy.$$escapeHtml(keyData58), '" />');
    }
    output.append('</ac:parameter>');
  }
  return opt_sb ? '' : output.toString();
};


Confluence.InlineTasks.Report.Templates.macroParam = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.value) ? '<ac:parameter ac:name="' + soy.$$escapeHtml(opt_data.name) + '">' + soy.$$escapeHtml(opt_data.value) + '</ac:parameter>' : '');
  return opt_sb ? '' : output.toString();
};


Confluence.InlineTasks.Report.Templates.teamReportContent = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<p><ac:structured-macro ac:name="tasks-report-macro"><!-- assignee-->');
  Confluence.InlineTasks.Report.Templates.assigneeParam({userKeys: opt_data.assignees}, output);
  output.append('<!-- status--><ac:parameter ac:name="status">incomplete</ac:parameter></ac:structured-macro></p>');
  if (opt_data.showCompletedTasks) {
    output.append('<ac:structured-macro ac:name="expand"><ac:parameter ac:name="title">', soy.$$escapeHtml("Completed tasks"), '</ac:parameter><ac:rich-text-body><p><ac:structured-macro ac:name="tasks-report-macro"><!-- assignee-->');
    Confluence.InlineTasks.Report.Templates.assigneeParam({userKeys: opt_data.assignees}, output);
    output.append('<!-- status--><ac:parameter ac:name="status">complete</ac:parameter></ac:structured-macro></p></ac:rich-text-body></ac:structured-macro>');
  }
  return opt_sb ? '' : output.toString();
};


Confluence.InlineTasks.Report.Templates.locationReportContent = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<p><ac:structured-macro ac:name="tasks-report-macro"><!-- space-->');
  Confluence.InlineTasks.Report.Templates.macroParam({name: 'spaces', value: opt_data.spaceKeys}, output);
  output.append('<!-- pages-->');
  Confluence.InlineTasks.Report.Templates.macroParam({name: 'pages', value: opt_data.pageIds}, output);
  output.append('<!-- labels-->');
  Confluence.InlineTasks.Report.Templates.macroParam({name: 'labels', value: opt_data.labels}, output);
  output.append('<!-- status--><ac:parameter ac:name="status">incomplete</ac:parameter></ac:structured-macro></p>');
  if (opt_data.showCompletedTasks) {
    output.append('<ac:structured-macro ac:name="expand"><ac:parameter ac:name="title">', soy.$$escapeHtml("Completed tasks"), '</ac:parameter><ac:rich-text-body><p><ac:structured-macro ac:name="tasks-report-macro"><!-- space-->');
    Confluence.InlineTasks.Report.Templates.macroParam({name: 'spaces', value: opt_data.spaceKeys}, output);
    output.append('<!-- pages-->');
    Confluence.InlineTasks.Report.Templates.macroParam({name: 'pages', value: opt_data.pageIds}, output);
    output.append('<!-- labels-->');
    Confluence.InlineTasks.Report.Templates.macroParam({name: 'labels', value: opt_data.labels}, output);
    output.append('<!-- status--><ac:parameter ac:name="status">complete</ac:parameter></ac:structured-macro></p></ac:rich-text-body></ac:structured-macro>');
  }
  return opt_sb ? '' : output.toString();
};


Confluence.InlineTasks.Report.Templates.customReportContent = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<p><span class="text-placeholder">', soy.$$escapeHtml("Edit the Task Report macro to customise your report."), '</span></p><ac:structured-macro ac:name="tasks-report-macro">');
  if (opt_data.creators) {
    Confluence.InlineTasks.Report.Templates.creatorParam({userKeys: opt_data.creators}, output);
  }
  output.append('</ac:structured-macro>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-tasks:task-report-blueprint-resources', location = 'js/task-report-bp.js' */
(function(d){var c;function e(t){t.addClass("selected").siblings().removeClass("selected");AJS.trigger("selected.task-report-types",t)}function i(w,v){AJS.trigger("analyticsEvent",{name:"confluence-spaces.tasks.report_blueprint.clicked"});var u=d("#task-report-types");var t=u.find(".template");t.first().addClass("selected");t.click(function(){e(d(this))}).dblclick(function(){d(".create-dialog-create-button:visible").click()});u.attr("tabindex",0).keydown(function(z){if(z.keyCode==38||z.keyCode==40){z.preventDefault();var x=u.find(".selected"),y;if(z.keyCode==38){y=x.prev().length?x.prev():t.last()}else{if(z.keyCode==40){y=x.next().length?x.next():t.first()}}e(y)}});u.focus();AJS.bind("selected.task-report-types",function(y,x){if(d(x).is("#custom-task-report")){p("Create")}else{p("Next")}});p("Next")}function f(v,u){var t=u.$container.find(".selected").attr("id");if(t==="team-task-report"){u.nextPageId="teamTaskReportId";AJS.trigger("analyticsEvent",{name:"confluence-spaces.tasks.report_team.clicked"})}else{if(t==="location-task-report"){u.nextPageId="locationTaskReportId";AJS.trigger("analyticsEvent",{name:"confluence-spaces.tasks.report_project.clicked"})}else{if(t==="custom-task-report"){c.getSubmissionRestPath=function(){AJS.trigger("analyticsEvent",{name:"confluence-spaces.tasks.report_custom.clicked"});return"/rest/create-dialog/1.0/content-blueprint/create-draft"};g(u,"custom-task-report-template")}else{return false}}}}function a(u,t){o()}function m(w,v){var t=d("#report-by-team-form");b(t);var u=true;u=r(d("#task-report-team-picker"),"Assignee is required.")&&u;u=s(v.wizardData.spaceKey)&&u;u?g(v,"team-task-report-template"):h(t);AJS.trigger("analyticsEvent",{name:"confluence-spaces.tasks.report_team.created"});return u}function n(u,t){k(d("#task-report-location-picker"),t.wizardData.spaceKey);q(d("#task-report-label-picker"));o()}function j(w,v){var t=d("#report-by-location-form");b(t);var u=true;u=r(d("#task-report-location-picker"),"A space or page is required.")&&u;u=s(v.wizardData.spaceKey)&&u;if(u){g(v,"location-task-report-template")}else{h(t)}AJS.trigger("analyticsEvent",{name:"confluence-spaces.tasks.report_project.created"});return u}Confluence.Blueprint.setWizard("com.atlassian.confluence.plugins.confluence-inline-tasks:task-report-blueprint-item",function(t){t.on("post-render.selectTaskReportId",i);t.on("submit.selectTaskReportId",f);t.on("post-render.teamTaskReportId",a);t.on("submit.teamTaskReportId",m);t.on("post-render.locationTaskReportId",n);t.on("submit.locationTaskReportId",j);c=t});function b(t){t.find(".error").addClass("hidden").empty()}function s(v){var t=d("#task-report-page-title");var u=Confluence.Blueprint.validateTitle(t,v);if(!u){t.siblings(".error").removeClass("hidden")}return u}function r(t,u){var v=d.trim(t.val());if(!v&&u){l(t,u)}return !!v}function h(u){var t=u.find("div.error:not(.hidden)").first();var v=t.siblings("input").eq(0);if(v.hasClass("select2-offscreen")){v.select2("focus")}else{v.focus()}}function g(t,u){t.pageData.contentTemplateKey=u}function l(v,u){var t=v.siblings(".error");t.html(u);t.removeClass("hidden");return u}function q(t){t.auiSelect2(Confluence.UI.Components.LabelPicker.build())}function k(u,t){u.auiSelect2(Confluence.UI.Components.SpacePagePicker.build({spaceKeys:[t],orgElement:u}))}function p(t){d(".create-dialog-create-button:visible").text(t)}function o(){var v;var u=d("#task-report-completed-cb");var t=d("label[for=task-report-completed-cb]").add(u);t.mousedown(function(){v=true});d(".dialog-wizard-page-main").on("mouseup",function(w){if(!t.is(w.target)&&v){u.click()}v=false})}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-space-blueprints:confluence-team-space-blueprint-resources', location = 'com/atlassian/confluence/plugins/team/js/confluence-team-space-blueprints.js' */
AJS.bind("blueprint.wizard-register.ready",function(){function a(d,c){c.pageData.ContentPageTitle=c.pageData.name;return Confluence.SpaceBlueprint.CommonWizardBindings.submit(d,c)}function b(d,c){c.soyRenderContext.atlToken=AJS.Meta.get("atl-token");c.soyRenderContext.showSpacePermission=false}Confluence.Blueprint.setWizard("com.atlassian.confluence.plugins.confluence-space-blueprints:team-space-blueprint-item",function(c){c.on("submit.teamSpaceId",a);c.on("pre-render.teamSpaceId",b);c.on("post-render.teamSpaceId",Confluence.SpaceBlueprint.CommonWizardBindings.postRender)})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-space-blueprints:confluence-team-space-blueprint-resources', location = 'com/atlassian/confluence/plugins/team/soy/dialog-page.soy' */
// This file was automatically generated from dialog-page.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.SpaceBlueprints == 'undefined') { Confluence.SpaceBlueprints = {}; }
if (typeof Confluence.SpaceBlueprints.Team == 'undefined') { Confluence.SpaceBlueprints.Team = {}; }


Confluence.SpaceBlueprints.Team.dialogForm = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<form action="#" method="post" id="decisions-form" class="common-space-form aui">');
  Confluence.Templates.Blueprints.CreateSpace.createSpaceFormFields({showSpacePermission: false, fieldErrors: opt_data.fieldErrors, name: opt_data.name, spaceKey: opt_data.spaceKey}, output);
  output.append('<fieldset><div class="field-group"><label for="team-members">', soy.$$escapeHtml("Team members"), '</label><input id="team-members" class="text long-field autocomplete-multiuser" type="text" name="members" placeholder="', soy.$$escapeHtml("Add your team members"), '" data-autofill-user="true"/></div><div class="field-group"><label for="team-description">', soy.$$escapeHtml("Description"), '</label><textarea id="team-description" class="textarea long-field" rows="3" type="text" name="description" placeholder="', soy.$$escapeHtml("Let others know what this space is for"), '"></textarea></div></fieldset><input type="hidden" name="atl_token" value="', soy.$$escapeHtml(opt_data.atlToken), '" /></form>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-space-blueprints:confluence-documentation-space-blueprint-resources', location = 'com/atlassian/confluence/plugins/documentation/js/confluence-documentation-space-blueprint.js' */
AJS.bind("blueprint.wizard-register.ready",function(){function b(d,c){c.pageData.ContentPageTitle=c.pageData.name;return Confluence.SpaceBlueprint.CommonWizardBindings.submit(d,c)}function a(d,c){c.soyRenderContext.atlToken=AJS.Meta.get("atl-token");c.soyRenderContext.showSpacePermission=false}Confluence.Blueprint.setWizard("com.atlassian.confluence.plugins.confluence-space-blueprints:documentation-space-blueprint-item",function(c){c.on("submit.documentationSpaceId",b);c.on("pre-render.documentationSpaceId",a);c.on("post-render.documentationSpaceId",Confluence.SpaceBlueprint.CommonWizardBindings.postRender)})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-space-blueprints:confluence-documentation-space-blueprint-resources', location = 'com/atlassian/confluence/plugins/documentation/soy/dialog-page.soy' */
// This file was automatically generated from dialog-page.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.SpaceBlueprints == 'undefined') { Confluence.SpaceBlueprints = {}; }
if (typeof Confluence.SpaceBlueprints.Documentation == 'undefined') { Confluence.SpaceBlueprints.Documentation = {}; }


Confluence.SpaceBlueprints.Documentation.dialogForm = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<form action="#" method="post" id="documentation-space-form" class="common-space-form aui">');
  Confluence.Templates.Blueprints.CreateSpace.createSpaceFormFields({showSpacePermission: false, fieldErrors: opt_data.fieldErrors, name: opt_data.name, key: opt_data.key}, output);
  output.append('<fieldset><div class="field-group"><label for="documentation-description">', soy.$$escapeHtml("Description"), '</label><textarea id="documentation-description" class="textarea long-field" rows="3" type="text" name="spaceDesc" placeholder="', soy.$$escapeHtml("Briefly describe the documentation in this space"), '"></textarea></div></fieldset><input type="hidden" name="noPageTitlePrefix" value="true" /><input type="hidden" name="atl_token" value="', soy.$$escapeHtml(opt_data.atlToken), '" /></form>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-request-access-plugin:confluence-request-access-plugin-resources', location = '/js/request-access.js' */
AJS.toInit(function(e){var b=AJS.Meta.get("page-id"),c=e("#page-restricted-container"),a=AJS.Meta.get("remote-user"),d=e("#page-restricted-container button");if(c.length){e("#breadcrumbs").hide();e("#title-text.with-breadcrumbs").hide();if(d.length){AJS.trigger("analyticsEvent",{name:"confluence.request.access.plugin.request.access.to.page.view",data:{pageId:b,requestAccessUser:a}})}}d.click(function(){AJS.trigger("analyticsEvent",{name:"confluence.request.access.plugin.request.access.to.page",data:{pageId:b,requestAccessUser:a}});d.attr("aria-disabled","true");var f,g=e(Confluence.Request.Access.loading({}));d.replaceWith(g);e.ajax({url:Confluence.getContextPath()+"/rest/request-access/latest/page/restriction/"+b,success:function(h){f=e(Confluence.Request.Access.result({success:true,recipient:h}));c.removeClass("page-restricted");c.addClass("access-requested")},error:function(h,i){f=e(Confluence.Request.Access.result({success:false}))},complete:function(){g.replaceWith(f);Confluence.Binder.userHover()}})})})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-request-access-plugin:confluence-request-access-plugin-resources', location = '/js/grant-access.js' */
AJS.toInit(function(d){var a=AJS.Meta.get("page-id"),f=AJS.Meta.get("remote-user"),h=j("username"),e=j("userFullName");var c=e.split("+");e=c.join(" ");var g=d("#system-content-items");var k=d("#content-metadata-page-restrictions").is(":visible");if(!g.length||!k||!j("grantAccess")){return}var b=d(Confluence.Request.Access.loading());var i=AJS.InlineDialog(g,"grantAccessDialog",function(m,l,n){m.css({padding:"20px"}).html(Confluence.Grant.Access.dialog({requestAccessUsername:h,requestAccessUserFullName:e}));m.on("click",".aui-button.grant-access",function(q){q.stopPropagation();var p=m.find(".actions-result");p.replaceWith(b);AJS.trigger("analyticsEvent",{name:"confluence.request.access.plugin.grant.access.to.page",data:{pageId:a,grantAccessUser:f,requestAccessUser:h}});var o="",r=true;d.ajax({url:Confluence.getContextPath()+"/rest/request-access/latest/page/restriction/"+a,type:"POST",contentType:"application/json; charset=utf-8",data:h,success:function(t,u,s){if(s.status==202){o="Access was already granted to the user."}else{o="Access was granted, a notification to the user will be sent."}},error:function(s){r=false;if(s.status==412){o="Access was granted, but there is not a mail server configured so the notification could not be sent."}else{if(s.status==502){o="Access was granted, but an unexpected error happened while sending the notification."}else{o="Sorry, there was an unexpected error while granting access."}}},complete:function(s){b.replaceWith(d(Confluence.Grant.Access.result({success:r,message:o})));setTimeout(function(){i.hide()},4000)}})});m.on("click",".aui-button.deny-access",function(o){AJS.trigger("analyticsEvent",{name:"confluence.request.access.plugin.deny.access.to.page",data:{pageId:a,grantAccessUser:f,requestAccessUser:h}});i.hide()});n();return false},{offsetY:2,offsetX:0,width:350,hideDelay:null,noBind:true,hideCallback:function(){setTimeout(i.hide(),5000)}});i.show();function j(l){l=l.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&]"+l+"=([^&#]*)"),m=n.exec(location.search);return m==null?"":decodeURIComponent(m[1].replace(/\+/g," "))}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-request-access-plugin:confluence-request-access-plugin-resources', location = '/templates/soy/request-access.soy' */
// This file was automatically generated from request-access.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Request == 'undefined') { Confluence.Request = {}; }
if (typeof Confluence.Request.Access == 'undefined') { Confluence.Request.Access = {}; }


Confluence.Request.Access.result = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div id="request-access">');
  if (opt_data.success) {
    var usernameLink__soy6 = new soy.StringBuilder();
    Confluence.Request.Access.usernameLink({user: opt_data.recipient}, usernameLink__soy6);
    usernameLink__soy6 = usernameLink__soy6.toString();
    output.append('<span class="aui-icon aui-icon-small aui-iconfont-approve" data-unicode="UTF+E005" original-title=""></span><p class="title">', AJS.format("Your request has been sent to {0}. If approved you will receive an email shortly.",usernameLink__soy6), '</p>');
  } else {
    output.append('<span class="aui-icon aui-icon-small aui-iconfont-error" data-unicode="UTF+E011" original-title=""></span><p class="title">', soy.$$escapeHtml("Your request for access has not been sent. Contact your space admin."), '</p>');
  }
  output.append('</div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Request.Access.usernameLink = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<a href="', soy.$$escapeHtml(""), '/display/~', soy.$$escapeUri(opt_data.user.name), '" class="url fn confluence-userlink" title data-username="', soy.$$escapeHtml(opt_data.user.name), '">', soy.$$escapeHtml(opt_data.user.fullName), '</a>');
  return opt_sb ? '' : output.toString();
};


Confluence.Request.Access.loading = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<span class=\'aui-icon aui-icon-wait\'>', soy.$$escapeHtml("Loading, please wait"), '</span>"');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-request-access-plugin:confluence-request-access-plugin-resources', location = '/templates/soy/grant-access.soy' */
// This file was automatically generated from grant-access.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Grant == 'undefined') { Confluence.Grant = {}; }
if (typeof Confluence.Grant.Access == 'undefined') { Confluence.Grant.Access = {}; }


Confluence.Grant.Access.dialog = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="grant-access-dialog">');
  var usernameLink__soy4 = new soy.StringBuilder();
  Confluence.Grant.Access.usernameLink({username: opt_data.requestAccessUsername, userFullName: opt_data.requestAccessUserFullName}, usernameLink__soy4);
  usernameLink__soy4 = usernameLink__soy4.toString();
  output.append('<h2 class="grant-access-title">', AJS.format("{0} requested access to view the page",usernameLink__soy4), '</h2><p class="grant-access-message">', soy.$$escapeHtml("Grant access to the page, or deny it explicitly."), '</p><div class="actions-result"><button class="aui-button grant-access">', soy.$$escapeHtml("Grant access"), '</button><button class="aui-button aui-button-link deny-access">', soy.$$escapeHtml("Deny"), '</button><div></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Grant.Access.result = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<span class="aui-icon aui-icon-small aui-iconfont-', (opt_data.success) ? 'approve' : 'error', '" data-unicode="UTF+E011" original-title=""></span><p class="title">', soy.$$escapeHtml(opt_data.message), '</p>');
  return opt_sb ? '' : output.toString();
};


Confluence.Grant.Access.usernameLink = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<a href="', soy.$$escapeHtml(""), '/display/~', soy.$$escapeHtml(opt_data.username), '" class="url fn" title data-username="', soy.$$escapeHtml(opt_data.username), '">', soy.$$escapeHtml(opt_data.userFullName), '</a>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.extra.jira:jirachart-resources', location = '/jirachart/jirachart.js' */
AJS.toInit(function(){AJS.$(".jira-chart-macro-img").load(function(a){AJS.log("Jira Chart Macro - chart image loaded");AJS.$(".insert-jira-chart-macro-button",window.parent.document).enable()}).error(function(d){AJS.log("Jira Chart Macro - chart image loaded error");AJS.$(".insert-jira-chart-macro-button",window.parent.document).disable();var e=AJS.$(d.target);var c=e.parent();var b=c.parent();c.remove();var a="Unable to render JIRA chart macro due to an execution error.";AJS.messages.error(b,{body:a})})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.extra.jira:jirachart-resources', location = '/jirachart/twodimensionalchart-showlink.js' */
var TwoDimensionalShowLink=(function(e){var d=function(i){var h=e("#two-dimensional-chart-"+i);var g=h.position();e("<div />",{id:"twodimensional-dark-layout-"+i,"class":"jim-sortable-dark-layout",css:{top:g.top+"px",left:g.left+"px",width:h.width()+"px",height:h.height()+"px"}}).appendTo(h.parent())};var a=function(g){e("#twodimensional-dark-layout-"+g).remove()};var b=function(){var h=e(this).attr("data-chart-id");d(h);var g={pageId:e("#chart-page-id-"+h).val(),wikiMarkup:e("#chart-wiki-"+h).val(),isShowMore:e(this).attr("data-is-show-more")};AJS.$.ajax({type:"POST",dataType:"html",url:Confluence.getContextPath()+"/plugins/servlet/twoDimensionalShowMoreRenderer",data:g,success:function(i){if(e(i).find(".aui-message.error").length){var j=e(i).find(".message").text();e("#two-dimensional-chart-"+h).find(".show-error").html(j)}else{var k=e(i).find(".show-link-container a").attr("data-chart-id");e("#two-dimensional-chart-"+h).replaceWith(i);c(k)}a(h)},error:function(){e("#two-dimensional-chart-"+h).find(".show-error").html("Unable to render JIRA chart macro, execution has been timeout.");a(h)}})};var c=function(g){e("#show-link-"+g).on("click",b)};var f=function(){e(".show-link-container a").each(function(){c(e(this).attr("data-chart-id"))})};return{init:f}})(AJS.$);AJS.$(function(){TwoDimensionalShowLink.init()});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.watch-button:watch-resources', location = 'js/watch-model.js' */
define("confluence-watch-button/watch-model",["ajs","backbone"],function(a,b){return b.Model.extend({saveSettings:function(d,e){this.trigger("request");var c=this;return a.safe.ajax({url:d,type:"POST",dataType:"json",data:e}).done(function(){c.trigger("sync",c)}).fail(function(){c.trigger("error")})},saveWatchPage:function(d){var c=a.contextPath()+"/users/"+(d?"add":"remove")+"pagenotificationajax.action";this.set("watchingPage",d);return this.saveSettings(c,{pageId:this.get("pageId")})},saveWatchBlogs:function(d){var c=a.contextPath()+"/users/"+(d?"add":"remove")+"spacenotificationajax.action";this.set("watchingBlogs",d);return this.saveSettings(c,{spaceKey:this.get("spaceKey"),contentType:"blogpost"})},saveWatchSpace:function(d){var c=a.contextPath()+"/users/"+(d?"add":"remove")+"spacenotificationajax.action";this.set("watchingSpace",d);return this.saveSettings(c,{spaceKey:this.get("spaceKey")})}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.watch-button:watch-resources', location = 'js/watch-view.js' */
define("confluence-watch-button/watch-view",["jquery","ajs","backbone"],function(b,a,c){return c.View.extend({events:{"change #cw-watch-page":"changeWatchPage","change #cw-watch-blogs":"changeWatchBlogs","change #cw-watch-space":"changeWatchSpace"},initialize:function(){_.bindAll(this,"render","initTooltips","changeWatchPage","changeWatchBlogs","changeWatchSpace","togglePageEnabledState","toggleBlogsEnabledState","startLoading","stopLoading","setTitle");this.model.on("sync change:watchingSpace",this.togglePageEnabledState,this);this.model.on("change:watchingSpace",this.toggleBlogsEnabledState,this);this.model.on("request",this.startLoading,this);this.model.on("sync",this.setTitle,this);this.model.on("sync",this.stopLoading,this)},render:function(){this.$el.html(Confluence.Watch.Templates.dialogBody(this.model.toJSON()));this.initTooltips();this.setTitle(this.model);return this},initTooltips:function(){this.$(".cw-tooltip").tooltip({gravity:"e",offset:5,delayIn:0});this.togglePageEnabledState(this.model);this.toggleBlogsEnabledState(this.model)},changeWatchPage:function(f){var d=b(f.target).is(":checked");this.model.saveWatchPage(d)},changeWatchBlogs:function(f){var d=b(f.target).is(":checked");this.model.saveWatchBlogs(d)},changeWatchSpace:function(f){var d=b(f.target).is(":checked");this.model.saveWatchSpace(d)},togglePageEnabledState:function(d){var e=d.get("watchingPage");var g=d.get("watchingSpace");this.$("#cw-watch-page").prop("disabled",g);this.$("#cw-watch-page").prop("checked",e||g);var f=g?"You will receive updates for this page because you are watching this space.":"";this.$(".cw-tooltip-watch-page").attr("original-title",f)},toggleBlogsEnabledState:function(d){var g=d.get("watchingBlogs");var f=d.get("watchingSpace");this.$("#cw-watch-blogs").prop("disabled",f);this.$("#cw-watch-blogs").prop("checked",g||f);var e=f?"You are subscribed to all blog posts because you are watching this space.":"";this.$(".cw-tooltip-watch-blogs").attr("original-title",e)},startLoading:function(){this.$(".cw-status").addClass("loading")},stopLoading:function(){this.$(".cw-status").removeClass("loading")},setTitle:function(){var e=this.model.get("watchingPage");var i=this.model.get("watchingBlogs");var g=this.model.get("watchingSpace");var d=this.model.get("isBlogPost");function h(){if(g){return{title:"You are watching this space",description:"Receiving email updates for all content in this space.",}}if(e&&d&&i){return{title:"You are watching this blog post",description:"Receiving email updates about changes to this blog post and all new blog posts in this space.",}}if(e&&d){return{title:"You are watching this blog post",description:"Receiving email updates about changes to this blog post.",}}if(e){return{title:"You are watching this page",description:"Receiving email updates about changes to this page.",}}if(d&&i){return{title:"You are watching for new blog posts",description:"Receiving email updates for new blog posts in this space.",}}if(d){return{title:"You are not watching this blog",description:"Start watching to receive email updates about changes to this blog.",}}return{title:"You are not watching this page",description:"Start watching to receive email updates about changes to this page.",}}var f=h();this.$(".cw-title").text(f.title);this.$(".cw-title-description").text(f.description)}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.watch-button:watch-resources', location = 'js/watch.js' */
require(["jquery","underscore","ajs","confluence-watch-button/watch-model","confluence-watch-button/watch-view","confluence-watch-button/watch-notification"],function(a,h,g,e,b,f){g.toInit(function(){var j=a("#watch-content-button");if(!j.length){return}var q=i(j);var m=g.Meta.get("page-id");var n=g.Meta.get("space-key");var l=g.Meta.get("space-name");h.extend(q,{pageId:m,spaceKey:n,spaceName:l});d(j,q);var p=new e(q);var o=new b({model:p});g.InlineDialog(j,"confluence-watch",function(s,r,t){o.setElement(s);o.render();t()},{width:325,offsetX:-180,cacheContent:false,hideDelay:null,hideCallback:function(){a(".tipsy").hide()}});p.on("change:watchingPage change:watchingBlogs change:watchingSpace",function(r){d(j,r.toJSON())});p.on("change:watchingPage",function(r,t){var s=t?"watch-page":"unwatch-page";g.trigger("analytics",{name:s})});p.on("change:watchingBlogs",function(r,t){var s=t?"watch-blogs":"unwatch-blogs";g.trigger("analytics",{name:s})});p.on("change:watchingSpace",function(r,t){var s=t?"watch-space":"unwatch-space";g.trigger("analytics",{name:s})});c(p);var k=false;a(document).on("keyup",function(){k=false});window.CW_watchPage=function(){if(k){return}k=true;var t=p.get("watchingSpace");var s=p.get("watchingPage");if(t){a("body, #splitter-content").animate({scrollTop:0},300,function(){j.click();setTimeout(function(){a(".cw-tooltip-watch-page").tipsy("show")},50)})}else{var u=!s;p.saveWatchPage(u);var r=u?"You started watching this page.":"You stopped watching this page.";f(r)}}});function d(k,n){var l=n.watchingPage;var j=n.isBlogPost&&n.watchingBlogs;var m=n.watchingSpace;if(l||j||m){k.find(".aui-icon").removeClass("aui-iconfont-unwatch").addClass("aui-iconfont-watch")}else{k.find(".aui-icon").removeClass("aui-iconfont-watch").addClass("aui-iconfont-unwatch")}}function c(j){j.on("change:watchingPage",function(k,m){var l=m?"watchpage.pageoperation":"unwatchpage.pageoperation";g.trigger(l)})}function i(l){var m=l.prop("search");var k=/[?&;]*(.*?)=([^&;]*)/g;var j;var n={};if(m){while(j=k.exec(m)){n[j[1]]=decodeURIComponent(j[2]).replace(/\+/g," ")}}h.each(n,function(p,o){if(p=="true"){n[o]=true}else{if(p=="false"){n[o]=false}}});return n}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.watch-button:watch-resources', location = 'js/notification.js' */
define("confluence-watch-button/watch-notification",["jquery","aui/flag"],function(b,a){return function(e){var c=document.getElementById("watch-notification");if(c!=null){c.close()}var d=a({type:"success",body:e,close:"auto"});d.setAttribute("id","watch-notification")}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.watch-button:watch-resources', location = 'templates/watch.soy' */
// This file was automatically generated from watch.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Watch == 'undefined') { Confluence.Watch = {}; }
if (typeof Confluence.Watch.Templates == 'undefined') { Confluence.Watch.Templates = {}; }


Confluence.Watch.Templates.dialogBody = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="cw-status"><h2 class="cw-title"></h2><p class="cw-title-description"></p></div><form class="aui cw-dialog"><div class="cw-tooltip cw-tooltip-watch-page"><div class="checkbox"><input class="checkbox" type="checkbox" id="cw-watch-page" ', (opt_data.watchingPage) ? 'checked' : '', '><label for="cw-watch-page">', (opt_data.isBlogPost) ? soy.$$escapeHtml("Watch blog post") : soy.$$escapeHtml("Watch page"), '</label></div></div>', (opt_data.isBlogPost) ? '<div class="cw-tooltip cw-tooltip-watch-blogs"><div class="checkbox"><input class="checkbox" type="checkbox" id="cw-watch-blogs" ' + ((opt_data.watchingBlogs) ? 'checked' : '') + '><label for="cw-watch-blogs">' + soy.$$escapeHtml("Watch for new blog posts in this space") + '</label></div></div>' : '', '<div class="checkbox"><input class="checkbox" type="checkbox" id="cw-watch-space" ', (opt_data.watchingSpace) ? 'checked' : '', '><label for="cw-watch-space">', soy.$$escapeHtml("Watch all content in this space"), '</label></div></form>', (opt_data.isAdmin) ? '<div class="cw-manage-watchers-wrapper"><button class="aui-button aui-button-link cw-manage-watchers">' + soy.$$escapeHtml("Manage Watchers") + '</button></div>' : '');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-space-ia:soy-resources', location = 'soy/sidebar.soy' */
// This file was automatically generated from sidebar.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.Sidebar == 'undefined') { Confluence.Templates.Sidebar = {}; }


Confluence.Templates.Sidebar.headerStyles = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.sidebarWidth) ? '<style>.ia-fixed-sidebar, .ia-splitter-left {width: ' + soy.$$escapeHtml(opt_data.sidebarWidth) + 'px;}.theme-default .ia-splitter #main {margin-left: ' + soy.$$escapeHtml(opt_data.sidebarWidth) + 'px;}.ia-fixed-sidebar {visibility: hidden;}</style>' : '');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Sidebar.sidebar = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="acs-side-bar ia-scrollable-section"><div class="acs-side-bar-space-info tipsy-enabled" data-configure-tooltip="', soy.$$escapeHtml("Edit space details"), '"><div class="avatar"><div class="space-logo ', (false == true) ? 'project-shortcut-dialog-trigger' : '', '" data-key="', soy.$$escapeHtml(opt_data.space.key), '" data-name="', soy.$$escapeHtml(opt_data.space.name), '" data-entity-type="confluence.space"><div class="avatar-img-container"><div class="avatar-img-wrapper"><a href="', soy.$$escapeHtml(opt_data.space.homeUrl), '" title="', soy.$$escapeHtml(opt_data.space.name), '"><img class="avatar-img" src="', soy.$$escapeHtml(opt_data.space.logoUrl), '" alt="', soy.$$escapeHtml(opt_data.space.name), '"></a></div></div></div></div><div class="name"><a href="', soy.$$escapeHtml(opt_data.space.homeUrl), '" title="', soy.$$escapeHtml(opt_data.space.name), '">', soy.$$escapeHtml(opt_data.space.name), '</a></div><div class="flyout-handle icon"></div></div><div class="acs-side-bar-content"><div class="acs-nav-wrapper"><div class="acs-nav" data-has-create-permission="', soy.$$escapeHtml(opt_data.hasCreatePermission), '" data-quick-links-state="', soy.$$escapeHtml(opt_data.quickLinksState), '" data-nav-type="', soy.$$escapeHtml(opt_data.navType), '">');
  Confluence.Templates.Sidebar.renderLinks(opt_data, output);
  output.append('</div></div>');
  if (opt_data.contextualNav) {
    Confluence.Templates.Sidebar.contextualNav(opt_data, output);
  }
  output.append('</div><div class="hidden"><a href="', soy.$$escapeHtml(opt_data.space.browseSpaceUrl), '" id="space-pages-link"></a><script type="text/x-template" title="logo-config-content"><h2>', soy.$$escapeHtml("Space Details"), '</h2><div class="personal-space-logo-hint">', AJS.format("Your profile picture is used as the logo for your personal space. \x3ca href\x3d\x22{0}\x22 target\x3d\x22_blank\x22\x3eChange your profile picture\x3c/a\x3e.","" + '/users/profile/editmyprofilepicture.action'), '</div><\/script></div></div>');
  Confluence.Templates.Sidebar.renderSpaceToolsSection({advancedLinks: opt_data.advancedLinks, hasConfigurePermission: opt_data.hasConfigurePermission, currentlyViewed: opt_data.collectorToHighlight == 'spacebar-advanced'}, output);
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Sidebar.renderLinks = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="acs-nav-sections">');
  if (opt_data.mainLinks.length) {
    Confluence.Templates.Sidebar.renderLinksSection({links: opt_data.mainLinks, sectionClass: 'main-links-section', collectorToHighlight: opt_data.collectorToHighlight}, output);
  }
  if (opt_data.quickLinksState != 'hide') {
    output.append('<div class="quick-links-wrapper">');
    if (opt_data.quickLinks.length) {
      output.append('<h5 class="ia-quick-links-header-title">', soy.$$escapeHtml("Space shortcuts"), '</h5>');
      Confluence.Templates.Sidebar.renderLinksSection({links: opt_data.quickLinks, sectionClass: 'quick-links-section tipsy-enabled', collectorToHighlight: null}, output);
    } else if (opt_data.hasConfigurePermission) {
      output.append('<h5 class="ia-quick-links-header-title">', soy.$$escapeHtml("Space shortcuts"), '</h5><p class="tip">', AJS.format("Here you can add shortcut links to the most important content for your team or project. \x3ca href\x3d\x22{0}\x22 class\x3d\x22{1}\x22\x3eConfigure sidebar\x3c/a\x3e.",'','configure-sidebar'), '</p>');
    }
    output.append('</div>');
  }
  output.append('</div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Sidebar.renderLinksSection = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (opt_data.links.length) {
    output.append('<div class="', soy.$$escapeHtml(opt_data.sectionClass), ' ', (opt_data.highlightSection) ? ' current-section' : '', '"><ul class="acs-nav-list">');
    var linkList103 = opt_data.links;
    var linkListLen103 = linkList103.length;
    for (var linkIndex103 = 0; linkIndex103 < linkListLen103; linkIndex103++) {
      var linkData103 = linkList103[linkIndex103];
      output.append('<li class="acs-nav-item ', soy.$$escapeHtml(linkData103.styleClass), (opt_data.collectorToHighlight && linkData103.collectorKey == opt_data.collectorToHighlight) ? ' current-item' : '', '"', (linkData103.collectorKey) ? 'data-collector-key="' + soy.$$escapeHtml(linkData103.collectorKey) + '"' : '', '><a class="acs-nav-item-link tipsy-enabled" href="', soy.$$escapeHtml(linkData103.url), '" data-collapsed-tooltip="', soy.$$escapeHtml(linkData103.tooltip), '"><span class="icon"></span><span class="acs-nav-item-label">', soy.$$escapeHtml(linkData103.title), '</span></a></li>');
    }
    output.append('</ul></div>');
  }
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Sidebar.contextualNav = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="ia-secondary-container tipsy-enabled" data-tree-type="', (opt_data.forBlogs) ? 'blogs' : (opt_data.forSettings) ? 'settings' : soy.$$escapeHtml(opt_data.navType), '">');
  if (opt_data.forBlogs) {
    output.append('<div class="ia-secondary-header"><h5 class="ia-secondary-header-title blog"><span class="icon"></span><span class="label">', soy.$$escapeHtml("Blog"), '</span></h5></div><div class="ia-secondary-content">');
    Confluence.Templates.Sidebar.pagetreeList({pagetree: opt_data.contextualNav}, output);
    output.append('</div>');
  } else if (opt_data.forSettings) {
    output.append('<div class="ia-secondary-header"><h5 class="ia-secondary-header-title settings"><span class="label">', soy.$$escapeHtml("Advanced"), '</span></h5></div><div class="ia-secondary-content">');
    Confluence.Templates.Sidebar.pagetreeList({pagetree: opt_data.contextualNav}, output);
    output.append('</div>');
  } else if (opt_data.navType == 'page-tree') {
    output.append('<div class="ia-secondary-header"><h5 class="ia-secondary-header-title page-tree"><span class="icon"></span><span class="label">', soy.$$escapeHtml("Page tree"), '</span></h5></div>', (opt_data.pageTreeEmpty) ? '<p class="tip">' + AJS.format("Get started by adding some pages to this space. \x3ca href\x3d\x22{0}\x22 class\x3d\x22{1}\x22\x3eCreate page\x3c/a\x3e.","" + '/pages/createpage.action?spaceKey=' + opt_data.space.key,'page-tree-create-child-page-link') + '</p>' : '<div class="ia-secondary-content">' + opt_data.contextualNav + '</div>');
  } else {
    Confluence.Templates.Sidebar.Pages.renderPageContextualNav({pageContextualNav: opt_data.contextualNav, hasCreatePermission: opt_data.hasCreatePermission}, output);
  }
  output.append('</div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Sidebar.pagetreeList = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<ul class="', (opt_data.isSubtree) ? 'ia-subpagetree' : 'ia-pagetree', '">');
  var itemList177 = opt_data.pagetree;
  var itemListLen177 = itemList177.length;
  for (var itemIndex177 = 0; itemIndex177 < itemListLen177; itemIndex177++) {
    var itemData177 = itemList177[itemIndex177];
    Confluence.Templates.Sidebar.pagetreeItem(itemData177, output);
  }
  output.append('</ul>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Sidebar.throbber = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="content-container"><div class="throbber-container"><div class="throbber"><div class="spinner"></div><span>', soy.$$escapeHtml("Loading..."), '</span></div></div></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Sidebar.treeThrobber = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('\t<ul class="ia-subpagetree"><li class="acs-tree-item leaf"><span class="node-title">', soy.$$escapeHtml("Loading..."), '</span></li></ul>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Sidebar.pagetreeItem = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<li class="acs-tree-item', (opt_data.hasChildren) ? (opt_data.children.length) ? ' opened' : ' closed' : ' leaf', (opt_data.groupType) ? ' grouping' : '', (opt_data.active) ? ' current-item' : '', '"', (opt_data.pageId) ? ' data-page-id="' + soy.$$escapeHtml(opt_data.pageId) + '"' : '', (opt_data.groupType) ? ' data-group-type="' + soy.$$escapeHtml(opt_data.groupType) + '" data-group-value="' + soy.$$escapeHtml(opt_data.groupValue) + '"' : '', '>', (! opt_data.groupType) ? '<a href="' + soy.$$escapeHtml(opt_data.url) + '">' : '', '<span class="icon ', (opt_data.hasChildren) ? (opt_data.children.length) ? 'icon-section-opened' : 'icon-section-closed' : '', '"></span><span class="node-title navigation-pseudo-link">', soy.$$escapeHtml(opt_data.title), '</span>', (! opt_data.groupType) ? '</a>' : '');
  if (opt_data.children && opt_data.children.length > 0) {
    Confluence.Templates.Sidebar.pagetreeList({pagetree: opt_data.children, isSubtree: true}, output);
  }
  output.append('</li>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Sidebar.renderSpaceToolsSection = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="space-tools-section"><div id="space-tools-menu-additional-items" class="hidden">');
  var linkList247 = opt_data.advancedLinks;
  var linkListLen247 = linkList247.length;
  for (var linkIndex247 = 0; linkIndex247 < linkListLen247; linkIndex247++) {
    var linkData247 = linkList247[linkIndex247];
    output.append('<div data-label="', soy.$$escapeHtml(linkData247.title), '" data-class="', soy.$$escapeHtml(linkData247.styleClass), '" data-href="', soy.$$escapeHtml(linkData247.url), '">', soy.$$escapeHtml(linkData247.title), '</div>');
  }
  output.append((opt_data.hasConfigurePermission) ? '<div data-label="' + soy.$$escapeHtml("Configure sidebar") + '" data-class="configure-sidebar" data-href="">' + soy.$$escapeHtml("Configure sidebar") + '</div>' : '', '</div><div id="space-tools-dd-dummy"></div><a id="space-tools-menu-trigger" class="aui-button aui-button-subtle aui-dropdown2-trigger tipsy-enabled', (opt_data.currentlyViewed) ? ' current-item' : '', '" aria-owns="space-tools-dd-dummy"><span class="aui-icon aui-icon-small aui-iconfont-configure">Configure</span><span class="label">', soy.$$escapeHtml("Space tools"), '</span></a><a class="expand-collapse-trigger"></a></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Sidebar.spaceToolsMenu = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="space-tools-menu"><div class="aui-dropdown2-section"><ul class="space-tools-navigation">');
  var linkList274 = opt_data.spaceToolLinks;
  var linkListLen274 = linkList274.length;
  for (var linkIndex274 = 0; linkIndex274 < linkListLen274; linkIndex274++) {
    var linkData274 = linkList274[linkIndex274];
    output.append('<li><a href="', soy.$$escapeHtml(linkData274.href), '" title="', soy.$$escapeHtml(linkData274.label), '">', soy.$$escapeHtml(linkData274.label), '</a></li>');
  }
  output.append('</ul></div>');
  if (opt_data.spaceLinks.length > 0) {
    output.append('<div class="aui-dropdown2-section"><ul class="space-operations">');
    var linkList287 = opt_data.spaceLinks;
    var linkListLen287 = linkList287.length;
    for (var linkIndex287 = 0; linkIndex287 < linkListLen287; linkIndex287++) {
      var linkData287 = linkList287[linkIndex287];
      output.append('<li><a class="', soy.$$escapeHtml(linkData287.className), '" href="', soy.$$escapeHtml(linkData287.href), '" title="', soy.$$escapeHtml(linkData287.label), '">', soy.$$escapeHtml(linkData287.label), '</a></li>');
    }
    output.append('</ul></div>');
  }
  output.append('</div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Sidebar.configure = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="acs-nav-sections"><table id="acs-nav-list-main" class="acs-nav-list"></table><div class="acs-nav-list-quick-section', (opt_data.quickLinksState == 'hide') ? ' hidden-section' : '', '"><div class="quick-links-header"><h5>', soy.$$escapeHtml("Space shortcuts"), '</h5><a href="#" class="aui-icon aui-icon-small toggle-link" data-tooltip="', soy.$$escapeHtml("Hide/Show space shortcuts"), '"/></div><table id="acs-nav-list-quick" class="acs-nav-list"></table><p class="tip">', soy.$$escapeHtml("Click \x22Add link\x22 to add links to the sidebar."), '</p><a class="acs-add-link" href="#"><span class="icon"></span><span class="label">', soy.$$escapeHtml("Add link"), '</span></a></div><h5>', soy.$$escapeHtml("Navigation display options"), '</h5><form class="aui"><div class="radio"><input class="radio acs-nav-type" type="radio" name="nav-type" value="pages" id="nav-type-pages" ', (! opt_data.pageTree) ? 'checked' : '', '><label for="nav-type-pages">', soy.$$escapeHtml("Child pages"), '</label></div><div class="radio"><input class="radio acs-nav-type" type="radio" name="nav-type" value="page-tree" id="nav-type-tree" ', (opt_data.pageTree) ? 'checked' : '', '><label for="nav-type-tree">', soy.$$escapeHtml("Page tree"), '</label></div></form><button class="aui-style aui-button acs-done-link">', soy.$$escapeHtml("Done"), '</button></div>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-space-ia:soy-resources', location = 'soy/sidebar-pages.soy' */
// This file was automatically generated from sidebar-pages.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.Sidebar == 'undefined') { Confluence.Templates.Sidebar = {}; }
if (typeof Confluence.Templates.Sidebar.Pages == 'undefined') { Confluence.Templates.Sidebar.Pages = {}; }


Confluence.Templates.Sidebar.Pages.renderPageContextualNav = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="ia-secondary-header"><h5 class="ia-secondary-header-title pages"><span class="label">', soy.$$escapeHtml("Child pages"), '</span></h5></div><div class="ia-secondary-parent-content">');
  Confluence.Templates.Sidebar.Pages.parentPage({parentPage: opt_data.pageContextualNav.parentPage}, output);
  output.append('</div><div class="ia-secondary-current-content">');
  Confluence.Templates.Sidebar.Pages.currentPage({currentPage: opt_data.pageContextualNav.currentPage}, output);
  output.append('</div><div class="ia-secondary-content">');
  Confluence.Templates.Sidebar.Pages.childPages({children: opt_data.pageContextualNav, createPermission: opt_data.hasCreatePermission}, output);
  output.append('</div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Sidebar.Pages.childPages = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="contextual-nav-child-pages">');
  if (opt_data.children.initialChildPages.length) {
    output.append('<ul class="children">');
    Confluence.Templates.Sidebar.Pages.renderChildren({children: opt_data.children.initialChildPages}, output);
    output.append('</ul>');
    if (opt_data.children.remainingChildPages.length) {
      output.append('<ul class="more-children">');
      Confluence.Templates.Sidebar.Pages.renderChildren({children: opt_data.children.remainingChildPages}, output);
      output.append('</ul><a class="more-children-link" href=""><span class="icon"></span><span class="label">', soy.$$escapeHtml(AJS.format("{0} more child pages",opt_data.children.remainingChildPages.length)), '</span></a>');
    }
  }
  output.append((opt_data.createPermission && opt_data.children.createLink) ? '<a class="create-child-page-link" href="' + soy.$$escapeHtml(opt_data.children.createLink) + '"><span class="icon"></span><span class="label">' + soy.$$escapeHtml("Create child page") + '</span></a>' : '', '</div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Sidebar.Pages.currentPage = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.currentPage) ? '<ul class="ia-secondary-currentPage-title wiki' + ((opt_data.currentPage.active) ? ' current-item' : '') + '"><li><span class="icon"></span><span class="label">' + soy.$$escapeHtml(opt_data.currentPage.title) + '</span></li></ul>' : '');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Sidebar.Pages.parentPage = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.parentPage) ? '<ul class="parent ia-secondary-header-title wiki' + ((opt_data.parentPage.active) ? ' current-item' : '') + '"><li class="parent-item"><a class="parent-item-link" href="' + soy.$$escapeHtml(opt_data.parentPage.url) + '" title="' + soy.$$escapeHtml(opt_data.parentPage.title) + '"><span class="icon"></span><span class="label">' + soy.$$escapeHtml(opt_data.parentPage.title) + '</span></a></li></ul>' : '');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Sidebar.Pages.renderChildren = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  var childList65 = opt_data.children;
  var childListLen65 = childList65.length;
  for (var childIndex65 = 0; childIndex65 < childListLen65; childIndex65++) {
    var childData65 = childList65[childIndex65];
    output.append('<li class="child-item" data-page-id="', soy.$$escapeHtml(childData65.pageId), '"><span class="icon"></span><a href="', soy.$$escapeHtml(childData65.url), '" title="', soy.$$escapeHtml(childData65.title), '"><span class="label">', soy.$$escapeHtml(childData65.title), '</span></a></li>');
  }
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-space-ia:spacesidebar', location = 'js/linkbrowser-editor-adapter.js' */
AJS.$(function(){if(!$("body").hasClass("with-space-sidebar")){return}Confluence=Confluence||{};Confluence.Editor=Confluence.Editor||{};AJS.Rte=AJS.Rte||{};AJS.Rte.BookmarkManager=AJS.Rte.BookmarkManager||{};AJS.Rte.BookmarkManager.storeBookmark=AJS.$.noop;AJS.Rte.BookmarkManager.restoreBookmark=AJS.$.noop});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-space-ia:spacesidebar', location = 'js/sidebar-ia.js' */
(function(a){Confluence.Sidebar={};AJS.toInit(function(g){var s=g(window);var F=g(document);var w=Math.min(285,s.width()/3);var G=285;var E=150;var t=55;var q=AJS.contextPath();var m=q.length?q:"/";var p=AJS.Meta.get("space-key");var c=AJS.Meta.get("use-keyboard-shortcuts")?" "+"(\u2009[\u2009)":"";Confluence.Sidebar.collapseTooltip="Collapse sidebar"+c;Confluence.Sidebar.expandTooltip="Expand sidebar"+c;var f=g(".ia-splitter").children();var H=g(".ia-splitter-left");if(H.length<1){return}var n=g(".acs-side-bar");var y=H.find(".ia-fixed-sidebar");var d=g("<div>",{"class":"ia-splitter-handle tipsy-enabled","data-tooltip":Confluence.Sidebar.collapseTooltip}).appendTo(y);g("<div>",{"class":"ia-splitter-handle-highlight"}).appendTo(d);var h=g(".ia-secondary-container");var A=g("#footer, #studio-footer");Confluence.Sidebar.throbberDiv=i;h.length&&D(h.attr("data-tree-type"));s.scroll(x);s.resize(x);s.on("touchend",x);F.ready(x);AJS.bind("confluence.header-resized",x);g("#header-precursor img").load(x);Confluence.Sidebar.applyTooltip=u;l();AJS.bind("sidebar.exit-configure-mode",l);var j=g.cookie("confluence-sidebar.width")||w,e=j>E?j:t;k(e);v();y.css("visibility","visible");x();o();Confluence.Sidebar.createFlyouts(n);AJS.trigger("sidebar.finished-loading");s.one("pagetree-children-loaded",function(){var J=g(".plugin_pagetree_current");if(J.length){var K=J.offset();if(K.top>n.height()/2){n.scrollTop(K.top-n.height()/3)}if(K.left>n.width()/2){n.scrollLeft(K.left-n.width()/2)}}});AJS.bind("sidebar.enter-configure-mode",function(){b();I();y.addClass("configure-mode")});AJS.bind("sidebar.exit-configure-mode",function(){b();z();y.removeClass("configure-mode")});function b(){AJS.trigger("sidebar.hide-overlays")}function u(J,L){var K={live:true,gravity:"w",title:"data-tooltip",delayIn:500,delayOut:0,offset:5};g(J).tooltip(L?g.extend(K,L):K)}function l(){g(".acs-side-bar .quick-links-section").attr("data-collapsed-tooltip","Space shortcuts");g("#space-tools-menu-trigger").attr("data-collapsed-tooltip","Space tools");if(h.attr("data-tree-type")=="pages"){g(".acs-side-bar .ia-secondary-container").attr("data-collapsed-tooltip","Child pages");u(".collapsed .ia-secondary-container.tipsy-enabled",{title:"data-collapsed-tooltip"})}u(".expand-collapse-trigger");u(".ia-splitter-handle.tipsy-enabled");u(".collapsed .quick-links-section.tipsy-enabled, .collapsed .acs-nav-item > a.tipsy-enabled, .collapsed #space-tools-menu-trigger.tipsy-enabled",{title:"data-collapsed-tooltip"});u(".configure-mode .acs-side-bar-space-info.tipsy-enabled",{title:"data-configure-tooltip"});n.on("mousedown click scroll",b);g(window).on("scroll resize",b);AJS.bind("sidebar.hide-overlays",K);AJS.bind("sidebar.disable-tooltip",L);AJS.bind("sidebar.enable-all-tooltips",J);function L(P,O){var M=g(O).closest(".tipsy-enabled");if(M.size()!=1){return}M.removeClass("tipsy-enabled").addClass("tipsy-disabled").attr("title","");var N=M.data("tipsy");if(N){N.hoverState="out"}K()}function J(){g(".tipsy-disabled").removeClass("tipsy-disabled").addClass("tipsy-enabled")}function K(){g(".tipsy").remove()}}function v(){F.on("mousewheel",".ia-scrollable-section",function(M,N){var L=g(this).scrollTop();var K=g(this).get(0).scrollHeight-g(this).innerHeight()-1;if((N>0&&L<=0)||(N<0&&L>=K)){M.preventDefault()}else{if(g.browser.msie){M.preventDefault();var J=30;g(this).scrollTop(L+(-1*N*J))}}M.stopPropagation()})}function i(){var K=g(Confluence.Templates.Sidebar.throbber()),L=K.find(".spinner"),J=Raphael.spinner(L[0],10,"#666");K.find(".throbber").bind("remove",function(){J()});return K}function D(J){if(J==="blogs"){C(n,r)}else{if(J==="pages"){Confluence.Sidebar.Pages.installHandlers(n)}}}function r(M,N){var L=M.attr("data-group-type");var J=M.attr("data-group-value");var K=q+"/rest/ia/1.0/pagetree/blog/subtree";g.get(K,{spaceKey:p,groupType:L,groupValue:J}).done(N)}function C(J,K){J.delegate(".acs-tree-item > .icon, .acs-tree-item > .node-title","click",function(){var P=g(this);var O=P.parent();var L=O.find("> .icon");if(O.hasClass("opened")){O.children("ul").hide();O.removeClass("opened").addClass("closed");L.removeClass("icon-section-opened").addClass("icon-section-closed")}else{if(O.hasClass("closed")){var M=O.children("ul");if(M.length){M.show()}else{var N=g(Confluence.Templates.Sidebar.treeThrobber());O.append(N);K(O,function(R){var Q=g(Confluence.Templates.Sidebar.pagetreeList({pagetree:R,isSubtree:true}));N.remove();Q.appendTo(O)})}O.removeClass("closed").addClass("opened");L.removeClass("icon-section-closed").addClass("icon-section-opened")}}})}function x(){var J=H.offset().top,K=s.scrollTop(),L=s.scrollLeft();if(K<0){return}if(K>(F.height()-s.height())){return}if(L<0){return}if(L>(F.width()-s.width())){return}y.css({top:Math.max(J-K,0)+"px",left:Math.min(L*-1,0)+"px"})}function B(){A.css("margin-left",y.outerWidth()+"px")}function o(){var M=g("body");var K=false;var L=false;var N=function(O){L=true;O.preventDefault();f.one("selectstart",function(Q){Q.preventDefault()});var P=function(){if(y.width()<=E){k(t)}else{w=y.width()}L=false;M.off("mousemove.ia-splitter")};K=false;M.on("mousemove.ia-splitter",function(Q){if(Confluence.Sidebar.Configure.mode&&Q.pageX<G){return}k(Q.pageX);K=true});M.one("mouseup mouseleave",P)};d.on("mousedown.ia-splitter",function(O){N(O);b()}).click(function(){if(!K){J()}else{K=false}});Confluence.Sidebar.toggle=J;function J(){if(Confluence.Sidebar.Configure.mode){return}var O=y.width();if(O>t){if(O<=E){w=G;k(w)}else{w=O;k(t)}}else{k(w)}}}function k(J){J=Math.max(J,t);g.cookie("confluence-sidebar.width",J,{path:m,expires:365});if(J<=E){y.addClass("collapsed");d.attr("data-tooltip",Confluence.Sidebar.expandTooltip);AJS.trigger("sidebar.collapsed")}else{if(y.hasClass("collapsed")){y.removeClass("collapsed");d.attr("data-tooltip",Confluence.Sidebar.collapseTooltip);AJS.trigger("sidebar.expanded")}}y.width(J);f.eq(1).css("margin-left",J+"px");B()}function I(){if(y.width()<G){Confluence.Sidebar.widthBeforeConfiguring=y.width();k(G)}}function z(){if(Confluence.Sidebar.widthBeforeConfiguring){k(Confluence.Sidebar.widthBeforeConfiguring);Confluence.Sidebar.widthBeforeConfiguring=undefined}}})})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-space-ia:spacesidebar', location = 'js/configurable-nav.js' */
(function(a){AJS.Confluence.ConfigurableNav=AJS.RestfulTable.extend({initialize:function(c){var b=this;b.options=a.extend(true,c,{model:AJS.RestfulTable.EntryModel,Collection:Backbone.Collection.extend({url:c.resources.self,model:AJS.RestfulTable.EntryModel}),columns:[{id:"title"}]});b._events=b._events||AJS.RestfulTable.Events;b._event=b._event||AJS.RestfulTable.Events;b.classNames=AJS.RestfulTable.ClassNames;b.dataKeys=AJS.RestfulTable.DataKeys;b.$table=c.$el.addClass(this.classNames.RESTFUL_TABLE).addClass(this.classNames.ALLOW_HOVER).addClass("aui").addClass(b.classNames.LOADING);b.$table.prepend('<colgroup><col span="1" class="aui-restfultable-order"><col span="1"><col span="1" class="aui-restfultable-operations"></colgroup>');b.$tbody=a("<tbody/>");b._models=this._createCollection();b._rowClass=AJS.Confluence.ConfigurableNav.Row;b.editRows=[];b.enableReordering();b._models.bind("remove",function(d){a.each(b.getRows(),function(e,f){if(f.model===d){if(f.hasFocus()&&b._createRow){b._createRow.trigger(b._event.FOCUS)}b.removeRow(f)}})});a.get(b.options.resources.all,function(d){b.populate(d)});Confluence.Sidebar.applyTooltip(".hide-link, .show-link, .delete-link, .toggle-link",{gravity:"ne"})},enableReordering:function(){var b=this;this.$tbody.sortable({handle:"."+this.classNames.DRAG_HANDLE,helper:function(f,c){var d=c.clone(true).addClass(b.classNames.MOVEABLE);d.children().each(function(e){a(this).width(c.children().eq(e).width())});return d},start:function(c,d){var e=d.placeholder.find("td");d.item.addClass(b.classNames.MOVEABLE).children().each(function(f){a(this).width(e.eq(f).width())});d.placeholder.html('<td colspan="'+b.getColumnCount()+'">&nbsp;</td>').css("visibility","visible");b.getRowFromElement(d.item[0]).trigger(b._event.MODAL)},stop:function(c,d){if(jQuery(d.item[0]).is(":visible")){d.item.removeClass(b.classNames.MOVEABLE).children().attr("style","");d.placeholder.removeClass(b.classNames.ROW);b.getRowFromElement(d.item[0]).trigger(b._event.MODELESS)}},update:function(e,g){var c,d,f={},h=b.getRowFromElement(g.item[0]);if(h){if(b.options.reverseOrder){d=g.item.next();if(!d.length){f.position="First"}else{c=b.getRowFromElement(d).model;f.after=c.url()}}else{d=g.item.prev();if(!d.length){f.position="First"}else{c=b.getRowFromElement(d).model;f.after=c.url()}}f.spaceKey=AJS.Meta.get("space-key");a.ajax({url:h.model.url()+"/move",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(f),complete:function(){h.hideLoading()},success:function(i){AJS.triggerEvtForInst(b._event.REORDER_SUCCESS,b,[i])},error:function(j){var i=a.parseJSON(j.responseText||j.data);AJS.triggerEvtForInst(b._event.SERVER_ERROR,b,[i,j])}});h.showLoading()}},axis:"y",delay:0,containment:"document",cursor:"move",scroll:true,zIndex:8000});this.$tbody.bind("selectstart mousedown",function(c){return !a(c.target).is("."+b.classNames.DRAG_HANDLE)})}});AJS.Confluence.ConfigurableNav.ReadView=AJS.RestfulTable.CustomReadView.extend({render:function(b){return _.template('<span class="acs-nav-item-link" title="<%=title%>"><span class="icon"></span><span class="acs-nav-item-label"><%=title%></span></span>',{title:AJS.escapeHtml(b.title)})}});AJS.Confluence.ConfigurableNav.Row=AJS.RestfulTable.Row.extend({render:function(){var b=this,d=this.model.toJSON(),e=a("<td class='aui-restfultable-operations' />").append(this.renderOperations(d.canHide,d.hidden)),c=a('<td class="'+this.classNames.ORDER+'"/>').append(this.renderDragHandle());b._event=b._event||b._events;b.$el.attr("data-id",this.model.id);b.$el.append(c);a.each(b.columns,function(f,g){var h,k=a("<td />"),j=d[g.id];if(j){b.$el.attr("data-"+g.id,j)}h=new AJS.Confluence.ConfigurableNav.ReadView().render(d);k.append(h);b.$el.append(k)});b.$el.append(e);d.canHide&&d.hidden&&b.$el.addClass("hidden-link");b.$el.addClass(this.classNames.ROW+" "+b.classNames.READ_ONLY+" acs-nav-item "+d.styleClass);b.trigger(this._event.RENDER,this.$el,d);b.$el.trigger(this._event.CONTENT_REFRESHED,[b.$el]);return b},renderOperations:function(f,e){var c=this,b=a('<a href="#" class="aui-icon aui-icon-small"/>');if(f){function d(g){if(g.hasClass("hide-link")){g.attr("data-tooltip","Hide link")}else{g.attr("data-tooltip","Show link")}}b.addClass(e?"show-link":"hide-link").click(function(g){g.preventDefault();a.ajax({url:c.model.url()+(e?"/show":"/hide"),type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify({spaceKey:AJS.Meta.get("space-key")})}).done(function(){b.closest(".acs-nav-item").toggleClass("hidden-link");b.toggleClass("hide-link").toggleClass("show-link");d(b)})});d(b)}else{b.addClass("delete-link tipsy-enabled").click(function(g){g.preventDefault();if(a(".acs-nav").data("quick-links-state")!="hide"){AJS.trigger("sidebar.disable-tooltip",this);c.destroy()}}).attr("data-tooltip","Remove link")}return b},destroy:function(){this.model.destroy({data:{spaceKey:AJS.Meta.get("space-key")}})}})})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-space-ia:spacesidebar', location = 'js/sidebar-pages.js' */
(function(b){var a=AJS.Meta.get("context-path");Confluence.Sidebar.Pages={installHandlers:function(d){d.find(".more-children-link").click(function(f){f.preventDefault();d.find("ul.more-children").show();b(this).hide()})},quickLinksContent:function(){return new b.Deferred().resolve(b(".acs-side-bar .quick-links-wrapper").html())},childPageCollapsedContent:function(){var e=b(".acs-side-bar .ia-secondary-header");var d=b(".acs-side-bar .ia-secondary-parent-content");var g=b(".acs-side-bar .ia-secondary-current-content");var f=b(".acs-side-bar .ia-secondary-content");return new b.Deferred().resolve(b("<div>").append(b("<div>").addClass("acs-side-bar-flyout-wiki-wrapper").append(e.clone()).append(d.clone()).append(g.clone()).append(f.clone())).html())},pageTreeCollapsedContent:function(){var d=b(".page-tree-flyout-content");if(d.length==0){return c().pipe(function(e){var f=b("<div>").addClass("acs-side-bar-flyout-wiki-wrapper").append(Confluence.Templates.Sidebar.Pages.renderPageContextualNav({pageContextualNav:e,hasCreatePermission:b(".acs-nav").data("has-create-permission")}));b("body").append(b("<div>").addClass("page-tree-flyout-content hidden").append(f.clone()));return f})}else{return new b.Deferred().resolve(d.html())}}};function c(){return b.ajax({url:a+"/rest/ia/1.0/space/childPagesContextualNav",data:{pageId:AJS.Meta.get("page-id")}})}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-space-ia:spacesidebar', location = 'js/sidebar-links.js' */
AJS.$(function(){Confluence.Sidebar.Configure={mode:false};var b=AJS.$,m=AJS.Meta.get("context-path"),k=AJS.Meta.get("space-key"),i=b(".acs-side-bar"),q=i.find(".ia-secondary-container"),u=i.find(".project-shortcut-dialog-trigger"),c,o,j,l,g=b(".acs-nav");b.ajaxSetup({cache:false});b("body").on("click","#acs-configure-link, a.configure-sidebar",function(v){v.preventDefault();t()});function t(){AJS.trigger("sidebar-before-enter-configure-mode");l=g.data("nav-type");Confluence.Sidebar.Configure.mode=true;j=b(".acs-nav-sections .acs-nav-item.current-item").data("collector-key");c=Confluence.Sidebar.throbberDiv();c.height(b(".acs-nav-sections").height());b(".acs-nav-sections").replaceWith(c);q.hide();o=b(Confluence.Templates.Sidebar.configure({pageTree:l==="page-tree",quickLinksState:g.data("quick-links-state")})).hide();c.after(o);d(false);h();f();r();var w={};var v=function(){c.replaceWith(o);o.show()};b("#acs-nav-list-main").one(AJS.RestfulTable.Events.INITIALIZED,function(){w.main=true;w.quick&&v()});b("#acs-nav-list-quick").one(AJS.RestfulTable.Events.INITIALIZED,function(){w.quick=true;w.main&&v()});b(".acs-nav-type").change(function(x){s("nav-type",b(this).val(),function(y){q.data("tree-type",y);g.data("nav-type",y)})});b(".acs-done-link").click(function(x){x.preventDefault();b(".acs-done-link").attr("aria-disabled",true).prop("disabled",true);n()});b(".quick-links-header a").click(function(y){y.preventDefault();var x=g.data("quick-links-state")=="hide"?"show":"hide";s("quick-links-state",x,a)});AJS.$(".acs-side-bar-space-info").on("click.configurelogo",p);AJS.trigger("sidebar.enter-configure-mode")}function p(x){var w=AJS.$(".acs-side-bar-space-info > .flyout-handle");w.addClass("loading").spin();var v=WRM.require("wr!com.atlassian.confluence.plugins.confluence-space-ia:avatar-picker",function(){AJS.trigger("deferred.spaceia.open.configure.space")});v.always(function(){w.removeClass("loading").spinStop()});x.preventDefault()}function s(v,w,x){b.ajax({url:m+"/rest/ia/1.0/space/option",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify({spaceKey:k,option:v,value:w}),success:function(y){x(w)}})}function n(){if(l!==g.data("nav-type")){location.reload();return}c=Confluence.Sidebar.throbberDiv();c.height(o.height());o.replaceWith(c);d(true);e();q.show().css("display","");var v=function(){var x=b(Confluence.Templates.Sidebar.renderLinks({mainLinks:w.main,quickLinks:w.quick.reverse(),advancedLinks:w.advanced,hasConfigurePermission:true,collectorToHighlight:j,quickLinksState:g.data("quick-links-state")}));c.replaceWith(x);Confluence.Sidebar.Configure.mode=false;AJS.trigger("sidebar.exit-configure-mode")};var w={};b.get(m+"/rest/ia/1.0/link/main",{spaceKey:k,includeHidden:false}).done(function(x){w.main=x;w.quick&&w.advanced&&v()});b.get(m+"/rest/ia/1.0/link/quick",{spaceKey:k}).done(function(x){w.quick=x;w.main&&w.advanced&&v()});b.get(m+"/rest/ia/1.0/link/advanced",{spaceKey:k}).done(function(x){w.advanced=x;w.main&&w.quick&&v()});Confluence.Sidebar.Configure.Logo&&Confluence.Sidebar.Configure.Logo.unbind()}function h(){WRM.require("wr!com.atlassian.confluence.plugins.confluence-space-ia:link-dialog",function(){var v=new b.Deferred();b(".acs-add-link").click(function(w){v.done(function(){w.preventDefault();if(g.data("quick-links-state")!=="hide"){Confluence.Sidebar.LinkAdapter.hijackLinkBrowser();Confluence.Editor.LinkBrowser.open();b("#recentlyviewed-panel-id").click()}})}).addClass("acs-add-link-ready");if(AJS.Meta.get("space-key")){AJS.Confluence.EditorLoader.load(function(){v.resolve()},function(){AJS.log("Attempted to load editor for space ia side bar. Loading the editor failed.");v.reject()})}else{v.resolve()}})}function f(){var v=b("#acs-nav-list-quick");var x=b(".acs-nav-sections .tip").hide();var w=function(){if(Confluence.Sidebar.Configure.QuickLinks.isEmpty()){v.hide();x.show()}else{x.hide();v.show()}};AJS.bindEvt(AJS.RestfulTable.Events.INITIALIZED,w);AJS.bindEvt(AJS.RestfulTable.Events.ROW_ADDED,w);AJS.bindEvt(AJS.RestfulTable.Events.ROW_REMOVED,w)}function r(){Confluence.Sidebar.Configure.MainLinks=new AJS.Confluence.ConfigurableNav({$el:b("#acs-nav-list-main"),resources:{all:m+"/rest/ia/1.0/link/main?spaceKey="+k+"&includeHidden=true",self:m+"/rest/ia/1.0/link"}});Confluence.Sidebar.Configure.QuickLinks=new AJS.Confluence.ConfigurableNav({$el:b("#acs-nav-list-quick"),resources:{all:m+"/rest/ia/1.0/link/quick?spaceKey="+k,self:m+"/rest/ia/1.0/link"},reverseOrder:true})}function e(){Confluence.Sidebar.Configure.MainLinks.remove();Confluence.Sidebar.Configure.MainLinks.unbind();Confluence.Sidebar.Configure.QuickLinks.remove();Confluence.Sidebar.Configure.QuickLinks.unbind();b(AJS).unbind(AJS.RestfulTable.Events.INITIALIZED);b(AJS).unbind(AJS.RestfulTable.Events.ROW_ADDED);b(AJS).unbind(AJS.RestfulTable.Events.ROW_REMOVED)}function d(v){u.length&&u.toggleClass("project-shortcut-dialog-trigger",v)}function a(v){g.data("quick-links-state",v);if(v==="hide"){b(".acs-nav-list-quick-section").addClass("hidden-section")}else{b(".acs-nav-list-quick-section").removeClass("hidden-section")}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-space-ia:spacesidebar', location = 'js/sidebar-space-tools.js' */
AJS.toInit(function(f){var a=[];var d=[];var e;var h;var b;var g=f.browser.msie&&parseInt(f.browser.version,10)<=8;f("#space-tools-web-items div").each(function(){a.push({label:f(this).data("label"),href:f(this).data("href")})});f("#space-tools-menu-additional-items div").each(function(){d.push({className:f(this).data("class"),label:f(this).data("label"),href:f(this).data("href")})});h={hideDelay:null,width:170,displayShadow:false,calculatePositions:function(i,j){var k=j.target.offset();return{popupCss:{top:k.top-i.height(),left:k.left},arrowCss:{display:"none"}}},hideCallback:function(){AJS.trigger("sidebar.enable-all-tooltips")}};e=AJS.InlineDialog(f("#space-tools-menu-trigger"),"space-tools",function(j,i,k){j.html(Confluence.Templates.Sidebar.spaceToolsMenu({spaceToolLinks:a,spaceLinks:d}));f(i).one("click",function(l){if(f("#inline-dialog-space-tools").is(":visible")){setTimeout(function(){e.hide()},0)}});AJS.trigger("sidebar.disable-tooltip",i);AJS.trigger("sidebar.spacetools-loaded");k();return false},h);e.addClass("aui-dropdown2 aui-style-default");AJS.bind("sidebar.hide-overlays",e.hide);b=f(".expand-collapse-trigger");b.click(function(i){i.preventDefault();Confluence.Sidebar.toggle()});b.attr("data-tooltip",f(".ia-fixed-sidebar").hasClass("collapsed")?Confluence.Sidebar.expandTooltip:Confluence.Sidebar.collapseTooltip);AJS.bind("sidebar.collapsed",function(){b.attr("data-tooltip",Confluence.Sidebar.expandTooltip);c()});AJS.bind("sidebar.expanded",function(){b.attr("data-tooltip",Confluence.Sidebar.collapseTooltip);c()});c();function c(){if(g){f("#space-tools-menu-trigger").toggleClass("force-redraw")}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-space-ia:spacesidebar', location = 'js/sidebar-flyouts.js' */
(function(d){var b,c,a;Confluence.Sidebar.createFlyouts=function(g){b=f(d(".collapsed .quick-links-section"),Confluence.Sidebar.Pages.quickLinksContent,"sidebar-quick-links-flyout",{flyout:"quick-links"});var h=g.find(".ia-secondary-container");if(h.length&&h.attr("data-tree-type")=="pages"){c=f(d(".collapsed .ia-secondary-header-title.wiki"),Confluence.Sidebar.Pages.childPageCollapsedContent,"sidebar-children-flyout",{flyout:"children"})}if(h.length&&h.attr("data-tree-type")=="page-tree"){a=f(d(".collapsed .ia-secondary-header-title.page-tree"),Confluence.Sidebar.Pages.pageTreeCollapsedContent,"sidebar-page-tree-flyout",{flyout:"pagetree"})}};function f(g,j,i,l){var k=function(n,m,o){d(n).addClass("acs-side-bar-flyout ia-scrollable-section");d(n).empty().append(Confluence.Sidebar.throbberDiv());j().done(function(p){d(n).html(p)});AJS.trigger("sidebar.flyout-triggered",l);o();d(m).one("click",function(p){if(d("#inline-dialog-"+i).is(":visible")){setTimeout(function(){h.hide()},0)}});AJS.trigger("sidebar.disable-tooltip",m)};var h=AJS.InlineDialog(g,i,k,{gravity:"w",calculatePositions:e,useLiveEvents:true,hideDelay:null,hideCallback:function(){AJS.trigger("sidebar.enable-all-tooltips")}});AJS.bind("sidebar.hide-overlays",h.hide);return h}function e(h,k,p,g){var q=k.target.offset();var o=k.target.width();var l=k.target.height();var n={top:q.top+l/2-15,left:q.left+o+5,right:"auto"};var i=d(window);var m=20;n.maxHeight=i.height()+i.scrollTop()-n.top-m;if(d.browser.msie&&parseInt(d.browser.version,10)<=8){n.maxHeight-=40}var j={top:9};return{popupCss:n,arrowCss:j,gravity:"w"}}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-space-ia:spacesidebar', location = 'js/external/jquery.mousewheel.min.js' */
/*! Copyright (c) 2011 Brandon Aaron (http://brandonaaron.net)
 * Licensed under the MIT License (LICENSE.txt).
 *
 * Thanks to: http://adomas.org/javascript-mouse-wheel/ for some pointers.
 * Thanks to: Mathias Bank(http://www.mathias-bank.de) for a scope bug fix.
 * Thanks to: Seamus Leahy for adding deltaX and deltaY
 *
 * Version: 3.0.6
 * 
 * Requires: 1.2.2+
 */
(function(a){function d(b){var c=b||window.event,d=[].slice.call(arguments,1),e=0,f=!0,g=0,h=0;return b=a.event.fix(c),b.type="mousewheel",c.wheelDelta&&(e=c.wheelDelta/120),c.detail&&(e=-c.detail/3),h=e,c.axis!==undefined&&c.axis===c.HORIZONTAL_AXIS&&(h=0,g=-1*e),c.wheelDeltaY!==undefined&&(h=c.wheelDeltaY/120),c.wheelDeltaX!==undefined&&(g=-1*c.wheelDeltaX/120),d.unshift(b,e,g,h),(a.event.dispatch||a.event.handle).apply(this,d)}var b=["DOMMouseScroll","mousewheel"];if(a.event.fixHooks)for(var c=b.length;c;)a.event.fixHooks[b[--c]]=a.event.mouseHooks;a.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var a=b.length;a;)this.addEventListener(b[--a],d,!1);else this.onmousewheel=d},teardown:function(){if(this.removeEventListener)for(var a=b.length;a;)this.removeEventListener(b[--a],d,!1);else this.onmousewheel=null}},a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-space-ia:spacesidebar', location = 'js/sidebar-logo.js' */
AJS.toInit(function(f){Confluence.Sidebar.Configure.Logo={};var b=f(".acs-side-bar-space-info div.name a");var h;var a;var e=function(i){f(".space-logo .avatar-img").attr("src",AJS.Meta.get("context-path")+i)};var d=function(i){b.attr("title",i).text(i)};var g=function(j,i){if(!h){h=new j({onCrop:function(l,k){f.ajax({type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify({spaceKey:AJS.Meta.get("space-key"),spaceName:k,logoDataURI:l}),url:AJS.Meta.get("context-path")+"/rest/ia/1.0/space/setLogo",success:function(m){e(m.logoDownloadPath);d(m.name);h.hide()},error:function(m){h.setMessage("An error occurred while updating space details");h._removeSaveImageLoadingIcon()}})}});i.onDomReady()}h.show(f(".acs-side-bar-space-info div.name a").text());return false};var c=function(){var i=function(l,k,m){f(l).addClass("acs-side-bar-flyout");f(l).empty();l.html(AJS.template.load("logo-config-content"));l.unbind("mouseover mouseout");AJS.trigger("sidebar.disable-tooltip",k);m()};if(!a){a=AJS.InlineDialog(f(".acs-side-bar-space-info"),"space-logo-config",i,{gravity:"w",calculatePositions:j,useLiveEvents:true,hideCallback:function(){AJS.trigger("sidebar.enable-all-tooltips")},hideDelay:null,noBind:true,width:635})}function j(l,n,r,k){var s=n.target.offset();var q=n.target.width();var o=n.target.height();var p={top:s.top+o/2-15,left:s.left+q+5,right:"auto"};var m={top:9};return{popupCss:p,arrowCss:m,gravity:"w"}}a.show()};AJS.bind("sidebar-before-enter-configure-mode",function(){AJS.bind("deferred.spaceia.open.configure.space",function(i){if(AJS.Meta.get("space-key")=="~"+AJS.Meta.get("remote-user")){c()}else{require(["confluence-space-ia/avatar-picker/avatar-picker-dialog","confluence-space-ia/avatar-picker/fd-slider"],g)}i.preventDefault();return false})});Confluence.Sidebar.Configure.Logo.unbind=function(){f("#inline-dialog-space-logo-config .cancel").click();f(".acs-side-bar-space-info").off("click.configurelogo");AJS.unbind("deferred.spaceia.open.configure.space")}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-space-ia:sidebar-relevant', location = 'soy/sidebar-relevant.soy' */

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-space-ia:sidebar-relevant', location = 'js/relevant/content-heuristics.js' */

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-space-ia:sidebar-relevant', location = 'js/relevant/content-parser.js' */

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-space-ia:sidebar-relevant', location = 'js/relevant/content-structure.js' */

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-space-ia:sidebar-relevant', location = 'js/relevant/content-tracker.js' */

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-space-ia:sidebar-relevant', location = 'js/relevant/page-mode-view.js' */

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-space-ia:sidebar-relevant', location = 'js/relevant/keyboard-mode-view.js' */

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-space-ia:sidebar-relevant', location = 'js/relevant/controller.js' */

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.macros.core:flash-autosize', location = 'javascript/flash-autosize.js' */
AJS.toInit(function(d){function e(f,a){var b;20<=a?AJS.log("unable to auto size flash - took too long to load"):(b=d([]),f.each(function(){var c=d(this),a;if(this.GetVariable){if(!c.attr("height"))if(a=this.GetVariable("height"))c.height(a);else{b=b.add(c);return}c.attr("width")||((a=this.GetVariable("width"))?c.width(a):b=b.add(c))}}),b.length&&setTimeout(function(){e(b,a+1)},100))}e(d('embed[type="application/x-shockwave-flash"]'),0);d(window).bind("render-content-loaded",function(f,a){e(d('embed[type="application/x-shockwave-flash"]',
a),0)})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.editor.confluence-source-editor:atlassian-source-editor-view-storage-javascript', location = 'jscripts/source-editor/view-source.js' */
AJS.toInit(function(a){if(a("#action-view-storage-link").length){a("#action-source-editor-view-storage-link").closest("li").hide()}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.macros.advanced:blog-post-resources', location = 'com/atlassian/confluence/plugins/macros/advanced/blog-posts.js' */
jQuery(function(a){a(".macro-blank-experience .create-post").bind("click",function(){var b=AJS.Meta.get("base-url")+"/pages/createblogpost.action?spaceKey="+AJS.Meta.get("space-key");window.location=b})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.view-source:view-source-menu-resources', location = 'com/atlassian/confluence/plugins/viewsource/js/viewsource.js' */
AJS.toInit(function(a){a("#action-view-source-link").click(function(a){window.open(this.href,(this.id+"-popupwindow").replace(/-/g,"_"),"width=800, height=600, scrollbars, resizable");a.preventDefault();return!1})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.view-storage-format:view-storage-menu-resources', location = 'com/atlassian/confluence/plugins/viewstorage/js/viewstorage.js' */
AJS.toInit(function(a){a(".view-storage-link, .view-storage-link a").click(function(b){window.open(this.href,(this.id+"-popupwindow").replace(/-/g,"_"),"width=800, height=600, scrollbars, resizable");b.preventDefault();return false})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.quickedit:quick-comment-hide-traditional', location = 'jscripts/add-comment-hider.js' */
AJS.toInit(function(a){a("#comments-actions").hide()});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
