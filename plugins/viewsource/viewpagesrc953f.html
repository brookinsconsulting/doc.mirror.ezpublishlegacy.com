                    
    
                    
    
                    
    
<!DOCTYPE html>
<html>
    
<!-- Mirrored from doc.ez.no/plugins/viewsource/viewpagesrc.action?pageId=19235241 by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 21 Oct 2014 10:34:55 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
        <title>View Source</title>
        <link rel="canonical" href="../../pages/viewpage953f.html?pageId=19235241" />
        <link type="text/css" rel="stylesheet" href="../../s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/73/_/download/superbatch/css/batch.css" media="all">
<link type="text/css" rel="stylesheet" href="../../s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/73/_/download/superbatch/css/batch934e.css?media=print" media="print">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/73/_/download/superbatch/css/batch.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<!--[if lte IE 8]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/73/_/download/superbatch/css/batch.css?conditionalComment=lte+IE+8" media="all">
<![endif]-->
<!--[if lte IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/73/_/download/superbatch/css/batch.css?conditionalComment=lte+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/1f2a9c4c7f2593422cc9b02d1a652a22/_/download/contextbatch/css/plugin.viewsource/batch.css" media="all">
<link type="text/css" rel="stylesheet" href="../../s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/70f6d025b64de5008ccd042576cd8d90/_/download/contextbatch/css/page/batch.css" media="all">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/70f6d025b64de5008ccd042576cd8d90/_/download/contextbatch/css/page/batch.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/26ac2724af3c6ece1051365650d982fa/_/download/contextbatch/css/editor-content/batch.css" media="all">
<link type="text/css" rel="stylesheet" href="../../s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/1.3/_/download/batch/com.atlassian.confluence.plugins.confluence-hig/com.atlassian.confluence.plugins.confluence-highlight-ac" media="all">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/1.3/_/download/batch/com.atlassian.confluence.plugins.confluence-highlight-actions:highlighting-experiment-resources/com.atlassian.confluence.plugins.confluence-highlight-actions:highlighting-experiment-resources.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/51/_/styles/colorsb538.css?spaceKey=EZP" media="all">
<link type="text/css" rel="stylesheet" href="../../s/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/51/_/styles/customb538.css?spaceKey=EZP" media="all">

    </head>

    <body class="mceContentBody aui-theme-default wiki-content fullsize">
        <p>&nbsp;</p>         <table class="wysiwyg-macro" data-macro-name="info" style="background-image: url(../servlet/confluence/placeholder/macro-headingd35c.png?definition=e2luZm99&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><p>FieldType identifier: <code>ezimage</code><br />Validators: File size<br />Value object: <code>\eZ\Publish\Core\FieldType\Image\Value</code><span><br />Associated services: <code><span>ezpublish.fieldType.ezimage.variation_service</span></code></span></p></td></tr></table><p><img class="editor-inline-macro" src="../servlet/confluence/placeholder/macro4170.png?definition=e3RvY30&amp;locale=en_GB&amp;version=2" data-macro-name="toc"></p><p>The image FieldType allows you to store an image file.</p><p>A <strong>variation service</strong> handles conversion of the original image into different formats and sizes through a set of pre-configured named variations: large, small, medium, black &amp; white thumbnail...</p><h2>Value object</h2><p>The <code>value</code> property of an Image Field will return an <code>\eZ\Publish\Core\FieldType\Image\Value</code> object with the following properties:</p><table class="confluenceTable"><tbody><tr><th class="confluenceTh">Property</th><th class="confluenceTh">Type</th><th colspan="1" class="confluenceTh">Example</th><th colspan="1" class="confluenceTh">Description</th></tr><tr><td class="confluenceTd"><code>id</code></td><td class="confluenceTd">string</td><td colspan="1" class="confluenceTd"><code><span>0/8/4/1/1480-1-eng-GB/image.png</span>  </code></td><td colspan="1" class="confluenceTd"><p>The image's unique identifier. Usually the path, or a part of the path. To get the full path, use <code>uri</code> property.</p></td></tr><tr><td class="confluenceTd"><code>alternativeText</code></td><td class="confluenceTd">string</td><td colspan="1" class="confluenceTd"><code><span>This is a piece of text</span></code></td><td colspan="1" class="confluenceTd">The alternative text, as entered in the field's properties</td></tr><tr><td class="confluenceTd"><code><span>fileName</span></code></td><td class="confluenceTd">string</td><td colspan="1" class="confluenceTd"><code>image.png</code></td><td colspan="1" class="confluenceTd">The original image's filename, without the path</td></tr><tr><td colspan="1" class="confluenceTd"><code>fileSize</code></td><td colspan="1" class="confluenceTd">int</td><td colspan="1" class="confluenceTd"><code>37931</code></td><td colspan="1" class="confluenceTd">The original image's size, in bytes</td></tr><tr><td colspan="1" class="confluenceTd"><code>uri</code></td><td colspan="1" class="confluenceTd">string</td><td colspan="1" class="confluenceTd"><code><span>var/ezdemo_site/storage/images/0/8/4/1/1480-1-eng-GB/image.png</span></code></td><td colspan="1" class="confluenceTd">The original image's URI</td></tr><tr><td colspan="1" class="confluenceTd"><code>imageId</code></td><td colspan="1" class="confluenceTd">string</td><td colspan="1" class="confluenceTd"><code>240-1480</code></td><td colspan="1" class="confluenceTd">A special image ID, used by REST</td></tr></tbody></table><p>Using the variation service, variations of the original image can be obtained. Those are <code style="line-height: 1.4285715;">\eZ\Publish\SPI\Variation\Values\ImageVariation</code><span style="line-height: 1.4285715;"> objects with the following properties:</span></p><table class="confluenceTable"><tbody><tr><th class="confluenceTh">Property</th><th class="confluenceTh">Type</th><th class="confluenceTh">Example</th><th class="confluenceTh">Description</th></tr><tr><td colspan="1" class="confluenceTd"><code>width</code></td><td colspan="1" class="confluenceTd">int</td><td colspan="1" class="confluenceTd"><code>640</code></td><td colspan="1" class="confluenceTd">The variation's width in pixels</td></tr><tr><td colspan="1" class="confluenceTd"><code>height</code></td><td colspan="1" class="confluenceTd">int</td><td colspan="1" class="confluenceTd"><code>480</code></td><td colspan="1" class="confluenceTd">The variation's height in pixels</td></tr><tr><td colspan="1" class="confluenceTd"><code>name</code></td><td colspan="1" class="confluenceTd">string</td><td colspan="1" class="confluenceTd"><code>medium</code></td><td colspan="1" class="confluenceTd">The variation's identifier</td></tr><tr><td colspan="1" class="confluenceTd"><code>info</code></td><td colspan="1" class="confluenceTd">mixed</td><td colspan="1" class="confluenceTd"> </td><td colspan="1" class="confluenceTd">Extra info, such as EXIF data</td></tr><tr><td colspan="1" class="confluenceTd"><code>fileSize</code></td><td colspan="1" class="confluenceTd">int</td><td colspan="1" class="confluenceTd"> </td><td colspan="1" class="confluenceTd"> </td></tr><tr><td colspan="1" class="confluenceTd"><code>mimeType</code></td><td colspan="1" class="confluenceTd">string</td><td colspan="1" class="confluenceTd"> </td><td colspan="1" class="confluenceTd"> </td></tr><tr><td colspan="1" class="confluenceTd"><code>fileName</code></td><td colspan="1" class="confluenceTd">string</td><td colspan="1" class="confluenceTd"> </td><td colspan="1" class="confluenceTd"> </td></tr><tr><td colspan="1" class="confluenceTd"><code>dirPath</code></td><td colspan="1" class="confluenceTd">string</td><td colspan="1" class="confluenceTd"> </td><td colspan="1" class="confluenceTd"> </td></tr><tr><td colspan="1" class="confluenceTd"><code>uri</code></td><td colspan="1" class="confluenceTd">string</td><td colspan="1" class="confluenceTd"> </td><td colspan="1" class="confluenceTd">The variation's uri</td></tr><tr><td colspan="1" class="confluenceTd"><code>lastModified</code></td><td colspan="1" class="confluenceTd">DateTime</td><td colspan="1" class="confluenceTd"> </td><td colspan="1" class="confluenceTd">When the variation was last modified</td></tr></tbody></table><h2>FieldType options</h2><p>The Image FieldType supports one FieldDefinition option: the maximum size for the file.</p><h2>Using an Image Field</h2><h3>In templates</h3><p>When displayed using <code>ez_render_field</code>, an Image Field will output this type of HTML:</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-parameters="language=xml|linenumbers=true" style="background-image: url(../servlet/confluence/placeholder/macro-heading2841.png?definition=e2NvZGU6bGluZW51bWJlcnM9dHJ1ZXxsYW5ndWFnZT14bWx9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>&lt;img src="var/ezdemo_site/storage/images/0/8/4/1/1480-1-eng-GB/image_medium.png" width="844" height="430" alt="Alternative text" /></pre></td></tr></table><p>The size and height are picked from the used variation's attributes. By default, it will use the <code>original</code> variation, but any existing variation can be set using the <code>variation</code> parameter:</p><table class="wysiwyg-macro" data-macro-name="code" style="background-image: url(../servlet/confluence/placeholder/macro-heading34e7.png?definition=e2NvZGV9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>{{ ez_render_field(content, 'image', {'parameters':{ 'alias': 'imagelarge'}}) }}</pre></td></tr></table><p>The raw Field can also be used if needed. Image variations for the field's content can be obtained using the <code>ez_image_alias</code> Twig helper:</p><table class="wysiwyg-macro" data-macro-name="code" style="background-image: url(../servlet/confluence/placeholder/macro-heading34e7.png?definition=e2NvZGV9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>{% set imageAlias = ez_image_alias( field, versionInfo, 'medium' ) ) %}</pre></td></tr></table><p><span style="line-height: 1.4285715;">The variation's properties can be used to generate the required output:</span></p><table class="wysiwyg-macro" data-macro-name="code" style="background-image: url(../servlet/confluence/placeholder/macro-heading34e7.png?definition=e2NvZGV9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>&lt;img src="{{ asset( imageAlias.uri ) }}" width="{{ imageAlias.width }}" height="{{ imageAlias.height }}" alt="{{ field.value.alternativeText }}" /></pre></td></tr></table><h3>With the REST API</h3><p>Image Fields within REST are exposed by the <code>application/vnd.ez.api.Content</code> media-type. An image field will look like this:</p><table class="wysiwyg-macro" data-macro-name="info" data-macro-parameters="title=inputUri " style="background-image: url(../servlet/confluence/placeholder/macro-heading8004.png?definition=e2luZm86dGl0bGU9aW5wdXRVcmkgfQ&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><p>From 5.2 version, new images must be inputed using the <code>inputUri</code> property from <code>Image\Value</code>.</p><p><strong>The keys <code>id</code> and <code>path</code> still work, but a deprecation warning will be thrown.</strong></p></td></tr></table><table class="wysiwyg-macro" data-macro-name="code" data-macro-parameters="language=xml|linenumbers=true|title=Version >\= 5.2" style="background-image: url(/plugins/servlet/confluence/placeholder/macro-heading?definition=e2NvZGU6dGl0bGU9VmVyc2lvbiA-PSA1LjJ8bGluZW51bWJlcnM9dHJ1ZXxsYW5ndWFnZT14bWx9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>&lt;field>
    &lt;id>1480&lt;/id>
    &lt;fieldDefinitionIdentifier>image&lt;/fieldDefinitionIdentifier>
    &lt;languageCode>eng-GB&lt;/languageCode>
    &lt;fieldValue>
        &lt;value key="inputUri">/var/ezdemo_site/storage/images/0/8/4/1/1480-1-eng-GB/kidding.png&lt;/value>
        &lt;value key="alternativeText">&lt;/value>
        &lt;value key="fileName">kidding.png&lt;/value>
        &lt;value key="fileSize">37931&lt;/value>
        &lt;value key="imageId">240-1480&lt;/value>
        &lt;value key="uri">/var/ezdemo_site/storage/images/0/8/4/1/1480-1-eng-GB/kidding.png&lt;/value>
        &lt;value key="variations">
            &lt;value key="articleimage">
                &lt;value key="href">/api/ezp/v2/content/binary/images/240-1480/variations/articleimage&lt;/value>
            &lt;/value>
            &lt;value key="articlethumbnail">
                &lt;value key="href">/api/ezp/v2/content/binary/images/240-1480/variations/articlethumbnail&lt;/value>
            &lt;/value>
        &lt;/value>
    &lt;/fieldValue>
&lt;/field></pre></td></tr></table><table class="wysiwyg-macro" data-macro-name="code" data-macro-parameters="collapse=true|language=xml|linenumbers=true|title=Before 5.2" style="background-image: url(../servlet/confluence/placeholder/macro-headingaa44.png?definition=e2NvZGU6dGl0bGU9QmVmb3JlIDUuMnxsaW5lbnVtYmVycz10cnVlfGxhbmd1YWdlPXhtbHxjb2xsYXBzZT10cnVlfQ&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>&lt;field>
    &lt;id>1480&lt;/id>
    &lt;fieldDefinitionIdentifier>image&lt;/fieldDefinitionIdentifier>
    &lt;languageCode>eng-GB&lt;/languageCode>
    &lt;fieldValue>
        &lt;value key="id">var/ezdemo_site/storage/images/0/8/4/1/1480-1-eng-GB/kidding.png&lt;/value>
        &lt;value key="path">/var/ezdemo_site/storage/images/0/8/4/1/1480-1-eng-GB/kidding.png&lt;/value>
        &lt;value key="alternativeText">&lt;/value>
        &lt;value key="fileName">kidding.png&lt;/value>
        &lt;value key="fileSize">37931&lt;/value>
        &lt;value key="imageId">240-1480&lt;/value>
        &lt;value key="uri">/var/ezdemo_site/storage/images/0/8/4/1/1480-1-eng-GB/kidding.png&lt;/value>
        &lt;value key="variations">
            &lt;value key="articleimage">
                &lt;value key="href">/api/ezp/v2/content/binary/images/240-1480/variations/articleimage&lt;/value>
            &lt;/value>
            &lt;value key="articlethumbnail">
                &lt;value key="href">/api/ezp/v2/content/binary/images/240-1480/variations/articlethumbnail&lt;/value>
            &lt;/value>
        &lt;/value&gt;
    &lt;/fieldValue>
&lt;/field></pre></td></tr></table><p> </p><p>Children of fieldValue will list the general properties of the Field's original image (fileSize, fileName, inputUri...), as well as variations. For each variation, an uri is provided. Requested through REST, this resource will generate the variation if it doesn't exist yet, and list the variation details:</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-parameters="language=xml|linenumbers=true" style="background-image: url(../servlet/confluence/placeholder/macro-heading2841.png?definition=e2NvZGU6bGluZW51bWJlcnM9dHJ1ZXxsYW5ndWFnZT14bWx9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>&lt;ContentImageVariation media-type="application/vnd.ez.api.ContentImageVariation+xml" href="/api/ezp/v2/content/binary/images/240-1480/variations/tiny">
  &lt;uri>/var/ezdemo_site/storage/images/0/8/4/1/1480-1-eng-GB/kidding_tiny.png&lt;/uri>
  &lt;contentType>image/png&lt;/contentType>
  &lt;width>30&lt;/width>
  &lt;height>30&lt;/height>
  &lt;fileSize>1361&lt;/fileSize>
&lt;/ContentImageVariation></pre></td></tr></table><h2>From PHP code</h2><h3>Getting an image variation</h3><p>The variation service, <code>ezpublish.fieldType.ezimage.variation_service</code>,  can be used to generate/get variations for a field. It expects a VersionInfo, the Image Field and the variation name, as a string (<code>large</code>, <code>medium</code>...)</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-parameters="language=php|linenumbers=true|type=php" style="background-image: url(../servlet/confluence/placeholder/macro-headingd1cc.png?definition=e2NvZGU6bGluZW51bWJlcnM9dHJ1ZXxsYW5ndWFnZT1waHB8dHlwZT1waHB9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>$variation = $imageVariationHandler->getVariation(
    $imageField, $versionInfo, 'large'
);

echo $variation->uri;</pre></td></tr></table><h2>Manipulating image content</h2><h3>From PHP</h3><p>As for any fieldtype, there are several ways to input content to a field. For an image, the quickest is to call <code>setField()</code> on the ContentStruct:</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-parameters="language=php|linenumbers=true|type=php" style="background-image: url(../servlet/confluence/placeholder/macro-headingd1cc.png?definition=e2NvZGU6bGluZW51bWJlcnM9dHJ1ZXxsYW5ndWFnZT1waHB8dHlwZT1waHB9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>$createStruct = $contentService->newContentCreateStruct(
    $contentTypeService->loadContentType( 'image' ),
    'eng-GB'
);

$createStruct->setField( 'image', '/tmp/image.png' );
</pre></td></tr></table><p>In order to customize the Image's alternative texts, you must first get an Image\Value object, and set this property. For that, you can use the Image\Value::fromString() method, that accepts the path to a local file:</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-parameters="language=php|linenumbers=true|type=php" style="background-image: url(../servlet/confluence/placeholder/macro-headingd1cc.png?definition=e2NvZGU6bGluZW51bWJlcnM9dHJ1ZXxsYW5ndWFnZT1waHB8dHlwZT1waHB9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>$createStruct = $contentService->newContentCreateStruct(
    $contentTypeService->loadContentType( 'image' ),
    'eng-GB'
);

$imageField = \eZ\Publish\Core\FieldType\Image\Value::fromString( '/tmp/image.png' );
$imageField->alternativeText = 'My alternative text';
$createStruct->setField( 'image', $imageField );</pre></td></tr></table><p>You can also provide an hash of <code>Image\Value</code> properties, either to <code>setField()</code>, or to the constructor:</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-parameters="language=php|linenumbers=true|type=php" style="background-image: url(../servlet/confluence/placeholder/macro-headingd1cc.png?definition=e2NvZGU6bGluZW51bWJlcnM9dHJ1ZXxsYW5ndWFnZT1waHB8dHlwZT1waHB9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>$imageValue = new \eZ\Publish\Core\FieldType\Image\Value(
    array(
        'id' => '/tmp/image.png',
        'fileSize' => 37931,
        'fileName' => 'image.png',
        'alternativeText' => 'My alternative text'
    )
);

$createStruct->setField( 'image', $imageValue );</pre></td></tr></table><h3>From REST</h3><p>The REST API expects Field values to be provided in a hash-like structure. Those keys are identical to those expected by the Image\Value constructor: <code>fileName</code>, <code>fileSize</code>, <code>alternativeText</code>. In addition, a <code>data</code> key is also expected, with the image's content as a base 64 encoded string.</p><p>This is valid for both updating and creating:</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-parameters="language=xml|linenumbers=true|type=xml" style="background-image: url(../servlet/confluence/placeholder/macro-heading9147.png?definition=e2NvZGU6bGluZW51bWJlcnM9dHJ1ZXxsYW5ndWFnZT14bWx8dHlwZT14bWx9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>&lt;?xml version="1.0" encoding="UTF-8"?>
&lt;!-- or ContentUpdate -->
&lt;ContentCreate>
    &lt;!-- [...metadata...] -->

    &lt;fields>
        &lt;field>
            &lt;fieldDefinitionIdentifier>image&lt;/fieldDefinitionIdentifier>
            &lt;languageCode>eng-GB&lt;/languageCode>
            &lt;fieldValue>
                &lt;value key="fileName">rest-rocks.jpg&lt;/value>
                &lt;value key="fileSize">17589&lt;/value>
                &lt;value key="alternativeText">HTTP&lt;/value>
                &lt;value key="data">&lt;![CDATA[/9j/4AAQSkZJRgABAQEAZABkAAD/2wBDAAIBAQIBAQICAgICAgICAwUDAwMDAwYEBAMFBwYHBwcG
BwcICQsJCAgKCAcHCg0KCgsMDAwMBwkODw0MDgsMDAz/2[...]&lt;/value>
            &lt;/fieldValue>
        &lt;/field>
    &lt;/fields>
&lt;/ContentCreate></pre></td></tr></table><h2>Naming</h2><p>Each storage engine determines how image files are named.</p><h3>Legacy Storage Engine naming</h3><p>images are stored within the following directory structure:</p><p><code>&lt;varDir&gt;/&lt;StorageDir&gt;/&lt;ImagesStorageDir&gt;/&lt;FieIdId[-1]&gt;/&lt;FieIdId[-2]&gt;/&lt;FieIdId[-3]&gt;/&lt;FieIdId[-4]&gt;/&lt;FieldId&gt;-&lt;VersionNumber&gt;-&lt;LanguageCode&gt;/</code></p><p>With the following values:</p><ul style="list-style-type: square;"><li><code>VarDir</code> = var (default)</li><li><code>StorageDir</code> = <code>storage</code> (default)</li><li><span><code>ImagesStorageDir</code> = <code>images</code> (default)</span></li><li><span><code>FieldId</code> = <code>1480</code></span></li><li><span><code>VersionNumber</code> = <code>1</code></span></li><li><span><code>LanguageCode</code> = <code>eng-GB</code></span></li></ul><p><span>Images will be stored to <code>web/var/ezdemo_site/storage/images/0/8/4/1/1480-1-eng-GB</code>.</span></p><table class="wysiwyg-macro" data-macro-name="info" style="background-image: url(../servlet/confluence/placeholder/macro-headingd35c.png?definition=e2luZm99&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><p>Using the field ID digits <span>in reverse order </span>as the folder structure maximizes sharding of files through multiple folders on the filesystem.</p></td></tr></table><p>Within this folder, images will be named like the uploaded file, suffixed with an underscore and the variation name:</p><ul style="list-style-type: square;"><li>MyImage.png</li><li>MyImage_large.png</li><li>MyImage_rss.png</li></ul><h2>Changelog</h2><table class="confluenceTable"><tbody><tr><th class="confluenceTh">Version</th><th class="confluenceTh">Description</th></tr><tr><td class="confluenceTd">5.2</td><td class="confluenceTd">adding inputURI for input by API</td></tr><tr><td colspan="1" class="confluenceTd">5.4<br />2014.09</td><td colspan="1" class="confluenceTd">id property contains only the path of the image, not the full path</td></tr></tbody></table><p> </p><p> </p>
        <p>&nbsp;</p>
    </body>

<!-- Mirrored from doc.ez.no/plugins/viewsource/viewpagesrc.action?pageId=19235241 by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 21 Oct 2014 10:34:56 GMT -->
</html>
